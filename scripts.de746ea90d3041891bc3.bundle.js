function activar(){}function init(){!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).ApexCharts=e()}(this,function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function a(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(Object(i),!0).forEach(function(e){r(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var p,d,f=function(){function i(){e(this,i)}return n(i,[{key:"shadeRGBColor",value:function(t,e){var i=e.split(","),n=t<0?0:255,r=t<0?-1*t:t,o=parseInt(i[0].slice(4),10),a=parseInt(i[1],10),s=parseInt(i[2],10);return"rgb("+(Math.round((n-o)*r)+o)+","+(Math.round((n-a)*r)+a)+","+(Math.round((n-s)*r)+s)+")"}},{key:"shadeHexColor",value:function(t,e){var i=parseInt(e.slice(1),16),n=t<0?0:255,r=t<0?-1*t:t,o=i>>16,a=i>>8&255,s=255&i;return"#"+(16777216+65536*(Math.round((n-o)*r)+o)+256*(Math.round((n-a)*r)+a)+(Math.round((n-s)*r)+s)).toString(16).slice(1)}},{key:"shadeColor",value:function(t,e){return e.length>7?this.shadeRGBColor(t,e):this.shadeHexColor(t,e)}}],[{key:"bind",value:function(t,e){return function(){return t.apply(e,arguments)}}},{key:"isObject",value:function(e){return e&&"object"===t(e)&&!Array.isArray(e)&&null!=e}},{key:"listToArray",value:function(t){var e,i=[];for(e=0;e<t.length;e++)i[e]=t[e];return i}},{key:"extend",value:function(t,e){var i=this;"function"!=typeof Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(null!=n)for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e});var n=Object.assign({},t);return this.isObject(t)&&this.isObject(e)&&Object.keys(e).forEach(function(o){i.isObject(e[o])&&o in t?n[o]=i.extend(t[o],e[o]):Object.assign(n,r({},o,e[o]))}),n}},{key:"extendArray",value:function(t,e){var n=[];return t.map(function(t){n.push(i.extend(e,t))}),t=n}},{key:"monthMod",value:function(t){return t%12}},{key:"clone",value:function(e){if("[object Array]"===Object.prototype.toString.call(e)){for(var i=[],n=0;n<e.length;n++)i[n]=this.clone(e[n]);return i}if("object"===t(e)){var r={};for(var o in e)e.hasOwnProperty(o)&&(r[o]=this.clone(e[o]));return r}return e}},{key:"log10",value:function(t){return Math.log(t)/Math.LN10}},{key:"roundToBase10",value:function(t){return Math.pow(10,Math.floor(Math.log10(t)))}},{key:"roundToBase",value:function(t,e){return Math.pow(e,Math.floor(Math.log(t)/Math.log(e)))}},{key:"parseNumber",value:function(t){return null===t?t:parseFloat(t)}},{key:"randomId",value:function(){return(new Date%9e6).toString(16)}},{key:"noExponents",value:function(t){var e=String(t).split(/[eE]/);if(1===e.length)return e[0];var i="",n=t<0?"-":"",r=e[0].replace(".",""),o=Number(e[1])+1;if(o<0){for(i=n+"0.";o++;)i+="0";return i+r.replace(/^-/,"")}for(o-=r.length;o--;)i+="0";return r+i}},{key:"getDimensions",value:function(t){var e=getComputedStyle(t),i=[],n=t.clientHeight,r=t.clientWidth;return n-=parseFloat(e.paddingTop)+parseFloat(e.paddingBottom),r-=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight),i.push(r),i.push(n),i}},{key:"getBoundingClientRect",value:function(t){var e=t.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:t.clientWidth,height:t.clientHeight,x:e.left,y:e.top}}},{key:"getLargestStringFromArr",value:function(t){return t.reduce(function(t,e){return Array.isArray(e)&&(e=e.reduce(function(t,e){return t.length>e.length?t:e})),t.length>e.length?t:e},0)}},{key:"hexToRgba",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#999999",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.6;"#"!==t.substring(0,1)&&(t="#999999");var i=t.replace("#","");i=i.match(new RegExp("(.{"+i.length/3+"})","g"));for(var n=0;n<i.length;n++)i[n]=parseInt(1===i[n].length?i[n]+i[n]:i[n],16);return void 0!==e&&i.push(e),"rgba("+i.join(",")+")"}},{key:"getOpacityFromRGBA",value:function(t){return(t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))[3]}},{key:"rgb2hex",value:function(t){return(t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===t.length?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):""}},{key:"isColorHex",value:function(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)}},{key:"polarToCartesian",value:function(t,e,i,n){var r=(n-90)*Math.PI/180;return{x:t+i*Math.cos(r),y:e+i*Math.sin(r)}}},{key:"escapeString",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",i=t.toString().slice();return i=i.replace(/[` ~!@#$%^&*()_|+\-=?;:'",.<>{}[\]\\/]/gi,e)}},{key:"negToZero",value:function(t){return t<0?0:t}},{key:"moveIndexInArray",value:function(t,e,i){if(i>=t.length)for(var n=i-t.length+1;n--;)t.push(void 0);return t.splice(i,0,t.splice(e,1)[0]),t}},{key:"extractNumber",value:function(t){return parseFloat(t.replace(/[^\d.]*/g,""))}},{key:"findAncestor",value:function(t,e){for(;(t=t.parentElement)&&!t.classList.contains(e););return t}},{key:"setELstyles",value:function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t.style.key=e[i])}},{key:"isNumber",value:function(t){return!isNaN(t)&&parseFloat(Number(t))===t&&!isNaN(parseInt(t,10))}},{key:"isFloat",value:function(t){return Number(t)===t&&t%1!=0}},{key:"isSafari",value:function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}},{key:"isFirefox",value:function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1}},{key:"isIE11",value:function(){if(-1!==window.navigator.userAgent.indexOf("MSIE")||window.navigator.appVersion.indexOf("Trident/")>-1)return!0}},{key:"isIE",value:function(){var t=window.navigator.userAgent,e=t.indexOf("MSIE ");if(e>0)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(t.indexOf("Trident/")>0){var i=t.indexOf("rv:");return parseInt(t.substring(i+3,t.indexOf(".",i)),10)}var n=t.indexOf("Edge/");return n>0&&parseInt(t.substring(n+5,t.indexOf(".",n)),10)}}]),i}(),g=function(){function t(i){e(this,t),this.ctx=i,this.w=i.w}return n(t,[{key:"getDefaultFilter",value:function(t,e){var i=this.w;t.unfilter(!0),(new window.SVG.Filter).size("120%","180%","-5%","-40%"),"none"!==i.config.states.normal.filter?this.applyFilter(t,e,i.config.states.normal.filter.type,i.config.states.normal.filter.value):i.config.chart.dropShadow.enabled&&this.dropShadow(t,i.config.chart.dropShadow,e)}},{key:"addNormalFilter",value:function(t,e){var i=this.w;i.config.chart.dropShadow.enabled&&!t.node.classList.contains("apexcharts-marker")&&this.dropShadow(t,i.config.chart.dropShadow,e)}},{key:"addLightenFilter",value:function(t,e,i){var n=this,r=this.w,o=i.intensity;f.isFirefox()||(t.unfilter(!0),new window.SVG.Filter,t.filter(function(t){var i=r.config.chart.dropShadow;(i.enabled?n.addShadow(t,e,i):t).componentTransfer({rgb:{type:"linear",slope:1.5,intercept:o}})}),t.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(t.filterer.node))}},{key:"addDarkenFilter",value:function(t,e,i){var n=this,r=this.w,o=i.intensity;f.isFirefox()||(t.unfilter(!0),new window.SVG.Filter,t.filter(function(t){var i=r.config.chart.dropShadow;(i.enabled?n.addShadow(t,e,i):t).componentTransfer({rgb:{type:"linear",slope:o}})}),t.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(t.filterer.node))}},{key:"applyFilter",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;switch(i){case"none":this.addNormalFilter(t,e);break;case"lighten":this.addLightenFilter(t,e,{intensity:n});break;case"darken":this.addDarkenFilter(t,e,{intensity:n})}}},{key:"addShadow",value:function(t,e,i){var n=i.blur,r=i.top,o=i.left,a=i.color,s=i.opacity,l=t.flood(Array.isArray(a)?a[e]:a,s).composite(t.sourceAlpha,"in").offset(o,r).gaussianBlur(n).merge(t.source);return t.blend(t.source,l)}},{key:"dropShadow",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=e.top,r=e.left,o=e.blur,a=e.color,s=e.opacity,l=e.noUserSpaceOnUse,h=this.w;return t.unfilter(!0),f.isIE()&&"radialBar"===h.config.chart.type?t:(a=Array.isArray(a)?a[i]:a,t.filter(function(t){var e=null;e=f.isSafari()||f.isFirefox()||f.isIE()?t.flood(a,s).composite(t.sourceAlpha,"in").offset(r,n).gaussianBlur(o):t.flood(a,s).composite(t.sourceAlpha,"in").offset(r,n).gaussianBlur(o).merge(t.source),t.blend(t.source,e)}),l||t.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(t.filterer.node),t)}},{key:"setSelectionFilter",value:function(t,e,i){var n=this.w;if(void 0!==n.globals.selectedDataPoints[e]&&n.globals.selectedDataPoints[e].indexOf(i)>-1){t.node.setAttribute("selected",!0);var r=n.config.states.active.filter;"none"!==r&&this.applyFilter(t,e,r.type,r.value)}}},{key:"_scaleFilterSize",value:function(t){!function(e){for(var i in e)e.hasOwnProperty(i)&&t.setAttribute(i,e[i])}({width:"200%",height:"200%",x:"-50%",y:"-50%"})}}]),t}(),v=function(){function t(i){e(this,t),this.ctx=i,this.w=i.w,this.setEasingFunctions()}return n(t,[{key:"setEasingFunctions",value:function(){var t;if(!this.w.globals.easing){switch(this.w.config.chart.animations.easing){case"linear":t="-";break;case"easein":t="<";break;case"easeout":t=">";break;case"easeinout":t="<>";break;case"swing":t=function(t){return(t-=1)*t*(2.70158*t+1.70158)+1};break;case"bounce":t=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375};break;case"elastic":t=function(t){return t===!!t?t:Math.pow(2,-10*t)*Math.sin((t-.075)*(2*Math.PI)/.3)+1};break;default:t="<>"}this.w.globals.easing=t}}},{key:"animateLine",value:function(t,e,i,n){t.attr(e).animate(n).attr(i)}},{key:"animateCircleRadius",value:function(t,e,i,n,r,o){e||(e=0),t.attr({r:e}).animate(n,r).attr({r:i}).afterAll(function(){o()})}},{key:"animateCircle",value:function(t,e,i,n,r){t.attr({r:e.r,cx:e.cx,cy:e.cy}).animate(n,r).attr({r:i.r,cx:i.cx,cy:i.cy})}},{key:"animateRect",value:function(t,e,i,n,r){t.attr(e).animate(n).attr(i).afterAll(function(){return r()})}},{key:"animatePathsGradually",value:function(t){var e=this.w,i=0;e.config.chart.animations.animateGradually.enabled&&(i=e.config.chart.animations.animateGradually.delay),e.config.chart.animations.dynamicAnimation.enabled&&e.globals.dataChanged&&"bar"!==e.config.chart.type&&(i=0),this.morphSVG(t.el,t.realIndex,t.j,"line"!==e.config.chart.type||e.globals.comboCharts?t.fill:"stroke",t.pathFrom,t.pathTo,t.speed,t.delay*i)}},{key:"showDelayedElements",value:function(){this.w.globals.delayedElements.forEach(function(t){t.el.classList.remove("apexcharts-element-hidden")})}},{key:"animationCompleted",value:function(t){var e=this.w;e.globals.animationEnded||(e.globals.animationEnded=!0,"function"==typeof e.config.chart.events.animationEnd&&e.config.chart.events.animationEnd(this.ctx,{el:t,w:e}))}},{key:"morphSVG",value:function(t,e,i,n,r,o,a,s){var l=this,h=this.w;r||(r=t.attr("pathFrom")),o||(o=t.attr("pathTo"));var u=function(t){return"radar"===h.config.chart.type&&(a=1),"M 0 ".concat(h.globals.gridHeight)};(!r||r.indexOf("undefined")>-1||r.indexOf("NaN")>-1)&&(r=u()),(o.indexOf("undefined")>-1||o.indexOf("NaN")>-1)&&(o=u()),h.globals.shouldAnimate||(a=1),t.plot(r).animate(1,h.globals.easing,s).plot(r).animate(a,h.globals.easing,s).plot(o).afterAll(function(){f.isNumber(i)?i===h.globals.series[h.globals.maxValsInArrayIndex].length-2&&h.globals.shouldAnimate&&l.animationCompleted(t):"none"!==n&&h.globals.shouldAnimate&&(!h.globals.comboCharts&&e===h.globals.series.length-1||h.globals.comboCharts)&&l.animationCompleted(t),l.showDelayedElements()})}}]),t}(),y=function(){function t(i){e(this,t),this.ctx=i,this.w=i.w}return n(t,[{key:"drawLine",value:function(t,e,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#a8a8a8",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return this.w.globals.dom.Paper.line().attr({x1:t,y1:e,x2:i,y2:n,stroke:r,"stroke-dasharray":o,"stroke-width":a})}},{key:"drawRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#fefefe",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,u=this.w.globals.dom.Paper.rect();return u.attr({x:t,y:e,width:i>0?i:0,height:n>0?n:0,rx:r,ry:r,fill:o,opacity:a,"stroke-width":null!==s?s:0,stroke:null!==l?l:"none","stroke-dasharray":h}),u}},{key:"drawPolygon",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#e1e1e1",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"none";return this.w.globals.dom.Paper.polygon(t).attr({fill:i,stroke:e})}},{key:"drawCircle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this.w.globals.dom.Paper.circle(2*t);return null!==e&&i.attr(e),i}},{key:"drawPath",value:function(t){var e=t.d,i=void 0===e?"":e,n=t.stroke,r=void 0===n?"#a8a8a8":n,o=t.strokeWidth,a=void 0===o?1:o,s=t.fill,l=t.fillOpacity,h=void 0===l?1:l,u=t.strokeOpacity,c=void 0===u?1:u,p=t.classes,d=t.strokeLinecap,f=void 0===d?null:d,g=t.strokeDashArray,v=void 0===g?0:g,y=this.w;return null===f&&(f=y.config.stroke.lineCap),(i.indexOf("undefined")>-1||i.indexOf("NaN")>-1)&&(i="M 0 ".concat(y.globals.gridHeight)),y.globals.dom.Paper.path(i).attr({fill:s,"fill-opacity":h,stroke:r,"stroke-opacity":c,"stroke-linecap":f,"stroke-width":a,"stroke-dasharray":v,class:p})}},{key:"group",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.w.globals.dom.Paper.group();return null!==t&&e.attr(t),e}},{key:"move",value:function(t,e){return["M",t,e].join(" ")}},{key:"line",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=null;return null===i?n=["L",t,e].join(" "):"H"===i?n=["H",t].join(" "):"V"===i&&(n=["V",e].join(" ")),n}},{key:"curve",value:function(t,e,i,n,r,o){return["C",t,e,i,n,r,o].join(" ")}},{key:"quadraticCurve",value:function(t,e,i,n){return["Q",t,e,i,n].join(" ")}},{key:"arc",value:function(t,e,i,n,r,o,a){var s="A";return arguments.length>7&&void 0!==arguments[7]&&arguments[7]&&(s="a"),[s,t,e,i,n,r,o,a].join(" ")}},{key:"renderPaths",value:function(t){var e,i=t.j,n=t.realIndex,r=t.pathFrom,o=t.pathTo,s=t.stroke,l=t.strokeWidth,h=t.strokeLinecap,u=t.fill,c=t.animationDelay,p=t.initialSpeed,d=t.dataChangeSpeed,f=t.className,y=t.shouldClipToGrid,m=void 0===y||y,_=t.bindEventsOnPaths,x=void 0===_||_,b=t.drawShadow,w=void 0===b||b,S=this.w,C=new g(this.ctx),E=new v(this.ctx),T=this.w.config.chart.animations.enabled,P=T&&this.w.config.chart.animations.dynamicAnimation.enabled,L=!!(T&&!S.globals.resized||P&&S.globals.dataChanged&&S.globals.shouldAnimate);L?e=r:(e=o,S.globals.animationEnded=!0);var I=S.config.stroke.dashArray,O=0;O=Array.isArray(I)?I[n]:S.config.stroke.dashArray;var A=this.drawPath({d:e,stroke:s,strokeWidth:l,fill:u,fillOpacity:1,classes:f,strokeLinecap:h,strokeDashArray:O});A.attr("index",n),m&&A.attr({"clip-path":"url(#gridRectMask".concat(S.globals.cuid,")")}),"none"!==S.config.states.normal.filter.type?C.getDefaultFilter(A,n):S.config.chart.dropShadow.enabled&&w&&(!S.config.chart.dropShadow.enabledOnSeries||S.config.chart.dropShadow.enabledOnSeries&&-1!==S.config.chart.dropShadow.enabledOnSeries.indexOf(n))&&C.dropShadow(A,S.config.chart.dropShadow,n),x&&(A.node.addEventListener("mouseenter",this.pathMouseEnter.bind(this,A)),A.node.addEventListener("mouseleave",this.pathMouseLeave.bind(this,A)),A.node.addEventListener("mousedown",this.pathMouseDown.bind(this,A))),A.attr({pathTo:o,pathFrom:r});var R={el:A,j:i,realIndex:n,pathFrom:r,pathTo:o,fill:u,strokeWidth:l,delay:c};return!T||S.globals.resized||S.globals.dataChanged?!S.globals.resized&&S.globals.dataChanged||E.showDelayedElements():E.animatePathsGradually(a({},R,{speed:p})),S.globals.dataChanged&&P&&L&&E.animatePathsGradually(a({},R,{speed:d})),A}},{key:"drawPattern",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#a8a8a8",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return this.w.globals.dom.Paper.pattern(e,i,function(o){"horizontalLines"===t?o.line(0,0,i,0).stroke({color:n,width:r+1}):"verticalLines"===t?o.line(0,0,0,e).stroke({color:n,width:r+1}):"slantedLines"===t?o.line(0,0,e,i).stroke({color:n,width:r}):"squares"===t?o.rect(e,i).fill("none").stroke({color:n,width:r}):"circles"===t&&o.circle(e).fill("none").stroke({color:n,width:r})})}},{key:"drawGradient",value:function(t,e,i,n,r){var o,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,u=this.w;e=f.hexToRgba(e,n),i=f.hexToRgba(i,r);var c=0,p=1,d=1,g=null;null!==s&&(c=void 0!==s[0]?s[0]/100:0,p=void 0!==s[1]?s[1]/100:1,d=void 0!==s[2]?s[2]/100:1,g=void 0!==s[3]?s[3]/100:null);var v=!("donut"!==u.config.chart.type&&"pie"!==u.config.chart.type&&"bubble"!==u.config.chart.type);return o=u.globals.dom.Paper.gradient(v?"radial":"linear",null===l||0===l.length?function(t){t.at(c,e,n),t.at(p,i,r),t.at(d,i,r),null!==g&&t.at(g,e,n)}:function(t){(Array.isArray(l[h])?l[h]:l).forEach(function(e){t.at(e.offset/100,e.color,e.opacity)})}),v?o.attr("bubble"!==u.config.chart.type?{gradientUnits:"userSpaceOnUse",cx:u.globals.gridWidth/2,cy:u.globals.gridHeight/2,r:a}:{cx:.5,cy:.5,r:.8,fx:.2,fy:.2}):"vertical"===t?o.from(0,0).to(0,1):"diagonal"===t?o.from(0,0).to(1,1):"horizontal"===t?o.from(0,1).to(1,1):"diagonal2"===t&&o.from(1,0).to(0,1),o}},{key:"drawText",value:function(t){var e,i=t.x,n=t.y,r=t.text,o=t.textAnchor,a=t.fontSize,s=t.fontFamily,l=t.fontWeight,h=t.foreColor,u=t.opacity,c=t.cssClass,p=void 0===c?"":c,d=t.isPlainText,f=void 0===d||d,g=this.w;return void 0===r&&(r=""),o||(o="start"),h&&h.length||(h=g.config.chart.foreColor),s=s||g.config.chart.fontFamily,l=l||"regular",(e=Array.isArray(r)?g.globals.dom.Paper.text(function(t){for(var e=0;e<r.length;e++)0===e?t.tspan(r[e]):t.tspan(r[e]).newLine()}):f?g.globals.dom.Paper.plain(r):g.globals.dom.Paper.text(function(t){return t.tspan(r)})).attr({x:i,y:n,"text-anchor":o,"dominant-baseline":"auto","font-size":a,"font-family":s,"font-weight":l,fill:h,class:"apexcharts-text "+p}),e.node.style.fontFamily=s,e.node.style.opacity=u,e}},{key:"drawMarker",value:function(t,e,i){t=t||0;var n=i.pSize||0,r=null;if("square"===i.shape){var o=void 0===i.pRadius?n/2:i.pRadius;null!==e&&n||(n=0,o=0);var a=1.2*n+o,s=this.drawRect(a,a,a,a,o);s.attr({x:t-a/2,y:e-a/2,cx:t,cy:e,class:i.class?i.class:"",fill:i.pointFillColor,"fill-opacity":i.pointFillOpacity?i.pointFillOpacity:1,stroke:i.pointStrokeColor,"stroke-width":i.pWidth?i.pWidth:0,"stroke-opacity":i.pointStrokeOpacity?i.pointStrokeOpacity:1}),r=s}else"circle"!==i.shape&&i.shape||(f.isNumber(e)||(n=0,e=0),r=this.drawCircle(n,{cx:t,cy:e,class:i.class?i.class:"",stroke:i.pointStrokeColor,fill:i.pointFillColor,"fill-opacity":i.pointFillOpacity?i.pointFillOpacity:1,"stroke-width":i.pWidth?i.pWidth:0,"stroke-opacity":i.pointStrokeOpacity?i.pointStrokeOpacity:1}));return r}},{key:"pathMouseEnter",value:function(t,e){var i=this.w,n=new g(this.ctx),r=parseInt(t.node.getAttribute("index"),10),o=parseInt(t.node.getAttribute("j"),10);if("function"==typeof i.config.chart.events.dataPointMouseEnter&&i.config.chart.events.dataPointMouseEnter(e,this.ctx,{seriesIndex:r,dataPointIndex:o,w:i}),this.ctx.events.fireEvent("dataPointMouseEnter",[e,this.ctx,{seriesIndex:r,dataPointIndex:o,w:i}]),("none"===i.config.states.active.filter.type||"true"!==t.node.getAttribute("selected"))&&"none"!==i.config.states.hover.filter.type&&"none"!==i.config.states.active.filter.type&&!i.globals.isTouchDevice){var a=i.config.states.hover.filter;n.applyFilter(t,r,a.type,a.value)}}},{key:"pathMouseLeave",value:function(t,e){var i=this.w,n=new g(this.ctx),r=parseInt(t.node.getAttribute("index"),10),o=parseInt(t.node.getAttribute("j"),10);"function"==typeof i.config.chart.events.dataPointMouseLeave&&i.config.chart.events.dataPointMouseLeave(e,this.ctx,{seriesIndex:r,dataPointIndex:o,w:i}),this.ctx.events.fireEvent("dataPointMouseLeave",[e,this.ctx,{seriesIndex:r,dataPointIndex:o,w:i}]),"none"!==i.config.states.active.filter.type&&"true"===t.node.getAttribute("selected")||"none"!==i.config.states.hover.filter.type&&n.getDefaultFilter(t,r)}},{key:"pathMouseDown",value:function(t,e){var i=this.w,n=new g(this.ctx),r=parseInt(t.node.getAttribute("index"),10),o=parseInt(t.node.getAttribute("j"),10),a="false";if("true"===t.node.getAttribute("selected")){if(t.node.setAttribute("selected","false"),i.globals.selectedDataPoints[r].indexOf(o)>-1){var s=i.globals.selectedDataPoints[r].indexOf(o);i.globals.selectedDataPoints[r].splice(s,1)}}else{if(!i.config.states.active.allowMultipleDataPointsSelection&&i.globals.selectedDataPoints.length>0){i.globals.selectedDataPoints=[];var l=i.globals.dom.Paper.select(".apexcharts-series path").members,h=i.globals.dom.Paper.select(".apexcharts-series circle, .apexcharts-series rect").members,u=function(t){Array.prototype.forEach.call(t,function(t){t.node.setAttribute("selected","false"),n.getDefaultFilter(t,r)})};u(l),u(h)}t.node.setAttribute("selected","true"),a="true",void 0===i.globals.selectedDataPoints[r]&&(i.globals.selectedDataPoints[r]=[]),i.globals.selectedDataPoints[r].push(o)}if("true"===a){var c=i.config.states.active.filter;"none"!==c&&n.applyFilter(t,r,c.type,c.value)}else"none"!==i.config.states.active.filter.type&&n.getDefaultFilter(t,r);"function"==typeof i.config.chart.events.dataPointSelection&&i.config.chart.events.dataPointSelection(e,this.ctx,{selectedDataPoints:i.globals.selectedDataPoints,seriesIndex:r,dataPointIndex:o,w:i}),e&&this.ctx.events.fireEvent("dataPointSelection",[e,this.ctx,{selectedDataPoints:i.globals.selectedDataPoints,seriesIndex:r,dataPointIndex:o,w:i}])}},{key:"rotateAroundCenter",value:function(t){var e=t.getBBox();return{x:e.x+e.width/2,y:e.y+e.height/2}}},{key:"getTextRects",value:function(t,e,i,n){var r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=this.w,a=this.drawText({x:-200,y:-200,text:t,textAnchor:"start",fontSize:e,fontFamily:i,foreColor:"#fff",opacity:0});n&&a.attr("transform",n),o.globals.dom.Paper.add(a);var s=a.bbox();return r||(s=a.node.getBoundingClientRect()),a.remove(),{width:s.width,height:s.height}}},{key:"placeTextWithEllipsis",value:function(t,e,i){if("function"==typeof t.getComputedTextLength&&(t.textContent=e,e.length>0&&t.getComputedTextLength()>=i/.8)){for(var n=e.length-3;n>0;n-=3)if(t.getSubStringLength(0,n)<=i/.8)return void(t.textContent=e.substring(0,n)+"...");t.textContent="."}}}],[{key:"setAttrs",value:function(t,e){for(var i in e)e.hasOwnProperty(i)&&t.setAttribute(i,e[i])}}]),t}(),m=function(){function t(i){e(this,t),this.w=i.w,this.annoCtx=i}return n(t,[{key:"setOrientations",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("vertical"===t.label.orientation){var i=this.w.globals.dom.baseEl.querySelector(".apexcharts-xaxis-annotations .apexcharts-xaxis-annotation-label[rel='".concat(null!==e?e:0,"']"));if(null!==i){var n=i.getBoundingClientRect();i.setAttribute("x",parseFloat(i.getAttribute("x"))-n.height+4),i.setAttribute("y","top"===t.label.position?parseFloat(i.getAttribute("y"))+n.width:parseFloat(i.getAttribute("y"))-n.width);var r=this.annoCtx.graphics.rotateAroundCenter(i),o=r.y;i.setAttribute("transform","rotate(-90 ".concat(r.x," ").concat(o,")"))}}}},{key:"addBackgroundToAnno",value:function(t,e){var i=this.w;if(!e.label.text||e.label.text&&!e.label.text.trim())return null;var n=i.globals.dom.baseEl.querySelector(".apexcharts-grid").getBoundingClientRect(),r=t.getBoundingClientRect(),o=e.label.style.padding.left,a=e.label.style.padding.right,s=e.label.style.padding.top,l=e.label.style.padding.bottom;"vertical"===e.label.orientation&&(s=e.label.style.padding.left,l=e.label.style.padding.right,o=e.label.style.padding.top,a=e.label.style.padding.bottom);var h=this.annoCtx.graphics.drawRect(r.left-n.left-o,r.top-n.top-s,r.width+o+a,r.height+s+l,0,e.label.style.background,1,e.label.borderWidth,e.label.borderColor,0);return e.id&&h.node.classList.add(e.id),h}},{key:"annotationsBackground",value:function(){var t=this,e=this.w,i=function(i,n,r){var o=e.globals.dom.baseEl.querySelector(".apexcharts-".concat(r,"-annotations .apexcharts-").concat(r,"-annotation-label[rel='").concat(n,"']"));if(o){var a=o.parentNode,s=t.addBackgroundToAnno(o,i);s&&a.insertBefore(s.node,o)}};e.config.annotations.xaxis.map(function(t,e){i(t,e,"xaxis")}),e.config.annotations.yaxis.map(function(t,e){i(t,e,"yaxis")}),e.config.annotations.points.map(function(t,e){i(t,e,"point")})}},{key:"makeAnnotationDraggable",value:function(t,e,i){var n=this.w.config.annotations[e][i];t.draggable().on("dragend",function(t){var e=t.target.getAttribute("x"),i=t.target.getAttribute("y"),r=t.target.getAttribute("cx"),o=t.target.getAttribute("cy");n.x=e,n.y=i,r&&o&&(n.x=r,n.y=o)}),t.node.addEventListener("mousedown",function(e){e.stopPropagation(),t.selectize({pointSize:8,rotationPoint:!1,pointType:"rect"}),t.resize().on("resizedone",function(t){var e=t.target.getAttribute("width"),i=t.target.getAttribute("height"),r=t.target.getAttribute("r");n.width=e,n.height=i,r&&(n.radius=r)})})}},{key:"getStringX",value:function(t){var e=this.w,i=t;e.config.xaxis.convertedCatToNumeric&&e.globals.categoryLabels.length&&(t=e.globals.categoryLabels.indexOf(t)+1);var n=e.globals.labels.indexOf(t),r=e.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g text:nth-child("+(n+1)+")");return r&&(i=parseFloat(r.getAttribute("x"))),i}}]),t}(),_=function(){function t(i){e(this,t),this.w=i.w,this.annoCtx=i,this.invertAxis=this.annoCtx.invertAxis}return n(t,[{key:"addXaxisAnnotation",value:function(t,e,i){var n=this.w,r=this.invertAxis?n.globals.minY:n.globals.minX,o=this.invertAxis?n.globals.maxY:n.globals.maxX,a=this.invertAxis?n.globals.yRange[0]:n.globals.xRange,s=(t.x-r)/(a/n.globals.gridWidth);this.annoCtx.inversedReversedAxis&&(s=(o-t.x)/(a/n.globals.gridWidth));var l=t.label.text;"category"!==n.config.xaxis.type&&!n.config.xaxis.convertedCatToNumeric||this.invertAxis||n.globals.dataFormatXNumeric||(s=this.annoCtx.helpers.getStringX(t.x));var h=t.strokeDashArray;if(f.isNumber(s)){if(null===t.x2||void 0===t.x2){var u=this.annoCtx.graphics.drawLine(s+t.offsetX,0+t.offsetY,s+t.offsetX,n.globals.gridHeight+t.offsetY,t.borderColor,h,t.borderWidth);e.appendChild(u.node),t.id&&u.node.classList.add(t.id)}else{var c=(t.x2-r)/(a/n.globals.gridWidth);if(this.annoCtx.inversedReversedAxis&&(c=(o-t.x2)/(a/n.globals.gridWidth)),"category"!==n.config.xaxis.type&&!n.config.xaxis.convertedCatToNumeric||this.invertAxis||n.globals.dataFormatXNumeric||(c=this.annoCtx.helpers.getStringX(t.x2)),c<s){var p=s;s=c,c=p}var d=this.annoCtx.graphics.drawRect(s+t.offsetX,0+t.offsetY,c-s,n.globals.gridHeight+t.offsetY,0,t.fillColor,t.opacity,1,t.borderColor,h);d.node.classList.add("apexcharts-annotation-rect"),d.attr("clip-path","url(#gridRectMask".concat(n.globals.cuid,")")),e.appendChild(d.node),t.id&&d.node.classList.add(t.id)}var g="top"===t.label.position?4:n.globals.gridHeight,v=this.annoCtx.graphics.getTextRects(l,parseFloat(t.label.style.fontSize)),y=this.annoCtx.graphics.drawText({x:s+t.label.offsetX,y:g+t.label.offsetY-("vertical"===t.label.orientation?"top"===t.label.position?v.width/2-12:-v.width/2:0),text:l,textAnchor:t.label.textAnchor,fontSize:t.label.style.fontSize,fontFamily:t.label.style.fontFamily,fontWeight:t.label.style.fontWeight,foreColor:t.label.style.color,cssClass:"apexcharts-xaxis-annotation-label ".concat(t.label.style.cssClass," ").concat(t.id?t.id:"")});y.attr({rel:i}),e.appendChild(y.node),this.annoCtx.helpers.setOrientations(t,i)}}},{key:"drawXAxisAnnotations",value:function(){var t=this,e=this.w,i=this.annoCtx.graphics.group({class:"apexcharts-xaxis-annotations"});return e.config.annotations.xaxis.map(function(e,n){t.addXaxisAnnotation(e,i.node,n)}),i}}]),t}(),x=function(){function t(i){e(this,t),this.w=i.w,this.annoCtx=i}return n(t,[{key:"addYaxisAnnotation",value:function(t,e,i){var n,r=this.w,o=t.strokeDashArray,a=this._getY1Y2("y1",t),s=t.label.text;if(null===t.y2||void 0===t.y2){var l=this.annoCtx.graphics.drawLine(0+t.offsetX,a+t.offsetY,r.globals.gridWidth+t.offsetX,a+t.offsetY,t.borderColor,o,t.borderWidth);e.appendChild(l.node),t.id&&l.node.classList.add(t.id)}else{if((n=this._getY1Y2("y2",t))>a){var h=a;a=n,n=h}var u=this.annoCtx.graphics.drawRect(0+t.offsetX,n+t.offsetY,r.globals.gridWidth+t.offsetX,a-n,0,t.fillColor,t.opacity,1,t.borderColor,o);u.node.classList.add("apexcharts-annotation-rect"),u.attr("clip-path","url(#gridRectMask".concat(r.globals.cuid,")")),e.appendChild(u.node),t.id&&u.node.classList.add(t.id)}var c=this.annoCtx.graphics.drawText({x:("right"===t.label.position?r.globals.gridWidth:0)+t.label.offsetX,y:(n||a)+t.label.offsetY-3,text:s,textAnchor:t.label.textAnchor,fontSize:t.label.style.fontSize,fontFamily:t.label.style.fontFamily,fontWeight:t.label.style.fontWeight,foreColor:t.label.style.color,cssClass:"apexcharts-yaxis-annotation-label ".concat(t.label.style.cssClass," ").concat(t.id?t.id:"")});c.attr({rel:i}),e.appendChild(c.node)}},{key:"_getY1Y2",value:function(t,e){var i,n="y1"===t?e.y:e.y2,r=this.w;if(this.annoCtx.invertAxis){var o=r.globals.labels.indexOf(n);r.config.xaxis.convertedCatToNumeric&&(o=r.globals.categoryLabels.indexOf(n));var a=r.globals.dom.baseEl.querySelector(".apexcharts-yaxis-texts-g text:nth-child("+(o+1)+")");a&&(i=parseFloat(a.getAttribute("y")))}else i=r.globals.gridHeight-(n-r.globals.minYArr[e.yAxisIndex])/(r.globals.yRange[e.yAxisIndex]/r.globals.gridHeight),r.config.yaxis[e.yAxisIndex]&&r.config.yaxis[e.yAxisIndex].reversed&&(i=(n-r.globals.minYArr[e.yAxisIndex])/(r.globals.yRange[e.yAxisIndex]/r.globals.gridHeight));return i}},{key:"drawYAxisAnnotations",value:function(){var t=this,e=this.w,i=this.annoCtx.graphics.group({class:"apexcharts-yaxis-annotations"});return e.config.annotations.yaxis.map(function(e,n){t.addYaxisAnnotation(e,i.node,n)}),i}}]),t}(),b=function(){function t(i){e(this,t),this.w=i.w,this.annoCtx=i}return n(t,[{key:"addPointAnnotation",value:function(t,e,i){var n=this.w,r=0,o=0,a=0;if(this.annoCtx.invertAxis&&console.warn("Point annotation is not supported in horizontal bar charts."),"string"==typeof t.x){var s=n.globals.labels.indexOf(t.x);n.config.xaxis.convertedCatToNumeric&&(s=n.globals.categoryLabels.indexOf(t.x)),r=this.annoCtx.helpers.getStringX(t.x);var l=t.y;null===t.y&&(l=n.globals.series[t.seriesIndex][s]),o=n.globals.gridHeight-(l-n.globals.minYArr[t.yAxisIndex])/(n.globals.yRange[t.yAxisIndex]/n.globals.gridHeight)-parseFloat(t.label.style.fontSize)-t.marker.size,a=n.globals.gridHeight-(l-n.globals.minYArr[t.yAxisIndex])/(n.globals.yRange[t.yAxisIndex]/n.globals.gridHeight),n.config.yaxis[t.yAxisIndex]&&n.config.yaxis[t.yAxisIndex].reversed&&(o=(l-n.globals.minYArr[t.yAxisIndex])/(n.globals.yRange[t.yAxisIndex]/n.globals.gridHeight)+parseFloat(t.label.style.fontSize)+t.marker.size,a=(l-n.globals.minYArr[t.yAxisIndex])/(n.globals.yRange[t.yAxisIndex]/n.globals.gridHeight))}else r=(t.x-n.globals.minX)/(n.globals.xRange/n.globals.gridWidth),o=n.globals.gridHeight-(parseFloat(t.y)-n.globals.minYArr[t.yAxisIndex])/(n.globals.yRange[t.yAxisIndex]/n.globals.gridHeight)-parseFloat(t.label.style.fontSize)-t.marker.size,a=n.globals.gridHeight-(t.y-n.globals.minYArr[t.yAxisIndex])/(n.globals.yRange[t.yAxisIndex]/n.globals.gridHeight),n.config.yaxis[t.yAxisIndex]&&n.config.yaxis[t.yAxisIndex].reversed&&(o=(parseFloat(t.y)-n.globals.minYArr[t.yAxisIndex])/(n.globals.yRange[t.yAxisIndex]/n.globals.gridHeight)-parseFloat(t.label.style.fontSize)-t.marker.size,a=(t.y-n.globals.minYArr[t.yAxisIndex])/(n.globals.yRange[t.yAxisIndex]/n.globals.gridHeight));if(f.isNumber(r)){var h={pSize:t.marker.size,pWidth:t.marker.strokeWidth,pointFillColor:t.marker.fillColor,pointStrokeColor:t.marker.strokeColor,shape:t.marker.shape,pRadius:t.marker.radius,class:"apexcharts-point-annotation-marker ".concat(t.marker.cssClass," ").concat(t.id?t.id:"")},u=this.annoCtx.graphics.drawMarker(r+t.marker.offsetX,a+t.marker.offsetY,h);e.appendChild(u.node);var c=this.annoCtx.graphics.drawText({x:r+t.label.offsetX,y:o+t.label.offsetY,text:t.label.text?t.label.text:"",textAnchor:t.label.textAnchor,fontSize:t.label.style.fontSize,fontFamily:t.label.style.fontFamily,fontWeight:t.label.style.fontWeight,foreColor:t.label.style.color,cssClass:"apexcharts-point-annotation-label ".concat(t.label.style.cssClass," ").concat(t.id?t.id:"")});if(c.attr({rel:i}),e.appendChild(c.node),t.customSVG.SVG){var p=this.annoCtx.graphics.group({class:"apexcharts-point-annotations-custom-svg "+t.customSVG.cssClass});p.attr({transform:"translate(".concat(r+t.customSVG.offsetX,", ").concat(o+t.customSVG.offsetY,")")}),p.node.innerHTML=t.customSVG.SVG,e.appendChild(p.node)}if(t.image.path){var d=t.image.width?t.image.width:20,g=t.image.height?t.image.height:20;this.annoCtx.addImage({x:r+t.image.offsetX-d/2,y:o+t.image.offsetY-g/2,width:d,height:g,path:t.image.path,appendTo:e})}}}},{key:"drawPointAnnotations",value:function(){var t=this,e=this.w,i=this.annoCtx.graphics.group({class:"apexcharts-point-annotations"});return e.config.annotations.points.map(function(e,n){t.addPointAnnotation(e,i.node,n)}),i}}]),t}(),w={name:"en",options:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],toolbar:{exportToSVG:"Download SVG",exportToPNG:"Download PNG",exportToCSV:"Download CSV",menu:"Menu",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reset Zoom"}}},S=function(){function t(){e(this,t),this.yAxis={show:!0,showAlways:!1,showForNullSeries:!0,seriesName:void 0,opposite:!1,reversed:!1,logarithmic:!1,tickAmount:void 0,forceNiceScale:!1,max:void 0,min:void 0,floating:!1,decimalsInFloat:void 0,labels:{show:!0,minWidth:0,maxWidth:160,offsetX:0,offsetY:0,align:void 0,rotate:0,padding:20,style:{colors:[],fontSize:"11px",fontWeight:400,fontFamily:void 0,cssClass:""},formatter:void 0},axisBorder:{show:!1,color:"#e0e0e0",width:1,offsetX:0,offsetY:0},axisTicks:{show:!1,color:"#e0e0e0",width:6,offsetX:0,offsetY:0},title:{text:void 0,rotate:90,offsetY:0,offsetX:0,style:{color:void 0,fontSize:"11px",fontWeight:900,fontFamily:void 0,cssClass:""}},tooltip:{enabled:!1,offsetX:0},crosshairs:{show:!0,position:"front",stroke:{color:"#b6b6b6",width:1,dashArray:0}}},this.pointAnnotation={x:0,y:null,yAxisIndex:0,seriesIndex:0,marker:{size:4,fillColor:"#fff",strokeWidth:2,strokeColor:"#333",shape:"circle",offsetX:0,offsetY:0,radius:2,cssClass:""},label:{borderColor:"#c2c2c2",borderWidth:1,text:void 0,textAnchor:"middle",offsetX:0,offsetY:-15,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}},customSVG:{SVG:void 0,cssClass:void 0,offsetX:0,offsetY:0},image:{path:void 0,width:20,height:20,offsetX:0,offsetY:0}},this.yAxisAnnotation={y:0,y2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,yAxisIndex:0,label:{borderColor:"#c2c2c2",borderWidth:1,text:void 0,textAnchor:"end",position:"right",offsetX:0,offsetY:-3,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.xAxisAnnotation={x:0,x2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,label:{borderColor:"#c2c2c2",borderWidth:1,text:void 0,textAnchor:"middle",orientation:"vertical",position:"top",offsetX:0,offsetY:0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.text={x:0,y:0,text:"",textAnchor:"start",foreColor:void 0,fontSize:"13px",fontFamily:void 0,fontWeight:400,appendTo:".apexcharts-annotations",backgroundColor:"transparent",borderColor:"#c2c2c2",borderRadius:0,borderWidth:0,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2},this.shape={x:0,y:0,type:"rect",width:"100%",height:50,appendTo:".apexcharts-annotations",backgroundColor:"#fff",opacity:1,borderWidth:0,borderRadius:4,borderColor:"#c2c2c2"}}return n(t,[{key:"init",value:function(){return{annotations:{position:"front",yaxis:[this.yAxisAnnotation],xaxis:[this.xAxisAnnotation],points:[this.pointAnnotation],texts:[],images:[],shapes:[]},chart:{animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{delay:150,enabled:!0},dynamicAnimation:{enabled:!0,speed:350}},background:"transparent",locales:[w],defaultLocale:"en",dropShadow:{enabled:!1,enabledOnSeries:void 0,top:2,left:2,blur:4,color:"#000",opacity:.35},events:{animationEnd:void 0,beforeMount:void 0,mounted:void 0,updated:void 0,click:void 0,mouseMove:void 0,legendClick:void 0,markerClick:void 0,selection:void 0,dataPointSelection:void 0,dataPointMouseEnter:void 0,dataPointMouseLeave:void 0,beforeZoom:void 0,zoomed:void 0,scrolled:void 0},foreColor:"#373d3f",fontFamily:"Helvetica, Arial, sans-serif",height:"auto",parentHeightOffset:15,redrawOnParentResize:!0,id:void 0,group:void 0,offsetX:0,offsetY:0,selection:{enabled:!1,type:"x",fill:{color:"#24292e",opacity:.1},stroke:{width:1,color:"#24292e",opacity:.4,dashArray:3},xaxis:{min:void 0,max:void 0},yaxis:{min:void 0,max:void 0}},sparkline:{enabled:!1},brush:{enabled:!1,autoScaleYaxis:!0,target:void 0},stacked:!1,stackType:"normal",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0,customIcons:[]},autoSelected:"zoom"},type:"line",width:"100%",zoom:{enabled:!0,type:"x",autoScaleYaxis:!1,zoomedArea:{fill:{color:"#90CAF9",opacity:.4},stroke:{color:"#0D47A1",opacity:.4,width:1}}}},plotOptions:{bar:{horizontal:!1,columnWidth:"70%",barHeight:"70%",distributed:!1,startingShape:"flat",endingShape:"flat",colors:{ranges:[],backgroundBarColors:[],backgroundBarOpacity:1,backgroundBarRadius:0},dataLabels:{position:"top",maxItems:100,hideOverflowingLabels:!0,orientation:"horizontal"}},bubble:{minBubbleRadius:void 0,maxBubbleRadius:void 0},candlestick:{colors:{upward:"#00B746",downward:"#EF403C"},wick:{useFillColor:!0}},heatmap:{radius:2,enableShades:!0,shadeIntensity:.5,reverseNegativeShade:!1,distributed:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},radialBar:{inverseOrder:!1,startAngle:0,endAngle:360,offsetX:0,offsetY:0,hollow:{margin:5,size:"50%",background:"transparent",image:void 0,imageWidth:150,imageHeight:150,imageOffsetX:0,imageOffsetY:0,imageClipped:!0,position:"front",dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},track:{show:!0,startAngle:void 0,endAngle:void 0,background:"#f2f2f2",strokeWidth:"97%",opacity:1,margin:5,dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:0,formatter:function(t){return t}},value:{show:!0,fontSize:"14px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:16,formatter:function(t){return t+"%"}},total:{show:!1,label:"Total",fontSize:"16px",fontWeight:600,fontFamily:void 0,color:void 0,formatter:function(t){return t.globals.seriesTotals.reduce(function(t,e){return t+e},0)/t.globals.series.length+"%"}}}},pie:{customScale:1,offsetX:0,offsetY:0,expandOnClick:!0,dataLabels:{offset:0,minAngleToShowLabel:10},donut:{size:"65%",background:"transparent",labels:{show:!1,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:-10,formatter:function(t){return t}},value:{show:!0,fontSize:"20px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:10,formatter:function(t){return t}},total:{show:!1,showAlways:!1,label:"Total",fontSize:"16px",fontWeight:400,fontFamily:void 0,color:void 0,formatter:function(t){return t.globals.seriesTotals.reduce(function(t,e){return t+e},0)}}}}},radar:{size:void 0,offsetX:0,offsetY:0,polygons:{strokeColors:"#e8e8e8",connectorColors:"#e8e8e8",fill:{colors:void 0}}}},colors:void 0,dataLabels:{enabled:!0,enabledOnSeries:void 0,formatter:function(t){return null!==t?t:""},textAnchor:"middle",distributed:!1,offsetX:0,offsetY:0,style:{fontSize:"12px",fontFamily:void 0,fontWeight:600,colors:void 0},background:{enabled:!0,foreColor:"#fff",borderRadius:2,padding:4,opacity:.9,borderWidth:1,borderColor:"#fff",dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]},image:{src:[],width:void 0,height:void 0},pattern:{style:"squares",width:6,height:6,strokeWidth:2}},grid:{show:!0,borderColor:"#e0e0e0",strokeDashArray:0,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},row:{colors:void 0,opacity:.5},column:{colors:void 0,opacity:.5},padding:{top:0,right:10,bottom:0,left:12}},labels:[],legend:{show:!0,showForSingleSeries:!1,showForNullSeries:!0,showForZeroSeries:!0,floating:!1,position:"bottom",horizontalAlign:"center",inverseOrder:!1,fontSize:"12px",fontFamily:void 0,fontWeight:400,width:void 0,height:void 0,formatter:void 0,tooltipHoverFormatter:void 0,offsetX:-20,offsetY:0,labels:{colors:void 0,useSeriesColors:!1},markers:{width:12,height:12,strokeWidth:0,fillColors:void 0,strokeColor:"#fff",radius:12,customHTML:void 0,offsetX:0,offsetY:0,onClick:void 0},itemMargin:{horizontal:5,vertical:0},onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}},markers:{discrete:[],size:0,colors:void 0,strokeColors:"#fff",strokeWidth:2,strokeOpacity:.9,strokeDashArray:0,fillOpacity:1,shape:"circle",radius:2,offsetX:0,offsetY:0,onClick:void 0,onDblClick:void 0,showNullDataPoints:!0,hover:{size:void 0,sizeOffset:3}},noData:{text:void 0,align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[],series:void 0,states:{normal:{filter:{type:"none",value:0}},hover:{filter:{type:"lighten",value:.15}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken",value:.65}}},title:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:900,fontFamily:void 0,color:void 0}},subtitle:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:30,floating:!1,style:{fontSize:"12px",fontWeight:400,fontFamily:void 0,color:void 0}},stroke:{show:!0,curve:"smooth",lineCap:"butt",width:2,colors:void 0,dashArray:0},tooltip:{enabled:!0,enabledOnSeries:void 0,shared:!0,followCursor:!1,intersect:!1,inverseOrder:!1,custom:void 0,fillSeriesColor:!1,theme:"light",style:{fontSize:"12px",fontFamily:void 0},onDatasetHover:{highlightDataSeries:!1},x:{show:!0,format:"dd MMM",formatter:void 0},y:{formatter:void 0,title:{formatter:function(t){return t}}},z:{formatter:void 0,title:"Size: "},marker:{show:!0,fillColors:void 0},items:{display:"flex"},fixed:{enabled:!1,position:"topRight",offsetX:0,offsetY:0}},xaxis:{type:"category",categories:[],convertedCatToNumeric:!1,offsetX:0,offsetY:0,labels:{show:!0,rotate:-45,rotateAlways:!1,hideOverlappingLabels:!0,trim:!1,minHeight:void 0,maxHeight:120,showDuplicates:!0,style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""},offsetX:0,offsetY:0,format:void 0,formatter:void 0,datetimeUTC:!0,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"dd MMM",hour:"HH:mm",minute:"HH:mm:ss"}},axisBorder:{show:!0,color:"#e0e0e0",width:"100%",height:1,offsetX:0,offsetY:0},axisTicks:{show:!0,color:"#e0e0e0",height:6,offsetX:0,offsetY:0},tickAmount:void 0,tickPlacement:"on",min:void 0,max:void 0,range:void 0,floating:!1,position:"bottom",title:{text:void 0,offsetX:0,offsetY:0,style:{color:void 0,fontSize:"12px",fontWeight:900,fontFamily:void 0,cssClass:""}},crosshairs:{show:!0,width:1,position:"back",opacity:.9,stroke:{color:"#b6b6b6",width:1,dashArray:3},fill:{type:"solid",color:"#B1B9C4",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}},dropShadow:{enabled:!1,left:0,top:0,blur:1,opacity:.4}},tooltip:{enabled:!0,offsetY:0,formatter:void 0,style:{fontSize:"12px",fontFamily:void 0}}},yaxis:this.yAxis,theme:{mode:"light",palette:"palette1",monochrome:{enabled:!1,color:"#008FFB",shadeTo:"light",shadeIntensity:.65}}}}}]),t}(),C=function(){function t(i){e(this,t),this.ctx=i,this.w=i.w,this.graphics=new y(this.ctx),this.w.globals.isBarHorizontal&&(this.invertAxis=!0),this.helpers=new m(this),this.xAxisAnnotations=new _(this),this.yAxisAnnotations=new x(this),this.pointsAnnotations=new b(this),this.w.globals.isBarHorizontal&&this.w.config.yaxis[0].reversed&&(this.inversedReversedAxis=!0),this.xDivision=this.w.globals.gridWidth/this.w.globals.dataPoints}return n(t,[{key:"drawAxesAnnotations",value:function(){var t=this.w;if(t.globals.axisCharts){for(var e=this.yAxisAnnotations.drawYAxisAnnotations(),i=this.xAxisAnnotations.drawXAxisAnnotations(),n=this.pointsAnnotations.drawPointAnnotations(),r=t.config.chart.animations.enabled,o=[e,i,n],a=[i.node,e.node,n.node],s=0;s<3;s++)t.globals.dom.elGraphical.add(o[s]),!r||t.globals.resized||t.globals.dataChanged||"scatter"!==t.config.chart.type&&"bubble"!==t.config.chart.type&&t.globals.dataPoints>1&&a[s].classList.add("apexcharts-element-hidden"),t.globals.delayedElements.push({el:a[s],index:0});this.helpers.annotationsBackground()}}},{key:"drawShapeAnnos",value:function(){var t=this;this.w.config.annotations.shapes.map(function(e,i){t.addShape(e,i)})}},{key:"drawImageAnnos",value:function(){var t=this;this.w.config.annotations.images.map(function(e,i){t.addImage(e,i)})}},{key:"drawTextAnnos",value:function(){var t=this;this.w.config.annotations.texts.map(function(e,i){t.addText(e,i)})}},{key:"addXaxisAnnotation",value:function(t,e,i){this.xAxisAnnotations.addXaxisAnnotation(t,e,i)}},{key:"addYaxisAnnotation",value:function(t,e,i){this.yAxisAnnotations.addYaxisAnnotation(t,e,i)}},{key:"addPointAnnotation",value:function(t,e,i){this.pointsAnnotations.addPointAnnotation(t,e,i)}},{key:"addText",value:function(t,e){var i=t.text,n=t.backgroundColor,r=t.borderWidth,o=t.strokeDashArray,a=t.borderRadius,s=t.borderColor,l=t.appendTo,h=void 0===l?".apexcharts-annotations":l,u=t.paddingLeft,c=void 0===u?4:u,p=t.paddingRight,d=void 0===p?4:p,f=t.paddingBottom,g=void 0===f?2:f,v=t.paddingTop,y=void 0===v?2:v,m=this.w,_=this.graphics.drawText({x:t.x,y:t.y,text:i,textAnchor:t.textAnchor||"start",fontSize:t.fontSize||"12px",fontWeight:t.fontWeight||"regular",fontFamily:t.fontFamily||m.config.chart.fontFamily,foreColor:t.foreColor||m.config.chart.foreColor,cssClass:t.cssClass}),x=m.globals.dom.baseEl.querySelector(h);x&&x.appendChild(_.node);var b=_.bbox();if(t.draggable&&this.helpers.makeAnnotationDraggable(_,"texts",e),i){var w=this.graphics.drawRect(b.x-c,b.y-y,b.width+c+d,b.height+g+y,a,n||"transparent",1,r,s,o);x.insertBefore(w.node,_.node)}}},{key:"addShape",value:function(t,e){var i={type:t.type,x:t.x||0,y:t.y||0,width:t.width||"100%",height:t.height||50,circleRadius:t.radius||25,backgroundColor:t.backgroundColor||"#fff",opacity:t.opacity||1,borderWidth:t.borderWidth||0,borderRadius:t.borderRadius||4,borderColor:t.borderColor||"#c2c2c2",appendTo:t.appendTo||".apexcharts-annotations"},n=this.w;String(i.width).indexOf("%")>-1&&(i.width=parseInt(i.width,10)*parseInt(n.globals.svgWidth,10)/100);var r=null;r="circle"===i.type?this.graphics.drawCircle(i.circleRadius,{fill:i.backgroundColor,stroke:i.borderColor,"stroke-width":i.borderWidth,opacity:i.opacity,cx:i.x,cy:i.y}):this.graphics.drawRect(i.x,i.y,i.width,i.height,i.borderRadius,i.backgroundColor,i.opacity,i.borderWidth,i.borderColor);var o=n.globals.dom.baseEl.querySelector(i.appendTo);o&&o.appendChild(r.node),t.draggable&&(this.helpers.makeAnnotationDraggable(r,"shapes",e),r.node.classList.add("apexcharts-resizable-element"))}},{key:"addImage",value:function(t,e){var i=this.w,n=t.x,r=void 0===n?0:n,o=t.y,a=void 0===o?0:o,s=t.width,l=void 0===s?20:s,h=t.height,u=void 0===h?20:h,c=t.appendTo,p=void 0===c?".apexcharts-annotations":c,d=i.globals.dom.Paper.image(t.path);d.size(l,u).move(r,a);var f=i.globals.dom.baseEl.querySelector(p);f&&f.appendChild(d.node),t.draggable&&(this.helpers.makeAnnotationDraggable(d,"images",e),d.node.classList.add("apexcharts-resizable-element"))}},{key:"addXaxisAnnotationExternal",value:function(t,e,i){return this.addAnnotationExternal({params:t,pushToMemory:e,context:i,type:"xaxis",contextMethod:i.addXaxisAnnotation}),i}},{key:"addYaxisAnnotationExternal",value:function(t,e,i){return this.addAnnotationExternal({params:t,pushToMemory:e,context:i,type:"yaxis",contextMethod:i.addYaxisAnnotation}),i}},{key:"addPointAnnotationExternal",value:function(t,e,i){return void 0===this.invertAxis&&(this.invertAxis=i.w.globals.isBarHorizontal),this.addAnnotationExternal({params:t,pushToMemory:e,context:i,type:"point",contextMethod:i.addPointAnnotation}),i}},{key:"addAnnotationExternal",value:function(t){var e=t.params,i=t.pushToMemory,n=t.context,r=t.type,o=t.contextMethod,a=n,s=a.w,l=s.globals.dom.baseEl.querySelector(".apexcharts-".concat(r,"-annotations")),h=l.childNodes.length+1,u=new S,c=Object.assign({},"xaxis"===r?u.xAxisAnnotation:"yaxis"===r?u.yAxisAnnotation:u.pointAnnotation),p=f.extend(c,e);switch(r){case"xaxis":this.addXaxisAnnotation(p,l,h);break;case"yaxis":this.addYaxisAnnotation(p,l,h);break;case"point":this.addPointAnnotation(p,l,h)}var d=s.globals.dom.baseEl.querySelector(".apexcharts-".concat(r,"-annotations .apexcharts-").concat(r,"-annotation-label[rel='").concat(h,"']")),g=this.helpers.addBackgroundToAnno(d,p);return g&&l.insertBefore(g.node,d),i&&s.globals.memory.methodsToExec.push({context:a,id:p.id?p.id:f.randomId(),method:o,label:"addAnnotation",params:e}),n}},{key:"clearAnnotations",value:function(t){var e=t.w,i=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-annotations, .apexcharts-xaxis-annotations, .apexcharts-point-annotations");e.globals.memory.methodsToExec.map(function(t,i){"addText"!==t.label&&"addAnnotation"!==t.label||e.globals.memory.methodsToExec.splice(i,1)}),i=f.listToArray(i),Array.prototype.forEach.call(i,function(t){for(;t.firstChild;)t.removeChild(t.firstChild)})}},{key:"removeAnnotation",value:function(t,e){var i=t.w,n=i.globals.dom.baseEl.querySelectorAll(".".concat(e));n&&(i.globals.memory.methodsToExec.map(function(t,n){t.id===e&&i.globals.memory.methodsToExec.splice(n,1)}),Array.prototype.forEach.call(n,function(t){t.parentElement.removeChild(t)}))}}]),t}(),E=function(){function t(i){e(this,t),this.ctx=i,this.w=i.w,this.months31=[1,3,5,7,8,10,12],this.months30=[2,4,6,9,11],this.daysCntOfYear=[0,31,59,90,120,151,181,212,243,273,304,334]}return n(t,[{key:"isValidDate",value:function(t){return!isNaN(this.parseDate(t))}},{key:"getTimeStamp",value:function(t){return Date.parse(t)?this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(t).toISOString().substr(0,25)).getTime():new Date(t).getTime():t}},{key:"getDate",value:function(t){return this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(t).toUTCString()):new Date(t)}},{key:"parseDate",value:function(t){var e=Date.parse(t);if(!isNaN(e))return this.getTimeStamp(t);var i=Date.parse(t.replace(/-/g,"/").replace(/[a-z]+/gi," "));return i=this.getTimeStamp(i)}},{key:"formatDate",value:function(t,e){function i(t,e){var i=t+"";for(e=e||2;i.length<e;)i="0"+i;return i}var n=this.w.globals.locale,r=this.w.config.xaxis.labels.datetimeUTC,o=["\0"].concat(c(n.months)),a=["\x01"].concat(c(n.shortMonths)),s=["\x02"].concat(c(n.days)),l=["\x03"].concat(c(n.shortDays)),h=r?t.getUTCFullYear():t.getFullYear();e=(e=(e=e.replace(/(^|[^\\])yyyy+/g,"$1"+h)).replace(/(^|[^\\])yy/g,"$1"+h.toString().substr(2,2))).replace(/(^|[^\\])y/g,"$1"+h);var u=(r?t.getUTCMonth():t.getMonth())+1;e=(e=(e=(e=e.replace(/(^|[^\\])MMMM+/g,"$1"+o[0])).replace(/(^|[^\\])MMM/g,"$1"+a[0])).replace(/(^|[^\\])MM/g,"$1"+i(u))).replace(/(^|[^\\])M/g,"$1"+u);var p=r?t.getUTCDate():t.getDate();e=(e=(e=(e=e.replace(/(^|[^\\])dddd+/g,"$1"+s[0])).replace(/(^|[^\\])ddd/g,"$1"+l[0])).replace(/(^|[^\\])dd/g,"$1"+i(p))).replace(/(^|[^\\])d/g,"$1"+p);var d=r?t.getUTCHours():t.getHours(),f=d>12?d-12:0===d?12:d;e=(e=(e=(e=e.replace(/(^|[^\\])HH+/g,"$1"+i(d))).replace(/(^|[^\\])H/g,"$1"+d)).replace(/(^|[^\\])hh+/g,"$1"+i(f))).replace(/(^|[^\\])h/g,"$1"+f);var g=r?t.getUTCMinutes():t.getMinutes();e=(e=e.replace(/(^|[^\\])mm+/g,"$1"+i(g))).replace(/(^|[^\\])m/g,"$1"+g);var v=r?t.getUTCSeconds():t.getSeconds();e=(e=e.replace(/(^|[^\\])ss+/g,"$1"+i(v))).replace(/(^|[^\\])s/g,"$1"+v);var y=r?t.getUTCMilliseconds():t.getMilliseconds();e=e.replace(/(^|[^\\])fff+/g,"$1"+i(y,3)),y=Math.round(y/10),e=e.replace(/(^|[^\\])ff/g,"$1"+i(y)),y=Math.round(y/10);var m=d<12?"AM":"PM";e=(e=(e=e.replace(/(^|[^\\])f/g,"$1"+y)).replace(/(^|[^\\])TT+/g,"$1"+m)).replace(/(^|[^\\])T/g,"$1"+m.charAt(0));var _=m.toLowerCase();e=(e=e.replace(/(^|[^\\])tt+/g,"$1"+_)).replace(/(^|[^\\])t/g,"$1"+_.charAt(0));var x=-t.getTimezoneOffset(),b=r||!x?"Z":x>0?"+":"-";if(!r){var w=(x=Math.abs(x))%60;b+=i(Math.floor(x/60))+":"+i(w)}e=e.replace(/(^|[^\\])K/g,"$1"+b);var S=(r?t.getUTCDay():t.getDay())+1;return e=(e=(e=(e=(e=e.replace(new RegExp(s[0],"g"),s[S])).replace(new RegExp(l[0],"g"),l[S])).replace(new RegExp(o[0],"g"),o[u])).replace(new RegExp(a[0],"g"),a[u])).replace(/\\(.)/g,"$1")}},{key:"getTimeUnitsfromTimestamp",value:function(t,e,i){var n=this.w;void 0!==n.config.xaxis.min&&(t=n.config.xaxis.min),void 0!==n.config.xaxis.max&&(e=n.config.xaxis.max);var r=this.getDate(t),o=this.getDate(e),a=this.formatDate(r,"yyyy MM dd HH mm").split(" "),s=this.formatDate(o,"yyyy MM dd HH mm").split(" ");return{minMinute:parseInt(a[4],10),maxMinute:parseInt(s[4],10),minHour:parseInt(a[3],10),maxHour:parseInt(s[3],10),minDate:parseInt(a[2],10),maxDate:parseInt(s[2],10),minMonth:parseInt(a[1],10)-1,maxMonth:parseInt(s[1],10)-1,minYear:parseInt(a[0],10),maxYear:parseInt(s[0],10)}}},{key:"isLeapYear",value:function(t){return t%4==0&&t%100!=0||t%400==0}},{key:"calculcateLastDaysOfMonth",value:function(t,e,i){return this.determineDaysOfMonths(t,e)-i}},{key:"determineDaysOfYear",value:function(t){var e=365;return this.isLeapYear(t)&&(e=366),e}},{key:"determineRemainingDaysOfYear",value:function(t,e,i){var n=this.daysCntOfYear[e]+i;return e>1&&this.isLeapYear()&&n++,n}},{key:"determineDaysOfMonths",value:function(t,e){var i=30;switch(t=f.monthMod(t),!0){case this.months30.indexOf(t)>-1:2===t&&(i=this.isLeapYear(e)?29:28);break;case this.months31.indexOf(t)>-1:default:i=31}return i}}]),t}(),T=function(){function t(i){e(this,t),this.opts=i}return n(t,[{key:"line",value:function(){return{chart:{animations:{easing:"swing"}},dataLabels:{enabled:!1},stroke:{width:5,curve:"straight"},markers:{size:0,hover:{sizeOffset:6}},xaxis:{crosshairs:{width:1}}}}},{key:"sparkline",value:function(t){return this.opts.yaxis[0].show=!1,this.opts.yaxis[0].title.text="",this.opts.yaxis[0].axisBorder.show=!1,this.opts.yaxis[0].axisTicks.show=!1,this.opts.yaxis[0].floating=!0,f.extend(t,{grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},legend:{show:!1},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}},chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1}})}},{key:"bar",value:function(){return{chart:{stacked:!1,animations:{easing:"swing"}},plotOptions:{bar:{dataLabels:{position:"center"}}},dataLabels:{style:{colors:["#fff"]},background:{enabled:!1}},stroke:{width:0,lineCap:"square"},fill:{opacity:.85},legend:{markers:{shape:"square",radius:2,size:8}},tooltip:{shared:!1},xaxis:{tooltip:{enabled:!1},tickPlacement:"between",crosshairs:{width:"barWidth",position:"back",fill:{type:"gradient"},dropShadow:{enabled:!1},stroke:{width:0}}}}}},{key:"candlestick",value:function(){return{stroke:{width:1,colors:["#333"]},fill:{opacity:1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(t){var e=t.seriesIndex,i=t.dataPointIndex,n=t.w;return'<div class="apexcharts-tooltip-candlestick"><div>Open: <span class="value">'+n.globals.seriesCandleO[e][i]+'</span></div><div>High: <span class="value">'+n.globals.seriesCandleH[e][i]+'</span></div><div>Low: <span class="value">'+n.globals.seriesCandleL[e][i]+'</span></div><div>Close: <span class="value">'+n.globals.seriesCandleC[e][i]+"</span></div></div>"}},states:{active:{filter:{type:"none"}}},xaxis:{crosshairs:{width:1}}}}},{key:"rangeBar",value:function(){return{stroke:{width:0,lineCap:"square"},plotOptions:{bar:{dataLabels:{position:"center"}}},dataLabels:{enabled:!1,formatter:function(t,e){var i=e.seriesIndex,n=e.dataPointIndex,r=e.w;return r.globals.seriesRangeEnd[i][n]-r.globals.seriesRangeStart[i][n]},background:{enabled:!1},style:{colors:["#fff"]}},tooltip:{shared:!1,followCursor:!0,custom:function(t){var e=t.ctx,i=t.seriesIndex,n=t.dataPointIndex,r=t.y1,o=t.y2,a=t.w,s=a.globals.seriesRangeStart[i][n],l=a.globals.seriesRangeEnd[i][n],h=a.globals.labels[n],u=a.config.series[i].name,c=a.config.tooltip.y.formatter,p=a.config.tooltip.y.title.formatter,d={w:a,seriesIndex:i,dataPointIndex:n};"function"==typeof p&&(u=p(u,d)),r&&o&&(s=r,l=o,a.config.series[i].data[n].x&&(h=a.config.series[i].data[n].x+":"),"function"==typeof c&&(h=c(h,d)));var f="",g="",v=a.globals.colors[i];if(void 0===a.config.tooltip.x.formatter)if("datetime"===a.config.xaxis.type){var y=new E(e);f=y.formatDate(y.getDate(s),a.config.tooltip.x.format),g=y.formatDate(y.getDate(l),a.config.tooltip.x.format)}else f=s,g=l;else f=a.config.tooltip.x.formatter(s),g=a.config.tooltip.x.formatter(l);return'<div class="apexcharts-tooltip-rangebar"><div> <span class="series-name" style="color: '+v+'">'+(u||"")+'</span></div><div> <span class="category">'+h+' </span> <span class="value start-value">'+f+'</span> <span class="separator">-</span> <span class="value end-value">'+g+"</span></div></div>"}},xaxis:{tickPlacement:"between",tooltip:{enabled:!1},crosshairs:{stroke:{width:0}}}}}},{key:"area",value:function(){return{stroke:{width:4},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}},markers:{size:0,hover:{sizeOffset:6}},tooltip:{followCursor:!1}}}},{key:"brush",value:function(t){return f.extend(t,{chart:{toolbar:{autoSelected:"selection",show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{width:1},tooltip:{enabled:!1},xaxis:{tooltip:{enabled:!1}}})}},{key:"stacked100",value:function(t){t.dataLabels=t.dataLabels||{},t.dataLabels.formatter=t.dataLabels.formatter||void 0;var e=t.dataLabels.formatter;return t.yaxis.forEach(function(e,i){t.yaxis[i].min=0,t.yaxis[i].max=100}),"bar"===t.chart.type&&(t.dataLabels.formatter=e||function(t){return"number"==typeof t&&t?t.toFixed(0)+"%":t}),t}},{key:"convertCatToNumeric",value:function(t){return t.xaxis.convertedCatToNumeric=!0,t}},{key:"convertCatToNumericXaxis",value:function(t,e,i){t.xaxis.type="numeric",t.xaxis.labels=t.xaxis.labels||{},t.xaxis.labels.formatter=t.xaxis.labels.formatter||function(t){return f.isNumber(t)?Math.floor(t):t};var n=t.xaxis.labels.formatter,r=t.xaxis.categories&&t.xaxis.categories.length?t.xaxis.categories:t.labels;return i&&i.length&&(r=i.map(function(t){return t.toString()})),r&&r.length&&(t.xaxis.labels.formatter=function(t){return f.isNumber(t)?n(r[Math.floor(t)-1]):n(t)}),t.xaxis.categories=[],t.labels=[],t.xaxis.tickAmount=t.xaxis.tickAmount||"dataPoints",t}},{key:"bubble",value:function(){return{dataLabels:{style:{colors:["#fff"]}},tooltip:{shared:!1,intersect:!0},xaxis:{crosshairs:{width:0}},fill:{type:"solid",gradient:{shade:"light",inverse:!0,shadeIntensity:.55,opacityFrom:.4,opacityTo:.8}}}}},{key:"scatter",value:function(){return{dataLabels:{enabled:!1},tooltip:{shared:!1,intersect:!0},markers:{size:6,strokeWidth:1,hover:{sizeOffset:2}}}}},{key:"heatmap",value:function(){return{chart:{stacked:!1},fill:{opacity:1},dataLabels:{style:{colors:["#fff"]}},stroke:{colors:["#fff"]},tooltip:{followCursor:!0,marker:{show:!1},x:{show:!1}},legend:{position:"top",markers:{shape:"square",size:10,offsetY:2}},grid:{padding:{right:20}}}}},{key:"pie",value:function(){return{chart:{toolbar:{show:!1}},plotOptions:{pie:{donut:{labels:{show:!1}}}},dataLabels:{formatter:function(t){return t.toFixed(1)+"%"},style:{colors:["#fff"]},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"dark",shadeIntensity:.35,inverseColors:!1,stops:[0,100,100]}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"donut",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(t){return t.toFixed(1)+"%"},style:{colors:["#fff"]},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"dark",shadeIntensity:.4,inverseColors:!1,type:"vertical",opacityFrom:1,opacityTo:1,stops:[70,98,100]}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"radar",value:function(){return this.opts.yaxis[0].labels.offsetY=this.opts.yaxis[0].labels.offsetY?this.opts.yaxis[0].labels.offsetY:6,{dataLabels:{enabled:!1,style:{fontSize:"11px"}},stroke:{width:2},markers:{size:3,strokeWidth:1,strokeOpacity:1},fill:{opacity:.2},tooltip:{shared:!1,intersect:!0,followCursor:!0},grid:{show:!1},xaxis:{labels:{formatter:function(t){return t},style:{colors:["#a8a8a8"],fontSize:"11px"}},tooltip:{enabled:!1},crosshairs:{show:!1}}}}},{key:"radialBar",value:function(){return{chart:{animations:{dynamicAnimation:{enabled:!0,speed:800}},toolbar:{show:!1}},fill:{gradient:{shade:"dark",shadeIntensity:.4,inverseColors:!1,type:"diagonal2",opacityFrom:1,opacityTo:1,stops:[70,98,100]}},legend:{show:!1,position:"right"},tooltip:{enabled:!1,fillSeriesColor:!0}}}}]),t}(),P=function(){function i(t){e(this,i),this.opts=t}return n(i,[{key:"init",value:function(e){var i=e.responsiveOverride,n=this.opts,r=new S,o=new T(n);this.chartType=n.chart.type,"histogram"===this.chartType&&(n.chart.type="bar",n=f.extend({plotOptions:{bar:{columnWidth:"99.99%"}}},n)),n=this.extendYAxis(n),n=this.extendAnnotations(n);var a=r.init(),s={};if(n&&"object"===t(n)){var l={};l=-1!==["line","area","bar","candlestick","rangeBar","histogram","bubble","scatter","heatmap","pie","donut","radar","radialBar"].indexOf(n.chart.type)?o[n.chart.type]():o.line(),n.chart.brush&&n.chart.brush.enabled&&(l=o.brush(l)),n.chart.stacked&&"100%"===n.chart.stackType&&(n=o.stacked100(n)),this.checkForDarkTheme(window.Apex),this.checkForDarkTheme(n),n.xaxis=n.xaxis||window.Apex.xaxis||{},i||(n.xaxis.convertedCatToNumeric=!1),((n=this.checkForCatToNumericXAxis(this.chartType,l,n)).chart.sparkline&&n.chart.sparkline.enabled||window.Apex.chart&&window.Apex.chart.sparkline&&window.Apex.chart.sparkline.enabled)&&(l=o.sparkline(l)),s=f.extend(a,l)}var h=f.extend(s,window.Apex);return a=f.extend(h,n),a=this.handleUserInputErrors(a)}},{key:"checkForCatToNumericXAxis",value:function(t,e,i){var n=new T(i);return"bar"===t&&i.plotOptions&&i.plotOptions.bar&&i.plotOptions.bar.horizontal||"pie"===t||"donut"===t||"radar"===t||"radialBar"===t||"heatmap"===t||!("datetime"!==i.xaxis.type&&"numeric"!==i.xaxis.type)||"between"===(i.xaxis.tickPlacement?i.xaxis.tickPlacement:e.xaxis&&e.xaxis.tickPlacement)||(i=n.convertCatToNumeric(i)),i}},{key:"extendYAxis",value:function(t){var e=new S;(void 0===t.yaxis||!t.yaxis||Array.isArray(t.yaxis)&&0===t.yaxis.length)&&(t.yaxis={}),t.yaxis.constructor!==Array&&window.Apex.yaxis&&window.Apex.yaxis.constructor!==Array&&(t.yaxis=f.extend(t.yaxis,window.Apex.yaxis)),t.yaxis=t.yaxis.constructor!==Array?[f.extend(e.yAxis,t.yaxis)]:f.extendArray(t.yaxis,e.yAxis);var i=!1;return t.yaxis.forEach(function(t){t.logarithmic&&(i=!0)}),i&&t.series.length!==t.yaxis.length&&t.series.length&&(t.yaxis=t.series.map(function(i,n){if(i.name||(t.series[n].name="series-".concat(n+1)),t.yaxis[n])return t.yaxis[n].seriesName=t.series[n].name,t.yaxis[n];var r=f.extend(e.yAxis,t.yaxis[0]);return r.show=!1,r})),i&&t.series.length>1&&t.series.length!==t.yaxis.length&&console.warn("A multi-series logarithmic chart should have equal number of series and y-axes. Please make sure to equalize both."),t}},{key:"extendAnnotations",value:function(t){return void 0===t.annotations&&(t.annotations={},t.annotations.yaxis=[],t.annotations.xaxis=[],t.annotations.points=[]),t=this.extendYAxisAnnotations(t),t=this.extendXAxisAnnotations(t),t=this.extendPointAnnotations(t)}},{key:"extendYAxisAnnotations",value:function(t){var e=new S;return t.annotations.yaxis=f.extendArray(void 0!==t.annotations.yaxis?t.annotations.yaxis:[],e.yAxisAnnotation),t}},{key:"extendXAxisAnnotations",value:function(t){var e=new S;return t.annotations.xaxis=f.extendArray(void 0!==t.annotations.xaxis?t.annotations.xaxis:[],e.xAxisAnnotation),t}},{key:"extendPointAnnotations",value:function(t){var e=new S;return t.annotations.points=f.extendArray(void 0!==t.annotations.points?t.annotations.points:[],e.pointAnnotation),t}},{key:"checkForDarkTheme",value:function(t){t.theme&&"dark"===t.theme.mode&&(t.tooltip||(t.tooltip={}),"light"!==t.tooltip.theme&&(t.tooltip.theme="dark"),t.chart.foreColor||(t.chart.foreColor="#f6f7f8"),t.theme.palette||(t.theme.palette="palette4"))}},{key:"handleUserInputErrors",value:function(t){var e=t;if(e.tooltip.shared&&e.tooltip.intersect)throw new Error("tooltip.shared cannot be enabled when tooltip.intersect is true. Turn off any other option by setting it to false.");if(("bar"===e.chart.type||"rangeBar"===e.chart.type)&&e.plotOptions.bar.horizontal){if(e.yaxis.length>1)throw new Error("Multiple Y Axis for bars are not supported. Switch to column chart by setting plotOptions.bar.horizontal=false");e.yaxis[0].reversed&&(e.yaxis[0].opposite=!0),e.xaxis.tooltip.enabled=!1,e.yaxis[0].tooltip.enabled=!1,e.chart.zoom.enabled=!1}return"bar"!==e.chart.type&&"rangeBar"!==e.chart.type||e.tooltip.shared&&("barWidth"===e.xaxis.crosshairs.width&&e.series.length>1&&(console.warn('crosshairs.width = "barWidth" is only supported in single series, not in a multi-series barChart.'),e.xaxis.crosshairs.width="tickWidth"),e.plotOptions.bar.horizontal&&(e.states.hover.type="none",e.tooltip.shared=!1),e.tooltip.followCursor||(console.warn("followCursor option in shared columns cannot be turned off. Please set %ctooltip.followCursor: true","color: blue;"),e.tooltip.followCursor=!0)),"candlestick"===e.chart.type&&e.yaxis[0].reversed&&(console.warn("Reversed y-axis in candlestick chart is not supported."),e.yaxis[0].reversed=!1),e.chart.group&&0===e.yaxis[0].labels.minWidth&&console.warn("It looks like you have multiple charts in synchronization. You must provide yaxis.labels.minWidth which must be EQUAL for all grouped charts to prevent incorrect behaviour."),Array.isArray(e.stroke.width)&&"line"!==e.chart.type&&"area"!==e.chart.type&&(console.warn("stroke.width option accepts array only for line and area charts. Reverted back to Number"),e.stroke.width=e.stroke.width[0]),e}}]),i}(),L=function(){function t(){e(this,t)}return n(t,[{key:"initGlobalVars",value:function(t){t.series=[],t.seriesCandleO=[],t.seriesCandleH=[],t.seriesCandleL=[],t.seriesCandleC=[],t.seriesRangeStart=[],t.seriesRangeEnd=[],t.seriesRangeBarTimeline=[],t.seriesPercent=[],t.seriesX=[],t.seriesZ=[],t.seriesNames=[],t.seriesTotals=[],t.seriesLog=[],t.stackedSeriesTotals=[],t.seriesXvalues=[],t.seriesYvalues=[],t.labels=[],t.categoryLabels=[],t.timescaleLabels=[],t.noLabelsProvided=!1,t.resizeTimer=null,t.selectionResizeTimer=null,t.delayedElements=[],t.pointsArray=[],t.dataLabelsRects=[],t.isXNumeric=!1,t.xaxisLabelsCount=0,t.skipLastTimelinelabel=!1,t.skipFirstTimelinelabel=!1,t.x2SpaceAvailable=0,t.isDataXYZ=!1,t.isMultiLineX=!1,t.isMultipleYAxis=!1,t.maxY=-Number.MAX_VALUE,t.minY=Number.MIN_VALUE,t.minYArr=[],t.maxYArr=[],t.maxX=-Number.MAX_VALUE,t.minX=Number.MAX_VALUE,t.initialMaxX=-Number.MAX_VALUE,t.initialMinX=Number.MAX_VALUE,t.maxDate=0,t.minDate=Number.MAX_VALUE,t.minZ=Number.MAX_VALUE,t.maxZ=-Number.MAX_VALUE,t.minXDiff=Number.MAX_VALUE,t.yAxisScale=[],t.xAxisScale=null,t.xAxisTicksPositions=[],t.yLabelsCoords=[],t.yTitleCoords=[],t.barPadForNumericAxis=0,t.padHorizontal=0,t.xRange=0,t.yRange=[],t.zRange=0,t.dataPoints=0,t.xTickAmount=0}},{key:"globalVars",value:function(t){return{chartID:null,cuid:null,events:{beforeMount:[],mounted:[],updated:[],clicked:[],selection:[],dataPointSelection:[],zoomed:[],scrolled:[]},colors:[],clientX:null,clientY:null,fill:{colors:[]},stroke:{colors:[]},dataLabels:{style:{colors:[]}},radarPolygons:{fill:{colors:[]}},markers:{colors:[],size:t.markers.size,largestSize:0},animationEnded:!1,isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints,isDirty:!1,isExecCalled:!1,initialConfig:null,lastXAxis:[],lastYAxis:[],columnSeries:null,labels:[],timescaleLabels:[],noLabelsProvided:!1,allSeriesCollapsed:!1,collapsedSeries:[],collapsedSeriesIndices:[],ancillaryCollapsedSeries:[],ancillaryCollapsedSeriesIndices:[],risingSeries:[],dataFormatXNumeric:!1,capturedSeriesIndex:-1,capturedDataPointIndex:-1,selectedDataPoints:[],goldenPadding:35,invalidLogScale:!1,ignoreYAxisIndexes:[],yAxisSameScaleIndices:[],maxValsInArrayIndex:0,radialSize:0,zoomEnabled:"zoom"===t.chart.toolbar.autoSelected&&t.chart.toolbar.tools.zoom&&t.chart.zoom.enabled,panEnabled:"pan"===t.chart.toolbar.autoSelected&&t.chart.toolbar.tools.pan,selectionEnabled:"selection"===t.chart.toolbar.autoSelected&&t.chart.toolbar.tools.selection,yaxis:null,mousedown:!1,lastClientPosition:{},visibleXRange:void 0,yValueDecimal:0,total:0,SVGNS:"http://www.w3.org/2000/svg",svgWidth:0,svgHeight:0,noData:!1,locale:{},dom:{},memory:{methodsToExec:[]},shouldAnimate:!0,skipLastTimelinelabel:!1,skipFirstTimelinelabel:!1,delayedElements:[],axisCharts:!0,isDataXYZ:!1,resized:!1,resizeTimer:null,comboCharts:!1,dataChanged:!1,previousPaths:[],allSeriesHasEqualX:!0,pointsArray:[],dataLabelsRects:[],lastDrawnDataLabelsIndexes:[],x2SpaceAvailable:0,hasNullValues:!1,easing:null,zoomed:!1,gridWidth:0,gridHeight:0,rotateXLabels:!1,defaultLabels:!1,xLabelFormatter:void 0,yLabelFormatters:[],xaxisTooltipFormatter:void 0,ttKeyFormatter:void 0,ttVal:void 0,ttZFormatter:void 0,LINE_HEIGHT_RATIO:1.618,xAxisLabelsHeight:0,yAxisLabelsWidth:0,scaleX:1,scaleY:1,translateX:0,translateY:0,translateYAxisX:[],yAxisWidths:[],translateXAxisY:0,translateXAxisX:0,tooltip:null}}},{key:"init",value:function(t){var e=this.globalVars(t);return this.initGlobalVars(e),e.initialConfig=f.extend({},t),e.initialSeries=JSON.parse(JSON.stringify(e.initialConfig.series)),e.lastXAxis=JSON.parse(JSON.stringify(e.initialConfig.xaxis)),e.lastYAxis=JSON.parse(JSON.stringify(e.initialConfig.yaxis)),e}}]),t}(),I=function(){function t(i){e(this,t),this.opts=i}return n(t,[{key:"init",value:function(){var t=new P(this.opts).init({responsiveOverride:!1});return{config:t,globals:(new L).init(t)}}}]),t}(),O=function(){function t(i){e(this,t),this.ctx=i,this.w=i.w}return n(t,[{key:"getStackedSeriesTotals",value:function(){var t=this.w,e=[];if(0===t.globals.series.length)return e;for(var i=0;i<t.globals.series[t.globals.maxValsInArrayIndex].length;i++){for(var n=0,r=0;r<t.globals.series.length;r++)void 0!==t.globals.series[r][i]&&(n+=t.globals.series[r][i]);e.push(n)}return t.globals.stackedSeriesTotals=e,e}},{key:"getSeriesTotalByIndex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===t?this.w.config.series.reduce(function(t,e){return t+e},0):this.w.globals.series[t].reduce(function(t,e){return t+e},0)}},{key:"isSeriesNull",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return 0===(null===t?this.w.config.series.filter(function(t){return null!==t}):this.w.globals.series[t].filter(function(t){return null!==t})).length}},{key:"seriesHaveSameValues",value:function(t){return this.w.globals.series[t].every(function(t,e,i){return t===i[0]})}},{key:"getCategoryLabels",value:function(t){var e=this.w,i=t.slice();return e.config.xaxis.convertedCatToNumeric&&(i=t.map(function(t){return e.config.xaxis.labels.formatter(t-e.globals.minX+1)})),i}},{key:"getLargestSeries",value:function(){var t=this.w;t.globals.maxValsInArrayIndex=t.globals.series.map(function(t){return t.length}).indexOf(Math.max.apply(Math,t.globals.series.map(function(t){return t.length})))}},{key:"getLargestMarkerSize",value:function(){var t=this.w,e=0;return t.globals.markers.size.forEach(function(t){e=Math.max(e,t)}),t.globals.markers.largestSize=e,e}},{key:"getSeriesTotals",value:function(){var t=this.w;t.globals.seriesTotals=t.globals.series.map(function(t,e){var i=0;if(Array.isArray(t))for(var n=0;n<t.length;n++)i+=t[n];else i+=t;return i})}},{key:"getSeriesTotalsXRange",value:function(t,e){var i=this.w;return i.globals.series.map(function(n,r){for(var o=0,a=0;a<n.length;a++)i.globals.seriesX[r][a]>t&&i.globals.seriesX[r][a]<e&&(o+=n[a]);return o})}},{key:"getPercentSeries",value:function(){var t=this.w;t.globals.seriesPercent=t.globals.series.map(function(e,i){var n=[];if(Array.isArray(e))for(var r=0;r<e.length;r++){var o=t.globals.stackedSeriesTotals[r],a=0;o&&(a=100*e[r]/o),n.push(a)}else{var s=100*e/t.globals.seriesTotals.reduce(function(t,e){return t+e},0);n.push(s)}return n})}},{key:"getCalculatedRatios",value:function(){var t,e,i,n,r=this.w.globals,o=[],a=0,s=[],l=.1,h=0;if(r.yRange=[],r.isMultipleYAxis)for(var u=0;u<r.minYArr.length;u++)r.yRange.push(Math.abs(r.minYArr[u]-r.maxYArr[u])),s.push(0);else r.yRange.push(Math.abs(r.minY-r.maxY));r.xRange=Math.abs(r.maxX-r.minX),r.zRange=Math.abs(r.maxZ-r.minZ);for(var c=0;c<r.yRange.length;c++)o.push(r.yRange[c]/r.gridHeight);if(e=r.xRange/r.gridWidth,i=Math.abs(r.initialMaxX-r.initialMinX)/r.gridWidth,t=r.yRange/r.gridWidth,n=r.xRange/r.gridHeight,(a=r.zRange/r.gridHeight*16)||(a=1),r.minY!==Number.MIN_VALUE&&0!==Math.abs(r.minY)&&(r.hasNegs=!0),r.isMultipleYAxis){s=[];for(var p=0;p<o.length;p++)s.push(-r.minYArr[p]/o[p])}else s.push(-r.minY/o[0]),r.minY!==Number.MIN_VALUE&&0!==Math.abs(r.minY)&&(l=-r.minY/t,h=r.minX/e);return{yRatio:o,invertedYRatio:t,zRatio:a,xRatio:e,initialXRatio:i,invertedXRatio:n,baseLineInvertedY:l,baseLineY:s,baseLineX:h}}},{key:"getLogSeries",value:function(t){var e=this.w;return e.globals.seriesLog=t.map(function(t,i){return e.config.yaxis[i]&&e.config.yaxis[i].logarithmic?t.map(function(t){return null===t?null:(Math.log(t)-Math.log(e.globals.minYArr[i]))/(Math.log(e.globals.maxYArr[i])-Math.log(e.globals.minYArr[i]))}):t}),e.globals.invalidLogScale?t:e.globals.seriesLog}},{key:"getLogYRatios",value:function(t){var e=this,i=this.w,n=this.w.globals;return n.yLogRatio=t.slice(),n.logYRange=n.yRange.map(function(t,r){if(i.config.yaxis[r]&&e.w.config.yaxis[r].logarithmic){var o,a=-Number.MAX_VALUE,s=Number.MIN_VALUE;return n.seriesLog.forEach(function(t,e){t.forEach(function(t){i.config.yaxis[e]&&i.config.yaxis[e].logarithmic&&(a=Math.max(t,a),s=Math.min(t,s))})}),o=Math.pow(n.yRange[r],Math.abs(s-a)/n.yRange[r]),n.yLogRatio[r]=o/n.gridHeight,o}}),n.invalidLogScale?t.slice():n.yLogRatio}}],[{key:"checkComboSeries",value:function(t){var e=!1,i=0;return t.length&&void 0!==t[0].type&&(e=!0,t.forEach(function(t){"bar"!==t.type&&"column"!==t.type&&"candlestick"!==t.type||i++})),{comboBarCount:i,comboCharts:e}}},{key:"extendArrayProps",value:function(t,e){return e.yaxis&&(e=t.extendYAxis(e)),e.annotations&&(e.annotations.yaxis&&(e=t.extendYAxisAnnotations(e)),e.annotations.xaxis&&(e=t.extendXAxisAnnotations(e)),e.annotations.points&&(e=t.extendPointAnnotations(e))),e}}]),t}(),A=function(){function t(i){e(this,t),this.ctx=i,this.w=i.w,this.opts=null,this.seriesIndex=0}return n(t,[{key:"clippedImgArea",value:function(t){var e=this.w,i=e.config,n=parseInt(e.globals.gridWidth,10),r=parseInt(e.globals.gridHeight,10),o=n>r?n:r,a=t.image,s=0,l=0;void 0===t.width&&void 0===t.height?void 0!==i.fill.image.width&&void 0!==i.fill.image.height?(s=i.fill.image.width+1,l=i.fill.image.height):(s=o+1,l=o):(s=t.width,l=t.height);var h=document.createElementNS(e.globals.SVGNS,"pattern");y.setAttrs(h,{id:t.patternID,patternUnits:t.patternUnits?t.patternUnits:"userSpaceOnUse",width:s+"px",height:l+"px"});var u=document.createElementNS(e.globals.SVGNS,"image");h.appendChild(u),u.setAttributeNS(window.SVG.xlink,"href",a),y.setAttrs(u,{x:0,y:0,preserveAspectRatio:"none",width:s+"px",height:l+"px"}),u.style.opacity=t.opacity,e.globals.dom.elDefs.node.appendChild(h)}},{key:"getSeriesIndex",value:function(t){var e=this.w;return this.seriesIndex=("bar"===e.config.chart.type||"rangeBar"===e.config.chart.type)&&e.config.plotOptions.bar.distributed||"heatmap"===e.config.chart.type?t.seriesNumber:t.seriesNumber%e.globals.series.length,this.seriesIndex}},{key:"fillPath",value:function(t){var e=this.w;this.opts=t;var i,n,r,o=this.w.config;this.seriesIndex=this.getSeriesIndex(t);var a=this.getFillColors()[this.seriesIndex];"function"==typeof a&&(a=a({seriesIndex:this.seriesIndex,dataPointIndex:t.dataPointIndex,value:t.value,w:e}));var s=this.getFillType(this.seriesIndex),l=Array.isArray(o.fill.opacity)?o.fill.opacity[this.seriesIndex]:o.fill.opacity,h=a;if(t.color&&(a=t.color),-1===a.indexOf("rgb")?h=f.hexToRgba(a,l):a.indexOf("rgba")>-1&&(l="0."+f.getOpacityFromRGBA(a)),t.opacity&&(l=t.opacity),"pattern"===s&&(n=this.handlePatternFill(n,a,l,h)),"gradient"===s&&(r=this.handleGradientFill(r,a,l,this.seriesIndex)),"image"===s){var u=o.fill.image.src,c=t.patternID?t.patternID:"";this.clippedImgArea({opacity:l,image:Array.isArray(u)?t.seriesNumber<u.length?u[t.seriesNumber]:u[0]:u,width:t.width?t.width:void 0,height:t.height?t.height:void 0,patternUnits:t.patternUnits,patternID:"pattern".concat(e.globals.cuid).concat(t.seriesNumber+1).concat(c)}),i="url(#pattern".concat(e.globals.cuid).concat(t.seriesNumber+1).concat(c,")")}else i="gradient"===s?r:"pattern"===s?n:h;return t.solid&&(i=h),i}},{key:"getFillType",value:function(t){var e=this.w;return Array.isArray(e.config.fill.type)?e.config.fill.type[t]:e.config.fill.type}},{key:"getFillColors",value:function(){var t=this.w,e=t.config,i=this.opts,n=[];return t.globals.comboCharts?"line"===t.config.series[this.seriesIndex].type?t.globals.stroke.colors instanceof Array?n=t.globals.stroke.colors:n.push(t.globals.stroke.colors):t.globals.fill.colors instanceof Array?n=t.globals.fill.colors:n.push(t.globals.fill.colors):"line"===e.chart.type?t.globals.stroke.colors instanceof Array?n=t.globals.stroke.colors:n.push(t.globals.stroke.colors):t.globals.fill.colors instanceof Array?n=t.globals.fill.colors:n.push(t.globals.fill.colors),void 0!==i.fillColors&&(n=[],i.fillColors instanceof Array?n=i.fillColors.slice():n.push(i.fillColors)),n}},{key:"handlePatternFill",value:function(t,e,i,n){var r=this.w.config,o=this.opts,a=new y(this.ctx),s=void 0===r.fill.pattern.strokeWidth?Array.isArray(r.stroke.width)?r.stroke.width[this.seriesIndex]:r.stroke.width:Array.isArray(r.fill.pattern.strokeWidth)?r.fill.pattern.strokeWidth[this.seriesIndex]:r.fill.pattern.strokeWidth,l=e;return r.fill.pattern.style instanceof Array?void 0!==r.fill.pattern.style[o.seriesNumber]?a.drawPattern(r.fill.pattern.style[o.seriesNumber],r.fill.pattern.width,r.fill.pattern.height,l,s,i):n:a.drawPattern(r.fill.pattern.style,r.fill.pattern.width,r.fill.pattern.height,l,s,i)}},{key:"handleGradientFill",value:function(t,e,i,n){var r,o,a=this.w.config,s=this.opts,l=new y(this.ctx),h=new f,u=a.fill.gradient.type,c=void 0===a.fill.gradient.opacityFrom?i:Array.isArray(a.fill.gradient.opacityFrom)?a.fill.gradient.opacityFrom[n]:a.fill.gradient.opacityFrom,p=void 0===a.fill.gradient.opacityTo?i:Array.isArray(a.fill.gradient.opacityTo)?a.fill.gradient.opacityTo[n]:a.fill.gradient.opacityTo;if(r=e,o=void 0===a.fill.gradient.gradientToColors||0===a.fill.gradient.gradientToColors.length?h.shadeColor("dark"===a.fill.gradient.shade?-1*parseFloat(a.fill.gradient.shadeIntensity):parseFloat(a.fill.gradient.shadeIntensity),e):a.fill.gradient.gradientToColors[s.seriesNumber],a.fill.gradient.inverseColors){var d=r;r=o,o=d}return l.drawGradient(u,r,o,c,p,s.size,a.fill.gradient.stops,a.fill.gradient.colorStops,n)}}]),t}(),R=function(){function t(i,n){e(this,t),this.ctx=i,this.w=i.w}return n(t,[{key:"setGlobalMarkerSize",value:function(){var t=this.w;if(t.globals.markers.size=Array.isArray(t.config.markers.size)?t.config.markers.size:[t.config.markers.size],t.globals.markers.size.length>0){if(t.globals.markers.size.length<t.globals.series.length+1)for(var e=0;e<=t.globals.series.length;e++)void 0===t.globals.markers.size[e]&&t.globals.markers.size.push(t.globals.markers.size[0])}else t.globals.markers.size=t.config.series.map(function(e){return t.config.markers.size})}},{key:"plotChartMarkers",value:function(t,e,i,n){var r,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=this.w,s=e,l=t,h=null,u=new y(this.ctx);if((a.globals.markers.size[e]>0||o)&&(h=u.group({class:o?"":"apexcharts-series-markers"})).attr("clip-path","url(#gridRectMarkerMask".concat(a.globals.cuid,")")),l.x instanceof Array)for(var c=0;c<l.x.length;c++){var p=i;1===i&&0===c&&(p=0),1===i&&1===c&&(p=1);var d="apexcharts-marker";if("line"!==a.config.chart.type&&"area"!==a.config.chart.type||a.globals.comboCharts||a.config.tooltip.intersect||(d+=" no-pointer-events"),(Array.isArray(a.config.markers.size)?a.globals.markers.size[e]>0:a.config.markers.size>0)||o){f.isNumber(l.y[c])?d+=" w".concat(f.randomId()):d="apexcharts-nullpoint";var v=this.getMarkerConfig(d,e,p);a.config.series[s].data[i]&&(a.config.series[s].data[i].fillColor&&(v.pointFillColor=a.config.series[s].data[i].fillColor),a.config.series[s].data[i].strokeColor&&(v.pointStrokeColor=a.config.series[s].data[i].strokeColor)),n&&(v.pSize=n),(r=u.drawMarker(l.x[c],l.y[c],v)).attr("rel",p),r.attr("j",p),r.attr("index",e),r.node.setAttribute("default-marker-size",v.pSize),new g(this.ctx).setSelectionFilter(r,e,p),this.addEvents(r),h&&h.add(r)}else void 0===a.globals.pointsArray[e]&&(a.globals.pointsArray[e]=[]),a.globals.pointsArray[e].push([l.x[c],l.y[c]])}return h}},{key:"getMarkerConfig",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=this.w,r=this.getMarkerStyle(e),o=n.globals.markers.size[e],a=n.config.markers;return null!==i&&a.discrete.length&&a.discrete.map(function(t){t.seriesIndex===e&&t.dataPointIndex===i&&(r.pointStrokeColor=t.strokeColor,r.pointFillColor=t.fillColor,o=t.size)}),{pSize:o,pRadius:a.radius,pWidth:a.strokeWidth instanceof Array?a.strokeWidth[e]:a.strokeWidth,pointStrokeColor:r.pointStrokeColor,pointFillColor:r.pointFillColor,shape:a.shape instanceof Array?a.shape[e]:a.shape,class:t,pointStrokeOpacity:a.strokeOpacity instanceof Array?a.strokeOpacity[e]:a.strokeOpacity,pointStrokeDashArray:a.strokeDashArray instanceof Array?a.strokeDashArray[e]:a.strokeDashArray,pointFillOpacity:a.fillOpacity instanceof Array?a.fillOpacity[e]:a.fillOpacity,seriesIndex:e}}},{key:"addEvents",value:function(t){var e=this.w,i=new y(this.ctx);t.node.addEventListener("mouseenter",i.pathMouseEnter.bind(this.ctx,t)),t.node.addEventListener("mouseleave",i.pathMouseLeave.bind(this.ctx,t)),t.node.addEventListener("mousedown",i.pathMouseDown.bind(this.ctx,t)),t.node.addEventListener("click",e.config.markers.onClick),t.node.addEventListener("dblclick",e.config.markers.onDblClick),t.node.addEventListener("touchstart",i.pathMouseDown.bind(this.ctx,t),{passive:!0})}},{key:"getMarkerStyle",value:function(t){var e=this.w,i=e.globals.markers.colors,n=e.config.markers.strokeColor||e.config.markers.strokeColors;return{pointStrokeColor:n instanceof Array?n[t]:n,pointFillColor:i instanceof Array?i[t]:i}}}]),t}(),M=function(){function t(i){e(this,t),this.ctx=i,this.w=i.w,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled}return n(t,[{key:"draw",value:function(t,e,i){var n=this.w,r=new y(this.ctx),o=i.realIndex,a=i.pointsPos,s=i.zRatio,l=i.elParent,h=r.group({class:"apexcharts-series-markers apexcharts-series-".concat(n.config.chart.type)});if(h.attr("clip-path","url(#gridRectMarkerMask".concat(n.globals.cuid,")")),a.x instanceof Array)for(var u=0;u<a.x.length;u++){var c=e+1,p=!0;0===e&&0===u&&(c=0),0===e&&1===u&&(c=1);var d=0,f=n.globals.markers.size[o];if(s!==1/0){f=n.globals.seriesZ[o][c]/s;var g=n.config.plotOptions.bubble;g.minBubbleRadius&&f<g.minBubbleRadius&&(f=g.minBubbleRadius),g.maxBubbleRadius&&f>g.maxBubbleRadius&&(f=g.maxBubbleRadius)}n.config.chart.animations.enabled||(d=f);var v=a.y[u];if(d=d||0,null!==v&&void 0!==n.globals.series[o][c]||(p=!1),p){var m=this.drawPoint(a.x[u],v,d,f,o,c,e);h.add(m)}l.add(h)}}},{key:"drawPoint",value:function(t,e,i,n,r,o,a){var s=this.w,l=r,h=new v(this.ctx),u=new g(this.ctx),c=new A(this.ctx),p=new R(this.ctx),d=new y(this.ctx),f=p.getMarkerConfig("apexcharts-marker",l),m=c.fillPath({seriesNumber:r,dataPointIndex:o,patternUnits:"objectBoundingBox",value:s.globals.series[r][a]}),_=d.drawCircle(i);if(s.config.series[l].data[o]&&s.config.series[l].data[o].fillColor&&(m=s.config.series[l].data[o].fillColor),_.attr({cx:t,cy:e,fill:m,stroke:f.pointStrokeColor,"stroke-width":f.pWidth,"stroke-dasharray":f.pointStrokeDashArray,"stroke-opacity":f.pointStrokeOpacity}),s.config.chart.dropShadow.enabled&&u.dropShadow(_,s.config.chart.dropShadow,r),this.initialAnim&&!s.globals.dataChanged){var x=1;s.globals.resized||(x=s.config.chart.animations.speed),h.animateCircleRadius(_,0,n,x,s.globals.easing,function(){window.setTimeout(function(){h.animationCompleted(_)},100)})}if(s.globals.dataChanged)if(this.dynamicAnim){var b,w,S,C,E=s.config.chart.animations.dynamicAnimation.speed;null!=(C=s.globals.previousPaths[r]&&s.globals.previousPaths[r][a])&&(b=C.x,w=C.y,S=void 0!==C.r?C.r:n);for(var T=0;T<s.globals.collapsedSeries.length;T++)s.globals.collapsedSeries[T].index===r&&(E=1,n=0);0===t&&0===e&&(n=0),h.animateCircle(_,{cx:b,cy:w,r:S},{cx:t,cy:e,r:n},E,s.globals.easing)}else _.attr({r:n});return _.attr({rel:o,j:o,index:r,"default-marker-size":n}),u.setSelectionFilter(_,r,o),p.addEvents(_),_.node.classList.add("apexcharts-marker"),_}},{key:"centerTextInBubble",value:function(t){var e=this.w;return{y:t+=parseInt(e.config.dataLabels.style.fontSize,10)/4}}}]),t}(),F=function(){function t(i){e(this,t),this.ctx=i,this.w=i.w}return n(t,[{key:"dataLabelsCorrection",value:function(t,e,i,n,r,o,a){var s=this.w,l=!1,h=new y(this.ctx).getTextRects(i,a),u=h.width,c=h.height;if(void 0===s.globals.dataLabelsRects[n]&&(s.globals.dataLabelsRects[n]=[]),s.globals.dataLabelsRects[n].push({x:t,y:e,width:u,height:c}),void 0!==s.globals.dataLabelsRects[n][s.globals.dataLabelsRects[n].length-2]){var p=s.globals.dataLabelsRects[n][void 0!==s.globals.lastDrawnDataLabelsIndexes[n]?s.globals.lastDrawnDataLabelsIndexes[n][s.globals.lastDrawnDataLabelsIndexes[n].length-1]:0];(t>p.x+p.width+2||e>p.y+p.height+2||t+u<p.x)&&(l=!0)}return(0===r||o)&&(l=!0),{x:t,y:e,textRects:h,drawnextLabel:l}}},{key:"drawDataLabel",value:function(t,e,i){var n=this,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,o=this.w,a=new y(this.ctx),s=o.config.dataLabels,l=0,h=0,u=i,c=null;if(!s.enabled||t.x instanceof Array!=1)return c;c=a.group({class:"apexcharts-data-labels"});for(var p=0;p<t.x.length;p++)if(l=t.x[p]+s.offsetX,h=t.y[p]+s.offsetY+r,!isNaN(l)){1===i&&0===p&&(u=0),1===i&&1===p&&(u=1);var d=o.globals.series[e][u],f="",g=function(t){return o.config.dataLabels.formatter(t,{ctx:n.ctx,seriesIndex:e,dataPointIndex:u,w:o})};"bubble"===o.config.chart.type?(f=g(d=o.globals.seriesZ[e][u]),h=t.y[p],h=new M(this.ctx).centerTextInBubble(h,e,u).y):void 0!==d&&(f=g(d)),this.plotDataLabelsText({x:l,y:h,text:f,i:e,j:u,parent:c,offsetCorrection:!0,dataLabelsConfig:o.config.dataLabels})}return c}},{key:"plotDataLabelsText",value:function(t){var e=this.w,i=new y(this.ctx),n=t.x,r=t.y,o=t.i,a=t.j,s=t.text,l=t.textAnchor,h=t.parent,u=t.dataLabelsConfig,c=t.color,p=t.alwaysDrawDataLabel,d=t.offsetCorrection;if(!(Array.isArray(e.config.dataLabels.enabledOnSeries)&&e.config.dataLabels.enabledOnSeries.indexOf(o)<0)){var f={x:n,y:r,drawnextLabel:!0};d&&(f=this.dataLabelsCorrection(n,r,s,o,a,p,parseInt(u.style.fontSize,10))),e.globals.zoomed||(n=f.x,r=f.y),f.textRects&&(n+f.textRects.width<-20||n>e.globals.gridWidth+20)&&(s="");var v=e.globals.dataLabels.style.colors[o];(("bar"===e.config.chart.type||"rangeBar"===e.config.chart.type)&&e.config.plotOptions.bar.distributed||e.config.dataLabels.distributed)&&(v=e.globals.dataLabels.style.colors[a]),c&&(v=c);var m=u.offsetX,_=u.offsetY;if("bar"!==e.config.chart.type&&"rangeBar"!==e.config.chart.type||(m=0,_=0),f.drawnextLabel){var x=i.drawText({width:100,height:parseInt(u.style.fontSize,10),x:n+m,y:r+_,foreColor:v,textAnchor:l||u.textAnchor,text:s,fontSize:u.style.fontSize,fontFamily:u.style.fontFamily,fontWeight:u.style.fontWeight||"normal"});if(x.attr({class:"apexcharts-datalabel",cx:n,cy:r}),u.dropShadow.enabled){var b=u.dropShadow;new g(this.ctx).dropShadow(x,b)}h.add(x),void 0===e.globals.lastDrawnDataLabelsIndexes[o]&&(e.globals.lastDrawnDataLabelsIndexes[o]=[]),e.globals.lastDrawnDataLabelsIndexes[o].push(a)}}}},{key:"addBackgroundToDataLabel",value:function(t,e){var i=this.w,n=i.config.dataLabels.background,r=n.padding,o=n.padding/2,a=e.width,s=e.height,l=new y(this.ctx).drawRect(e.x-r,e.y-o/2,a+2*r,s+o,n.borderRadius,"transparent"===i.config.chart.background?"#fff":i.config.chart.background,n.opacity,n.borderWidth,n.borderColor);return n.dropShadow.enabled&&new g(this.ctx).dropShadow(l,n.dropShadow),l}},{key:"dataLabelsBackground",value:function(){var t=this.w;if("bubble"!==t.config.chart.type)for(var e=t.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels text"),i=0;i<e.length;i++){var n=e[i],r=n.getBBox(),o=null;if(r.width&&r.height&&(o=this.addBackgroundToDataLabel(n,r)),o){n.parentNode.insertBefore(o.node,n);var a=n.getAttribute("fill");!t.config.chart.animations.enabled||t.globals.resized||t.globals.dataChanged?o.attr({fill:a}):o.animate().attr({fill:a}),n.setAttribute("fill",t.config.dataLabels.background.foreColor)}}}},{key:"bringForward",value:function(){for(var t=this.w,e=t.globals.dom.baseEl.getElementsByClassName("apexcharts-datalabels"),i=t.globals.dom.baseEl.querySelector(".apexcharts-plot-series:last-child"),n=0;n<e.length;n++)i&&i.insertBefore(e[n],i.nextSibling)}}]),t}(),k=function(){function t(i){e(this,t),this.ctx=i,this.w=i.w,this.legendInactiveClass="legend-mouseover-inactive"}return n(t,[{key:"getAllSeriesEls",value:function(){return this.w.globals.dom.baseEl.getElementsByClassName("apexcharts-series")}},{key:"getSeriesByName",value:function(t){return this.w.globals.dom.baseEl.querySelector("[seriesName='".concat(f.escapeString(t),"']"))}},{key:"isSeriesHidden",value:function(t){var e=this.getSeriesByName(t),i=parseInt(e.getAttribute("data:realIndex"),10);return{isHidden:e.classList.contains("apexcharts-series-collapsed"),realIndex:i}}},{key:"addCollapsedClassToSeries",value:function(t,e){function i(i){for(var n=0;n<i.length;n++)i[n].index===e&&t.node.classList.add("apexcharts-series-collapsed")}var n=this.w;i(n.globals.collapsedSeries),i(n.globals.ancillaryCollapsedSeries)}},{key:"toggleSeries",value:function(t){var e=this.isSeriesHidden(t);return this.ctx.legend.legendHelpers.toggleDataSeries(e.realIndex,e.isHidden),e.isHidden}},{key:"showSeries",value:function(t){var e=this.isSeriesHidden(t);e.isHidden&&this.ctx.legend.legendHelpers.toggleDataSeries(e.realIndex,!0)}},{key:"hideSeries",value:function(t){var e=this.isSeriesHidden(t);e.isHidden||this.ctx.legend.legendHelpers.toggleDataSeries(e.realIndex,!1)}},{key:"resetSeries",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=this.w,r=n.globals.initialSeries.slice();n.config.series=r,n.globals.previousPaths=[],i&&(n.globals.collapsedSeries=[],n.globals.ancillaryCollapsedSeries=[],n.globals.collapsedSeriesIndices=[],n.globals.ancillaryCollapsedSeriesIndices=[]),t&&(e&&(n.globals.zoomed=!1,this.ctx.updateHelpers.revertDefaultAxisMinMax()),this.ctx.updateHelpers._updateSeries(r,n.config.chart.animations.dynamicAnimation.enabled))}},{key:"toggleSeriesOnHover",value:function(t,e){var i=this.w,n=i.globals.dom.baseEl.getElementsByClassName("apexcharts-series apexcharts-datalabels");if("mousemove"===t.type){var r=parseInt(e.getAttribute("rel"),10)-1,o=null,a=null;i.globals.axisCharts||"radialBar"===i.config.chart.type?i.globals.axisCharts?(o=i.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(r,"']")),a=i.globals.dom.baseEl.querySelector(".apexcharts-datalabels[data\\:realIndex='".concat(r,"']"))):o=i.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(r+1,"']")):o=i.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(r+1,"'] path"));for(var s=0;s<n.length;s++)n[s].classList.add(this.legendInactiveClass);null!==o&&(i.globals.axisCharts||o.parentNode.classList.remove(this.legendInactiveClass),o.classList.remove(this.legendInactiveClass),null!==a&&a.classList.remove(this.legendInactiveClass))}else if("mouseout"===t.type)for(var l=0;l<n.length;l++)n[l].classList.remove(this.legendInactiveClass)}},{key:"highlightRangeInSeries",value:function(t,e){var i=this,n=this.w,r=n.globals.dom.baseEl.getElementsByClassName("apexcharts-heatmap-rect"),o=function(t){for(var e=0;e<r.length;e++)r[e].classList[t](i.legendInactiveClass)};if("mousemove"===t.type){var a=parseInt(e.getAttribute("rel"),10)-1;o("add"),function(t){for(var e=0;e<r.length;e++){var n=parseInt(r[e].getAttribute("val"),10);n>=t.from&&n<=t.to&&r[e].classList.remove(i.legendInactiveClass)}}(n.config.plotOptions.heatmap.colorScale.ranges[a])}else"mouseout"===t.type&&o("remove")}},{key:"getActiveConfigSeriesIndex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.w,i=0;if(e.config.series.length>1)for(var n=e.config.series.map(function(i,n){var r=!1;return t&&(r="bar"===e.config.series[n].type||"column"===e.config.series[n].type),i.data&&i.data.length>0&&!r?n:-1}),r=0;r<n.length;r++)if(-1!==n[r]){i=n[r];break}return i}},{key:"getPreviousPaths",value:function(){function t(t,i,n){for(var r=t[i].childNodes,o={type:n,paths:[],realIndex:t[i].getAttribute("data:realIndex")},a=0;a<r.length;a++)if(r[a].hasAttribute("pathTo")){var s=r[a].getAttribute("pathTo");o.paths.push({d:s})}e.globals.previousPaths.push(o)}var e=this.w;e.globals.previousPaths=[],["line","area","bar","candlestick","radar"].forEach(function(i){for(var n,r=(n=i,e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(n,"-series .apexcharts-series"))),o=0;o<r.length;o++)t(r,o,i)}),this.handlePrevBubbleScatterPaths("bubble"),this.handlePrevBubbleScatterPaths("scatter");var i=e.globals.dom.baseEl.querySelectorAll(".apexcharts-heatmap .apexcharts-series");if(i.length>0)for(var n=0;n<i.length;n++){for(var r=e.globals.dom.baseEl.querySelectorAll(".apexcharts-heatmap .apexcharts-series[data\\:realIndex='".concat(n,"'] rect")),o=[],a=0;a<r.length;a++)o.push({color:r[a].getAttribute("color")});e.globals.previousPaths.push(o)}e.globals.axisCharts||(e.globals.previousPaths=e.globals.series)}},{key:"handlePrevBubbleScatterPaths",value:function(t){var e=this.w,i=e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(t,"-series .apexcharts-series"));if(i.length>0)for(var n=0;n<i.length;n++){for(var r=e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(t,"-series .apexcharts-series[data\\:realIndex='").concat(n,"'] circle")),o=[],a=0;a<r.length;a++)o.push({x:r[a].getAttribute("cx"),y:r[a].getAttribute("cy"),r:r[a].getAttribute("r")});e.globals.previousPaths.push(o)}}},{key:"clearPreviousPaths",value:function(){var t=this.w;t.globals.previousPaths=[],t.globals.allSeriesCollapsed=!1}},{key:"handleNoData",value:function(){var t=this.w,e=t.config.noData,i=new y(this.ctx),n=t.globals.svgWidth/2,r=t.globals.svgHeight/2,o="middle";if(t.globals.noData=!0,t.globals.animationEnded=!0,"left"===e.align?(n=10,o="start"):"right"===e.align&&(n=t.globals.svgWidth-10,o="end"),"top"===e.verticalAlign?r=50:"bottom"===e.verticalAlign&&(r=t.globals.svgHeight-50),n+=e.offsetX,r=r+parseInt(e.style.fontSize,10)+2+e.offsetY,void 0!==e.text&&""!==e.text){var a=i.drawText({x:n,y:r,text:e.text,textAnchor:o,fontSize:e.style.fontSize,fontFamily:e.style.fontFamily,foreColor:e.style.color,opacity:1,class:"apexcharts-text-nodata"});t.globals.dom.Paper.add(a)}}},{key:"setNullSeriesToZeroValues",value:function(t){for(var e=this.w,i=0;i<t.length;i++)if(0===t[i].length)for(var n=0;n<t[e.globals.maxValsInArrayIndex].length;n++)t[i].push(0);return t}},{key:"hasAllSeriesEqualX",value:function(){for(var t=!0,e=this.w,i=this.filteredSeriesX(),n=0;n<i.length-1;n++)if(i[n][0]!==i[n+1][0]){t=!1;break}return e.globals.allSeriesHasEqualX=t,t}},{key:"filteredSeriesX",value:function(){return this.w.globals.seriesX.map(function(t){return t.length>0?t:[]})}}]),t}(),N=function(){function t(i){e(this,t),this.ctx=i,this.w=i.w,this.twoDSeries=[],this.threeDSeries=[],this.twoDSeriesX=[],this.coreUtils=new O(this.ctx)}return n(t,[{key:"isMultiFormat",value:function(){return this.isFormatXY()||this.isFormat2DArray()}},{key:"isFormatXY",value:function(){var t=this.w.config.series.slice(),e=new k(this.ctx);if(this.activeSeriesIndex=e.getActiveConfigSeriesIndex(),void 0!==t[this.activeSeriesIndex].data&&t[this.activeSeriesIndex].data.length>0&&null!==t[this.activeSeriesIndex].data[0]&&void 0!==t[this.activeSeriesIndex].data[0].x&&null!==t[this.activeSeriesIndex].data[0])return!0}},{key:"isFormat2DArray",value:function(){var t=this.w.config.series.slice(),e=new k(this.ctx);if(this.activeSeriesIndex=e.getActiveConfigSeriesIndex(),void 0!==t[this.activeSeriesIndex].data&&t[this.activeSeriesIndex].data.length>0&&void 0!==t[this.activeSeriesIndex].data[0]&&null!==t[this.activeSeriesIndex].data[0]&&t[this.activeSeriesIndex].data[0].constructor===Array)return!0}},{key:"handleFormat2DArray",value:function(t,e){for(var i=this.w.config,n=this.w.globals,r=0;r<t[e].data.length;r++)if(void 0!==t[e].data[r][1]&&(Array.isArray(t[e].data[r][1])&&4===t[e].data[r][1].length?this.twoDSeries.push(f.parseNumber(t[e].data[r][1][3])):this.twoDSeries.push(f.parseNumber(5===t[e].data[r].length?t[e].data[r][4]:t[e].data[r][1])),n.dataFormatXNumeric=!0),"datetime"===i.xaxis.type){var o=new Date(t[e].data[r][0]);o=new Date(o).getTime(),this.twoDSeriesX.push(o)}else this.twoDSeriesX.push(t[e].data[r][0]);for(var a=0;a<t[e].data.length;a++)void 0!==t[e].data[a][2]&&(this.threeDSeries.push(t[e].data[a][2]),n.isDataXYZ=!0)}},{key:"handleFormatXY",value:function(t,e){var i=this.w.config,n=this.w.globals,r=new E(this.ctx),o=e;n.collapsedSeriesIndices.indexOf(e)>-1&&(o=this.activeSeriesIndex);for(var a=0;a<t[e].data.length;a++)void 0!==t[e].data[a].y&&(Array.isArray(t[e].data[a].y)?this.twoDSeries.push(f.parseNumber(t[e].data[a].y[t[e].data[a].y.length-1])):this.twoDSeries.push(f.parseNumber(t[e].data[a].y)));for(var s=0;s<t[o].data.length;s++){var l="string"==typeof t[o].data[s].x,h=Array.isArray(t[o].data[s].x),u=!h&&!!r.isValidDate(t[o].data[s].x.toString());l||u?l||i.xaxis.convertedCatToNumeric?"datetime"!==i.xaxis.type||n.isRangeData?(this.fallbackToCategory=!0,this.twoDSeriesX.push(t[o].data[s].x)):this.twoDSeriesX.push(r.parseDate(t[o].data[s].x)):"datetime"===i.xaxis.type?this.twoDSeriesX.push(r.parseDate(t[o].data[s].x.toString())):(n.dataFormatXNumeric=!0,n.isXNumeric=!0,this.twoDSeriesX.push(parseFloat(t[o].data[s].x))):h?(this.fallbackToCategory=!0,this.twoDSeriesX.push(t[o].data[s].x)):(n.isXNumeric=!0,n.dataFormatXNumeric=!0,this.twoDSeriesX.push(t[o].data[s].x))}if(t[e].data[0]&&void 0!==t[e].data[0].z){for(var c=0;c<t[e].data.length;c++)this.threeDSeries.push(t[e].data[c].z);n.isDataXYZ=!0}}},{key:"handleRangeData",value:function(t,e){var i=this.w.config,n=this.w.globals,r={};return this.isFormat2DArray()?r=this.handleRangeDataFormat("array",t,e):this.isFormatXY()&&(r=this.handleRangeDataFormat("xy",t,e)),n.seriesRangeStart.push(r.start),n.seriesRangeEnd.push(r.end),"datetime"===i.xaxis.type&&n.seriesRangeBarTimeline.push(r.rangeUniques),n.seriesRangeBarTimeline.forEach(function(t,e){t&&t.forEach(function(t,e){t.y.forEach(function(e,i){for(var n=0;n<t.y.length;n++)i!==n&&e.y1<=t.y[n].y2&&t.y[n].y1<=e.y2&&(t.overlaps.indexOf(e.rangeName)<0&&t.overlaps.push(e.rangeName),t.overlaps.indexOf(t.y[n].rangeName)<0&&t.overlaps.push(t.y[n].rangeName))})})}),r}},{key:"handleCandleStickData",value:function(t,e){var i=this.w.globals,n={};return this.isFormat2DArray()?n=this.handleCandleStickDataFormat("array",t,e):this.isFormatXY()&&(n=this.handleCandleStickDataFormat("xy",t,e)),i.seriesCandleO[e]=n.o,i.seriesCandleH[e]=n.h,i.seriesCandleL[e]=n.l,i.seriesCandleC[e]=n.c,n}},{key:"handleRangeDataFormat",value:function(t,e,i){var n=[],r=[],o=e[i].data.filter(function(t,e,i){return e===i.findIndex(function(e){return e.x===t.x})}).map(function(t,e){return{x:t.x,overlaps:[],y:[]}}),a="Please provide [Start, End] values in valid format. Read more https://apexcharts.com/docs/series/#rangecharts",s=new k(this.ctx).getActiveConfigSeriesIndex();if("array"===t){if(2!==e[s].data[0][1].length)throw new Error(a);for(var l=0;l<e[i].data.length;l++)n.push(e[i].data[l][1][0]),r.push(e[i].data[l][1][1])}else if("xy"===t){if(2!==e[s].data[0].y.length)throw new Error(a);for(var h=function(t){var a=f.randomId(),s=e[i].data[t].x,l={y1:e[i].data[t].y[0],y2:e[i].data[t].y[1],rangeName:a};e[i].data[t].rangeName=a;var h=o.findIndex(function(t){return t.x===s});o[h].y.push(l),n.push(l.y1),r.push(l.y2)},u=0;u<e[i].data.length;u++)h(u)}return{start:n,end:r,rangeUniques:o}}},{key:"handleCandleStickDataFormat",value:function(t,e,i){var n=[],r=[],o=[],a=[],s="Please provide [Open, High, Low and Close] values in valid format. Read more https://apexcharts.com/docs/series/#candlestick";if("array"===t){if(!Array.isArray(e[i].data[0][1])&&5!==e[i].data[0].length||Array.isArray(e[i].data[0][1])&&4!==e[i].data[0][1].length)throw new Error(s);if(5===e[i].data[0].length)for(var l=0;l<e[i].data.length;l++)n.push(e[i].data[l][1]),r.push(e[i].data[l][2]),o.push(e[i].data[l][3]),a.push(e[i].data[l][4]);else for(var h=0;h<e[i].data.length;h++)n.push(e[i].data[h][1][0]),r.push(e[i].data[h][1][1]),o.push(e[i].data[h][1][2]),a.push(e[i].data[h][1][3])}else if("xy"===t){if(4!==e[i].data[0].y.length)throw new Error(s);for(var u=0;u<e[i].data.length;u++)n.push(e[i].data[u].y[0]),r.push(e[i].data[u].y[1]),o.push(e[i].data[u].y[2]),a.push(e[i].data[u].y[3])}return{o:n,h:r,l:o,c:a}}},{key:"parseDataAxisCharts",value:function(t){for(var e=this,i=this.w.config,n=this.w.globals,r=new E(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.ctx),o=i.labels.length>0?i.labels.slice():i.xaxis.categories.slice(),a=function(){for(var t=0;t<o.length;t++)if("string"==typeof o[t]){if(!r.isValidDate(o[t]))throw new Error("You have provided invalid Date format. Please provide a valid JavaScript Date");e.twoDSeriesX.push(r.parseDate(o[t]))}else{if(13!==String(o[t]).length)throw new Error("Please provide a valid JavaScript timestamp");e.twoDSeriesX.push(o[t])}},s=0;s<t.length;s++){if(this.twoDSeries=[],this.twoDSeriesX=[],this.threeDSeries=[],void 0===t[s].data)return void console.error("It is a possibility that you may have not included 'data' property in series.");if("rangeBar"!==i.chart.type&&"rangeArea"!==i.chart.type&&"rangeBar"!==t[s].type&&"rangeArea"!==t[s].type||(n.isRangeData=!0,this.handleRangeData(t,s)),this.isMultiFormat())this.isFormat2DArray()?this.handleFormat2DArray(t,s):this.isFormatXY()&&this.handleFormatXY(t,s),"candlestick"!==i.chart.type&&"candlestick"!==t[s].type||this.handleCandleStickData(t,s),n.series.push(this.twoDSeries),n.labels.push(this.twoDSeriesX),n.seriesX.push(this.twoDSeriesX),s!==this.activeSeriesIndex||this.fallbackToCategory||(n.isXNumeric=!0);else{"datetime"===i.xaxis.type?(n.isXNumeric=!0,a(),n.seriesX.push(this.twoDSeriesX)):"numeric"===i.xaxis.type&&(n.isXNumeric=!0,o.length>0&&(this.twoDSeriesX=o,n.seriesX.push(this.twoDSeriesX))),n.labels.push(this.twoDSeriesX);var l=t[s].data.map(function(t){return f.parseNumber(t)});n.series.push(l)}n.seriesZ.push(this.threeDSeries),n.seriesNames.push(void 0!==t[s].name?t[s].name:"series-"+parseInt(s+1,10))}return this.w}},{key:"parseDataNonAxisCharts",value:function(t){var e=this.w.globals,i=this.w.config;e.series=t.slice(),e.seriesNames=i.labels.slice();for(var n=0;n<e.series.length;n++)void 0===e.seriesNames[n]&&e.seriesNames.push("series-"+(n+1));return this.w}},{key:"handleExternalLabelsData",value:function(t){var e=this.w.config,i=this.w.globals;e.xaxis.categories.length>0?i.labels=e.xaxis.categories:e.labels.length>0?i.labels=e.labels.slice():this.fallbackToCategory?(i.labels=i.labels[0],i.seriesRangeBarTimeline.length&&(i.seriesRangeBarTimeline.map(function(t){t.forEach(function(t){i.labels.indexOf(t.x)<0&&t.x&&i.labels.push(t.x)})}),i.labels=i.labels.filter(function(t,e,i){return i.indexOf(t)===e})),e.xaxis.convertedCatToNumeric&&(new T(e).convertCatToNumericXaxis(e,this.ctx,i.seriesX[0]),this._generateExternalLabels(t))):this._generateExternalLabels(t)}},{key:"_generateExternalLabels",value:function(t){var e=this.w.globals,i=this.w.config,n=[];if(e.axisCharts){if(e.series.length>0)for(var r=0;r<e.series[e.maxValsInArrayIndex].length;r++)n.push(r+1);e.seriesX=[];for(var o=0;o<t.length;o++)e.seriesX.push(n);e.isXNumeric=!0}if(0===n.length){n=e.axisCharts?[]:e.series.map(function(t,e){return e+1});for(var a=0;a<t.length;a++)e.seriesX.push(n)}e.labels=n,i.xaxis.convertedCatToNumeric&&(e.categoryLabels=n.map(function(t){return i.xaxis.labels.formatter(t)})),e.noLabelsProvided=!0}},{key:"parseData",value:function(t){var e=this.w,i=e.config,n=e.globals;if(this.excludeCollapsedSeriesInYAxis(),this.fallbackToCategory=!1,this.ctx.core.resetGlobals(),this.ctx.core.isMultipleY(),n.axisCharts?this.parseDataAxisCharts(t):this.parseDataNonAxisCharts(t),this.coreUtils.getLargestSeries(),"bar"===i.chart.type&&i.chart.stacked){var r=new k(this.ctx);n.series=r.setNullSeriesToZeroValues(n.series)}this.coreUtils.getSeriesTotals(),n.axisCharts&&this.coreUtils.getStackedSeriesTotals(),this.coreUtils.getPercentSeries(),n.dataFormatXNumeric||n.isXNumeric&&("numeric"!==i.xaxis.type||0!==i.labels.length||0!==i.xaxis.categories.length)||this.handleExternalLabelsData(t);for(var o=this.coreUtils.getCategoryLabels(n.labels),a=0;a<o.length;a++)if(Array.isArray(o[a])){n.isMultiLineX=!0;break}}},{key:"excludeCollapsedSeriesInYAxis",value:function(){var t=this,e=this.w;e.globals.ignoreYAxisIndexes=e.globals.collapsedSeries.map(function(i,n){if(t.w.globals.isMultipleYAxis&&!e.config.chart.stacked)return i.index})}}]),t}(),D=function(){function t(i){e(this,t),this.ctx=i,this.w=i.w,this.tooltipKeyFormat="dd MMM"}return n(t,[{key:"xLabelFormat",value:function(t,e,i){var n=this.w;if("datetime"===n.config.xaxis.type&&void 0===n.config.xaxis.labels.formatter&&void 0===n.config.tooltip.x.formatter){var r=new E(this.ctx);return r.formatDate(r.getDate(e),n.config.tooltip.x.format)}return t(e,i)}},{key:"defaultGeneralFormatter",value:function(t){return Array.isArray(t)?t.map(function(t){return t}):t}},{key:"defaultYFormatter",value:function(t,e,i){var n=this.w;return f.isNumber(t)&&(t=t.toFixed(0!==n.globals.yValueDecimal?void 0!==e.decimalsInFloat?e.decimalsInFloat:n.globals.yValueDecimal:n.globals.maxYArr[i]-n.globals.minYArr[i]<10?1:0)),t}},{key:"setLabelFormatters",value:function(){var t=this,e=this.w;return e.globals.xLabelFormatter=function(e){return t.defaultGeneralFormatter(e)},e.globals.xaxisTooltipFormatter=function(e){return t.defaultGeneralFormatter(e)},e.globals.ttKeyFormatter=function(e){return t.defaultGeneralFormatter(e)},e.globals.ttZFormatter=function(t){return t},e.globals.legendFormatter=function(e){return t.defaultGeneralFormatter(e)},e.globals.xLabelFormatter=void 0!==e.config.xaxis.labels.formatter?e.config.xaxis.labels.formatter:function(t){return f.isNumber(t)?t.toFixed(!e.config.xaxis.convertedCatToNumeric&&"numeric"===e.config.xaxis.type&&e.globals.dataPoints<50?1:e.globals.isBarHorizontal&&e.globals.maxY-e.globals.minYArr<4?1:0):t},e.globals.ttKeyFormatter="function"==typeof e.config.tooltip.x.formatter?e.config.tooltip.x.formatter:e.globals.xLabelFormatter,"function"==typeof e.config.xaxis.tooltip.formatter&&(e.globals.xaxisTooltipFormatter=e.config.xaxis.tooltip.formatter),Array.isArray(e.config.tooltip.y)?e.globals.ttVal=e.config.tooltip.y:void 0!==e.config.tooltip.y.formatter&&(e.globals.ttVal=e.config.tooltip.y),void 0!==e.config.tooltip.z.formatter&&(e.globals.ttZFormatter=e.config.tooltip.z.formatter),void 0!==e.config.legend.formatter&&(e.globals.legendFormatter=e.config.legend.formatter),e.config.yaxis.forEach(function(i,n){e.globals.yLabelFormatters[n]=void 0!==i.labels.formatter?i.labels.formatter:function(r){return e.globals.xyCharts?Array.isArray(r)?r.map(function(e){return t.defaultYFormatter(e,i,n)}):t.defaultYFormatter(r,i,n):r}}),e.globals}},{key:"heatmapLabelFormatters",value:function(){var t=this.w;if("heatmap"===t.config.chart.type){t.globals.yAxisScale[0].result=t.globals.seriesNames.slice();var e=t.globals.seriesNames.reduce(function(t,e){return t.length>e.length?t:e},0);t.globals.yAxisScale[0].niceMax=e,t.globals.yAxisScale[0].niceMin=e}}}]),t}(),j=function(){function t(i){e(this,t),this.ctx=i,this.w=i.w}return n(t,[{key:"getLabel",value:function(t,e,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"12px",a=this.w,s=void 0===t[n]?"":t[n],l=s,h=a.globals.xLabelFormatter,u=a.config.xaxis.labels.formatter,c=!1;l=new D(this.ctx).xLabelFormat(h,s,s),void 0!==u&&(l=u(s,t[n],n)),e.length>0?(c=function(t){var i=null;return e.forEach(function(t){"month"===t.unit?i="year":"day"===t.unit?i="month":"hour"===t.unit?i="day":"minute"===t.unit&&(i="hour")}),i===t}(e[n].unit),i=e[n].position,l=e[n].value):"datetime"===a.config.xaxis.type&&void 0===u&&(l=""),void 0===l&&(l=""),l=Array.isArray(l)?l:l.toString();var p=new y(this.ctx),d={};return d=a.globals.rotateXLabels?p.getTextRects(l,parseInt(o,10),null,"rotate(".concat(a.config.xaxis.labels.rotate," 0 0)"),!1):p.getTextRects(l,parseInt(o,10)),!Array.isArray(l)&&(0===l.indexOf("NaN")||0===l.toLowerCase().indexOf("invalid")||l.toLowerCase().indexOf("infinity")>=0||r.indexOf(l)>=0&&!a.config.xaxis.labels.showDuplicates)&&(l=""),{x:i,text:l,textRect:d,isBold:c}}},{key:"checkForOverflowingLabels",value:function(t,e,i,n,r){var o=this.w;if(0===t&&o.globals.skipFirstTimelinelabel&&(e.text=""),t===i-1&&o.globals.skipLastTimelinelabel&&(e.text=""),o.config.xaxis.labels.hideOverlappingLabels&&n.length>0){var a=r[r.length-1];e.x<a.textRect.width/(o.globals.rotateXLabels?Math.abs(o.config.xaxis.labels.rotate)/12:1.01)+a.x&&(e.text="")}return e}},{key:"checkForReversedLabels",value:function(t,e){var i=this.w;return i.config.yaxis[t]&&i.config.yaxis[t].reversed&&e.reverse(),e}},{key:"isYAxisHidden",value:function(t){var e=this.w,i=new O(this.ctx);return!e.config.yaxis[t].show||!e.config.yaxis[t].showForNullSeries&&i.isSeriesNull(t)&&-1===e.globals.collapsedSeriesIndices.indexOf(t)}},{key:"drawYAxisTicks",value:function(t,e,i,n,r,o,a){var s=this.w,l=new y(this.ctx),h=s.globals.translateY;if(n.show&&e>0){!0===s.config.yaxis[r].opposite&&(t+=n.width);for(var u=e;u>=0;u--){var c=h+e/10+s.config.yaxis[r].labels.offsetY-1;s.globals.isBarHorizontal&&(c=o*u),"heatmap"===s.config.chart.type&&(c+=o/2);var p=l.drawLine(t+i.offsetX-n.width+n.offsetX,c+n.offsetY,t+i.offsetX+n.offsetX,c+n.offsetY,n.color);a.add(p),h+=o}}}}]),t}(),G=function(){function t(i){e(this,t),this.ctx=i,this.w=i.w}return n(t,[{key:"fixSvgStringForIe11",value:function(t){if(!f.isIE11())return t;var e=0,i=t.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g,function(t){return 2==++e?'xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs"':t});return i=(i=i.replace(/xmlns:NS\d+=""/g,"")).replace(/NS\d+:(\w+:\w+=")/g,"$1")}},{key:"getSvgString",value:function(){var t=this.w.globals.dom.Paper.svg();return this.fixSvgStringForIe11(t)}},{key:"cleanup",value:function(){var t=this.w,e=t.globals.dom.baseEl.getElementsByClassName("apexcharts-xcrosshairs"),i=t.globals.dom.baseEl.getElementsByClassName("apexcharts-ycrosshairs"),n=t.globals.dom.baseEl.getElementsByClassName("apexcharts-zoom-rect apexcharts-selection-rect");Array.prototype.forEach.call(n,function(t){t.setAttribute("width",0)}),e&&(e.setAttribute("x",-500),e.setAttribute("x1",-500),e.setAttribute("x2",-500)),i&&(i.setAttribute("y",-100),i.setAttribute("y1",-100),i.setAttribute("y2",-100))}},{key:"svgUrl",value:function(){this.cleanup();var t=this.getSvgString(),e=new Blob([t],{type:"image/svg+xml;charset=utf-8"});return URL.createObjectURL(e)}},{key:"dataURI",value:function(){var t=this;return new Promise(function(e){var i=t.w;t.cleanup();var n=document.createElement("canvas");n.width=i.globals.svgWidth,n.height=parseInt(i.globals.dom.elWrap.style.height,10);var r="transparent"===i.config.chart.background?"#fff":i.config.chart.background,o=n.getContext("2d");o.fillStyle=r,o.fillRect(0,0,n.width,n.height);var a=t.getSvgString();if(window.canvg&&f.isIE11()){var s=window.canvg.Canvg.fromString(o,a,{ignoreClear:!0,ignoreDimensions:!0});s.start();var l=n.msToBlob();s.stop(),e({blob:l})}else{var h="data:image/svg+xml,"+encodeURIComponent(a),u=new Image;u.crossOrigin="anonymous",u.onload=function(){if(o.drawImage(u,0,0),n.msToBlob){var t=n.msToBlob();e({blob:t})}else{var i=n.toDataURL("image/png");e({imgURI:i})}},u.src=h}})}},{key:"exportToSVG",value:function(){this.triggerDownload(this.svgUrl(),".svg")}},{key:"exportToPng",value:function(){var t=this;this.dataURI().then(function(e){var i=e.imgURI,n=e.blob;n?navigator.msSaveOrOpenBlob(n,t.w.globals.chartID+".png"):t.triggerDownload(i,".png")})}},{key:"exportToCSV",value:function(t){var e=this,i=t.series,n=t.columnDelimiter,r=void 0===n?",":n,o=t.lineDelimiter,a=void 0===o?"\n":o,s=this.w,l=[],h=[],u="data:text/csv;charset=utf-8,",c=new N(this.ctx),p=new j(this.ctx),d=function(t){var i="";if(s.globals.axisCharts){if("category"===s.config.xaxis.type||s.config.xaxis.convertedCatToNumeric)if(s.globals.isBarHorizontal){var n=s.globals.yLabelFormatters[0],r=new k(e.ctx).getActiveConfigSeriesIndex();i=n(s.globals.labels[t],{seriesIndex:r,dataPointIndex:t,w:s})}else i=p.getLabel(s.globals.labels,s.globals.timescaleLabels,0,t).text;"datetime"===s.config.xaxis.type&&(s.config.xaxis.categories.length?i=s.config.xaxis.categories[t]:s.config.labels.length&&(i=s.config.labels[t]))}else i=s.config.labels[t];return i};l.push("category"),i.map(function(t,e){s.globals.axisCharts&&l.push(t.name?t.name:"series-".concat(e))}),s.globals.axisCharts||(l.push("value"),h.push(l.join(r))),i.map(function(t,e){s.globals.axisCharts?function(t,e){if(l.length&&h.push(l.join(r)),t.data&&t.data.length)for(var n=0;n<t.data.length;n++){l=[];var o=d(n);if(o||(c.isFormatXY()?o=i[e].data[n].x:c.isFormat2DArray()&&(o=i[e].data[n]?i[e].data[n][0]:"")),0===e){l.push(o);for(var a=0;a<s.globals.series.length;a++)l.push(s.globals.series[a][n])}("candlestick"===s.config.chart.type||t.type&&"candlestick"===t.type)&&(l.pop(),l.push(s.globals.seriesCandleO[e][n]),l.push(s.globals.seriesCandleH[e][n]),l.push(s.globals.seriesCandleL[e][n]),l.push(s.globals.seriesCandleC[e][n])),"rangeBar"===s.config.chart.type&&(l.pop(),l.push(s.globals.seriesRangeStart[e][n]),l.push(s.globals.seriesRangeEnd[e][n])),l.length&&h.push(l.join(r))}}(t,e):((l=[]).push(s.globals.labels[e]),l.push(s.globals.series[e]),h.push(l.join(r)))}),u+=h.join(a),this.triggerDownload(encodeURI(u),".csv")}},{key:"triggerDownload",value:function(t,e){var i=document.createElement("a");i.href=t,i.download=this.w.globals.chartID+e,document.body.appendChild(i),i.click(),document.body.removeChild(i)}}]),t}(),z=function(){function t(i){e(this,t),this.ctx=i,this.w=i.w;var n=this.w;this.axesUtils=new j(i),this.xaxisLabels=n.globals.labels.slice(),n.globals.timescaleLabels.length>0&&!n.globals.isBarHorizontal&&(this.xaxisLabels=n.globals.timescaleLabels.slice()),this.drawnLabels=[],this.drawnLabelsRects=[],this.offY="top"===n.config.xaxis.position?0:n.globals.gridHeight+1,this.offY=this.offY+n.config.xaxis.axisBorder.offsetY,this.isCategoryBarHorizontal="bar"===n.config.chart.type&&n.config.plotOptions.bar.horizontal,this.xaxisFontSize=n.config.xaxis.labels.style.fontSize,this.xaxisFontFamily=n.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=n.config.xaxis.labels.style.colors,this.xaxisBorderWidth=n.config.xaxis.axisBorder.width,this.isCategoryBarHorizontal&&(this.xaxisBorderWidth=n.config.yaxis[0].axisBorder.width.toString()),this.xaxisBorderWidth=this.xaxisBorderWidth.indexOf("%")>-1?n.globals.gridWidth*parseInt(this.xaxisBorderWidth,10)/100:parseInt(this.xaxisBorderWidth,10),this.xaxisBorderHeight=n.config.xaxis.axisBorder.height,this.yaxis=n.config.yaxis[0]}return n(t,[{key:"drawXaxis",value:function(){var t,e=this,i=this.w,n=new y(this.ctx),r=n.group({class:"apexcharts-xaxis",transform:"translate(".concat(i.config.xaxis.offsetX,", ").concat(i.config.xaxis.offsetY,")")}),o=n.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(i.globals.translateXAxisX,", ").concat(i.globals.translateXAxisY,")")});r.add(o);for(var a=i.globals.padHorizontal,s=[],l=0;l<this.xaxisLabels.length;l++)s.push(this.xaxisLabels[l]);var h=s.length;if(i.globals.isXNumeric?a=a+(t=i.globals.gridWidth/(h>1?h-1:h))/2+i.config.xaxis.labels.offsetX:(t=i.globals.gridWidth/s.length,a=a+t+i.config.xaxis.labels.offsetX),i.config.xaxis.labels.show)for(var u=function(r){var l=a-t/2+i.config.xaxis.labels.offsetX;0===r&&1===h&&t/2===a&&1===i.globals.dataPoints&&(l=i.globals.gridWidth/2);var u=e.axesUtils.getLabel(s,i.globals.timescaleLabels,l,r,e.drawnLabels,e.xaxisFontSize),c=28;i.globals.rotateXLabels&&(c=22),(u=e.axesUtils.checkForOverflowingLabels(r,u,h,e.drawnLabels,e.drawnLabelsRects)).text&&i.globals.xaxisLabelsCount++;var p=n.drawText({x:u.x,y:e.offY+i.config.xaxis.labels.offsetY+c-("top"===i.config.xaxis.position?i.globals.xAxisHeight+i.config.xaxis.axisTicks.height-2:0),text:u.text,textAnchor:"middle",fontWeight:u.isBold?600:i.config.xaxis.labels.style.fontWeight,fontSize:e.xaxisFontSize,fontFamily:e.xaxisFontFamily,foreColor:Array.isArray(e.xaxisForeColors)?i.config.xaxis.convertedCatToNumeric?e.xaxisForeColors[i.globals.minX+r-1]:e.xaxisForeColors[r]:e.xaxisForeColors,isPlainText:!1,cssClass:"apexcharts-xaxis-label "+i.config.xaxis.labels.style.cssClass});o.add(p);var d=document.createElementNS(i.globals.SVGNS,"title");d.textContent=u.text,p.node.appendChild(d),""!==u.text&&(e.drawnLabels.push(u.text),e.drawnLabelsRects.push(u)),a+=t},c=0;c<=h-1;c++)u(c);if(void 0!==i.config.xaxis.title.text){var p=n.group({class:"apexcharts-xaxis-title"}),d=n.drawText({x:i.globals.gridWidth/2+i.config.xaxis.title.offsetX,y:this.offY-parseFloat(this.xaxisFontSize)+i.globals.xAxisLabelsHeight+i.config.xaxis.title.offsetY,text:i.config.xaxis.title.text,textAnchor:"middle",fontSize:i.config.xaxis.title.style.fontSize,fontFamily:i.config.xaxis.title.style.fontFamily,fontWeight:i.config.xaxis.title.style.fontWeight,foreColor:i.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+i.config.xaxis.title.style.cssClass});p.add(d),r.add(p)}if(i.config.xaxis.axisBorder.show){var f=0;"bar"===i.config.chart.type&&i.globals.isXNumeric&&(f-=15);var g=n.drawLine(i.globals.padHorizontal+f+i.config.xaxis.axisBorder.offsetX,this.offY,this.xaxisBorderWidth,this.offY,i.config.xaxis.axisBorder.color,0,this.xaxisBorderHeight);r.add(g)}return r}},{key:"drawXaxisInversed",value:function(t){var e,i,n=this.w,r=new y(this.ctx),o=n.config.yaxis[0].opposite?n.globals.translateYAxisX[t]:0,a=r.group({class:"apexcharts-yaxis apexcharts-xaxis-inversed",rel:t}),s=r.group({class:"apexcharts-yaxis-texts-g apexcharts-xaxis-inversed-texts-g",transform:"translate("+o+", 0)"});a.add(s);var l=[];if(n.config.yaxis[t].show)for(var h=0;h<this.xaxisLabels.length;h++)l.push(this.xaxisLabels[h]);i=-(e=n.globals.gridHeight/l.length)/2.2;var u=n.globals.yLabelFormatters[0],c=n.config.yaxis[0].labels;if(c.show)for(var p=0;p<=l.length-1;p++){var d=void 0===l[p]?"":l[p];d=u(d,{seriesIndex:t,dataPointIndex:p,w:n});var f=0;Array.isArray(d)&&(f=d.length/2*parseInt(c.style.fontSize,10));var g=r.drawText({x:c.offsetX-15,y:i+e+c.offsetY-f,text:d,textAnchor:this.yaxis.opposite?"start":"end",foreColor:Array.isArray(c.style.colors)?c.style.colors[p]:c.style.colors,fontSize:c.style.fontSize,fontFamily:c.style.fontFamily,fontWeight:c.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+c.style.cssClass});s.add(g);var v=document.createElementNS(n.globals.SVGNS,"title");if(v.textContent=d.text,g.node.appendChild(v),0!==n.config.yaxis[t].labels.rotate){var m=r.rotateAroundCenter(g.node);g.node.setAttribute("transform","rotate(".concat(n.config.yaxis[t].labels.rotate," 0 ").concat(m.y,")"))}i+=e}if(void 0!==n.config.yaxis[0].title.text){var _=r.group({class:"apexcharts-yaxis-title apexcharts-xaxis-title-inversed",transform:"translate("+o+", 0)"}),x=r.drawText({x:0,y:n.globals.gridHeight/2,text:n.config.yaxis[0].title.text,textAnchor:"middle",foreColor:n.config.yaxis[0].title.style.color,fontSize:n.config.yaxis[0].title.style.fontSize,fontWeight:n.config.yaxis[0].title.style.fontWeight,fontFamily:n.config.yaxis[0].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+n.config.yaxis[0].title.style.cssClass});_.add(x),a.add(_)}var b=0;this.isCategoryBarHorizontal&&n.config.yaxis[0].opposite&&(b=n.globals.gridWidth);var w=n.config.xaxis.axisBorder;if(w.show){var S=r.drawLine(n.globals.padHorizontal+w.offsetX+b,1+w.offsetY,n.globals.padHorizontal+w.offsetX+b,n.globals.gridHeight+w.offsetY,w.color,0);a.add(S)}return n.config.yaxis[0].axisTicks.show&&this.axesUtils.drawYAxisTicks(b,l.length,n.config.yaxis[0].axisBorder,n.config.yaxis[0].axisTicks,0,e,a),a}},{key:"drawXaxisTicks",value:function(t,e){var i=this.w,n=t;if(!(t<0||t-2>i.globals.gridWidth)){var r=this.offY+i.config.xaxis.axisTicks.offsetY,o=r+i.config.xaxis.axisTicks.height;if("top"===i.config.xaxis.position&&(o=r-i.config.xaxis.axisTicks.height),i.config.xaxis.axisTicks.show){var a=new y(this.ctx).drawLine(t+i.config.xaxis.axisTicks.offsetX,r+i.config.xaxis.offsetY,n+i.config.xaxis.axisTicks.offsetX,o+i.config.xaxis.offsetY,i.config.xaxis.axisTicks.color);e.add(a),a.node.classList.add("apexcharts-xaxis-tick")}}}},{key:"getXAxisTicksPositions",value:function(){var t=this.w,e=[],i=this.xaxisLabels.length,n=t.globals.padHorizontal;if(t.globals.timescaleLabels.length>0)for(var r=0;r<i;r++)n=this.xaxisLabels[r].position,e.push(n);else for(var o=i,a=0;a<o;a++){var s=o;t.globals.isXNumeric&&"bar"!==t.config.chart.type&&(s-=1),e.push(n+=t.globals.gridWidth/s)}return e}},{key:"xAxisLabelCorrections",value:function(){var t=this.w,e=new y(this.ctx),i=t.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g"),n=t.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-texts-g text"),r=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-inversed text"),o=t.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-inversed-texts-g text tspan");if(t.globals.rotateXLabels||t.config.xaxis.labels.rotateAlways)for(var a=0;a<n.length;a++){var s=e.rotateAroundCenter(n[a]);s.y=s.y-1,s.x=s.x+1,n[a].setAttribute("transform","rotate(".concat(t.config.xaxis.labels.rotate," ").concat(s.x," ").concat(s.y,")")),n[a].setAttribute("text-anchor","end"),i.setAttribute("transform","translate(0, ".concat(-10,")"));var l=n[a].childNodes;t.config.xaxis.labels.trim&&Array.prototype.forEach.call(l,function(i){e.placeTextWithEllipsis(i,i.textContent,t.config.xaxis.labels.maxHeight-("bottom"===t.config.legend.position?20:10))})}else!function(){for(var i=t.globals.gridWidth/(t.globals.labels.length+1),r=0;r<n.length;r++){var o=n[r].childNodes;t.config.xaxis.labels.trim&&"datetime"!==t.config.xaxis.type&&Array.prototype.forEach.call(o,function(t){e.placeTextWithEllipsis(t,t.textContent,i)})}}();if(r.length>0){var h=r[r.length-1].getBBox(),u=r[0].getBBox();h.x<-20&&r[r.length-1].parentNode.removeChild(r[r.length-1]),u.x+u.width>t.globals.gridWidth&&!t.globals.isBarHorizontal&&r[0].parentNode.removeChild(r[0]);for(var c=0;c<o.length;c++)e.placeTextWithEllipsis(o[c],o[c].textContent,t.config.yaxis[0].labels.maxWidth-2*parseFloat(t.config.yaxis[0].title.style.fontSize)-20)}}}]),t}(),B=function(){function t(i){e(this,t),this.ctx=i,this.w=i.w;var n=this.w;this.xaxisLabels=n.globals.labels.slice(),this.axesUtils=new j(i),this.isTimelineBar="datetime"===n.config.xaxis.type&&n.globals.seriesRangeBarTimeline.length,n.globals.timescaleLabels.length>0&&(this.xaxisLabels=n.globals.timescaleLabels.slice())}return n(t,[{key:"drawGridArea",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.w,i=new y(this.ctx);null===t&&(t=i.group({class:"apexcharts-grid"}));var n=i.drawLine(e.globals.padHorizontal,1,e.globals.padHorizontal,e.globals.gridHeight,"transparent"),r=i.drawLine(e.globals.padHorizontal,e.globals.gridHeight,e.globals.gridWidth,e.globals.gridHeight,"transparent");return t.add(r),t.add(n),t}},{key:"drawGrid",value:function(){var t=null;return this.w.globals.axisCharts&&(t=this.renderGrid(),this.drawGridArea(t.el)),t}},{key:"createGridMask",value:function(){var t=this.w,e=t.globals,i=new y(this.ctx),n=Array.isArray(t.config.stroke.width)?0:t.config.stroke.width;if(Array.isArray(t.config.stroke.width)){var r=0;t.config.stroke.width.forEach(function(t){r=Math.max(r,t)}),n=r}e.dom.elGridRectMask=document.createElementNS(e.SVGNS,"clipPath"),e.dom.elGridRectMask.setAttribute("id","gridRectMask".concat(e.cuid)),e.dom.elGridRectMarkerMask=document.createElementNS(e.SVGNS,"clipPath"),e.dom.elGridRectMarkerMask.setAttribute("id","gridRectMarkerMask".concat(e.cuid));var o=t.config.chart.type,a=0,s=0;("bar"===o||"rangeBar"===o||t.globals.comboBarCount>0)&&t.globals.isXNumeric&&!t.globals.isBarHorizontal&&(a=t.config.grid.padding.left,s=t.config.grid.padding.right,e.barPadForNumericAxis>a&&(a=e.barPadForNumericAxis,s=e.barPadForNumericAxis)),e.dom.elGridRect=i.drawRect(-n/2-a-2,-n/2,e.gridWidth+n+s+a+4,e.gridHeight+n,0,"#fff"),new O(this).getLargestMarkerSize();var l=t.globals.markers.largestSize+1;e.dom.elGridRectMarker=i.drawRect(2*-l,2*-l,e.gridWidth+4*l,e.gridHeight+4*l,0,"#fff"),e.dom.elGridRectMask.appendChild(e.dom.elGridRect.node),e.dom.elGridRectMarkerMask.appendChild(e.dom.elGridRectMarker.node);var h=e.dom.baseEl.querySelector("defs");h.appendChild(e.dom.elGridRectMask),h.appendChild(e.dom.elGridRectMarkerMask)}},{key:"_drawGridLines",value:function(t){var e=t.i,i=t.x1,n=this.w;0===e&&n.globals.skipFirstTimelinelabel||e===t.xCount-1&&n.globals.skipLastTimelinelabel||"radar"===n.config.chart.type||(n.config.grid.xaxis.lines.show&&this._drawGridLine({x1:i,y1:t.y1,x2:t.x2,y2:t.y2,parent:t.parent}),new z(this.ctx).drawXaxisTicks(i,this.elg))}},{key:"_drawGridLine",value:function(t){var e=t.x1,i=t.y1,n=t.x2,r=t.y2,o=t.parent,a=this.w,s=a.config.grid.strokeDashArray,l=new y(this).drawLine(e,i,n,r,a.config.grid.borderColor,s);l.node.classList.add("apexcharts-gridline"),o.add(l)}},{key:"_drawGridBandRect",value:function(t){var e=t.c,i=t.x1,n=t.y1,r=t.x2,o=t.y2,a=t.type,s=this.w,l=new y(this.ctx);if("column"!==a||"datetime"!==s.config.xaxis.type){var h=l.drawRect(i,n,r,o,0,s.config.grid[a].colors[e],s.config.grid[a].opacity);this.elg.add(h),h.attr("clip-path","url(#gridRectMask".concat(s.globals.cuid,")")),h.node.classList.add("apexcharts-grid-".concat(a))}}},{key:"_drawXYLines",value:function(t){var e=this,i=t.xCount,n=t.tickAmount,r=this.w;if(r.config.grid.xaxis.lines.show||r.config.xaxis.axisTicks.show){var o=r.globals.padHorizontal,a=r.globals.gridHeight;r.globals.timescaleLabels.length?function(t){for(var n=t.xC,r=t.x1,o=t.y1,a=t.x2,s=t.y2,l=0;l<n;l++)r=e.xaxisLabels[l].position,a=e.xaxisLabels[l].position,e._drawGridLines({i:l,x1:r,y1:o,x2:a,y2:s,xCount:i,parent:e.elgridLinesV})}({xC:i,x1:o,y1:0,x2:void 0,y2:a}):(r.globals.isXNumeric&&(i=r.globals.xAxisScale.result.length),r.config.xaxis.convertedCatToNumeric&&(i=r.globals.xaxisLabelsCount),function(t){for(var n=t.xC,o=t.x1,a=t.y1,s=t.x2,l=t.y2,h=0;h<n+(r.globals.isXNumeric?0:1);h++)0===h&&1===n&&1===r.globals.dataPoints&&(s=o=r.globals.gridWidth/2),e._drawGridLines({i:h,x1:o,y1:a,x2:s,y2:l,xCount:i,parent:e.elgridLinesV}),s=o+=r.globals.gridWidth/(r.globals.isXNumeric?n-1:n)}({xC:i,x1:o,y1:0,x2:void 0,y2:a}))}if(r.config.grid.yaxis.lines.show){var s=0,l=0,h=r.globals.gridWidth,u=n+1;this.isTimelineBar&&(u=r.globals.labels.length);for(var c=0;c<u+(this.isTimelineBar?1:0);c++)this._drawGridLine({x1:0,y1:s,x2:h,y2:l,parent:this.elgridLinesH}),l=s+=r.globals.gridHeight/(this.isTimelineBar?u:n)}}},{key:"_drawInvertedXYLines",value:function(t){var e=t.xCount,i=this.w;if(i.config.grid.xaxis.lines.show||i.config.xaxis.axisTicks.show)for(var n,r=i.globals.padHorizontal,o=i.globals.gridHeight,a=0;a<e+1;a++)i.config.grid.xaxis.lines.show&&this._drawGridLine({x1:r,y1:0,x2:n,y2:o,parent:this.elgridLinesV}),new z(this.ctx).drawXaxisTicks(r,this.elg),n=r=r+i.globals.gridWidth/e+.3;if(i.config.grid.yaxis.lines.show)for(var s=0,l=0,h=i.globals.gridWidth,u=0;u<i.globals.dataPoints+1;u++)this._drawGridLine({x1:0,y1:s,x2:h,y2:l,parent:this.elgridLinesH}),l=s+=i.globals.gridHeight/i.globals.dataPoints}},{key:"renderGrid",value:function(){var t=this.w,e=new y(this.ctx);this.elg=e.group({class:"apexcharts-grid"}),this.elgridLinesH=e.group({class:"apexcharts-gridlines-horizontal"}),this.elgridLinesV=e.group({class:"apexcharts-gridlines-vertical"}),this.elg.add(this.elgridLinesH),this.elg.add(this.elgridLinesV),t.config.grid.show||(this.elgridLinesV.hide(),this.elgridLinesH.hide());for(var i,n=t.globals.yAxisScale.length?t.globals.yAxisScale[0].result.length-1:5,r=0;r<t.globals.series.length&&(void 0!==t.globals.yAxisScale[r]&&(n=t.globals.yAxisScale[r].result.length-1),!(n>2));r++);return!t.globals.isBarHorizontal||this.isTimelineBar?(i=this.xaxisLabels.length,this.isTimelineBar&&(n=t.globals.labels.length),this._drawXYLines({xCount:i,tickAmount:n})):(i=n,n=t.globals.xTickAmount,this._drawInvertedXYLines({xCount:i,tickAmount:n})),this.drawGridBands(i,n),{el:this.elg,xAxisTickWidth:t.globals.gridWidth/i}}},{key:"drawGridBands",value:function(t,e){var i=this.w;if(void 0!==i.config.grid.row.colors&&i.config.grid.row.colors.length>0)for(var n=0,r=i.globals.gridHeight/e,o=i.globals.gridWidth,a=0,s=0;a<e;a++,s++)s>=i.config.grid.row.colors.length&&(s=0),this._drawGridBandRect({c:s,x1:0,y1:n,x2:o,y2:r,type:"row"}),n+=i.globals.gridHeight/e;if(void 0!==i.config.grid.column.colors&&i.config.grid.column.colors.length>0)for(var l=i.globals.isBarHorizontal||"category"!==i.config.xaxis.type&&!i.config.xaxis.convertedCatToNumeric?t:t-1,h=i.globals.padHorizontal,u=i.globals.padHorizontal+i.globals.gridWidth/l,c=i.globals.gridHeight,p=0,d=0;p<t;p++,d++)d>=i.config.grid.column.colors.length&&(d=0),this._drawGridBandRect({c:d,x1:h,y1:0,x2:u,y2:c,type:"column"}),h+=i.globals.gridWidth/l}}]),t}(),Y=function(){function t(i){e(this,t),this.ctx=i,this.w=i.w}return n(t,[{key:"niceScale",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:10,o=arguments.length>5?arguments[5]:void 0,a=this.w;if("dataPoints"===r&&(r=a.globals.dataPoints-1),t===Number.MIN_VALUE&&0===e||!f.isNumber(t)&&!f.isNumber(e)||t===Number.MIN_VALUE&&e===-Number.MAX_VALUE)return this.linearScale(t=0,e=r,r);t>e?(console.warn("axis.min cannot be greater than axis.max"),e=t+.1):t===e&&(t=0===t?0:t-.5,e=0===e?2:e+.5);var s=[],l=Math.abs(e-t);l<1&&o&&("candlestick"===a.config.chart.type||"candlestick"===a.config.series[n].type||a.globals.isRangeData)&&(e*=1.01);var h=r+1;h<2?h=2:h>2&&(h-=2);var u=l/h,c=Math.floor(f.log10(u)),p=Math.pow(10,c),d=Math.round(u/p);d<1&&(d=1);var g=d*p,v=g*Math.floor(t/g),y=g*Math.ceil(e/g),m=v;if(o&&l>2){for(;s.push(m),!((m+=g)>y););return{result:s,niceMin:s[0],niceMax:s[s.length-1]}}var _=t;(s=[]).push(_);for(var x=Math.abs(e-t)/r,b=0;b<=r;b++)_+=x,s.push(_);return s[s.length-2]>=e&&s.pop(),{result:s,niceMin:s[0],niceMax:s[s.length-1]}}},{key:"linearScale",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,n=Math.abs(e-t)/i;i===Number.MAX_VALUE&&(i=10,n=1);for(var r=[],o=t;i>=0;)r.push(o),o+=n,i-=1;return{result:r,niceMin:r[0],niceMax:r[r.length-1]}}},{key:"logarithmicScale",value:function(t,e,i,n){(e<0||e===Number.MIN_VALUE)&&(e=.01);for(var r=Math.log(e)/Math.log(10),o=Math.log(i)/Math.log(10),a=Math.abs(i-e)/n,s=[],l=e;n>=0;)s.push(l),l+=a,n-=1;var h=s.map(function(t,n){t<=0&&(t=.01);var a=(o-r)/(i-e),s=Math.pow(10,r+a*(t-r));return Math.round(s/f.roundToBase(s,10))*f.roundToBase(s,10)});return 0===h[0]&&(h[0]=1),{result:h,niceMin:h[0],niceMax:h[h.length-1]}}},{key:"setYScaleForIndex",value:function(t,e,i){var n=this.w.globals,r=this.w.config,o=n.isBarHorizontal?r.xaxis:r.yaxis[t];void 0===n.yAxisScale[t]&&(n.yAxisScale[t]=[]);var a=Math.abs(i-e);o.logarithmic&&a<=5&&(n.invalidLogScale=!0),o.logarithmic&&a>5?(n.allSeriesCollapsed=!1,n.yAxisScale[t]=this.logarithmicScale(t,e,i,o.tickAmount?o.tickAmount:Math.floor(Math.log10(i)))):i!==-Number.MAX_VALUE&&f.isNumber(i)?(n.allSeriesCollapsed=!1,n.yAxisScale[t]=void 0===o.min&&void 0===o.max||o.forceNiceScale?this.niceScale(e,i,a,t,o.tickAmount?o.tickAmount:a<5&&a>1?a+1:5,void 0===r.yaxis[t].max&&void 0===r.yaxis[t].min||r.yaxis[t].forceNiceScale):this.linearScale(e,i,o.tickAmount)):n.yAxisScale[t]=this.linearScale(0,5,5)}},{key:"setXScale",value:function(t,e){var i=this.w,n=i.globals,r=i.config.xaxis,o=Math.abs(e-t);return n.xAxisScale=e!==-Number.MAX_VALUE&&f.isNumber(e)?this.niceScale(t,e,o,0,r.tickAmount?r.tickAmount:o<5&&o>1?o+1:5):this.linearScale(0,5,5),n.xAxisScale}},{key:"setMultipleYScales",value:function(){var t=this,e=this.w.globals,i=this.w.config,n=e.minYArr.concat([]),r=e.maxYArr.concat([]),o=[];i.yaxis.forEach(function(e,a){var s=a;i.series.forEach(function(t,i){t.name===e.seriesName&&(s=i,o.push(a!==i?{index:i,similarIndex:a,alreadyExists:!0}:{index:i}))}),t.setYScaleForIndex(a,n[s],r[s])}),this.sameScaleInMultipleAxes(n,r,o)}},{key:"sameScaleInMultipleAxes",value:function(t,e,i){var n=this,r=this.w.config,o=this.w.globals,a=[];i.forEach(function(t){t.alreadyExists&&(void 0===a[t.index]&&(a[t.index]=[]),a[t.index].push(t.index),a[t.index].push(t.similarIndex))}),o.yAxisSameScaleIndices=a,a.forEach(function(t,e){a.forEach(function(i,n){var r,o;e!==n&&(r=t,o=i,r.filter(function(t){return-1!==o.indexOf(t)})).length>0&&(a[e]=a[e].concat(a[n]))})});var s=a.map(function(t){return t.filter(function(e,i){return t.indexOf(e)===i})}).map(function(t){return t.sort()});a=a.filter(function(t){return!!t});var l=s.slice(),h=l.map(function(t){return JSON.stringify(t)});l=l.filter(function(t,e){return h.indexOf(JSON.stringify(t))===e});var u=[],c=[];t.forEach(function(t,i){l.forEach(function(n,r){n.indexOf(i)>-1&&(void 0===u[r]&&(u[r]=[],c[r]=[]),u[r].push({key:i,value:t}),c[r].push({key:i,value:e[i]}))})});var p=Array.apply(null,Array(l.length)).map(Number.prototype.valueOf,Number.MIN_VALUE),d=Array.apply(null,Array(l.length)).map(Number.prototype.valueOf,-Number.MAX_VALUE);u.forEach(function(t,e){t.forEach(function(t,i){p[e]=Math.min(t.value,p[e])})}),c.forEach(function(t,e){t.forEach(function(t,i){d[e]=Math.max(t.value,d[e])})}),t.forEach(function(t,e){c.forEach(function(t,i){var a=p[i],s=d[i];r.chart.stacked&&(s=0,t.forEach(function(t,e){t.value!==-Number.MAX_VALUE&&(s+=t.value),a!==Number.MIN_VALUE&&(a+=u[i][e].value)})),t.forEach(function(i,l){t[l].key===e&&(void 0!==r.yaxis[e].min&&(a="function"==typeof r.yaxis[e].min?r.yaxis[e].min(o.minY):r.yaxis[e].min),void 0!==r.yaxis[e].max&&(s="function"==typeof r.yaxis[e].max?r.yaxis[e].max(o.maxY):r.yaxis[e].max),n.setYScaleForIndex(e,a,s))})})})}},{key:"autoScaleY",value:function(t,e,i){t||(t=this);var n=t.w;if(n.globals.isMultipleYAxis||n.globals.collapsedSeries.length)return console.warn("autoScaleYaxis is not supported in a multi-yaxis chart."),e;var r=n.globals.seriesX[0],o=n.config.chart.stacked;return e.forEach(function(t,a){for(var s=0,l=0;l<r.length;l++)if(r[l]>=i.xaxis.min){s=l;break}var h,u,c=n.globals.minYArr[a],p=n.globals.maxYArr[a],d=n.globals.stackedSeriesTotals;n.globals.series.forEach(function(a,l){var f=a[s];o?(f=d[s],h=u=f,d.forEach(function(t,e){r[e]<=i.xaxis.max&&r[e]>=i.xaxis.min&&(t>u&&null!==t&&(u=t),a[e]<h&&null!==a[e]&&(h=a[e]))})):(h=u=f,a.forEach(function(t,e){if(r[e]<=i.xaxis.max&&r[e]>=i.xaxis.min){var o=t,a=t;n.globals.series.forEach(function(i,n){null!==t&&(o=Math.min(i[e],o),a=Math.max(i[e],a))}),a>u&&null!==a&&(u=a),o<h&&null!==o&&(h=o)}})),void 0===h&&void 0===u&&(h=c,u=p),(u*=u<0?.9:1.1)<0&&u<p&&(u=p),(h*=h<0?1.1:.9)<0&&h>c&&(h=c),e.length>1?(e[l].min=void 0===t.min?h:t.min,e[l].max=void 0===t.max?u:t.max):(e[0].min=void 0===t.min?h:t.min,e[0].max=void 0===t.max?u:t.max)})}),e}}]),t}(),X=function(){function t(i){e(this,t),this.ctx=i,this.w=i.w,this.scales=new Y(i)}return n(t,[{key:"init",value:function(){this.setYRange(),this.setXRange(),this.setZRange()}},{key:"getMinYMaxY",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-Number.MAX_VALUE,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=this.w.config,o=this.w.globals,a=-Number.MAX_VALUE,s=Number.MIN_VALUE;null===n&&(n=t+1);var l=o.series,h=l,u=l;"candlestick"===r.chart.type?(h=o.seriesCandleL,u=o.seriesCandleH):o.isRangeData&&(h=o.seriesRangeStart,u=o.seriesRangeEnd);for(var c=t;c<n;c++){o.dataPoints=Math.max(o.dataPoints,l[c].length);for(var p=0;p<o.series[c].length;p++){var d=l[c][p];null!==d&&f.isNumber(d)?(a=Math.max(a,u[c][p]),e=Math.min(e,h[c][p]),i=Math.max(i,h[c][p]),"candlestick"===this.w.config.chart.type&&(a=Math.max(a,o.seriesCandleO[c][p]),a=Math.max(a,o.seriesCandleH[c][p]),a=Math.max(a,o.seriesCandleL[c][p]),i=a=Math.max(a,o.seriesCandleC[c][p])),f.isFloat(d)&&(d=f.noExponents(d),o.yValueDecimal=Math.max(o.yValueDecimal,d.toString().split(".")[1].length)),s>h[c][p]&&h[c][p]<0&&(s=h[c][p])):o.hasNullValues=!0}}return"rangeBar"===r.chart.type&&o.seriesRangeStart.length&&"datetime"===r.xaxis.type&&(s=e),"bar"===r.chart.type&&(s<0&&a<0&&(a=0),s===Number.MIN_VALUE&&(s=0)),{minY:s,maxY:a,lowestY:e,highestY:i}}},{key:"setYRange",value:function(){var t=this.w.globals,e=this.w.config;t.maxY=-Number.MAX_VALUE,t.minY=Number.MIN_VALUE;var i=Number.MAX_VALUE;if(t.isMultipleYAxis)for(var n=0;n<t.series.length;n++){var r=this.getMinYMaxY(n,i,null,n+1);t.minYArr.push(r.minY),t.maxYArr.push(r.maxY),i=r.lowestY}var o=this.getMinYMaxY(0,i,null,t.series.length);if(t.minY=o.minY,t.maxY=o.maxY,i=o.lowestY,e.chart.stacked&&this._setStackedMinMax(),("line"===e.chart.type||"area"===e.chart.type||"candlestick"===e.chart.type)&&t.minY===Number.MIN_VALUE&&i!==-Number.MAX_VALUE&&i!==t.maxY){var a=t.maxY-i;i>=0&&i<=10&&(a=0),t.minY=i-5*a/100,i>0&&t.minY<0&&(t.minY=0),t.maxY=t.maxY+5*a/100}return e.yaxis.forEach(function(e,i){void 0!==e.max&&("number"==typeof e.max?t.maxYArr[i]=e.max:"function"==typeof e.max&&(t.maxYArr[i]=e.max(t.maxY)),t.maxY=t.maxYArr[i]),void 0!==e.min&&("number"==typeof e.min?t.minYArr[i]=e.min:"function"==typeof e.min&&(t.minYArr[i]=e.min(t.minY)),t.minY=t.minYArr[i])}),t.isBarHorizontal&&["min","max"].forEach(function(i){void 0!==e.xaxis[i]&&"number"==typeof e.xaxis[i]&&("min"===i?t.minY=e.xaxis[i]:t.maxY=e.xaxis[i])}),t.isMultipleYAxis?(this.scales.setMultipleYScales(),t.minY=i,t.yAxisScale.forEach(function(e,i){t.minYArr[i]=e.niceMin,t.maxYArr[i]=e.niceMax})):(this.scales.setYScaleForIndex(0,t.minY,t.maxY),t.minY=t.yAxisScale[0].niceMin,t.maxY=t.yAxisScale[0].niceMax,t.minYArr[0]=t.yAxisScale[0].niceMin,t.maxYArr[0]=t.yAxisScale[0].niceMax),{minY:t.minY,maxY:t.maxY,minYArr:t.minYArr,maxYArr:t.maxYArr}}},{key:"setXRange",value:function(){var t=this.w.globals,e=this.w.config,i="numeric"===e.xaxis.type||"datetime"===e.xaxis.type||"category"===e.xaxis.type&&!t.noLabelsProvided||t.noLabelsProvided||t.isXNumeric;if(t.isXNumeric&&function(){for(var e=0;e<t.series.length;e++)if(t.labels[e])for(var i=0;i<t.labels[e].length;i++)null!==t.labels[e][i]&&f.isNumber(t.labels[e][i])&&(t.maxX=Math.max(t.maxX,t.labels[e][i]),t.initialMaxX=Math.max(t.maxX,t.labels[e][i]),t.minX=Math.min(t.minX,t.labels[e][i]),t.initialMinX=Math.min(t.minX,t.labels[e][i]))}(),t.noLabelsProvided&&0===e.xaxis.categories.length&&(t.maxX=t.labels[t.labels.length-1],t.initialMaxX=t.labels[t.labels.length-1],t.minX=1,t.initialMinX=1),t.isXNumeric||t.noLabelsProvided||t.dataFormatXNumeric){var n;if(void 0===e.xaxis.tickAmount?(n=Math.round(t.svgWidth/150),"numeric"===e.xaxis.type&&t.dataPoints<30&&(n=t.dataPoints-1),n>t.dataPoints&&0!==t.dataPoints&&(n=t.dataPoints-1)):"dataPoints"===e.xaxis.tickAmount?(t.series.length>1&&(n=t.series[t.maxValsInArrayIndex].length-1),t.isXNumeric&&(n=t.maxX-t.minX-1)):n=e.xaxis.tickAmount,t.xTickAmount=n,void 0!==e.xaxis.max&&"number"==typeof e.xaxis.max&&(t.maxX=e.xaxis.max),void 0!==e.xaxis.min&&"number"==typeof e.xaxis.min&&(t.minX=e.xaxis.min),void 0!==e.xaxis.range&&(t.minX=t.maxX-e.xaxis.range),t.minX!==Number.MAX_VALUE&&t.maxX!==-Number.MAX_VALUE)if(e.xaxis.convertedCatToNumeric&&!t.dataFormatXNumeric){for(var r=[],o=t.minX-1;o<t.maxX;o++)r.push(o+1);t.xAxisScale={result:r,niceMin:r[0],niceMax:r[r.length-1]}}else t.xAxisScale=this.scales.setXScale(t.minX,t.maxX);else t.xAxisScale=this.scales.linearScale(1,n,n),t.noLabelsProvided&&t.labels.length>0&&(t.xAxisScale=this.scales.linearScale(1,t.labels.length,n-1),t.seriesX=t.labels.slice());i&&(t.labels=t.xAxisScale.result.slice())}return t.isBarHorizontal&&t.labels.length&&(t.xTickAmount=t.labels.length),this._handleSingleDataPoint(),this._getMinXDiff(),{minX:t.minX,maxX:t.maxX}}},{key:"setZRange",value:function(){var t=this.w.globals;if(t.isDataXYZ)for(var e=0;e<t.series.length;e++)if(void 0!==t.seriesZ[e])for(var i=0;i<t.seriesZ[e].length;i++)null!==t.seriesZ[e][i]&&f.isNumber(t.seriesZ[e][i])&&(t.maxZ=Math.max(t.maxZ,t.seriesZ[e][i]),t.minZ=Math.min(t.minZ,t.seriesZ[e][i]))}},{key:"_handleSingleDataPoint",value:function(){var t=this.w.globals,e=this.w.config;if(t.minX===t.maxX){var i=new E(this.ctx);if("datetime"===e.xaxis.type){var n=i.getDate(t.minX);n.setUTCDate(n.getDate()-2),t.minX=new Date(n).getTime();var r=i.getDate(t.maxX);r.setUTCDate(r.getDate()+2),t.maxX=new Date(r).getTime()}else("numeric"===e.xaxis.type||"category"===e.xaxis.type&&!t.noLabelsProvided)&&(t.minX=t.minX-2,t.initialMinX=t.minX,t.maxX=t.maxX+2,t.initialMaxX=t.maxX)}}},{key:"_getMinXDiff",value:function(){var t=this.w.globals;t.isXNumeric&&t.seriesX.forEach(function(e,i){1===e.length&&e.push(t.seriesX[t.maxValsInArrayIndex][t.seriesX[t.maxValsInArrayIndex].length-1]);var n=e.slice();n.sort(function(t,e){return t-e}),n.forEach(function(e,n){if(n>0){var r=e-t.seriesX[i][n-1];r>0&&(t.minXDiff=Math.min(r,t.minXDiff))}}),1===t.dataPoints&&t.minXDiff===Number.MAX_VALUE&&(t.minXDiff=.5)})}},{key:"_setStackedMinMax",value:function(){var t=this.w.globals,e=[],i=[];if(t.series.length)for(var n=0;n<t.series[t.maxValsInArrayIndex].length;n++)for(var r=0,o=0,a=0;a<t.series.length;a++)null!==t.series[a][n]&&f.isNumber(t.series[a][n])&&(t.series[a][n]>0?r=r+parseFloat(t.series[a][n])+1e-4:o+=parseFloat(t.series[a][n])),a===t.series.length-1&&(e.push(r),i.push(o));for(var s=0;s<e.length;s++)t.maxY=Math.max(t.maxY,e[s]),t.minY=Math.min(t.minY,i[s])}}]),t}(),W=function(){function t(i){e(this,t),this.ctx=i,this.w=i.w;var n=this.w;this.xaxisFontSize=n.config.xaxis.labels.style.fontSize,this.axisFontFamily=n.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=n.config.xaxis.labels.style.colors,this.isCategoryBarHorizontal="bar"===n.config.chart.type&&n.config.plotOptions.bar.horizontal,this.xAxisoffX=0,"bottom"===n.config.xaxis.position&&(this.xAxisoffX=n.globals.gridHeight),this.drawnLabels=[],this.axesUtils=new j(i)}return n(t,[{key:"drawYaxis",value:function(t){var e=this.w,i=new y(this.ctx),n=e.config.yaxis[t].labels.style,r=n.fontSize,o=n.fontFamily,a=n.fontWeight,s=i.group({class:"apexcharts-yaxis",rel:t,transform:"translate("+e.globals.translateYAxisX[t]+", 0)"});if(this.axesUtils.isYAxisHidden(t))return s;var l=i.group({class:"apexcharts-yaxis-texts-g"});s.add(l);var h=e.globals.yAxisScale[t].result.length-1,u=e.globals.gridHeight/h,c=e.globals.translateY,p=e.globals.yLabelFormatters[t],d=e.globals.yAxisScale[t].result.slice();d=this.axesUtils.checkForReversedLabels(t,d);var f="";if(e.config.yaxis[t].labels.show)for(var g=function(s){var g=d[s];g=p(g,s);var v=e.config.yaxis[t].labels.padding;e.config.yaxis[t].opposite&&0!==e.config.yaxis.length&&(v*=-1);var y=i.drawText({x:v,y:c+h/10+e.config.yaxis[t].labels.offsetY+1,text:g,textAnchor:e.config.yaxis[t].opposite?"start":"end",fontSize:r,fontFamily:o,fontWeight:a,foreColor:Array.isArray(n.colors)?n.colors[s]:n.colors,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+n.cssClass});if(s===h&&(f=y),l.add(y),0!==e.config.yaxis[t].labels.rotate){var m=i.rotateAroundCenter(f.node),_=i.rotateAroundCenter(y.node);y.node.setAttribute("transform","rotate(".concat(e.config.yaxis[t].labels.rotate," ").concat(m.x," ").concat(_.y,")"))}c+=u},v=h;v>=0;v--)g(v);if(void 0!==e.config.yaxis[t].title.text){var m=i.group({class:"apexcharts-yaxis-title"}),_=0;e.config.yaxis[t].opposite&&(_=e.globals.translateYAxisX[t]);var x=i.drawText({x:_,y:e.globals.gridHeight/2+e.globals.translateY+e.config.yaxis[t].title.offsetY,text:e.config.yaxis[t].title.text,textAnchor:"end",foreColor:e.config.yaxis[t].title.style.color,fontSize:e.config.yaxis[t].title.style.fontSize,fontWeight:e.config.yaxis[t].title.style.fontWeight,fontFamily:e.config.yaxis[t].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+e.config.yaxis[t].title.style.cssClass});m.add(x),s.add(m)}var b=e.config.yaxis[t].axisBorder,w=31+b.offsetX;if(e.config.yaxis[t].opposite&&(w=-31-b.offsetX),b.show){var S=i.drawLine(w,e.globals.translateY+b.offsetY-2,w,e.globals.gridHeight+e.globals.translateY+b.offsetY+2,b.color,0,b.width);s.add(S)}return e.config.yaxis[t].axisTicks.show&&this.axesUtils.drawYAxisTicks(w,h,b,e.config.yaxis[t].axisTicks,t,u,s),s}},{key:"drawYaxisInversed",value:function(t){var e=this.w,i=new y(this.ctx),n=i.group({class:"apexcharts-xaxis apexcharts-yaxis-inversed"}),r=i.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(e.globals.translateXAxisX,", ").concat(e.globals.translateXAxisY,")")});n.add(r);var o=e.globals.yAxisScale[t].result.length-1,a=e.globals.gridWidth/o+.1,s=a+e.config.xaxis.labels.offsetX,l=e.globals.xLabelFormatter,h=e.globals.yAxisScale[t].result.slice(),u=e.globals.timescaleLabels;u.length>0&&(this.xaxisLabels=u.slice(),o=(h=u.slice()).length),h=this.axesUtils.checkForReversedLabels(t,h);var c=u.length;if(e.config.xaxis.labels.show)for(var p=c?0:o;c?p<c:p>=0;c?p++:p--){var d=h[p];d=l(d,p);var f=e.globals.gridWidth+e.globals.padHorizontal-(s-a+e.config.xaxis.labels.offsetX);if(u.length){var g=this.axesUtils.getLabel(h,u,f,p,this.drawnLabels,this.xaxisFontSize);f=g.x,d=g.text,this.drawnLabels.push(g.text),0===p&&e.globals.skipFirstTimelinelabel&&(d=""),p===h.length-1&&e.globals.skipLastTimelinelabel&&(d="")}var v=i.drawText({x:f,y:this.xAxisoffX+e.config.xaxis.labels.offsetY+30-("top"===e.config.xaxis.position?e.globals.xAxisHeight+e.config.xaxis.axisTicks.height-2:0),text:d,textAnchor:"middle",foreColor:Array.isArray(this.xaxisForeColors)?this.xaxisForeColors[t]:this.xaxisForeColors,fontSize:this.xaxisFontSize,fontFamily:this.xaxisFontFamily,fontWeight:e.config.xaxis.labels.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-xaxis-label "+e.config.xaxis.labels.style.cssClass});r.add(v),v.tspan(d);var m=document.createElementNS(e.globals.SVGNS,"title");m.textContent=d,v.node.appendChild(m),s+=a}return this.inversedYAxisTitleText(n),this.inversedYAxisBorder(n),n}},{key:"inversedYAxisBorder",value:function(t){var e=this.w,i=new y(this.ctx),n=e.config.xaxis.axisBorder;if(n.show){var r=0;"bar"===e.config.chart.type&&e.globals.isXNumeric&&(r-=15);var o=i.drawLine(e.globals.padHorizontal+r+n.offsetX,this.xAxisoffX,e.globals.gridWidth,this.xAxisoffX,n.color,0,n.height);t.add(o)}}},{key:"inversedYAxisTitleText",value:function(t){var e=this.w,i=new y(this.ctx);if(void 0!==e.config.xaxis.title.text){var n=i.group({class:"apexcharts-xaxis-title apexcharts-yaxis-title-inversed"}),r=i.drawText({x:e.globals.gridWidth/2+e.config.xaxis.title.offsetX,y:this.xAxisoffX+parseFloat(this.xaxisFontSize)+parseFloat(e.config.xaxis.title.style.fontSize)+e.config.xaxis.title.offsetY+20,text:e.config.xaxis.title.text,textAnchor:"middle",fontSize:e.config.xaxis.title.style.fontSize,fontFamily:e.config.xaxis.title.style.fontFamily,fontWeight:e.config.xaxis.title.style.fontWeight,cssClass:"apexcharts-xaxis-title-text "+e.config.xaxis.title.style.cssClass});n.add(r),t.add(n)}}},{key:"yAxisTitleRotate",value:function(t,e){var i=this.w,n=new y(this.ctx),r={width:0,height:0},o={width:0,height:0},a=i.globals.dom.baseEl.querySelector(" .apexcharts-yaxis[rel='".concat(t,"'] .apexcharts-yaxis-texts-g"));null!==a&&(r=a.getBoundingClientRect());var s=i.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(t,"'] .apexcharts-yaxis-title text"));if(null!==s&&(o=s.getBoundingClientRect()),null!==s){var l=this.xPaddingForYAxisTitle(t,r,o,e);s.setAttribute("x",l.xPos-(e?10:0))}if(null!==s){var h=n.rotateAroundCenter(s);s.setAttribute("transform","rotate(".concat(e?"":"-").concat(i.config.yaxis[t].title.rotate," ").concat(h.x," ").concat(h.y,")"))}}},{key:"xPaddingForYAxisTitle",value:function(t,e,i,n){var r=this.w,o=0,a=0,s=10;return void 0===r.config.yaxis[t].title.text||t<0?{xPos:a,padd:0}:(n?(a=e.width+r.config.yaxis[t].title.offsetX+i.width/2+s/2,0===(o+=1)&&(a-=s/2)):(a=-1*e.width+r.config.yaxis[t].title.offsetX+s/2+i.width/2,r.globals.isBarHorizontal&&(s=25,a=-1*e.width-r.config.yaxis[t].title.offsetX-s)),{xPos:a,padd:s})}},{key:"setYAxisXPosition",value:function(t,e){var i=this.w,n=0,r=0,o=18,a=1;i.config.yaxis.length>1&&(this.multipleYs=!0),i.config.yaxis.map(function(s,l){var h=i.globals.ignoreYAxisIndexes.indexOf(l)>-1||!s.show||s.floating||0===t[l].width,u=t[l].width+e[l].width;s.opposite?i.globals.isBarHorizontal?(r=i.globals.gridWidth+i.globals.translateX-1,i.globals.translateYAxisX[l]=r-s.labels.offsetX):(r=i.globals.gridWidth+i.globals.translateX+a,h||(a=a+u+20),i.globals.translateYAxisX[l]=r-s.labels.offsetX+20):(n=i.globals.translateX-o,h||(o=o+u+20),i.globals.translateYAxisX[l]=n+s.labels.offsetX)})}},{key:"setYAxisTextAlignments",value:function(){var t=this.w,e=t.globals.dom.baseEl.getElementsByClassName("apexcharts-yaxis");(e=f.listToArray(e)).forEach(function(e,i){var n=t.config.yaxis[i];if(void 0!==n.labels.align){var r=t.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(i,"'] .apexcharts-yaxis-texts-g")),o=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(i,"'] .apexcharts-yaxis-label"));o=f.listToArray(o);var a=r.getBoundingClientRect();"left"===n.labels.align?(o.forEach(function(t,e){t.setAttribute("text-anchor","start")}),n.opposite||r.setAttribute("transform","translate(-".concat(a.width,", 0)"))):"center"===n.labels.align?(o.forEach(function(t,e){t.setAttribute("text-anchor","middle")}),r.setAttribute("transform","translate(".concat(a.width/2*(n.opposite?1:-1),", 0)"))):"right"===n.labels.align&&(o.forEach(function(t,e){t.setAttribute("text-anchor","end")}),n.opposite&&r.setAttribute("transform","translate(".concat(a.width,", 0)")))}})}}]),t}(),U=function(){function t(i){e(this,t),this.ctx=i,this.w=i.w,this.documentEvent=f.bind(this.documentEvent,this)}return n(t,[{key:"addEventListener",value:function(t,e){var i=this.w;i.globals.events.hasOwnProperty(t)?i.globals.events[t].push(e):i.globals.events[t]=[e]}},{key:"removeEventListener",value:function(t,e){var i=this.w;if(i.globals.events.hasOwnProperty(t)){var n=i.globals.events[t].indexOf(e);-1!==n&&i.globals.events[t].splice(n,1)}}},{key:"fireEvent",value:function(t,e){var i=this.w;if(i.globals.events.hasOwnProperty(t)){e&&e.length||(e=[]);for(var n=i.globals.events[t],r=n.length,o=0;o<r;o++)n[o].apply(null,e)}}},{key:"setupEventHandlers",value:function(){var t=this,e=this.w,i=this.ctx,n=e.globals.dom.baseEl.querySelector(e.globals.chartClass);this.ctx.eventList.forEach(function(t){n.addEventListener(t,function(t){var n=Object.assign({},e,{seriesIndex:e.globals.capturedSeriesIndex,dataPointIndex:e.globals.capturedDataPointIndex});"mousemove"===t.type||"touchmove"===t.type?"function"==typeof e.config.chart.events.mouseMove&&e.config.chart.events.mouseMove(t,i,n):("mouseup"===t.type&&1===t.which||"touchend"===t.type)&&("function"==typeof e.config.chart.events.click&&e.config.chart.events.click(t,i,n),i.ctx.events.fireEvent("click",[t,i,n]))},{capture:!1,passive:!0})}),this.ctx.eventList.forEach(function(e){document.addEventListener(e,t.documentEvent)}),this.ctx.core.setupBrushHandler()}},{key:"documentEvent",value:function(t){var e=this.w,i=t.target.className;if("click"===t.type){var n=e.globals.dom.baseEl.querySelector(".apexcharts-menu");n&&n.classList.contains("apexcharts-menu-open")&&"apexcharts-menu-icon"!==i&&n.classList.remove("apexcharts-menu-open")}if("mousedown"===t.type){var r=e.globals.dom.Paper.select(".apexcharts-resizable-element").members;Array.prototype.forEach.call(r,function(e){t.target.classList.contains("apexcharts-resizable-element")||t.target.classList.contains("svg_select_points")||e.selectize(!1)})}e.globals.clientX="touchmove"===t.type?t.touches[0].clientX:t.clientX,e.globals.clientY="touchmove"===t.type?t.touches[0].clientY:t.clientY}}]),t}(),V=function(){function t(i){e(this,t),this.ctx=i,this.w=i.w}return n(t,[{key:"setCurrentLocaleValues",value:function(t){var e=this.w.config.chart.locales;window.Apex.chart&&window.Apex.chart.locales&&window.Apex.chart.locales.length>0&&(e=this.w.config.chart.locales.concat(window.Apex.chart.locales));var i=e.filter(function(e){return e.name===t})[0];if(!i)throw new Error("Wrong locale name provided. Please make sure you set the correct locale name in options");var n=f.extend(w,i);this.w.globals.locale=n.options}}]),t}(),H=function(){function t(i){e(this,t),this.ctx=i,this.w=i.w}return n(t,[{key:"drawAxis",value:function(t,e){var i,n,r=this.w.globals,o=this.w.config,a=new z(this.ctx),s=new W(this.ctx);r.axisCharts&&"radar"!==t&&(r.isBarHorizontal?(n=s.drawYaxisInversed(0),i=a.drawXaxisInversed(0),r.dom.elGraphical.add(i),r.dom.elGraphical.add(n)):(i=a.drawXaxis(),r.dom.elGraphical.add(i),o.yaxis.map(function(t,e){-1===r.ignoreYAxisIndexes.indexOf(e)&&(n=s.drawYaxis(e),r.dom.Paper.add(n))}))),o.yaxis.map(function(t,e){-1===r.ignoreYAxisIndexes.indexOf(e)&&s.yAxisTitleRotate(e,t.opposite)})}}]),t}(),q=function(){function t(i){e(this,t),this.ctx=i,this.w=i.w}return n(t,[{key:"drawXCrosshairs",value:function(){var t=this.w,e=new y(this.ctx),i=new g(this.ctx),n=t.config.xaxis.crosshairs.fill.gradient,r=t.config.xaxis.crosshairs.dropShadow,o=r.enabled,a=r.left,s=r.top,l=r.blur,h=r.color,u=r.opacity,c=t.config.xaxis.crosshairs.fill.color;if(t.config.xaxis.crosshairs.show){"gradient"===t.config.xaxis.crosshairs.fill.type&&(c=e.drawGradient("vertical",n.colorFrom,n.colorTo,n.opacityFrom,n.opacityTo,null,n.stops,null));var p=e.drawRect();1===t.config.xaxis.crosshairs.width&&(p=e.drawLine()),p.attr({class:"apexcharts-xcrosshairs",x:0,y:0,y2:t.globals.gridHeight,width:f.isNumber(t.config.xaxis.crosshairs.width)?t.config.xaxis.crosshairs.width:0,height:t.globals.gridHeight,fill:c,filter:"none","fill-opacity":t.config.xaxis.crosshairs.opacity,stroke:t.config.xaxis.crosshairs.stroke.color,"stroke-width":t.config.xaxis.crosshairs.stroke.width,"stroke-dasharray":t.config.xaxis.crosshairs.stroke.dashArray}),o&&(p=i.dropShadow(p,{left:a,top:s,blur:l,color:h,opacity:u})),t.globals.dom.elGraphical.add(p)}}},{key:"drawYCrosshairs",value:function(){var t=this.w,e=new y(this.ctx),i=t.config.yaxis[0].crosshairs;if(t.config.yaxis[0].crosshairs.show){var n=e.drawLine(0,0,t.globals.gridWidth,0,i.stroke.color,i.stroke.dashArray,i.stroke.width);n.attr({class:"apexcharts-ycrosshairs"}),t.globals.dom.elGraphical.add(n)}var r=e.drawLine(0,0,t.globals.gridWidth,0,i.stroke.color,0,0);r.attr({class:"apexcharts-ycrosshairs-hidden"}),t.globals.dom.elGraphical.add(r)}}]),t}(),Z=function(){function t(i){e(this,t),this.ctx=i,this.w=i.w}return n(t,[{key:"checkResponsiveConfig",value:function(t){var e=this,i=this.w,n=i.config;if(0!==n.responsive.length){var r=n.responsive.slice();r.sort(function(t,e){return t.breakpoint>e.breakpoint?1:e.breakpoint>t.breakpoint?-1:0}).reverse();var o=new P({}),a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r[0].breakpoint,a=window.innerWidth>0?window.innerWidth:screen.width;if(a>n){var s=O.extendArrayProps(o,i.globals.initialConfig);t=f.extend(s,t),t=f.extend(i.config,t),e.overrideResponsiveOptions(t)}else for(var l=0;l<r.length;l++)a<r[l].breakpoint&&(t=O.extendArrayProps(o,r[l].options),t=f.extend(i.config,t),e.overrideResponsiveOptions(t))};if(t){var s=O.extendArrayProps(o,t);s=f.extend(i.config,s),a(s=f.extend(s,t))}else a({})}}},{key:"overrideResponsiveOptions",value:function(t){var e=new P(t).init({responsiveOverride:!0});this.w.config=e}}]),t}(),K=function(){function t(i){e(this,t),this.ctx=i,this.colors=[],this.w=i.w;var n=this.w;this.isColorFn=!1,this.isBarDistributed=n.config.plotOptions.bar.distributed&&("bar"===n.config.chart.type||"rangeBar"===n.config.chart.type)}return n(t,[{key:"init",value:function(){this.setDefaultColors()}},{key:"setDefaultColors",value:function(){var t=this,e=this.w,i=new f;if(e.globals.dom.elWrap.classList.add("apexcharts-theme-".concat(e.config.theme.mode)),void 0===e.config.colors?e.globals.colors=this.predefined():(e.globals.colors=e.config.colors,e.globals.axisCharts&&"bar"!==e.config.chart.type&&Array.isArray(e.config.colors)&&e.config.colors.length>0&&e.config.colors.length===e.config.series.length&&(e.globals.colors=e.config.colors.map(function(i,n){return"function"==typeof i?(t.isColorFn=!0,i({value:e.globals.axisCharts?e.globals.series[n][0]?e.globals.series[n][0]:0:e.globals.series[n],seriesIndex:n,dataPointIndex:n,w:e})):i}))),e.config.theme.monochrome.enabled){var n=[],r=e.globals.series.length;this.isBarDistributed&&(r=e.globals.series[0].length*e.globals.series.length);for(var o=e.config.theme.monochrome.color,a=1/(r/e.config.theme.monochrome.shadeIntensity),s=e.config.theme.monochrome.shadeTo,l=0,h=0;h<r;h++){var u=void 0;"dark"===s?(u=i.shadeColor(-1*l,o),l+=a):(u=i.shadeColor(l,o),l+=a),n.push(u)}e.globals.colors=n.slice()}var c=e.globals.colors.slice();this.pushExtraColors(e.globals.colors),["fill","stroke"].forEach(function(i){e.globals[i].colors=void 0===e.config[i].colors?t.isColorFn?e.config.colors:c:e.config[i].colors.slice(),t.pushExtraColors(e.globals[i].colors)}),e.globals.dataLabels.style.colors=void 0===e.config.dataLabels.style.colors?c:e.config.dataLabels.style.colors.slice(),this.pushExtraColors(e.globals.dataLabels.style.colors,50),e.globals.radarPolygons.fill.colors=void 0===e.config.plotOptions.radar.polygons.fill.colors?["dark"===e.config.theme.mode?"#202D48":"#fff"]:e.config.plotOptions.radar.polygons.fill.colors.slice(),this.pushExtraColors(e.globals.radarPolygons.fill.colors,20),e.globals.markers.colors=void 0===e.config.markers.colors?c:e.config.markers.colors.slice(),this.pushExtraColors(e.globals.markers.colors)}},{key:"pushExtraColors",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=this.w,r=e||n.globals.series.length;if(null===i&&(i=this.isBarDistributed||"heatmap"===n.config.chart.type&&n.config.plotOptions.heatmap.colorScale.inverse),i&&(r=n.globals.series[0].length*n.globals.series.length),t.length<r)for(var o=r-t.length,a=0;a<o;a++)t.push(t[a])}},{key:"updateThemeOptions",value:function(t){t.chart=t.chart||{},t.tooltip=t.tooltip||{};var e=t.theme.mode||"light",i=t.theme.palette?t.theme.palette:"dark"===e?"palette4":"palette1",n=t.chart.foreColor?t.chart.foreColor:"dark"===e?"#f6f7f8":"#373d3f";return t.tooltip.theme=e,t.chart.foreColor=n,t.theme.palette=i,t}},{key:"predefined",value:function(){switch(this.w.config.theme.palette){case"palette1":this.colors=["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"];break;case"palette2":this.colors=["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#FF9800"];break;case"palette3":this.colors=["#33b2df","#546E7A","#d4526e","#13d8aa","#A5978B"];break;case"palette4":this.colors=["#4ecdc4","#c7f464","#81D4FA","#fd6a6a","#546E7A"];break;case"palette5":this.colors=["#2b908f","#f9a3a4","#90ee7e","#fa4443","#69d2e7"];break;case"palette6":this.colors=["#449DD1","#F86624","#EA3546","#662E9B","#C5D86D"];break;case"palette7":this.colors=["#D7263D","#1B998B","#2E294E","#F46036","#E2C044"];break;case"palette8":this.colors=["#662E9B","#F86624","#F9C80E","#EA3546","#43BCCD"];break;case"palette9":this.colors=["#5C4742","#A5978B","#8D5B4C","#5A2A27","#C4BBAF"];break;case"palette10":this.colors=["#A300D6","#7D02EB","#5653FE","#2983FF","#00B1F2"];break;default:this.colors=["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"]}return this.colors}}]),t}(),J=function(){function t(i){e(this,t),this.ctx=i,this.w=i.w}return n(t,[{key:"draw",value:function(){this.drawTitleSubtitle("title"),this.drawTitleSubtitle("subtitle")}},{key:"drawTitleSubtitle",value:function(t){var e=this.w,i="title"===t?e.config.title:e.config.subtitle,n=e.globals.svgWidth/2,r=i.offsetY,o="middle";if("left"===i.align?(n=10,o="start"):"right"===i.align&&(n=e.globals.svgWidth-10,o="end"),n+=i.offsetX,r=r+parseInt(i.style.fontSize,10)+i.margin/2,void 0!==i.text){var a=new y(this.ctx).drawText({x:n,y:r,text:i.text,textAnchor:o,fontSize:i.style.fontSize,fontFamily:i.style.fontFamily,fontWeight:i.style.fontWeight,foreColor:i.style.color,opacity:1});a.node.setAttribute("class","apexcharts-".concat(t,"-text")),e.globals.dom.Paper.add(a)}}}]),t}(),$=function(){function t(i){e(this,t),this.w=i.w,this.dCtx=i}return n(t,[{key:"getTitleSubtitleCoords",value:function(t){var e=this.w,i=0,n=0,r="title"===t?e.config.title.floating:e.config.subtitle.floating,o=e.globals.dom.baseEl.querySelector(".apexcharts-".concat(t,"-text"));if(null!==o&&!r){var a=o.getBoundingClientRect();i=a.width,n=e.globals.axisCharts?a.height+5:a.height}return{width:i,height:n}}},{key:"getLegendsRect",value:function(){var t=this.w,e=t.globals.dom.baseEl.querySelector(".apexcharts-legend"),i=Object.assign({},f.getBoundingClientRect(e));return this.dCtx.lgRect=null!==e&&!t.config.legend.floating&&t.config.legend.show?{x:i.x,y:i.y,height:i.height,width:0===i.height?0:i.width}:{x:0,y:0,height:0,width:0},"left"!==t.config.legend.position&&"right"!==t.config.legend.position||1.5*this.dCtx.lgRect.width>t.globals.svgWidth&&(this.dCtx.lgRect.width=t.globals.svgWidth/1.5),this.dCtx.lgRect}},{key:"getLargestStringFromMultiArr",value:function(t,e){var i=t;if(this.w.globals.isMultiLineX){var n=e.map(function(t,e){return Array.isArray(t)?t.length:1}),r=Math.max.apply(Math,c(n));i=e[n.indexOf(r)]}return i}}]),t}(),Q=function(){function t(i){e(this,t),this.w=i.w,this.dCtx=i}return n(t,[{key:"getxAxisLabelsCoords",value:function(){var t,e=this.w,i=e.globals.labels.slice();if(e.config.xaxis.convertedCatToNumeric&&0===i.length&&(i=e.globals.categoryLabels),e.globals.timescaleLabels.length>0){var n=this.getxAxisTimeScaleLabelsCoords();t={width:n.width,height:n.height},e.globals.rotateXLabels=!1}else{this.dCtx.lgWidthForSideLegends="left"!==e.config.legend.position&&"right"!==e.config.legend.position||e.config.legend.floating?0:this.dCtx.lgRect.width;var r=e.globals.xLabelFormatter,o=f.getLargestStringFromArr(i),a=this.dCtx.dimHelpers.getLargestStringFromMultiArr(o,i);e.globals.isBarHorizontal&&(a=o=e.globals.yAxisScale[0].result.reduce(function(t,e){return t.length>e.length?t:e},0));var s=new D(this.dCtx.ctx),l=o;o=s.xLabelFormat(r,o,l),a=s.xLabelFormat(r,a,l),(e.config.xaxis.convertedCatToNumeric&&void 0===o||""===String(o).trim())&&(a=o="1");var h=new y(this.dCtx.ctx),u=h.getTextRects(o,e.config.xaxis.labels.style.fontSize),c=u;if(o!==a&&(c=h.getTextRects(a,e.config.xaxis.labels.style.fontSize)),(t={width:u.width>=c.width?u.width:c.width,height:u.height>=c.height?u.height:c.height}).width*i.length>e.globals.svgWidth-this.dCtx.lgWidthForSideLegends-this.dCtx.yAxisWidth-this.dCtx.gridPad.left-this.dCtx.gridPad.right&&0!==e.config.xaxis.labels.rotate||e.config.xaxis.labels.rotateAlways){if(!e.globals.isBarHorizontal){e.globals.rotateXLabels=!0;var p=function(t){return h.getTextRects(t,e.config.xaxis.labels.style.fontSize,e.config.xaxis.labels.style.fontFamily,"rotate(".concat(e.config.xaxis.labels.rotate," 0 0)"),!1)};u=p(o),o!==a&&(c=p(a)),t.height=(u.height>c.height?u.height:c.height)/1.5,t.width=u.width>c.width?u.width:c.width}}else e.globals.rotateXLabels=!1}return e.config.xaxis.labels.show||(t={width:0,height:0}),{width:t.width,height:t.height}}},{key:"getxAxisTitleCoords",value:function(){var t=this.w,e=0,i=0;if(void 0!==t.config.xaxis.title.text){var n=new y(this.dCtx.ctx).getTextRects(t.config.xaxis.title.text,t.config.xaxis.title.style.fontSize);e=n.width,i=n.height}return{width:e,height:i}}},{key:"getxAxisTimeScaleLabelsCoords",value:function(){var t,e=this.w;this.dCtx.timescaleLabels=e.globals.timescaleLabels.slice();var i=this.dCtx.timescaleLabels.map(function(t){return t.value}),n=i.reduce(function(t,e){return void 0===t?(console.error("You have possibly supplied invalid Date format. Please supply a valid JavaScript Date"),0):t.length>e.length?t:e},0);return 1.05*(t=new y(this.dCtx.ctx).getTextRects(n,e.config.xaxis.labels.style.fontSize)).width*i.length>e.globals.gridWidth&&0!==e.config.xaxis.labels.rotate&&(e.globals.overlappingXLabels=!0),t}},{key:"additionalPaddingXLabels",value:function(t){var e=this,i=this.w,n=i.globals,r=i.config,o=r.xaxis.type,a=t.width;n.skipLastTimelinelabel=!1,n.skipFirstTimelinelabel=!1;var s=i.config.yaxis[0].opposite&&i.globals.isBarHorizontal;r.yaxis.forEach(function(t,l){s?(e.dCtx.gridPad.left<a&&(e.dCtx.xPadLeft=a/2+1),e.dCtx.xPadRight=a/2+1):-1!==n.collapsedSeriesIndices.indexOf(l)||("datetime"!==o&&e.dCtx.gridPad.left<a/2-e.dCtx.yAxisWidthLeft&&!n.rotateXLabels&&!r.xaxis.labels.trim&&(e.dCtx.xPadLeft=a/2+1),function(t){if(e.dCtx.timescaleLabels&&e.dCtx.timescaleLabels.length){var r=e.dCtx.timescaleLabels[0].position-a/1.75+e.dCtx.yAxisWidthLeft;e.dCtx.timescaleLabels[e.dCtx.timescaleLabels.length-1].position+a/1.75-e.dCtx.yAxisWidthRight>n.gridWidth&&(n.skipLastTimelinelabel=!0),r<0&&(n.skipFirstTimelinelabel=!0)}else"datetime"===o?e.dCtx.gridPad.right<a&&!n.rotateXLabels&&(n.skipLastTimelinelabel=!0):"datetime"!==o&&e.dCtx.gridPad.right<a/2-e.dCtx.yAxisWidthRight&&!n.rotateXLabels&&("between"!==i.config.xaxis.tickPlacement||i.globals.isBarHorizontal)&&(e.dCtx.xPadRight=a/2+1)}())})}}]),t}(),tt=function(){function t(i){e(this,t),this.w=i.w,this.dCtx=i}return n(t,[{key:"getyAxisLabelsCoords",value:function(){var t=this,e=this.w,i=[],n=10,r=new j(this.dCtx.ctx);return e.config.yaxis.map(function(o,a){if(!r.isYAxisHidden(a)&&o.labels.show&&e.globals.yAxisScale[a].result.length){var s=e.globals.yLabelFormatters[a],l=s(e.globals.yAxisScale[a].niceMax,{seriesIndex:a,dataPointIndex:-1,w:e}),h=l;if(void 0!==l&&0!==l.length||(l=e.globals.yAxisScale[a].niceMax),e.globals.isBarHorizontal){n=0;var u=e.globals.labels.slice();l=s(l=f.getLargestStringFromArr(u),{seriesIndex:a,dataPointIndex:-1,w:e}),h=t.dCtx.dimHelpers.getLargestStringFromMultiArr(l,u)}var c=new y(t.dCtx.ctx),p=c.getTextRects(l,o.labels.style.fontSize),d=p;l!==h&&(d=c.getTextRects(h,o.labels.style.fontSize)),i.push({width:(d.width>p.width?d.width:p.width)+n,height:d.height>p.height?d.height:p.height})}else i.push({width:0,height:0})}),i}},{key:"getyAxisTitleCoords",value:function(){var t=this,e=[];return this.w.config.yaxis.map(function(i,n){if(i.show&&void 0!==i.title.text){var r=new y(t.dCtx.ctx).getTextRects(i.title.text,i.title.style.fontSize,i.title.style.fontFamily,"rotate(-90 0 0)",!1);e.push({width:r.width,height:r.height})}else e.push({width:0,height:0})}),e}},{key:"getTotalYAxisWidth",value:function(){var t=this.w,e=0,i=0,n=0,r=t.globals.yAxisScale.length>1?10:0,o=new j(this.dCtx.ctx),a=function(a,s){var l=t.config.yaxis[s].floating,h=0;a.width>0&&!l?(h=a.width+r,t.globals.ignoreYAxisIndexes.indexOf(s)>-1&&(h=h-a.width-r)):h=l||o.isYAxisHidden(s)?0:5,t.config.yaxis[s].opposite?n+=h:i+=h,e+=h};return t.globals.yLabelsCoords.map(function(t,e){a(t,e)}),t.globals.yTitleCoords.map(function(t,e){a(t,e)}),t.globals.isBarHorizontal&&(e=t.globals.yLabelsCoords[0].width+t.globals.yTitleCoords[0].width+15),this.dCtx.yAxisWidthLeft=i,this.dCtx.yAxisWidthRight=n,e}}]),t}(),et=function(){function t(i){e(this,t),this.w=i.w,this.dCtx=i}return n(t,[{key:"gridPadForColumnsInNumericAxis",value:function(t){var e=this.w;if(e.globals.noData||e.globals.allSeriesCollapsed)return 0;var i=e.config.chart.type,n=0,r="bar"===i||"rangeBar"===i?e.config.series.length:1;if(e.globals.comboBarCount>0&&(r=e.globals.comboBarCount),e.globals.collapsedSeries.forEach(function(t){"bar"!==t.type&&"rangeBar"!==t.type||(r-=1)}),e.config.chart.stacked&&(r=1),("bar"===i||"rangeBar"===i||e.globals.comboBarCount>0)&&e.globals.isXNumeric&&!e.globals.isBarHorizontal&&r>0){var o,a,s=Math.abs(e.globals.initialMaxX-e.globals.initialMinX);s<=3&&(s=e.globals.dataPoints),o=s/t,e.globals.minXDiff&&e.globals.minXDiff/o>0&&(a=e.globals.minXDiff/o),(n=a/r*parseInt(e.config.plotOptions.bar.columnWidth,10)/100)<1&&(n=1),e.globals.barPadForNumericAxis=n=n/(r>1?1:1.5)+5}return n}},{key:"gridPadFortitleSubtitle",value:function(){var t=this,e=this.w,i=e.globals,n=this.dCtx.isSparkline||!e.globals.axisCharts?0:10;["title","subtitle"].forEach(function(i){n+=void 0!==e.config[i].text?e.config[i].margin:t.dCtx.isSparkline||!e.globals.axisCharts?0:5}),e.config.legend.show&&"bottom"===e.config.legend.position&&!e.config.legend.floating&&(e.config.series.length>1||!e.globals.axisCharts||e.config.legend.showForSingleSeries)&&(n+=10);var r=this.dCtx.dimHelpers.getTitleSubtitleCoords("title"),o=this.dCtx.dimHelpers.getTitleSubtitleCoords("subtitle");i.gridHeight=i.gridHeight-r.height-o.height-n,i.translateY=i.translateY+r.height+o.height+n}},{key:"setGridXPosForDualYAxis",value:function(t,e){var i=this.w,n=new j(this.dCtx.ctx);i.config.yaxis.map(function(r,o){-1!==i.globals.ignoreYAxisIndexes.indexOf(o)||r.floating||n.isYAxisHidden(o)||r.opposite&&(i.globals.translateX=i.globals.translateX-(e[o].width+t[o].width)-parseInt(i.config.yaxis[o].labels.style.fontSize,10)/1.2-12)})}}]),t}(),it=function(){function t(i){e(this,t),this.ctx=i,this.w=i.w,this.lgRect={},this.yAxisWidth=0,this.yAxisWidthLeft=0,this.yAxisWidthRight=0,this.xAxisHeight=0,this.isSparkline=this.w.config.chart.sparkline.enabled,this.dimHelpers=new $(this),this.dimYAxis=new tt(this),this.dimXAxis=new Q(this),this.dimGrid=new et(this),this.lgWidthForSideLegends=0,this.gridPad=this.w.config.grid.padding,this.xPadRight=0,this.xPadLeft=0}return n(t,[{key:"plotCoords",value:function(){var t=this.w.globals;this.lgRect=this.dimHelpers.getLegendsRect(),t.axisCharts?this.setDimensionsForAxisCharts():this.setDimensionsForNonAxisCharts(),this.dimGrid.gridPadFortitleSubtitle(),t.gridHeight=t.gridHeight-this.gridPad.top-this.gridPad.bottom,t.gridWidth=t.gridWidth-this.gridPad.left-this.gridPad.right-this.xPadRight-this.xPadLeft;var e=this.dimGrid.gridPadForColumnsInNumericAxis(t.gridWidth);t.gridWidth=t.gridWidth-2*e,t.translateX=t.translateX+this.gridPad.left+this.xPadLeft+(e>0?e+4:0),t.translateY=t.translateY+this.gridPad.top}},{key:"setDimensionsForAxisCharts",value:function(){var t=this,e=this.w,i=e.globals,n=this.dimYAxis.getyAxisLabelsCoords(),r=this.dimYAxis.getyAxisTitleCoords();e.globals.yLabelsCoords=[],e.globals.yTitleCoords=[],e.config.yaxis.map(function(t,i){e.globals.yLabelsCoords.push({width:n[i].width,index:i}),e.globals.yTitleCoords.push({width:r[i].width,index:i})}),this.yAxisWidth=this.dimYAxis.getTotalYAxisWidth();var o=this.dimXAxis.getxAxisLabelsCoords(),a=this.dimXAxis.getxAxisTitleCoords();this.conditionalChecksForAxisCoords(o,a),i.translateXAxisY=e.globals.rotateXLabels?this.xAxisHeight/8:-4,i.translateXAxisX=e.globals.rotateXLabels&&e.globals.isXNumeric&&e.config.xaxis.labels.rotate<=-45?-this.xAxisWidth/4:0,e.globals.isBarHorizontal&&(i.rotateXLabels=!1,i.translateXAxisY=parseInt(e.config.xaxis.labels.style.fontSize,10)/1.5*-1),i.translateXAxisY=i.translateXAxisY+e.config.xaxis.labels.offsetY,i.translateXAxisX=i.translateXAxisX+e.config.xaxis.labels.offsetX;var s=this.yAxisWidth,l=this.xAxisHeight;i.xAxisLabelsHeight=this.xAxisHeight,i.xAxisHeight=this.xAxisHeight;var h=10;("radar"===e.config.chart.type||this.isSparkline)&&(s=0,l=i.goldenPadding),this.isSparkline&&(this.lgRect={height:0,width:0},l=0,s=0,h=0),this.dimXAxis.additionalPaddingXLabels(o);var u=function(){i.translateX=s,i.gridHeight=i.svgHeight-t.lgRect.height-l-(t.isSparkline?0:e.globals.rotateXLabels?10:15),i.gridWidth=i.svgWidth-s};switch("top"===e.config.xaxis.position&&(h=i.xAxisHeight-e.config.xaxis.axisTicks.height-5),e.config.legend.position){case"bottom":i.translateY=h,u();break;case"top":i.translateY=this.lgRect.height+h,u();break;case"left":i.translateY=h,i.translateX=this.lgRect.width+s,i.gridHeight=i.svgHeight-l-12,i.gridWidth=i.svgWidth-this.lgRect.width-s;break;case"right":i.translateY=h,i.translateX=s,i.gridHeight=i.svgHeight-l-12,i.gridWidth=i.svgWidth-this.lgRect.width-s-5;break;default:throw new Error("Legend position not supported")}this.dimGrid.setGridXPosForDualYAxis(r,n),new W(this.ctx).setYAxisXPosition(n,r)}},{key:"setDimensionsForNonAxisCharts",value:function(){var t=this.w,e=t.globals,i=t.config,n=0;t.config.legend.show&&!t.config.legend.floating&&(n=20);var r="pie"===i.chart.type||"donut"===i.chart.type?"pie":"radialBar",o=i.plotOptions[r].offsetY,a=i.plotOptions[r].offsetX;if(!i.legend.show||i.legend.floating)return e.gridHeight=e.svgHeight-i.grid.padding.left+i.grid.padding.right,e.gridWidth=e.gridHeight,e.translateY=o,void(e.translateX=a+(e.svgWidth-e.gridWidth)/2);switch(i.legend.position){case"bottom":e.gridHeight=e.svgHeight-this.lgRect.height-e.goldenPadding,e.gridWidth=e.gridHeight,e.translateY=o-10,e.translateX=a+(e.svgWidth-e.gridWidth)/2;break;case"top":e.gridHeight=e.svgHeight-this.lgRect.height-e.goldenPadding,e.gridWidth=e.gridHeight,e.translateY=this.lgRect.height+o+10,e.translateX=a+(e.svgWidth-e.gridWidth)/2;break;case"left":e.gridWidth=e.svgWidth-this.lgRect.width-n,e.gridHeight="auto"!==i.chart.height?e.svgHeight:e.gridWidth,e.translateY=o,e.translateX=a+this.lgRect.width+n;break;case"right":e.gridWidth=e.svgWidth-this.lgRect.width-n-5,e.gridHeight="auto"!==i.chart.height?e.svgHeight:e.gridWidth,e.translateY=o,e.translateX=a+10;break;default:throw new Error("Legend position not supported")}}},{key:"conditionalChecksForAxisCoords",value:function(t,e){var i=this.w;this.xAxisHeight=(t.height+e.height)*(i.globals.isMultiLineX?1.2:i.globals.LINE_HEIGHT_RATIO)+(i.globals.rotateXLabels?22:10),this.xAxisWidth=t.width,this.xAxisHeight-e.height>i.config.xaxis.labels.maxHeight&&(this.xAxisHeight=i.config.xaxis.labels.maxHeight),i.config.xaxis.labels.minHeight&&this.xAxisHeight<i.config.xaxis.labels.minHeight&&(this.xAxisHeight=i.config.xaxis.labels.minHeight),i.config.xaxis.floating&&(this.xAxisHeight=0);var n=0,r=0;i.config.yaxis.forEach(function(t){n+=t.labels.minWidth,r+=t.labels.maxWidth}),this.yAxisWidth<n&&(this.yAxisWidth=n),this.yAxisWidth>r&&(this.yAxisWidth=r)}}]),t}(),nt=function(){function t(i){e(this,t),this.ctx=i,this.w=i.w,this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animBeginArr=[0],this.animDur=0,this.donutDataLabels=this.w.config.plotOptions.pie.donut.labels;var n=this.w;this.lineColorArr=void 0!==n.globals.stroke.colors?n.globals.stroke.colors:n.globals.colors,this.defaultSize=n.globals.svgHeight<n.globals.svgWidth?n.globals.gridHeight:n.globals.gridWidth,this.centerY=this.defaultSize/2,this.centerX=n.globals.gridWidth/2,this.fullAngle=360,n.globals.radialSize=this.defaultSize/2.05-n.config.stroke.width-(n.config.chart.sparkline.enabled?0:n.config.chart.dropShadow.blur),this.donutSize=n.globals.radialSize*parseInt(n.config.plotOptions.pie.donut.size,10)/100,this.sliceLabels=[],this.prevSectorAngleArr=[]}return n(t,[{key:"draw",value:function(t){var e=this.w,i=new y(this.ctx),n=i.group({class:"apexcharts-pie"});if(e.globals.noData)return n;for(var r=0,o=0;o<t.length;o++)r+=f.negToZero(t[o]);var a=[],s=i.group();0===r&&(r=1e-5);for(var l=0;l<t.length;l++){var h=this.fullAngle*f.negToZero(t[l])/r;a.push(h)}if(e.globals.dataChanged){for(var u,c=0,p=0;p<e.globals.previousPaths.length;p++)c+=f.negToZero(e.globals.previousPaths[p]);for(var d=0;d<e.globals.previousPaths.length;d++)u=this.fullAngle*f.negToZero(e.globals.previousPaths[d])/c,this.prevSectorAngleArr.push(u)}this.donutSize<0&&(this.donutSize=0);var g=e.config.plotOptions.pie.customScale,v=e.globals.gridWidth/2-e.globals.gridWidth/2*g,m=e.globals.gridHeight/2-e.globals.gridHeight/2*g;if("donut"===e.config.chart.type){var _=i.drawCircle(this.donutSize);_.attr({cx:this.centerX,cy:this.centerY,fill:e.config.plotOptions.pie.donut.background?e.config.plotOptions.pie.donut.background:"transparent"}),s.add(_)}var x=this.drawArcs(a,t);if(this.sliceLabels.forEach(function(t){x.add(t)}),s.attr({transform:"translate(".concat(v,", ").concat(m,") scale(").concat(g,")")}),s.add(x),n.add(s),this.donutDataLabels.show){var b=this.renderInnerDataLabels(this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show,translateX:v,translateY:m});n.add(b)}return n}},{key:"drawArcs",value:function(t,e){var i=this.w,n=new g(this.ctx),r=new y(this.ctx),o=new A(this.ctx),a=r.group({class:"apexcharts-slices"}),s=0,l=0,h=0,u=0;this.strokeWidth=i.config.stroke.show?i.config.stroke.width:0;for(var c=0;c<t.length;c++){var p=r.group({class:"apexcharts-series apexcharts-pie-series",seriesName:f.escapeString(i.globals.seriesNames[c]),rel:c+1,"data:realIndex":c});a.add(p),h=(s=h)+t[c],u=(l=u)+this.prevSectorAngleArr[c];var d=h-s,v=o.fillPath({seriesNumber:c,size:i.globals.radialSize,value:e[c]}),m=this.getChangedPath(l,u),_=r.drawPath({d:m,stroke:this.lineColorArr instanceof Array?this.lineColorArr[c]:this.lineColorArr,strokeWidth:0,fill:v,fillOpacity:i.config.fill.opacity,classes:"apexcharts-pie-area apexcharts-".concat(i.config.chart.type,"-slice-").concat(c)});_.attr({index:0,j:c}),i.config.chart.dropShadow.enabled&&n.dropShadow(_,i.config.chart.dropShadow,c),this.addListeners(_,this.donutDataLabels),y.setAttrs(_.node,{"data:angle":d,"data:startAngle":s,"data:strokeWidth":this.strokeWidth,"data:value":e[c]});var x={x:0,y:0};"pie"===i.config.chart.type?x=f.polarToCartesian(this.centerX,this.centerY,i.globals.radialSize/1.25+i.config.plotOptions.pie.dataLabels.offset,s+(h-s)/2):"donut"===i.config.chart.type&&(x=f.polarToCartesian(this.centerX,this.centerY,(i.globals.radialSize+this.donutSize)/2+i.config.plotOptions.pie.dataLabels.offset,s+(h-s)/2)),p.add(_);var b=0;if(!this.initialAnim||i.globals.resized||i.globals.dataChanged?this.animBeginArr.push(0):(0==(b=(h-s)/this.fullAngle*i.config.chart.animations.speed)&&(b=1),this.animDur=b+this.animDur,this.animBeginArr.push(this.animDur)),this.animatePaths(_,this.dynamicAnim&&i.globals.dataChanged?{size:i.globals.radialSize,endAngle:h,startAngle:s,prevStartAngle:l,prevEndAngle:u,animateStartingPos:!0,i:c,animBeginArr:this.animBeginArr,shouldSetPrevPaths:!0,dur:i.config.chart.animations.dynamicAnimation.speed}:{size:i.globals.radialSize,endAngle:h,startAngle:s,i:c,totalItems:t.length-1,animBeginArr:this.animBeginArr,dur:b}),i.config.plotOptions.pie.expandOnClick&&_.click(this.pieClicked.bind(this,c)),i.config.dataLabels.enabled){var w=x.x,S=x.y,C=100*(h-s)/360+"%";if(0!==d&&i.config.plotOptions.pie.dataLabels.minAngleToShowLabel<t[c]){var E=i.config.dataLabels.formatter;void 0!==E&&(C=E(i.globals.seriesPercent[c][0],{seriesIndex:c,w:i}));var T=r.drawText({x:w,y:S,text:C,textAnchor:"middle",fontSize:i.config.dataLabels.style.fontSize,fontFamily:i.config.dataLabels.style.fontFamily,fontWeight:i.config.dataLabels.style.fontWeight,foreColor:i.globals.dataLabels.style.colors[c]});i.config.dataLabels.dropShadow.enabled&&n.dropShadow(T,i.config.dataLabels.dropShadow),T.node.classList.add("apexcharts-pie-label"),i.config.chart.animations.animate&&!1===i.globals.resized&&(T.node.classList.add("apexcharts-pie-label-delay"),T.node.style.animationDelay=i.config.chart.animations.speed/940+"s"),this.sliceLabels.push(T)}}}return a}},{key:"addListeners",value:function(t,e){var i=new y(this.ctx);t.node.addEventListener("mouseenter",i.pathMouseEnter.bind(this,t)),t.node.addEventListener("mouseleave",i.pathMouseLeave.bind(this,t)),t.node.addEventListener("mouseleave",this.revertDataLabelsInner.bind(this,t.node,e)),t.node.addEventListener("mousedown",i.pathMouseDown.bind(this,t)),this.donutDataLabels.total.showAlways||(t.node.addEventListener("mouseenter",this.printDataLabelsInner.bind(this,t.node,e)),t.node.addEventListener("mousedown",this.printDataLabelsInner.bind(this,t.node,e)))}},{key:"animatePaths",value:function(t,e){var i=e.endAngle-e.startAngle,n=i,r=e.startAngle,o=e.startAngle;void 0!==e.prevStartAngle&&void 0!==e.prevEndAngle&&(r=e.prevEndAngle,n=e.prevEndAngle-e.prevStartAngle),e.i===this.w.config.series.length-1&&(i+o>this.fullAngle?e.endAngle=e.endAngle-(i+o):i+o<this.fullAngle&&(e.endAngle=e.endAngle+(this.fullAngle-(i+o)))),i===this.fullAngle&&(i=this.fullAngle-.01),this.animateArc(t,r,o,i,n,e)}},{key:"animateArc",value:function(t,e,i,n,r,o){var a,s=this,l=this.w,h=new v(this.ctx),u=o.size;(isNaN(e)||isNaN(r))&&(e=i,r=n,o.dur=0);var c=n,p=i,d=e-i;l.globals.dataChanged&&o.shouldSetPrevPaths&&o.prevEndAngle&&(a=s.getPiePath({me:s,startAngle:o.prevStartAngle,angle:o.prevEndAngle-o.prevStartAngle,size:u}),t.attr({d:a})),0!==o.dur?t.animate(o.dur,l.globals.easing,o.animBeginArr[o.i]).afterAll(function(){"pie"!==l.config.chart.type&&"donut"!==l.config.chart.type||this.animate(l.config.chart.animations.dynamicAnimation.speed).attr({"stroke-width":s.strokeWidth}),o.i===l.config.series.length-1&&h.animationCompleted(t)}).during(function(l){c=d+(n-d)*l,o.animateStartingPos&&(c=r+(n-r)*l,p=e-r+(i-(e-r))*l),a=s.getPiePath({me:s,startAngle:p,angle:c,size:u}),t.node.setAttribute("data:pathOrig",a),t.attr({d:a})}):(a=s.getPiePath({me:s,startAngle:p,angle:n,size:u}),o.isTrack||(l.globals.animationEnded=!0),t.node.setAttribute("data:pathOrig",a),t.attr({d:a,"stroke-width":s.strokeWidth}))}},{key:"pieClicked",value:function(t){var e,i=this.w,n=this.w.globals.radialSize+(i.config.plotOptions.pie.expandOnClick?4:0),r=i.globals.dom.Paper.select(".apexcharts-".concat(i.config.chart.type.toLowerCase(),"-slice-").concat(t)).members[0];if("true"!==r.attr("data:pieClicked")){var o=i.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area");Array.prototype.forEach.call(o,function(t){t.setAttribute("data:pieClicked","false");var e=t.getAttribute("data:pathOrig");t.setAttribute("d",e)}),r.attr("data:pieClicked","true");var a=parseInt(r.attr("data:startAngle"),10),s=parseInt(r.attr("data:angle"),10);e=this.getPiePath({me:this,startAngle:a,angle:s,size:n}),360!==s&&r.plot(e)}else{r.attr({"data:pieClicked":"false"}),this.revertDataLabelsInner(r.node,this.donutDataLabels);var l=r.attr("data:pathOrig");r.attr({d:l})}}},{key:"getChangedPath",value:function(t,e){var i="";return this.dynamicAnim&&this.w.globals.dataChanged&&(i=this.getPiePath({me:this,startAngle:t,angle:e-t,size:this.size})),i}},{key:"getPiePath",value:function(t){var e=t.me,i=t.startAngle,n=t.angle,r=t.size,o=this.w,a=i,s=Math.PI*(a-90)/180,l=n+i;Math.ceil(l)>=360&&(l=359.99);var h=Math.PI*(l-90)/180,u=e.centerX+r*Math.cos(s),c=e.centerY+r*Math.sin(s),p=e.centerX+r*Math.cos(h),d=e.centerY+r*Math.sin(h),g=f.polarToCartesian(e.centerX,e.centerY,e.donutSize,l),v=f.polarToCartesian(e.centerX,e.centerY,e.donutSize,a),y=n>180?1:0,m=["M",u,c,"A",r,r,0,y,1,p,d];return"donut"===o.config.chart.type?[].concat(m,["L",g.x,g.y,"A",e.donutSize,e.donutSize,0,y,0,v.x,v.y,"L",u,c,"z"]).join(" "):"pie"===o.config.chart.type?[].concat(m,["L",e.centerX,e.centerY,"L",u,c]).join(" "):[].concat(m).join(" ")}},{key:"renderInnerDataLabels",value:function(t,e){var i=this.w,n=new y(this.ctx),r=n.group({class:"apexcharts-datalabels-group",transform:"translate(".concat(e.translateX?e.translateX:0,", ").concat(e.translateY?e.translateY:0,") scale(").concat(i.config.plotOptions.pie.customScale,")")}),o=t.total.show;r.node.style.opacity=e.opacity;var a,s,l=e.centerX,h=e.centerY;a=void 0===t.name.color?i.globals.colors[0]:t.name.color;var u=t.name.fontSize,c=t.name.fontFamily,p=t.value.fontWeight;s=void 0===t.value.color?i.config.chart.foreColor:t.value.color;var d=t.value.formatter,f="",g="";if(o?(a=t.total.color,u=t.total.fontSize,c=t.total.fontFamily,p=t.total.fontWeight,g=t.total.label,f=t.total.formatter(i)):1===i.globals.series.length&&(f=d(i.globals.series[0],i),g=i.globals.seriesNames[0]),g&&(g=t.name.formatter(g,t.total.show,i)),t.name.show){var v=n.drawText({x:l,y:h+parseFloat(t.name.offsetY),text:g,textAnchor:"middle",foreColor:a,fontSize:u,fontWeight:p,fontFamily:c});v.node.classList.add("apexcharts-datalabel-label"),r.add(v)}if(t.value.show){var m=t.name.show?parseFloat(t.value.offsetY)+16:t.value.offsetY,_=n.drawText({x:l,y:h+m,text:f,textAnchor:"middle",foreColor:s,fontWeight:t.value.fontWeight,fontSize:t.value.fontSize,fontFamily:t.value.fontFamily});_.node.classList.add("apexcharts-datalabel-value"),r.add(_)}return r}},{key:"printInnerLabels",value:function(t,e,i,n){var r,o=this.w;n?r=void 0===t.name.color?o.globals.colors[parseInt(n.parentNode.getAttribute("rel"),10)-1]:t.name.color:o.globals.series.length>1&&t.total.show&&(r=t.total.color);var a=o.globals.dom.baseEl.querySelector(".apexcharts-datalabel-label"),s=o.globals.dom.baseEl.querySelector(".apexcharts-datalabel-value");i=(0,t.value.formatter)(i,o),n||"function"!=typeof t.total.formatter||(i=t.total.formatter(o)),e=t.name.formatter(e,e===t.total.label,o),null!==a&&(a.textContent=e),null!==s&&(s.textContent=i),null!==a&&(a.style.fill=r)}},{key:"printDataLabelsInner",value:function(t,e){var i=this.w,n=t.getAttribute("data:value"),r=i.globals.seriesNames[parseInt(t.parentNode.getAttribute("rel"),10)-1];i.globals.series.length>1&&this.printInnerLabels(e,r,n,t);var o=i.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group");null!==o&&(o.style.opacity=1)}},{key:"revertDataLabelsInner",value:function(t,e,i){var n=this,r=this.w,o=r.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group"),a=!1,s=r.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area"),l=function(t){var i=t.makeSliceOut,r=t.printLabel;Array.prototype.forEach.call(s,function(t){"true"===t.getAttribute("data:pieClicked")&&(i&&(a=!0),r&&n.printDataLabelsInner(t,e))})};if(l({makeSliceOut:!0,printLabel:!1}),e.total.show&&r.globals.series.length>1)a&&!e.total.showAlways?l({makeSliceOut:!1,printLabel:!0}):this.printInnerLabels(e,e.total.label,e.total.formatter(r));else if(l({makeSliceOut:!1,printLabel:!0}),!a)if(r.globals.selectedDataPoints.length&&r.globals.series.length>1)if(r.globals.selectedDataPoints[0].length>0){var h=r.globals.selectedDataPoints[0],u=r.globals.dom.baseEl.querySelector(".apexcharts-".concat(r.config.chart.type.toLowerCase(),"-slice-").concat(h));this.printDataLabelsInner(u,e)}else o&&r.globals.selectedDataPoints.length&&0===r.globals.selectedDataPoints[0].length&&(o.style.opacity=0);else o&&r.globals.series.length>1&&(o.style.opacity=0)}}]),t}(),rt=function(){function t(i){e(this,t),this.w=i.w,this.lgCtx=i}return n(t,[{key:"getLegendStyles",value:function(){var t=document.createElement("style");t.setAttribute("type","text/css");var e=document.createTextNode("\t\n    \t\n      .apexcharts-legend {\t\n        display: flex;\t\n        overflow: auto;\t\n        padding: 0 10px;\t\n      }\t\n      .apexcharts-legend.position-bottom, .apexcharts-legend.position-top {\t\n        flex-wrap: wrap\t\n      }\t\n      .apexcharts-legend.position-right, .apexcharts-legend.position-left {\t\n        flex-direction: column;\t\n        bottom: 0;\t\n      }\t\n      .apexcharts-legend.position-bottom.apexcharts-align-left, .apexcharts-legend.position-top.apexcharts-align-left, .apexcharts-legend.position-right, .apexcharts-legend.position-left {\t\n        justify-content: flex-start;\t\n      }\t\n      .apexcharts-legend.position-bottom.apexcharts-align-center, .apexcharts-legend.position-top.apexcharts-align-center {\t\n        justify-content: center;  \t\n      }\t\n      .apexcharts-legend.position-bottom.apexcharts-align-right, .apexcharts-legend.position-top.apexcharts-align-right {\t\n        justify-content: flex-end;\t\n      }\t\n      .apexcharts-legend-series {\t\n        cursor: pointer;\t\n        line-height: normal;\t\n      }\t\n      .apexcharts-legend.position-bottom .apexcharts-legend-series, .apexcharts-legend.position-top .apexcharts-legend-series{\t\n        display: flex;\t\n        align-items: center;\t\n      }\t\n      .apexcharts-legend-text {\t\n        position: relative;\t\n        font-size: 14px;\t\n      }\t\n      .apexcharts-legend-text *, .apexcharts-legend-marker * {\t\n        pointer-events: none;\t\n      }\t\n      .apexcharts-legend-marker {\t\n        position: relative;\t\n        display: inline-block;\t\n        cursor: pointer;\t\n        margin-right: 3px;\t\n        border-style: solid;\n      }\t\n      \t\n      .apexcharts-legend.apexcharts-align-right .apexcharts-legend-series, .apexcharts-legend.apexcharts-align-left .apexcharts-legend-series{\t\n        display: inline-block;\t\n      }\t\n      .apexcharts-legend-series.apexcharts-no-click {\t\n        cursor: auto;\t\n      }\t\n      .apexcharts-legend .apexcharts-hidden-zero-series, .apexcharts-legend .apexcharts-hidden-null-series {\t\n        display: none !important;\t\n      }\t\n      .apexcharts-inactive-legend {\t\n        opacity: 0.45;\t\n      }");return t.appendChild(e),t}},{key:"getLegendBBox",value:function(){var t=this.w.globals.dom.baseEl.querySelector(".apexcharts-legend").getBoundingClientRect();return{clwh:t.height,clww:t.width}}},{key:"appendToForeignObject",value:function(){var t=this.w.globals;t.dom.elLegendForeign=document.createElementNS(t.SVGNS,"foreignObject");var e=t.dom.elLegendForeign;e.setAttribute("x",0),e.setAttribute("y",0),e.setAttribute("width",t.svgWidth),e.setAttribute("height",t.svgHeight),t.dom.elLegendWrap.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),e.appendChild(t.dom.elLegendWrap),e.appendChild(this.getLegendStyles()),t.dom.Paper.node.insertBefore(e,t.dom.elGraphical.node)}},{key:"toggleDataSeries",value:function(t,e){var i=this,n=this.w;if(n.globals.axisCharts||"radialBar"===n.config.chart.type){n.globals.resized=!0;var r=null,o=null;n.globals.risingSeries=[],n.globals.axisCharts?(r=n.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(t,"']")),o=parseInt(r.getAttribute("data:realIndex"),10)):(r=n.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(t+1,"']")),o=parseInt(r.getAttribute("rel"),10)-1),e?[{cs:n.globals.collapsedSeries,csi:n.globals.collapsedSeriesIndices},{cs:n.globals.ancillaryCollapsedSeries,csi:n.globals.ancillaryCollapsedSeriesIndices}].forEach(function(t){i.riseCollapsedSeries(t.cs,t.csi,o)}):this.hideSeries({seriesEl:r,realIndex:o})}else{var a=n.globals.dom.Paper.select(" .apexcharts-series[rel='".concat(t+1,"'] path")),s=n.config.chart.type;if("pie"===s||"donut"===s){var l=n.config.plotOptions.pie.donut.labels,h=new y(this.lgCtx.ctx),u=new nt(this.lgCtx.ctx);h.pathMouseDown(a.members[0],null),u.printDataLabelsInner(a.members[0].node,l)}a.fire("click")}}},{key:"hideSeries",value:function(t){var e=t.seriesEl,i=t.realIndex,n=this.w;if(n.globals.axisCharts){var r=!1;if(n.config.yaxis[i]&&n.config.yaxis[i].show&&n.config.yaxis[i].showAlways&&(r=!0,n.globals.ancillaryCollapsedSeriesIndices.indexOf(i)<0&&(n.globals.ancillaryCollapsedSeries.push({index:i,data:n.config.series[i].data.slice(),type:e.parentNode.className.baseVal.split("-")[1]}),n.globals.ancillaryCollapsedSeriesIndices.push(i))),!r){n.globals.collapsedSeries.push({index:i,data:n.config.series[i].data.slice(),type:e.parentNode.className.baseVal.split("-")[1]}),n.globals.collapsedSeriesIndices.push(i);var o=n.globals.risingSeries.indexOf(i);n.globals.risingSeries.splice(o,1)}n.config.series[i].data=[]}else n.globals.collapsedSeries.push({index:i,data:n.config.series[i]}),n.globals.collapsedSeriesIndices.push(i),n.config.series[i]=0;for(var a=e.childNodes,s=0;s<a.length;s++)a[s].classList.contains("apexcharts-series-markers-wrap")&&(a[s].classList.contains("apexcharts-hide")?a[s].classList.remove("apexcharts-hide"):a[s].classList.add("apexcharts-hide"));n.globals.allSeriesCollapsed=n.globals.collapsedSeries.length===n.config.series.length,this.lgCtx.ctx.updateHelpers._updateSeries(n.config.series,n.config.chart.animations.dynamicAnimation.enabled)}},{key:"riseCollapsedSeries",value:function(t,e,i){var n=this.w;if(t.length>0)for(var r=0;r<t.length;r++)t[r].index===i&&(n.globals.axisCharts?(n.config.series[i].data=t[r].data.slice(),t.splice(r,1),e.splice(r,1),n.globals.risingSeries.push(i)):(n.config.series[i]=t[r].data,t.splice(r,1),e.splice(r,1),n.globals.risingSeries.push(i)),this.lgCtx.ctx.updateHelpers._updateSeries(n.config.series,n.config.chart.animations.dynamicAnimation.enabled))}}]),t}(),ot=function(){function t(i,n){e(this,t),this.ctx=i,this.w=i.w,this.onLegendClick=this.onLegendClick.bind(this),this.onLegendHovered=this.onLegendHovered.bind(this),this.isBarsDistributed="bar"===this.w.config.chart.type&&this.w.config.plotOptions.bar.distributed&&1===this.w.config.series.length,this.legendHelpers=new rt(this)}return n(t,[{key:"init",value:function(){var t=this.w,e=t.globals,i=t.config;if((i.legend.showForSingleSeries&&1===e.series.length||this.isBarsDistributed||e.series.length>1||!e.axisCharts)&&i.legend.show){for(;e.dom.elLegendWrap.firstChild;)e.dom.elLegendWrap.removeChild(e.dom.elLegendWrap.firstChild);this.drawLegends(),f.isIE11()?document.getElementsByTagName("head")[0].appendChild(this.legendHelpers.getLegendStyles()):this.legendHelpers.appendToForeignObject(),"bottom"===i.legend.position||"top"===i.legend.position?this.legendAlignHorizontal():"right"!==i.legend.position&&"left"!==i.legend.position||this.legendAlignVertical()}}},{key:"drawLegends",value:function(){var t=this.w,e=t.config.legend.fontFamily,i=t.globals.seriesNames,n=t.globals.colors.slice();if("heatmap"===t.config.chart.type){var r=t.config.plotOptions.heatmap.colorScale.ranges;i=r.map(function(t){return t.name?t.name:t.from+" - "+t.to}),n=r.map(function(t){return t.color})}else this.isBarsDistributed&&(i=t.globals.labels.slice());for(var o=t.globals.legendFormatter,a=t.config.legend.inverseOrder,s=a?i.length-1:0;a?s>=0:s<=i.length-1;a?s--:s++){var l=o(i[s],{seriesIndex:s,w:t}),h=!1,u=!1;if(t.globals.collapsedSeries.length>0)for(var c=0;c<t.globals.collapsedSeries.length;c++)t.globals.collapsedSeries[c].index===s&&(h=!0);if(t.globals.ancillaryCollapsedSeriesIndices.length>0)for(var p=0;p<t.globals.ancillaryCollapsedSeriesIndices.length;p++)t.globals.ancillaryCollapsedSeriesIndices[p]===s&&(u=!0);var d=document.createElement("span");d.classList.add("apexcharts-legend-marker");var f=t.config.legend.markers.offsetX,g=t.config.legend.markers.offsetY,v=t.config.legend.markers.height,m=t.config.legend.markers.width,_=t.config.legend.markers.strokeWidth,x=t.config.legend.markers.strokeColor,b=t.config.legend.markers.radius,w=d.style;w.background=n[s],w.color=n[s],t.config.legend.markers.fillColors&&t.config.legend.markers.fillColors[s]&&(w.background=t.config.legend.markers.fillColors[s]),w.height=Array.isArray(v)?parseFloat(v[s])+"px":parseFloat(v)+"px",w.width=Array.isArray(m)?parseFloat(m[s])+"px":parseFloat(m)+"px",w.left=Array.isArray(f)?f[s]:f,w.top=Array.isArray(g)?g[s]:g,w.borderWidth=Array.isArray(_)?_[s]:_,w.borderColor=Array.isArray(x)?x[s]:x,w.borderRadius=Array.isArray(b)?parseFloat(b[s])+"px":parseFloat(b)+"px",t.config.legend.markers.customHTML&&(d.innerHTML=Array.isArray(t.config.legend.markers.customHTML)?t.config.legend.markers.customHTML[s]():t.config.legend.markers.customHTML()),y.setAttrs(d,{rel:s+1,"data:collapsed":h||u}),(h||u)&&d.classList.add("apexcharts-inactive-legend");var S=document.createElement("div"),C=document.createElement("span");C.classList.add("apexcharts-legend-text"),C.innerHTML=Array.isArray(l)?l.join(" "):l;var E=t.config.legend.labels.useSeriesColors?t.globals.colors[s]:t.config.legend.labels.colors;E||(E=t.config.chart.foreColor),C.style.color=E,C.style.fontSize=parseFloat(t.config.legend.fontSize)+"px",C.style.fontWeight=t.config.legend.fontWeight,C.style.fontFamily=e||t.config.chart.fontFamily,y.setAttrs(C,{rel:s+1,i:s,"data:default-text":encodeURIComponent(l),"data:collapsed":h||u}),S.appendChild(d),S.appendChild(C);var T=new O(this.ctx);t.config.legend.showForZeroSeries||0===T.getSeriesTotalByIndex(s)&&T.seriesHaveSameValues(s)&&!T.isSeriesNull(s)&&-1===t.globals.collapsedSeriesIndices.indexOf(s)&&-1===t.globals.ancillaryCollapsedSeriesIndices.indexOf(s)&&S.classList.add("apexcharts-hidden-zero-series"),t.config.legend.showForNullSeries||T.isSeriesNull(s)&&-1===t.globals.collapsedSeriesIndices.indexOf(s)&&-1===t.globals.ancillaryCollapsedSeriesIndices.indexOf(s)&&S.classList.add("apexcharts-hidden-null-series"),t.globals.dom.elLegendWrap.appendChild(S),t.globals.dom.elLegendWrap.classList.add("apexcharts-align-".concat(t.config.legend.horizontalAlign)),t.globals.dom.elLegendWrap.classList.add("position-"+t.config.legend.position),S.classList.add("apexcharts-legend-series"),S.style.margin="".concat(t.config.legend.itemMargin.vertical,"px ").concat(t.config.legend.itemMargin.horizontal,"px"),t.globals.dom.elLegendWrap.style.width=t.config.legend.width?t.config.legend.width+"px":"",t.globals.dom.elLegendWrap.style.height=t.config.legend.height?t.config.legend.height+"px":"",y.setAttrs(S,{rel:s+1,"data:collapsed":h||u}),(h||u)&&S.classList.add("apexcharts-inactive-legend"),t.config.legend.onItemClick.toggleDataSeries||S.classList.add("apexcharts-no-click")}"heatmap"!==t.config.chart.type&&!this.isBarsDistributed&&t.config.legend.onItemClick.toggleDataSeries&&t.globals.dom.elWrap.addEventListener("click",this.onLegendClick,!0),t.config.legend.onItemHover.highlightDataSeries&&(t.globals.dom.elWrap.addEventListener("mousemove",this.onLegendHovered,!0),t.globals.dom.elWrap.addEventListener("mouseout",this.onLegendHovered,!0))}},{key:"setLegendWrapXY",value:function(t,e){var i=this.w,n=i.globals.dom.baseEl.querySelector(".apexcharts-legend"),r=n.getBoundingClientRect(),o=0,a=0;if("bottom"===i.config.legend.position)a+=i.globals.svgHeight-r.height/2;else if("top"===i.config.legend.position){var s=new it(this.ctx),l=s.dimHelpers.getTitleSubtitleCoords("title").height,h=s.dimHelpers.getTitleSubtitleCoords("subtitle").height;a=a+(l>0?l-10:0)+(h>0?h-10:0)}n.style.position="absolute",a=a+e+i.config.legend.offsetY,n.style.left=(o=o+t+i.config.legend.offsetX)+"px",n.style.top=a+"px","bottom"===i.config.legend.position?(n.style.top="auto",n.style.bottom=5-i.config.legend.offsetY+"px"):"right"===i.config.legend.position&&(n.style.left="auto",n.style.right=25+i.config.legend.offsetX+"px"),["width","height"].forEach(function(t){n.style[t]&&(n.style[t]=parseInt(i.config.legend[t],10)+"px")})}},{key:"legendAlignHorizontal",value:function(){var t=this.w;t.globals.dom.baseEl.querySelector(".apexcharts-legend").style.right=0;var e=this.legendHelpers.getLegendBBox(),i=new it(this.ctx),n=i.dimHelpers.getTitleSubtitleCoords("title"),r=i.dimHelpers.getTitleSubtitleCoords("subtitle"),o=0;"bottom"===t.config.legend.position?o=-e.clwh/1.8:"top"===t.config.legend.position&&(o=n.height+r.height+t.config.title.margin+t.config.subtitle.margin-10),this.setLegendWrapXY(20,o)}},{key:"legendAlignVertical",value:function(){var t=this.w,e=this.legendHelpers.getLegendBBox(),i=0;"left"===t.config.legend.position&&(i=20),"right"===t.config.legend.position&&(i=t.globals.svgWidth-e.clww-10),this.setLegendWrapXY(i,20)}},{key:"onLegendHovered",value:function(t){var e=this.w,i=t.target.classList.contains("apexcharts-legend-text")||t.target.classList.contains("apexcharts-legend-marker");if("heatmap"===e.config.chart.type||this.isBarsDistributed){if(i){var n=parseInt(t.target.getAttribute("rel"),10)-1;this.ctx.events.fireEvent("legendHover",[this.ctx,n,this.w]),new k(this.ctx).highlightRangeInSeries(t,t.target)}}else!t.target.classList.contains("apexcharts-inactive-legend")&&i&&new k(this.ctx).toggleSeriesOnHover(t,t.target)}},{key:"onLegendClick",value:function(t){if(t.target.classList.contains("apexcharts-legend-text")||t.target.classList.contains("apexcharts-legend-marker")){var e=parseInt(t.target.getAttribute("rel"),10)-1,i="true"===t.target.getAttribute("data:collapsed"),n=this.w.config.chart.events.legendClick;"function"==typeof n&&n(this.ctx,e,this.w),this.ctx.events.fireEvent("legendClick",[this.ctx,e,this.w]);var r=this.w.config.legend.markers.onClick;"function"==typeof r&&t.target.classList.contains("apexcharts-legend-marker")&&(r(this.ctx,e,this.w),this.ctx.events.fireEvent("legendMarkerClick",[this.ctx,e,this.w])),this.legendHelpers.toggleDataSeries(e,i)}}}]),t}(),at=function(){function t(i){e(this,t),this.ctx=i,this.w=i.w,this.ev=this.w.config.chart.events,this.selectedClass="apexcharts-selected",this.localeValues=this.w.globals.locale.toolbar}return n(t,[{key:"createToolbar",value:function(){var t=this,e=this.w,i=function(){return document.createElement("div")},n=i();if(n.setAttribute("class","apexcharts-toolbar"),n.style.top=e.config.chart.toolbar.offsetY+"px",n.style.right=3-e.config.chart.toolbar.offsetX+"px",e.globals.dom.elWrap.appendChild(n),this.elZoom=i(),this.elZoomIn=i(),this.elZoomOut=i(),this.elPan=i(),this.elSelection=i(),this.elZoomReset=i(),this.elMenuIcon=i(),this.elMenu=i(),this.elCustomIcons=[],this.t=e.config.chart.toolbar.tools,Array.isArray(this.t.customIcons))for(var r=0;r<this.t.customIcons.length;r++)this.elCustomIcons.push(i());var o=[],a=function(i,n,r){var a=i.toLowerCase();t.t[a]&&e.config.chart.zoom.enabled&&o.push({el:n,icon:"string"==typeof t.t[a]?t.t[a]:r,title:t.localeValues[i],class:"apexcharts-".concat(a,"-icon")})};a("zoomIn",this.elZoomIn,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n'),a("zoomOut",this.elZoomOut,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n');var s=function(i){t.t[i]&&e.config.chart[i].enabled&&o.push({el:"zoom"===i?t.elZoom:t.elSelection,icon:"string"==typeof t.t[i]?t.t[i]:"zoom"===i?'<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>\n    <path d="M0 0h24v24H0V0z" fill="none"/>\n    <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>\n</svg>':'<svg fill="#6E8192" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2z"/>\n</svg>',title:t.localeValues["zoom"===i?"selectionZoom":"selection"],class:e.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-".concat(i,"-icon")})};s("zoom"),s("selection"),this.t.pan&&e.config.chart.zoom.enabled&&o.push({el:this.elPan,icon:"string"==typeof this.t.pan?this.t.pan:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <defs>\n        <path d="M0 0h24v24H0z" id="a"/>\n    </defs>\n    <clipPath id="b">\n        <use overflow="visible" xlink:href="#a"/>\n    </clipPath>\n    <path clip-path="url(#b)" d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z"/>\n</svg>',title:this.localeValues.pan,class:e.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-pan-icon"}),a("reset",this.elZoomReset,'<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>'),this.t.download&&o.push({el:this.elMenuIcon,icon:"string"==typeof this.t.download?this.t.download:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>',title:this.localeValues.menu,class:"apexcharts-menu-icon"});for(var l=0;l<this.elCustomIcons.length;l++)o.push({el:this.elCustomIcons[l],icon:this.t.customIcons[l].icon,title:this.t.customIcons[l].title,index:this.t.customIcons[l].index,class:"apexcharts-toolbar-custom-icon "+this.t.customIcons[l].class});o.forEach(function(t,e){t.index&&f.moveIndexInArray(o,e,t.index)});for(var h=0;h<o.length;h++)y.setAttrs(o[h].el,{class:o[h].class,title:o[h].title}),o[h].el.innerHTML=o[h].icon,n.appendChild(o[h].el);this._createHamburgerMenu(n),e.globals.zoomEnabled?this.elZoom.classList.add(this.selectedClass):e.globals.panEnabled?this.elPan.classList.add(this.selectedClass):e.globals.selectionEnabled&&this.elSelection.classList.add(this.selectedClass),this.addToolbarEventListeners()}},{key:"_createHamburgerMenu",value:function(t){this.elMenuItems=[],t.appendChild(this.elMenu),y.setAttrs(this.elMenu,{class:"apexcharts-menu"});var e=[{name:"exportSVG",title:this.localeValues.exportToSVG},{name:"exportPNG",title:this.localeValues.exportToPNG},{name:"exportCSV",title:this.localeValues.exportToCSV}];this.w.globals.allSeriesHasEqualX||e.splice(2,1);for(var i=0;i<e.length;i++)this.elMenuItems.push(document.createElement("div")),this.elMenuItems[i].innerHTML=e[i].title,y.setAttrs(this.elMenuItems[i],{class:"apexcharts-menu-item ".concat(e[i].name),title:e[i].title}),this.elMenu.appendChild(this.elMenuItems[i])}},{key:"addToolbarEventListeners",value:function(){var t=this;this.elZoomReset.addEventListener("click",this.handleZoomReset.bind(this)),this.elSelection.addEventListener("click",this.toggleZoomSelection.bind(this,"selection")),this.elZoom.addEventListener("click",this.toggleZoomSelection.bind(this,"zoom")),this.elZoomIn.addEventListener("click",this.handleZoomIn.bind(this)),this.elZoomOut.addEventListener("click",this.handleZoomOut.bind(this)),this.elPan.addEventListener("click",this.togglePanning.bind(this)),this.elMenuIcon.addEventListener("click",this.toggleMenu.bind(this)),this.elMenuItems.forEach(function(e){e.classList.contains("exportSVG")?e.addEventListener("click",t.handleDownload.bind(t,"svg")):e.classList.contains("exportPNG")?e.addEventListener("click",t.handleDownload.bind(t,"png")):e.classList.contains("exportCSV")&&e.addEventListener("click",t.handleDownload.bind(t,"csv"))});for(var e=0;e<this.t.customIcons.length;e++)this.elCustomIcons[e].addEventListener("click",this.t.customIcons[e].click.bind(this,this.ctx,this.ctx.w))}},{key:"toggleZoomSelection",value:function(t){this.toggleOtherControls();var e="selection"===t?this.elSelection:this.elZoom,i="selection"===t?"selectionEnabled":"zoomEnabled";this.w.globals[i]=!this.w.globals[i],e.classList.contains(this.selectedClass)?e.classList.remove(this.selectedClass):e.classList.add(this.selectedClass)}},{key:"getToolbarIconsReference",value:function(){var t=this.w;this.elZoom||(this.elZoom=t.globals.dom.baseEl.querySelector(".apexcharts-zoom-icon")),this.elPan||(this.elPan=t.globals.dom.baseEl.querySelector(".apexcharts-pan-icon")),this.elSelection||(this.elSelection=t.globals.dom.baseEl.querySelector(".apexcharts-selection-icon"))}},{key:"enableZoomPanFromToolbar",value:function(t){this.toggleOtherControls(),"pan"===t?this.w.globals.panEnabled=!0:this.w.globals.zoomEnabled=!0;var e="pan"===t?this.elPan:this.elZoom,i="pan"===t?this.elZoom:this.elPan;e&&e.classList.add(this.selectedClass),i&&i.classList.remove(this.selectedClass)}},{key:"togglePanning",value:function(){this.toggleOtherControls(),this.w.globals.panEnabled=!this.w.globals.panEnabled,this.elPan.classList.contains(this.selectedClass)?this.elPan.classList.remove(this.selectedClass):this.elPan.classList.add(this.selectedClass)}},{key:"toggleOtherControls",value:function(){var t=this,e=this.w;e.globals.panEnabled=!1,e.globals.zoomEnabled=!1,e.globals.selectionEnabled=!1,this.getToolbarIconsReference(),[this.elPan,this.elSelection,this.elZoom].forEach(function(e){e&&e.classList.remove(t.selectedClass)})}},{key:"handleZoomIn",value:function(){var t=this.w,e=(t.globals.minX+t.globals.maxX)/2,i=this._getNewMinXMaxX((t.globals.minX+e)/2,(t.globals.maxX+e)/2);t.globals.disableZoomIn||this.zoomUpdateOptions(i.minX,i.maxX)}},{key:"handleZoomOut",value:function(){var t=this.w;if(!("datetime"===t.config.xaxis.type&&new Date(t.globals.minX).getUTCFullYear()<1e3)){var e=(t.globals.minX+t.globals.maxX)/2,i=this._getNewMinXMaxX(t.globals.minX-(e-t.globals.minX),t.globals.maxX-(e-t.globals.maxX));t.globals.disableZoomOut||this.zoomUpdateOptions(i.minX,i.maxX)}}},{key:"_getNewMinXMaxX",value:function(t,e){var i=this.w.config.xaxis.convertedCatToNumeric;return{minX:i?Math.floor(t):t,maxX:i?Math.floor(e):e}}},{key:"zoomUpdateOptions",value:function(t,e){var i=this.w;if(!(i.config.xaxis.convertedCatToNumeric&&(t<1&&(t=1,e=i.globals.dataPoints),e-t<2))){var n={min:t,max:e},r=this.getBeforeZoomRange(n);r&&(n=r.xaxis);var o={xaxis:n},a=f.clone(i.globals.initialConfig.yaxis);i.config.chart.zoom.autoScaleYaxis&&(a=new Y(this.ctx).autoScaleY(this.ctx,a,{xaxis:n})),i.config.chart.group||(o.yaxis=a),this.w.globals.zoomed=!0,this.ctx.updateHelpers._updateOptions(o,!1,this.w.config.chart.animations.dynamicAnimation.enabled),this.zoomCallback(n,a)}}},{key:"zoomCallback",value:function(t,e){"function"==typeof this.ev.zoomed&&this.ev.zoomed(this.ctx,{xaxis:t,yaxis:e})}},{key:"getBeforeZoomRange",value:function(t,e){var i=null;return"function"==typeof this.ev.beforeZoom&&(i=this.ev.beforeZoom(this,{xaxis:t,yaxis:e})),i}},{key:"toggleMenu",value:function(){var t=this;window.setTimeout(function(){t.elMenu.classList.contains("apexcharts-menu-open")?t.elMenu.classList.remove("apexcharts-menu-open"):t.elMenu.classList.add("apexcharts-menu-open")},0)}},{key:"handleDownload",value:function(t){var e=this.w,i=new G(this.ctx);switch(t){case"svg":i.exportToSVG(this.ctx);break;case"png":i.exportToPng(this.ctx);break;case"csv":i.exportToCSV({series:e.config.series})}}},{key:"handleZoomReset",value:function(t){var e=this;this.ctx.getSyncedCharts().forEach(function(t){var i=t.w;i.globals.minX===i.globals.initialMinX&&i.globals.maxX===i.globals.initialMaxX||(t.updateHelpers.revertDefaultAxisMinMax(),"function"==typeof i.config.chart.events.zoomed&&e.zoomCallback({min:i.config.xaxis.min,max:i.config.xaxis.max}),i.globals.zoomed=!1,t.updateHelpers._updateSeries(i.globals.initialSeries,i.config.chart.animations.dynamicAnimation.enabled))})}},{key:"destroy",value:function(){this.elZoom=null,this.elZoomIn=null,this.elZoomOut=null,this.elPan=null,this.elSelection=null,this.elZoomReset=null,this.elMenuIcon=null}}]),t}(),st=function(t){function i(t){var n;return e(this,i),(n=u(this,l(i).call(this,t))).ctx=t,n.w=t.w,n.dragged=!1,n.graphics=new y(n.ctx),n.eventList=["mousedown","mouseleave","mousemove","touchstart","touchmove","mouseup","touchend"],n.clientX=0,n.clientY=0,n.startX=0,n.endX=0,n.dragX=0,n.startY=0,n.endY=0,n.dragY=0,n.moveDirection="none",n}return s(i,at),n(i,[{key:"init",value:function(t){var e=this,i=t.xyRatios,n=this.w,r=this;this.xyRatios=i,this.zoomRect=this.graphics.drawRect(0,0,0,0),this.selectionRect=this.graphics.drawRect(0,0,0,0),this.gridRect=n.globals.dom.baseEl.querySelector(".apexcharts-grid"),this.zoomRect.node.classList.add("apexcharts-zoom-rect"),this.selectionRect.node.classList.add("apexcharts-selection-rect"),n.globals.dom.elGraphical.add(this.zoomRect),n.globals.dom.elGraphical.add(this.selectionRect),this.slDraggableRect="x"===n.config.chart.selection.type?this.selectionRect.draggable({minX:0,minY:0,maxX:n.globals.gridWidth,maxY:n.globals.gridHeight}).on("dragmove",this.selectionDragging.bind(this,"dragging")):"y"===n.config.chart.selection.type?this.selectionRect.draggable({minX:0,maxX:n.globals.gridWidth}).on("dragmove",this.selectionDragging.bind(this,"dragging")):this.selectionRect.draggable().on("dragmove",this.selectionDragging.bind(this,"dragging")),this.preselectedSelection(),this.hoverArea=n.globals.dom.baseEl.querySelector(n.globals.chartClass),this.hoverArea.classList.add("apexcharts-zoomable"),this.eventList.forEach(function(t){e.hoverArea.addEventListener(t,r.svgMouseEvents.bind(r,i),{capture:!1,passive:!0})})}},{key:"destroy",value:function(){this.slDraggableRect&&(this.slDraggableRect.draggable(!1),this.slDraggableRect.off(),this.selectionRect.off()),this.selectionRect=null,this.zoomRect=null,this.gridRect=null}},{key:"svgMouseEvents",value:function(t,e){var i=this.w,n=this.ctx.toolbar,r=i.globals.zoomEnabled?i.config.chart.zoom.type:i.config.chart.selection.type;if(e.shiftKey?(this.shiftWasPressed=!0,n.enableZoomPanFromToolbar("pan")):this.shiftWasPressed&&(n.enableZoomPanFromToolbar("zoom"),this.shiftWasPressed=!1),!e.target.classList.contains("apexcharts-selection-rect")&&!e.target.parentNode.classList.contains("apexcharts-toolbar")){if(this.clientX="touchmove"===e.type||"touchstart"===e.type?e.touches[0].clientX:"touchend"===e.type?e.changedTouches[0].clientX:e.clientX,this.clientY="touchmove"===e.type||"touchstart"===e.type?e.touches[0].clientY:"touchend"===e.type?e.changedTouches[0].clientY:e.clientY,"mousedown"===e.type&&1===e.which){var o=this.gridRect.getBoundingClientRect();this.startX=this.clientX-o.left,this.startY=this.clientY-o.top,this.dragged=!1,this.w.globals.mousedown=!0}if(("mousemove"===e.type&&1===e.which||"touchmove"===e.type)&&(this.dragged=!0,i.globals.panEnabled?(i.globals.selection=null,this.w.globals.mousedown&&this.panDragging({context:this,zoomtype:r,xyRatios:t})):(this.w.globals.mousedown&&i.globals.zoomEnabled||this.w.globals.mousedown&&i.globals.selectionEnabled)&&(this.selection=this.selectionDrawing({context:this,zoomtype:r}))),"mouseup"===e.type||"touchend"===e.type||"mouseleave"===e.type){var a=this.gridRect.getBoundingClientRect();this.w.globals.mousedown&&(this.endX=this.clientX-a.left,this.endY=this.clientY-a.top,this.dragX=Math.abs(this.endX-this.startX),this.dragY=Math.abs(this.endY-this.startY),(i.globals.zoomEnabled||i.globals.selectionEnabled)&&this.selectionDrawn({context:this,zoomtype:r}),i.globals.panEnabled&&i.config.xaxis.convertedCatToNumeric&&this.delayedPanScrolled()),i.globals.zoomEnabled&&this.hideSelectionRect(this.selectionRect),this.dragged=!1,this.w.globals.mousedown=!1}this.makeSelectionRectDraggable()}}},{key:"makeSelectionRectDraggable",value:function(){var t=this.w;if(this.selectionRect){var e=this.selectionRect.node.getBoundingClientRect();e.width>0&&e.height>0&&this.slDraggableRect.selectize({points:"l, r",pointSize:8,pointType:"rect"}).resize({constraint:{minX:0,minY:0,maxX:t.globals.gridWidth,maxY:t.globals.gridHeight}}).on("resizing",this.selectionDragging.bind(this,"resizing"))}}},{key:"preselectedSelection",value:function(){var t=this.w,e=this.xyRatios;if(!t.globals.zoomEnabled)if(void 0!==t.globals.selection&&null!==t.globals.selection)this.drawSelectionRect(t.globals.selection);else if(void 0!==t.config.chart.selection.xaxis.min&&void 0!==t.config.chart.selection.xaxis.max){var i=(t.config.chart.selection.xaxis.min-t.globals.minX)/e.xRatio;this.drawSelectionRect({x:i,y:0,width:t.globals.gridWidth-(t.globals.maxX-t.config.chart.selection.xaxis.max)/e.xRatio-i,height:t.globals.gridHeight,translateX:0,translateY:0,selectionEnabled:!0}),this.makeSelectionRectDraggable(),"function"==typeof t.config.chart.events.selection&&t.config.chart.events.selection(this.ctx,{xaxis:{min:t.config.chart.selection.xaxis.min,max:t.config.chart.selection.xaxis.max},yaxis:{}})}}},{key:"drawSelectionRect",value:function(t){var e=t.x,i=t.y,n=t.width,r=t.height,o=this.w,a=this.zoomRect,s=this.selectionRect;if(this.dragged||null!==o.globals.selection){var l={transform:"translate("+t.translateX+", "+t.translateY+")"};o.globals.zoomEnabled&&this.dragged&&(n<0&&(n=1),a.attr({x:e,y:i,width:n,height:r,fill:o.config.chart.zoom.zoomedArea.fill.color,"fill-opacity":o.config.chart.zoom.zoomedArea.fill.opacity,stroke:o.config.chart.zoom.zoomedArea.stroke.color,"stroke-width":o.config.chart.zoom.zoomedArea.stroke.width,"stroke-opacity":o.config.chart.zoom.zoomedArea.stroke.opacity}),y.setAttrs(a.node,l)),o.globals.selectionEnabled&&(s.attr({x:e,y:i,width:n>0?n:0,height:r>0?r:0,fill:o.config.chart.selection.fill.color,"fill-opacity":o.config.chart.selection.fill.opacity,stroke:o.config.chart.selection.stroke.color,"stroke-width":o.config.chart.selection.stroke.width,"stroke-dasharray":o.config.chart.selection.stroke.dashArray,"stroke-opacity":o.config.chart.selection.stroke.opacity}),y.setAttrs(s.node,l))}}},{key:"hideSelectionRect",value:function(t){t&&t.attr({x:0,y:0,width:0,height:0})}},{key:"selectionDrawing",value:function(t){var e=t.zoomtype,i=this.w,n=t.context,r=this.gridRect.getBoundingClientRect(),o=n.startX-1,a=n.startY,s=n.clientX-r.left-o,l=n.clientY-r.top-a,h=0,u=0,c={};return Math.abs(s+o)>i.globals.gridWidth?s=i.globals.gridWidth-o:n.clientX-r.left<0&&(s=o),o>n.clientX-r.left&&(h=-(s=Math.abs(s))),a>n.clientY-r.top&&(u=-(l=Math.abs(l))),c="x"===e?{x:o,y:0,width:s,height:i.globals.gridHeight,translateX:h,translateY:0}:"y"===e?{x:0,y:a,width:i.globals.gridWidth,height:l,translateX:0,translateY:u}:{x:o,y:a,width:s,height:l,translateX:h,translateY:u},n.drawSelectionRect(c),n.selectionDragging("resizing"),c}},{key:"selectionDragging",value:function(t,e){var i=this,n=this.w,r=this.xyRatios,o=this.selectionRect,a=0;"resizing"===t&&(a=30),"function"==typeof n.config.chart.events.selection&&n.globals.selectionEnabled&&(clearTimeout(this.w.globals.selectionResizeTimer),this.w.globals.selectionResizeTimer=window.setTimeout(function(){var t=i.gridRect.getBoundingClientRect(),e=o.node.getBoundingClientRect();n.config.chart.events.selection(i.ctx,{xaxis:{min:n.globals.xAxisScale.niceMin+(e.left-t.left)*r.xRatio,max:n.globals.xAxisScale.niceMin+(e.right-t.left)*r.xRatio},yaxis:{min:n.globals.yAxisScale[0].niceMin+(t.bottom-e.bottom)*r.yRatio[0],max:n.globals.yAxisScale[0].niceMax-(e.top-t.top)*r.yRatio[0]}})},a))}},{key:"selectionDrawn",value:function(t){var e=t.zoomtype,i=this.w,n=t.context,r=this.xyRatios,o=this.ctx.toolbar;if(n.startX>n.endX){var a=n.startX;n.startX=n.endX,n.endX=a}if(n.startY>n.endY){var s=n.startY;n.startY=n.endY,n.endY=s}var l=i.globals.xAxisScale.niceMin+n.startX*r.xRatio,h=i.globals.xAxisScale.niceMin+n.endX*r.xRatio,u=[],c=[];if(i.config.yaxis.forEach(function(t,e){u.push(i.globals.yAxisScale[e].niceMax-r.yRatio[e]*n.startY),c.push(i.globals.yAxisScale[e].niceMax-r.yRatio[e]*n.endY)}),n.dragged&&(n.dragX>10||n.dragY>10)&&l!==h)if(i.globals.zoomEnabled){var p=f.clone(i.globals.initialConfig.yaxis);i.globals.zoomed=!0,i.globals.zoomed||(i.globals.lastXAxis=f.clone(i.config.xaxis),i.globals.lastYAxis=f.clone(i.config.yaxis)),i.config.xaxis.convertedCatToNumeric&&(l=Math.floor(l),h=Math.floor(h),l<1&&(l=1,h=i.globals.dataPoints),h-l<2&&(h=l+1));var d={min:l,max:h};if("xy"!==e&&"y"!==e||p.forEach(function(t,e){p[e].min=c[e],p[e].max=u[e]}),i.config.chart.zoom.autoScaleYaxis){var g=new Y(n.ctx);p=g.autoScaleY(n.ctx,p,{xaxis:d})}if(o){var v=o.getBeforeZoomRange(d,p);v&&(d=v.xaxis?v.xaxis:d,p=v.yaxis?v.yaxe:p)}var y={xaxis:d};i.config.chart.group||(y.yaxis=p),n.ctx.updateHelpers._updateOptions(y,!1,n.w.config.chart.animations.dynamicAnimation.enabled),"function"==typeof i.config.chart.events.zoomed&&o.zoomCallback(d,p)}else if(i.globals.selectionEnabled){var m,_=null;m={min:l,max:h},"xy"!==e&&"y"!==e||(_=f.clone(i.config.yaxis)).forEach(function(t,e){_[e].min=c[e],_[e].max=u[e]}),i.globals.selection=n.selection,"function"==typeof i.config.chart.events.selection&&i.config.chart.events.selection(n.ctx,{xaxis:m,yaxis:_})}}},{key:"panDragging",value:function(t){var e=this.w,i=t.context;if(void 0!==e.globals.lastClientPosition.x){var n=e.globals.lastClientPosition.x-i.clientX,r=e.globals.lastClientPosition.y-i.clientY;Math.abs(n)>Math.abs(r)&&n>0?this.moveDirection="left":Math.abs(n)>Math.abs(r)&&n<0?this.moveDirection="right":Math.abs(r)>Math.abs(n)&&r>0?this.moveDirection="up":Math.abs(r)>Math.abs(n)&&r<0&&(this.moveDirection="down")}e.globals.lastClientPosition={x:i.clientX,y:i.clientY},e.config.xaxis.convertedCatToNumeric||i.panScrolled(e.globals.minX,e.globals.maxX)}},{key:"delayedPanScrolled",value:function(){var t=this.w,e=t.globals.minX,i=t.globals.maxX,n=(t.globals.maxX-t.globals.minX)/2;"left"===this.moveDirection?(e=t.globals.minX+n,i=t.globals.maxX+n):"right"===this.moveDirection&&(e=t.globals.minX-n,i=t.globals.maxX-n),e=Math.floor(e),i=Math.floor(i),this.updateScrolledChart({xaxis:{min:e,max:i}},e,i)}},{key:"panScrolled",value:function(t,e){var i=this.w,n=this.xyRatios,r=f.clone(i.globals.initialConfig.yaxis);"left"===this.moveDirection?(t=i.globals.minX+i.globals.gridWidth/15*n.xRatio,e=i.globals.maxX+i.globals.gridWidth/15*n.xRatio):"right"===this.moveDirection&&(t=i.globals.minX-i.globals.gridWidth/15*n.xRatio,e=i.globals.maxX-i.globals.gridWidth/15*n.xRatio),(t<i.globals.initialMinX||e>i.globals.initialMaxX)&&(t=i.globals.minX,e=i.globals.maxX);var o={min:t,max:e};i.config.chart.zoom.autoScaleYaxis&&(r=new Y(this.ctx).autoScaleY(this.ctx,r,{xaxis:o}));var a={xaxis:{min:t,max:e}};i.config.chart.group||(a.yaxis=r),this.updateScrolledChart(a,t,e)}},{key:"updateScrolledChart",value:function(t,e,i){var n=this.w;this.ctx.updateHelpers._updateOptions(t,!1,!1),"function"==typeof n.config.chart.events.scrolled&&n.config.chart.events.scrolled(this.ctx,{xaxis:{min:e,max:i}})}}]),i}(),lt=function(){function t(i){e(this,t),this.w=i.w,this.ttCtx=i,this.ctx=i.ctx}return n(t,[{key:"getNearestValues",value:function(t){var e=t.hoverArea,i=t.clientX,n=t.clientY,r=this.w,o=r.globals.gridWidth,a=o/(r.globals.dataPoints-1),s=t.elGrid.getBoundingClientRect(),l=this.hasBars();(r.globals.comboCharts||l)&&(a=o/r.globals.dataPoints);var h=i-s.left,u=n-s.top;h<0||u<0||h>r.globals.gridWidth||u>r.globals.gridHeight?(e.classList.remove("hovering-zoom"),e.classList.remove("hovering-pan")):r.globals.zoomEnabled?(e.classList.remove("hovering-pan"),e.classList.add("hovering-zoom")):r.globals.panEnabled&&(e.classList.remove("hovering-zoom"),e.classList.add("hovering-pan"));var c=Math.round(h/a);l&&(c=Math.ceil(h/a),c-=1);for(var p,d=null,g=null,v=[],y=0;y<r.globals.seriesXvalues.length;y++)v.push([r.globals.seriesXvalues[y][0]-1e-6].concat(r.globals.seriesXvalues[y]));return v=v.map(function(t){return t.filter(function(t){return t})}),p=r.globals.seriesYvalues.map(function(t){return t.filter(function(t){return f.isNumber(t)})}),r.globals.isXNumeric&&(d=(g=this.closestInMultiArray(h,u,v,p)).index,c=g.j,null!==d&&(v=r.globals.seriesXvalues[d],c=(g=this.closestInArray(h,v)).index)),r.globals.capturedSeriesIndex=null===d?-1:d,(!c||c<1)&&(c=0),r.globals.capturedDataPointIndex=c,{capturedSeries:d,j:c,hoverX:h,hoverY:u}}},{key:"closestInMultiArray",value:function(t,e,i,n){var r=0,o=null,a=-1;this.w.globals.series.length>1?r=this.getFirstActiveXArray(i):o=0;var s=n[r][0],l=i[r][0],h=Math.abs(t-l),u=Math.abs(e-s),c=u+h;return n.map(function(r,s){r.map(function(r,l){var p=Math.abs(e-n[s][l]),d=Math.abs(t-i[s][l]),f=d+p;f<c&&(c=f,h=d,u=p,o=s,a=l)})}),{index:o,j:a}}},{key:"getFirstActiveXArray",value:function(t){for(var e=0,i=new O(this.ctx),n=t.map(function(t,e){return t.length>0?e:-1}),r=0;r<n.length;r++){var o=i.getSeriesTotalByIndex(r);if(-1!==n[r]&&0!==o&&!i.seriesHaveSameValues(r)){e=n[r];break}}return e}},{key:"closestInArray",value:function(t,e){for(var i=e[0],n=null,r=Math.abs(t-i),o=0;o<e.length;o++){var a=Math.abs(t-e[o]);a<r&&(r=a,n=o)}return{index:n}}},{key:"isXoverlap",value:function(t){var e=[],i=this.w.globals.seriesX.filter(function(t){return void 0!==t[0]});if(i.length>0)for(var n=0;n<i.length-1;n++)void 0!==i[n][t]&&void 0!==i[n+1][t]&&i[n][t]!==i[n+1][t]&&e.push("unEqual");return 0===e.length}},{key:"isInitialSeriesSameLen",value:function(){for(var t=!0,e=this.w.globals.initialSeries,i=0;i<e.length-1;i++)if(e[i].data.length!==e[i+1].data.length){t=!1;break}return t}},{key:"getBarsHeight",value:function(t){return c(t).reduce(function(t,e){return t+e.getBBox().height},0)}},{key:"getElMarkers",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(" .apexcharts-series-markers")}},{key:"getAllMarkers",value:function(){var t=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap");(t=c(t)).sort(function(t,e){return Number(e.getAttribute("data:realIndex"))<Number(t.getAttribute("data:realIndex"))?0:-1});var e=[];return t.forEach(function(t){e.push(t.querySelector(".apexcharts-marker"))}),e}},{key:"hasMarkers",value:function(){return this.getElMarkers().length>0}},{key:"getElBars",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-bar-series,  .apexcharts-candlestick-series, .apexcharts-rangebar-series")}},{key:"hasBars",value:function(){return this.getElBars().length>0}},{key:"getHoverMarkerSize",value:function(t){var e=this.w,i=e.config.markers.hover.size;return void 0===i&&(i=e.globals.markers.size[t]+e.config.markers.hover.sizeOffset),i}},{key:"toggleAllTooltipSeriesGroups",value:function(t){var e=this.w,i=this.ttCtx;0===i.allTooltipSeriesGroups.length&&(i.allTooltipSeriesGroups=e.globals.dom.baseEl.querySelectorAll(".apexcharts-tooltip-series-group"));for(var n=i.allTooltipSeriesGroups,r=0;r<n.length;r++)"enable"===t?(n[r].classList.add("apexcharts-active"),n[r].style.display=e.config.tooltip.items.display):(n[r].classList.remove("apexcharts-active"),n[r].style.display="none")}}]),t}(),ht=function(){function t(i){e(this,t),this.w=i.w,this.ctx=i.ctx,this.ttCtx=i,this.tooltipUtil=new lt(i)}return n(t,[{key:"drawSeriesTexts",value:function(t){var e=t.shared,i=void 0===e||e,n=t.ttItems,r=t.i,o=void 0===r?0:r,a=t.j,s=void 0===a?null:a,l=this.w;void 0!==l.config.tooltip.custom?this.handleCustomTooltip({i:o,j:s,y1:t.y1,y2:t.y2,w:l}):this.toggleActiveInactiveSeries(i);var h=this.getValuesToPrint({i:o,j:s});this.printLabels({i:o,j:s,values:h,ttItems:n,shared:i});var u=this.ttCtx.getElTooltip();this.ttCtx.tooltipRect.ttWidth=u.getBoundingClientRect().width,this.ttCtx.tooltipRect.ttHeight=u.getBoundingClientRect().height}},{key:"printLabels",value:function(t){var e,i=this,n=t.i,r=t.j,o=t.values,a=t.ttItems,s=t.shared,l=this.w,h=o.xVal,u=o.zVal,c=o.xAxisTTVal,p="",d=l.globals.colors[n];null!==r&&l.config.plotOptions.bar.distributed&&(d=l.globals.colors[r]);for(var f=function(t,o){var f=i.getFormatters(n);p=i.getSeriesName({fn:f.yLbTitleFormatter,index:n,seriesIndex:n,j:r});var g=l.config.tooltip.inverseOrder?o:t;if(l.globals.axisCharts){var v=function(t){return f.yLbFormatter(l.globals.series[t][r],{series:l.globals.series,seriesIndex:t,dataPointIndex:r,w:l})};s?(f=i.getFormatters(g),p=i.getSeriesName({fn:f.yLbTitleFormatter,index:g,seriesIndex:n,j:r}),d=l.globals.colors[g],e=v(g)):e=v(n)}null===r&&(e=f.yLbFormatter(l.globals.series[n],l)),i.DOMHandling({i:n,t:g,j:r,ttItems:a,values:{val:e,xVal:h,xAxisTTVal:c,zVal:u},seriesName:p,shared:s,pColor:d})},g=0,v=l.globals.series.length-1;g<l.globals.series.length;g++,v--)f(g,v)}},{key:"getFormatters",value:function(t){var e,i=this.w,n=i.globals.yLabelFormatters[t];return void 0!==i.globals.ttVal?Array.isArray(i.globals.ttVal)?(n=i.globals.ttVal[t]&&i.globals.ttVal[t].formatter,e=i.globals.ttVal[t]&&i.globals.ttVal[t].title&&i.globals.ttVal[t].title.formatter):(n=i.globals.ttVal.formatter,"function"==typeof i.globals.ttVal.title.formatter&&(e=i.globals.ttVal.title.formatter)):e=i.config.tooltip.y.title.formatter,"function"!=typeof n&&(n=i.globals.yLabelFormatters[0]?i.globals.yLabelFormatters[0]:function(t){return t}),"function"!=typeof e&&(e=function(t){return t}),{yLbFormatter:n,yLbTitleFormatter:e}}},{key:"getSeriesName",value:function(t){var e=t.index,i=t.seriesIndex,n=t.j,r=this.w;return(0,t.fn)(String(r.globals.seriesNames[e]),{series:r.globals.series,seriesIndex:i,dataPointIndex:n,w:r})}},{key:"DOMHandling",value:function(t){var e=t.i,i=t.t,n=t.ttItems,r=t.values,o=t.seriesName,a=t.shared,s=t.pColor,l=this.w,h=this.ttCtx,u=r.val,c=r.xVal,p=r.xAxisTTVal,d=r.zVal,f=null;f=n[i].children,l.config.tooltip.fillSeriesColor&&(n[i].style.backgroundColor=s,f[0].style.display="none"),h.showTooltipTitle&&(null===h.tooltipTitle&&(h.tooltipTitle=l.globals.dom.baseEl.querySelector(".apexcharts-tooltip-title")),h.tooltipTitle.innerHTML=c),h.blxaxisTooltip&&(h.xaxisTooltipText.innerHTML=""!==p?p:c);var g=n[i].querySelector(".apexcharts-tooltip-text-label");g&&(g.innerHTML=o?o+": ":"");var v=n[i].querySelector(".apexcharts-tooltip-text-value");v&&(v.innerHTML=void 0!==u?u:""),f[0]&&f[0].classList.contains("apexcharts-tooltip-marker")&&(l.config.tooltip.marker.fillColors&&Array.isArray(l.config.tooltip.marker.fillColors)&&(s=l.config.tooltip.marker.fillColors[e]),f[0].style.backgroundColor=s),l.config.tooltip.marker.show||(f[0].style.display="none"),null!==d&&(n[i].querySelector(".apexcharts-tooltip-text-z-label").innerHTML=l.config.tooltip.z.title,n[i].querySelector(".apexcharts-tooltip-text-z-value").innerHTML=void 0!==d?d:""),a&&f[0]&&(f[0].parentNode.style.display=null==u||l.globals.collapsedSeriesIndices.indexOf(i)>-1?"none":l.config.tooltip.items.display)}},{key:"toggleActiveInactiveSeries",value:function(t){var e=this.w;if(t)this.tooltipUtil.toggleAllTooltipSeriesGroups("enable");else{this.tooltipUtil.toggleAllTooltipSeriesGroups("disable");var i=e.globals.dom.baseEl.querySelector(".apexcharts-tooltip-series-group");i&&(i.classList.add("apexcharts-active"),i.style.display=e.config.tooltip.items.display)}}},{key:"getValuesToPrint",value:function(t){var e=t.i,i=t.j,n=this.w,r=this.ctx.series.filteredSeriesX(),o="",a="",s=null,l=null,h={series:n.globals.series,seriesIndex:e,dataPointIndex:i,w:n},u=n.globals.ttZFormatter;null===i?l=n.globals.series[e]:n.globals.isXNumeric?(o=r[e][i],0===r[e].length&&(o=r[this.tooltipUtil.getFirstActiveXArray(r)][i])):o=void 0!==n.globals.labels[i]?n.globals.labels[i]:"";var c=o;return n.globals.isXNumeric&&"datetime"===n.config.xaxis.type?o=new D(this.ctx).xLabelFormat(n.globals.ttKeyFormatter,c,c):n.globals.isBarHorizontal||(o=n.globals.xLabelFormatter(c,h)),void 0!==n.config.tooltip.x.formatter&&(o=n.globals.ttKeyFormatter(c,h)),n.globals.seriesZ.length>0&&n.globals.seriesZ[0].length>0&&(s=u(n.globals.seriesZ[e][i],n)),a="function"==typeof n.config.xaxis.tooltip.formatter?n.globals.xaxisTooltipFormatter(c,h):o,{val:Array.isArray(l)?l.join(" "):l,xVal:Array.isArray(o)?o.join(" "):o,xAxisTTVal:Array.isArray(a)?a.join(" "):a,zVal:s}}},{key:"handleCustomTooltip",value:function(t){var e=t.i,i=t.j,n=t.y1,r=t.y2,o=t.w,a=this.ttCtx.getElTooltip(),s=o.config.tooltip.custom;Array.isArray(s)&&s[e]&&(s=s[e]),a.innerHTML=s({ctx:this.ctx,series:o.globals.series,seriesIndex:e,dataPointIndex:i,y1:n,y2:r,w:o})}}]),t}(),ut=function(){function t(i){e(this,t),this.ttCtx=i,this.ctx=i.ctx,this.w=i.w}return n(t,[{key:"moveXCrosshairs",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this.ttCtx,n=this.w,r=i.getElXCrosshairs(),o=t-i.xcrosshairsWidth/2,a=n.globals.labels.slice().length;if(null!==e&&(o=n.globals.gridWidth/a*e),null!==r&&(r.setAttribute("x",o),r.setAttribute("x1",o),r.setAttribute("x2",o),r.setAttribute("y2",n.globals.gridHeight),r.classList.add("apexcharts-active")),o<0&&(o=0),o>n.globals.gridWidth&&(o=n.globals.gridWidth),i.blxaxisTooltip){var s=o;"tickWidth"!==n.config.xaxis.crosshairs.width&&"barWidth"!==n.config.xaxis.crosshairs.width||(s=o+i.xcrosshairsWidth/2),this.moveXAxisTooltip(s)}}},{key:"moveYCrosshairs",value:function(t){var e=this.ttCtx;null!==e.ycrosshairs&&(y.setAttrs(e.ycrosshairs,{y1:t,y2:t}),y.setAttrs(e.ycrosshairsHidden,{y1:t,y2:t}))}},{key:"moveXAxisTooltip",value:function(t){var e=this.w,i=this.ttCtx;if(null!==i.xaxisTooltip){i.xaxisTooltip.classList.add("apexcharts-active");var n=i.xaxisOffY+e.config.xaxis.tooltip.offsetY+e.globals.translateY+1+e.config.xaxis.offsetY;if(t-=i.xaxisTooltip.getBoundingClientRect().width/2,!isNaN(t)){t+=e.globals.translateX;var r;r=new y(this.ctx).getTextRects(i.xaxisTooltipText.innerHTML),i.xaxisTooltipText.style.minWidth=r.width+"px",i.xaxisTooltip.style.left=t+"px",i.xaxisTooltip.style.top=n+"px"}}}},{key:"moveYAxisTooltip",value:function(t){var e=this.w,i=this.ttCtx;null===i.yaxisTTEls&&(i.yaxisTTEls=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));var n=parseInt(i.ycrosshairsHidden.getAttribute("y1"),10),r=e.globals.translateY+n,o=i.yaxisTTEls[t].getBoundingClientRect().height,a=e.globals.translateYAxisX[t]-2;e.config.yaxis[t].opposite&&(a-=26),r-=o/2,-1===e.globals.ignoreYAxisIndexes.indexOf(t)?(i.yaxisTTEls[t].classList.add("apexcharts-active"),i.yaxisTTEls[t].style.top=r+"px",i.yaxisTTEls[t].style.left=a+e.config.yaxis[t].tooltip.offsetX+"px"):i.yaxisTTEls[t].classList.remove("apexcharts-active")}},{key:"moveTooltip",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=this.w,r=this.ttCtx,o=r.getElTooltip(),a=r.tooltipRect,s=null!==i?parseFloat(i):1,l=parseFloat(t)+s+5,h=parseFloat(e)+s/2;if(l>n.globals.gridWidth/2&&(l=l-a.ttWidth-s-15),l>n.globals.gridWidth-a.ttWidth-10&&(l=n.globals.gridWidth-a.ttWidth),l<-20&&(l=-20),n.config.tooltip.followCursor){var u=r.getElGrid().getBoundingClientRect();h=r.e.clientY+n.globals.translateY-u.top-a.ttHeight/2}if(!n.config.tooltip.followCursor){var c=this.positionChecks(a,l,h);l=c.x,h=c.y}isNaN(l)||(l+=n.globals.translateX,o.style.left=l+"px",o.style.top=h+"px")}},{key:"positionChecks",value:function(t,e,i){var n=this.w;return t.ttHeight/2+i>n.globals.gridHeight&&(i=n.globals.gridHeight-t.ttHeight+n.globals.translateY),i<0&&(i=0),{x:e,y:i}}},{key:"moveMarkers",value:function(t,e){var i=this.w,n=this.ttCtx;if(i.globals.markers.size[t]>0)for(var r=i.globals.dom.baseEl.querySelectorAll(" .apexcharts-series[data\\:realIndex='".concat(t,"'] .apexcharts-marker")),o=0;o<r.length;o++)parseInt(r[o].getAttribute("rel"),10)===e&&(n.marker.resetPointsSize(),n.marker.enlargeCurrentPoint(e,r[o]));else n.marker.resetPointsSize(),this.moveDynamicPointOnHover(e,t)}},{key:"moveDynamicPointOnHover",value:function(t,e){var i,n,r=this.w,o=this.ttCtx,a=r.globals.pointsArray,s=o.tooltipUtil.getHoverMarkerSize(e),l=r.config.series[e].type;if(!l||"column"!==l&&"candlestick"!==l){i=a[e][t][0],n=a[e][t][1]?a[e][t][1]:0;var h=r.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(e,"'] .apexcharts-series-markers circle"));h&&(h.setAttribute("r",s),h.setAttribute("cx",i),h.setAttribute("cy",n)),this.moveXCrosshairs(i),o.fixedTooltip||this.moveTooltip(i,n,s)}}},{key:"moveDynamicPointsOnHover",value:function(t){var e,i=this.ttCtx,n=i.w,r=0,o=0,a=n.globals.pointsArray;e=new k(this.ctx).getActiveConfigSeriesIndex(!0);var s=i.tooltipUtil.getHoverMarkerSize(e);a[e]&&(r=a[e][t][0],o=a[e][t][1]);var l=i.tooltipUtil.getAllMarkers();if(null!==l)for(var h=0;h<n.globals.series.length;h++){var u=a[h];if(n.globals.comboCharts&&void 0===u&&l.splice(h,0,null),u&&u.length){var c=a[h][t][1];l[h].setAttribute("cx",r),null===c||isNaN(c)?l[h]&&l[h].setAttribute("r",0):(l[h]&&l[h].setAttribute("r",s),l[h]&&l[h].setAttribute("cy",c))}}this.moveXCrosshairs(r),i.fixedTooltip||this.moveTooltip(r,o||n.globals.gridHeight,s)}},{key:"moveStickyTooltipOverBars",value:function(t){var e,i=this.w,n=this.ttCtx,r=i.globals.columnSeries?i.globals.columnSeries.length:i.globals.series.length,o=r>=2&&r%2==0?Math.floor(r/2):Math.floor(r/2)+1,a=i.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[rel='".concat(o,"'] path[j='").concat(t,"'], .apexcharts-candlestick-series .apexcharts-series[rel='").concat(o,"'] path[j='").concat(t,"'], .apexcharts-rangebar-series .apexcharts-series[rel='").concat(o,"'] path[j='").concat(t,"']")),s=a?parseFloat(a.getAttribute("cx")):0,l=a?parseFloat(a.getAttribute("barWidth")):0;i.globals.isXNumeric?s-=r%2!=0?l/2:0:(s=n.xAxisTicksPositions[t-1]+n.dataPointsDividedWidth/2,isNaN(s)&&(s=n.xAxisTicksPositions[t]-n.dataPointsDividedWidth/2));var h=n.getElGrid().getBoundingClientRect();e=n.e.clientY-h.top-n.tooltipRect.ttHeight/2,this.moveXCrosshairs(s),n.fixedTooltip||this.moveTooltip(s,e||i.globals.gridHeight)}}]),t}(),ct=function(){function t(i){e(this,t),this.w=i.w,this.ttCtx=i,this.ctx=i.ctx,this.tooltipPosition=new ut(i)}return n(t,[{key:"drawDynamicPoints",value:function(){var t=this.w,e=new y(this.ctx),i=new R(this.ctx),n=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series");(n=c(n)).sort(function(t,e){return Number(e.getAttribute("data:realIndex"))<Number(t.getAttribute("data:realIndex"))?0:-1});for(var r=0;r<n.length;r++){var o=n[r].querySelector(".apexcharts-series-markers-wrap");if(null!==o){var a=void 0,s="apexcharts-marker w".concat((Math.random()+1).toString(36).substring(4));"line"!==t.config.chart.type&&"area"!==t.config.chart.type||t.globals.comboCharts||t.config.tooltip.intersect||(s+=" no-pointer-events");var l=i.getMarkerConfig(s,r);(a=e.drawMarker(0,0,l)).node.setAttribute("default-marker-size",0);var h=document.createElementNS(t.globals.SVGNS,"g");h.classList.add("apexcharts-series-markers"),h.appendChild(a.node),o.appendChild(h)}}}},{key:"enlargeCurrentPoint",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=this.w;"bubble"!==r.config.chart.type&&this.newPointSize(t,e);var o=e.getAttribute("cx"),a=e.getAttribute("cy");if(null!==i&&null!==n&&(o=i,a=n),this.tooltipPosition.moveXCrosshairs(o),!this.fixedTooltip){if("radar"===r.config.chart.type){var s=this.ttCtx.getElGrid().getBoundingClientRect();o=this.ttCtx.e.clientX-s.left}this.tooltipPosition.moveTooltip(o,a,r.config.markers.hover.size)}}},{key:"enlargePoints",value:function(t){for(var e=this.w,i=this.ttCtx,n=t,r=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),o=e.config.markers.hover.size,a=0;a<r.length;a++){var s=r[a].getAttribute("rel"),l=r[a].getAttribute("index");if(void 0===o&&(o=e.globals.markers.size[l]+e.config.markers.hover.sizeOffset),n===parseInt(s,10)){this.newPointSize(n,r[a]);var h=r[a].getAttribute("cx"),u=r[a].getAttribute("cy");this.tooltipPosition.moveXCrosshairs(h),i.fixedTooltip||this.tooltipPosition.moveTooltip(h,u,o)}else this.oldPointSize(r[a])}}},{key:"newPointSize",value:function(t,e){var i=this.w,n=i.config.markers.hover.size,r=0===t?e.parentNode.firstChild:e.parentNode.lastChild;if("0"!==r.getAttribute("default-marker-size")){var o=parseInt(r.getAttribute("index"),10);void 0===n&&(n=i.globals.markers.size[o]+i.config.markers.hover.sizeOffset),r.setAttribute("r",n)}}},{key:"oldPointSize",value:function(t){var e=parseFloat(t.getAttribute("default-marker-size"));t.setAttribute("r",e)}},{key:"resetPointsSize",value:function(){for(var t=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),e=0;e<t.length;e++){var i=parseFloat(t[e].getAttribute("default-marker-size"));f.isNumber(i)?t[e].setAttribute("r",i):t[e].setAttribute("r",0)}}}]),t}(),pt=function(){function t(i){e(this,t),this.w=i.w,this.ttCtx=i}return n(t,[{key:"getAttr",value:function(t,e){return parseFloat(t.target.getAttribute(e))}},{key:"handleHeatTooltip",value:function(t){var e=t.e,i=t.opt,n=t.x,r=t.y,o=this.ttCtx,a=this.w;if(e.target.classList.contains("apexcharts-heatmap-rect")){var s=this.getAttr(e,"i"),l=this.getAttr(e,"j"),h=this.getAttr(e,"cx"),u=this.getAttr(e,"cy"),c=this.getAttr(e,"width"),p=this.getAttr(e,"height");if(o.tooltipLabels.drawSeriesTexts({ttItems:i.ttItems,i:s,j:l,shared:!1}),a.globals.capturedSeriesIndex=s,a.globals.capturedDataPointIndex=l,n=h+o.tooltipRect.ttWidth/2+c,r=u+o.tooltipRect.ttHeight/2-p/2,o.tooltipPosition.moveXCrosshairs(h+c/2),n>a.globals.gridWidth/2&&(n=h-o.tooltipRect.ttWidth/2+c),o.w.config.tooltip.followCursor){var d=o.getElGrid().getBoundingClientRect();r=o.e.clientY-d.top+a.globals.translateY/2-10}}return{x:n,y:r}}},{key:"handleMarkerTooltip",value:function(t){var e,i,n=t.e,r=t.opt,o=t.x,a=t.y,s=this.w,l=this.ttCtx;if(n.target.classList.contains("apexcharts-marker")){var h=parseInt(r.paths.getAttribute("cx"),10),u=parseInt(r.paths.getAttribute("cy"),10),c=parseFloat(r.paths.getAttribute("val"));if(i=parseInt(r.paths.getAttribute("rel"),10),e=parseInt(r.paths.parentNode.parentNode.parentNode.getAttribute("rel"),10)-1,l.intersect){var p=f.findAncestor(r.paths,"apexcharts-series");p&&(e=parseInt(p.getAttribute("data:realIndex"),10))}if(l.tooltipLabels.drawSeriesTexts({ttItems:r.ttItems,i:e,j:i,shared:!l.showOnIntersect&&s.config.tooltip.shared}),"mouseup"===n.type&&l.markerClick(n,e,i),s.globals.capturedSeriesIndex=e,s.globals.capturedDataPointIndex=i,o=h,a=u+s.globals.translateY-1.4*l.tooltipRect.ttHeight,l.w.config.tooltip.followCursor){var d=l.getElGrid().getBoundingClientRect();a=l.e.clientY+s.globals.translateY-d.top}c<0&&(a=u),l.marker.enlargeCurrentPoint(i,r.paths,o,a)}return{x:o,y:a}}},{key:"handleBarTooltip",value:function(t){var e,i,n=t.e,r=t.opt,o=this.w,a=this.ttCtx,s=a.getElTooltip(),l=0,h=0,u=0,c=this.getBarTooltipXY({e:n,opt:r}),p=c.barHeight,d=c.j;if(o.globals.capturedSeriesIndex=e=c.i,o.globals.capturedDataPointIndex=d,o.globals.isBarHorizontal&&a.tooltipUtil.hasBars()||!o.config.tooltip.shared?(h=c.x,u=c.y,i=Array.isArray(o.config.stroke.width)?o.config.stroke.width[e]:o.config.stroke.width,l=h):o.globals.comboCharts||o.config.tooltip.shared||(l/=2),isNaN(u)?u=o.globals.svgHeight-a.tooltipRect.ttHeight:u<0&&(u=0),h+a.tooltipRect.ttWidth>o.globals.gridWidth?h-=a.tooltipRect.ttWidth:h<0&&(h=0),a.w.config.tooltip.followCursor){var f=a.getElGrid().getBoundingClientRect();u=a.e.clientY-f.top}if(null===a.tooltip&&(a.tooltip=o.globals.dom.baseEl.querySelector(".apexcharts-tooltip")),o.config.tooltip.shared||a.tooltipPosition.moveXCrosshairs(o.globals.comboBarCount>0?l+i/2:l),!a.fixedTooltip&&(!o.config.tooltip.shared||o.globals.isBarHorizontal&&a.tooltipUtil.hasBars())){var g=o.globals.isMultipleYAxis?o.config.yaxis[v]&&o.config.yaxis[v].reversed:o.config.yaxis[0].reversed;g&&(h-=a.tooltipRect.ttWidth)<0&&(h=0),s.style.left=h+o.globals.translateX+"px";var v=parseInt(r.paths.parentNode.getAttribute("data:realIndex"),10);!g||o.globals.isBarHorizontal&&a.tooltipUtil.hasBars()||(u=u+p-2*(o.globals.series[e][d]<0?p:0)),a.tooltipRect.ttHeight+u>o.globals.gridHeight?(u=o.globals.gridHeight-a.tooltipRect.ttHeight+o.globals.translateY,s.style.top=u+"px"):s.style.top=u+o.globals.translateY-a.tooltipRect.ttHeight/2+"px"}}},{key:"getBarTooltipXY",value:function(t){var e=t.e,i=t.opt,n=this.w,r=null,o=this.ttCtx,a=0,s=0,l=0,h=0,u=0,c=e.target.classList;if(c.contains("apexcharts-bar-area")||c.contains("apexcharts-candlestick-area")||c.contains("apexcharts-rangebar-area")){var p=e.target,d=p.getBoundingClientRect(),f=i.elGrid.getBoundingClientRect(),g=d.height;u=d.height;var v=d.width,y=parseInt(p.getAttribute("cx"),10),m=parseInt(p.getAttribute("cy"),10);h=parseFloat(p.getAttribute("barWidth"));var _="touchmove"===e.type?e.touches[0].clientX:e.clientX;r=parseInt(p.getAttribute("j"),10),a=parseInt(p.parentNode.getAttribute("rel"),10)-1;var x=p.getAttribute("data-range-y1"),b=p.getAttribute("data-range-y2");n.globals.comboCharts&&(a=parseInt(p.parentNode.getAttribute("data:realIndex"),10)),o.tooltipLabels.drawSeriesTexts({ttItems:i.ttItems,i:a,j:r,y1:x?parseInt(x,10):null,y2:b?parseInt(b,10):null,shared:!o.showOnIntersect&&n.config.tooltip.shared}),n.config.tooltip.followCursor?n.globals.isBarHorizontal?(s=_-f.left+15,l=m-o.dataPointsDividedHeight+g/2-o.tooltipRect.ttHeight/2):(s=n.globals.isXNumeric?y-v/2:y-o.dataPointsDividedWidth+v/2,l=e.clientY-f.top-o.tooltipRect.ttHeight/2-15):n.globals.isBarHorizontal?((s=y)<o.xyRatios.baseLineInvertedY&&(s=y-o.tooltipRect.ttWidth),l=m-o.dataPointsDividedHeight+g/2-o.tooltipRect.ttHeight/2):(s=n.globals.isXNumeric?y-v/2:y-o.dataPointsDividedWidth+v/2,l=m)}return{x:s,y:l,barHeight:u,barWidth:h,i:a,j:r}}}]),t}(),dt=function(){function t(i){e(this,t),this.w=i.w,this.ttCtx=i}return n(t,[{key:"drawXaxisTooltip",value:function(){var t=this.w,e=this.ttCtx,i="bottom"===t.config.xaxis.position;e.xaxisOffY=i?t.globals.gridHeight+1:-t.globals.xAxisHeight-t.config.xaxis.axisTicks.height+3;var n=i?"apexcharts-xaxistooltip apexcharts-xaxistooltip-bottom":"apexcharts-xaxistooltip apexcharts-xaxistooltip-top",r=t.globals.dom.elWrap;e.blxaxisTooltip&&null===t.globals.dom.baseEl.querySelector(".apexcharts-xaxistooltip")&&(e.xaxisTooltip=document.createElement("div"),e.xaxisTooltip.setAttribute("class",n+" apexcharts-theme-"+t.config.tooltip.theme),r.appendChild(e.xaxisTooltip),e.xaxisTooltipText=document.createElement("div"),e.xaxisTooltipText.classList.add("apexcharts-xaxistooltip-text"),e.xaxisTooltipText.style.fontFamily=t.config.xaxis.tooltip.style.fontFamily||t.config.chart.fontFamily,e.xaxisTooltipText.style.fontSize=t.config.xaxis.tooltip.style.fontSize,e.xaxisTooltip.appendChild(e.xaxisTooltipText))}},{key:"drawYaxisTooltip",value:function(){for(var t=this.w,e=this.ttCtx,i=function(i){var n=t.config.yaxis[i].opposite||t.config.yaxis[i].crosshairs.opposite;e.yaxisOffX=n?t.globals.gridWidth+1:1;var r="apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(i,n?" apexcharts-yaxistooltip-right":" apexcharts-yaxistooltip-left");t.globals.yAxisSameScaleIndices.map(function(e,n){e.map(function(e,n){n===i&&(r+=t.config.yaxis[n].show?" ":" apexcharts-yaxistooltip-hidden")})});var o=t.globals.dom.elWrap;e.blyaxisTooltip&&null===t.globals.dom.baseEl.querySelector(".apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(i))&&(e.yaxisTooltip=document.createElement("div"),e.yaxisTooltip.setAttribute("class",r+" apexcharts-theme-"+t.config.tooltip.theme),o.appendChild(e.yaxisTooltip),0===i&&(e.yaxisTooltipText=[]),e.yaxisTooltipText.push(document.createElement("div")),e.yaxisTooltipText[i].classList.add("apexcharts-yaxistooltip-text"),e.yaxisTooltip.appendChild(e.yaxisTooltipText[i]))},n=0;n<t.config.yaxis.length;n++)i(n)}},{key:"setXCrosshairWidth",value:function(){var t=this.w,e=this.ttCtx,i=e.getElXCrosshairs();if(e.xcrosshairsWidth=parseInt(t.config.xaxis.crosshairs.width,10),t.globals.comboCharts){var n=t.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==n&&"barWidth"===t.config.xaxis.crosshairs.width){var r=parseFloat(n.getAttribute("barWidth"));e.xcrosshairsWidth=r}else"tickWidth"===t.config.xaxis.crosshairs.width&&(e.xcrosshairsWidth=t.globals.gridWidth/t.globals.labels.length)}else if("tickWidth"===t.config.xaxis.crosshairs.width)e.xcrosshairsWidth=t.globals.gridWidth/t.globals.labels.length;else if("barWidth"===t.config.xaxis.crosshairs.width){var o=t.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==o){var a=parseFloat(o.getAttribute("barWidth"));e.xcrosshairsWidth=a}else e.xcrosshairsWidth=1}t.globals.isBarHorizontal&&(e.xcrosshairsWidth=0),null!==i&&e.xcrosshairsWidth>0&&i.setAttribute("width",e.xcrosshairsWidth)}},{key:"handleYCrosshair",value:function(){var t=this.w,e=this.ttCtx;e.ycrosshairs=t.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs"),e.ycrosshairsHidden=t.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs-hidden")}},{key:"drawYaxisTooltipText",value:function(t,e,i){var n=this.ttCtx,r=this.w,o=r.globals.yLabelFormatters[t];if(n.blyaxisTooltip){var a=n.getElGrid().getBoundingClientRect(),s=r.globals.minYArr[t]+(r.globals.maxYArr[t]-r.globals.minYArr[t]-(e-a.top)*i.yRatio[t]);n.tooltipPosition.moveYCrosshairs(e-a.top),n.yaxisTooltipText[t].innerHTML=o(s),n.tooltipPosition.moveYAxisTooltip(t)}}}]),t}(),ft=function(){function t(i){e(this,t),this.ctx=i,this.w=i.w;var n=this.w;this.tConfig=n.config.tooltip,this.tooltipUtil=new lt(this),this.tooltipLabels=new ht(this),this.tooltipPosition=new ut(this),this.marker=new ct(this),this.intersect=new pt(this),this.axesTooltip=new dt(this),this.showOnIntersect=this.tConfig.intersect,this.showTooltipTitle=this.tConfig.x.show,this.fixedTooltip=this.tConfig.fixed.enabled,this.xaxisTooltip=null,this.yaxisTTEls=null,this.isBarShared=!n.globals.isBarHorizontal&&this.tConfig.shared}return n(t,[{key:"getElTooltip",value:function(t){return t||(t=this),t.w.globals.dom.baseEl.querySelector(".apexcharts-tooltip")}},{key:"getElXCrosshairs",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-xcrosshairs")}},{key:"getElGrid",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-grid")}},{key:"drawTooltip",value:function(t){var e=this.w;this.xyRatios=t,this.blxaxisTooltip=e.config.xaxis.tooltip.enabled&&e.globals.axisCharts,this.blyaxisTooltip=e.config.yaxis[0].tooltip.enabled&&e.globals.axisCharts,this.allTooltipSeriesGroups=[],e.globals.axisCharts||(this.showTooltipTitle=!1);var i=document.createElement("div");if(i.classList.add("apexcharts-tooltip"),i.classList.add("apexcharts-theme-".concat(this.tConfig.theme)),e.globals.dom.elWrap.appendChild(i),e.globals.axisCharts){this.axesTooltip.drawXaxisTooltip(),this.axesTooltip.drawYaxisTooltip(),this.axesTooltip.setXCrosshairWidth(),this.axesTooltip.handleYCrosshair();var n=new z(this.ctx);this.xAxisTicksPositions=n.getXAxisTicksPositions()}if(!e.globals.comboCharts&&!this.tConfig.intersect&&"bar"!==e.config.chart.type&&"rangeBar"!==e.config.chart.type||this.tConfig.shared||(this.showOnIntersect=!0),0!==e.config.markers.size&&0!==e.globals.markers.largestSize||this.marker.drawDynamicPoints(this),e.globals.collapsedSeries.length!==e.globals.series.length){this.dataPointsDividedHeight=e.globals.gridHeight/e.globals.dataPoints,this.dataPointsDividedWidth=e.globals.gridWidth/e.globals.dataPoints,this.showTooltipTitle&&(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.classList.add("apexcharts-tooltip-title"),this.tooltipTitle.style.fontFamily=this.tConfig.style.fontFamily||e.config.chart.fontFamily,this.tooltipTitle.style.fontSize=this.tConfig.style.fontSize,i.appendChild(this.tooltipTitle));var r=e.globals.series.length;(e.globals.xyCharts||e.globals.comboCharts)&&this.tConfig.shared&&(r=this.showOnIntersect?1:e.globals.series.length),this.legendLabels=e.globals.dom.baseEl.querySelectorAll(".apexcharts-legend-text"),this.ttItems=this.createTTElements(r),this.addSVGEvents()}}},{key:"createTTElements",value:function(t){for(var e=this.w,i=[],n=this.getElTooltip(),r=0;r<t;r++){var o=document.createElement("div");o.classList.add("apexcharts-tooltip-series-group"),this.tConfig.shared&&this.tConfig.enabledOnSeries&&Array.isArray(this.tConfig.enabledOnSeries)&&this.tConfig.enabledOnSeries.indexOf(r)<0&&o.classList.add("apexcharts-tooltip-series-group-hidden");var a=document.createElement("span");a.classList.add("apexcharts-tooltip-marker"),a.style.backgroundColor=e.globals.colors[r],o.appendChild(a);var s=document.createElement("div");s.classList.add("apexcharts-tooltip-text"),s.style.fontFamily=this.tConfig.style.fontFamily||e.config.chart.fontFamily,s.style.fontSize=this.tConfig.style.fontSize;var l=document.createElement("div");l.classList.add("apexcharts-tooltip-y-group");var h=document.createElement("span");h.classList.add("apexcharts-tooltip-text-label"),l.appendChild(h);var u=document.createElement("span");u.classList.add("apexcharts-tooltip-text-value"),l.appendChild(u);var c=document.createElement("div");c.classList.add("apexcharts-tooltip-z-group");var p=document.createElement("span");p.classList.add("apexcharts-tooltip-text-z-label"),c.appendChild(p);var d=document.createElement("span");d.classList.add("apexcharts-tooltip-text-z-value"),c.appendChild(d),s.appendChild(l),s.appendChild(c),o.appendChild(s),n.appendChild(o),i.push(o)}return i}},{key:"addSVGEvents",value:function(){var t=this.w,e=t.config.chart.type,i=this.getElTooltip(),n=!("bar"!==e&&"candlestick"!==e&&"rangeBar"!==e),r="area"===e||"line"===e||"scatter"===e||"bubble"===e||"radar"===e,o=t.globals.dom.Paper.node,a=this.getElGrid();a&&(this.seriesBound=a.getBoundingClientRect());var s,l=[],h=[],u={hoverArea:o,elGrid:a,tooltipEl:i,tooltipY:l,tooltipX:h,ttItems:this.ttItems};if(t.globals.axisCharts&&(r?s=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:longestSeries='true'] .apexcharts-marker"):n?s=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-bar-area, .apexcharts-series .apexcharts-candlestick-area, .apexcharts-series .apexcharts-rangebar-area"):"heatmap"===e&&(s=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-heatmap")),s&&s.length))for(var c=0;c<s.length;c++)l.push(s[c].getAttribute("cy")),h.push(s[c].getAttribute("cx"));if(t.globals.xyCharts&&!this.showOnIntersect||t.globals.comboCharts&&!this.showOnIntersect||n&&this.tooltipUtil.hasBars()&&this.tConfig.shared)this.addPathsEventListeners([o],u);else if(n&&!t.globals.comboCharts||r&&this.showOnIntersect)this.addDatapointEventsListeners(u);else if(!t.globals.axisCharts||"heatmap"===e){var p=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series");this.addPathsEventListeners(p,u)}if(this.showOnIntersect){var d=t.globals.dom.baseEl.querySelectorAll(".apexcharts-line-series .apexcharts-marker, .apexcharts-area-series .apexcharts-marker");d.length>0&&this.addPathsEventListeners(d,u),this.tooltipUtil.hasBars()&&!this.tConfig.shared&&this.addDatapointEventsListeners(u)}}},{key:"drawFixedTooltipRect",value:function(){var t=this.w,e=this.getElTooltip(),i=e.getBoundingClientRect(),n=i.width+10,r=i.height+10,o=this.tConfig.fixed.offsetX,a=this.tConfig.fixed.offsetY,s=this.tConfig.fixed.position.toLowerCase();return s.indexOf("right")>-1&&(o=o+t.globals.svgWidth-n+10),s.indexOf("bottom")>-1&&(a=a+t.globals.svgHeight-r-10),e.style.left=o+"px",e.style.top=a+"px",{x:o,y:a,ttWidth:n,ttHeight:r}}},{key:"addDatapointEventsListeners",value:function(t){var e=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers .apexcharts-marker, .apexcharts-bar-area, .apexcharts-candlestick-area, .apexcharts-rangebar-area");this.addPathsEventListeners(e,t)}},{key:"addPathsEventListeners",value:function(t,e){for(var i=this,n=function(n){var r={paths:t[n],tooltipEl:e.tooltipEl,tooltipY:e.tooltipY,tooltipX:e.tooltipX,elGrid:e.elGrid,hoverArea:e.hoverArea,ttItems:e.ttItems};["mousemove","mouseup","touchmove","mouseout","touchend"].map(function(e){return t[n].addEventListener(e,i.seriesHover.bind(i,r),{capture:!1,passive:!0})})},r=0;r<t.length;r++)n(r)}},{key:"seriesHover",value:function(t,e){var i=this,n=[],r=this.w;r.config.chart.group&&(n=this.ctx.getGroupedCharts()),r.globals.axisCharts&&(r.globals.minX===-1/0&&r.globals.maxX===1/0||0===r.globals.dataPoints)||(n.length?n.forEach(function(n){var r=i.getElTooltip(n);n.w.globals.minX===i.w.globals.minX&&n.w.globals.maxX===i.w.globals.maxX&&n.w.globals.tooltip.seriesHoverByContext({chartCtx:n,ttCtx:n.w.globals.tooltip,opt:{paths:t.paths,tooltipEl:r,tooltipY:t.tooltipY,tooltipX:t.tooltipX,elGrid:t.elGrid,hoverArea:t.hoverArea,ttItems:n.w.globals.tooltip.ttItems},e:e})}):this.seriesHoverByContext({chartCtx:this.ctx,ttCtx:this.w.globals.tooltip,opt:t,e:e}))}},{key:"seriesHoverByContext",value:function(t){var e=t.chartCtx,i=t.ttCtx,n=t.opt,r=t.e,o=e.w,a=this.getElTooltip();i.tooltipRect={x:0,y:0,ttWidth:a.getBoundingClientRect().width,ttHeight:a.getBoundingClientRect().height},i.e=r,!i.tooltipUtil.hasBars()||o.globals.comboCharts||i.isBarShared||this.tConfig.onDatasetHover.highlightDataSeries&&new k(e).toggleSeriesOnHover(r,r.target.parentNode),i.fixedTooltip&&i.drawFixedTooltipRect(),o.globals.axisCharts?i.axisChartsTooltips({e:r,opt:n,tooltipRect:i.tooltipRect}):i.nonAxisChartsTooltips({e:r,opt:n,tooltipRect:i.tooltipRect})}},{key:"axisChartsTooltips",value:function(t){var e,i,n=t.e,r=t.opt,o=this.w,a=r.elGrid.getBoundingClientRect(),s="touchmove"===n.type?n.touches[0].clientX:n.clientX,l="touchmove"===n.type?n.touches[0].clientY:n.clientY;if(this.clientY=l,this.clientX=s,o.globals.capturedSeriesIndex=-1,o.globals.capturedDataPointIndex=-1,l<a.top||l>a.top+a.height)this.handleMouseOut(r);else{if(Array.isArray(this.tConfig.enabledOnSeries)&&!o.config.tooltip.shared){var h=parseInt(r.paths.getAttribute("index"),10);if(this.tConfig.enabledOnSeries.indexOf(h)<0)return void this.handleMouseOut(r)}var u=this.getElTooltip(),c=this.getElXCrosshairs(),p=o.globals.xyCharts||"bar"===o.config.chart.type&&!o.globals.isBarHorizontal&&this.tooltipUtil.hasBars()&&this.tConfig.shared||o.globals.comboCharts&&this.tooltipUtil.hasBars();if(o.globals.isBarHorizontal&&this.tooltipUtil.hasBars()&&(p=!1),"mousemove"===n.type||"touchmove"===n.type||"mouseup"===n.type){if(null!==c&&c.classList.add("apexcharts-active"),null!==this.ycrosshairs&&this.blyaxisTooltip&&this.ycrosshairs.classList.add("apexcharts-active"),p&&!this.showOnIntersect)this.handleStickyTooltip(n,s,l,r);else if("heatmap"===o.config.chart.type){var d=this.intersect.handleHeatTooltip({e:n,opt:r,x:e,y:i});i=d.y,u.style.left=(e=d.x)+"px",u.style.top=i+"px"}else this.tooltipUtil.hasBars()&&this.intersect.handleBarTooltip({e:n,opt:r}),this.tooltipUtil.hasMarkers()&&this.intersect.handleMarkerTooltip({e:n,opt:r,x:e,y:i});if(this.blyaxisTooltip)for(var f=0;f<o.config.yaxis.length;f++)this.axesTooltip.drawYaxisTooltipText(f,l,this.xyRatios);r.tooltipEl.classList.add("apexcharts-active")}else"mouseout"!==n.type&&"touchend"!==n.type||this.handleMouseOut(r)}}},{key:"nonAxisChartsTooltips",value:function(t){var e=t.e,i=t.opt,n=t.tooltipRect,r=this.w,o=i.paths.getAttribute("rel"),a=this.getElTooltip(),s=r.globals.dom.elWrap.getBoundingClientRect();if("mousemove"===e.type||"touchmove"===e.type){a.classList.add("apexcharts-active"),this.tooltipLabels.drawSeriesTexts({ttItems:i.ttItems,i:parseInt(o,10)-1,shared:!1});var l=r.globals.clientY-s.top-n.ttHeight-10;a.style.left=r.globals.clientX-s.left-n.ttWidth/2+"px",a.style.top=l+"px"}else"mouseout"!==e.type&&"touchend"!==e.type||a.classList.remove("apexcharts-active")}},{key:"handleStickyTooltip",value:function(t,e,i,n){var r=this.w,o=this.tooltipUtil.getNearestValues({context:this,hoverArea:n.hoverArea,elGrid:n.elGrid,clientX:e,clientY:i}),a=o.j,s=o.capturedSeries;o.hoverX<0||o.hoverX>r.globals.gridWidth?this.handleMouseOut(n):null!==s?this.handleStickyCapturedSeries(t,s,n,a):this.tooltipUtil.isXoverlap(a)&&this.create(t,this,0,a,n.ttItems)}},{key:"handleStickyCapturedSeries",value:function(t,e,i,n){var r=this.w;null===r.globals.series[e][n]?this.handleMouseOut(i):void 0!==r.globals.series[e][n]?this.tConfig.shared&&this.tooltipUtil.isXoverlap(n)&&this.tooltipUtil.isInitialSeriesSameLen()?this.create(t,this,e,n,i.ttItems):this.create(t,this,e,n,i.ttItems,!1):this.tooltipUtil.isXoverlap(n)&&this.create(t,this,0,n,i.ttItems)}},{key:"deactivateHoverFilter",value:function(){for(var t=this.w,e=new y(this.ctx),i=t.globals.dom.Paper.select(".apexcharts-bar-area"),n=0;n<i.length;n++)e.pathMouseLeave(i[n])}},{key:"handleMouseOut",value:function(t){var e=this.w,i=this.getElXCrosshairs();if(t.tooltipEl.classList.remove("apexcharts-active"),this.deactivateHoverFilter(),"bubble"!==e.config.chart.type&&this.marker.resetPointsSize(),null!==i&&i.classList.remove("apexcharts-active"),null!==this.ycrosshairs&&this.ycrosshairs.classList.remove("apexcharts-active"),this.blxaxisTooltip&&this.xaxisTooltip.classList.remove("apexcharts-active"),this.blyaxisTooltip){null===this.yaxisTTEls&&(this.yaxisTTEls=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));for(var n=0;n<this.yaxisTTEls.length;n++)this.yaxisTTEls[n].classList.remove("apexcharts-active")}e.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(t){var e=t.getAttribute("data:default-text");t.innerHTML=decodeURIComponent(e)})}},{key:"markerClick",value:function(t,e,i){var n=this.w;"function"==typeof n.config.chart.events.markerClick&&n.config.chart.events.markerClick(t,this.ctx,{seriesIndex:e,dataPointIndex:i,w:n}),this.ctx.events.fireEvent("markerClick",[t,this.ctx,{seriesIndex:e,dataPointIndex:i,w:n}])}},{key:"create",value:function(t,e,i,n,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=this.w,s=e;"mouseup"===t.type&&this.markerClick(t,i,n),null===o&&(o=this.tConfig.shared);var l=this.tooltipUtil.hasMarkers(),h=this.tooltipUtil.getElBars();if(a.config.legend.tooltipHoverFormatter){var u=a.config.legend.tooltipHoverFormatter,c=Array.from(this.legendLabels);c.forEach(function(t){var e=t.getAttribute("data:default-text");t.innerHTML=decodeURIComponent(e)});for(var p=0;p<c.length;p++){var d=c[p],f=parseInt(d.getAttribute("i"),10),g=decodeURIComponent(d.getAttribute("data:default-text")),v=u(g,{seriesIndex:o?f:i,dataPointIndex:n,w:a});if(o)d.innerHTML=a.globals.collapsedSeriesIndices.indexOf(f)<0?v:g;else if(d.innerHTML=f===i?v:g,i===f)break}}if(o){if(s.tooltipLabels.drawSeriesTexts({ttItems:r,i:i,j:n,shared:!this.showOnIntersect&&this.tConfig.shared}),l&&(a.globals.markers.largestSize>0?s.marker.enlargePoints(n):s.tooltipPosition.moveDynamicPointsOnHover(n)),this.tooltipUtil.hasBars()&&(this.barSeriesHeight=this.tooltipUtil.getBarsHeight(h),this.barSeriesHeight>0)){var m=new y(this.ctx),_=a.globals.dom.Paper.select(".apexcharts-bar-area[j='".concat(n,"']"));this.deactivateHoverFilter(),this.tooltipPosition.moveStickyTooltipOverBars(n);for(var x=0;x<_.length;x++)m.pathMouseEnter(_[x])}}else s.tooltipLabels.drawSeriesTexts({shared:!1,ttItems:r,i:i,j:n}),this.tooltipUtil.hasBars()&&s.tooltipPosition.moveStickyTooltipOverBars(n),l&&s.tooltipPosition.moveMarkers(i,n)}}]),t}(),gt=function(){function t(i){e(this,t),this.w=i.w,this.barCtx=i}return n(t,[{key:"handleBarDataLabels",value:function(t){var e=t.x,i=t.y,n=t.y1,r=t.y2,o=t.i,a=t.j,s=t.realIndex,l=t.series,h=t.barHeight,u=t.barWidth,c=t.barYPosition,p=t.visibleSeries,d=t.renderedPath,f=this.w,g=new y(this.barCtx.ctx),v=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[s]:this.barCtx.strokeWidth,m=e+parseFloat(u*p),_=i+parseFloat(h*p);f.globals.isXNumeric&&!f.globals.isBarHorizontal&&(m=e+parseFloat(u*(p+1)),_=i+parseFloat(h*(p+1))-v);var x=e,b=i,w={},S=f.config.dataLabels,C=this.barCtx.barOptions.dataLabels;void 0!==c&&this.barCtx.isTimelineBar&&(_=c,b=c);var E=S.offsetX,T=S.offsetY,P={width:0,height:0};f.config.dataLabels.enabled&&(P=g.getTextRects(f.globals.yLabelFormatters[0](f.globals.maxY),parseFloat(S.style.fontSize)));var L={x:e,y:i,i:o,j:a,renderedPath:d,bcx:m,bcy:_,barHeight:h,barWidth:u,textRects:P,strokeWidth:v,dataLabelsX:x,dataLabelsY:b,barDataLabelsConfig:C,offX:E,offY:T};return w=this.barCtx.isHorizontal?this.calculateBarsDataLabelsPosition(L):this.calculateColumnsDataLabelsPosition(L),d.attr({cy:w.bcy,cx:w.bcx,j:a,val:l[o][a],barHeight:h,barWidth:u}),this.drawCalculatedDataLabels({x:w.dataLabelsX,y:w.dataLabelsY,val:this.barCtx.isTimelineBar?[n,r]:l[o][a],i:s,j:a,barWidth:u,barHeight:h,textRects:P,dataLabelsConfig:S})}},{key:"calculateColumnsDataLabelsPosition",value:function(t){var e,i=this.w,n=t.i,r=t.j,o=t.y,a=t.bcx,s=t.barWidth,l=t.barHeight,h=t.textRects,u=t.dataLabelsY,c=t.barDataLabelsConfig,p=t.strokeWidth,d=t.offX,f=t.offY;l=Math.abs(l);var g="vertical"===i.config.plotOptions.bar.dataLabels.orientation;a-=p/2,e=i.globals.isXNumeric?a-s/2+d:a-i.globals.gridWidth/i.globals.dataPoints+s/2+d,g&&(e=e+h.height/2-p/2-2);var v=this.barCtx.series[n][r]<0;switch(this.barCtx.isReversed&&(o-=l),c.position){case"center":u=g?v?o+l/2+f:o+l/2-f:v?o+l/2+h.height/2+f:o+l/2+h.height/2-f;break;case"bottom":u=g?v?o+l+f:o+l-f:v?o+l+h.height+p+f:o+l-h.height/2+p-f;break;case"top":u=g?v?o+f:o-f:v?o-h.height/2-f:o+h.height+f}return i.config.chart.stacked||(u<0?u=0+p:u+h.height/3>i.globals.gridHeight&&(u=i.globals.gridHeight-p)),{bcx:a,bcy:o,dataLabelsX:e,dataLabelsY:u}}},{key:"calculateBarsDataLabelsPosition",value:function(t){var e=this.w,i=t.x,n=t.i,r=t.j,o=t.bcy,a=t.barHeight,s=t.barWidth,l=t.textRects,h=t.dataLabelsX,u=t.strokeWidth,c=t.barDataLabelsConfig,p=t.offX,d=t.offY,f=e.globals.gridHeight/e.globals.dataPoints;s=Math.abs(s);var g=o-(this.barCtx.isTimelineBar?0:f)+a/2+l.height/2+d-3,v=this.barCtx.series[n][r]<0,y=i;switch(this.barCtx.isReversed&&(y=i+s,i=e.globals.gridWidth-s),c.position){case"center":h=v?y-s/2-p:y-s/2+p;break;case"bottom":h=v?y+s-u-Math.round(l.width/2)-p:y-s+u+Math.round(l.width/2)+p;break;case"top":h=v?y-u+Math.round(l.width/2)-p:y-u-Math.round(l.width/2)+p}return e.config.chart.stacked||(h<0?h=h+l.width+u:h+l.width/2>e.globals.gridWidth&&(h=e.globals.gridWidth-l.width-u)),{bcx:i,bcy:o,dataLabelsX:h,dataLabelsY:g}}},{key:"drawCalculatedDataLabels",value:function(t){var e=t.x,i=t.y,n=t.val,r=t.i,o=t.j,s=t.textRects,l=t.barHeight,h=t.barWidth,u=t.dataLabelsConfig,c=this.w,p="rotate(0)";"vertical"===c.config.plotOptions.bar.dataLabels.orientation&&(p="rotate(-90, ".concat(e,", ").concat(i,")"));var d=new F(this.barCtx.ctx),f=new y(this.barCtx.ctx),g=u.formatter,v=null,m=c.globals.collapsedSeriesIndices.indexOf(r)>-1;if(u.enabled&&!m){v=f.group({class:"apexcharts-data-labels",transform:p});var _="";void 0!==n&&(_=g(n,{seriesIndex:r,dataPointIndex:o,w:c})),0===n&&c.config.chart.stacked&&(_="");var x=c.globals.series[r][o]<=0,b=c.config.plotOptions.bar.dataLabels.position;"vertical"===c.config.plotOptions.bar.dataLabels.orientation&&("top"===b&&(u.textAnchor=x?"end":"start"),"center"===b&&(u.textAnchor="middle"),"bottom"===b&&(u.textAnchor=x?"end":"start")),this.barCtx.isTimelineBar&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&h<f.getTextRects(_,parseFloat(u.style.fontSize)).width&&(_=""),c.config.chart.stacked&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&(this.barCtx.isHorizontal?((h=Math.abs(c.globals.series[r][o])/this.barCtx.invertedYRatio[this.barCtx.yaxisIndex])>0&&s.width/1.6>h||h<0&&s.width/1.6<h)&&(_=""):(l=Math.abs(c.globals.series[r][o])/this.barCtx.yRatio[this.barCtx.yaxisIndex],s.height/1.6>l&&(_="")));var w=a({},u);this.barCtx.isHorizontal&&n<0&&("start"===u.textAnchor?w.textAnchor="end":"end"===u.textAnchor&&(w.textAnchor="start")),d.plotDataLabelsText({x:e,y:i,text:_,i:r,j:o,parent:v,dataLabelsConfig:w,alwaysDrawDataLabel:!0,offsetCorrection:!0})}return v}}]),t}(),vt=function(){function t(i){e(this,t),this.w=i.w,this.barCtx=i}return n(t,[{key:"initVariables",value:function(t){var e=this.w;this.barCtx.series=t,this.barCtx.totalItems=0,this.barCtx.seriesLen=0,this.barCtx.visibleI=-1,this.barCtx.visibleItems=1;for(var i=0;i<t.length;i++)if(t[i].length>0&&(this.barCtx.seriesLen=this.barCtx.seriesLen+1,this.barCtx.totalItems+=t[i].length),e.globals.isXNumeric)for(var n=0;n<t[i].length;n++)e.globals.seriesX[i][n]>e.globals.minX&&e.globals.seriesX[i][n]<e.globals.maxX&&this.barCtx.visibleItems++;else this.barCtx.visibleItems=e.globals.dataPoints;0===this.barCtx.seriesLen&&(this.barCtx.seriesLen=1)}},{key:"initialPositions",value:function(){var t,e,i,n,r,o,a,s,l=this.w,h=l.globals.dataPoints;if(this.barCtx.isTimelineBar&&(h=l.globals.labels.length),this.barCtx.isHorizontal)r=(i=l.globals.gridHeight/h)/this.barCtx.seriesLen,l.globals.isXNumeric&&(r=(i=l.globals.gridHeight/this.barCtx.totalItems)/this.barCtx.seriesLen),r=r*parseInt(this.barCtx.barOptions.barHeight,10)/100,s=this.barCtx.baseLineInvertedY+l.globals.padHorizontal+(this.barCtx.isReversed?l.globals.gridWidth:0)-(this.barCtx.isReversed?2*this.barCtx.baseLineInvertedY:0),e=(i-r*this.barCtx.seriesLen)/2;else{if(n=l.globals.gridWidth/this.barCtx.visibleItems,l.config.xaxis.convertedCatToNumeric&&(n=l.globals.gridWidth/l.globals.dataPoints),o=n/this.barCtx.seriesLen*parseInt(this.barCtx.barOptions.columnWidth,10)/100,l.globals.isXNumeric){var u=this.barCtx.xRatio;l.config.xaxis.convertedCatToNumeric&&(u=this.barCtx.initialXRatio),l.globals.minXDiff&&l.globals.minXDiff/u>0&&(n=l.globals.minXDiff/u),(o=n/this.barCtx.seriesLen*parseInt(this.barCtx.barOptions.columnWidth,10)/100)<1&&(o=1)}a=l.globals.gridHeight-this.barCtx.baseLineY[this.barCtx.yaxisIndex]-(this.barCtx.isReversed?l.globals.gridHeight:0)+(this.barCtx.isReversed?2*this.barCtx.baseLineY[this.barCtx.yaxisIndex]:0),t=l.globals.padHorizontal+(n-o*this.barCtx.seriesLen)/2}return{x:t,y:e,yDivision:i,xDivision:n,barHeight:r,barWidth:o,zeroH:a,zeroW:s}}},{key:"getPathFillColor",value:function(t,e,i,n){var r=this.w,o=new A(this.barCtx.ctx),a=null,s=this.barCtx.barOptions.distributed?i:e;return this.barCtx.barOptions.colors.ranges.length>0&&this.barCtx.barOptions.colors.ranges.map(function(n){t[e][i]>=n.from&&t[e][i]<=n.to&&(a=n.color)}),r.config.series[e].data[i]&&r.config.series[e].data[i].fillColor&&(a=r.config.series[e].data[i].fillColor),o.fillPath({seriesNumber:this.barCtx.barOptions.distributed?s:n,dataPointIndex:i,color:a,value:t[e][i]})}},{key:"getStrokeWidth",value:function(t,e,i){var n=0,r=this.w;return this.barCtx.isNullValue=void 0===this.barCtx.series[t][e]||null===this.barCtx.series[t][e],r.config.stroke.show&&(this.barCtx.isNullValue||(n=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[i]:this.barCtx.strokeWidth)),n}},{key:"barBackground",value:function(t){var e=t.bc,i=t.i,n=t.x1,r=t.x2,o=t.y1,a=t.y2,s=t.elSeries,l=this.w,h=new y(this.barCtx.ctx),u=new k(this.barCtx.ctx).getActiveConfigSeriesIndex();if(this.barCtx.barOptions.colors.backgroundBarColors.length>0&&u===i){e>=this.barCtx.barOptions.colors.backgroundBarColors.length&&(e=0);var c=h.drawRect(void 0!==n?n:0,void 0!==o?o:0,void 0!==r?r:l.globals.gridWidth,void 0!==a?a:l.globals.gridHeight,this.barCtx.barOptions.colors.backgroundBarRadius,this.barCtx.barOptions.colors.backgroundBarColors[e],this.barCtx.barOptions.colors.backgroundBarOpacity);s.add(c),c.node.classList.add("apexcharts-backgroundBar")}}},{key:"getColumnPaths",value:function(t){var e=t.barWidth,i=t.barXPosition,n=t.yRatio,r=t.y1,o=t.y2,a=t.strokeWidth,s=t.series,l=t.i,h=t.j,u=t.w,c=new y(this.barCtx.ctx);(a=Array.isArray(a)?a[l]:a)||(a=0);var p=this.getRoundedBars(u,{barWidth:e,strokeWidth:a,yRatio:n,barXPosition:i,y1:r,y2:o},s,l,h),d=i,f=i+e,g=c.move(d,p.y1),v=c.move(d,p.y1);return u.globals.previousPaths.length>0&&(v=this.barCtx.getPreviousPath(l,h,!1)),{pathTo:g=g+c.line(d,p.y2)+p.endingPath+c.line(f-a,p.y2)+c.line(f-a,p.y1)+p.startingPath+"z",pathFrom:v=v+c.line(d,r)+c.line(f-a,r)+c.line(f-a,r)+c.line(f-a,r)+c.line(d,r)}}},{key:"getBarpaths",value:function(t){var e=t.barYPosition,i=t.barHeight,n=t.x1,r=t.x2,o=t.strokeWidth,a=t.series,s=t.i,l=t.j,h=t.w,u=new y(this.barCtx.ctx);(o=Array.isArray(o)?o[s]:o)||(o=0);var c=this.getRoundedBars(h,{barHeight:i,strokeWidth:o,barYPosition:e,x2:r,x1:n},a,s,l),p=u.move(c.x1,e),d=u.move(c.x1,e);h.globals.previousPaths.length>0&&(d=this.barCtx.getPreviousPath(s,l,!1));var f=e,g=e+i;return{pathTo:p=p+u.line(c.x2,f)+c.endingPath+u.line(c.x2,g-o)+u.line(c.x1,g-o)+c.startingPath+"z",pathFrom:d=d+u.line(n,f)+u.line(n,g-o)+u.line(n,g-o)+u.line(n,g-o)+u.line(n,f)}}},{key:"getRoundedBars",value:function(t,e,i,n,r){var o=new y(this.barCtx.ctx),a=Array.isArray(e.strokeWidth)?e.strokeWidth[n]:e.strokeWidth;if(a||(a=0),this.barCtx.isHorizontal){var s=null,l="",h=e.x2,u=e.x1;if(void 0!==i[n][r]||null!==i[n][r]){var c=e.barHeight/2-a;switch(i[n][r]<0&&(c=-e.barHeight/2-a),c>Math.abs(h-u)&&(c=Math.abs(h-u)),"rounded"===this.barCtx.barOptions.endingShape&&(h=e.x2-c/2),"rounded"===this.barCtx.barOptions.startingShape&&(u=e.x1+c/2),this.barCtx.barOptions.endingShape){case"flat":s=o.line(h,e.barYPosition+e.barHeight-a);break;case"rounded":s=o.quadraticCurve(h+c,e.barYPosition+(e.barHeight-a)/2,h,e.barYPosition+e.barHeight-a)}switch(this.barCtx.barOptions.startingShape){case"flat":l=o.line(u,e.barYPosition+e.barHeight-a);break;case"rounded":l=o.quadraticCurve(u-c,e.barYPosition+e.barHeight/2,u,e.barYPosition)}}return{endingPath:s,startingPath:l,x2:h,x1:u}}var p=null,d="",f=e.y2,g=e.y1;if(void 0!==i[n][r]||null!==i[n][r]){var v=e.barWidth/2-a;switch(i[n][r]<0&&(v=-e.barWidth/2-a),v>Math.abs(f-g)&&(v=Math.abs(f-g)),"rounded"===this.barCtx.barOptions.endingShape&&(f+=v/2),"rounded"===this.barCtx.barOptions.startingShape&&(g-=v/2),this.barCtx.barOptions.endingShape){case"flat":p=o.line(e.barXPosition+e.barWidth-a,f);break;case"rounded":p=o.quadraticCurve(e.barXPosition+(e.barWidth-a)/2,f-v,e.barXPosition+e.barWidth-a,f)}switch(this.barCtx.barOptions.startingShape){case"flat":d=o.line(e.barXPosition+e.barWidth-a,g);break;case"rounded":d=o.quadraticCurve(e.barXPosition+(e.barWidth-a)/2,g+v,e.barXPosition,g)}}return{endingPath:p,startingPath:d,y2:f,y1:g}}}]),t}(),yt=function(){function t(i,n){e(this,t),this.ctx=i,this.w=i.w;var r=this.w;this.barOptions=r.config.plotOptions.bar,this.isHorizontal=this.barOptions.horizontal,this.strokeWidth=r.config.stroke.width,this.isNullValue=!1,this.isTimelineBar="datetime"===r.config.xaxis.type&&r.globals.seriesRangeBarTimeline.length,this.xyRatios=n,null!==this.xyRatios&&(this.xRatio=n.xRatio,this.initialXRatio=n.initialXRatio,this.yRatio=n.yRatio,this.invertedXRatio=n.invertedXRatio,this.invertedYRatio=n.invertedYRatio,this.baseLineY=n.baseLineY,this.baseLineInvertedY=n.baseLineInvertedY),this.yaxisIndex=0,this.seriesLen=0,this.barHelpers=new vt(this)}return n(t,[{key:"draw",value:function(t,e){var i=this.w,n=new y(this.ctx),r=new O(this.ctx,i);t=r.getLogSeries(t),this.series=t,this.yRatio=r.getLogYRatios(this.yRatio),this.barHelpers.initVariables(t);var o=n.group({class:"apexcharts-bar-series apexcharts-plot-series"});i.config.dataLabels.enabled&&this.totalItems>this.barOptions.dataLabels.maxItems&&console.warn("WARNING: DataLabels are enabled but there are too many to display. This may cause performance issue when rendering.");for(var s=0,l=0;s<t.length;s++,l++){var h,u,c,p,d=void 0,g=void 0,v=[],m=[],_=i.globals.comboCharts?e[s]:s,x=n.group({class:"apexcharts-series",rel:s+1,seriesName:f.escapeString(i.globals.seriesNames[_]),"data:realIndex":_});this.ctx.series.addCollapsedClassToSeries(x,_),t[s].length>0&&(this.visibleI=this.visibleI+1);var b=0,w=0;this.yRatio.length>1&&(this.yaxisIndex=_),this.isReversed=i.config.yaxis[this.yaxisIndex]&&i.config.yaxis[this.yaxisIndex].reversed;var S=this.barHelpers.initialPositions();g=S.y,b=S.barHeight,u=S.yDivision,p=S.zeroW,d=S.x,w=S.barWidth,h=S.xDivision,c=S.zeroH,this.horizontal||m.push(d+w/2);for(var C=n.group({class:"apexcharts-datalabels","data:realIndex":_}),E=0;E<i.globals.dataPoints;E++){var T=this.barHelpers.getStrokeWidth(s,E,_),P=null,L={indexes:{i:s,j:E,realIndex:_,bc:l},x:d,y:g,strokeWidth:T,elSeries:x};this.isHorizontal?(P=this.drawBarPaths(a({},L,{barHeight:b,zeroW:p,yDivision:u})),w=this.series[s][E]/this.invertedYRatio):(P=this.drawColumnPaths(a({},L,{xDivision:h,barWidth:w,zeroH:c})),b=this.series[s][E]/this.yRatio[this.yaxisIndex]),g=P.y,d=P.x,E>0&&m.push(d+w/2),v.push(g);var I=this.barHelpers.getPathFillColor(t,s,E,_);this.renderSeries({realIndex:_,pathFill:I,j:E,i:s,pathFrom:P.pathFrom,pathTo:P.pathTo,strokeWidth:T,elSeries:x,x:d,y:g,series:t,barHeight:b,barWidth:w,elDataLabelsWrap:C,visibleSeries:this.visibleI,type:"bar"})}i.globals.seriesXvalues[_]=m,i.globals.seriesYvalues[_]=v,o.add(x)}return o}},{key:"renderSeries",value:function(t){var e=t.realIndex,i=t.pathFill,n=t.lineFill,r=t.j,o=t.i,a=t.pathFrom,s=t.pathTo,l=t.strokeWidth,h=t.elSeries,u=t.x,c=t.y,p=t.y1,d=t.y2,f=t.series,v=t.barHeight,m=t.barWidth,_=t.barYPosition,x=t.elDataLabelsWrap,b=t.visibleSeries,w=t.type,S=this.w,C=new y(this.ctx);n||(n=this.barOptions.distributed?S.globals.stroke.colors[r]:S.globals.stroke.colors[e]),S.config.series[o].data[r]&&S.config.series[o].data[r].strokeColor&&(n=S.config.series[o].data[r].strokeColor),this.isNullValue&&(i="none");var E=C.renderPaths({i:o,j:r,realIndex:e,pathFrom:a,pathTo:s,stroke:n,strokeWidth:l,strokeLineCap:S.config.stroke.lineCap,fill:i,animationDelay:r/S.config.chart.animations.animateGradually.delay*(S.config.chart.animations.speed/S.globals.dataPoints)/2.4,initialSpeed:S.config.chart.animations.speed,dataChangeSpeed:S.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(w,"-area")});E.attr("clip-path","url(#gridRectMask".concat(S.globals.cuid,")")),void 0!==p&&void 0!==d&&(E.attr("data-range-y1",p),E.attr("data-range-y2",d)),new g(this.ctx).setSelectionFilter(E,e,r),h.add(E);var T=new gt(this).handleBarDataLabels({x:u,y:c,y1:p,y2:d,i:o,j:r,series:f,realIndex:e,barHeight:v,barWidth:m,barYPosition:_,renderedPath:E,visibleSeries:b});return null!==T&&x.add(T),h.add(x),h}},{key:"drawBarPaths",value:function(t){var e=t.indexes,i=t.barHeight,n=t.zeroW,r=t.x,o=t.y,a=t.yDivision,s=t.elSeries,l=this.w,h=e.i,u=e.j,c=e.bc;l.globals.isXNumeric&&(o=(l.globals.seriesX[h][u]-l.globals.minX)/this.invertedXRatio-i);var p=o+i*this.visibleI,d=this.barHelpers.getBarpaths({barYPosition:p,barHeight:i,x1:n,x2:r=void 0===this.series[h][u]||null===this.series[h][u]?n:n+this.series[h][u]/this.invertedYRatio-2*(this.isReversed?this.series[h][u]/this.invertedYRatio:0),strokeWidth:t.strokeWidth,series:this.series,i:h,j:u,w:l});return l.globals.isXNumeric||(o+=a),this.barHelpers.barBackground({bc:c,i:h,y1:p-i*this.visibleI,y2:i*this.seriesLen,elSeries:s}),{pathTo:d.pathTo,pathFrom:d.pathFrom,x:r,y:o,barYPosition:p}}},{key:"drawColumnPaths",value:function(t){var e=t.indexes,i=t.x,n=t.y,r=t.xDivision,o=t.barWidth,a=t.zeroH,s=t.strokeWidth,l=t.elSeries,h=this.w,u=e.i,c=e.j,p=e.bc;if(h.globals.isXNumeric){var d=u;h.globals.seriesX[u].length||(d=h.globals.maxValsInArrayIndex),i=(h.globals.seriesX[d][c]-h.globals.minX)/this.xRatio-o*this.seriesLen/2}var f=i+o*this.visibleI,g=this.barHelpers.getColumnPaths({barXPosition:f,barWidth:o,y1:a,y2:n=void 0===this.series[u][c]||null===this.series[u][c]?a:a-this.series[u][c]/this.yRatio[this.yaxisIndex]+2*(this.isReversed?this.series[u][c]/this.yRatio[this.yaxisIndex]:0),strokeWidth:s,series:this.series,i:u,j:c,w:h});return h.globals.isXNumeric||(i+=r),this.barHelpers.barBackground({bc:p,i:u,x1:f-s/2-o*this.visibleI,x2:o*this.seriesLen+s/2,elSeries:l}),{pathTo:g.pathTo,pathFrom:g.pathFrom,x:i,y:n,barXPosition:f}}},{key:"getPreviousPath",value:function(t,e){for(var i,n=this.w,r=0;r<n.globals.previousPaths.length;r++){var o=n.globals.previousPaths[r];o.paths&&o.paths.length>0&&parseInt(o.realIndex,10)===parseInt(t,10)&&void 0!==n.globals.previousPaths[r].paths[e]&&(i=n.globals.previousPaths[r].paths[e].d)}return i}}]),t}(),mt=function(t){function i(){return e(this,i),u(this,l(i).apply(this,arguments))}return s(i,yt),n(i,[{key:"draw",value:function(t,e){var i=this,n=this.w;this.graphics=new y(this.ctx),this.bar=new yt(this.ctx,this.xyRatios);var r=new O(this.ctx,n);t=r.getLogSeries(t),this.yRatio=r.getLogYRatios(this.yRatio),this.barHelpers.initVariables(t),"100%"===n.config.chart.stackType&&(t=n.globals.seriesPercent.slice()),this.series=t,this.totalItems=0,this.prevY=[],this.prevX=[],this.prevYF=[],this.prevXF=[],this.prevYVal=[],this.prevXVal=[],this.xArrj=[],this.xArrjF=[],this.xArrjVal=[],this.yArrj=[],this.yArrjF=[],this.yArrjVal=[];for(var o=0;o<t.length;o++)t[o].length>0&&(this.totalItems+=t[o].length);for(var s=this.graphics.group({class:"apexcharts-bar-series apexcharts-plot-series"}),l=0,h=0,u=function(r,o){var u=void 0,c=void 0,p=void 0,d=void 0,g=[],v=[],y=n.globals.comboCharts?e[r]:r;i.yRatio.length>1&&(i.yaxisIndex=y),i.isReversed=n.config.yaxis[i.yaxisIndex]&&n.config.yaxis[i.yaxisIndex].reversed;var m=i.graphics.group({class:"apexcharts-series",seriesName:f.escapeString(n.globals.seriesNames[y]),rel:r+1,"data:realIndex":y}),_=i.graphics.group({class:"apexcharts-datalabels","data:realIndex":y}),x=0,b=0,w=i.initialPositions(l,h,u,c,p,d);h=w.y,x=w.barHeight,c=w.yDivision,d=w.zeroW,l=w.x,b=w.barWidth,u=w.xDivision,p=w.zeroH,i.yArrj=[],i.yArrjF=[],i.yArrjVal=[],i.xArrj=[],i.xArrjF=[],i.xArrjVal=[],1===i.prevY.length&&i.prevY[0].every(function(t){return isNaN(t)})&&(i.prevY[0]=i.prevY[0].map(function(t){return p}),i.prevYF[0]=i.prevYF[0].map(function(t){return 0}));for(var S=0;S<n.globals.dataPoints;S++){var C=i.barHelpers.getStrokeWidth(r,S,y),E={indexes:{i:r,j:S,realIndex:y,bc:o},strokeWidth:C,x:l,y:h,elSeries:m},T=null;i.isHorizontal?(T=i.drawStackedBarPaths(a({},E,{zeroW:d,barHeight:x,yDivision:c})),b=i.series[r][S]/i.invertedYRatio):(T=i.drawStackedColumnPaths(a({},E,{xDivision:u,barWidth:b,zeroH:p})),x=i.series[r][S]/i.yRatio[i.yaxisIndex]),h=T.y,g.push(l=T.x),v.push(h);var P=i.barHelpers.getPathFillColor(t,r,S,y);m=i.renderSeries({realIndex:y,pathFill:P,j:S,i:r,pathFrom:T.pathFrom,pathTo:T.pathTo,strokeWidth:C,elSeries:m,x:l,y:h,series:t,barHeight:x,barWidth:b,elDataLabelsWrap:_,type:"bar",visibleSeries:0})}n.globals.seriesXvalues[y]=g,n.globals.seriesYvalues[y]=v,i.prevY.push(i.yArrj),i.prevYF.push(i.yArrjF),i.prevYVal.push(i.yArrjVal),i.prevX.push(i.xArrj),i.prevXF.push(i.xArrjF),i.prevXVal.push(i.xArrjVal),s.add(m)},c=0,p=0;c<t.length;c++,p++)u(c,p);return s}},{key:"initialPositions",value:function(t,e,i,n,r,o){var a,s,l=this.w;return this.isHorizontal?(a=(a=n=l.globals.gridHeight/l.globals.dataPoints)*parseInt(l.config.plotOptions.bar.barHeight,10)/100,o=this.baseLineInvertedY+l.globals.padHorizontal+(this.isReversed?l.globals.gridWidth:0)-(this.isReversed?2*this.baseLineInvertedY:0),e=(n-a)/2):(s=i=l.globals.gridWidth/l.globals.dataPoints,s=l.globals.isXNumeric?(i=l.globals.minXDiff/this.xRatio)*parseInt(this.barOptions.columnWidth,10)/100:s*parseInt(l.config.plotOptions.bar.columnWidth,10)/100,r=this.baseLineY[this.yaxisIndex]+(this.isReversed?l.globals.gridHeight:0)-(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),t=l.globals.padHorizontal+(i-s)/2),{x:t,y:e,yDivision:n,xDivision:i,barHeight:a,barWidth:s,zeroH:r,zeroW:o}}},{key:"drawStackedBarPaths",value:function(t){for(var e,i=t.indexes,n=t.barHeight,r=t.strokeWidth,o=t.zeroW,a=t.x,s=t.y,l=t.yDivision,h=t.elSeries,u=this.w,c=s,p=i.i,d=i.j,f=i.bc,g=0,v=0;v<this.prevXF.length;v++)g+=this.prevXF[v][d];if(p>0){var y=o;this.prevXVal[p-1][d]<0?y=this.series[p][d]>=0?this.prevX[p-1][d]+g-2*(this.isReversed?g:0):this.prevX[p-1][d]:this.prevXVal[p-1][d]>=0&&(y=this.series[p][d]>=0?this.prevX[p-1][d]:this.prevX[p-1][d]-g+2*(this.isReversed?g:0)),e=y}else e=o;this.xArrj.push(a=null===this.series[p][d]?e:e+this.series[p][d]/this.invertedYRatio-2*(this.isReversed?this.series[p][d]/this.invertedYRatio:0)),this.xArrjF.push(Math.abs(e-a)),this.xArrjVal.push(this.series[p][d]);var m=this.barHelpers.getBarpaths({barYPosition:c,barHeight:n,x1:e,x2:a,strokeWidth:r,series:this.series,i:p,j:d,w:u});return this.barHelpers.barBackground({bc:f,i:p,y1:c,y2:n,elSeries:h}),s+=l,{pathTo:m.pathTo,pathFrom:m.pathFrom,x:a,y:s}}},{key:"drawStackedColumnPaths",value:function(t){var e=t.indexes,i=t.x,n=t.y,r=t.xDivision,o=t.barWidth,a=t.zeroH,s=t.elSeries,l=this.w,h=e.i,u=e.j,c=e.bc;if(l.globals.isXNumeric){var p=l.globals.seriesX[h][u];p||(p=0),i=(p-l.globals.minX)/this.xRatio-o/2}for(var d,f=i,g=0,v=0;v<this.prevYF.length;v++)g+=isNaN(this.prevYF[v][u])?0:this.prevYF[v][u];if(h>0&&!l.globals.isXNumeric||h>0&&l.globals.isXNumeric&&l.globals.seriesX[h-1][u]===l.globals.seriesX[h][u]){var y,m,_=Math.min(this.yRatio.length+1,h+1);if(void 0!==this.prevY[h-1])for(var x=1;x<_;x++)if(!isNaN(this.prevY[h-x][u])){m=this.prevY[h-x][u];break}for(var b=1;b<_;b++){if(this.prevYVal[h-b][u]<0){y=this.series[h][u]>=0?m-g+2*(this.isReversed?g:0):m;break}if(this.prevYVal[h-b][u]>=0){y=this.series[h][u]>=0?m:m+g-2*(this.isReversed?g:0);break}}void 0===y&&(y=l.globals.gridHeight),d=this.prevYF[0].every(function(t){return 0===t})&&this.prevYF.slice(1,h).every(function(t){return t.every(function(t){return isNaN(t)})})?l.globals.gridHeight-a:y}else d=l.globals.gridHeight-a;this.yArrj.push(n=d-this.series[h][u]/this.yRatio[this.yaxisIndex]+2*(this.isReversed?this.series[h][u]/this.yRatio[this.yaxisIndex]:0)),this.yArrjF.push(Math.abs(d-n)),this.yArrjVal.push(this.series[h][u]);var w=this.barHelpers.getColumnPaths({barXPosition:f,barWidth:o,y1:d,y2:n,yRatio:this.yRatio[this.yaxisIndex],strokeWidth:this.strokeWidth,series:this.series,i:h,j:u,w:l});return this.barHelpers.barBackground({bc:c,i:h,x1:f,x2:o,elSeries:s}),i+=r,{pathTo:w.pathTo,pathFrom:w.pathFrom,x:l.globals.isXNumeric?i-r:i,y:n}}}]),i}(),_t=function(t){function i(){return e(this,i),u(this,l(i).apply(this,arguments))}return s(i,yt),n(i,[{key:"draw",value:function(t,e){var i=this.w,n=new y(this.ctx),r=new A(this.ctx);this.candlestickOptions=this.w.config.plotOptions.candlestick;var o=new O(this.ctx,i);t=o.getLogSeries(t),this.series=t,this.yRatio=o.getLogYRatios(this.yRatio),this.barHelpers.initVariables(t);for(var a=n.group({class:"apexcharts-candlestick-series apexcharts-plot-series"}),s=0;s<t.length;s++){var l,h,u=void 0,c=void 0,p=[],d=[],g=i.globals.comboCharts?e[s]:s,v=n.group({class:"apexcharts-series",seriesName:f.escapeString(i.globals.seriesNames[g]),rel:s+1,"data:realIndex":g});t[s].length>0&&(this.visibleI=this.visibleI+1);var m,_;this.yRatio.length>1&&(this.yaxisIndex=g);var x=this.barHelpers.initialPositions();c=x.y,m=x.barHeight,l=x.xDivision,h=x.zeroH,d.push((u=x.x)+(_=x.barWidth)/2);for(var b=n.group({class:"apexcharts-datalabels","data:realIndex":g}),w=0;w<i.globals.dataPoints;w++){var S,C=this.barHelpers.getStrokeWidth(s,w,g),E=this.drawCandleStickPaths({indexes:{i:s,j:w,realIndex:g},x:u,y:c,xDivision:l,barWidth:_,zeroH:h,strokeWidth:C,elSeries:v});c=E.y,u=E.x,S=E.color,w>0&&d.push(u+_/2),p.push(c);var T=r.fillPath({seriesNumber:g,dataPointIndex:w,color:S,value:t[s][w]});this.renderSeries({realIndex:g,pathFill:T,lineFill:this.candlestickOptions.wick.useFillColor?S:void 0,j:w,i:s,pathFrom:E.pathFrom,pathTo:E.pathTo,strokeWidth:C,elSeries:v,x:u,y:c,series:t,barHeight:m,barWidth:_,elDataLabelsWrap:b,visibleSeries:this.visibleI,type:"candlestick"})}i.globals.seriesXvalues[g]=d,i.globals.seriesYvalues[g]=p,a.add(v)}return a}},{key:"drawCandleStickPaths",value:function(t){var e=t.indexes,i=t.x,n=t.xDivision,r=t.barWidth,o=t.zeroH,a=t.strokeWidth,s=this.w,l=new y(this.ctx),h=e.i,u=e.j,c=!0,p=s.config.plotOptions.candlestick.colors.upward,d=s.config.plotOptions.candlestick.colors.downward,f=this.yRatio[this.yaxisIndex],g=e.realIndex,v=this.getOHLCValue(g,u),m=o,_=o;v.o>v.c&&(c=!1);var x=Math.min(v.o,v.c),b=Math.max(v.o,v.c);s.globals.isXNumeric&&(i=(s.globals.seriesX[g][u]-s.globals.minX)/this.xRatio-r/2);var w=i+r*this.visibleI;void 0===this.series[h][u]||null===this.series[h][u]?x=o:(x=o-x/f,b=o-b/f,m=o-v.h/f,_=o-v.l/f);var S=l.move(w,o),C=l.move(w,x);return s.globals.previousPaths.length>0&&(C=this.getPreviousPath(g,u,!0)),S=l.move(w,b)+l.line(w+r/2,b)+l.line(w+r/2,m)+l.line(w+r/2,b)+l.line(w+r,b)+l.line(w+r,x)+l.line(w+r/2,x)+l.line(w+r/2,_)+l.line(w+r/2,x)+l.line(w,x)+l.line(w,b-a/2),C+=l.move(w,x),s.globals.isXNumeric||(i+=n),{pathTo:S,pathFrom:C,x:i,y:b,barXPosition:w,color:c?p:d}}},{key:"getOHLCValue",value:function(t,e){var i=this.w;return{o:i.globals.seriesCandleO[t][e],h:i.globals.seriesCandleH[t][e],l:i.globals.seriesCandleL[t][e],c:i.globals.seriesCandleC[t][e]}}}]),i}(),xt=function(){function t(i,n){e(this,t),this.ctx=i,this.w=i.w,this.xRatio=n.xRatio,this.yRatio=n.yRatio,this.negRange=!1,this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.rectRadius=this.w.config.plotOptions.heatmap.radius,this.strokeWidth=this.w.config.stroke.show?this.w.config.stroke.width:0}return n(t,[{key:"draw",value:function(t){var e=this.w,i=new y(this.ctx),n=i.group({class:"apexcharts-heatmap"});n.attr("clip-path","url(#gridRectMask".concat(e.globals.cuid,")"));var r=e.globals.gridWidth/e.globals.dataPoints,o=e.globals.gridHeight/e.globals.series.length,a=0,s=!1;this.checkColorRange();var l=t.slice();e.config.yaxis[0].reversed&&(s=!0,l.reverse());for(var h=s?0:l.length-1;s?h<l.length:h>=0;s?h++:h--){var u=i.group({class:"apexcharts-series apexcharts-heatmap-series",seriesName:f.escapeString(e.globals.seriesNames[h]),rel:h+1,"data:realIndex":h});if(e.config.chart.dropShadow.enabled){var c=e.config.chart.dropShadow;new g(this.ctx).dropShadow(u,c,h)}for(var p=0,d=0;d<l[h].length;d++){var v=1,m=e.config.plotOptions.heatmap.shadeIntensity,_=this.determineHeatColor(h,d);v=e.globals.hasNegs||this.negRange?e.config.plotOptions.heatmap.reverseNegativeShade?_.percent<0?_.percent/100*(1.25*m):1.25*m*(1-_.percent/100):_.percent<=0?1-(1+_.percent/100)*m:(1-_.percent/100)*m:1-_.percent/100;var x=_.color,b=new f;e.config.plotOptions.heatmap.enableShades&&(v<0&&(v=0),x=f.hexToRgba(b.shadeColor(v,_.color),e.config.fill.opacity)),"image"===e.config.fill.type&&(x=new A(this.ctx).fillPath({seriesNumber:h,dataPointIndex:d,opacity:e.globals.hasNegs?_.percent<0?1-(1+_.percent/100):m+_.percent/100:_.percent/100,patternID:f.randomId(),width:e.config.fill.image.width?e.config.fill.image.width:r,height:e.config.fill.image.height?e.config.fill.image.height:o}));var w=i.drawRect(p,a,r,o,this.rectRadius);if(w.attr({cx:p,cy:a}),w.node.classList.add("apexcharts-heatmap-rect"),u.add(w),w.attr({fill:x,i:h,index:h,j:d,val:l[h][d],"stroke-width":this.strokeWidth,stroke:e.config.plotOptions.heatmap.useFillColorAsStroke?x:e.globals.stroke.colors[0],color:x}),w.node.addEventListener("mouseenter",i.pathMouseEnter.bind(this,w)),w.node.addEventListener("mouseleave",i.pathMouseLeave.bind(this,w)),w.node.addEventListener("mousedown",i.pathMouseDown.bind(this,w)),e.config.chart.animations.enabled&&!e.globals.dataChanged){var S=1;e.globals.resized||(S=e.config.chart.animations.speed),this.animateHeatMap(w,p,a,r,o,S)}if(e.globals.dataChanged){var C=1;if(this.dynamicAnim.enabled&&e.globals.shouldAnimate){C=this.dynamicAnim.speed;var E=e.globals.previousPaths[h]&&e.globals.previousPaths[h][d]&&e.globals.previousPaths[h][d].color;E||(E="rgba(255, 255, 255, 0)"),this.animateHeatColor(w,f.isColorHex(E)?E:f.rgb2hex(E),f.isColorHex(x)?x:f.rgb2hex(x),C)}}var T=this.calculateHeatmapDataLabels({x:p,y:a,i:h,j:d,heatColorProps:_,series:l,rectHeight:o,rectWidth:r});null!==T&&u.add(T),p+=r}a+=o,n.add(u)}var P=e.globals.yAxisScale[0].result.slice();return e.config.yaxis[0].reversed?P.unshift(""):P.push(""),e.globals.yAxisScale[0].result=P,e.config.yaxis[0].labels.offsetY=-e.globals.gridHeight/e.globals.series.length/2,n}},{key:"checkColorRange",value:function(){var t=this,e=this.w.config.plotOptions.heatmap;e.colorScale.ranges.length>0&&e.colorScale.ranges.map(function(e,i){e.from<=0&&(t.negRange=!0)})}},{key:"determineHeatColor",value:function(t,e){var i=this.w,n=i.globals.series[t][e],r=i.config.plotOptions.heatmap,o=i.globals.colors[r.colorScale.inverse?e:t],a=null,s=Math.min.apply(Math,c(i.globals.series[t])),l=Math.max.apply(Math,c(i.globals.series[t]));r.distributed||(s=i.globals.minY,l=i.globals.maxY),void 0!==r.colorScale.min&&(s=r.colorScale.min<i.globals.minY?r.colorScale.min:i.globals.minY,l=r.colorScale.max>i.globals.maxY?r.colorScale.max:i.globals.maxY);var h=Math.abs(l)+Math.abs(s),u=100*n/(0===h?h-1e-6:h);return r.colorScale.ranges.length>0&&r.colorScale.ranges.map(function(t,e){if(n>=t.from&&n<=t.to){o=t.color,a=t.foreColor?t.foreColor:null,s=t.from,l=t.to;var i=Math.abs(l)+Math.abs(s);u=100*n/(0===i?i-1e-6:i)}}),{color:o,foreColor:a,percent:u}}},{key:"calculateHeatmapDataLabels",value:function(t){var e=t.x,i=t.y,n=t.i,r=t.j,o=t.heatColorProps,a=t.rectHeight,s=t.rectWidth,l=this.w,h=l.config.dataLabels,u=new y(this.ctx),c=new F(this.ctx),p=h.formatter,d=null;if(h.enabled){d=u.group({class:"apexcharts-data-labels"});var f=h.offsetY,g=e+s/2+h.offsetX,v=i+a/2+parseFloat(h.style.fontSize)/3+f,m=p(l.globals.series[n][r],{seriesIndex:n,dataPointIndex:r,w:l});c.plotDataLabelsText({x:g,y:v,text:m,i:n,j:r,color:o.foreColor,parent:d,dataLabelsConfig:h})}return d}},{key:"animateHeatMap",value:function(t,e,i,n,r,o){var a=new v(this.ctx);a.animateRect(t,{x:e+n/2,y:i+r/2,width:0,height:0},{x:e,y:i,width:n,height:r},o,function(){a.animationCompleted(t)})}},{key:"animateHeatColor",value:function(t,e,i,n){t.attr({fill:e}).animate(n).attr({fill:i})}}]),t}(),bt=function(){function t(i){e(this,t),this.ctx=i,this.w=i.w,this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animDur=0;var n=this.w;this.graphics=new y(this.ctx),this.lineColorArr=void 0!==n.globals.stroke.colors?n.globals.stroke.colors:n.globals.colors,this.defaultSize=n.globals.svgHeight<n.globals.svgWidth?n.globals.gridHeight+1.5*n.globals.goldenPadding:n.globals.gridWidth,this.maxValue=this.w.globals.maxY,this.minValue=this.w.globals.minY,this.polygons=n.config.plotOptions.radar.polygons;var r=n.globals.labels.slice().sort(function(t,e){return e.length-t.length})[0],o=this.graphics.getTextRects(r,n.config.xaxis.labels.style.fontSize);this.strokeWidth=n.config.stroke.show?n.config.stroke.width:0,this.size=this.defaultSize/2.1-this.strokeWidth-n.config.chart.dropShadow.blur,n.config.xaxis.labels.show&&(this.size=this.size-o.width/1.75),void 0!==n.config.plotOptions.radar.size&&(this.size=n.config.plotOptions.radar.size),this.dataRadiusOfPercent=[],this.dataRadius=[],this.angleArr=[],this.yaxisLabelsTextsPos=[]}return n(t,[{key:"draw",value:function(t){var e=this,i=this.w,n=new A(this.ctx),r=[],o=new F(this.ctx);t.length&&(this.dataPointsLen=t[i.globals.maxValsInArrayIndex].length),this.disAngle=2*Math.PI/this.dataPointsLen;var s=i.globals.gridHeight/2+i.config.plotOptions.radar.offsetY,l=this.graphics.group({class:"apexcharts-radar-series apexcharts-plot-series",transform:"translate(".concat(i.globals.gridWidth/2+i.config.plotOptions.radar.offsetX||0,", ").concat(s||0,")")}),h=[],u=null,c=null;if(this.yaxisLabels=this.graphics.group({class:"apexcharts-yaxis"}),t.forEach(function(t,s){var l=t.length===i.globals.dataPoints,p=e.graphics.group().attr({class:"apexcharts-series","data:longestSeries":l,seriesName:f.escapeString(i.globals.seriesNames[s]),rel:s+1,"data:realIndex":s});e.dataRadiusOfPercent[s]=[],e.dataRadius[s]=[],e.angleArr[s]=[],t.forEach(function(t,i){var n=Math.abs(e.maxValue-e.minValue);t+=Math.abs(e.minValue),e.dataRadiusOfPercent[s][i]=t/n,e.dataRadius[s][i]=e.dataRadiusOfPercent[s][i]*e.size,e.angleArr[s][i]=i*e.disAngle}),h=e.getDataPointsPos(e.dataRadius[s],e.angleArr[s]);var d=e.createPaths(h,{x:0,y:0});u=e.graphics.group({class:"apexcharts-series-markers-wrap apexcharts-element-hidden"}),c=e.graphics.group({class:"apexcharts-datalabels","data:realIndex":s}),i.globals.delayedElements.push({el:u.node,index:s});var v={i:s,realIndex:s,animationDelay:s,initialSpeed:i.config.chart.animations.speed,dataChangeSpeed:i.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-radar",shouldClipToGrid:!1,bindEventsOnPaths:!1,stroke:i.globals.stroke.colors[s],strokeLineCap:i.config.stroke.lineCap},y=null;i.globals.previousPaths.length>0&&(y=e.getPreviousPath(s));for(var m=0;m<d.linePathsTo.length;m++){var _=e.graphics.renderPaths(a({},v,{pathFrom:null===y?d.linePathsFrom[m]:y,pathTo:d.linePathsTo[m],strokeWidth:Array.isArray(e.strokeWidth)?e.strokeWidth[s]:e.strokeWidth,fill:"none",drawShadow:!1}));p.add(_);var x=n.fillPath({seriesNumber:s}),b=e.graphics.renderPaths(a({},v,{pathFrom:null===y?d.areaPathsFrom[m]:y,pathTo:d.areaPathsTo[m],strokeWidth:0,fill:x,drawShadow:!1}));if(i.config.chart.dropShadow.enabled){var w=new g(e.ctx),S=i.config.chart.dropShadow;w.dropShadow(b,Object.assign({},S,{noUserSpaceOnUse:!0}),s)}p.add(b)}t.forEach(function(t,n){var r=new R(e.ctx).getMarkerConfig("apexcharts-marker",s,n),l=e.graphics.drawMarker(h[n].x,h[n].y,r);l.attr("rel",n),l.attr("j",n),l.attr("index",s),l.node.setAttribute("default-marker-size",r.pSize);var d=e.graphics.group({class:"apexcharts-series-markers"});d&&d.add(l),u.add(d),p.add(u),i.config.dataLabels.enabled&&o.plotDataLabelsText({x:h[n].x,y:h[n].y,text:i.globals.series[s][n],textAnchor:"middle",i:s,j:s,parent:c,offsetCorrection:!1,dataLabelsConfig:a({},i.config.dataLabels)}),p.add(c)}),r.push(p)}),this.drawPolygons({parent:l}),i.config.xaxis.labels.show){var p=this.drawXAxisTexts();l.add(p)}return l.add(this.yaxisLabels),r.forEach(function(t){l.add(t)}),l}},{key:"drawPolygons",value:function(t){for(var e=this,i=this.w,n=t.parent,r=i.globals.yAxisScale[0].result.reverse(),o=r.length,a=[],s=this.size/(o-1),l=0;l<o;l++)a[l]=s*l;a.reverse();var h=[],u=[];a.forEach(function(t,i){var n="";e.getPolygonPos(t).forEach(function(t,r){if(0===i){var o=e.graphics.drawLine(t.x,t.y,0,0,Array.isArray(e.polygons.connectorColors)?e.polygons.connectorColors[r]:e.polygons.connectorColors);u.push(o)}0===r&&e.yaxisLabelsTextsPos.push({x:t.x,y:t.y}),n+=t.x+","+t.y+" "}),h.push(n)}),h.forEach(function(t,r){var o=e.polygons.strokeColors,a=e.graphics.drawPolygon(t,Array.isArray(o)?o[r]:o,i.globals.radarPolygons.fill.colors[r]);n.add(a)}),u.forEach(function(t){n.add(t)}),i.config.yaxis[0].show&&this.yaxisLabelsTextsPos.forEach(function(t,i){var n=e.drawYAxisTexts(t.x,t.y,i,r[i]);e.yaxisLabels.add(n)})}},{key:"drawYAxisTexts",value:function(t,e,i,n){var r=this.w,o=r.config.yaxis[0];return this.graphics.drawText({x:t+o.labels.offsetX,y:e+o.labels.offsetY,text:(0,r.globals.yLabelFormatters[0])(n,i),textAnchor:"middle",fontSize:o.labels.style.fontSize,fontFamily:o.labels.style.fontFamily,foreColor:o.labels.style.color})}},{key:"drawXAxisTexts",value:function(){var t=this,e=this.w,i=e.config.xaxis.labels,n=this.graphics.group({class:"apexcharts-xaxis"}),r=this.getPolygonPos(this.size);return e.globals.labels.forEach(function(o,s){var l=e.config.xaxis.labels.formatter,h=new F(t.ctx);if(r[s]){var u=t.getTextPos(r[s],t.size),c=l(o,{seriesIndex:-1,dataPointIndex:s,w:e});h.plotDataLabelsText({x:u.newX,y:u.newY,text:c,textAnchor:u.textAnchor,i:s,j:s,parent:n,color:i.style.colors[s]?i.style.colors[s]:"#a8a8a8",dataLabelsConfig:a({textAnchor:u.textAnchor,dropShadow:{enabled:!1}},i),offsetCorrection:!1})}}),n}},{key:"createPaths",value:function(t,e){var i=this,n=[],r=[],o=[],a=[];if(t.length){r=[this.graphics.move(e.x,e.y)],a=[this.graphics.move(e.x,e.y)];var s=this.graphics.move(t[0].x,t[0].y),l=this.graphics.move(t[0].x,t[0].y);t.forEach(function(e,n){s+=i.graphics.line(e.x,e.y),l+=i.graphics.line(e.x,e.y),n===t.length-1&&(s+="Z",l+="Z")}),n.push(s),o.push(l)}return{linePathsFrom:r,linePathsTo:n,areaPathsFrom:a,areaPathsTo:o}}},{key:"getTextPos",value:function(t,e){var i="middle",n=t.x,r=t.y;return Math.abs(t.x)>=10?t.x>0?(i="start",n+=10):t.x<0&&(i="end",n-=10):i="middle",Math.abs(t.y)>=e-10&&(t.y<0?r-=10:t.y>0&&(r+=10)),{textAnchor:i,newX:n,newY:r}}},{key:"getPreviousPath",value:function(t){for(var e=this.w,i=null,n=0;n<e.globals.previousPaths.length;n++){var r=e.globals.previousPaths[n];r.paths.length>0&&parseInt(r.realIndex,10)===parseInt(t,10)&&void 0!==e.globals.previousPaths[n].paths[0]&&(i=e.globals.previousPaths[n].paths[0].d)}return i}},{key:"getDataPointsPos",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.dataPointsLen;t=t||[],e=e||[];for(var n=[],r=0;r<i;r++){var o={};o.x=t[r]*Math.sin(e[r]),o.y=-t[r]*Math.cos(e[r]),n.push(o)}return n}},{key:"getPolygonPos",value:function(t){for(var e=[],i=2*Math.PI/this.dataPointsLen,n=0;n<this.dataPointsLen;n++){var r={};r.x=t*Math.sin(n*i),r.y=-t*Math.cos(n*i),e.push(r)}return e}}]),t}(),wt=function(t){function i(t){var n;e(this,i),(n=u(this,l(i).call(this,t))).ctx=t,n.w=t.w,n.animBeginArr=[0],n.animDur=0;var r=n.w;return n.startAngle=r.config.plotOptions.radialBar.startAngle,n.endAngle=r.config.plotOptions.radialBar.endAngle,n.totalAngle=Math.abs(r.config.plotOptions.radialBar.endAngle-r.config.plotOptions.radialBar.startAngle),n.trackStartAngle=r.config.plotOptions.radialBar.track.startAngle,n.trackEndAngle=r.config.plotOptions.radialBar.track.endAngle,n.radialDataLabels=r.config.plotOptions.radialBar.dataLabels,n.trackStartAngle||(n.trackStartAngle=n.startAngle),n.trackEndAngle||(n.trackEndAngle=n.endAngle),360===n.endAngle&&(n.endAngle=359.99),n.fullAngle=360-r.config.plotOptions.radialBar.endAngle-r.config.plotOptions.radialBar.startAngle,n.margin=parseInt(r.config.plotOptions.radialBar.track.margin,10),n}return s(i,nt),n(i,[{key:"draw",value:function(t){var e=this.w,i=new y(this.ctx),n=i.group({class:"apexcharts-radialbar"});if(e.globals.noData)return n;var r=i.group(),o=this.defaultSize/2,a=e.globals.gridWidth/2,s=this.defaultSize/2.05;e.config.chart.sparkline.enabled||(s=s-e.config.stroke.width-e.config.chart.dropShadow.blur);var l=e.globals.fill.colors;if(e.config.plotOptions.radialBar.track.show){var h=this.drawTracks({size:s,centerX:a,centerY:o,colorArr:l,series:t});r.add(h)}var u=this.drawArcs({size:s,centerX:a,centerY:o,colorArr:l,series:t}),c=360;e.config.plotOptions.radialBar.startAngle<0&&(c=this.totalAngle);var p=(360-c)/360;if(e.globals.radialSize=s-s*p,this.radialDataLabels.value.show){var d=Math.max(this.radialDataLabels.value.offsetY,this.radialDataLabels.name.offsetY);e.globals.radialSize+=d*p}return r.add(u.g),"front"===e.config.plotOptions.radialBar.hollow.position&&(u.g.add(u.elHollow),u.dataLabels&&u.g.add(u.dataLabels)),n.add(r),n}},{key:"drawTracks",value:function(t){var e=this.w,i=new y(this.ctx),n=i.group({class:"apexcharts-tracks"}),r=new g(this.ctx),o=new A(this.ctx),a=this.getStrokeWidth(t);t.size=t.size-a/2;for(var s=0;s<t.series.length;s++){var l=i.group({class:"apexcharts-radialbar-track apexcharts-track"});n.add(l),l.attr({rel:s+1}),t.size=t.size-a-this.margin;var h=e.config.plotOptions.radialBar.track,u=o.fillPath({seriesNumber:0,size:t.size,fillColors:Array.isArray(h.background)?h.background[s]:h.background,solid:!0}),c=this.trackStartAngle,p=this.trackEndAngle;Math.abs(p)+Math.abs(c)>=360&&(p=360-Math.abs(this.startAngle)-.1);var d=i.drawPath({d:"",stroke:u,strokeWidth:a*parseInt(h.strokeWidth,10)/100,fill:"none",strokeOpacity:h.opacity,classes:"apexcharts-radialbar-area"});h.dropShadow.enabled&&r.dropShadow(d,h.dropShadow),l.add(d),d.attr("id","apexcharts-radialbarTrack-"+s),this.animatePaths(d,{centerX:t.centerX,centerY:t.centerY,endAngle:p,startAngle:c,size:t.size,i:s,totalItems:2,animBeginArr:0,dur:0,isTrack:!0,easing:e.globals.easing})}return n}},{key:"drawArcs",value:function(t){var e=this.w,i=new y(this.ctx),n=new A(this.ctx),r=new g(this.ctx),o=i.group(),a=this.getStrokeWidth(t);t.size=t.size-a/2;var s=e.config.plotOptions.radialBar.hollow.background,l=t.size-a*t.series.length-this.margin*t.series.length-a*parseInt(e.config.plotOptions.radialBar.track.strokeWidth,10)/100/2,h=l-e.config.plotOptions.radialBar.hollow.margin;void 0!==e.config.plotOptions.radialBar.hollow.image&&(s=this.drawHollowImage(t,o,l,s));var u=this.drawHollow({size:h,centerX:t.centerX,centerY:t.centerY,fill:s||"transparent"});e.config.plotOptions.radialBar.hollow.dropShadow.enabled&&r.dropShadow(u,e.config.plotOptions.radialBar.hollow.dropShadow);var c=1;!this.radialDataLabels.total.show&&e.globals.series.length>1&&(c=0);var p=null;this.radialDataLabels.show&&(p=this.renderInnerDataLabels(this.radialDataLabels,{hollowSize:l,centerX:t.centerX,centerY:t.centerY,opacity:c})),"back"===e.config.plotOptions.radialBar.hollow.position&&(o.add(u),p&&o.add(p));var d=!1;e.config.plotOptions.radialBar.inverseOrder&&(d=!0);for(var v=d?t.series.length-1:0;d?v>=0:v<t.series.length;d?v--:v++){var m=i.group({class:"apexcharts-series apexcharts-radial-series",seriesName:f.escapeString(e.globals.seriesNames[v])});o.add(m),m.attr({rel:v+1,"data:realIndex":v}),this.ctx.series.addCollapsedClassToSeries(m,v),t.size=t.size-a-this.margin;var _=n.fillPath({seriesNumber:v,size:t.size,value:t.series[v]}),x=this.startAngle,b=void 0,w=f.negToZero(t.series[v]>100?100:t.series[v])/100,S=Math.round(this.totalAngle*w)+this.startAngle,C=void 0;e.globals.dataChanged&&(b=this.startAngle,C=Math.round(this.totalAngle*f.negToZero(e.globals.previousPaths[v])/100)+b),Math.abs(S)+Math.abs(x)>=360&&(S-=.01),Math.abs(C)+Math.abs(b)>=360&&(C-=.01);var E=S-x,T=Array.isArray(e.config.stroke.dashArray)?e.config.stroke.dashArray[v]:e.config.stroke.dashArray,P=i.drawPath({d:"",stroke:_,strokeWidth:a,fill:"none",fillOpacity:e.config.fill.opacity,classes:"apexcharts-radialbar-area apexcharts-radialbar-slice-"+v,strokeDashArray:T});y.setAttrs(P.node,{"data:angle":E,"data:value":t.series[v]}),e.config.chart.dropShadow.enabled&&r.dropShadow(P,e.config.chart.dropShadow,v),this.addListeners(P,this.radialDataLabels),m.add(P),P.attr({index:0,j:v});var L=0;!this.initialAnim||e.globals.resized||e.globals.dataChanged||(L=(S-x)/360*e.config.chart.animations.speed,this.animDur=L/(1.2*t.series.length)+this.animDur,this.animBeginArr.push(this.animDur)),e.globals.dataChanged&&(L=(S-x)/360*e.config.chart.animations.dynamicAnimation.speed,this.animDur=L/(1.2*t.series.length)+this.animDur,this.animBeginArr.push(this.animDur)),this.animatePaths(P,{centerX:t.centerX,centerY:t.centerY,endAngle:S,startAngle:x,prevEndAngle:C,prevStartAngle:b,size:t.size,i:v,totalItems:2,animBeginArr:this.animBeginArr,dur:L,shouldSetPrevPaths:!0,easing:e.globals.easing})}return{g:o,elHollow:u,dataLabels:p}}},{key:"drawHollow",value:function(t){var e=new y(this.ctx).drawCircle(2*t.size);return e.attr({class:"apexcharts-radialbar-hollow",cx:t.centerX,cy:t.centerY,r:t.size,fill:t.fill}),e}},{key:"drawHollowImage",value:function(t,e,i,n){var r=this.w,o=new A(this.ctx),a=f.randomId(),s=r.config.plotOptions.radialBar.hollow.image;if(r.config.plotOptions.radialBar.hollow.imageClipped)o.clippedImgArea({width:i,height:i,image:s,patternID:"pattern".concat(r.globals.cuid).concat(a)}),n="url(#pattern".concat(r.globals.cuid).concat(a,")");else{var l=r.config.plotOptions.radialBar.hollow.imageWidth,h=r.config.plotOptions.radialBar.hollow.imageHeight;if(void 0===l&&void 0===h){var u=r.globals.dom.Paper.image(s).loaded(function(e){this.move(t.centerX-e.width/2+r.config.plotOptions.radialBar.hollow.imageOffsetX,t.centerY-e.height/2+r.config.plotOptions.radialBar.hollow.imageOffsetY)});e.add(u)}else{var c=r.globals.dom.Paper.image(s).loaded(function(e){this.move(t.centerX-l/2+r.config.plotOptions.radialBar.hollow.imageOffsetX,t.centerY-h/2+r.config.plotOptions.radialBar.hollow.imageOffsetY),this.size(l,h)});e.add(c)}}return n}},{key:"getStrokeWidth",value:function(t){var e=this.w;return t.size*(100-parseInt(e.config.plotOptions.radialBar.hollow.size,10))/100/(t.series.length+1)-this.margin}}]),i}(),St=function(t){function i(){return e(this,i),u(this,l(i).apply(this,arguments))}return s(i,yt),n(i,[{key:"draw",value:function(t,e){var i=this.w,n=new y(this.ctx);this.rangeBarOptions=this.w.config.plotOptions.rangeBar,this.series=t,this.seriesRangeStart=i.globals.seriesRangeStart,this.seriesRangeEnd=i.globals.seriesRangeEnd,this.barHelpers.initVariables(t);for(var r=n.group({class:"apexcharts-rangebar-series apexcharts-plot-series"}),o=0;o<t.length;o++){var s,l,h,u=void 0,c=void 0,p=void 0,d=i.globals.comboCharts?e[o]:o,g=n.group({class:"apexcharts-series",seriesName:f.escapeString(i.globals.seriesNames[d]),rel:o+1,"data:realIndex":d});t[o].length>0&&(this.visibleI=this.visibleI+1);var v=0,m=0;this.yRatio.length>1&&(this.yaxisIndex=d);var _=this.barHelpers.initialPositions();c=_.y,h=_.zeroW,u=_.x,m=_.barWidth,s=_.xDivision,l=_.zeroH;for(var x=n.group({class:"apexcharts-datalabels","data:realIndex":d}),b=0;b<i.globals.dataPoints;b++){var w=this.barHelpers.getStrokeWidth(o,b,d),S=this.seriesRangeStart[o][b],C=this.seriesRangeEnd[o][b],E=null,T=null,P={x:u,y:c,strokeWidth:w,elSeries:g};if(p=_.yDivision,v=_.barHeight,this.isHorizontal){if(T=c+v*this.visibleI,void 0===i.config.series[o].data[b])break;if(this.isTimelineBar&&i.config.series[o].data[b].x){var L=this.detectOverlappingBars({i:o,j:b,barYPosition:T,srty:(p-v*this.seriesLen)/2,barHeight:v,yDivision:p,initPositions:_});v=L.barHeight,T=L.barYPosition}m=(E=this.drawRangeBarPaths(a({indexes:{i:o,j:b,realIndex:d},barHeight:v,barYPosition:T,zeroW:h,yDivision:p,y1:S,y2:C},P))).barWidth}else v=(E=this.drawRangeColumnPaths(a({indexes:{i:o,j:b,realIndex:d},zeroH:l,barWidth:m,xDivision:s},P))).barHeight;c=E.y,u=E.x;var I=this.barHelpers.getPathFillColor(t,o,b,d);this.renderSeries({realIndex:d,pathFill:I,lineFill:i.globals.stroke.colors[d],j:b,i:o,x:u,y:c,y1:S,y2:C,pathFrom:E.pathFrom,pathTo:E.pathTo,strokeWidth:w,elSeries:g,series:t,barHeight:v,barYPosition:T,barWidth:m,elDataLabelsWrap:x,visibleSeries:this.visibleI,type:"rangebar"})}r.add(g)}return r}},{key:"detectOverlappingBars",value:function(t){var e=t.i,i=t.j,n=t.barYPosition,r=t.srty,o=t.barHeight,a=t.yDivision,s=t.initPositions,l=this.w,h=[],u=l.config.series[e].data[i].rangeName,c=l.config.series[e].data[i].x,p=l.globals.labels.indexOf(c),d=l.globals.seriesRangeBarTimeline[e].findIndex(function(t){return t.x===c&&t.overlaps.length>0});return n=r+o*this.visibleI+a*p,d>-1&&(h=l.globals.seriesRangeBarTimeline[e][d].overlaps).indexOf(u)>-1&&(n=(o=s.barHeight/h.length)*this.visibleI+a*(100-parseInt(this.barOptions.barHeight,10))/100/2+o*(this.visibleI+h.indexOf(u))+a*p),{barYPosition:n,barHeight:o}}},{key:"drawRangeColumnPaths",value:function(t){var e=t.indexes,i=t.x,n=t.xDivision,r=t.barWidth,o=t.zeroH,a=this.w,s=e.i,l=e.j,h=this.yRatio[this.yaxisIndex],u=e.realIndex,c=this.getRangeValue(u,l),p=Math.min(c.start,c.end),d=Math.max(c.start,c.end);a.globals.isXNumeric&&(i=(a.globals.seriesX[s][l]-a.globals.minX)/this.xRatio-r/2);var f=i+r*this.visibleI;void 0===this.series[s][l]||null===this.series[s][l]?p=o:(p=o-p/h,d=o-d/h);var g=Math.abs(d-p),v=this.barHelpers.getColumnPaths({barXPosition:f,barWidth:r,y1:p,y2:d,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,i:u,j:l,w:a});return a.globals.isXNumeric||(i+=n),{pathTo:v.pathTo,pathFrom:v.pathFrom,barHeight:g,x:i,y:d,barXPosition:f}}},{key:"drawRangeBarPaths",value:function(t){var e=t.indexes,i=t.y,n=t.yDivision,r=t.barHeight,o=t.barYPosition,a=t.zeroW,s=this.w,l=a+t.y1/this.invertedYRatio,h=a+t.y2/this.invertedYRatio,u=Math.abs(h-l),c=this.barHelpers.getBarpaths({barYPosition:o,barHeight:r,x1:l,x2:h,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,i:e.realIndex,j:e.j,w:s});return s.globals.isXNumeric||(i+=n),{pathTo:c.pathTo,pathFrom:c.pathFrom,barWidth:u,x:h,y:i}}},{key:"getRangeValue",value:function(t,e){var i=this.w;return{start:i.globals.seriesRangeStart[t][e],end:i.globals.seriesRangeEnd[t][e]}}}]),i}(),Ct=function(){function t(i){e(this,t),this.w=i.w,this.lineCtx=i}return n(t,[{key:"sameValueSeriesFix",value:function(t,e){var i=this.w;if("line"===i.config.chart.type&&("gradient"===i.config.fill.type||"gradient"===i.config.fill.type[t])&&new O(this.lineCtx.ctx,i).seriesHaveSameValues(t)){var n=e[t].slice();n[n.length-1]=n[n.length-1]+1e-6,e[t]=n}return e}},{key:"calculatePoints",value:function(t){var e=t.series,i=t.x,n=t.y,r=t.i,o=t.j,a=t.prevY,s=this.w,l=[],h=[];if(0===o){var u=this.lineCtx.categoryAxisCorrection+s.config.markers.offsetX;s.globals.isXNumeric&&(u=(s.globals.seriesX[t.realIndex][0]-s.globals.minX)/this.lineCtx.xRatio+s.config.markers.offsetX),l.push(u),h.push(f.isNumber(e[r][0])?a+s.config.markers.offsetY:null),l.push(i+s.config.markers.offsetX),h.push(f.isNumber(e[r][o+1])?n+s.config.markers.offsetY:null)}else l.push(i+s.config.markers.offsetX),h.push(f.isNumber(e[r][o+1])?n+s.config.markers.offsetY:null);return{x:l,y:h}}},{key:"checkPreviousPaths",value:function(t){for(var e=t.pathFromLine,i=t.pathFromArea,n=t.realIndex,r=this.w,o=0;o<r.globals.previousPaths.length;o++){var a=r.globals.previousPaths[o];("line"===a.type||"area"===a.type)&&a.paths.length>0&&parseInt(a.realIndex,10)===parseInt(n,10)&&("line"===a.type?(this.lineCtx.appendPathFrom=!1,e=r.globals.previousPaths[o].paths[0].d):"area"===a.type&&(this.lineCtx.appendPathFrom=!1,i=r.globals.previousPaths[o].paths[0].d,r.config.stroke.show&&r.globals.previousPaths[o].paths[1]&&(e=r.globals.previousPaths[o].paths[1].d)))}return{pathFromLine:e,pathFromArea:i}}},{key:"determineFirstPrevY",value:function(t){var e=t.i,i=t.series,n=t.prevY,r=t.lineYPosition,o=this.w;if(void 0!==i[e][0])n=(r=o.config.chart.stacked&&e>0?this.lineCtx.prevSeriesY[e-1][0]:this.lineCtx.zeroY)-i[e][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]+2*(this.lineCtx.isReversed?i[e][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]:0);else if(o.config.chart.stacked&&e>0&&void 0===i[e][0])for(var a=e-1;a>=0;a--)if(null!==i[a][0]&&void 0!==i[a][0]){n=r=this.lineCtx.prevSeriesY[a][0];break}return{prevY:n,lineYPosition:r}}}]),t}(),Et=function(){function t(i,n,r){e(this,t),this.ctx=i,this.w=i.w,this.xyRatios=n,this.pointsChart=!("bubble"!==this.w.config.chart.type&&"scatter"!==this.w.config.chart.type)||r,this.scatter=new M(this.ctx),this.noNegatives=this.w.globals.minX===Number.MAX_VALUE,this.lineHelpers=new Ct(this),this.markers=new R(this.ctx),this.prevSeriesY=[],this.categoryAxisCorrection=0,this.yaxisIndex=0}return n(t,[{key:"draw",value:function(t,e,i){var n=this.w,r=new y(this.ctx),o=n.globals.comboCharts?e:n.config.chart.type,a=r.group({class:"apexcharts-".concat(o,"-series apexcharts-plot-series")}),s=new O(this.ctx,n);this.yRatio=this.xyRatios.yRatio,this.zRatio=this.xyRatios.zRatio,this.xRatio=this.xyRatios.xRatio,this.baseLineY=this.xyRatios.baseLineY,t=s.getLogSeries(t),this.yRatio=s.getLogYRatios(this.yRatio);for(var l=[],h=0;h<t.length;h++){t=this.lineHelpers.sameValueSeriesFix(h,t);var u=n.globals.comboCharts?i[h]:h;this._initSerieVariables(t,h,u);var c=[],p=[],d=n.globals.padHorizontal+this.categoryAxisCorrection;this.ctx.series.addCollapsedClassToSeries(this.elSeries,u),n.globals.isXNumeric&&n.globals.seriesX.length>0&&(d=(n.globals.seriesX[u][0]-n.globals.minX)/this.xRatio),p.push(d);var f,g=d,v=g,m=this.zeroY;m=this.lineHelpers.determineFirstPrevY({i:h,series:t,prevY:m,lineYPosition:0}).prevY,c.push(m),f=m;var _=this._calculatePathsFrom({series:t,i:h,realIndex:u,prevX:v,prevY:m}),x=this._iterateOverDataPoints({series:t,realIndex:u,i:h,x:d,y:1,pX:g,pY:f,pathsFrom:_,linePaths:[],areaPaths:[],seriesIndex:i,lineYPosition:0,xArrj:p,yArrj:c});this._handlePaths({type:o,realIndex:u,i:h,paths:x}),this.elSeries.add(this.elPointsMain),this.elSeries.add(this.elDataLabelsWrap),l.push(this.elSeries)}for(var b=l.length;b>0;b--)a.add(l[b-1]);return a}},{key:"_initSerieVariables",value:function(t,e,i){var n=this.w,r=new y(this.ctx);this.xDivision=n.globals.gridWidth/(n.globals.dataPoints-("on"===n.config.xaxis.tickPlacement?1:0)),this.strokeWidth=Array.isArray(n.config.stroke.width)?n.config.stroke.width[i]:n.config.stroke.width,this.yRatio.length>1&&(this.yaxisIndex=i),this.isReversed=n.config.yaxis[this.yaxisIndex]&&n.config.yaxis[this.yaxisIndex].reversed,this.zeroY=n.globals.gridHeight-this.baseLineY[this.yaxisIndex]-(this.isReversed?n.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),this.areaBottomY=this.zeroY,this.zeroY>n.globals.gridHeight&&(this.areaBottomY=n.globals.gridHeight),this.categoryAxisCorrection=this.xDivision/2,this.elSeries=r.group({class:"apexcharts-series",seriesName:f.escapeString(n.globals.seriesNames[i])}),this.elPointsMain=r.group({class:"apexcharts-series-markers-wrap","data:realIndex":i}),this.elDataLabelsWrap=r.group({class:"apexcharts-datalabels","data:realIndex":i}),this.elSeries.attr({"data:longestSeries":t[e].length===n.globals.dataPoints,rel:e+1,"data:realIndex":i}),this.appendPathFrom=!0}},{key:"_calculatePathsFrom",value:function(t){var e,i,n,r,o=t.series,a=t.i,s=t.realIndex,l=t.prevX,h=t.prevY,u=this.w,c=new y(this.ctx);if(null===o[a][0]){for(var p=0;p<o[a].length;p++)if(null!==o[a][p]){e=c.move(l=this.xDivision*p,h=this.zeroY-o[a][p]/this.yRatio[this.yaxisIndex]),i=c.move(l,this.areaBottomY);break}}else e=c.move(l,h),i=c.move(l,this.areaBottomY)+c.line(l,h);if(n=c.move(-1,this.zeroY)+c.line(-1,this.zeroY),r=c.move(-1,this.zeroY)+c.line(-1,this.zeroY),u.globals.previousPaths.length>0){var d=this.lineHelpers.checkPreviousPaths({pathFromLine:n,pathFromArea:r,realIndex:s});n=d.pathFromLine,r=d.pathFromArea}return{prevX:l,prevY:h,linePath:e,areaPath:i,pathFromLine:n,pathFromArea:r}}},{key:"_handlePaths",value:function(t){var e=t.type,i=t.realIndex,n=t.i,r=t.paths,o=this.w,s=new y(this.ctx),l=new A(this.ctx);this.prevSeriesY.push(r.yArrj),o.globals.seriesXvalues[i]=r.xArrj,o.globals.seriesYvalues[i]=r.yArrj,this.pointsChart||o.globals.delayedElements.push({el:this.elPointsMain.node,index:i});var h={i:n,realIndex:i,animationDelay:n,initialSpeed:o.config.chart.animations.speed,dataChangeSpeed:o.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(e)};if("area"===e)for(var u=l.fillPath({seriesNumber:i}),c=0;c<r.areaPaths.length;c++){var p=s.renderPaths(a({},h,{pathFrom:r.pathFromArea,pathTo:r.areaPaths[c],stroke:"none",strokeWidth:0,strokeLineCap:null,fill:u}));this.elSeries.add(p)}if(o.config.stroke.show&&!this.pointsChart){var d=null;d="line"===e?l.fillPath({seriesNumber:i,i:n}):o.globals.stroke.colors[i];for(var f=0;f<r.linePaths.length;f++){var g=s.renderPaths(a({},h,{pathFrom:r.pathFromLine,pathTo:r.linePaths[f],stroke:d,strokeWidth:this.strokeWidth,strokeLineCap:o.config.stroke.lineCap,fill:"none"}));this.elSeries.add(g)}}}},{key:"_iterateOverDataPoints",value:function(t){for(var e=t.series,i=t.realIndex,n=t.i,r=t.x,o=t.y,a=t.pX,s=t.pY,l=t.pathsFrom,h=t.linePaths,u=t.areaPaths,c=t.seriesIndex,p=t.lineYPosition,d=t.xArrj,g=t.yArrj,v=this.w,m=new y(this.ctx),_=this.yRatio,x=l.prevY,b=l.linePath,w=l.areaPath,S=l.pathFromLine,C=l.pathFromArea,E=f.isNumber(v.globals.minYArr[i])?v.globals.minYArr[i]:v.globals.minY,T=v.globals.dataPoints>1?v.globals.dataPoints-1:v.globals.dataPoints,P=0;P<T;P++){if(v.globals.isXNumeric){var L=v.globals.seriesX[i][P+1];void 0===v.globals.seriesX[i][P+1]&&(L=v.globals.seriesX[i][T-1]),r=(L-v.globals.minX)/this.xRatio}else r+=this.xDivision;p=v.config.chart.stacked&&n>0&&v.globals.collapsedSeries.length<v.config.series.length-1?this.prevSeriesY[n-1][P+1]:this.zeroY,o=void 0===e[n][P+1]||null===e[n][P+1]?p-E/_[this.yaxisIndex]+2*(this.isReversed?E/_[this.yaxisIndex]:0):p-e[n][P+1]/_[this.yaxisIndex]+2*(this.isReversed?e[n][P+1]/_[this.yaxisIndex]:0),d.push(r),g.push(o);var I=this.lineHelpers.calculatePoints({series:e,x:r,y:o,realIndex:i,i:n,j:P,prevY:x}),O=this._createPaths({series:e,i:n,realIndex:i,j:P,x:r,y:o,pX:a,pY:s,linePath:b,areaPath:w,linePaths:h,areaPaths:u,seriesIndex:c});u=O.areaPaths,h=O.linePaths,a=O.pX,s=O.pY,w=O.areaPath,b=O.linePath,this.appendPathFrom&&(S+=m.line(r,this.zeroY),C+=m.line(r,this.zeroY)),this.handleNullDataPoints(e,I,n,P,i),this._handleMarkersAndLabels({pointsPos:I,series:e,x:r,y:o,prevY:x,i:n,j:P,realIndex:i})}return{yArrj:g,xArrj:d,pathFromArea:C,areaPaths:u,pathFromLine:S,linePaths:h}}},{key:"_handleMarkersAndLabels",value:function(t){var e=t.pointsPos,i=t.i,n=t.j,r=t.realIndex,o=this.w,a=new F(this.ctx);if(this.pointsChart)this.scatter.draw(this.elSeries,n,{realIndex:r,pointsPos:e,zRatio:this.zRatio,elParent:this.elPointsMain});else{o.globals.series[i].length>1&&this.elPointsMain.node.classList.add("apexcharts-element-hidden");var s=this.markers.plotChartMarkers(e,r,n+1);null!==s&&this.elPointsMain.add(s)}var l=a.drawDataLabel(e,r,n+1,null);null!==l&&this.elDataLabelsWrap.add(l)}},{key:"_createPaths",value:function(t){var e=t.series,i=t.i,n=t.realIndex,r=t.j,o=t.x,a=t.y,s=t.pX,l=t.pY,h=t.linePath,u=t.areaPath,c=t.linePaths,p=t.areaPaths,d=t.seriesIndex,f=this.w,g=new y(this.ctx),v=f.config.stroke.curve,m=this.areaBottomY;if(Array.isArray(f.config.stroke.curve)&&(v=Array.isArray(d)?f.config.stroke.curve[d[i]]:f.config.stroke.curve[i]),"smooth"===v){var _=.35*(o-s);f.globals.hasNullValues?(null!==e[i][r]&&(null!==e[i][r+1]?(h=g.move(s,l)+g.curve(s+_,l,o-_,a,o+1,a),u=g.move(s+1,l)+g.curve(s+_,l,o-_,a,o+1,a)+g.line(o,m)+g.line(s,m)+"z"):(h=g.move(s,l),u=g.move(s,l)+"z")),c.push(h),p.push(u)):(h+=g.curve(s+_,l,o-_,a,o,a),u+=g.curve(s+_,l,o-_,a,o,a)),s=o,l=a,r===e[i].length-2&&(u=u+g.curve(s,l,o,a,o,m)+g.move(o,a)+"z",f.globals.hasNullValues||(c.push(h),p.push(u)))}else null===e[i][r+1]&&(h+=g.move(o,a),u=u+g.line(f.globals.isXNumeric?(f.globals.seriesX[n][r]-f.globals.minX)/this.xRatio:o-this.xDivision,m)+g.move(o,a)+"z"),null===e[i][r]&&(h+=g.move(o,a),u+=g.move(o,m)),"stepline"===v?(h=h+g.line(o,null,"H")+g.line(null,a,"V"),u=u+g.line(o,null,"H")+g.line(null,a,"V")):"straight"===v&&(h+=g.line(o,a),u+=g.line(o,a)),r===e[i].length-2&&(u=u+g.line(o,m)+g.move(o,a)+"z",c.push(h),p.push(u));return{linePaths:c,areaPaths:p,pX:s,pY:l,linePath:h,areaPath:u}}},{key:"handleNullDataPoints",value:function(t,e,i,n,r){var o=this.w;if(null===t[i][n]&&o.config.markers.showNullDataPoints||1===t[i].length){var a=this.markers.plotChartMarkers(e,r,n+1,this.strokeWidth-o.config.markers.strokeWidth/2,!0);null!==a&&this.elPointsMain.add(a)}}}]),t}(),Tt=function(){function t(i){e(this,t),this.ctx=i,this.w=i.w,this.timeScaleArray=[],this.utc=this.w.config.xaxis.labels.datetimeUTC}return n(t,[{key:"calculateTimeScaleTicks",value:function(t,e){var i=this,n=this.w;if(n.globals.allSeriesCollapsed)return n.globals.labels=[],n.globals.timescaleLabels=[],[];var r=new E(this.ctx),o=(e-t)/864e5;this.determineInterval(o),n.globals.disableZoomIn=!1,n.globals.disableZoomOut=!1,o<.005?n.globals.disableZoomIn=!0:o>5e4&&(n.globals.disableZoomOut=!0);var s=r.getTimeUnitsfromTimestamp(t,e,this.utc),l=n.globals.gridWidth/o,h=l/24,u=h/60,c=Math.floor(24*o),p=Math.floor(24*o*60),d=Math.floor(o),f=Math.floor(o/30),g=Math.floor(o/365),v={minMinute:s.minMinute,minHour:s.minHour,minDate:s.minDate,minMonth:s.minMonth,minYear:s.minYear},y={firstVal:v,currentMinute:v.minMinute,currentHour:v.minHour,currentMonthDate:v.minDate,currentDate:v.minDate,currentMonth:v.minMonth,currentYear:v.minYear,daysWidthOnXAxis:l,hoursWidthOnXAxis:h,minutesWidthOnXAxis:u,numberOfMinutes:p,numberOfHours:c,numberOfDays:d,numberOfMonths:f,numberOfYears:g};switch(this.tickInterval){case"years":this.generateYearScale(y);break;case"months":case"half_year":this.generateMonthScale(y);break;case"months_days":case"months_fortnight":case"days":case"week_days":this.generateDayScale(y);break;case"hours":this.generateHourScale(y);break;case"minutes":this.generateMinuteScale(y)}var m=this.timeScaleArray.map(function(t){var e={position:t.position,unit:t.unit,year:t.year,day:t.day?t.day:1,hour:t.hour?t.hour:0,month:t.month+1};return"month"===t.unit?a({},e,{day:1,value:t.value+1}):"day"===t.unit||"hour"===t.unit?a({},e,{value:t.value}):"minute"===t.unit?a({},e,{value:t.value,minute:t.value}):t});return m.filter(function(t){var e=1,r=Math.ceil(n.globals.gridWidth/120),o=t.value;void 0!==n.config.xaxis.tickAmount&&(r=n.config.xaxis.tickAmount),m.length>r&&(e=Math.floor(m.length/r));var a=!1,s=!1;switch(i.tickInterval){case"years":"year"===t.unit&&(a=!0);break;case"half_year":e=7,"year"===t.unit&&(a=!0);break;case"months":e=1,"year"===t.unit&&(a=!0);break;case"months_fortnight":e=15,"year"!==t.unit&&"month"!==t.unit||(a=!0),30===o&&(s=!0);break;case"months_days":e=10,"month"===t.unit&&(a=!0),30===o&&(s=!0);break;case"week_days":e=8,"month"===t.unit&&(a=!0);break;case"days":e=1,"month"===t.unit&&(a=!0);break;case"hours":"day"===t.unit&&(a=!0);break;case"minutes":o%5!=0&&(s=!0)}if("minutes"===i.tickInterval||"hours"===i.tickInterval){if(!s)return!0}else if((o%e==0||a)&&!s)return!0})}},{key:"recalcDimensionsBasedOnFormat",value:function(t,e){var i=this.w,n=this.formatDates(t),r=this.removeOverlappingTS(n);i.globals.timescaleLabels=r.slice(),new it(this.ctx).plotCoords()}},{key:"determineInterval",value:function(t){switch(!0){case t>1825:this.tickInterval="years";break;case t>800&&t<=1825:this.tickInterval="half_year";break;case t>180&&t<=800:this.tickInterval="months";break;case t>90&&t<=180:this.tickInterval="months_fortnight";break;case t>60&&t<=90:this.tickInterval="months_days";break;case t>30&&t<=60:this.tickInterval="week_days";break;case t>2&&t<=30:this.tickInterval="days";break;case t>.1&&t<=2:this.tickInterval="hours";break;case t<.1:this.tickInterval="minutes";break;default:this.tickInterval="days"}}},{key:"generateYearScale",value:function(t){var e=t.firstVal,i=t.currentMonth,n=t.currentYear,r=t.daysWidthOnXAxis,o=t.numberOfYears,a=e.minYear,s=0,l=new E(this.ctx);if(e.minDate>1&&e.minMonth>0){var h=l.determineRemainingDaysOfYear(e.minYear,e.minMonth,e.minDate);s=(l.determineDaysOfYear(e.minYear)-h+1)*r,this.timeScaleArray.push({position:s,value:a=e.minYear+1,unit:"year",year:a,month:f.monthMod(i+1)})}else 1===e.minDate&&0===e.minMonth&&this.timeScaleArray.push({position:s,value:a,unit:"year",year:n,month:f.monthMod(i+1)});for(var u=a,c=s,p=0;p<o;p++)u++,c=l.determineDaysOfYear(u-1)*r+c,this.timeScaleArray.push({position:c,value:u,unit:"year",year:u,month:1})}},{key:"generateMonthScale",value:function(t){var e=t.firstVal,i=t.currentMonthDate,n=t.currentMonth,r=t.currentYear,o=t.daysWidthOnXAxis,a=t.numberOfMonths,s=n,l=0,h=new E(this.ctx),u="month",c=0;if(e.minDate>1){l=(h.determineDaysOfMonths(n+1,e.minYear)-i+1)*o,s=f.monthMod(n+1);var p=r+c,d=f.monthMod(s),g=s;0===s&&(u="year",g=p,d=1,p+=c+=1),this.timeScaleArray.push({position:l,value:g,unit:u,year:p,month:d})}else this.timeScaleArray.push({position:l,value:s,unit:u,year:r,month:f.monthMod(n)});for(var v=s+1,y=l,m=0,_=1;m<a;m++,_++){0===(v=f.monthMod(v))?(u="year",c+=1):u="month";var x=this._getYear(r,v,c);y=h.determineDaysOfMonths(v,x)*o+y,this.timeScaleArray.push({position:y,value:0===v?x:v,unit:u,year:x,month:0===v?1:v}),v++}}},{key:"generateDayScale",value:function(t){var e=t.firstVal,i=t.currentMonth,n=t.currentYear,r=t.hoursWidthOnXAxis,o=t.numberOfDays,a=new E(this.ctx),s="day",l=e.minDate+1,h=l,u=function(t,e,i){return t>a.determineDaysOfMonths(e+1,i)?(h=1,s="month",p=e+=1,e):e},c=(24-e.minHour)*r,p=l,d=u(h,i,n);0===e.minHour&&1===e.minDate&&(c=0,p=f.monthMod(e.minMonth),s="month",h=e.minDate,o++),this.timeScaleArray.push({position:c,value:p,unit:s,year:this._getYear(n,d,0),month:f.monthMod(d),day:h});for(var g=c,v=0;v<o;v++){s="day",d=u(h+=1,d,this._getYear(n,d,0));var y=this._getYear(n,d,0);g=24*r+g;var m=1===h?f.monthMod(d):h;this.timeScaleArray.push({position:g,value:m,unit:s,year:y,month:f.monthMod(d),day:m})}}},{key:"generateHourScale",value:function(t){var e=t.firstVal,i=t.currentDate,n=t.currentMonth,r=t.currentYear,o=t.minutesWidthOnXAxis,a=t.numberOfHours,s=new E(this.ctx),l="hour",h=function(t,e){return t>s.determineDaysOfMonths(e+1,r)&&(v=1,e+=1),{month:e,date:v}},u=function(t,e){return t>s.determineDaysOfMonths(e+1,r)?e+=1:e},c=60-e.minMinute,p=c*o,d=e.minHour+1,g=d+1;60===c&&(p=0,g=(d=e.minHour)+1);var v=i,y=u(v,n);this.timeScaleArray.push({position:p,value:d,unit:l,day:v,hour:g,year:r,month:f.monthMod(y)});for(var m=p,_=0;_<a;_++){l="hour",g>=24&&(g=0,l="day",y=h(v+=1,y).month,y=u(v,y));var x=this._getYear(r,y,0);this.timeScaleArray.push({position:m=0===g&&0===_?c*o:60*o+m,value:0===g?v:g,unit:l,hour:g,day:v,year:x,month:f.monthMod(y)}),g++}}},{key:"generateMinuteScale",value:function(t){var e=t.firstVal,i=t.currentYear,n=t.minutesWidthOnXAxis,r=t.numberOfMinutes,o=n-(t.currentMinute-e.minMinute),a=e.minMinute+1,s=a+1,l=t.currentDate,h=t.currentMonth,u=t.currentHour;this.timeScaleArray.push({position:o,value:a,unit:"minute",day:l,hour:u,minute:s,year:i,month:f.monthMod(h)});for(var c=o,p=0;p<r;p++)s>=60&&(s=0,24===(u+=1)&&(u=0)),c=n+c,this.timeScaleArray.push({position:c,value:s,unit:"minute",hour:u,minute:s,day:l,year:this._getYear(i,h,0),month:f.monthMod(h)}),s++}},{key:"createRawDateString",value:function(t,e){var i=t.year;return i+="-"+("0"+t.month.toString()).slice(-2),i+="day"===t.unit?"day"===t.unit?"-"+("0"+e).slice(-2):"-01":"-"+("0"+(t.day?t.day:"1")).slice(-2),i+="hour"===t.unit?"hour"===t.unit?"T"+("0"+e).slice(-2):"T00":"T"+("0"+(t.hour?t.hour:"0")).slice(-2),i+="minute"===t.unit?":"+("0"+e).slice(-2)+":00":":00:00",this.utc&&(i+=".000Z"),i}},{key:"formatDates",value:function(t){var e=this,i=this.w;return t.map(function(t){var n=t.value.toString(),r=new E(e.ctx),o=e.createRawDateString(t,n),a=r.getDate(o);if(void 0===i.config.xaxis.labels.format){var s="dd MMM",l=i.config.xaxis.labels.datetimeFormatter;"year"===t.unit&&(s=l.year),"month"===t.unit&&(s=l.month),"day"===t.unit&&(s=l.day),"hour"===t.unit&&(s=l.hour),"minute"===t.unit&&(s=l.minute),n=r.formatDate(a,s)}else n=r.formatDate(a,i.config.xaxis.labels.format);return{dateString:o,position:t.position,value:n,unit:t.unit,year:t.year,month:t.month}})}},{key:"removeOverlappingTS",value:function(t){var e,i=this,n=new y(this.ctx),r=!1;t.length>0&&t[0].value&&t.every(function(e){return e.value.length===t[0].value.length})&&(r=!0,e=n.getTextRects(t[0].value).width);var o=0,a=t.map(function(a,s){if(s>0&&i.w.config.xaxis.labels.hideOverlappingLabels){var l=r?e:n.getTextRects(t[o].value).width;return a.position>t[o].position+l+10?(o=s,a):null}return a});return a=a.filter(function(t){return null!==t})}},{key:"_getYear",value:function(t,e,i){return t+Math.floor(e/12)+i}}]),t}(),Pt=function(){function t(i,n){e(this,t),this.ctx=n,this.w=n.w,this.el=i}return n(t,[{key:"setupElements",value:function(){var t=this.w.globals,e=this.w.config,i=e.chart.type;t.axisCharts=["line","area","bar","rangeBar","candlestick","scatter","bubble","radar","heatmap"].indexOf(i)>-1,t.xyCharts=["line","area","bar","rangeBar","candlestick","scatter","bubble"].indexOf(i)>-1,t.isBarHorizontal=("bar"===e.chart.type||"rangeBar"===e.chart.type)&&e.plotOptions.bar.horizontal,t.chartClass=".apexcharts"+t.cuid,t.dom.baseEl=this.el,t.dom.elWrap=document.createElement("div"),y.setAttrs(t.dom.elWrap,{id:t.chartClass.substring(1),class:"apexcharts-canvas "+t.chartClass.substring(1)}),this.el.appendChild(t.dom.elWrap),t.dom.Paper=new window.SVG.Doc(t.dom.elWrap),t.dom.Paper.attr({class:"apexcharts-svg","xmlns:data":"ApexChartsNS",transform:"translate(".concat(e.chart.offsetX,", ").concat(e.chart.offsetY,")")}),t.dom.Paper.node.style.background=e.chart.background,this.setSVGDimensions(),t.dom.elGraphical=t.dom.Paper.group().attr({class:"apexcharts-inner apexcharts-graphical"}),t.dom.elAnnotations=t.dom.Paper.group().attr({class:"apexcharts-annotations"}),t.dom.elDefs=t.dom.Paper.defs(),t.dom.elLegendWrap=document.createElement("div"),t.dom.elLegendWrap.classList.add("apexcharts-legend"),t.dom.elWrap.appendChild(t.dom.elLegendWrap),t.dom.Paper.add(t.dom.elGraphical),t.dom.elGraphical.add(t.dom.elDefs)}},{key:"plotChartType",value:function(t,e){var i=this.w,n=i.config,r=i.globals,o={series:[],i:[]},a={series:[],i:[]},s={series:[],i:[]},l={series:[],i:[]},h={series:[],i:[]},u={series:[],i:[]};r.series.map(function(e,c){void 0!==t[c].type?("column"===t[c].type||"bar"===t[c].type?(r.series.length>1&&n.plotOptions.bar.horizontal&&console.warn("Horizontal bars are not supported in a mixed/combo chart. Please turn off `plotOptions.bar.horizontal`"),h.series.push(e),h.i.push(c),i.globals.columnSeries=h.series):"area"===t[c].type?(a.series.push(e),a.i.push(c)):"line"===t[c].type?(o.series.push(e),o.i.push(c)):"scatter"===t[c].type?(s.series.push(e),s.i.push(c)):"bubble"===t[c].type?(l.series.push(e),l.i.push(c)):"candlestick"===t[c].type?(u.series.push(e),u.i.push(c)):console.warn("You have specified an unrecognized chart type. Available types for this propery are line/area/column/bar/scatter/bubble"),r.comboCharts=!0):(o.series.push(e),o.i.push(c))});var c=new Et(this.ctx,e),p=new _t(this.ctx,e),d=new nt(this.ctx),f=new wt(this.ctx),g=new St(this.ctx,e),v=new bt(this.ctx),y=[];if(r.comboCharts){if(a.series.length>0&&y.push(c.draw(a.series,"area",a.i)),h.series.length>0)if(i.config.chart.stacked){var m=new mt(this.ctx,e);y.push(m.draw(h.series,h.i))}else{var _=new yt(this.ctx,e);y.push(_.draw(h.series,h.i))}if(o.series.length>0&&y.push(c.draw(o.series,"line",o.i)),u.series.length>0&&y.push(p.draw(u.series,u.i)),s.series.length>0){var x=new Et(this.ctx,e,!0);y.push(x.draw(s.series,"scatter",s.i))}if(l.series.length>0){var b=new Et(this.ctx,e,!0);y.push(b.draw(l.series,"bubble",l.i))}}else switch(n.chart.type){case"line":y=c.draw(r.series,"line");break;case"area":y=c.draw(r.series,"area");break;case"bar":y=n.chart.stacked?new mt(this.ctx,e).draw(r.series):new yt(this.ctx,e).draw(r.series);break;case"candlestick":y=new _t(this.ctx,e).draw(r.series);break;case"rangeBar":y=g.draw(r.series);break;case"heatmap":y=new xt(this.ctx,e).draw(r.series);break;case"pie":case"donut":y=d.draw(r.series);break;case"radialBar":y=f.draw(r.series);break;case"radar":y=v.draw(r.series);break;default:y=c.draw(r.series)}return y}},{key:"setSVGDimensions",value:function(){var t=this.w.globals,e=this.w.config;t.svgWidth=e.chart.width,t.svgHeight=e.chart.height;var i=f.getDimensions(this.el),n=e.chart.width.toString().split(/[0-9]+/g).pop();if("%"===n?f.isNumber(i[0])&&(0===i[0].width&&(i=f.getDimensions(this.el.parentNode)),t.svgWidth=i[0]*parseInt(e.chart.width,10)/100):"px"!==n&&""!==n||(t.svgWidth=parseInt(e.chart.width,10)),"auto"!==t.svgHeight&&""!==t.svgHeight)if("%"===e.chart.height.toString().split(/[0-9]+/g).pop()){var r=f.getDimensions(this.el.parentNode);t.svgHeight=r[1]*parseInt(e.chart.height,10)/100}else t.svgHeight=parseInt(e.chart.height,10);else t.svgHeight=t.axisCharts?t.svgWidth/1.61:t.svgWidth/1.2;t.svgWidth<0&&(t.svgWidth=0),t.svgHeight<0&&(t.svgHeight=0),y.setAttrs(t.dom.Paper.node,{width:t.svgWidth,height:t.svgHeight}),t.dom.Paper.node.parentNode.parentNode.style.minHeight=t.svgHeight+(e.chart.sparkline.enabled?0:t.axisCharts?e.chart.parentHeightOffset:0)+"px",t.dom.elWrap.style.width=t.svgWidth+"px",t.dom.elWrap.style.height=t.svgHeight+"px"}},{key:"shiftGraphPosition",value:function(){var t=this.w.globals;y.setAttrs(t.dom.elGraphical.node,{transform:"translate("+t.translateX+", "+t.translateY+")"}),t.x2SpaceAvailable=t.svgWidth-t.dom.elGraphical.x()-t.gridWidth}},{key:"resizeNonAxisCharts",value:function(){var t=this.w,e=t.globals,i=0,n=t.config.chart.sparkline.enabled?1:15;n+=t.config.grid.padding.bottom,"top"!==t.config.legend.position&&"bottom"!==t.config.legend.position||!t.config.legend.show||t.config.legend.floating||(i=new ot(this.ctx).legendHelpers.getLegendBBox().clwh+10);var r=t.globals.dom.baseEl.querySelector(".apexcharts-radialbar"),o=2.05*t.globals.radialSize;if(r&&!t.config.chart.sparkline.enabled){var a=f.getBoundingClientRect(r);o=a.bottom;var s=a.bottom-a.top;o=Math.max(2.05*t.globals.radialSize,s)}var l=o+e.translateY+i+n;e.dom.elLegendForeign&&e.dom.elLegendForeign.setAttribute("height",l),e.dom.elWrap.style.height=l+"px",y.setAttrs(e.dom.Paper.node,{height:l}),e.dom.Paper.node.parentNode.parentNode.style.minHeight=l+"px"}},{key:"coreCalculations",value:function(){new X(this.ctx).init()}},{key:"resetGlobals",value:function(){var t=this,e=function(){return t.w.config.series.map(function(t){return[]})},i=new L,n=this.w.globals;i.initGlobalVars(n),n.seriesXvalues=e(),n.seriesYvalues=e()}},{key:"isMultipleY",value:function(){if(this.w.config.yaxis.constructor===Array&&this.w.config.yaxis.length>1)return this.w.globals.isMultipleYAxis=!0,!0}},{key:"xySettings",value:function(){var t=null,e=this.w;if(e.globals.axisCharts){if("back"===e.config.xaxis.crosshairs.position&&new q(this.ctx).drawXCrosshairs(),"back"===e.config.yaxis[0].crosshairs.position&&new q(this.ctx).drawYCrosshairs(),"datetime"===e.config.xaxis.type&&void 0===e.config.xaxis.labels.formatter){var i=new Tt(this.ctx),n=[];isFinite(e.globals.minX)&&isFinite(e.globals.maxX)&&!e.globals.isBarHorizontal?n=i.calculateTimeScaleTicks(e.globals.minX,e.globals.maxX):e.globals.isBarHorizontal&&(n=i.calculateTimeScaleTicks(e.globals.minY,e.globals.maxY)),i.recalcDimensionsBasedOnFormat(n)}t=new O(this.ctx).getCalculatedRatios()}return t}},{key:"setupBrushHandler",value:function(){var t=this,e=this.w;if(e.config.chart.brush.enabled&&"function"!=typeof e.config.chart.events.selection){var i=e.config.chart.brush.targets||[e.config.chart.brush.target];i.forEach(function(e){var i=ApexCharts.getChartByID(e);i.w.globals.brushSource=t.ctx;var n=function(){t.ctx.updateHelpers._updateOptions({chart:{selection:{xaxis:{min:i.w.globals.minX,max:i.w.globals.maxX}}}},!1,!1)};"function"!=typeof i.w.config.chart.events.zoomed&&(i.w.config.chart.events.zoomed=function(){n()}),"function"!=typeof i.w.config.chart.events.scrolled&&(i.w.config.chart.events.scrolled=function(){n()})}),e.config.chart.events.selection=function(t,n){i.forEach(function(t){var i=ApexCharts.getChartByID(t),r=f.clone(e.config.yaxis);e.config.chart.brush.autoScaleYaxis&&1===i.w.globals.series.length&&(r=new Y(i).autoScaleY(i,r,n)),i.ctx.updateHelpers._updateOptions({xaxis:{min:n.xaxis.min,max:n.xaxis.max},yaxis:a({},i.w.config.yaxis[0],{min:r[0].min,max:r[0].max})},!1,!1,!1,!1)})}}}}]),t}(),Lt=function(){function i(t){e(this,i),this.ctx=t,this.w=t.w}return n(i,[{key:"_updateOptions",value:function(e){var i=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=[this.ctx];(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])&&(a=this.ctx.getSyncedCharts()),this.ctx.w.globals.isExecCalled&&(a=[this.ctx],this.ctx.w.globals.isExecCalled=!1),a.forEach(function(a){var s=a.w;return s.globals.shouldAnimate=r,n||(s.globals.resized=!0,s.globals.dataChanged=!0,r&&a.series.getPreviousPaths()),e&&"object"===t(e)&&(a.config=new P(e),e=O.extendArrayProps(a.config,e),a.w.globals.chartID!==i.ctx.w.globals.chartID&&delete e.series,s.config=f.extend(s.config,e),o&&(s.globals.lastXAxis=[],s.globals.lastYAxis=[],s.globals.initialConfig=f.extend({},s.config),s.globals.initialSeries=JSON.parse(JSON.stringify(s.config.series)))),a.update(e)})}},{key:"_updateSeries",value:function(t,e){var i,n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=this.w;return o.globals.shouldAnimate=e,o.globals.dataChanged=!0,e&&this.ctx.series.getPreviousPaths(),o.globals.axisCharts?(0===(i=t.map(function(t,e){return n._extendSeries(t,e)})).length&&(i=[{data:[]}]),o.config.series=i):o.config.series=t.slice(),r&&(o.globals.initialConfig.series=JSON.parse(JSON.stringify(o.config.series)),o.globals.initialSeries=JSON.parse(JSON.stringify(o.config.series))),this.ctx.update()}},{key:"_extendSeries",value:function(t,e){var i=this.w;return a({},i.config.series[e],{name:t.name?t.name:i.config.series[e]&&i.config.series[e].name,type:t.type?t.type:i.config.series[e]&&i.config.series[e].type,data:t.data?t.data:i.config.series[e]&&i.config.series[e].data})}},{key:"toggleDataPointSelection",value:function(t,e){var i=this.w,n=null,r=".apexcharts-series[data\\:realIndex='".concat(t,"']");return i.globals.axisCharts?n=i.globals.dom.Paper.select("".concat(r," path[j='").concat(e,"'], ").concat(r," circle[j='").concat(e,"'], ").concat(r," rect[j='").concat(e,"']")).members[0]:void 0===e&&(n=i.globals.dom.Paper.select("".concat(r," path[j='").concat(t,"']")).members[0],("pie"===i.config.chart.type||"donut"===i.config.chart.type)&&new nt(this.ctx).pieClicked(t)),n?(new y(this.ctx).pathMouseDown(n,null),n.node?n.node:null):(console.warn("toggleDataPointSelection: Element not found"),null)}},{key:"forceXAxisUpdate",value:function(t){var e=this.w;if(["min","max"].forEach(function(i){void 0!==t.xaxis[i]&&(e.config.xaxis[i]=t.xaxis[i],e.globals.lastXAxis[i]=t.xaxis[i])}),t.xaxis.categories&&t.xaxis.categories.length&&(e.config.xaxis.categories=t.xaxis.categories),e.config.xaxis.convertedCatToNumeric){var i=new T(t);t=i.convertCatToNumericXaxis(t,this.ctx)}return t}},{key:"forceYAxisUpdate",value:function(t){var e=this.w;return e.config.chart.stacked&&"100%"===e.config.chart.stackType&&(Array.isArray(t.yaxis)?t.yaxis.forEach(function(e,i){t.yaxis[i].min=0,t.yaxis[i].max=100}):(t.yaxis.min=0,t.yaxis.max=100)),t}},{key:"revertDefaultAxisMinMax",value:function(){var t=this,e=this.w;e.config.xaxis.min=e.globals.lastXAxis.min,e.config.xaxis.max=e.globals.lastXAxis.max,e.config.yaxis.map(function(i,n){e.globals.zoomed?void 0!==e.globals.lastYAxis[n]&&(i.min=e.globals.lastYAxis[n].min,i.max=e.globals.lastYAxis[n].max):void 0!==t.ctx.opts.yaxis[n]&&(i.min=t.ctx.opts.yaxis[n].min,i.max=t.ctx.opts.yaxis[n].max)})}}]),i}();p="undefined"!=typeof window?window:void 0,d=function(e,i){function n(t,e,i,n){return i+n.replace(p.regex.dots," .")}function r(t){return t.toLowerCase().replace(/-(.)/g,function(t,e){return e.toUpperCase()})}function o(t){return t.charAt(0).toUpperCase()+t.slice(1)}function a(t){var e=t.toString(16);return 1==e.length?"0"+e:e}function s(t,e,i){if(null==e||null==i){var n=t.bbox();null==e?e=n.width/n.height*i:null==i&&(i=n.height/n.width*e)}return{width:e,height:i}}function l(t,e,i){return{x:e*t.a+i*t.c+0,y:e*t.b+i*t.d+0}}function h(t){return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}function u(t){for(var i=t.childNodes.length-1;i>=0;i--)t.childNodes[i]instanceof e.SVGElement&&u(t.childNodes[i]);return p.adopt(t).id(p.eid(t.nodeName))}function c(t){return Math.abs(t)>1e-37?t:0}var p=(void 0!==this?this:e).SVG=function(t){if(p.supported)return t=new p.Doc(t),p.parser.draw||p.prepare(),t};if(p.ns="http://www.w3.org/2000/svg",p.xmlns="http://www.w3.org/2000/xmlns/",p.xlink="http://www.w3.org/1999/xlink",p.svgjs="http://svgjs.com/svgjs",p.supported=!0,!p.supported)return!1;p.did=1e3,p.eid=function(t){return"Svgjs"+o(t)+p.did++},p.create=function(t){var e=i.createElementNS(this.ns,t);return e.setAttribute("id",this.eid(t)),e},p.extend=function(){var t,e;e=(t=[].slice.call(arguments)).pop();for(var i=t.length-1;i>=0;i--)if(t[i])for(var n in e)t[i].prototype[n]=e[n];p.Set&&p.Set.inherit&&p.Set.inherit()},p.invent=function(t){var e="function"==typeof t.create?t.create:function(){this.constructor.call(this,p.create(t.create))};return t.inherit&&(e.prototype=new t.inherit),t.extend&&p.extend(e,t.extend),t.construct&&p.extend(t.parent||p.Container,t.construct),e},p.adopt=function(t){return t?t.instance?t.instance:((i="svg"==t.nodeName?t.parentNode instanceof e.SVGElement?new p.Nested:new p.Doc:"linearGradient"==t.nodeName?new p.Gradient("linear"):"radialGradient"==t.nodeName?new p.Gradient("radial"):p[o(t.nodeName)]?new(p[o(t.nodeName)]):new p.Element(t)).type=t.nodeName,i.node=t,t.instance=i,i instanceof p.Doc&&i.namespace().defs(),i.setData(JSON.parse(t.getAttribute("svgjs:data"))||{}),i):null;var i},p.prepare=function(){var t=i.getElementsByTagName("body")[0],e=(t?new p.Doc(t):p.adopt(i.documentElement).nested()).size(2,0);p.parser={body:t||i.documentElement,draw:e.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").node,poly:e.polyline().node,path:e.path().node,native:p.create("svg")}},p.parser={native:p.create("svg")},i.addEventListener("DOMContentLoaded",function(){p.parser.draw||p.prepare()},!1),p.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},p.utils={map:function(t,e){for(var i=t.length,n=[],r=0;r<i;r++)n.push(e(t[r]));return n},filter:function(t,e){for(var i=t.length,n=[],r=0;r<i;r++)e(t[r])&&n.push(t[r]);return n},filterSVGElements:function(t){return this.filter(t,function(t){return t instanceof e.SVGElement})}},p.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},p.Color=function(e){var i,n;this.r=0,this.g=0,this.b=0,e&&("string"==typeof e?p.regex.isRgb.test(e)?(i=p.regex.rgb.exec(e.replace(p.regex.whitespace,"")),this.r=parseInt(i[1]),this.g=parseInt(i[2]),this.b=parseInt(i[3])):p.regex.isHex.test(e)&&(i=p.regex.hex.exec(4==(n=e).length?["#",n.substring(1,2),n.substring(1,2),n.substring(2,3),n.substring(2,3),n.substring(3,4),n.substring(3,4)].join(""):n),this.r=parseInt(i[1],16),this.g=parseInt(i[2],16),this.b=parseInt(i[3],16)):"object"===t(e)&&(this.r=e.r,this.g=e.g,this.b=e.b))},p.extend(p.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+a(this.r)+a(this.g)+a(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(t){return this.destination=new p.Color(t),this},at:function(t){return this.destination?(t=t<0?0:t>1?1:t,new p.Color({r:~~(this.r+(this.destination.r-this.r)*t),g:~~(this.g+(this.destination.g-this.g)*t),b:~~(this.b+(this.destination.b-this.b)*t)})):this}}),p.Color.test=function(t){return t+="",p.regex.isHex.test(t)||p.regex.isRgb.test(t)},p.Color.isRgb=function(t){return t&&"number"==typeof t.r&&"number"==typeof t.g&&"number"==typeof t.b},p.Color.isColor=function(t){return p.Color.isRgb(t)||p.Color.test(t)},p.Array=function(t,e){0==(t=(t||[]).valueOf()).length&&e&&(t=e.valueOf()),this.value=this.parse(t)},p.extend(p.Array,{toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(t){return t=t.valueOf(),Array.isArray(t)?t:this.split(t)}}),p.PointArray=function(t,e){p.Array.call(this,t,e||[[0,0]])},p.PointArray.prototype=new p.Array,p.PointArray.prototype.constructor=p.PointArray;for(var d={M:function(t,e,i){return e.x=i.x=t[0],e.y=i.y=t[1],["M",e.x,e.y]},L:function(t,e){return e.x=t[0],e.y=t[1],["L",t[0],t[1]]},H:function(t,e){return e.x=t[0],["H",t[0]]},V:function(t,e){return e.y=t[0],["V",t[0]]},C:function(t,e){return e.x=t[4],e.y=t[5],["C",t[0],t[1],t[2],t[3],t[4],t[5]]},Q:function(t,e){return e.x=t[2],e.y=t[3],["Q",t[0],t[1],t[2],t[3]]},Z:function(t,e,i){return e.x=i.x,e.y=i.y,["Z"]}},f="mlhvqtcsaz".split(""),g=0,v=f.length;g<v;++g)d[f[g]]=function(t){return function(e,i,n){if("H"==t)e[0]=e[0]+i.x;else if("V"==t)e[0]=e[0]+i.y;else if("A"==t)e[5]=e[5]+i.x,e[6]=e[6]+i.y;else for(var r=0,o=e.length;r<o;++r)e[r]=e[r]+(r%2?i.y:i.x);return d[t](e,i,n)}}(f[g].toUpperCase());p.PathArray=function(t,e){p.Array.call(this,t,e||[["M",0,0]])},p.PathArray.prototype=new p.Array,p.PathArray.prototype.constructor=p.PathArray,p.extend(p.PathArray,{toString:function(){return function(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e][0],null!=t[e][1]&&(n+=t[e][1],null!=t[e][2]&&(n+=" ",n+=t[e][2],null!=t[e][3]&&(n+=" ",n+=t[e][3],n+=" ",n+=t[e][4],null!=t[e][5]&&(n+=" ",n+=t[e][5],n+=" ",n+=t[e][6],null!=t[e][7]&&(n+=" ",n+=t[e][7])))));return n+" "}(this.value)},move:function(t,e){return this.bbox(),this},at:function(t){if(!this.destination)return this;for(var e=this.value,i=this.destination.value,n=[],r=new p.PathArray,o=0,a=e.length;o<a;o++){n[o]=[e[o][0]];for(var s=1,l=e[o].length;s<l;s++)n[o][s]=e[o][s]+(i[o][s]-e[o][s])*t;"A"===n[o][0]&&(n[o][4]=+(0!=n[o][4]),n[o][5]=+(0!=n[o][5]))}return r.value=n,r},parse:function(t){if(t instanceof p.PathArray)return t.valueOf();var e,i={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};t="string"==typeof t?t.replace(p.regex.numbersWithDots,n).replace(p.regex.pathLetters," $& ").replace(p.regex.hyphen,"$1 -").trim().split(p.regex.delimiter):t.reduce(function(t,e){return[].concat.call(t,e)},[]);var r=[],o=new p.Point,a=new p.Point,s=0,l=t.length;do{p.regex.isPathLetter.test(t[s])?(e=t[s],++s):"M"==e?e="L":"m"==e&&(e="l"),r.push(d[e].call(null,t.slice(s,s+=i[e.toUpperCase()]).map(parseFloat),o,a))}while(l>s);return r},bbox:function(){return p.parser.draw||p.prepare(),p.parser.path.setAttribute("d",this.toString()),p.parser.path.getBBox()}}),p.Number=p.invent({create:function(t,e){this.value=0,this.unit=e||"","number"==typeof t?this.value=isNaN(t)?0:isFinite(t)?t:t<0?-3.4e38:3.4e38:"string"==typeof t?(e=t.match(p.regex.numberAndUnit))&&(this.value=parseFloat(e[1]),"%"==e[5]?this.value/=100:"s"==e[5]&&(this.value*=1e3),this.unit=e[5]):t instanceof p.Number&&(this.value=t.valueOf(),this.unit=t.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(t){return t=new p.Number(t),new p.Number(this+t,this.unit||t.unit)},minus:function(t){return t=new p.Number(t),new p.Number(this-t,this.unit||t.unit)},times:function(t){return t=new p.Number(t),new p.Number(this*t,this.unit||t.unit)},divide:function(t){return t=new p.Number(t),new p.Number(this/t,this.unit||t.unit)},to:function(t){var e=new p.Number(this);return"string"==typeof t&&(e.unit=t),e},morph:function(t){return this.destination=new p.Number(t),t.relative&&(this.destination.value+=this.value),this},at:function(t){return this.destination?new p.Number(this.destination).minus(this).times(t).plus(this):this}}}),p.Element=p.invent({create:function(t){this._stroke=p.defaults.attrs.stroke,this._event=null,this.dom={},(this.node=t)&&(this.type=t.nodeName,this.node.instance=this,this._stroke=t.getAttribute("stroke")||this._stroke)},extend:{x:function(t){return this.attr("x",t)},y:function(t){return this.attr("y",t)},cx:function(t){return null==t?this.x()+this.width()/2:this.x(t-this.width()/2)},cy:function(t){return null==t?this.y()+this.height()/2:this.y(t-this.height()/2)},move:function(t,e){return this.x(t).y(e)},center:function(t,e){return this.cx(t).cy(e)},width:function(t){return this.attr("width",t)},height:function(t){return this.attr("height",t)},size:function(t,e){var i=s(this,t,e);return this.width(new p.Number(i.width)).height(new p.Number(i.height))},clone:function(t){this.writeDataToDom();var e=u(this.node.cloneNode(!0));return t?t.add(e):this.after(e),e},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(t){return this.after(t).remove(),t},addTo:function(t){return t.put(this)},putIn:function(t){return t.add(this)},id:function(t){return this.attr("id",t)},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var t=this.attr("class");return null==t?[]:t.trim().split(p.regex.delimiter)},hasClass:function(t){return-1!=this.classes().indexOf(t)},addClass:function(t){if(!this.hasClass(t)){var e=this.classes();e.push(t),this.attr("class",e.join(" "))}return this},removeClass:function(t){return this.hasClass(t)&&this.attr("class",this.classes().filter(function(e){return e!=t}).join(" ")),this},toggleClass:function(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t)},reference:function(t){return p.get(this.attr(t))},parent:function(t){var i=this;if(!i.node.parentNode)return null;if(i=p.adopt(i.node.parentNode),!t)return i;for(;i&&i.node instanceof e.SVGElement;){if("string"==typeof t?i.matches(t):i instanceof t)return i;if(!i.node.parentNode||"#document"==i.node.parentNode.nodeName)return null;i=p.adopt(i.node.parentNode)}},doc:function(){return this instanceof p.Doc?this:this.parent(p.Doc)},parents:function(t){var e=[],i=this;do{if(!(i=i.parent(t))||!i.node)break;e.push(i)}while(i.parent);return e},matches:function(t){return function(e,i){return(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector).call(e,t)}(this.node)},native:function(){return this.node},svg:function(t){var e=i.createElement("svg");if(!(t&&this instanceof p.Parent))return e.appendChild(t=i.createElement("svg")),this.writeDataToDom(),t.appendChild(this.node.cloneNode(!0)),e.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");e.innerHTML="<svg>"+t.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var n=0,r=e.firstChild.childNodes.length;n<r;n++)this.node.appendChild(e.firstChild.firstChild);return this},writeDataToDom:function(){return(this.each||this.lines)&&(this.each?this:this.lines()).each(function(){this.writeDataToDom()}),this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(t){return this.dom=t,this},is:function(t){return function(e,i){return e instanceof t}(this)}}}),p.easing={"-":function(t){return t},"<>":function(t){return-Math.cos(t*Math.PI)/2+.5},">":function(t){return Math.sin(t*Math.PI/2)},"<":function(t){return 1-Math.cos(t*Math.PI/2)}},p.morph=function(t){return function(e,i){return new p.MorphObj(e,i).at(t)}},p.Situation=p.invent({create:function(t){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new p.Number(t.duration).valueOf(),this.delay=new p.Number(t.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=t.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),p.FX=p.invent({create:function(t){this._target=t,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(e,i,n){"object"===t(e)&&(i=e.ease,n=e.delay,e=e.duration);var r=new p.Situation({duration:e||1e3,delay:n||0,ease:p.easing[i||"-"]||i});return this.queue(r),this},target:function(t){return t&&t instanceof p.Element?(this._target=t,this):this._target},timeToAbsPos:function(t){return(t-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(t){return this.situation.duration/this._speed*t+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=e.requestAnimationFrame((function(){this.step()}).bind(this))},stopAnimFrame:function(){e.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(t){return("function"==typeof t||t instanceof p.Situation)&&this.situations.push(t),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof p.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var t,e=this.situation;if(e.init)return this;for(var i in e.animations){t=this.target()[i](),Array.isArray(t)||(t=[t]),Array.isArray(e.animations[i])||(e.animations[i]=[e.animations[i]]);for(var n=t.length;n--;)e.animations[i][n]instanceof p.Number&&(t[n]=new p.Number(t[n])),e.animations[i][n]=t[n].morph(e.animations[i][n])}for(var i in e.attrs)e.attrs[i]=new p.MorphObj(this.target().attr(i),e.attrs[i]);for(var i in e.styles)e.styles[i]=new p.MorphObj(this.target().style(i),e.styles[i]);return e.initialTransformation=this.target().matrixify(),e.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(t,e){var i=this.active;return this.active=!1,e&&this.clearQueue(),t&&this.situation&&(!i&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},after:function(t){var e=this.last();return this.target().on("finished.fx",function i(n){n.detail.situation==e&&(t.call(this,e),this.off("finished.fx",i))}),this._callStart()},during:function(t){var e=this.last(),i=function(i){i.detail.situation==e&&t.call(this,i.detail.pos,p.morph(i.detail.pos),i.detail.eased,e)};return this.target().off("during.fx",i).on("during.fx",i),this.after(function(){this.off("during.fx",i)}),this._callStart()},afterAll:function(t){var e=function e(i){t.call(this),this.off("allfinished.fx",e)};return this.target().off("allfinished.fx",e).on("allfinished.fx",e),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(t,e,i){return this.last()[i||"animations"][t]=e,this._callStart()},step:function(t){var e,i,n;t||(this.absPos=this.timeToAbsPos(+new Date)),!1!==this.situation.loops?(e=Math.max(this.absPos,0),i=Math.floor(e),!0===this.situation.loops||i<this.situation.loops?(this.pos=e-i,n=this.situation.loop,this.situation.loop=i):(this.absPos=this.situation.loops,this.pos=1,n=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=Boolean((this.situation.loop-n)%2))):(this.absPos=Math.min(this.absPos,1),this.pos=this.absPos),this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var r=this.situation.ease(this.pos);for(var o in this.situation.once)o>this.lastPos&&o<=r&&(this.situation.once[o].call(this.target(),this.pos,r),delete this.situation.once[o]);return this.active&&this.target().fire("during",{pos:this.pos,eased:r,fx:this,situation:this.situation}),this.situation?(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=r,this):this},eachAt:function(){var t,e=this,i=this.target(),n=this.situation;for(var r in n.animations)t=[].concat(n.animations[r]).map(function(t){return"string"!=typeof t&&t.at?t.at(n.ease(e.pos),e.pos):t}),i[r].apply(i,t);for(var r in n.attrs)t=[r].concat(n.attrs[r]).map(function(t){return"string"!=typeof t&&t.at?t.at(n.ease(e.pos),e.pos):t}),i.attr.apply(i,t);for(var r in n.styles)t=[r].concat(n.styles[r]).map(function(t){return"string"!=typeof t&&t.at?t.at(n.ease(e.pos),e.pos):t}),i.style.apply(i,t);if(n.transforms.length){t=n.initialTransformation,r=0;for(var o=n.transforms.length;r<o;r++){var a=n.transforms[r];a instanceof p.Matrix?t=a.relative?t.multiply((new p.Matrix).morph(a).at(n.ease(this.pos))):t.morph(a).at(n.ease(this.pos)):(a.relative||a.undo(t.extract()),t=t.multiply(a.at(n.ease(this.pos))))}i.matrix(t)}return this},once:function(t,e,i){var n=this.last();return i||(t=n.ease(t)),n.once[t]=e,this},_callStart:function(){return setTimeout((function(){this.start()}).bind(this),0),this}},parent:p.Element,construct:{animate:function(t,e,i){return(this.fx||(this.fx=new p.FX(this))).animate(t,e,i)},delay:function(t){return(this.fx||(this.fx=new p.FX(this))).delay(t)},stop:function(t,e){return this.fx&&this.fx.stop(t,e),this},finish:function(){return this.fx&&this.fx.finish(),this}}}),p.MorphObj=p.invent({create:function(t,e){return p.Color.isColor(e)?new p.Color(t).morph(e):p.regex.delimiter.test(t)?p.regex.pathLetters.test(t)?new p.PathArray(t).morph(e):new p.Array(t).morph(e):p.regex.numberAndUnit.test(e)?new p.Number(t).morph(e):(this.value=t,void(this.destination=e))},extend:{at:function(t,e){return e<1?this.value:this.destination},valueOf:function(){return this.value}}}),p.extend(p.FX,{attr:function(e,i,n){if("object"===t(e))for(var r in e)this.attr(r,e[r]);else this.add(e,i,"attrs");return this},plot:function(t,e,i,n){return 4==arguments.length?this.plot([t,e,i,n]):this.add("plot",new(this.target().morphArray)(t))}}),p.Box=p.invent({create:function(e,i,n,r){if(!("object"!==t(e)||e instanceof p.Element))return p.Box.call(this,null!=e.left?e.left:e.x,null!=e.top?e.top:e.y,e.width,e.height);4==arguments.length&&(this.x=e,this.y=i,this.width=n,this.height=r),function(t){null==t.x&&(t.x=0,t.y=0,t.width=0,t.height=0),t.w=t.width,t.h=t.height,t.x2=t.x+t.width,t.y2=t.y+t.height,t.cx=t.x+t.width/2,t.cy=t.y+t.height/2}(this)}}),p.BBox=p.invent({create:function(t){if(p.Box.apply(this,[].slice.call(arguments)),t instanceof p.Element){var e;try{if(!i.documentElement.contains){for(var n=t.node;n.parentNode;)n=n.parentNode;if(n!=i)throw new Error("Element not in the dom")}e=t.node.getBBox()}catch(i){if(t instanceof p.Shape){p.parser.draw||p.prepare();var r=t.clone(p.parser.draw.instance).show();e=r.node.getBBox(),r.remove()}else e={x:t.node.clientLeft,y:t.node.clientTop,width:t.node.clientWidth,height:t.node.clientHeight}}p.Box.call(this,e)}},inherit:p.Box,parent:p.Element,construct:{bbox:function(){return new p.BBox(this)}}}),p.BBox.prototype.constructor=p.BBox,p.Matrix=p.invent({create:function(e){var i=h([1,0,0,1,0,0]);e=e instanceof p.Element?e.matrixify():"string"==typeof e?h(e.split(p.regex.delimiter).map(parseFloat)):6==arguments.length?h([].slice.call(arguments)):Array.isArray(e)?h(e):"object"===t(e)?e:i;for(var n=m.length-1;n>=0;--n)this[m[n]]=null!=e[m[n]]?e[m[n]]:i[m[n]]},extend:{extract:function(){var t=l(this,0,1),e=(l(this,1,0),180/Math.PI*Math.atan2(t.y,t.x)-90);return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(e*Math.PI/180)+this.f*Math.sin(e*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(e*Math.PI/180)+this.e*Math.sin(-e*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),rotation:e,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new p.Matrix(this)}},clone:function(){return new p.Matrix(this)},morph:function(t){return this.destination=new p.Matrix(t),this},multiply:function(t){return new p.Matrix(this.native().multiply(function(t){return t instanceof p.Matrix||(t=new p.Matrix(t)),t}(t).native()))},inverse:function(){return new p.Matrix(this.native().inverse())},translate:function(t,e){return new p.Matrix(this.native().translate(t||0,e||0))},native:function(){for(var t=p.parser.native.createSVGMatrix(),e=m.length-1;e>=0;e--)t[m[e]]=this[m[e]];return t},toString:function(){return"matrix("+c(this.a)+","+c(this.b)+","+c(this.c)+","+c(this.d)+","+c(this.e)+","+c(this.f)+")"}},parent:p.Element,construct:{ctm:function(){return new p.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof p.Nested){var t=this.rect(1,1),e=t.node.getScreenCTM();return t.remove(),new p.Matrix(e)}return new p.Matrix(this.node.getScreenCTM())}}}),p.Point=p.invent({create:function(e,i){var n;n=Array.isArray(e)?{x:e[0],y:e[1]}:"object"===t(e)?{x:e.x,y:e.y}:null!=e?{x:e,y:null!=i?i:e}:{x:0,y:0},this.x=n.x,this.y=n.y},extend:{clone:function(){return new p.Point(this)},morph:function(t,e){return this.destination=new p.Point(t,e),this}}}),p.extend(p.Element,{point:function(t,e){return new p.Point(t,e).transform(this.screenCTM().inverse())}}),p.extend(p.Element,{attr:function(e,i,n){if(null==e){for(e={},n=(i=this.node.attributes).length-1;n>=0;n--)e[i[n].nodeName]=p.regex.isNumber.test(i[n].nodeValue)?parseFloat(i[n].nodeValue):i[n].nodeValue;return e}if("object"===t(e))for(var r in e)this.attr(r,e[r]);else if(null===i)this.node.removeAttribute(e);else{if(null==i)return null==(i=this.node.getAttribute(e))?p.defaults.attrs[e]:p.regex.isNumber.test(i)?parseFloat(i):i;"stroke-width"==e?this.attr("stroke",parseFloat(i)>0?this._stroke:null):"stroke"==e&&(this._stroke=i),"fill"!=e&&"stroke"!=e||(p.regex.isImage.test(i)&&(i=this.doc().defs().image(i,0,0)),i instanceof p.Image&&(i=this.doc().defs().pattern(0,0,function(){this.add(i)}))),"number"==typeof i?i=new p.Number(i):p.Color.isColor(i)?i=new p.Color(i):Array.isArray(i)&&(i=new p.Array(i)),"leading"==e?this.leading&&this.leading(i):"string"==typeof n?this.node.setAttributeNS(n,e,i.toString()):this.node.setAttribute(e,i.toString()),!this.rebuild||"font-size"!=e&&"x"!=e||this.rebuild(e,i)}return this}}),p.extend(p.Element,{transform:function(e,i){var n;return"object"!==t(e)?(n=new p.Matrix(this).extract(),"string"==typeof e?n[e]:n):(n=new p.Matrix(this),i=!!i||!!e.relative,null!=e.a&&(n=i?n.multiply(new p.Matrix(e)):new p.Matrix(e)),this.attr("transform",n))}}),p.extend(p.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(p.regex.transforms).slice(0,-1).map(function(t){var e=t.trim().split("(");return[e[0],e[1].split(p.regex.delimiter).map(function(t){return parseFloat(t)})]}).reduce(function(t,e){return"matrix"==e[0]?t.multiply(h(e[1])):t[e[0]].apply(t,e[1])},new p.Matrix)},toParent:function(t){if(this==t)return this;var e=this.screenCTM(),i=t.screenCTM().inverse();return this.addTo(t).untransform().transform(i.multiply(e)),this},toDoc:function(){return this.toParent(this.doc())}}),p.Transformation=p.invent({create:function(e,i){if(arguments.length>1&&"boolean"!=typeof i)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(e))for(var n=0,r=this.arguments.length;n<r;++n)this[this.arguments[n]]=e[n];else if("object"===t(e))for(n=0,r=this.arguments.length;n<r;++n)this[this.arguments[n]]=e[this.arguments[n]];this.inversed=!1,!0===i&&(this.inversed=!0)}}),p.Translate=p.invent({parent:p.Matrix,inherit:p.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),p.extend(p.Element,{style:function(e,i){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"===t(e))for(var n in e)this.style(n,e[n]);else{if(!p.regex.isCss.test(e))return this.node.style[r(e)];for(e=e.split(/\s*;\s*/).filter(function(t){return!!t}).map(function(t){return t.split(/\s*:\s*/)});i=e.pop();)this.style(i[0],i[1])}else this.node.style[r(e)]=null===i||p.regex.isBlank.test(i)?"":i;return this}}),p.Parent=p.invent({create:function(t){this.constructor.call(this,t)},inherit:p.Element,extend:{children:function(){return p.utils.map(p.utils.filterSVGElements(this.node.childNodes),function(t){return p.adopt(t)})},add:function(t,e){return null==e?this.node.appendChild(t.node):t.node!=this.node.childNodes[e]&&this.node.insertBefore(t.node,this.node.childNodes[e]),this},put:function(t,e){return this.add(t,e),t},has:function(t){return this.index(t)>=0},index:function(t){return[].slice.call(this.node.childNodes).indexOf(t.node)},get:function(t){return p.adopt(this.node.childNodes[t])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(t,e){for(var i=this.children(),n=0,r=i.length;n<r;n++)i[n]instanceof p.Element&&t.apply(i[n],[n,i]),e&&i[n]instanceof p.Container&&i[n].each(t,e);return this},removeElement:function(t){return this.node.removeChild(t.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),p.extend(p.Parent,{ungroup:function(t,e){return 0===e||this instanceof p.Defs||this.node==p.parser.draw?this:(t=t||(this instanceof p.Doc?this:this.parent(p.Parent)),e=e||1/0,this.each(function(){return this instanceof p.Defs?this:this instanceof p.Parent?this.ungroup(t,e-1):this.toParent(t)}),this.node.firstChild||this.remove(),this)},flatten:function(t,e){return this.ungroup(t,e)}}),p.Container=p.invent({create:function(t){this.constructor.call(this,t)},inherit:p.Parent}),p.ViewBox=p.invent({parent:p.Container,construct:{}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(t){p.Element.prototype[t]=function(e){return p.on(this.node,t,e),this}}),p.listeners=[],p.handlerMap=[],p.listenerId=0,p.on=function(t,e,i,n,r){var o=i.bind(n||t.instance||t),a=(p.handlerMap.indexOf(t)+1||p.handlerMap.push(t))-1,s=e.split(".")[0],l=e.split(".")[1]||"*";p.listeners[a]=p.listeners[a]||{},p.listeners[a][s]=p.listeners[a][s]||{},p.listeners[a][s][l]=p.listeners[a][s][l]||{},i._svgjsListenerId||(i._svgjsListenerId=++p.listenerId),p.listeners[a][s][l][i._svgjsListenerId]=o,t.addEventListener(s,o,r||!1)},p.off=function(t,e,i){var n=p.handlerMap.indexOf(t),r=e&&e.split(".")[0],o=e&&e.split(".")[1],a="";if(-1!=n)if(i){if("function"==typeof i&&(i=i._svgjsListenerId),!i)return;p.listeners[n][r]&&p.listeners[n][r][o||"*"]&&(t.removeEventListener(r,p.listeners[n][r][o||"*"][i],!1),delete p.listeners[n][r][o||"*"][i])}else if(o&&r){if(p.listeners[n][r]&&p.listeners[n][r][o]){for(var s in p.listeners[n][r][o])p.off(t,[r,o].join("."),s);delete p.listeners[n][r][o]}}else if(o)for(var l in p.listeners[n])for(var a in p.listeners[n][l])o===a&&p.off(t,[l,o].join("."));else if(r){if(p.listeners[n][r]){for(var a in p.listeners[n][r])p.off(t,[r,a].join("."));delete p.listeners[n][r]}}else{for(var l in p.listeners[n])p.off(t,l);delete p.listeners[n],delete p.handlerMap[n]}},p.extend(p.Element,{on:function(t,e,i,n){return p.on(this.node,t,e,i,n),this},off:function(t,e){return p.off(this.node,t,e),this},fire:function(t,i){return this.node.dispatchEvent(t instanceof e.Event?t:t=new p.CustomEvent(t,{detail:i,cancelable:!0})),this._event=t,this},event:function(){return this._event}}),p.Defs=p.invent({create:"defs",inherit:p.Container}),p.G=p.invent({create:"g",inherit:p.Container,extend:{x:function(t){return null==t?this.transform("x"):this.transform({x:t-this.x()},!0)}},construct:{group:function(){return this.put(new p.G)}}}),p.Doc=p.invent({create:function(t){t&&("svg"==(t="string"==typeof t?i.getElementById(t):t).nodeName?this.constructor.call(this,t):(this.constructor.call(this,p.create("svg")),t.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:p.Container,extend:{namespace:function(){return this.attr({xmlns:p.ns,version:"1.1"}).attr("xmlns:xlink",p.xlink,p.xmlns).attr("xmlns:svgjs",p.svgjs,p.xmlns)},defs:function(){var t;return this._defs||(this._defs=(t=this.node.getElementsByTagName("defs")[0])?p.adopt(t):new p.Defs,this.node.appendChild(this._defs.node)),this._defs},parent:function(){return this.node.parentNode&&"#document"!=this.node.parentNode.nodeName?this.node.parentNode:null},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,p.parser.draw&&!p.parser.draw.parentNode&&this.node.appendChild(p.parser.draw),this},clone:function(t){this.writeDataToDom();var e=this.node,i=u(e.cloneNode(!0));return t?(t.node||t).appendChild(i.node):e.parentNode.insertBefore(i.node,e.nextSibling),i}}}),p.extend(p.Element,{}),p.Gradient=p.invent({create:function(t){this.constructor.call(this,p.create(t+"Gradient")),this.type=t},inherit:p.Container,extend:{at:function(t,e,i){return this.put(new p.Stop).update(t,e,i)},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(t,e,i){return"transform"==t&&(t="gradientTransform"),p.Container.prototype.attr.call(this,t,e,i)}},construct:{gradient:function(t,e){return this.defs().gradient(t,e)}}}),p.extend(p.Gradient,p.FX,{from:function(t,e){return this.attr("radial"==(this._target||this).type?{fx:new p.Number(t),fy:new p.Number(e)}:{x1:new p.Number(t),y1:new p.Number(e)})},to:function(t,e){return this.attr("radial"==(this._target||this).type?{cx:new p.Number(t),cy:new p.Number(e)}:{x2:new p.Number(t),y2:new p.Number(e)})}}),p.extend(p.Defs,{gradient:function(t,e){return this.put(new p.Gradient(t)).update(e)}}),p.Stop=p.invent({create:"stop",inherit:p.Element,extend:{update:function(t){return("number"==typeof t||t instanceof p.Number)&&(t={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",new p.Number(t.offset)),this}}}),p.Pattern=p.invent({create:"pattern",inherit:p.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},toString:function(){return this.fill()},attr:function(t,e,i){return"transform"==t&&(t="patternTransform"),p.Container.prototype.attr.call(this,t,e,i)}},construct:{pattern:function(t,e,i){return this.defs().pattern(t,e,i)}}}),p.extend(p.Defs,{pattern:function(t,e,i){return this.put(new p.Pattern).update(i).attr({x:0,y:0,width:t,height:e,patternUnits:"userSpaceOnUse"})}}),p.Shape=p.invent({create:function(t){this.constructor.call(this,t)},inherit:p.Element}),p.Symbol=p.invent({create:"symbol",inherit:p.Container,construct:{symbol:function(){return this.put(new p.Symbol)}}}),p.Use=p.invent({create:"use",inherit:p.Shape,extend:{element:function(t,e){return this.attr("href",(e||"")+"#"+t,p.xlink)}},construct:{use:function(t,e){return this.put(new p.Use).element(t,e)}}}),p.Rect=p.invent({create:"rect",inherit:p.Shape,construct:{rect:function(t,e){return this.put(new p.Rect).size(t,e)}}}),p.Circle=p.invent({create:"circle",inherit:p.Shape,construct:{circle:function(t){return this.put(new p.Circle).rx(new p.Number(t).divide(2)).move(0,0)}}}),p.extend(p.Circle,p.FX,{rx:function(t){return this.attr("r",t)},ry:function(t){return this.rx(t)}}),p.Ellipse=p.invent({create:"ellipse",inherit:p.Shape,construct:{ellipse:function(t,e){return this.put(new p.Ellipse).size(t,e).move(0,0)}}}),p.extend(p.Ellipse,p.Rect,p.FX,{rx:function(t){return this.attr("rx",t)},ry:function(t){return this.attr("ry",t)}}),p.extend(p.Circle,p.Ellipse,{x:function(t){return null==t?this.cx()-this.rx():this.cx(t+this.rx())},y:function(t){return null==t?this.cy()-this.ry():this.cy(t+this.ry())},cx:function(t){return null==t?this.attr("cx"):this.attr("cx",t)},cy:function(t){return null==t?this.attr("cy"):this.attr("cy",t)},width:function(t){return null==t?2*this.rx():this.rx(new p.Number(t).divide(2))},height:function(t){return null==t?2*this.ry():this.ry(new p.Number(t).divide(2))},size:function(t,e){var i=s(this,t,e);return this.rx(new p.Number(i.width).divide(2)).ry(new p.Number(i.height).divide(2))}}),p.Line=p.invent({create:"line",inherit:p.Shape,extend:{array:function(){return new p.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(t,e,i,n){return null==t?this.array():(t=void 0!==e?{x1:t,y1:e,x2:i,y2:n}:new p.PointArray(t).toLine(),this.attr(t))},move:function(t,e){return this.attr(this.array().move(t,e).toLine())},size:function(t,e){var i=s(this,t,e);return this.attr(this.array().size(i.width,i.height).toLine())}},construct:{line:function(t,e,i,n){return p.Line.prototype.plot.apply(this.put(new p.Line),null!=t?[t,e,i,n]:[0,0,0,0])}}}),p.Polyline=p.invent({create:"polyline",inherit:p.Shape,construct:{polyline:function(t){return this.put(new p.Polyline).plot(t||new p.PointArray)}}}),p.Polygon=p.invent({create:"polygon",inherit:p.Shape,construct:{polygon:function(t){return this.put(new p.Polygon).plot(t||new p.PointArray)}}}),p.extend(p.Polyline,p.Polygon,{array:function(){return this._array||(this._array=new p.PointArray(this.attr("points")))},plot:function(t){return null==t?this.array():this.clear().attr("points","string"==typeof t?t:this._array=new p.PointArray(t))},clear:function(){return delete this._array,this},move:function(t,e){return this.attr("points",this.array().move(t,e))},size:function(t,e){var i=s(this,t,e);return this.attr("points",this.array().size(i.width,i.height))}}),p.extend(p.Line,p.Polyline,p.Polygon,{morphArray:p.PointArray,x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},width:function(t){var e=this.bbox();return null==t?e.width:this.size(t,e.height)},height:function(t){var e=this.bbox();return null==t?e.height:this.size(e.width,t)}}),p.Path=p.invent({create:"path",inherit:p.Shape,extend:{morphArray:p.PathArray,array:function(){return this._array||(this._array=new p.PathArray(this.attr("d")))},plot:function(t){return null==t?this.array():this.clear().attr("d","string"==typeof t?t:this._array=new p.PathArray(t))},clear:function(){return delete this._array,this}},construct:{path:function(t){return this.put(new p.Path).plot(t||new p.PathArray)}}}),p.Image=p.invent({create:"image",inherit:p.Shape,extend:{load:function(t){if(!t)return this;var i=this,n=new e.Image;return p.on(n,"load",function(){p.off(n);var e=i.parent(p.Pattern);null!==e&&(0==i.width()&&0==i.height()&&i.size(n.width,n.height),e&&0==e.width()&&0==e.height()&&e.size(i.width(),i.height()),"function"==typeof i._loaded&&i._loaded.call(i,{width:n.width,height:n.height,ratio:n.width/n.height,url:t}))}),p.on(n,"error",function(t){p.off(n),"function"==typeof i._error&&i._error.call(i,t)}),this.attr("href",n.src=this.src=t,p.xlink)},loaded:function(t){return this._loaded=t,this},error:function(t){return this._error=t,this}},construct:{image:function(t,e,i){return this.put(new p.Image).load(t).size(e||0,i||e||0)}}}),p.Text=p.invent({create:function(){this.constructor.call(this,p.create("text")),this.dom.leading=new p.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",p.defaults.attrs["font-family"])},inherit:p.Shape,extend:{x:function(t){return null==t?this.attr("x"):this.attr("x",t)},text:function(t){if(void 0===t){t="";for(var e=this.node.childNodes,i=0,n=e.length;i<n;++i)0!=i&&3!=e[i].nodeType&&1==p.adopt(e[i]).dom.newLined&&(t+="\n"),t+=e[i].textContent;return t}if(this.clear().build(!0),"function"==typeof t)t.call(this,this);else{i=0;for(var r=(t=t.split("\n")).length;i<r;i++)this.tspan(t[i]).newLine()}return this.build(!1).rebuild()},size:function(t){return this.attr("font-size",t).rebuild()},leading:function(t){return null==t?this.dom.leading:(this.dom.leading=new p.Number(t),this.rebuild())},lines:function(){var t=(this.textPath&&this.textPath()||this).node,e=p.utils.map(p.utils.filterSVGElements(t.childNodes),function(t){return p.adopt(t)});return new p.Set(e)},rebuild:function(t){if("boolean"==typeof t&&(this._rebuild=t),this._rebuild){var e=this,i=0,n=this.dom.leading*new p.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(e.textPath()||this.attr("x",e.attr("x")),"\n"==this.text()?i+=n:(this.attr("dy",n+i),i=0))}),this.fire("rebuild")}return this},build:function(t){return this._build=!!t,this},setData:function(t){return this.dom=t,this.dom.leading=new p.Number(t.leading||1.3),this}},construct:{text:function(t){return this.put(new p.Text).text(t)},plain:function(t){return this.put(new p.Text).plain(t)}}}),p.Tspan=p.invent({create:"tspan",inherit:p.Shape,extend:{text:function(t){return null==t?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof t?t.call(this,this):this.plain(t),this)},dx:function(t){return this.attr("dx",t)},dy:function(t){return this.attr("dy",t)},newLine:function(){var t=this.parent(p.Text);return this.dom.newLined=!0,this.dy(t.dom.leading*t.attr("font-size")).attr("x",t.x())}}}),p.extend(p.Text,p.Tspan,{plain:function(t){return!1===this._build&&this.clear(),this.node.appendChild(i.createTextNode(t)),this},tspan:function(t){var e=(this.textPath&&this.textPath()||this).node,i=new p.Tspan;return!1===this._build&&this.clear(),e.appendChild(i.node),i.text(t)},clear:function(){for(var t=(this.textPath&&this.textPath()||this).node;t.hasChildNodes();)t.removeChild(t.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),p.TextPath=p.invent({create:"textPath",inherit:p.Parent,parent:p.Text,construct:{morphArray:p.PathArray,array:function(){var t=this.track();return t?t.array():null},plot:function(t){var e=this.track(),i=null;return e&&(i=e.plot(t)),null==t?i:this},track:function(){var t=this.textPath();if(t)return t.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return p.adopt(this.node.firstChild)}}}),p.Nested=p.invent({create:function(){this.constructor.call(this,p.create("svg")),this.style("overflow","visible")},inherit:p.Container,construct:{nested:function(){return this.put(new p.Nested)}}});var y={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(t,e){return"color"==e?t:t+"-"+e}};["fill","stroke"].forEach(function(t){var e={};e[t]=function(e){if(void 0===e)return this;if("string"==typeof e||p.Color.isRgb(e)||e&&"function"==typeof e.fill)this.attr(t,e);else for(var i=y[t].length-1;i>=0;i--)null!=e[y[t][i]]&&this.attr(y.prefix(t,y[t][i]),e[y[t][i]]);return this},p.extend(p.Element,p.FX,e)}),p.extend(p.Element,p.FX,{translate:function(t,e){return this.transform({x:t,y:e})},matrix:function(t){return this.attr("transform",new p.Matrix(6==arguments.length?[].slice.call(arguments):t))},opacity:function(t){return this.attr("opacity",t)},dx:function(t){return this.x(new p.Number(t).plus(this instanceof p.FX?0:this.x()),!0)},dy:function(t){return this.y(new p.Number(t).plus(this instanceof p.FX?0:this.y()),!0)}}),p.extend(p.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(t){return this.node.getPointAtLength(t)}}),p.Set=p.invent({create:function(t){Array.isArray(t)?this.members=t:this.clear()},extend:{add:function(){for(var t=[].slice.call(arguments),e=0,i=t.length;e<i;e++)this.members.push(t[e]);return this},remove:function(t){var e=this.index(t);return e>-1&&this.members.splice(e,1),this},each:function(t){for(var e=0,i=this.members.length;e<i;e++)t.apply(this.members[e],[e,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(t){return this.index(t)>=0},index:function(t){return this.members.indexOf(t)},get:function(t){return this.members[t]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members}},construct:{set:function(t){return new p.Set(t)}}}),p.FX.Set=p.invent({create:function(t){this.set=t}}),p.Set.inherit=function(){var t=[];for(var e in p.Shape.prototype)"function"==typeof p.Shape.prototype[e]&&"function"!=typeof p.Set.prototype[e]&&t.push(e);for(var e in t.forEach(function(t){p.Set.prototype[t]=function(){for(var e=0,i=this.members.length;e<i;e++)this.members[e]&&"function"==typeof this.members[e][t]&&this.members[e][t].apply(this.members[e],arguments);return"animate"==t?this.fx||(this.fx=new p.FX.Set(this)):this}}),t=[],p.FX.prototype)"function"==typeof p.FX.prototype[e]&&"function"!=typeof p.FX.Set.prototype[e]&&t.push(e);t.forEach(function(t){p.FX.Set.prototype[t]=function(){for(var e=0,i=this.set.members.length;e<i;e++)this.set.members[e].fx[t].apply(this.set.members[e].fx,arguments);return this}})},p.extend(p.Element,{}),p.extend(p.Element,{remember:function(e,i){if("object"===t(arguments[0]))for(var n in e)this.remember(n,e[n]);else{if(1==arguments.length)return this.memory()[e];this.memory()[e]=i}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var t=arguments.length-1;t>=0;t--)delete this.memory()[arguments[t]];return this},memory:function(){return this._memory||(this._memory={})}}),p.get=function(t){var e=i.getElementById(function(e){var i=(t||"").toString().match(p.regex.reference);if(i)return i[1]}()||t);return p.adopt(e)},p.select=function(t,e){return new p.Set(p.utils.map((e||i).querySelectorAll(t),function(t){return p.adopt(t)}))},p.extend(p.Parent,{select:function(t){return p.select(t,this.node)}});var m="abcdef".split("");if("function"!=typeof e.CustomEvent){var _=function(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=i.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n};_.prototype=e.Event.prototype,p.CustomEvent=_}else p.CustomEvent=e.CustomEvent;return p},"function"==typeof define&&define.amd?define(function(){return d(p,p.document)}):"object"===("undefined"==typeof exports?"undefined":t(exports))&&"undefined"!=typeof module?module.exports=p.document?d(p,p.document):function(t){return d(t,t.document)}:p.SVG=d(p,p.document),(function(){function t(t){return Array.isArray(t)&&(t=new SVG.Array(t)),t.toString().replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}function e(){var t=function(){};for(var e in"function"==typeof arguments[arguments.length-1]&&(t=arguments[arguments.length-1],Array.prototype.splice.call(arguments,arguments.length-1,1)),arguments)for(var i in arguments[e])t(arguments[e][i],i,arguments[e])}SVG.Filter=SVG.invent({create:"filter",inherit:SVG.Parent,extend:{source:"SourceGraphic",sourceAlpha:"SourceAlpha",background:"BackgroundImage",backgroundAlpha:"BackgroundAlpha",fill:"FillPaint",stroke:"StrokePaint",autoSetIn:!0,put:function(t,e){return this.add(t,e),!t.attr("in")&&this.autoSetIn&&t.attr("in",this.source),t.attr("result")||t.attr("result",t),t},blend:function(t,e,i){return this.put(new SVG.BlendEffect(t,e,i))},colorMatrix:function(t,e){return this.put(new SVG.ColorMatrixEffect(t,e))},convolveMatrix:function(t){return this.put(new SVG.ConvolveMatrixEffect(t))},componentTransfer:function(t){return this.put(new SVG.ComponentTransferEffect(t))},composite:function(t,e,i){return this.put(new SVG.CompositeEffect(t,e,i))},flood:function(t,e){return this.put(new SVG.FloodEffect(t,e))},offset:function(t,e){return this.put(new SVG.OffsetEffect(t,e))},image:function(t){return this.put(new SVG.ImageEffect(t))},merge:function(){var t=[void 0];for(var e in arguments)t.push(arguments[e]);return this.put(new(SVG.MergeEffect.bind.apply(SVG.MergeEffect,t)))},gaussianBlur:function(t,e){return this.put(new SVG.GaussianBlurEffect(t,e))},morphology:function(t,e){return this.put(new SVG.MorphologyEffect(t,e))},diffuseLighting:function(t,e,i){return this.put(new SVG.DiffuseLightingEffect(t,e,i))},displacementMap:function(t,e,i,n,r){return this.put(new SVG.DisplacementMapEffect(t,e,i,n,r))},specularLighting:function(t,e,i,n){return this.put(new SVG.SpecularLightingEffect(t,e,i,n))},tile:function(){return this.put(new SVG.TileEffect)},turbulence:function(t,e,i,n,r){return this.put(new SVG.TurbulenceEffect(t,e,i,n,r))},toString:function(){return"url(#"+this.attr("id")+")"}}}),SVG.extend(SVG.Defs,{filter:function(t){var e=this.put(new SVG.Filter);return"function"==typeof t&&t.call(e,e),e}}),SVG.extend(SVG.Container,{filter:function(t){return this.defs().filter(t)}}),SVG.extend(SVG.Element,SVG.G,SVG.Nested,{filter:function(t){return this.filterer=t instanceof SVG.Element?t:this.doc().filter(t),this.doc()&&this.filterer.doc()!==this.doc()&&this.doc().defs().add(this.filterer),this.attr("filter",this.filterer),this.filterer},unfilter:function(t){return this.filterer&&!0===t&&this.filterer.remove(),delete this.filterer,this.attr("filter",null)}}),SVG.Effect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(t){return null==t?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",t)},result:function(t){return null==t?this.attr("result"):this.attr("result",t)},toString:function(){return this.result()}}}),SVG.ParentEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Parent,extend:{in:function(t){return null==t?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",t)},result:function(t){return null==t?this.attr("result"):this.attr("result",t)},toString:function(){return this.result()}}});var i={blend:function(t,e){return this.parent()&&this.parent().blend(this,t,e)},colorMatrix:function(t,e){return this.parent()&&this.parent().colorMatrix(t,e).in(this)},convolveMatrix:function(t){return this.parent()&&this.parent().convolveMatrix(t).in(this)},componentTransfer:function(t){return this.parent()&&this.parent().componentTransfer(t).in(this)},composite:function(t,e){return this.parent()&&this.parent().composite(this,t,e)},flood:function(t,e){return this.parent()&&this.parent().flood(t,e)},offset:function(t,e){return this.parent()&&this.parent().offset(t,e).in(this)},image:function(t){return this.parent()&&this.parent().image(t)},merge:function(){return this.parent()&&this.parent().merge.apply(this.parent(),[this].concat(arguments))},gaussianBlur:function(t,e){return this.parent()&&this.parent().gaussianBlur(t,e).in(this)},morphology:function(t,e){return this.parent()&&this.parent().morphology(t,e).in(this)},diffuseLighting:function(t,e,i){return this.parent()&&this.parent().diffuseLighting(t,e,i).in(this)},displacementMap:function(t,e,i,n){return this.parent()&&this.parent().displacementMap(this,t,e,i,n)},specularLighting:function(t,e,i,n){return this.parent()&&this.parent().specularLighting(t,e,i,n).in(this)},tile:function(){return this.parent()&&this.parent().tile().in(this)},turbulence:function(t,e,i,n,r){return this.parent()&&this.parent().turbulence(t,e,i,n,r).in(this)}};SVG.extend(SVG.Effect,i),SVG.extend(SVG.ParentEffect,i),SVG.ChildEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(t){this.attr("in",t)}}});var n={blend:function(t,e,i){this.attr({in:t,in2:e,mode:i||"normal"})},colorMatrix:function(e,i){"matrix"==e&&(i=t(i)),this.attr({type:e,values:void 0===i?null:i})},convolveMatrix:function(e){e=t(e),this.attr({order:Math.sqrt(e.split(" ").length),kernelMatrix:e})},composite:function(t,e,i){this.attr({in:t,in2:e,operator:i})},flood:function(t,e){this.attr("flood-color",t),null!=e&&this.attr("flood-opacity",e)},offset:function(t,e){this.attr({dx:t,dy:e})},image:function(t){this.attr("href",t,SVG.xlink)},displacementMap:function(t,e,i,n,r){this.attr({in:t,in2:e,scale:i,xChannelSelector:n,yChannelSelector:r})},gaussianBlur:function(t,e){this.attr("stdDeviation",null!=t||null!=e?function(t){if(!Array.isArray(t))return t;for(var e=0,i=t.length,n=[];e<i;e++)n.push(t[e]);return n.join(" ")}(Array.prototype.slice.call(arguments)):"0 0")},morphology:function(t,e){this.attr({operator:t,radius:e})},tile:function(){},turbulence:function(t,e,i,n,r){this.attr({numOctaves:e,seed:i,stitchTiles:n,baseFrequency:t,type:r})}},r={merge:function(){var t;if(arguments[0]instanceof SVG.Set){var e=this;arguments[0].each(function(t){this instanceof SVG.MergeNode?e.put(this):(this instanceof SVG.Effect||this instanceof SVG.ParentEffect)&&e.put(new SVG.MergeNode(this))})}else{t=Array.isArray(arguments[0])?arguments[0]:arguments;for(var i=0;i<t.length;i++)t[i]instanceof SVG.MergeNode?this.put(t[i]):this.put(new SVG.MergeNode(t[i]))}},componentTransfer:function(t){if(this.rgb=new SVG.Set,["r","g","b","a"].forEach((function(t){this[t]=new(SVG["Func"+t.toUpperCase()])("identity"),this.rgb.add(this[t]),this.node.appendChild(this[t].node)}).bind(this)),t)for(var e in t.rgb&&(["r","g","b"].forEach((function(e){this[e].attr(t.rgb)}).bind(this)),delete t.rgb),t)this[e].attr(t[e])},diffuseLighting:function(t,e,i){this.attr({surfaceScale:t,diffuseConstant:e,kernelUnitLength:i})},specularLighting:function(t,e,i,n){this.attr({surfaceScale:t,diffuseConstant:e,specularExponent:i,kernelUnitLength:n})}},o={distantLight:function(t,e){this.attr({azimuth:t,elevation:e})},pointLight:function(t,e,i){this.attr({x:t,y:e,z:i})},spotLight:function(t,e,i,n,r,o){this.attr({x:t,y:e,z:i,pointsAtX:n,pointsAtY:r,pointsAtZ:o})},mergeNode:function(t){this.attr("in",t)}};["r","g","b","a"].forEach(function(t){o["Func"+t.toUpperCase()]=function(t){switch(this.attr("type",t),t){case"table":this.attr("tableValues",arguments[1]);break;case"linear":this.attr("slope",arguments[1]),this.attr("intercept",arguments[2]);break;case"gamma":this.attr("amplitude",arguments[1]),this.attr("exponent",arguments[2]),this.attr("offset",arguments[2])}}}),e(n,function(t,e){var i=e.charAt(0).toUpperCase()+e.slice(1);SVG[i+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+i)),t.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.Effect,extend:{}})}),e(r,function(t,e){var i=e.charAt(0).toUpperCase()+e.slice(1);SVG[i+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+i)),t.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.ParentEffect,extend:{}})}),e(o,function(t,e){var i=e.charAt(0).toUpperCase()+e.slice(1);SVG[i]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+i)),t.apply(this,arguments)},inherit:SVG.ChildEffect,extend:{}})}),SVG.extend(SVG.MergeEffect,{in:function(t){return t instanceof SVG.MergeNode?this.add(t,0):this.add(new SVG.MergeNode(t),0),this}}),SVG.extend(SVG.CompositeEffect,SVG.BlendEffect,SVG.DisplacementMapEffect,{in2:function(t){return null==t?this.parent()&&this.parent().select('[result="'+this.attr("in2")+'"]').get(0)||this.attr("in2"):this.attr("in2",t)}}),SVG.filter={sepiatone:[.343,.669,.119,0,0,.249,.626,.13,0,0,.172,.334,.111,0,0,0,0,0,1,0]}}).call(void 0),function(){function t(t,r,o,a,s,l,h){for(var u=t.slice(r,o||h),c=a.slice(s,l||h),p=0,d={pos:[0,0],start:[0,0]},f={pos:[0,0],start:[0,0]};u[p]=e.call(d,u[p]),c[p]=e.call(f,c[p]),u[p][0]!=c[p][0]||"M"==u[p][0]||"A"==u[p][0]&&(u[p][4]!=c[p][4]||u[p][5]!=c[p][5])?(Array.prototype.splice.apply(u,[p,1].concat(n.call(d,u[p]))),Array.prototype.splice.apply(c,[p,1].concat(n.call(f,c[p])))):(u[p]=i.call(d,u[p]),c[p]=i.call(f,c[p])),++p!=u.length||p!=c.length;)p==u.length&&u.push(["C",d.pos[0],d.pos[1],d.pos[0],d.pos[1],d.pos[0],d.pos[1]]),p==c.length&&c.push(["C",f.pos[0],f.pos[1],f.pos[0],f.pos[1],f.pos[0],f.pos[1]]);return{start:u,dest:c}}function e(t){switch(t[0]){case"z":case"Z":t[0]="L",t[1]=this.start[0],t[2]=this.start[1];break;case"H":t[0]="L",t[2]=this.pos[1];break;case"V":t[0]="L",t[2]=t[1],t[1]=this.pos[0];break;case"T":t[0]="Q",t[3]=t[1],t[4]=t[2],t[1]=this.reflection[1],t[2]=this.reflection[0];break;case"S":t[0]="C",t[6]=t[4],t[5]=t[3],t[4]=t[2],t[3]=t[1],t[2]=this.reflection[1],t[1]=this.reflection[0]}return t}function i(t){var e=t.length;return this.pos=[t[e-2],t[e-1]],-1!="SCQT".indexOf(t[0])&&(this.reflection=[2*this.pos[0]-t[e-4],2*this.pos[1]-t[e-3]]),t}function n(t){var e=[t];switch(t[0]){case"M":return this.pos=this.start=[t[1],t[2]],e;case"L":t[5]=t[3]=t[1],t[6]=t[4]=t[2],t[1]=this.pos[0],t[2]=this.pos[1];break;case"Q":t[6]=t[4],t[5]=t[3],t[4]=1*t[4]/3+2*t[2]/3,t[3]=1*t[3]/3+2*t[1]/3,t[2]=1*this.pos[1]/3+2*t[2]/3,t[1]=1*this.pos[0]/3+2*t[1]/3;break;case"A":t=(e=function(t,e){var i,n,r,o,a,s,l,h,u,c,p,d,f,g,v,y,m,_,x,b,w,S,C,E,T,P,L=Math.abs(e[1]),I=Math.abs(e[2]),O=e[3]%360,A=e[4],R=e[5],M=e[6],F=e[7],k=new SVG.Point(t),N=new SVG.Point(M,F),D=[];if(0===L||0===I||k.x===N.x&&k.y===N.y)return[["C",k.x,k.y,N.x,N.y,N.x,N.y]];for((n=(i=new SVG.Point((k.x-N.x)/2,(k.y-N.y)/2).transform((new SVG.Matrix).rotate(O))).x*i.x/(L*L)+i.y*i.y/(I*I))>1&&(n=Math.sqrt(n),L*=n,I*=n),r=(new SVG.Matrix).rotate(O).scale(1/L,1/I).rotate(-O),k=k.transform(r),s=(o=[(N=N.transform(r)).x-k.x,N.y-k.y])[0]*o[0]+o[1]*o[1],a=Math.sqrt(s),o[0]/=a,o[1]/=a,l=s<4?Math.sqrt(1-s/4):0,A===R&&(l*=-1),h=new SVG.Point((N.x+k.x)/2+l*-o[1],(N.y+k.y)/2+l*o[0]),u=new SVG.Point(k.x-h.x,k.y-h.y),c=new SVG.Point(N.x-h.x,N.y-h.y),p=Math.acos(u.x/Math.sqrt(u.x*u.x+u.y*u.y)),u.y<0&&(p*=-1),d=Math.acos(c.x/Math.sqrt(c.x*c.x+c.y*c.y)),c.y<0&&(d*=-1),R&&p>d&&(d+=2*Math.PI),!R&&p<d&&(d-=2*Math.PI),y=[],m=p,f=(d-p)/(g=Math.ceil(2*Math.abs(p-d)/Math.PI)),v=4*Math.tan(f/4)/3,w=0;w<=g;w++)x=Math.cos(m),_=Math.sin(m),b=new SVG.Point(h.x+x,h.y+_),y[w]=[new SVG.Point(b.x+v*_,b.y-v*x),b,new SVG.Point(b.x-v*_,b.y+v*x)],m+=f;for(y[0][0]=y[0][1].clone(),y[y.length-1][2]=y[y.length-1][1].clone(),r=(new SVG.Matrix).rotate(O).scale(L,I).rotate(-O),w=0,S=y.length;w<S;w++)y[w][0]=y[w][0].transform(r),y[w][1]=y[w][1].transform(r),y[w][2]=y[w][2].transform(r);for(w=1,S=y.length;w<S;w++)b=y[w-1][2],C=b.x,E=b.y,b=y[w][0],T=b.x,P=b.y,b=y[w][1],M=b.x,F=b.y,D.push(["C",C,E,T,P,M,F]);return D}(this.pos,t))[0]}return t[0]="C",this.pos=[t[5],t[6]],this.reflection=[2*t[5]-t[3],2*t[6]-t[4]],e}function r(t,e){if(!1===e)return!1;for(var i=e,n=t.length;i<n;++i)if("M"==t[i][0])return i;return!1}SVG.extend(SVG.PathArray,{morph:function(e){for(var i=this.value,n=this.parse(e),o=0,a=0,s=!1,l=!1;!1!==o||!1!==a;){var h;s=r(i,!1!==o&&o+1),l=r(n,!1!==a&&a+1),!1===o&&(o=0==(h=new SVG.PathArray(u.start).bbox()).height||0==h.width?i.push(i[0])-1:i.push(["M",h.x+h.width/2,h.y+h.height/2])-1),!1===a&&(a=0==(h=new SVG.PathArray(u.dest).bbox()).height||0==h.width?n.push(n[0])-1:n.push(["M",h.x+h.width/2,h.y+h.height/2])-1);var u=t(i,o,s,n,a,l);i=i.slice(0,o).concat(u.start,!1===s?[]:i.slice(s)),n=n.slice(0,a).concat(u.dest,!1===l?[]:n.slice(l)),o=!1!==s&&o+u.start.length,a=!1!==l&&a+u.dest.length}return this.value=i,this.destination=new SVG.PathArray,this.destination.value=n,this}})}(),(function(){function t(t){t.remember("_draggable",this),this.el=t}t.prototype.init=function(t,e){var i=this;this.constraint=t,this.value=e,this.el.on("mousedown.drag",function(t){i.start(t)}),this.el.on("touchstart.drag",function(t){i.start(t)})},t.prototype.transformPoint=function(t,e){var i=(t=t||window.event).changedTouches&&t.changedTouches[0]||t;return this.p.x=i.clientX-(e||0),this.p.y=i.clientY,this.p.matrixTransform(this.m)},t.prototype.getBBox=function(){var t=this.el.bbox();return this.el instanceof SVG.Nested&&(t=this.el.rbox()),(this.el instanceof SVG.G||this.el instanceof SVG.Use||this.el instanceof SVG.Nested)&&(t.x=this.el.x(),t.y=this.el.y()),t},t.prototype.start=function(t){if("click"!=t.type&&"mousedown"!=t.type&&"mousemove"!=t.type||1==(t.which||t.buttons)){var e=this;if(this.el.fire("beforedrag",{event:t,handler:this}),!this.el.event().defaultPrevented){t.preventDefault(),t.stopPropagation(),this.parent=this.parent||this.el.parent(SVG.Nested)||this.el.parent(SVG.Doc),this.p=this.parent.node.createSVGPoint(),this.m=this.el.node.getScreenCTM().inverse();var i,n=this.getBBox();if(this.el instanceof SVG.Text)switch(i=this.el.node.getComputedTextLength(),this.el.attr("text-anchor")){case"middle":i/=2;break;case"start":i=0}this.startPoints={point:this.transformPoint(t,i),box:n,transform:this.el.transform()},SVG.on(window,"mousemove.drag",function(t){e.drag(t)}),SVG.on(window,"touchmove.drag",function(t){e.drag(t)}),SVG.on(window,"mouseup.drag",function(t){e.end(t)}),SVG.on(window,"touchend.drag",function(t){e.end(t)}),this.el.fire("dragstart",{event:t,p:this.startPoints.point,m:this.m,handler:this})}}},t.prototype.drag=function(t){var e=this.getBBox(),i=this.transformPoint(t),n=this.startPoints.box.x+i.x-this.startPoints.point.x,r=this.startPoints.box.y+i.y-this.startPoints.point.y,o=this.constraint,a=i.x-this.startPoints.point.x,s=i.y-this.startPoints.point.y;if(this.el.fire("dragmove",{event:t,p:i,m:this.m,handler:this}),this.el.event().defaultPrevented)return i;if("function"==typeof o){var l=o.call(this.el,n,r,this.m);"boolean"==typeof l&&(l={x:l,y:l}),!0===l.x?this.el.x(n):!1!==l.x&&this.el.x(l.x),!0===l.y?this.el.y(r):!1!==l.y&&this.el.y(l.y)}else"object"==typeof o&&(null!=o.minX&&n<o.minX?a=(n=o.minX)-this.startPoints.box.x:null!=o.maxX&&n>o.maxX-e.width&&(a=(n=o.maxX-e.width)-this.startPoints.box.x),null!=o.minY&&r<o.minY?s=(r=o.minY)-this.startPoints.box.y:null!=o.maxY&&r>o.maxY-e.height&&(s=(r=o.maxY-e.height)-this.startPoints.box.y),null!=o.snapToGrid&&(n-=n%o.snapToGrid,r-=r%o.snapToGrid,a-=a%o.snapToGrid,s-=s%o.snapToGrid),this.el instanceof SVG.G?this.el.matrix(this.startPoints.transform).transform({x:a,y:s},!0):this.el.move(n,r));return i},t.prototype.end=function(t){var e=this.drag(t);this.el.fire("dragend",{event:t,p:e,m:this.m,handler:this}),SVG.off(window,"mousemove.drag"),SVG.off(window,"touchmove.drag"),SVG.off(window,"mouseup.drag"),SVG.off(window,"touchend.drag")},SVG.extend(SVG.Element,{draggable:function(e,i){"function"!=typeof e&&"object"!=typeof e||(i=e,e=!0);var n=this.remember("_draggable")||new t(this);return(e=void 0===e||e)?n.init(i||{},e):(this.off("mousedown.drag"),this.off("touchstart.drag")),this}})}).call(void 0),function(){function t(t){this.el=t,t.remember("_selectHandler",this),this.pointSelection={isSelected:!1},this.rectSelection={isSelected:!1},this.pointsList={lt:[0,0],rt:["width",0],rb:["width","height"],lb:[0,"height"],t:["width",0],r:["width","height"],b:["width","height"],l:[0,"height"]},this.pointCoord=function(t,e,i){var n="string"!=typeof t?t:e[t];return i?n/2:n},this.pointCoords=function(t,e){var i=this.pointsList[t];return{x:this.pointCoord(i[0],e,"t"===t||"b"===t),y:this.pointCoord(i[1],e,"r"===t||"l"===t)}}}t.prototype.init=function(t,e){var i=this.el.bbox();this.options={};var n=this.el.selectize.defaults.points;for(var r in this.el.selectize.defaults)this.options[r]=this.el.selectize.defaults[r],void 0!==e[r]&&(this.options[r]=e[r]);var o=["points","pointsExclude"];for(var r in o){var a=this.options[o[r]];"string"==typeof a?a=a.length>0?a.split(/\s*,\s*/i):[]:"boolean"==typeof a&&"points"===o[r]&&(a=a?n:[]),this.options[o[r]]=a}this.options.points=[n,this.options.points].reduce(function(t,e){return t.filter(function(t){return e.indexOf(t)>-1})}),this.options.points=[this.options.points,this.options.pointsExclude].reduce(function(t,e){return t.filter(function(t){return e.indexOf(t)<0})}),this.parent=this.el.parent(),this.nested=this.nested||this.parent.group(),this.nested.matrix(new SVG.Matrix(this.el).translate(i.x,i.y)),this.options.deepSelect&&-1!==["line","polyline","polygon"].indexOf(this.el.type)?this.selectPoints(t):this.selectRect(t),this.observe(),this.cleanup()},t.prototype.selectPoints=function(t){return this.pointSelection.isSelected=t,this.pointSelection.set?this:(this.pointSelection.set=this.parent.set(),this.drawPoints(),this)},t.prototype.getPointArray=function(){var t=this.el.bbox();return this.el.array().valueOf().map(function(e){return[e[0]-t.x,e[1]-t.y]})},t.prototype.drawPoints=function(){for(var t=this,e=this.getPointArray(),i=0,n=e.length;i<n;++i){var r=function(e){return function(i){(i=i||window.event).preventDefault?i.preventDefault():i.returnValue=!1,i.stopPropagation(),t.el.fire("point",{x:i.pageX||i.touches[0].pageX,y:i.pageY||i.touches[0].pageY,i:e,event:i})}}(i),o=this.drawPoint(e[i][0],e[i][1]).addClass(this.options.classPoints).addClass(this.options.classPoints+"_point").on("touchstart",r).on("mousedown",r);this.pointSelection.set.add(o)}},t.prototype.drawPoint=function(t,e){var i=this.options.pointType;switch(i){case"circle":return this.drawCircle(t,e);case"rect":return this.drawRect(t,e);default:if("function"==typeof i)return i.call(this,t,e);throw new Error("Unknown "+i+" point type!")}},t.prototype.drawCircle=function(t,e){return this.nested.circle(this.options.pointSize).center(t,e)},t.prototype.drawRect=function(t,e){return this.nested.rect(this.options.pointSize,this.options.pointSize).center(t,e)},t.prototype.updatePointSelection=function(){var t=this.getPointArray();this.pointSelection.set.each(function(e){this.cx()===t[e][0]&&this.cy()===t[e][1]||this.center(t[e][0],t[e][1])})},t.prototype.updateRectSelection=function(){var t=this,e=this.el.bbox();if(this.rectSelection.set.get(0).attr({width:e.width,height:e.height}),this.options.points.length&&this.options.points.map(function(i,n){var r=t.pointCoords(i,e);t.rectSelection.set.get(n+1).center(r.x,r.y)}),this.options.rotationPoint){var i=this.rectSelection.set.length();this.rectSelection.set.get(i-1).center(e.width/2,20)}},t.prototype.selectRect=function(t){function e(t){return function(e){(e=e||window.event).preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),i.el.fire(t,{x:e.pageX||e.touches[0].pageX,y:e.pageY||e.touches[0].pageY,event:e})}}var i=this,n=this.el.bbox();if(this.rectSelection.isSelected=t,this.rectSelection.set=this.rectSelection.set||this.parent.set(),this.rectSelection.set.get(0)||this.rectSelection.set.add(this.nested.rect(n.width,n.height).addClass(this.options.classRect)),this.options.points.length&&this.rectSelection.set.length()<2&&(this.options.points.map(function(t,r){var o=i.pointCoords(t,n),a=i.drawPoint(o.x,o.y).attr("class",i.options.classPoints+"_"+t).on("mousedown",e(t)).on("touchstart",e(t));i.rectSelection.set.add(a)}),this.rectSelection.set.each(function(){this.addClass(i.options.classPoints)})),this.options.rotationPoint&&(this.options.points&&!this.rectSelection.set.get(9)||!this.options.points&&!this.rectSelection.set.get(1))){var r=function(t){(t=t||window.event).preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation(),i.el.fire("rot",{x:t.pageX||t.touches[0].pageX,y:t.pageY||t.touches[0].pageY,event:t})},o=this.drawPoint(n.width/2,20).attr("class",this.options.classPoints+"_rot").on("touchstart",r).on("mousedown",r);this.rectSelection.set.add(o)}},t.prototype.handler=function(){var t=this.el.bbox();this.nested.matrix(new SVG.Matrix(this.el).translate(t.x,t.y)),this.rectSelection.isSelected&&this.updateRectSelection(),this.pointSelection.isSelected&&this.updatePointSelection()},t.prototype.observe=function(){var t=this;if(MutationObserver)if(this.rectSelection.isSelected||this.pointSelection.isSelected)this.observerInst=this.observerInst||new MutationObserver(function(){t.handler()}),this.observerInst.observe(this.el.node,{attributes:!0});else try{this.observerInst.disconnect(),delete this.observerInst}catch(t){}else this.el.off("DOMAttrModified.select"),(this.rectSelection.isSelected||this.pointSelection.isSelected)&&this.el.on("DOMAttrModified.select",function(){t.handler()})},t.prototype.cleanup=function(){!this.rectSelection.isSelected&&this.rectSelection.set&&(this.rectSelection.set.each(function(){this.remove()}),this.rectSelection.set.clear(),delete this.rectSelection.set),!this.pointSelection.isSelected&&this.pointSelection.set&&(this.pointSelection.set.each(function(){this.remove()}),this.pointSelection.set.clear(),delete this.pointSelection.set),this.pointSelection.isSelected||this.rectSelection.isSelected||(this.nested.remove(),delete this.nested)},SVG.extend(SVG.Element,{selectize:function(e,i){return"object"==typeof e&&(i=e,e=!0),(this.remember("_selectHandler")||new t(this)).init(void 0===e||e,i||{}),this}}),SVG.Element.prototype.selectize.defaults={points:["lt","rt","rb","lb","t","r","b","l"],pointsExclude:[],classRect:"svg_select_boundingRect",classPoints:"svg_select_points",pointSize:7,rotationPoint:!0,deepSelect:!1,pointType:"circle"}}(),function(){(function(){function t(t){t.remember("_resizeHandler",this),this.el=t,this.parameters={},this.lastUpdateCall=null,this.p=t.doc().node.createSVGPoint()}t.prototype.transformPoint=function(t,e,i){return this.p.x=t-(this.offset.x-window.pageXOffset),this.p.y=e-(this.offset.y-window.pageYOffset),this.p.matrixTransform(i||this.m)},t.prototype._extractPosition=function(t){return{x:null!=t.clientX?t.clientX:t.touches[0].clientX,y:null!=t.clientY?t.clientY:t.touches[0].clientY}},t.prototype.init=function(t){var e=this;if(this.stop(),"stop"!==t){for(var i in this.options={},this.el.resize.defaults)this.options[i]=this.el.resize.defaults[i],void 0!==t[i]&&(this.options[i]=t[i]);this.el.on("lt.resize",function(t){e.resize(t||window.event)}),this.el.on("rt.resize",function(t){e.resize(t||window.event)}),this.el.on("rb.resize",function(t){e.resize(t||window.event)}),this.el.on("lb.resize",function(t){e.resize(t||window.event)}),this.el.on("t.resize",function(t){e.resize(t||window.event)}),this.el.on("r.resize",function(t){e.resize(t||window.event)}),this.el.on("b.resize",function(t){e.resize(t||window.event)}),this.el.on("l.resize",function(t){e.resize(t||window.event)}),this.el.on("rot.resize",function(t){e.resize(t||window.event)}),this.el.on("point.resize",function(t){e.resize(t||window.event)}),this.update()}},t.prototype.stop=function(){return this.el.off("lt.resize"),this.el.off("rt.resize"),this.el.off("rb.resize"),this.el.off("lb.resize"),this.el.off("t.resize"),this.el.off("r.resize"),this.el.off("b.resize"),this.el.off("l.resize"),this.el.off("rot.resize"),this.el.off("point.resize"),this},t.prototype.resize=function(t){var e=this;this.m=this.el.node.getScreenCTM().inverse(),this.offset={x:window.pageXOffset,y:window.pageYOffset};var i=this._extractPosition(t.detail.event);if(this.parameters={type:this.el.type,p:this.transformPoint(i.x,i.y),x:t.detail.x,y:t.detail.y,box:this.el.bbox(),rotation:this.el.transform().rotation},"text"===this.el.type&&(this.parameters.fontSize=this.el.attr()["font-size"]),void 0!==t.detail.i){var n=this.el.array().valueOf();this.parameters.i=t.detail.i,this.parameters.pointCoords=[n[t.detail.i][0],n[t.detail.i][1]]}switch(t.type){case"lt":this.calc=function(t,e){var i=this.snapToGrid(t,e);if(this.parameters.box.width-i[0]>0&&this.parameters.box.height-i[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+i[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-i[0]);i=this.checkAspectRatio(i),this.el.move(this.parameters.box.x+i[0],this.parameters.box.y+i[1]).size(this.parameters.box.width-i[0],this.parameters.box.height-i[1])}};break;case"rt":this.calc=function(t,e){var i=this.snapToGrid(t,e,2);if(this.parameters.box.width+i[0]>0&&this.parameters.box.height-i[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-i[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+i[0]);i=this.checkAspectRatio(i,!0),this.el.move(this.parameters.box.x,this.parameters.box.y+i[1]).size(this.parameters.box.width+i[0],this.parameters.box.height-i[1])}};break;case"rb":this.calc=function(t,e){var i=this.snapToGrid(t,e,0);if(this.parameters.box.width+i[0]>0&&this.parameters.box.height+i[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-i[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+i[0]);i=this.checkAspectRatio(i),this.el.move(this.parameters.box.x,this.parameters.box.y).size(this.parameters.box.width+i[0],this.parameters.box.height+i[1])}};break;case"lb":this.calc=function(t,e){var i=this.snapToGrid(t,e,1);if(this.parameters.box.width-i[0]>0&&this.parameters.box.height+i[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+i[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-i[0]);i=this.checkAspectRatio(i,!0),this.el.move(this.parameters.box.x+i[0],this.parameters.box.y).size(this.parameters.box.width-i[0],this.parameters.box.height+i[1])}};break;case"t":this.calc=function(t,e){var i=this.snapToGrid(t,e,2);if(this.parameters.box.height-i[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y+i[1]).height(this.parameters.box.height-i[1])}};break;case"r":this.calc=function(t,e){var i=this.snapToGrid(t,e,0);if(this.parameters.box.width+i[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).width(this.parameters.box.width+i[0])}};break;case"b":this.calc=function(t,e){var i=this.snapToGrid(t,e,0);if(this.parameters.box.height+i[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).height(this.parameters.box.height+i[1])}};break;case"l":this.calc=function(t,e){var i=this.snapToGrid(t,e,1);if(this.parameters.box.width-i[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x+i[0],this.parameters.box.y).width(this.parameters.box.width-i[0])}};break;case"rot":this.calc=function(t,e){var i=t+this.parameters.p.x,n=e+this.parameters.p.y,r=Math.atan2(this.parameters.p.y-this.parameters.box.y-this.parameters.box.height/2,this.parameters.p.x-this.parameters.box.x-this.parameters.box.width/2),o=Math.atan2(n-this.parameters.box.y-this.parameters.box.height/2,i-this.parameters.box.x-this.parameters.box.width/2),a=this.parameters.rotation+180*(o-r)/Math.PI+this.options.snapToAngle/2;this.el.center(this.parameters.box.cx,this.parameters.box.cy).rotate(a-a%this.options.snapToAngle,this.parameters.box.cx,this.parameters.box.cy)};break;case"point":this.calc=function(t,e){var i=this.snapToGrid(t,e,this.parameters.pointCoords[0],this.parameters.pointCoords[1]),n=this.el.array().valueOf();n[this.parameters.i][0]=this.parameters.pointCoords[0]+i[0],n[this.parameters.i][1]=this.parameters.pointCoords[1]+i[1],this.el.plot(n)}}this.el.fire("resizestart",{dx:this.parameters.x,dy:this.parameters.y,event:t}),SVG.on(window,"touchmove.resize",function(t){e.update(t||window.event)}),SVG.on(window,"touchend.resize",function(){e.done()}),SVG.on(window,"mousemove.resize",function(t){e.update(t||window.event)}),SVG.on(window,"mouseup.resize",function(){e.done()})},t.prototype.update=function(t){if(t){var e=this._extractPosition(t),i=this.transformPoint(e.x,e.y),n=i.x-this.parameters.p.x,r=i.y-this.parameters.p.y;this.lastUpdateCall=[n,r],this.calc(n,r),this.el.fire("resizing",{dx:n,dy:r,event:t})}else this.lastUpdateCall&&this.calc(this.lastUpdateCall[0],this.lastUpdateCall[1])},t.prototype.done=function(){this.lastUpdateCall=null,SVG.off(window,"mousemove.resize"),SVG.off(window,"mouseup.resize"),SVG.off(window,"touchmove.resize"),SVG.off(window,"touchend.resize"),this.el.fire("resizedone")},t.prototype.snapToGrid=function(t,e,i,n){var r;return void 0!==n?r=[(i+t)%this.options.snapToGrid,(n+e)%this.options.snapToGrid]:(i=null==i?3:i,r=[(this.parameters.box.x+t+(1&i?0:this.parameters.box.width))%this.options.snapToGrid,(this.parameters.box.y+e+(2&i?0:this.parameters.box.height))%this.options.snapToGrid]),t<0&&(r[0]-=this.options.snapToGrid),e<0&&(r[1]-=this.options.snapToGrid),t-=Math.abs(r[0])<this.options.snapToGrid/2?r[0]:r[0]-(t<0?-this.options.snapToGrid:this.options.snapToGrid),e-=Math.abs(r[1])<this.options.snapToGrid/2?r[1]:r[1]-(e<0?-this.options.snapToGrid:this.options.snapToGrid),this.constraintToBox(t,e,i,n)},t.prototype.constraintToBox=function(t,e,i,n){var r,o,a=this.options.constraint||{};return void 0!==n?(r=i,o=n):(r=this.parameters.box.x+(1&i?0:this.parameters.box.width),o=this.parameters.box.y+(2&i?0:this.parameters.box.height)),void 0!==a.minX&&r+t<a.minX&&(t=a.minX-r),void 0!==a.maxX&&r+t>a.maxX&&(t=a.maxX-r),void 0!==a.minY&&o+e<a.minY&&(e=a.minY-o),void 0!==a.maxY&&o+e>a.maxY&&(e=a.maxY-o),[t,e]},t.prototype.checkAspectRatio=function(t,e){if(!this.options.saveAspectRatio)return t;var i=t.slice(),n=this.parameters.box.width/this.parameters.box.height,r=this.parameters.box.width+t[0],o=this.parameters.box.height-t[1],a=r/o;return a<n?(i[1]=r/n-this.parameters.box.height,e&&(i[1]=-i[1])):a>n&&(i[0]=this.parameters.box.width-o*n,e&&(i[0]=-i[0])),i},SVG.extend(SVG.Element,{resize:function(e){return(this.remember("_resizeHandler")||new t(this)).init(e||{}),this}}),SVG.Element.prototype.resize.defaults={snapToAngle:.1,snapToGrid:1,constraint:{},saveAspectRatio:!1}}).call(this)}(),function(t,e){void 0===e&&(e={});var i=e.insertAt;if("undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===i&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}('.apexcharts-canvas {\n  position: relative;\n  user-select: none;\n  /* cannot give overflow: hidden as it will crop tooltips which overflow outside chart area */\n}\n\n\n/* scrollbar is not visible by default for legend, hence forcing the visibility */\n.apexcharts-canvas ::-webkit-scrollbar {\n  -webkit-appearance: none;\n  width: 6px;\n}\n\n.apexcharts-canvas ::-webkit-scrollbar-thumb {\n  border-radius: 4px;\n  background-color: rgba(0, 0, 0, .5);\n  box-shadow: 0 0 1px rgba(255, 255, 255, .5);\n  -webkit-box-shadow: 0 0 1px rgba(255, 255, 255, .5);\n}\n\n.apexcharts-canvas.apexcharts-theme-dark {\n  background: #343F57;\n}\n\n.apexcharts-inner {\n  position: relative;\n}\n\n.apexcharts-text tspan {\n  font-family: inherit;\n}\n\n.legend-mouseover-inactive {\n  transition: 0.15s ease all;\n  opacity: 0.20;\n}\n\n.apexcharts-series-collapsed {\n  opacity: 0;\n}\n\n.apexcharts-tooltip {\n  border-radius: 5px;\n  box-shadow: 2px 2px 6px -4px #999;\n  cursor: default;\n  font-size: 14px;\n  left: 62px;\n  opacity: 0;\n  pointer-events: none;\n  position: absolute;\n  top: 20px;\n  overflow: hidden;\n  white-space: nowrap;\n  z-index: 12;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-tooltip.apexcharts-theme-light {\n  border: 1px solid #e3e3e3;\n  background: rgba(255, 255, 255, 0.96);\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark {\n  color: #fff;\n  background: rgba(30, 30, 30, 0.8);\n}\n\n.apexcharts-tooltip * {\n  font-family: inherit;\n}\n\n.apexcharts-tooltip.apexcharts-active {\n  opacity: 1;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-tooltip-title {\n  padding: 6px;\n  font-size: 15px;\n  margin-bottom: 4px;\n}\n\n.apexcharts-tooltip.apexcharts-theme-light .apexcharts-tooltip-title {\n  background: #ECEFF1;\n  border-bottom: 1px solid #ddd;\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark .apexcharts-tooltip-title {\n  background: rgba(0, 0, 0, 0.7);\n  border-bottom: 1px solid #333;\n}\n\n.apexcharts-tooltip-text-value,\n.apexcharts-tooltip-text-z-value {\n  display: inline-block;\n  font-weight: 600;\n  margin-left: 5px;\n}\n\n.apexcharts-tooltip-text-z-label:empty,\n.apexcharts-tooltip-text-z-value:empty {\n  display: none;\n}\n\n.apexcharts-tooltip-text-value,\n.apexcharts-tooltip-text-z-value {\n  font-weight: 600;\n}\n\n.apexcharts-tooltip-marker {\n  width: 12px;\n  height: 12px;\n  position: relative;\n  top: 0px;\n  margin-right: 10px;\n  border-radius: 50%;\n}\n\n.apexcharts-tooltip-series-group {\n  padding: 0 10px;\n  display: none;\n  text-align: left;\n  justify-content: left;\n  align-items: center;\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active .apexcharts-tooltip-marker {\n  opacity: 1;\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active,\n.apexcharts-tooltip-series-group:last-child {\n  padding-bottom: 4px;\n}\n\n.apexcharts-tooltip-series-group-hidden {\n  opacity: 0;\n  height: 0;\n  line-height: 0;\n  padding: 0 !important;\n}\n\n.apexcharts-tooltip-y-group {\n  padding: 6px 0 5px;\n}\n\n.apexcharts-tooltip-candlestick {\n  padding: 4px 8px;\n}\n\n.apexcharts-tooltip-candlestick>div {\n  margin: 4px 0;\n}\n\n.apexcharts-tooltip-candlestick span.value {\n  font-weight: bold;\n}\n\n.apexcharts-tooltip-rangebar {\n  padding: 5px 8px;\n}\n\n.apexcharts-tooltip-rangebar .category {\n  font-weight: 600;\n  color: #777;\n}\n\n.apexcharts-tooltip-rangebar .series-name {\n  font-weight: bold;\n  display: block;\n  margin-bottom: 5px;\n}\n\n.apexcharts-xaxistooltip {\n  opacity: 0;\n  padding: 9px 10px;\n  pointer-events: none;\n  color: #373d3f;\n  font-size: 13px;\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 10;\n  background: #ECEFF1;\n  border: 1px solid #90A4AE;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-xaxistooltip.apexcharts-theme-dark {\n  background: rgba(0, 0, 0, 0.7);\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  color: #fff;\n}\n\n.apexcharts-xaxistooltip:after,\n.apexcharts-xaxistooltip:before {\n  left: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none;\n}\n\n.apexcharts-xaxistooltip:after {\n  border-color: rgba(236, 239, 241, 0);\n  border-width: 6px;\n  margin-left: -6px;\n}\n\n.apexcharts-xaxistooltip:before {\n  border-color: rgba(144, 164, 174, 0);\n  border-width: 7px;\n  margin-left: -7px;\n}\n\n.apexcharts-xaxistooltip-bottom:after,\n.apexcharts-xaxistooltip-bottom:before {\n  bottom: 100%;\n}\n\n.apexcharts-xaxistooltip-top:after,\n.apexcharts-xaxistooltip-top:before {\n  top: 100%;\n}\n\n.apexcharts-xaxistooltip-bottom:after {\n  border-bottom-color: #ECEFF1;\n}\n\n.apexcharts-xaxistooltip-bottom:before {\n  border-bottom-color: #90A4AE;\n}\n\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:after {\n  border-bottom-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:before {\n  border-bottom-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip-top:after {\n  border-top-color: #ECEFF1\n}\n\n.apexcharts-xaxistooltip-top:before {\n  border-top-color: #90A4AE;\n}\n\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:after {\n  border-top-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:before {\n  border-top-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip.apexcharts-active {\n  opacity: 1;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-yaxistooltip {\n  opacity: 0;\n  padding: 4px 10px;\n  pointer-events: none;\n  color: #373d3f;\n  font-size: 13px;\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 10;\n  background: #ECEFF1;\n  border: 1px solid #90A4AE;\n}\n\n.apexcharts-yaxistooltip.apexcharts-theme-dark {\n  background: rgba(0, 0, 0, 0.7);\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  color: #fff;\n}\n\n.apexcharts-yaxistooltip:after,\n.apexcharts-yaxistooltip:before {\n  top: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none;\n}\n\n.apexcharts-yaxistooltip:after {\n  border-color: rgba(236, 239, 241, 0);\n  border-width: 6px;\n  margin-top: -6px;\n}\n\n.apexcharts-yaxistooltip:before {\n  border-color: rgba(144, 164, 174, 0);\n  border-width: 7px;\n  margin-top: -7px;\n}\n\n.apexcharts-yaxistooltip-left:after,\n.apexcharts-yaxistooltip-left:before {\n  left: 100%;\n}\n\n.apexcharts-yaxistooltip-right:after,\n.apexcharts-yaxistooltip-right:before {\n  right: 100%;\n}\n\n.apexcharts-yaxistooltip-left:after {\n  border-left-color: #ECEFF1;\n}\n\n.apexcharts-yaxistooltip-left:before {\n  border-left-color: #90A4AE;\n}\n\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:after {\n  border-left-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:before {\n  border-left-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip-right:after {\n  border-right-color: #ECEFF1;\n}\n\n.apexcharts-yaxistooltip-right:before {\n  border-right-color: #90A4AE;\n}\n\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:after {\n  border-right-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:before {\n  border-right-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip.apexcharts-active {\n  opacity: 1;\n}\n\n.apexcharts-yaxistooltip-hidden {\n  display: none;\n}\n\n.apexcharts-xcrosshairs,\n.apexcharts-ycrosshairs {\n  pointer-events: none;\n  opacity: 0;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-xcrosshairs.apexcharts-active,\n.apexcharts-ycrosshairs.apexcharts-active {\n  opacity: 1;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-ycrosshairs-hidden {\n  opacity: 0;\n}\n\n.apexcharts-selection-rect {\n  cursor: move;\n}\n\n.svg_select_boundingRect, .svg_select_points_rot {\n  pointer-events: none;\n  opacity: 0;\n  visibility: hidden;\n}\n.apexcharts-selection-rect + g .svg_select_boundingRect,\n.apexcharts-selection-rect + g .svg_select_points_rot {\n  opacity: 0;\n  visibility: hidden;\n}\n\n.apexcharts-selection-rect + g .svg_select_points_l,\n.apexcharts-selection-rect + g .svg_select_points_r {\n  cursor: ew-resize;\n  opacity: 1;\n  visibility: visible;\n}\n\n.svg_select_points {\n  fill: #efefef;\n  stroke: #333;\n  rx: 2;\n}\n\n.apexcharts-canvas.apexcharts-zoomable .hovering-zoom {\n  cursor: crosshair\n}\n\n.apexcharts-canvas.apexcharts-zoomable .hovering-pan {\n  cursor: move\n}\n\n.apexcharts-zoom-icon,\n.apexcharts-zoomin-icon,\n.apexcharts-zoomout-icon,\n.apexcharts-reset-icon,\n.apexcharts-pan-icon,\n.apexcharts-selection-icon,\n.apexcharts-menu-icon,\n.apexcharts-toolbar-custom-icon {\n  cursor: pointer;\n  width: 20px;\n  height: 20px;\n  line-height: 24px;\n  color: #6E8192;\n  text-align: center;\n}\n\n.apexcharts-zoom-icon svg,\n.apexcharts-zoomin-icon svg,\n.apexcharts-zoomout-icon svg,\n.apexcharts-reset-icon svg,\n.apexcharts-menu-icon svg {\n  fill: #6E8192;\n}\n\n.apexcharts-selection-icon svg {\n  fill: #444;\n  transform: scale(0.76)\n}\n\n.apexcharts-theme-dark .apexcharts-zoom-icon svg,\n.apexcharts-theme-dark .apexcharts-zoomin-icon svg,\n.apexcharts-theme-dark .apexcharts-zoomout-icon svg,\n.apexcharts-theme-dark .apexcharts-reset-icon svg,\n.apexcharts-theme-dark .apexcharts-pan-icon svg,\n.apexcharts-theme-dark .apexcharts-selection-icon svg,\n.apexcharts-theme-dark .apexcharts-menu-icon svg,\n.apexcharts-theme-dark .apexcharts-toolbar-custom-icon svg {\n  fill: #f3f4f5;\n}\n\n.apexcharts-canvas .apexcharts-zoom-icon.apexcharts-selected svg,\n.apexcharts-canvas .apexcharts-selection-icon.apexcharts-selected svg,\n.apexcharts-canvas .apexcharts-reset-zoom-icon.apexcharts-selected svg {\n  fill: #008FFB;\n}\n\n.apexcharts-theme-light .apexcharts-selection-icon:not(.apexcharts-selected):hover svg,\n.apexcharts-theme-light .apexcharts-zoom-icon:not(.apexcharts-selected):hover svg,\n.apexcharts-theme-light .apexcharts-zoomin-icon:hover svg,\n.apexcharts-theme-light .apexcharts-zoomout-icon:hover svg,\n.apexcharts-theme-light .apexcharts-reset-icon:hover svg,\n.apexcharts-theme-light .apexcharts-menu-icon:hover svg {\n  fill: #333;\n}\n\n.apexcharts-selection-icon,\n.apexcharts-menu-icon {\n  position: relative;\n}\n\n.apexcharts-reset-icon {\n  margin-left: 5px;\n}\n\n.apexcharts-zoom-icon,\n.apexcharts-reset-icon,\n.apexcharts-menu-icon {\n  transform: scale(0.85);\n}\n\n.apexcharts-zoomin-icon,\n.apexcharts-zoomout-icon {\n  transform: scale(0.7)\n}\n\n.apexcharts-zoomout-icon {\n  margin-right: 3px;\n}\n\n.apexcharts-pan-icon {\n  transform: scale(0.62);\n  position: relative;\n  left: 1px;\n  top: 0px;\n}\n\n.apexcharts-pan-icon svg {\n  fill: #fff;\n  stroke: #6E8192;\n  stroke-width: 2;\n}\n\n.apexcharts-pan-icon.apexcharts-selected svg {\n  stroke: #008FFB;\n}\n\n.apexcharts-pan-icon:not(.apexcharts-selected):hover svg {\n  stroke: #333;\n}\n\n.apexcharts-toolbar {\n  position: absolute;\n  z-index: 11;\n  max-width: 176px;\n  text-align: right;\n  border-radius: 3px;\n  padding: 0px 6px 2px 6px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.apexcharts-menu {\n  background: #fff;\n  position: absolute;\n  top: 100%;\n  border: 1px solid #ddd;\n  border-radius: 3px;\n  padding: 3px;\n  right: 10px;\n  opacity: 0;\n  min-width: 110px;\n  transition: 0.15s ease all;\n  pointer-events: none;\n}\n\n.apexcharts-menu.apexcharts-menu-open {\n  opacity: 1;\n  pointer-events: all;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-menu-item {\n  padding: 6px 7px;\n  font-size: 12px;\n  cursor: pointer;\n}\n\n.apexcharts-theme-light .apexcharts-menu-item:hover {\n  background: #eee;\n}\n\n.apexcharts-theme-dark .apexcharts-menu {\n  background: rgba(0, 0, 0, 0.7);\n  color: #fff;\n}\n\n@media screen and (min-width: 768px) {\n  .apexcharts-canvas:hover .apexcharts-toolbar {\n    opacity: 1;\n  }\n}\n\n.apexcharts-datalabel.apexcharts-element-hidden {\n  opacity: 0;\n}\n\n.apexcharts-pie-label,\n.apexcharts-datalabels,\n.apexcharts-datalabel,\n.apexcharts-datalabel-label,\n.apexcharts-datalabel-value {\n  cursor: default;\n  pointer-events: none;\n}\n\n.apexcharts-pie-label-delay {\n  opacity: 0;\n  animation-name: opaque;\n  animation-duration: 0.3s;\n  animation-fill-mode: forwards;\n  animation-timing-function: ease;\n}\n\n.apexcharts-canvas .apexcharts-element-hidden {\n  opacity: 0;\n}\n\n.apexcharts-hide .apexcharts-series-points {\n  opacity: 0;\n}\n\n.apexcharts-gridline,\n.apexcharts-annotation-rect,\n.apexcharts-tooltip .apexcharts-marker,\n.apexcharts-area-series .apexcharts-area,\n.apexcharts-line,\n.apexcharts-zoom-rect,\n.apexcharts-toolbar svg,\n.apexcharts-area-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,\n.apexcharts-line-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,\n.apexcharts-radar-series path,\n.apexcharts-radar-series polygon {\n  pointer-events: none;\n}\n\n\n/* markers */\n\n.apexcharts-marker {\n  transition: 0.15s ease all;\n}\n\n@keyframes opaque {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\n\n/* Resize generated styles */\n\n@keyframes resizeanim {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 0;\n  }\n}\n\n.resize-triggers {\n  animation: 1ms resizeanim;\n  visibility: hidden;\n  opacity: 0;\n}\n\n.resize-triggers,\n.resize-triggers>div,\n.contract-trigger:before {\n  content: " ";\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n}\n\n.resize-triggers>div {\n  background: #eee;\n  overflow: auto;\n}\n\n.contract-trigger:before {\n  width: 200%;\n  height: 200%;\n}'),function(){function t(t){var e=t.__resizeTriggers__,i=e.firstElementChild,n=e.lastElementChild,r=i?i.firstElementChild:null;n&&(n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight),r&&(r.style.width=i.offsetWidth+1+"px",r.style.height=i.offsetHeight+1+"px"),i&&(i.scrollLeft=i.scrollWidth,i.scrollTop=i.scrollHeight)}function e(e){var i=this;t(this),this.__resizeRAF__&&o(this.__resizeRAF__),this.__resizeRAF__=r(function(){(i.offsetWidth!=i.__resizeLast__.width||i.offsetHeight!=i.__resizeLast__.height)&&(i.__resizeLast__.width=i.offsetWidth,i.__resizeLast__.height=i.offsetHeight,i.__resizeListeners__.forEach(function(t){t.call(e)}))})}var i,n,r=(i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return window.setTimeout(t,20)},function(t){return i(t)}),o=(n=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout,function(t){return n(t)}),a=!1,s="animationstart",l="Webkit Moz O ms".split(" "),h="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),u=document.createElement("fakeelement");if(void 0!==u.style.animationName&&(a=!0),!1===a)for(var c=0;c<l.length;c++)if(void 0!==u.style[l[c]+"AnimationName"]){s=h[c];break}window.addResizeListener=function(i,n){i.__resizeTriggers__||("static"==getComputedStyle(i).position&&(i.style.position="relative"),i.__resizeLast__={},i.__resizeListeners__=[],(i.__resizeTriggers__=document.createElement("div")).className="resize-triggers",i.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',i.appendChild(i.__resizeTriggers__),t(i),i.addEventListener("scroll",e,!0),s&&i.__resizeTriggers__.addEventListener(s,function(e){"resizeanim"==e.animationName&&t(i)})),i.__resizeListeners__.push(n)},window.removeResizeListener=function(t,i){t&&(t.__resizeListeners__.splice(t.__resizeListeners__.indexOf(i),1),t.__resizeListeners__.length||(t.removeEventListener("scroll",e),t.__resizeTriggers__.parentNode&&(t.__resizeTriggers__=!t.removeChild(t.__resizeTriggers__))))}}(),window.Apex={};var It=function(){function t(i){e(this,t),this.ctx=i,this.w=i.w}return n(t,[{key:"initModules",value:function(){this.ctx.publicMethods=["updateOptions","updateSeries","appendData","appendSeries","toggleSeries","showSeries","hideSeries","setLocale","resetSeries","toggleDataPointSelection","dataURI","addXaxisAnnotation","addYaxisAnnotation","addPointAnnotation","clearAnnotations","removeAnnotation","paper","destroy"],this.ctx.eventList=["click","mousedown","mousemove","touchstart","touchmove","mouseup","touchend"],this.ctx.animations=new v(this.ctx),this.ctx.axes=new H(this.ctx),this.ctx.core=new Pt(this.ctx.el,this.ctx),this.ctx.config=new P({}),this.ctx.data=new N(this.ctx),this.ctx.grid=new B(this.ctx),this.ctx.graphics=new y(this.ctx),this.ctx.coreUtils=new O(this.ctx),this.ctx.crosshairs=new q(this.ctx),this.ctx.events=new U(this.ctx),this.ctx.exports=new G(this.ctx),this.ctx.localization=new V(this.ctx),this.ctx.options=new S,this.ctx.responsive=new Z(this.ctx),this.ctx.series=new k(this.ctx),this.ctx.theme=new K(this.ctx),this.ctx.formatters=new D(this.ctx),this.ctx.titleSubtitle=new J(this.ctx),this.ctx.legend=new ot(this.ctx),this.ctx.toolbar=new at(this.ctx),this.ctx.dimensions=new it(this.ctx),this.ctx.updateHelpers=new Lt(this.ctx),this.ctx.zoomPanSelection=new st(this.ctx),this.ctx.w.globals.tooltip=new ft(this.ctx)}}]),t}(),Ot=function(){function t(i){e(this,t),this.ctx=i,this.w=i.w}return n(t,[{key:"clear",value:function(){this.ctx.zoomPanSelection&&this.ctx.zoomPanSelection.destroy(),this.ctx.toolbar&&this.ctx.toolbar.destroy(),this.ctx.animations=null,this.ctx.axes=null,this.ctx.annotations=null,this.ctx.core=null,this.ctx.data=null,this.ctx.grid=null,this.ctx.series=null,this.ctx.responsive=null,this.ctx.theme=null,this.ctx.formatters=null,this.ctx.titleSubtitle=null,this.ctx.legend=null,this.ctx.dimensions=null,this.ctx.options=null,this.ctx.crosshairs=null,this.ctx.zoomPanSelection=null,this.ctx.updateHelpers=null,this.ctx.toolbar=null,this.ctx.localization=null,this.ctx.w.globals.tooltip=null,this.clearDomElements()}},{key:"killSVG",value:function(t){t.each(function(t,e){this.removeClass("*"),this.off(),this.stop()},!0),t.ungroup(),t.clear()}},{key:"clearDomElements",value:function(){var t=this;this.ctx.eventList.forEach(function(e){document.removeEventListener(e,t.ctx.events.documentEvent)});var e=this.w.globals.dom;if(null!==this.ctx.el)for(;this.ctx.el.firstChild;)this.ctx.el.removeChild(this.ctx.el.firstChild);this.killSVG(e.Paper),e.Paper.remove(),e.elWrap=null,e.elGraphical=null,e.elAnnotations=null,e.elLegendWrap=null,e.baseEl=null,e.elGridRect=null,e.elGridRectMask=null,e.elGridRectMarkerMask=null,e.elDefs=null}}]),t}();return function(){function t(i,n){e(this,t),this.opts=n,this.ctx=this,this.w=new I(n).init(),this.el=i,this.w.globals.cuid=f.randomId(),this.w.globals.chartID=this.w.config.chart.id?this.w.config.chart.id:this.w.globals.cuid,new It(this).initModules(),this.create=f.bind(this.create,this),this.windowResizeHandler=this._windowResize.bind(this)}return n(t,[{key:"render",value:function(){var t=this;return new Promise(function(e,i){if(null!==t.el){void 0===Apex._chartInstances&&(Apex._chartInstances=[]),t.w.config.chart.id&&Apex._chartInstances.push({id:t.w.globals.chartID,group:t.w.config.chart.group,chart:t}),t.setLocale(t.w.config.chart.defaultLocale);var n=t.w.config.chart.events.beforeMount;"function"==typeof n&&n(t,t.w),t.events.fireEvent("beforeMount",[t,t.w]),window.addEventListener("resize",t.windowResizeHandler),window.addResizeListener(t.el.parentNode,t._parentResizeCallback.bind(t));var r=t.create(t.w.config.series,{});if(!r)return e(t);t.mount(r).then(function(){"function"==typeof t.w.config.chart.events.mounted&&t.w.config.chart.events.mounted(t,t.w),t.events.fireEvent("mounted",[t,t.w]),e(r)}).catch(function(t){i(t)})}else i(new Error("Element not found"))})}},{key:"create",value:function(t,e){var i=this.w;new It(this).initModules();var n=this.w.globals;if(n.noData=!1,n.animationEnded=!1,this.responsive.checkResponsiveConfig(e),i.config.xaxis.convertedCatToNumeric&&new T(i.config).convertCatToNumericXaxis(i.config,this.ctx),null===this.el)return n.animationEnded=!0,null;if(this.core.setupElements(),0===n.svgWidth)return n.animationEnded=!0,null;var r=O.checkComboSeries(t);n.comboCharts=r.comboCharts,n.comboBarCount=r.comboBarCount,(0===t.length||1===t.length&&t[0].data&&0===t[0].data.length)&&this.series.handleNoData(),this.events.setupEventHandlers(),this.data.parseData(t),this.theme.init(),new R(this).setGlobalMarkerSize(),this.formatters.setLabelFormatters(),this.titleSubtitle.draw(),n.noData&&n.collapsedSeries.length!==n.series.length||this.legend.init(),this.series.hasAllSeriesEqualX(),n.axisCharts&&(this.core.coreCalculations(),"category"!==i.config.xaxis.type&&this.formatters.setLabelFormatters()),this.formatters.heatmapLabelFormatters(),this.dimensions.plotCoords();var o=this.core.xySettings();this.grid.createGridMask();var a=this.core.plotChartType(t,o),s=new F(this);return s.bringForward(),i.config.dataLabels.background.enabled&&s.dataLabelsBackground(),this.core.shiftGraphPosition(),{elGraph:a,xyRatios:o,elInner:i.globals.dom.elGraphical,dimensions:{plot:{left:i.globals.translateX,top:i.globals.translateY,width:i.globals.gridWidth,height:i.globals.gridHeight}}}}},{key:"mount",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=this,n=i.w;return new Promise(function(r,o){if(null===i.el)return o(new Error("Not enough data to display or target element not found"));(null===e||n.globals.allSeriesCollapsed)&&i.series.handleNoData(),i.axes.drawAxis(n.config.chart.type,e.xyRatios),i.grid=new B(i);var a=i.grid.drawGrid();i.annotations=new C(i),i.annotations.drawShapeAnnos(),i.annotations.drawImageAnnos(),i.annotations.drawTextAnnos(),"back"===n.config.grid.position&&a&&n.globals.dom.elGraphical.add(a.el);var s=new z(t.ctx),l=new W(t.ctx);if(null!==a&&(s.xAxisLabelCorrections(a.xAxisTickWidth),l.setYAxisTextAlignments()),"back"===n.config.annotations.position&&(n.globals.dom.Paper.add(n.globals.dom.elAnnotations),i.annotations.drawAxesAnnotations()),e.elGraph instanceof Array)for(var h=0;h<e.elGraph.length;h++)n.globals.dom.elGraphical.add(e.elGraph[h]);else n.globals.dom.elGraphical.add(e.elGraph);if("front"===n.config.grid.position&&a&&n.globals.dom.elGraphical.add(a.el),"front"===n.config.xaxis.crosshairs.position&&i.crosshairs.drawXCrosshairs(),"front"===n.config.yaxis[0].crosshairs.position&&i.crosshairs.drawYCrosshairs(),"front"===n.config.annotations.position&&(n.globals.dom.Paper.add(n.globals.dom.elAnnotations),i.annotations.drawAxesAnnotations()),!n.globals.noData){if(n.config.tooltip.enabled&&!n.globals.noData&&i.w.globals.tooltip.drawTooltip(e.xyRatios),n.globals.axisCharts&&(n.globals.isXNumeric||n.config.xaxis.convertedCatToNumeric))(n.config.chart.zoom.enabled||n.config.chart.selection&&n.config.chart.selection.enabled||n.config.chart.pan&&n.config.chart.pan.enabled)&&i.zoomPanSelection.init({xyRatios:e.xyRatios});else{var u=n.config.chart.toolbar.tools;["zoom","zoomin","zoomout","selection","pan","reset"].forEach(function(t){u[t]=!1})}n.config.chart.toolbar.show&&!n.globals.allSeriesCollapsed&&i.toolbar.createToolbar()}n.globals.memory.methodsToExec.length>0&&n.globals.memory.methodsToExec.forEach(function(t){t.method(t.params,!1,t.context)}),n.globals.axisCharts||n.globals.noData||i.core.resizeNonAxisCharts(),r(i)})}},{key:"destroy",value:function(){window.removeEventListener("resize",this.windowResizeHandler),window.removeResizeListener(this.el.parentNode,this._parentResizeCallback.bind(this));var t=this.w.config.chart.id;t&&Apex._chartInstances.forEach(function(e,i){e.id===t&&Apex._chartInstances.splice(i,1)}),new Ot(this.ctx).clear()}},{key:"updateOptions",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=this.w;return t.series&&(this.series.resetSeries(!1,!0,!1),t.series.length&&t.series[0].data&&(t.series=t.series.map(function(t,i){return e.updateHelpers._extendSeries(t,i)})),this.updateHelpers.revertDefaultAxisMinMax()),t.xaxis&&(t=this.updateHelpers.forceXAxisUpdate(t)),t.yaxis&&(t=this.updateHelpers.forceYAxisUpdate(t)),a.globals.collapsedSeriesIndices.length>0&&this.series.clearPreviousPaths(),t.theme&&(t=this.theme.updateThemeOptions(t)),this.updateHelpers._updateOptions(t,i,n,r,o)}},{key:"updateSeries",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(t,e,i)}},{key:"appendSeries",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=this.w.config.series.slice();return n.push(t),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(n,e,i)}},{key:"appendData",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.w.globals.dataChanged=!0,this.series.getPreviousPaths();for(var i=this.w.config.series.slice(),n=0;n<i.length;n++)if(void 0!==t[n])for(var r=0;r<t[n].data.length;r++)i[n].data.push(t[n].data[r]);return this.w.config.series=i,e&&(this.w.globals.initialSeries=JSON.parse(JSON.stringify(this.w.config.series))),this.update()}},{key:"update",value:function(t){var e=this;return new Promise(function(i,n){new Ot(e.ctx).clear();var r=e.create(e.w.config.series,t);if(!r)return i(e);e.mount(r).then(function(){"function"==typeof e.w.config.chart.events.updated&&e.w.config.chart.events.updated(e,e.w),e.events.fireEvent("updated",[e,e.w]),e.w.globals.isDirty=!0,i(e)}).catch(function(t){n(t)})})}},{key:"getSyncedCharts",value:function(){var t=this.getGroupedCharts(),e=[this];return t.length&&(e=[],t.forEach(function(t){e.push(t)})),e}},{key:"getGroupedCharts",value:function(){var t=this;return Apex._chartInstances.filter(function(t){if(t.group)return!0}).map(function(e){return t.w.config.chart.group===e.group?e.chart:t})}},{key:"toggleSeries",value:function(t){return this.series.toggleSeries(t)}},{key:"showSeries",value:function(t){this.series.showSeries(t)}},{key:"hideSeries",value:function(t){this.series.hideSeries(t)}},{key:"resetSeries",value:function(){this.series.resetSeries(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])}},{key:"addEventListener",value:function(t,e){this.events.addEventListener(t,e)}},{key:"removeEventListener",value:function(t,e){this.events.removeEventListener(t,e)}},{key:"addXaxisAnnotation",value:function(t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=this;e&&(i=e),i.annotations.addXaxisAnnotationExternal(t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i)}},{key:"addYaxisAnnotation",value:function(t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=this;e&&(i=e),i.annotations.addYaxisAnnotationExternal(t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i)}},{key:"addPointAnnotation",value:function(t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=this;e&&(i=e),i.annotations.addPointAnnotationExternal(t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i)}},{key:"clearAnnotations",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=this;t&&(e=t),e.annotations.clearAnnotations(e)}},{key:"removeAnnotation",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=this;e&&(i=e),i.annotations.removeAnnotation(i,t)}},{key:"getChartArea",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner")}},{key:"getSeriesTotalXRange",value:function(t,e){return this.coreUtils.getSeriesTotalsXRange(t,e)}},{key:"getHighestValueInSeries",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new X(this.ctx).getMinYMaxY(t).highestY}},{key:"getLowestValueInSeries",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new X(this.ctx).getMinYMaxY(t).lowestY}},{key:"getSeriesTotal",value:function(){return this.w.globals.seriesTotals}},{key:"toggleDataPointSelection",value:function(t,e){return this.updateHelpers.toggleDataPointSelection(t,e)}},{key:"setLocale",value:function(t){this.localization.setCurrentLocaleValues(t)}},{key:"dataURI",value:function(){return new G(this.ctx).dataURI()}},{key:"paper",value:function(){return this.w.globals.dom.Paper}},{key:"_parentResizeCallback",value:function(){!this.w.globals.noData&&this.w.globals.animationEnded&&this.w.config.chart.redrawOnParentResize&&this._windowResize()}},{key:"_windowResize",value:function(){var t=this;clearTimeout(this.w.globals.resizeTimer),this.w.globals.resizeTimer=window.setTimeout(function(){t.w.globals.resized=!0,t.w.globals.dataChanged=!1,t.ctx.update()},150)}}],[{key:"getChartByID",value:function(t){var e=Apex._chartInstances.filter(function(e){return e.id===t})[0];return e&&e.chart}},{key:"initOnLoad",value:function(){for(var e=document.querySelectorAll("[data-apexcharts]"),i=0;i<e.length;i++)new t(e[i],JSON.parse(e[i].getAttribute("data-options"))).render()}},{key:"exec",value:function(t,e){var i=this.getChartByID(t);if(i){i.w.globals.isExecCalled=!0;var n=null;if(-1!==i.publicMethods.indexOf(e)){for(var r=arguments.length,o=new Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];n=i[e].apply(i,o)}return n}}},{key:"merge",value:function(t,e){return f.extend(t,e)}}]),t}()}),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ol=e():t.ol=e()}(window,function(){return function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var r in t)e.d(n,r,(function(e){return t[e]}).bind(null,r));return n},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=7)}([function(t,e,i){t.exports=function(){"use strict";function t(t,i,n,r,o){!function t(i,n,r,o,a){for(;o>r;){if(o-r>600){var s=o-r+1,l=n-r+1,h=Math.log(s),u=.5*Math.exp(2*h/3),c=.5*Math.sqrt(h*u*(s-u)/s)*(l-s/2<0?-1:1);t(i,n,Math.max(r,Math.floor(n-l*u/s+c)),Math.min(o,Math.floor(n+(s-l)*u/s+c)),a)}var p=i[n],d=r,f=o;for(e(i,r,n),a(i[o],p)>0&&e(i,r,o);d<f;){for(e(i,d,f),d++,f--;a(i[d],p)<0;)d++;for(;a(i[f],p)>0;)f--}0===a(i[r],p)?e(i,r,f):(f++,e(i,f,o)),f<=n&&(r=f+1),n<=f&&(o=f-1)}}(t,i,n||0,r||t.length-1,o||function(t,e){return t<e?-1:t>e?1:0})}function e(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function i(t,e,i){if(!i)return e.indexOf(t);for(var n=0;n<e.length;n++)if(i(t,e[n]))return n;return-1}function n(t,e){r(t,0,t.children.length,e,t)}function r(t,e,i,n,r){r||(r=p(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var a=e;a<i;a++){var s=t.children[a];o(r,t.leaf?n(s):s)}return r}function o(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function a(t,e){return t.minX-e.minX}function s(t,e){return t.minY-e.minY}function l(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function u(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function c(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(e,i,n,r,o){for(var a=[i,n];a.length;)if(!((n=a.pop())-(i=a.pop())<=r)){var s=i+Math.ceil((n-i)/r/2)*r;t(e,s,i,n,o),a.push(i,s,s,n)}}var f=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};return f.prototype.all=function(){return this._all(this.data,[])},f.prototype.search=function(t){var e=this.data,i=[];if(!c(t,e))return i;for(var n=this.toBBox,r=[];e;){for(var o=0;o<e.children.length;o++){var a=e.children[o],s=e.leaf?n(a):a;c(t,s)&&(e.leaf?i.push(a):u(t,s)?this._all(a,i):r.push(a))}e=r.pop()}return i},f.prototype.collides=function(t){var e=this.data;if(!c(t,e))return!1;for(var i=[];e;){for(var n=0;n<e.children.length;n++){var r=e.children[n],o=e.leaf?this.toBBox(r):r;if(c(t,o)){if(e.leaf||u(t,o))return!0;i.push(r)}}e=i.pop()}return!1},f.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var n=this.data;this.data=i,i=n}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},f.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},f.prototype.clear=function(){return this.data=p([]),this},f.prototype.remove=function(t,e){if(!t)return this;for(var n,r,o,a=this.data,s=this.toBBox(t),l=[],h=[];a||l.length;){if(a||(a=l.pop(),r=l[l.length-1],n=h.pop(),o=!0),a.leaf){var c=i(t,a.children,e);if(-1!==c)return a.children.splice(c,1),l.push(a),this._condense(l),this}o||a.leaf||!u(a,s)?r?(n++,a=r.children[n],o=!1):a=null:(l.push(a),h.push(n),n=0,r=a,a=a.children[0])}return this},f.prototype.toBBox=function(t){return t},f.prototype.compareMinX=function(t,e){return t.minX-e.minX},f.prototype.compareMinY=function(t,e){return t.minY-e.minY},f.prototype.toJSON=function(){return this.data},f.prototype.fromJSON=function(t){return this.data=t,this},f.prototype._all=function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},f.prototype._build=function(t,e,i,r){var o,a=i-e+1,s=this._maxEntries;if(a<=s)return n(o=p(t.slice(e,i+1)),this.toBBox),o;r||(r=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,r-1))),(o=p([])).leaf=!1,o.height=r;var l=Math.ceil(a/s),h=l*Math.ceil(Math.sqrt(s));d(t,e,i,h,this.compareMinX);for(var u=e;u<=i;u+=h){var c=Math.min(u+h-1,i);d(t,u,c,l,this.compareMinY);for(var f=u;f<=c;f+=l){var g=Math.min(f+l-1,c);o.children.push(this._build(t,f,g,r-1))}}return n(o,this.toBBox),o},f.prototype._chooseSubtree=function(t,e,i,n){for(;n.push(e),!e.leaf&&n.length-1!==i;){for(var r=1/0,o=1/0,a=void 0,s=0;s<e.children.length;s++){var h=e.children[s],u=l(h),c=(p=t,d=h,(Math.max(d.maxX,p.maxX)-Math.min(d.minX,p.minX))*(Math.max(d.maxY,p.maxY)-Math.min(d.minY,p.minY))-u);c<o?(o=c,r=u<r?u:r,a=h):c===o&&u<r&&(r=u,a=h)}e=a||e.children[0]}var p,d;return e},f.prototype._insert=function(t,e,i){var n=i?t:this.toBBox(t),r=[],a=this._chooseSubtree(n,this.data,e,r);for(a.children.push(t),o(a,n);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(n,r,e)},f.prototype._split=function(t,e){var i=t[e],r=i.children.length,o=this._minEntries;this._chooseSplitAxis(i,o,r);var a=this._chooseSplitIndex(i,o,r),s=p(i.children.splice(a,i.children.length-a));s.height=i.height,s.leaf=i.leaf,n(i,this.toBBox),n(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(i,s)},f.prototype._splitRoot=function(t,e){this.data=p([t,e]),this.data.height=t.height+1,this.data.leaf=!1,n(this.data,this.toBBox)},f.prototype._chooseSplitIndex=function(t,e,i){for(var n,o,a,s,h,u,c,p=1/0,d=1/0,f=e;f<=i-e;f++){var g=r(t,0,f,this.toBBox),v=r(t,f,i,this.toBBox),y=(o=g,a=v,s=void 0,h=void 0,u=void 0,c=void 0,s=Math.max(o.minX,a.minX),h=Math.max(o.minY,a.minY),u=Math.min(o.maxX,a.maxX),c=Math.min(o.maxY,a.maxY),Math.max(0,u-s)*Math.max(0,c-h)),m=l(g)+l(v);y<p?(p=y,n=f,d=m<d?m:d):y===p&&m<d&&(d=m,n=f)}return n||i-e},f.prototype._chooseSplitAxis=function(t,e,i){var n=t.leaf?this.compareMinX:a,r=t.leaf?this.compareMinY:s;this._allDistMargin(t,e,i,n)<this._allDistMargin(t,e,i,r)&&t.children.sort(n)},f.prototype._allDistMargin=function(t,e,i,n){t.children.sort(n);for(var a=this.toBBox,s=r(t,0,e,a),l=r(t,i-e,i,a),u=h(s)+h(l),c=e;c<i-e;c++){var p=t.children[c];o(s,t.leaf?a(p):p),u+=h(s)}for(var d=i-e-1;d>=e;d--){var f=t.children[d];o(l,t.leaf?a(f):f),u+=h(l)}return u},f.prototype._adjustParentBBoxes=function(t,e,i){for(var n=i;n>=0;n--)o(e[n],t)},f.prototype._condense=function(t){for(var e=t.length-1,i=void 0;e>=0;e--)0===t[e].children.length?e>0?(i=t[e-1].children).splice(i.indexOf(t[e]),1):this.clear():n(t[e],this.toBBox)},f}()},function(t,e){function i(t,e,i){t.addEventListener(e,function(t){var n=new MouseEvent(i,t);n.pointerId=1,n.isPrimary=!0,n.pointerType="mouse",n.width=1,n.height=1,n.tiltX=0,n.tiltY=0,n.pressure="buttons"in t&&0!==t.buttons?.5:0;var r=t.target;null!==o&&(r=o,"mouseup"===e&&(o=null)),r.dispatchEvent(n),n.defaultPrevented&&t.preventDefault()})}function n(t,e,i){t.addEventListener(e,function(t){for(var n=t.changedTouches,o=n.length,a=0;a<o;a++){var s=new CustomEvent(i,{bubbles:!0,cancelable:!0});s.ctrlKey=t.ctrlKey,s.shiftKey=t.shiftKey,s.altKey=t.altKey,s.metaKey=t.metaKey;var l=n.item(a);s.clientX=l.clientX,s.clientY=l.clientY,s.screenX=l.screenX,s.screenY=l.screenY,s.pageX=l.pageX,s.pageY=l.pageY;var h=l.target.getBoundingClientRect();s.offsetX=l.clientX-h.left,s.offsetY=l.clientY-h.top,s.pointerId=1+l.identifier,s.button=0,s.buttons=1,s.movementX=0,s.movementY=0,s.region=null,s.relatedTarget=null,s.x=s.clientX,s.y=s.clientY,s.pointerType="touch",s.width=1,s.height=1,s.tiltX=0,s.tiltY=0,s.pressure=1,"touchstart"===e&&null===r&&(r=l.identifier),s.isPrimary=l.identifier===r,"touchend"===e&&s.isPrimary&&(r=null),t.target.dispatchEvent(s),s.defaultPrevented&&t.preventDefault()}})}var r=null,o=null;"PointerEvent"in window||(Element.prototype.setPointerCapture=Element.prototype.setCapture,Element.prototype.releasePointerCapture=Element.prototype.releaseCapture,"TouchEvent"in window||(i(document,"mousedown","pointerdown"),i(document,"mousemove","pointermove"),i(document,"mouseup","pointerup")),n(document,"touchstart","pointerdown"),n(document,"touchmove","pointermove"),n(document,"touchend","pointerup"))},function(t,e,i){"use strict";function n(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}function r(t){return t.type===n.Bytes?t.readVarint()+t.pos:t.pos+1}function o(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function a(t,e,i){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));i.realloc(n);for(var r=i.pos-1;r>=t;r--)i.buf[r+n]=i.buf[r]}function s(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function l(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function h(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function u(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function c(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function p(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function d(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function f(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function g(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function v(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function y(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function m(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}t.exports=n;var _=i(4);n.Varint=0,n.Fixed64=1,n.Bytes=2,n.Fixed32=5;var x="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");n.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var n=this.readVarint(),r=n>>3,o=this.pos;this.type=7&n,t(r,e,this),this.pos===o&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=v(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=m(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=v(this.buf,this.pos)+4294967296*v(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=v(this.buf,this.pos)+4294967296*m(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=_.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=_.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,i,n=this.buf;return e=127&(i=n[this.pos++]),i<128?e:(e|=(127&(i=n[this.pos++]))<<7,i<128?e:(e|=(127&(i=n[this.pos++]))<<14,i<128?e:(e|=(127&(i=n[this.pos++]))<<21,i<128?e:function(t,e,i){var n,r,a=i.buf;if(r=a[i.pos++],n=(112&r)>>4,r<128)return o(t,n,e);if(r=a[i.pos++],n|=(127&r)<<3,r<128)return o(t,n,e);if(r=a[i.pos++],n|=(127&r)<<10,r<128)return o(t,n,e);if(r=a[i.pos++],n|=(127&r)<<17,r<128)return o(t,n,e);if(r=a[i.pos++],n|=(127&r)<<24,r<128)return o(t,n,e);if(r=a[i.pos++],n|=(1&r)<<31,r<128)return o(t,n,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(i=n[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&x?function(i,n,r){return x.decode(i.subarray(e,t))}(this.buf):function(t,i,n){for(var r="",o=e;o<n;){var a,s,l,h=t[o],u=null,c=h>239?4:h>223?3:h>191?2:1;if(o+c>n)break;1===c?h<128&&(u=h):2===c?128==(192&(a=t[o+1]))&&(u=(31&h)<<6|63&a)<=127&&(u=null):3===c?(a=t[o+1],s=t[o+2],128==(192&a)&&128==(192&s)&&((u=(15&h)<<12|(63&a)<<6|63&s)<=2047||u>=55296&&u<=57343)&&(u=null)):4===c&&(a=t[o+1],s=t[o+2],l=t[o+3],128==(192&a)&&128==(192&s)&&128==(192&l)&&((u=(15&h)<<18|(63&a)<<12|(63&s)<<6|63&l)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,c=1):u>65535&&(u-=65536,r+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),r+=String.fromCharCode(u),o+=c}return r}(this.buf,0,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==n.Bytes)return t.push(this.readVarint(e));var i=r(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==n.Bytes)return t.push(this.readSVarint());var e=r(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==n.Bytes)return t.push(this.readBoolean());var e=r(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==n.Bytes)return t.push(this.readFloat());var e=r(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==n.Bytes)return t.push(this.readDouble());var e=r(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==n.Bytes)return t.push(this.readFixed32());var e=r(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==n.Bytes)return t.push(this.readSFixed32());var e=r(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==n.Bytes)return t.push(this.readFixed64());var e=r(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==n.Bytes)return t.push(this.readSFixed64());var e=r(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===n.Varint)for(;this.buf[this.pos++]>127;);else if(e===n.Bytes)this.pos=this.readVarint()+this.pos;else if(e===n.Fixed32)this.pos+=4;else{if(e!==n.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),y(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),y(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),y(this.buf,-1&t,this.pos),y(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),y(this.buf,-1&t,this.pos),y(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(e,i){var n,r;if(t>=0?(n=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");i.realloc(10),function(t,e,i){i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,i.buf[i.pos]=127&(t>>>=7)}(n,0,i),function(t,e){var i=(7&t)<<4;e.buf[e.pos++]|=i|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,i)}(0,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,i){for(var n,r,o=0;o<e.length;o++){if((n=e.charCodeAt(o))>55295&&n<57344){if(!r){n>56319||o+1===e.length?(t[i++]=239,t[i++]=191,t[i++]=189):r=n;continue}if(n<56320){t[i++]=239,t[i++]=191,t[i++]=189,r=n;continue}n=r-55296<<10|n-56320|65536,r=null}else r&&(t[i++]=239,t[i++]=191,t[i++]=189,r=null);n<128?t[i++]=n:(n<2048?t[i++]=n>>6|192:(n<65536?t[i++]=n>>12|224:(t[i++]=n>>18|240,t[i++]=n>>12&63|128),t[i++]=n>>6&63|128),t[i++]=63&n|128)}return i}(this.buf,t,this.pos);var i=this.pos-e;i>=128&&a(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),_.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),_.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var n=this.pos-i;n>=128&&a(i,n,this),this.pos=i-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,i){this.writeTag(t,n.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,s,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,l,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,c,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,h,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,u,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,p,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,d,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,f,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,g,e)},writeBytesField:function(t,e){this.writeTag(t,n.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,n.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,n.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,n.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,n.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,n.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,n.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,n.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,n.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,n.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},function(t,e,i){var n=i(5);e.Processor=n},function(t,e){e.read=function(t,e,i,n,r){var o,a,s=8*r-n-1,l=(1<<s)-1,h=l>>1,u=-7,c=i?r-1:0,p=i?-1:1,d=t[e+c];for(c+=p,o=d&(1<<-u)-1,d>>=-u,u+=s;u>0;o=256*o+t[e+c],c+=p,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=n;u>0;a=256*a+t[e+c],c+=p,u-=8);if(0===o)o=1-h;else{if(o===l)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,n),o-=h}return(d?-1:1)*a*Math.pow(2,o-n)},e.write=function(t,e,i,n,r,o){var a,s,l,h=8*o-r-1,u=(1<<h)-1,c=u>>1,p=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,f=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+c>=1?p/l:p*Math.pow(2,1-c))*l>=2&&(a++,l/=2),a+c>=u?(s=0,a=u):a+c>=1?(s=(e*l-1)*Math.pow(2,r),a+=c):(s=e*Math.pow(2,c-1)*Math.pow(2,r),a=0));r>=8;t[i+d]=255&s,d+=f,s/=256,r-=8);for(a=a<<r|s,h+=r;h>0;t[i+d]=255&a,d+=f,a/=256,h-=8);t[i+d-f]|=128*g}},function(t,e,i){function n(t){function e(t,e,n){return i?new ImageData(t,e,n):{data:t,width:e,height:n}}var i=!0;try{new ImageData(10,10)}catch(t){i=!1}return function(i){var n,r,o=i.buffers,a=i.meta,s=i.width,l=i.height,h=o.length,u=o[0].byteLength;if(i.imageOps){var c=new Array(h);for(r=0;r<h;++r)c[r]=e(new Uint8ClampedArray(o[r]),s,l);n=t(c,a).data}else{n=new Uint8ClampedArray(u);var p=new Array(h),d=new Array(h);for(r=0;r<h;++r)p[r]=new Uint8ClampedArray(o[r]),d[r]=[0,0,0,0];for(var f=0;f<u;f+=4){for(var g=0;g<h;++g){var v=p[g];d[g][0]=v[f],d[g][1]=v[f+1],d[g][2]=v[f+2],d[g][3]=v[f+3]}var y=t(d,a);n[f]=y[0],n[f+1]=y[1],n[f+2]=y[2],n[f+3]=y[3]}}return n.buffer}}function r(t,e){var i=Object.keys(t.lib||{}).map(function(e){return"var "+e+" = "+t.lib[e].toString()+";"}).concat(["var __minion__ = ("+n.toString()+")(",t.operation.toString(),");",'self.addEventListener("message", function(event) {',"  var buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),r=new Blob(i,{type:"text/javascript"}),o=URL.createObjectURL(r),a=new Worker(o);return a.addEventListener("message",e),a}function o(t){var e;this._imageOps=!!t.imageOps;var i=[];if(e=0===t.threads?0:this._imageOps?1:t.threads||1)for(var o=0;o<e;++o)i[o]=r(t,this._onWorkerMessage.bind(this,o));else i[0]=function(t,e){var i=n(t.operation);return{postMessage:function(t){setTimeout(function(){e({data:{buffer:i(t),meta:t.meta}})},0)}}}(t,this._onWorkerMessage.bind(this,0));this._workers=i,this._queue=[],this._maxQueueLength=t.queue||1/0,this._running=0,this._dataLookup={},this._job=null}var a=i(6).newImageData;o.prototype.process=function(t,e,i){this._enqueue({inputs:t,meta:e,callback:i}),this._dispatch()},o.prototype.destroy=function(){for(var t in this)this[t]=null;this._destroyed=!0},o.prototype._enqueue=function(t){for(this._queue.push(t);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)},o.prototype._dispatch=function(){if(0===this._running&&this._queue.length>0){var t=this._job=this._queue.shift(),e=t.inputs[0].width,i=t.inputs[0].height,n=t.inputs.map(function(t){return t.data.buffer}),r=this._workers.length;if(this._running=r,1===r)this._workers[0].postMessage({buffers:n,meta:t.meta,imageOps:this._imageOps,width:e,height:i},n);else for(var o=t.inputs[0].data.length,a=4*Math.ceil(o/4/r),s=0;s<r;++s){for(var l=s*a,h=[],u=0,c=n.length;u<c;++u)h.push(n[s].slice(l,l+a));this._workers[s].postMessage({buffers:h,meta:t.meta,imageOps:this._imageOps,width:e,height:i},h)}}},o.prototype._onWorkerMessage=function(t,e){this._destroyed||(this._dataLookup[t]=e.data,--this._running,0===this._running&&this._resolveJob())},o.prototype._resolveJob=function(){var t,e,i=this._job,n=this._workers.length;if(1===n)t=new Uint8ClampedArray(this._dataLookup[0].buffer),e=this._dataLookup[0].meta;else{var r=i.inputs[0].data.length;t=new Uint8ClampedArray(r),e=new Array(r);for(var o=4*Math.ceil(r/4/n),s=0;s<n;++s){var l=this._dataLookup[s].buffer,h=s*o;t.set(new Uint8ClampedArray(l),h),e[s]=this._dataLookup[s].meta}}this._job=null,this._dataLookup={},i.callback(null,a(t,i.inputs[0].width,i.inputs[0].height),e),this._dispatch()},t.exports=o},function(t,e){var i=!0;try{new ImageData(10,10)}catch(t){i=!1}var n=document.createElement("canvas").getContext("2d");e.newImageData=function(t,e,r){if(i)return new ImageData(t,e,r);var o=n.createImageData(e,r);return o.data.set(t),o}},function(t,e,i){"use strict";function n(){return function(){throw new Error("Unimplemented abstract method.")}()}function r(t){return t.ol_uid||(t.ol_uid=String(++Jo))}function o(t){for(var e in t)delete t[e]}function a(t){var e;for(e in t)return!1;return!e}function s(t,e,i,n,r){if(n&&n!==t&&(i=i.bind(n)),r){var o=i;i=function(){t.removeEventListener(e,i),o.apply(this,arguments)}}var a={target:t,type:e,listener:i};return t.addEventListener(e,i),a}function l(t,e,i,n){return s(t,e,i,n,!0)}function h(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),o(t))}function u(t,e){return t>e?1:t<e?-1:0}function c(t,e){return t.indexOf(e)>=0}function p(t,e,i){var n=t.length;if(t[0]<=e)return 0;if(e<=t[n-1])return n-1;var r=void 0;if(i>0){for(r=1;r<n;++r)if(t[r]<e)return r-1}else if(i<0){for(r=1;r<n;++r)if(t[r]<=e)return r}else for(r=1;r<n;++r){if(t[r]==e)return r;if(t[r]<e)return t[r-1]-e<e-t[r]?r-1:r}return n-1}function d(t,e,i){for(;e<i;){var n=t[e];t[e]=t[i],t[i]=n,++e,--i}}function f(t,e){for(var i=Array.isArray(e)?e:[e],n=i.length,r=0;r<n;r++)t[t.length]=i[r]}function g(t,e){for(var i,n=t.length>>>0,r=0;r<n;r++)if(e(i=t[r],r,t))return i;return null}function v(t,e){var i=t.length;if(i!==e.length)return!1;for(var n=0;n<i;n++)if(t[n]!==e[n])return!1;return!0}function y(t,e){var i;return t.every(function(n,r){return i=r,!e(n,r,t)})?-1:i}function m(){return!0}function _(){return!1}function x(){}function b(t){t.stopPropagation()}function w(t){return wa.hasOwnProperty(t)?wa[t]:wa[t]="change:"+t}function S(t,e){if(!t)throw new Qo(e)}function C(t){for(var e=[1/0,1/0,-1/0,-1/0],i=0,n=t.length;i<n;++i)j(e,t[i]);return e}function E(t,e,i){return i?(i[0]=t[0]-e,i[1]=t[1]-e,i[2]=t[2]+e,i[3]=t[3]+e,i):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function T(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function P(t,e,i){var n,r;return(n=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*n+(r=i<t[1]?t[1]-i:t[3]<i?i-t[3]:0)*r}function L(t,e){return O(t,e[0],e[1])}function I(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function O(t,e,i){return t[0]<=e&&e<=t[2]&&t[1]<=i&&i<=t[3]}function A(t,e){var i=e[0],n=e[1],r=Ma;return i<t[0]?r|=ja:i>t[2]&&(r|=Na),n<t[1]?r|=Da:n>t[3]&&(r|=ka),r===Ma&&(r=Fa),r}function R(t,e,i,n,r){return r?(r[0]=t,r[1]=e,r[2]=i,r[3]=n,r):[t,e,i,n]}function M(t){return R(1/0,1/0,-1/0,-1/0,t)}function F(t,e){var i=t[0],n=t[1];return R(i,n,i,n,e)}function k(t,e,i,n,r){return G(M(r),t,e,i,n)}function N(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function D(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function j(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function G(t,e,i,n,r){for(;i<n;i+=r)!function(t,e,i){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],i),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],i)}(t,e[i],e[i+1]);return t}function z(t,e){var i;return(i=e(Y(t)))||(i=e(X(t)))||(i=e(Z(t)))?i:(i=e(q(t)))||!1}function B(t){var e=0;return $(t)||(e=K(t)*V(t)),e}function Y(t){return[t[0],t[1]]}function X(t){return[t[2],t[1]]}function W(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function U(t,e,i,n,r){var o=e*n[0]/2,a=e*n[1]/2,s=Math.cos(i),l=Math.sin(i),h=o*s,u=o*l,c=a*s,p=a*l,d=t[0],f=t[1],g=d-h+p,v=d-h-p,y=d+h-p,m=d+h+p,_=f-u-c,x=f-u+c,b=f+u+c,w=f+u-c;return R(Math.min(g,v,y,m),Math.min(_,x,b,w),Math.max(g,v,y,m),Math.max(_,x,b,w),r)}function V(t){return t[3]-t[1]}function H(t,e,i){var n=i||[1/0,1/0,-1/0,-1/0];return J(t,e)?(n[0]=t[0]>e[0]?t[0]:e[0],n[1]=t[1]>e[1]?t[1]:e[1],n[2]=t[2]<e[2]?t[2]:e[2],n[3]=t[3]<e[3]?t[3]:e[3]):M(n),n}function q(t){return[t[0],t[3]]}function Z(t){return[t[2],t[3]]}function K(t){return t[2]-t[0]}function J(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function $(t){return t[2]<t[0]||t[3]<t[1]}function Q(t,e){var i=(t[2]-t[0])/2*(e-1),n=(t[3]-t[1])/2*(e-1);t[0]-=i,t[2]+=i,t[1]-=n,t[3]+=n}function tt(t,e,i,n){var r=[];if(n>1)for(var o=t[2]-t[0],a=t[3]-t[1],s=0;s<n;++s)r.push(t[0]+o*s/n,t[1],t[2],t[1]+a*s/n,t[2]-o*s/n,t[3],t[0],t[3]-a*s/n);else r=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(r,r,2);for(var l=[],h=[],u=(s=0,r.length);s<u;s+=2)l.push(r[s]),h.push(r[s+1]);return function(t,e,i){return R(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),i)}(l,h,i)}function et(t,e){var i=e.getExtent(),n=W(t);if(e.canWrapX()&&(n[0]<i[0]||n[0]>=i[2])){var r=K(i),o=Math.floor((n[0]-i[0])/r)*r;t[0]-=o,t[2]-=o}return t}function it(t,e,i,n,r,o){for(var a=o||[],s=0,l=e;l<i;l+=n){var h=t[l],u=t[l+1];a[s++]=r[0]*h+r[2]*u+r[4],a[s++]=r[1]*h+r[3]*u+r[5]}return o&&a.length!=s&&(a.length=s),a}function nt(t,e,i,n,r,o,a){for(var s=a||[],l=Math.cos(r),h=Math.sin(r),u=o[0],c=o[1],p=0,d=e;d<i;d+=n){var f=t[d]-u,g=t[d+1]-c;s[p++]=u+f*l-g*h,s[p++]=c+f*h+g*l;for(var v=d+2;v<d+n;++v)s[p++]=t[v]}return a&&s.length!=p&&(s.length=p),s}function rt(t,e,i,n,r,o,a){for(var s=a||[],l=0,h=e;h<i;h+=n){s[l++]=t[h]+r,s[l++]=t[h+1]+o;for(var u=h+2;u<h+n;++u)s[l++]=t[u]}return a&&s.length!=l&&(s.length=l),s}function ot(t,e,i){return Math.min(Math.max(t,e),i)}function at(t,e,i,n,r,o){var a=r-i,s=o-n;if(0!==a||0!==s){var l=((t-i)*a+(e-n)*s)/(a*a+s*s);l>1?(i=r,n=o):l>0&&(i+=a*l,n+=s*l)}return st(t,e,i,n)}function st(t,e,i,n){var r=i-t,o=n-e;return r*r+o*o}function lt(t){return 180*t/Math.PI}function ht(t){return t*Math.PI/180}function ut(t,e){var i=t%e;return i*e<0?i+e:i}function ct(t,e,i){return t+i*(e-t)}function pt(t,e,i){var n=i||6371008.8,r=ht(t[1]),o=ht(e[1]),a=(o-r)/2,s=ht(e[0]-t[0])/2,l=Math.sin(a)*Math.sin(a)+Math.sin(s)*Math.sin(s)*Math.cos(r)*Math.cos(o);return 2*n*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}function dt(t,e){for(var i=0,n=0,r=t.length;n<r-1;++n)i+=pt(t[n],t[n+1],e);return i}function ft(t,e){for(var i=0,n=t.length,r=t[n-1][0],o=t[n-1][1],a=0;a<n;a++){var s=t[a][0],l=t[a][1];i+=ht(s-r)*(2+Math.sin(ht(o))+Math.sin(ht(l))),r=s,o=l}return i*e*e/2}function gt(t,e,i,n){var r=n||6371008.8,o=ht(t[1]),a=ht(t[0]),s=e/r,l=Math.asin(Math.sin(o)*Math.cos(s)+Math.cos(o)*Math.sin(s)*Math.cos(i));return[lt(a+Math.atan2(Math.sin(i)*Math.sin(s)*Math.cos(o),Math.cos(s)-Math.sin(o)*Math.sin(l))),lt(l)]}function vt(t,e,i){var n=t.getCode(),r=e.getCode();n in hs||(hs[n]={}),hs[n][r]=i}function yt(t,e){var i;return t in hs&&e in hs[t]&&(i=hs[t][e]),i}function mt(t,e,i){var n;if(void 0!==e){for(var r=0,o=t.length;r<o;++r)e[r]=t[r];n=e}else n=t.slice();return n}function _t(t,e,i){if(void 0!==e&&t!==e){for(var n=0,r=t.length;n<r;++n)e[n]=t[n];t=e}return t}function xt(t){!function(e,i){us[e]=t}(t.getCode()),vt(t,t,mt)}function bt(t){return"string"==typeof t?us[t]||null:t||null}function wt(t,e,i,n){var r,o=(t=bt(t)).getPointResolutionFunc();if(o)r=o(e,i),n&&n!==t.getUnits()&&(a=t.getMetersPerUnit())&&(r=r*a/Va[n]);else if(t.getUnits()==Ka.DEGREES&&!n||n==Ka.DEGREES)r=e;else{var a,s=Lt(t,bt("EPSG:4326")),l=[i[0]-e/2,i[1],i[0]+e/2,i[1],i[0],i[1]-e/2,i[0],i[1]+e/2];r=(pt((l=s(l,l,2)).slice(0,2),l.slice(2,4))+pt(l.slice(4,6),l.slice(6,8)))/2,void 0!==(a=n?Va[n]:t.getMetersPerUnit())&&(r/=a)}return r}function St(t){t.forEach(xt),t.forEach(function(e){t.forEach(function(t){e!==t&&vt(e,t,mt)})})}function Ct(t,e){return t?"string"==typeof t?bt(t):t:bt(e)}function Et(t){return function(e,i,n){for(var r=e.length,o=void 0!==n?n:2,a=void 0!==i?i:new Array(r),s=0;s<r;s+=o){var l=t([e[s],e[s+1]]);a[s]=l[0],a[s+1]=l[1];for(var h=o-1;h>=2;--h)a[s+h]=e[s+h]}return a}}function Tt(t,e,i,n){var r=bt(t),o=bt(e);vt(r,o,Et(i)),vt(o,r,Et(n))}function Pt(t,e){if(t===e)return!0;var i=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||Lt(t,e)===mt)&&i}function Lt(t,e){var i=yt(t.getCode(),e.getCode());return i||(i=_t),i}function It(t,e){return Lt(bt(t),bt(e))}function Ot(t,e,i){return It(e,i)(t,void 0,t.length)}function At(t,e,i,n){return tt(t,It(e,i),void 0,n)}function Rt(){return cs}function Mt(t,e){return cs?Ot(t,e,cs):t}function Ft(t,e){return cs?Ot(t,cs,e):t}function kt(t,e){return cs?At(t,e,cs):t}function Nt(t,e){return cs?At(t,cs,e):t}function Dt(t){return Gt(t,1,0,0,1,0,0)}function jt(t,e){var i=t[0],n=t[1],r=t[2],o=t[3],a=t[4],s=t[5],l=e[0],h=e[1],u=e[2],c=e[3],p=e[4],d=e[5];return t[0]=i*l+r*h,t[1]=n*l+o*h,t[2]=i*u+r*c,t[3]=n*u+o*c,t[4]=i*p+r*d+a,t[5]=n*p+o*d+s,t}function Gt(t,e,i,n,r,o,a){return t[0]=e,t[1]=i,t[2]=n,t[3]=r,t[4]=o,t[5]=a,t}function zt(t,e){var i=e[0],n=e[1];return e[0]=t[0]*i+t[2]*n+t[4],e[1]=t[1]*i+t[3]*n+t[5],e}function Bt(t,e,i){return jt(t,Gt(fs,e,0,0,i,0,0))}function Yt(t,e,i,n,r,o,a,s){var l=Math.sin(o),h=Math.cos(o);return t[0]=n*h,t[1]=r*l,t[2]=-n*l,t[3]=r*h,t[4]=a*n*h-s*n*l+e,t[5]=a*r*l+s*r*h+i,t}function Xt(t,e){var i,n=(i=e)[0]*i[3]-i[1]*i[2];S(0!==n,32);var r=e[0],o=e[1],a=e[2],s=e[3],l=e[4],h=e[5];return t[0]=s/n,t[1]=-o/n,t[2]=-a/n,t[3]=r/n,t[4]=(a*h-s*l)/n,t[5]=-(r*h-o*l)/n,t}function Wt(t){return"matrix("+t.join(", ")+")"}function Ut(t){var e;return t==Ga?e=2:t==za||t==Ba?e=3:t==Ya&&(e=4),e}function Vt(t,e,i,n){for(var r=0,o=t[i-n],a=t[i-n+1];e<i;e+=n){var s=t[e],l=t[e+1];r+=a*s-o*l,o=s,a=l}return r/2}function Ht(t,e,i,n){for(var r=0,o=0,a=i.length;o<a;++o){var s=i[o];r+=Vt(t,e,s,n),e=s}return r}function qt(t,e,i,n,r,o,a){var s,l=t[e],h=t[e+1],u=t[i]-l,c=t[i+1]-h;if(0===u&&0===c)s=e;else{var p=((r-l)*u+(o-h)*c)/(u*u+c*c);if(p>1)s=i;else{if(p>0){for(var d=0;d<n;++d)a[d]=ct(t[e+d],t[i+d],p);return void(a.length=n)}s=e}}for(d=0;d<n;++d)a[d]=t[s+d];a.length=n}function Zt(t,e,i,n,r){var o=t[e],a=t[e+1];for(e+=n;e<i;e+=n){var s=t[e],l=t[e+1],h=st(o,a,s,l);h>r&&(r=h),o=s,a=l}return r}function Kt(t,e,i,n,r){for(var o=0,a=i.length;o<a;++o){var s=i[o];r=Zt(t,e,s,n,r),e=s}return r}function Jt(t,e,i,n,r,o,a,s,l,h,u){if(e==i)return h;var c,p;if(0===r){if((p=st(a,s,t[e],t[e+1]))<h){for(c=0;c<n;++c)l[c]=t[e+c];return l.length=n,p}return h}for(var d=u||[NaN,NaN],f=e+n;f<i;)if(qt(t,f-n,f,n,a,s,d),(p=st(a,s,d[0],d[1]))<h){for(h=p,c=0;c<n;++c)l[c]=d[c];l.length=n,f+=n}else f+=n*Math.max((Math.sqrt(p)-Math.sqrt(h))/r|0,1);if(o&&(qt(t,i-n,e,n,a,s,d),(p=st(a,s,d[0],d[1]))<h)){for(h=p,c=0;c<n;++c)l[c]=d[c];l.length=n}return h}function $t(t,e,i,n,r,o,a,s,l,h,u){for(var c=u||[NaN,NaN],p=0,d=i.length;p<d;++p){var f=i[p];h=Jt(t,e,f,n,r,o,a,s,l,h,c),e=f}return h}function Qt(t,e,i,n){for(var r=0,o=i.length;r<o;++r)t[e++]=i[r];return e}function te(t,e,i,n){for(var r=0,o=i.length;r<o;++r)for(var a=i[r],s=0;s<n;++s)t[e++]=a[s];return e}function ee(t,e,i,n,r){for(var o=r||[],a=0,s=0,l=i.length;s<l;++s){var h=te(t,e,i[s],n);o[a++]=h,e=h}return o.length=a,o}function ie(t,e,i,n,r){for(var o=void 0!==r?r:[],a=0,s=e;s<i;s+=n)o[a++]=t.slice(s,s+n);return o.length=a,o}function ne(t,e,i,n,r){for(var o=void 0!==r?r:[],a=0,s=0,l=i.length;s<l;++s){var h=i[s];o[a++]=ie(t,e,h,n,o[a]),e=h}return o.length=a,o}function re(t,e,i,n,r){for(var o=void 0!==r?r:[],a=0,s=0,l=i.length;s<l;++s){var h=i[s];o[a++]=ne(t,e,h,n,o[a]),e=h[h.length-1]}return o.length=a,o}function oe(t,e,i,n,r,o,a){var s=(i-e)/n;if(s<3){for(;e<i;e+=n)o[a++]=t[e],o[a++]=t[e+1];return a}var l=new Array(s);l[0]=1,l[s-1]=1;for(var h=[e,i-n],u=0;h.length>0;){for(var c=h.pop(),p=h.pop(),d=0,f=t[p],g=t[p+1],v=t[c],y=t[c+1],m=p+n;m<c;m+=n){var _=at(t[m],t[m+1],f,g,v,y);_>d&&(u=m,d=_)}d>r&&(l[(u-e)/n]=1,p+n<u&&h.push(p,u),u+n<c&&h.push(u,c))}for(m=0;m<s;++m)l[m]&&(o[a++]=t[e+m*n],o[a++]=t[e+m*n+1]);return a}function ae(t,e){return e*Math.round(t/e)}function se(t,e,i,n,r,o,a){if(e==i)return a;var s,l,h=ae(t[e],r),u=ae(t[e+1],r);e+=n,o[a++]=h,o[a++]=u;do{if(s=ae(t[e],r),l=ae(t[e+1],r),(e+=n)==i)return o[a++]=s,o[a++]=l,a}while(s==h&&l==u);for(;e<i;){var c=ae(t[e],r),p=ae(t[e+1],r);if(e+=n,c!=s||p!=l){var d=s-h,f=l-u,g=c-h,v=p-u;d*v==f*g&&(d<0&&g<d||d==g||d>0&&g>d)&&(f<0&&v<f||f==v||f>0&&v>f)?(s=c,l=p):(o[a++]=s,o[a++]=l,h=s,u=l,s=c,l=p)}}return o[a++]=s,o[a++]=l,a}function le(t,e,i,n,r,o,a,s){for(var l=0,h=i.length;l<h;++l){var u=i[l];a=se(t,e,u,n,r,o,a),s.push(a),e=u}return a}function he(t,e,i,n,r){return!z(r,function(r){return!ue(t,e,i,n,r[0],r[1])})}function ue(t,e,i,n,r,o){for(var a=0,s=t[i-n],l=t[i-n+1];e<i;e+=n){var h=t[e],u=t[e+1];l<=o?u>o&&(h-s)*(o-l)-(r-s)*(u-l)>0&&a++:u<=o&&(h-s)*(o-l)-(r-s)*(u-l)<0&&a--,s=h,l=u}return 0!==a}function ce(t,e,i,n,r,o){if(0===i.length)return!1;if(!ue(t,e,i[0],n,r,o))return!1;for(var a=1,s=i.length;a<s;++a)if(ue(t,i[a-1],i[a],n,r,o))return!1;return!0}function pe(t,e,i,n,r,o,a){for(var s,l,h,c,p,d,f,g=r[o+1],v=[],y=0,m=i.length;y<m;++y){var _=i[y];for(c=t[_-n],d=t[_-n+1],s=e;s<_;s+=n)p=t[s],f=t[s+1],(g<=d&&f<=g||d<=g&&g<=f)&&(h=(g-d)/(f-d)*(p-c)+c,v.push(h)),c=p,d=f}var x=NaN,b=-1/0;for(v.sort(u),c=v[0],s=1,l=v.length;s<l;++s){p=v[s];var w=Math.abs(p-c);w>b&&ce(t,e,i,n,h=(c+p)/2,g)&&(x=h,b=w),c=p}return isNaN(x)&&(x=r[o]),a?(a.push(x,g,b),a):[x,g,b]}function de(t,e,i,n,r){for(var o=[],a=0,s=i.length;a<s;++a){var l=i[a];o=pe(t,e,l,n,r,2*a,o),e=l[l.length-1]}return o}function fe(t,e,i,n,r){for(var o,a=[t[e],t[e+1]],s=[];e+n<i;e+=n){if(s[0]=t[e+n],s[1]=t[e+n+1],o=r(a,s))return o;a[0]=s[0],a[1]=s[1]}return!1}function ge(t,e,i,n,r){var o=G([1/0,1/0,-1/0,-1/0],t,e,i,n);return!!J(r,o)&&(!!I(r,o)||o[0]>=r[0]&&o[2]<=r[2]||o[1]>=r[1]&&o[3]<=r[3]||fe(t,e,i,n,function(t,e){return function(t,e,i){var n=!1,r=A(t,e),o=A(t,i);if(r===Fa||o===Fa)n=!0;else{var a=t[0],s=t[1],l=t[2],h=t[3],u=i[0],c=i[1],p=(c-e[1])/(u-e[0]),d=void 0,f=void 0;o&ka&&!(r&ka)&&(n=(d=u-(c-h)/p)>=a&&d<=l),n||!(o&Na)||r&Na||(n=(f=c-(u-l)*p)>=s&&f<=h),n||!(o&Da)||r&Da||(n=(d=u-(c-s)/p)>=a&&d<=l),n||!(o&ja)||r&ja||(n=(f=c-(u-a)*p)>=s&&f<=h)}return n}(r,t,e)}))}function ve(t,e,i,n,r){if(!function(t,e,i,n,r){return!!(ge(t,e,i,n,r)||ue(t,e,i,n,r[0],r[1])||ue(t,e,i,n,r[0],r[3])||ue(t,e,i,n,r[2],r[1])||ue(t,e,i,n,r[2],r[3]))}(t,e,i[0],n,r))return!1;if(1===i.length)return!0;for(var o=1,a=i.length;o<a;++o)if(he(t,i[o-1],i[o],n,r)&&!ge(t,i[o-1],i[o],n,r))return!1;return!0}function ye(t,e,i,n){for(;e<i-n;){for(var r=0;r<n;++r){var o=t[e+r];t[e+r]=t[i-n+r],t[i-n+r]=o}e+=n,i-=n}}function me(t,e,i,n){for(var r=0,o=t[i-n],a=t[i-n+1];e<i;e+=n){var s=t[e],l=t[e+1];r+=(s-o)*(l+a),o=s,a=l}return r>0}function _e(t,e,i,n,r){for(var o=void 0!==r&&r,a=0,s=i.length;a<s;++a){var l=i[a],h=me(t,e,l,n);if(0===a){if(o&&h||!o&&!h)return!1}else if(o&&!h||!o&&h)return!1;e=l}return!0}function xe(t,e,i,n,r){for(var o=void 0!==r&&r,a=0,s=i.length;a<s;++a){var l=i[a],h=me(t,e,l,n);(0===a?o&&h||!o&&!h:o&&!h||!o&&h)&&ye(t,e,l,n),e=l}return e}function be(t,e,i,n,r){for(var o=0,a=i.length;o<a;++o)e=xe(t,e,i[o],n,r);return e}function we(t,e,i,n){for(var r=i||32,o=[],a=0;a<r;++a)f(o,gt(t,e,2*Math.PI*a/r,n));return o.push(o[0],o[1]),new Es(o,Ga,[o.length])}function Se(t){var e=t[0],i=t[1],n=t[2],r=t[3],o=[e,i,e,r,n,r,n,i,e,i];return new Es(o,Ga,[o.length])}function Ce(t,e,i){for(var n=e||32,r=t.getStride(),o=t.getLayout(),a=t.getCenter(),s=r*(n+1),l=new Array(s),h=0;h<s;h+=r){l[h]=0,l[h+1]=0;for(var u=2;u<r;u++)l[h+u]=a[u]}var c=new Es(l,o,[l.length]);return Ee(c,a,t.getRadius(),i),c}function Ee(t,e,i,n){for(var r=t.getFlatCoordinates(),o=t.getStride(),a=r.length/o-1,s=n||0,l=0;l<=a;++l){var h=l*o,u=s+2*ut(l,a)*Math.PI/a;r[h]=e[0]+i*Math.cos(u),r[h+1]=e[1]+i*Math.sin(u)}t.changed()}function Te(t,e,i){return function(n,r,o,a){if(n){var s=e?0:o[0]*r,l=e?0:o[1]*r,h=t[0]+s/2,u=t[2]-s/2,c=t[1]+l/2,p=t[3]-l/2;h>u&&(u=h=(u+h)/2),c>p&&(p=c=(p+c)/2);var d=ot(n[0],h,u),f=ot(n[1],c,p),g=30*r;return a&&i&&(d+=-g*Math.log(1+Math.max(0,h-n[0])/g)+g*Math.log(1+Math.max(0,n[0]-u)/g),f+=-g*Math.log(1+Math.max(0,c-n[1])/g)+g*Math.log(1+Math.max(0,n[1]-p)/g)),[d,f]}}}function Pe(t){return t}function Le(t,e,i,n){var r=K(e)/i[0],o=V(e)/i[1];return n?Math.min(t,Math.max(r,o)):Math.min(t,Math.min(r,o))}function Ie(t,e,i){var n=Math.min(t,e);return n*=Math.log(1+50*Math.max(0,t/e-1))/50+1,i&&(n=Math.max(n,i),n/=Math.log(1+50*Math.max(0,i/t-1))/50+1),ot(n,i/2,2*e)}function Oe(t,e,i,n,r){return function(o,a,s,l){if(void 0!==o){var h=n?Le(t,n,s,r):t;return(void 0===i||i)&&l?Ie(o,h,e):ot(o,e,h)}}}function Ae(t){return void 0!==t?0:void 0}function Re(t){return void 0!==t?t:void 0}function Me(t,e,i){var n=void 0!==i?t.toFixed(i):""+t,r=n.indexOf(".");return(r=-1===r?n.length:r)>e?n:new Array(1+e-r).join("0")+n}function Fe(t,e){for(var i=(""+t).split("."),n=(""+e).split("."),r=0;r<Math.max(i.length,n.length);r++){var o=parseInt(i[r]||"0",10),a=parseInt(n[r]||"0",10);if(o>a)return 1;if(a>o)return-1}return 0}function ke(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function Ne(t,e){var i,n,r=e[0],o=e[1],a=r[0],s=r[1],l=o[0],h=o[1],u=l-a,c=h-s,p=0===u&&0===c?0:(u*(t[0]-a)+c*(t[1]-s))/(u*u+c*c||0);return p<=0?(i=a,n=s):p>=1?(i=l,n=h):(i=a+p*u,n=s+p*c),[i,n]}function De(t,e,i){var n=ut(e+180,360)-180,r=Math.abs(3600*n),o=i||0,a=Math.pow(10,o),s=Math.floor(r/3600),l=Math.floor((r-3600*s)/60),h=r-3600*s-60*l;return(h=Math.ceil(h*a)/a)>=60&&(h=0,l+=1),l>=60&&(l=0,s+=1),s+"\xb0 "+Me(l,2)+"\u2032 "+Me(h,2,o)+"\u2033"+(0==n?"":" "+t.charAt(n<0?1:0))}function je(t,e,i){return t?e.replace("{x}",t[0].toFixed(i)).replace("{y}",t[1].toFixed(i)):""}function Ge(t,e){for(var i=!0,n=t.length-1;n>=0;--n)if(t[n]!=e[n]){i=!1;break}return i}function ze(t,e){var i=Math.cos(e),n=Math.sin(e),r=t[1]*i+t[0]*n;return t[0]=t[0]*i-t[1]*n,t[1]=r,t}function Be(t,e){return t[0]*=e,t[1]*=e,t}function Ye(t,e){var i=t[0]-e[0],n=t[1]-e[1];return i*i+n*n}function Xe(t,e){return Math.sqrt(Ye(t,e))}function We(t,e){return Ye(t,Ne(t,e))}function Ue(t,e){return je(t,"{x}, {y}",e)}function Ve(t,e){var i=e.getExtent();if(e.canWrapX()&&(t[0]<i[0]||t[0]>=i[2])){var n=K(i),r=Math.floor((t[0]-i[0])/n);t[0]-=r*n}return t}function He(t){return Math.pow(t,3)}function qe(t){return 1-He(1-t)}function Ze(t){return 3*t*t-2*t*t*t}function Ke(t){return t}function Je(t,e){setTimeout(function(){t(e)},0)}function $e(t){return!(t.sourceCenter&&t.targetCenter&&!Ge(t.sourceCenter,t.targetCenter))&&t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation}function Qe(t,e,i){var n=i&&i.length?i.shift():Ys?new OffscreenCanvas(t||300,e||300):document.createElement("canvas");return t&&(n.width=t),e&&(n.height=e),n.getContext("2d")}function ti(t,e){var i=e.parentNode;i&&i.replaceChild(t,e)}function ei(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function ii(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function ni(t,e,i){return void 0===i&&(i=[0,0]),i[0]=t[0]+2*e,i[1]=t[1]+2*e,i}function ri(t,e,i){return void 0===i&&(i=[0,0]),i[0]=t[0]*e+.5|0,i[1]=t[1]*e+.5|0,i}function oi(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}function ai(t,e){if(!t.visible)return!1;var i=e.resolution;if(i<t.minResolution||i>=t.maxResolution)return!1;var n=e.zoom;return n>t.minZoom&&n<=t.maxZoom}function si(t){var e=t||{},i=new Ta;return(void 0===e.zoom||e.zoom)&&i.push(new Bl(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&i.push(new Gl(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&i.push(new Dl(e.attributionOptions)),i}function li(t,e,i,n){var r=t.getZoom();if(void 0!==r){var o=t.getConstrainedZoom(r+e),a=t.getResolutionForZoom(o);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:a,anchor:i,duration:void 0!==n?n:250,easing:qe})}}function hi(t){var e=!1;if(t.type==Us.DBLCLICK){var i=t.coordinate,n=t.originalEvent.shiftKey?-this.delta_:this.delta_;li(t.map.getView(),n,i,this.duration_),t.preventDefault(),e=!0}return!e}function ui(t){for(var e=t.length,i=0,n=0,r=0;r<e;r++)i+=t[r].clientX,n+=t[r].clientY;return[i/e,n/e]}function ci(t){return th(t)&&rh(t)}function pi(){var t,e=this.getMap(),i=e.getView(),n=e.getSize(),r=this.getGeometry().getExtent();if(this.out_){var o=i.calculateExtentInternal(n),a=(t=[e.getPixelFromCoordinateInternal(Y(r)),e.getPixelFromCoordinateInternal(Z(r))],function(t,e){for(var i=0,n=e.length;i<n;++i)j(t,e[i]);return t}(M(void 0),t));Q(o,1/i.getResolutionForExtentInternal(a,n)),r=o}var s=i.getConstrainedResolution(i.getResolutionForExtentInternal(r,n)),l=i.getConstrainedCenter(W(r),s);i.animateInternal({resolution:s,center:l,duration:this.duration_,easing:qe})}function di(t){var e=!1;if(t.type==da){var i=t.originalEvent.keyCode;if(this.condition_(t)&&(i==bh||i==mh||i==xh||i==_h)){var n=t.map.getView(),r=n.getResolution()*this.pixelDelta_,o=0,a=0;i==bh?a=-r:i==mh?o=-r:i==xh?o=r:a=r;var s=[o,a];ze(s,n.getRotation()),function(t,e,i){var n=t.getCenterInternal();n&&t.animateInternal({duration:void 0!==i?i:250,easing:Ke,center:t.getConstrainedCenter([n[0]+e[0],n[1]+e[1]])})}(n,s,this.duration_),t.preventDefault(),e=!0}}return!e}function fi(t){var e=!1;if(t.type==da||t.type==fa){var i=t.originalEvent.charCode;if(this.condition_(t)&&(i=="+".charCodeAt(0)||i=="-".charCodeAt(0))){var n=t.map,r=i=="+".charCodeAt(0)?this.delta_:-this.delta_;li(n.getView(),r,void 0,this.duration_),t.preventDefault(),e=!0}}return!e}function gi(t){var e=t||{},i=new Ta,n=new Rs(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&i.push(new uh),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&i.push(new Vl({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&i.push(new lh({condition:e.onFocusOnly?Zl:void 0,kinetic:n})),(void 0===e.pinchRotate||e.pinchRotate)&&i.push(new Ih),(void 0===e.pinchZoom||e.pinchZoom)&&i.push(new Ah({duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(i.push(new Sh),i.push(new Eh({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&i.push(new Ph({condition:e.onFocusOnly?Zl:void 0,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&i.push(new yh({duration:e.zoomDuration})),i}function vi(t){return"string"==typeof t?t:_i(t)}function yi(t){return Array.isArray(t)?t:Nh(t)}function mi(t){return t[0]=ot(t[0]+.5|0,0,255),t[1]=ot(t[1]+.5|0,0,255),t[2]=ot(t[2]+.5|0,0,255),t[3]=ot(t[3],0,1),t}function _i(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var i=t[1];i!=(0|i)&&(i=i+.5|0);var n=t[2];return n!=(0|n)&&(n=n+.5|0),"rgba("+e+","+i+","+n+","+(void 0===t[3]?1:t[3])+")"}function xi(t,e,i){return e+":"+t+":"+(i?vi(i):"null")}function bi(t){return Array.isArray(t)?_i(t):t}function wi(t,e){return Hh||(Hh=Qe(1,1)),t!=Xh&&(Hh.font=t,Xh=Hh.font),Hh.measureText(e)}function Si(t,e){return wi(t,e).width}function Ci(t,e,i){if(e in i)return i[e];var n=Si(t,e);return i[e]=n,n}function Ei(t,e,i,n){0!==e&&(t.translate(i,n),t.rotate(e),t.translate(-i,-n))}function Ti(t,e,i,n,r,o,a,s,l,h,u){t.save(),1!==i&&(t.globalAlpha*=i),e&&t.setTransform.apply(t,e),n.contextInstructions?(t.translate(l,h),t.scale(u,u),function(t,e){for(var i=n.contextInstructions,r=0,o=i.length;r<o;r+=2)Array.isArray(i[r+1])?e[i[r]].apply(e,i[r+1]):e[i[r]]=i[r+1]}(0,t)):t.drawImage(n,r,o,a,s,l,h,a*u,s*u),t.restore()}function Pi(t){return Ys?Wt(t):(Jh||(Jh=Qe(1,1).canvas),Jh.style.transform=Wt(t),Jh.style.transform)}function Li(t,e){return parseInt(r(t),10)-parseInt(r(e),10)}function Ii(t,e){var i=Oi(t,e);return i*i}function Oi(t,e){return.5*t/e}function Ai(t,e,i,n,r,o){var a=!1,s=i.getImage();if(s){var l=s.getImageState();l==eu||l==iu?s.unlistenImageChange(r):(l==tu&&s.load(),l=s.getImageState(),s.listenImageChange(r),a=!0)}return function(t,e,i,n,r){var o=i.getGeometryFunction()(e);if(o){var a=o.simplifyTransformed(n,r);i.getRenderer()?function t(e,i,n,r){if(i.getType()!=Xa.GEOMETRY_COLLECTION)e.getBuilder(n.getZIndex(),ru).drawCustom(i,r,n.getRenderer());else for(var o=i.getGeometries(),a=0,s=o.length;a<s;++a)t(e,o[a],n,r)}(t,a,i,e):(0,lu[a.getType()])(t,a,i,e)}}(t,e,i,n,o),a}function Ri(t){var e,i=t.frameState,n=jt(t.inversePixelTransform.slice(),i.coordinateToPixelTransform),r=Ii(i.viewState.resolution,i.pixelRatio),o=Rt();return o&&(e=Lt(o,i.viewState.projection)),new Qh(t.context,i.pixelRatio,i.extent,n,i.viewState.rotation,r,e)}function Mi(t,e){e&&e.clear();for(var i=t.declutterItems,n=i.length-1;n>=0;--n)for(var r=i[n],o=r.items,a=0,s=o.length;a<s;a+=3)e=o[a].renderDeclutter(o[a+1],o[a+2],r.opacity,e);return i.length=0,e}function Fi(t,e){Dh.expire()}function ki(t,e,i,n){return function(r,o,a){var s=new XMLHttpRequest;s.open("GET","function"==typeof t?t(r,o,a):t,!0),e.getType()==Cu&&(s.responseType="arraybuffer"),s.withCredentials=Lu,s.onload=(function(t){if(!s.status||s.status>=200&&s.status<300){var o=e.getType(),l=void 0;o==Eu||o==Tu?l=s.responseText:o==Pu?(l=s.responseXML)||(l=(new DOMParser).parseFromString(s.responseText,"application/xml")):o==Cu&&(l=s.response),l?i.call(this,e.readFeatures(l,{extent:r,featureProjection:a}),e.readProjection(l)):n.call(this)}else n.call(this)}).bind(this),s.onerror=(function(){n.call(this)}).bind(this),s.send()}}function Ni(t,e){return ki(t,e,function(t,e){"function"==typeof this.addFeatures&&this.addFeatures(t)},x)}function Di(t,e){return[[-1/0,-1/0,1/0,1/0]]}function ji(t,e,i,n,r){return void 0!==r?(r.minX=t,r.maxX=e,r.minY=i,r.maxY=n,r):new Iu(t,e,i,n)}function Gi(t,e,i,n){return void 0!==n?(n[0]=t,n[1]=e,n[2]=i,n):[t,e,i]}function zi(t,e,i){return t+"/"+e+"/"+i}function Bi(t){return zi(t[0],t[1],t[2])}function Yi(t){return t.split("/").map(Number)}function Xi(t){return(t[1]<<t[0])+t[2]}function Wi(t){var e=t.getDefaultTileGrid();return e||(e=Hi(t),t.setDefaultTileGrid(e)),e}function Ui(t){var e=t||{},i=e.extent||bt("EPSG:3857").getExtent(),n={extent:i,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:Vi(i,e.maxZoom,e.tileSize,e.maxResolution)};return new Ru(n)}function Vi(t,e,i,n){for(var r=void 0!==e?e:42,o=V(t),a=K(t),s=oi(void 0!==i?i:256),l=n>0?n:Math.max(a/s[0],o/s[1]),h=r+1,u=new Array(h),c=0;c<h;++c)u[c]=l/Math.pow(2,c);return u}function Hi(t,e,i,n){return function(t,i,r,o){var a=void 0!==n?n:Aa,s=Vi(t,e,r);return new Ru({extent:t,origin:function(t,e){var i;return e===Ia?i=Y(t):e===Oa?i=X(t):e===Aa?i=q(t):e===Ra?i=Z(t):S(!1,13),i}(t,a),resolutions:s,tileSize:r})}(qi(t),0,i)}function qi(t){var e=(t=bt(t)).getExtent();if(!e){var i=180*Va[Ka.DEGREES]/t.getMetersPerUnit();e=R(-i,-i,i,i)}return e}function Zi(t,e){for(var i=Mu.length,n=0;n<i;++n)try{var r=t.getContext(Mu[n],e);if(r)return r}catch(t){}return null}function Ki(t,e){return gn().createElementNS(t,e)}function Ji(t,e){return function t(e,i,n){if(e.nodeType==Node.CDATA_SECTION_NODE||e.nodeType==Node.TEXT_NODE)n.push(i?String(e.nodeValue).replace(/(\r\n|\r|\n)/g,""):e.nodeValue);else{var r=void 0;for(r=e.firstChild;r;r=r.nextSibling)t(r,i,n)}return n}(t,e,[]).join("")}function $i(t){return"documentElement"in t}function Qi(t){return(new DOMParser).parseFromString(t,"application/xml")}function tn(t,e){return function(i,n){var r=t.call(void 0!==e?e:this,i,n);void 0!==r&&f(n[n.length-1],r)}}function en(t,e){return function(i,n){var r=t.call(void 0!==e?e:this,i,n);void 0!==r&&n[n.length-1].push(r)}}function nn(t,e){return function(i,n){var r=t.call(void 0!==e?e:this,i,n);void 0!==r&&(n[n.length-1]=r)}}function rn(t,e,i){return function(n,r){var o=t.call(void 0!==i?i:this,n,r);if(void 0!==o){var a=r[r.length-1],s=void 0!==e?e:n.localName,l=void 0;s in a?l=a[s]:(l=[],a[s]=l),l.push(o)}}}function on(t,e,i){return function(n,r){var o=t.call(void 0!==i?i:this,n,r);void 0!==o&&(r[r.length-1][void 0!==e?e:n.localName]=o)}}function an(t,e){return function(i,n,r){t.call(void 0!==e?e:this,i,n,r),r[r.length-1].node.appendChild(i)}}function sn(t,e){var i,n;return function(e,r,o){if(void 0===i){i={};var a={};a[e.localName]=t,i[e.namespaceURI]=a,n=ln(e.localName)}dn(i,n,r,o)}}function ln(t,e){var i=t;return function(t,n,r){var o=i;return void 0===o&&(o=r),Ki(void 0!==e?e:n[n.length-1].node.namespaceURI,o)}}function hn(t,e){for(var i=e.length,n=new Array(i),r=0;r<i;++r)n[r]=t[e[r]];return n}function un(t,e,i){var n,r,o=void 0!==i?i:{};for(n=0,r=t.length;n<r;++n)o[t[n]]=e;return o}function cn(t,e,i,n){var r;for(r=e.firstElementChild;r;r=r.nextElementSibling){var o=t[r.namespaceURI];if(void 0!==o){var a=o[r.localName];void 0!==a&&a.call(n,r,i)}}}function pn(t,e,i,n,r){return n.push(t),cn(e,i,n,r),n.pop()}function dn(t,e,i,n,r,o){for(var a,s,l=(void 0!==r?r:i).length,h=0;h<l;++h)void 0!==(a=i[h])&&void 0!==(s=e.call(void 0!==o?o:this,a,n,void 0!==r?r[h]:void 0))&&t[s.namespaceURI][s.localName].call(o,s,a,n)}function fn(t,e,i,n,r,o,a){return r.push(t),dn(e,i,n,r,o,a),r.pop()}function gn(){return void 0===Du&&"undefined"!=typeof document&&(Du=document.implementation.createDocument("","",null)),Du}function vn(t){switch(t){case 34962:return Float32Array;case 34963:return Uint32Array;default:return Float32Array}}function yn(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}function mn(t){for(var e=0,i=0;i<t.length;i++){var n=t[i];e+=n.size*_n(n.type)}return e}function _n(t){switch(t){case Uu.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case Uu.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case Uu.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case Uu.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}function xn(t,e,i){var n=[],r=[],o=[],a=[],s=[],l=void 0!==i?i:[],h=t.SupportedCRS,u=bt(h.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||bt(h),c=u.getMetersPerUnit(),p="ne"==u.getAxisOrientation().substr(0,2);return t.TileMatrix.sort(function(t,e){return e.ScaleDenominator-t.ScaleDenominator}),t.TileMatrix.forEach(function(e){if(!(l.length>0)||g(l,function(i){return e.Identifier==i.TileMatrix||-1===e.Identifier.indexOf(":")&&t.Identifier+":"+e.Identifier===i.TileMatrix})){r.push(e.Identifier);var i=28e-5*e.ScaleDenominator/c,h=e.TileWidth,u=e.TileHeight;o.push(p?[e.TopLeftCorner[1],e.TopLeftCorner[0]]:e.TopLeftCorner),n.push(i),a.push(h==u?h:[h,u]),s.push([e.MatrixWidth,e.MatrixHeight])}}),new Ku({extent:e,origins:o,resolutions:n,matrixIds:r,tileSizes:a,sizes:s})}function bn(t,e,i){var n=t;if(n.src&&Xs){var r=!0;return n.decode().then(function(){r&&e()}).catch(function(t){r&&("EncodingError"===t.name&&"Invalid image type."===t.message?e():i())}),function(){r=!1}}var o=[l(n,ga,e),l(n,ua,i)];return function(){o.forEach(h)}}function wn(t,e){if(!_c){var i=new nc({color:"rgba(255,255,255,0.4)"}),n=new yc({color:"#3399CC",width:1.25});_c=[new mc({image:new ic({fill:i,stroke:n,radius:5}),fill:i,stroke:n})]}return _c}function Sn(){var t={},e=[255,255,255,1],i=[0,153,255,1];return t[Xa.POLYGON]=[new mc({fill:new nc({color:[255,255,255,.5]})})],t[Xa.MULTI_POLYGON]=t[Xa.POLYGON],t[Xa.LINE_STRING]=[new mc({stroke:new yc({color:e,width:5})}),new mc({stroke:new yc({color:i,width:3})})],t[Xa.MULTI_LINE_STRING]=t[Xa.LINE_STRING],t[Xa.CIRCLE]=t[Xa.POLYGON].concat(t[Xa.LINE_STRING]),t[Xa.POINT]=[new mc({image:new ic({radius:6,fill:new nc({color:i}),stroke:new yc({color:e,width:1.5})}),zIndex:1/0})],t[Xa.MULTI_POINT]=t[Xa.POINT],t[Xa.GEOMETRY_COLLECTION]=t[Xa.POLYGON].concat(t[Xa.LINE_STRING],t[Xa.POINT]),t}function Cn(t){return t.getGeometry()}function En(t,e){var i=/\{z\}/g,n=/\{x\}/g,r=/\{y\}/g,o=/\{-y\}/g;return function(a,s,l){return a?t.replace(i,a[0].toString()).replace(n,a[1].toString()).replace(r,a[2].toString()).replace(o,function(){var t=e.getFullTileRange(a[0]);return S(t,55),(t.getHeight()-a[2]-1).toString()}):void 0}}function Tn(t,e){for(var i=t.length,n=new Array(i),r=0;r<i;++r)n[r]=En(t[r],e);return Pn(n)}function Pn(t){return 1===t.length?t[0]:function(e,i,n){if(e){var r=ut(Xi(e),t.length);return t[r](e,i,n)}}}function Ln(t,e,i){}function In(t){var e=[],i=/\{([a-z])-([a-z])\}/.exec(t);if(i){var n=i[1].charCodeAt(0),r=i[2].charCodeAt(0),o=void 0;for(o=n;o<=r;++o)e.push(t.replace(i[0],String.fromCharCode(o)));return e}if(i=/\{(\d+)-(\d+)\}/.exec(t)){for(var a=parseInt(i[2],10),s=parseInt(i[1],10);s<=a;s++)e.push(t.replace(i[0],s.toString()));return e}return e.push(t),e}function On(t,e,i,n){function o(){delete window[s],a.parentNode.removeChild(a)}var a=document.createElement("script"),s="olc_"+r(e);a.async=!0,a.src=t+(-1==t.indexOf("?")?"?":"&")+(n||"callback")+"="+s;var l=setTimeout(function(){o(),i&&i()},1e4);window[s]=function(t){clearTimeout(l),o(),e(t)},document.getElementsByTagName("head")[0].appendChild(a)}function An(t,e,i,n){var r=Ot(i,e,t),o=wt(e,n,i),a=e.getMetersPerUnit();void 0!==a&&(o*=a);var s=t.getMetersPerUnit();void 0!==s&&(o/=s);var l=t.getExtent();if(!l||L(l,r)){var h=wt(t,o,r)/o;isFinite(h)&&h>0&&(o/=h)}return o}function Rn(t,e,i,n){var r=i-t,o=n-e,a=Math.sqrt(r*r+o*o);return[Math.round(i+r/a),Math.round(n+o/a)]}function Mn(t,e,i,n,r,o,a,s,l,h,u){var c=Qe(Math.round(i*t),Math.round(i*e));if(0===l.length)return c.canvas;c.scale(i,i);var p=[1/0,1/0,-1/0,-1/0];l.forEach(function(t,e,i){D(p,t.extent)});var d=K(p),f=V(p),g=Qe(Math.round(i*d/n),Math.round(i*f/n)),v=i/n;l.forEach(function(t,e,i){var n=t.extent[0]-p[0],r=-(t.extent[3]-p[3]),o=K(t.extent),a=V(t.extent);g.drawImage(t.image,h,h,t.image.width-2*h,t.image.height-2*h,n*v,r*v,o*v,a*v)});var y=q(a);return s.getTriangles().forEach(function(t,e,r){var a=t.source,s=t.target,l=a[0][0],h=a[0][1],u=a[1][0],d=a[1][1],f=a[2][0],v=a[2][1],m=(s[0][0]-y[0])/o,_=-(s[0][1]-y[1])/o,x=(s[1][0]-y[0])/o,b=-(s[1][1]-y[1])/o,w=(s[2][0]-y[0])/o,S=-(s[2][1]-y[1])/o,C=l,E=h;l=0,h=0;var T=function(t){for(var e=t.length,i=0;i<e;i++){for(var n=i,r=Math.abs(t[i][i]),o=i+1;o<e;o++){var a=Math.abs(t[o][i]);a>r&&(r=a,n=o)}if(0===r)return null;var s=t[n];t[n]=t[i],t[i]=s;for(var l=i+1;l<e;l++)for(var h=-t[l][i]/t[i][i],u=i;u<e+1;u++)i==u?t[l][u]=0:t[l][u]+=h*t[i][u]}for(var c=new Array(e),p=e-1;p>=0;p--){c[p]=t[p][e]/t[p][p];for(var d=p-1;d>=0;d--)t[d][e]-=t[d][p]*c[p]}return c}([[u-=C,d-=E,0,0,x-m],[f-=C,v-=E,0,0,w-m],[0,0,u,d,b-_],[0,0,f,v,S-_]]);if(T){c.save(),c.beginPath();var P=(m+x+w)/3,L=(_+b+S)/3,I=Rn(P,L,m,_),O=Rn(P,L,x,b),A=Rn(P,L,w,S);c.moveTo(O[0],O[1]),c.lineTo(I[0],I[1]),c.lineTo(A[0],A[1]),c.clip(),c.transform(T[0],T[2],T[1],T[3],m,_),c.translate(p[0]-C,p[3]-E),c.scale(n/i,-n/i),c.drawImage(g.canvas,0,0),c.restore()}}),u&&(c.save(),c.strokeStyle="black",c.lineWidth=1,s.getTriangles().forEach(function(t,e,i){var n=t.target,r=(n[0][0]-y[0])/o,a=-(n[0][1]-y[1])/o,s=(n[1][0]-y[0])/o,l=-(n[1][1]-y[1])/o,h=(n[2][0]-y[0])/o,u=-(n[2][1]-y[1])/o;c.beginPath(),c.moveTo(s,l),c.lineTo(r,a),c.lineTo(h,u),c.closePath(),c.stroke()}),c.restore()),c.canvas}function Fn(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}function kn(t,e){t.getImage().src=e}function Nn(t){return t.toLocaleString("en",{maximumFractionDigits:10})}function Dn(t,e){t.getImage().src=e}function jn(t,e){var i=[];Object.keys(e).forEach(function(t){null!==e[t]&&void 0!==e[t]&&i.push(t+"="+encodeURIComponent(e[t]))});var n=i.join("&");return(t=-1===(t=t.replace(/[?&]$/,"")).indexOf("?")?t+"?":t+"&")+n}function Gn(t,e,i){var n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(i)),!(n.getResolutions().length<=t[0])){1==e||this.hidpi_||(e=1);var r=n.getTileCoordExtent(t,this.tmpExtent_),o=oi(n.getTileSize(t[0]),this.tmpSize);1!=e&&(o=ri(o,e,this.tmpSize));var a={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return na(a,this.params_),this.getRequestUrl_(t,o,r,e,i,a)}}function zn(t,e,i){var n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(i)),!(n.getResolutions().length<=t[0])){1==e||this.hidpi_&&void 0!==this.serverType_||(e=1);var r=n.getResolution(t[0]),o=n.getTileCoordExtent(t,this.tmpExtent_),a=oi(n.getTileSize(t[0]),this.tmpSize),s=this.gutter_;0!==s&&(a=ni(a,s,this.tmpSize),o=E(o,r*s,o)),1!=e&&(a=ri(a,e,this.tmpSize));var l={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return na(l,this.params_),this.getRequestUrl_(t,a,o,e,i,l)}}function Bn(t,e){var i=ki(e,t.getFormat(),t.onLoad.bind(t),t.onError.bind(t));t.setLoader(i)}function Yn(t){var e=this.requestEncoding_,i={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};e==jd&&na(i,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),t=e==jd?jn(t,i):t.replace(/\{(\w+?)\}/g,function(t,e){return e.toLowerCase()in i?i[e.toLowerCase()]:t});var n=this.tileGrid,r=this.dimensions_;return function(i,o,a){if(i){var s={TileMatrix:n.getMatrixId(i[0]),TileCol:i[1],TileRow:i[2]};na(s,r);var l=t;return l=e==jd?jn(l,s):l.replace(/\{(\w+?)\}/g,function(t,e){return s[e]})}}}function Xn(t,e,i,n,r){var o,a,s,l,h,u,c,p,d,f=i,g=i,v=0,y=0,m=i;for(o=i;o<n;o+=r){var _=e[o],x=e[o+1];void 0!==l&&(p=_-l,d=x-h,s=Math.sqrt(p*p+d*d),void 0!==u&&(y+=a,Math.acos((u*p+c*d)/(a*s))>t&&(y>v&&(v=y,f=m,g=o),y=0,m=o-r)),a=s,u=p,c=d),l=_,h=x}return(y+=s)>v?[m,o]:[f,g]}function Wn(t,e,i,n){for(var r=t[e],o=t[e+1],a=0,s=e+n;s<i;s+=n){var l=t[s],h=t[s+1];a+=Math.sqrt((l-r)*(l-r)+(h-o)*(h-o)),r=l,o=h}return a}function Un(t,e,i,n,r,o,a,s,l,h,u){for(var c,p,d=[],f=t[e]>t[i-n],g=r.length,v=t[e],y=t[e+1],m=t[e+=n],_=t[e+1],x=0,b=Math.sqrt(Math.pow(m-v,2)+Math.pow(_-y,2)),w=!1,S=0;S<g;++S){for(var C=r[c=f?g-S-1:S],E=s*l(h,C,u),T=o+E/2;e<i-n&&x+b<T;)v=m,y=_,m=t[e+=n],_=t[e+1],x+=b,b=Math.sqrt(Math.pow(m-v,2)+Math.pow(_-y,2));var P=T-x,L=Math.atan2(_-y,m-v);if(f&&(L+=L>0?-Math.PI:Math.PI),void 0!==p){var I=L-p;if(w=w||0!==I,I+=I>Math.PI?-2*Math.PI:I<-Math.PI?2*Math.PI:0,Math.abs(I)>a)return null}p=L;var O=P/b,A=ct(v,m,O),R=ct(y,_,O);d[c]=[A,R,E/2,L,C],o+=E}return w?d:[[d[0][0],d[0][1],d[0][2],d[0][3],r]]}function Vn(t,e,i){var n,r=Math.floor(t.length/2);if(e>=r)for(n=r;n<e;n++)t[n][i]=!0;else if(e<r)for(n=e+1;n<r;n++)t[n][i]=!0}function Hn(t,e,i,n,r,o){for(var a=Object.keys(t).map(Number).sort(u),s=0,l=a.length;s<l;++s)for(var h=t[a[s].toString()],c=void 0,p=0,d=h.length;p<d;){var f=h[p++];f!==c&&(c=f,o.push({items:f.declutterItems,opacity:n}));var g=h[p++];f.execute(e,g,i,r)}}function qn(t,e,i,n,r,o,a){var s=Qe(t[0]/2,t[1]/2);s.imageSmoothingEnabled=!1;for(var l=s.canvas,h=new Qh(s,.5,r,null,a),c=i.length,p=Math.floor(16777215/c),d={},f=1;f<=c;++f){var g=i[f-1],v=g.getStyleFunction()||n;if(n){var y=v(g,o);if(y){Array.isArray(y)||(y=[y]);for(var m="#"+("000000"+(f*p).toString(16)).slice(-6),_=0,x=y.length;_<x;++_){var b=y[_],w=b.clone(),S=w.getFill();S&&S.setColor(m);var C=w.getStroke();C&&C.setColor(m),w.setText(void 0);var E=b.getImage();if(E){var T=E.getImageSize();if(!T)continue;var P=document.createElement("canvas");P.width=T[0],P.height=T[1];var L=P.getContext("2d",{alpha:!1});L.fillStyle=m;var I=L.canvas;L.fillRect(0,0,I.width,I.height),Qe(T?T[0]:I.width,T?T[1]:I.height).drawImage(I,0,0),w.setImage(new vc({img:I,imgSize:T,anchor:E.getAnchor(),anchorXUnits:oc,anchorYUnits:oc,offset:E.getOrigin(),size:E.getSize(),opacity:E.getOpacity(),scale:E.getScale(),rotation:E.getRotation(),rotateWithView:E.getRotateWithView()}))}var O=Number(w.getZIndex());(F=d[O])||(F={},d[O]=F,F[Xa.POLYGON]=[],F[Xa.CIRCLE]=[],F[Xa.LINE_STRING]=[],F[Xa.POINT]=[]);var A=w.getGeometryFunction()(g);A&&J(r,A.getExtent())&&F[A.getType().replace("Multi","")].push(A,w)}}}}for(var R=Object.keys(d).map(Number).sort(u),M=(f=0,R.length);f<M;++f){var F=d[R[f]];for(var k in F){var N=F[k];for(_=0,x=N.length;_<x;_+=2){h.setStyle(N[_+1]);for(var D=0,j=e.length;D<j;++D)h.setTransform(e[D]),h.drawGeometry(N[_])}}}return document.body.appendChild(s.canvas),s.getImageData(0,0,l.width,l.height)}function Zn(t,e,i){var n=[];if(i){var r=4*(Math.round(t[0]/2)+Math.round(t[1]/2)*i.width),o=i.data[r+2]+256*(i.data[r+1]+256*i.data[r]),a=Math.floor(16777215/e.length);o&&o%a==0&&n.push(e[o/a-1])}return n}function Kn(t,e,i,n,r,o){var a=NaN,s=NaN,l=(i-e)/n;if(1===l)a=t[e],s=t[e+1];else if(2==l)a=(1-r)*t[e]+r*t[e+n],s=(1-r)*t[e+1]+r*t[e+n+1];else if(0!==l){for(var h=t[e],c=t[e+1],p=0,d=[0],f=e+n;f<i;f+=n){var g=t[f],v=t[f+1];p+=Math.sqrt((g-h)*(g-h)+(v-c)*(v-c)),d.push(p),h=g,c=v}var y=r*p,m=function(t,e,i){for(var n,r,o=u,a=0,s=t.length,l=!1;a<s;)(r=+o(t[n=a+(s-a>>1)],e))<0?a=n+1:(s=n,l=!r);return l?a:~a}(d,y);if(m<0){var _=(y-d[-m-2])/(d[-m-1]-d[-m-2]),x=e+(-m-2)*n;a=ct(t[x],t[x+n],_),s=ct(t[x+1],t[x+n+1],_)}else a=t[e+m*n],s=t[e+m*n+1]}return o?(o[0]=a,o[1]=s,o):[a,s]}function Jn(t,e,i,n,r,o){if(i==e)return null;var a;if(r<t[e+n-1])return o?((a=t.slice(e,e+n))[n-1]=r,a):null;if(t[i-1]<r)return o?((a=t.slice(i-n,i))[n-1]=r,a):null;if(r==t[e+n-1])return t.slice(e,e+n);for(var s=e/n,l=i/n;s<l;){var h=s+l>>1;r<t[(h+1)*n-1]?l=h:s=h+1}var u=t[s*n-1];if(r==u)return t.slice((s-1)*n,(s-1)*n+n);var c=(r-u)/(t[(s+1)*n-1]-u);a=[];for(var p=0;p<n-1;++p)a.push(ct(t[(s-1)*n+p],t[s*n+p],c));return a.push(r),a}function $n(t,e,i){for(var n,r,o,a,s,l,h=[],u=t(0),c=t(1),p=e(u),d=e(c),f=[c,u],g=[d,p],v=[1,0],y={},m=1e5;--m>0&&v.length>0;)o=v.pop(),u=f.pop(),p=g.pop(),(l=o.toString())in y||(h.push(p[0],p[1]),y[l]=!0),a=v.pop(),c=f.pop(),d=g.pop(),at((r=e(n=t(s=(o+a)/2)))[0],r[1],p[0],p[1],d[0],d[1])<i?(h.push(d[0],d[1]),y[l=a.toString()]=!0):(v.push(a,s,s,o),g.push(d,r,r,p),f.push(c,n,n,u));return h}function Qn(t){for(var e=t.dataTransfer.files,i=0,n=e.length;i<n;++i){var r=e.item(i),o=new FileReader;o.addEventListener(ga,this.handleResult_.bind(this,r)),o.readAsText(r)}}function tr(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"}function er(t,e,i,n){for(var r=[],o=[1/0,1/0,-1/0,-1/0],a=0,s=i.length;a<s;++a){var l=i[a];o=k(t,e,l[0],n),r.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=l[l.length-1]}return r}function ir(t){return function(e){return C([t,e])}}function nr(t,e){return t[0]==e[0]?function(i){return C([t,[i[0],e[1]]])}:t[1]==e[1]?function(i){return C([t,[e[0],i[1]]])}:null}function rr(t,e){return t.index-e.index}function or(t,e,i){var n=e.geometry;if(n.getType()===Xa.CIRCLE){var r=n;if(1===e.index){var o=Rt();o&&(r=r.clone().transform(o,i));var a=Ye(r.getCenter(),Ft(t,i)),s=Math.sqrt(a)-r.getRadius();return s*s}}var l=Ft(t,i);return Eg[0]=Ft(e.segment[0],i),Eg[1]=Ft(e.segment[1],i),We(l,Eg)}function ar(t,e,i){var n=e.geometry;if(n.getType()===Xa.CIRCLE&&1===e.index){var r=n,o=Rt();return o&&(r=r.clone().transform(o,i)),Mt(r.getClosestPoint(Ft(t,i)),i)}var a=Ft(t,i);return Eg[0]=Ft(e.segment[0],i),Eg[1]=Ft(e.segment[1],i),Mt(Ne(a,Eg),i)}function sr(t){if(!this.condition_(t))return!0;var e=this.addCondition_(t),i=this.removeCondition_(t),n=this.toggleCondition_(t),r=!e&&!i&&!n,a=t.map,s=this.getFeatures(),l=[],h=[];if(r){o(this.featureLayerAssociation_),a.forEachFeatureAtPixel(t.pixel,(function(t,e){if(this.filter_(t,e))return h.push(t),this.addFeatureLayerAssociation_(t,e),!this.multi_}).bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var u=s.getLength()-1;u>=0;--u){var p=s.item(u),d=h.indexOf(p);d>-1?h.splice(d,1):(s.remove(p),l.push(p))}0!==h.length&&s.extend(h)}else{a.forEachFeatureAtPixel(t.pixel,(function(t,r){if(this.filter_(t,r))return!e&&!n||c(s.getArray(),t)?(i||n)&&c(s.getArray(),t)&&(l.push(t),this.removeFeatureLayerAssociation_(t)):(h.push(t),this.addFeatureLayerAssociation_(t,r)),!this.multi_}).bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var f=l.length-1;f>=0;--f)s.remove(l[f]);s.extend(h)}return(h.length>0||l.length>0)&&this.dispatchEvent(new Og(Ig,h,l,t)),!0}function lr(t){return t.feature?t.feature:t.element?t.element:void 0}function hr(t){for(var e=[],i=0,n=t.length;i<n;++i)e.push(t[i].clone());return e}function ur(t,e,i){var n,r=i?bt(i.featureProjection):null,o=i?bt(i.dataProjection):null;if(n=r&&o&&!Pt(r,o)?(e?t.clone():t).transform(e?r:o,e?o:r):t,e&&i&&void 0!==i.decimals){var a=Math.pow(10,i.decimals);n===t&&(n=t.clone()),n.applyTransform(function(t){for(var e=0,i=t.length;e<i;++e)t[e]=Math.round(t[e]*a)/a;return t})}return n}function cr(t,e){var i=e?bt(e.featureProjection):null,n=e?bt(e.dataProjection):null;return i&&n&&!Pt(i,n)?At(t,n,i):t}function pr(t){return"string"==typeof t?JSON.parse(t)||null:null!==t?t:null}function dr(t,e){var i,n,r;if(!t)return null;if("number"==typeof t.x&&"number"==typeof t.y)r=Xa.POINT;else if(t.points)r=Xa.MULTI_POINT;else if(t.paths)r=1===t.paths.length?Xa.LINE_STRING:Xa.MULTI_LINE_STRING;else if(t.rings){var o=t,a=fr(o),s=function(t,e){var i,n,r=[],o=[],a=[];for(i=0,n=t.length;i<n;++i)r.length=0,te(r,0,t[i],e.length),me(r,0,r.length,e.length)?o.push([t[i]]):a.push(t[i]);for(;a.length;){var s=a.shift(),l=!1;for(i=o.length-1;i>=0;i--)if(I(new bs(o[i][0]).getExtent(),new bs(s).getExtent())){o[i].push(s),l=!0;break}l||o.push([s.reverse()])}return o}(o.rings,a);1===s.length?(r=Xa.POLYGON,t=Object.assign({},t,((i={}).rings=s[0],i))):(r=Xa.MULTI_POLYGON,t=Object.assign({},t,((n={}).rings=s,n)))}return ur((0,Ug[r])(t),!1,e)}function fr(t){var e=Ga;return!0===t.hasZ&&!0===t.hasM?e=Ya:!0===t.hasZ?e=za:!0===t.hasM&&(e=Ba),e}function gr(t){var e=t.getLayout();return{hasZ:e===za||e===Ya,hasM:e===Ba||e===Ya}}function vr(t,e){return(0,Vg[t.getType()])(ur(t,!0,e),e)}function yr(t){return mr(Ji(t,!1))}function mr(t){var e=/^\s*(true|1)|(false|0)\s*$/.exec(t);return e?void 0!==e[1]||!1:void 0}function _r(t){var e=Ji(t,!1),i=Date.parse(e);return isNaN(i)?void 0:i/1e3}function xr(t){return br(Ji(t,!1))}function br(t){var e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);return e?parseFloat(e[1]):void 0}function wr(t){return Sr(Ji(t,!1))}function Sr(t){var e=/^\s*(\d+)\s*$/.exec(t);return e?parseInt(e[1],10):void 0}function Cr(t){return Ji(t,!1).trim()}function Er(t,e){Lr(t,e?"1":"0")}function Tr(t,e){var i=e.toPrecision();t.appendChild(gn().createTextNode(i))}function Pr(t,e){var i=e.toString();t.appendChild(gn().createTextNode(i))}function Lr(t,e){t.appendChild(gn().createTextNode(e))}function Ir(t,e,i){var n=t.getGeometry();if(n){var r=Hv[n.getType()];if(r)return Ki(e[e.length-1].node.namespaceURI,r)}}function Or(t,e,i,n){return t.push(parseFloat(i.getAttribute("lon")),parseFloat(i.getAttribute("lat"))),"ele"in n?(t.push(n.ele),delete n.ele,e.hasZ=!0):t.push(0),"time"in n?(t.push(n.time),delete n.time,e.hasM=!0):t.push(0),t}function Ar(t,e,i){var n=Ga,r=2;if(t.hasZ&&t.hasM?(n=Ya,r=4):t.hasZ?(n=za,r=3):t.hasM&&(n=Ba,r=3),4!==r){for(var o=0,a=e.length/4;o<a;o++)e[o*r]=e[4*o],e[o*r+1]=e[4*o+1],t.hasZ&&(e[o*r+2]=e[4*o+2]),t.hasM&&(e[o*r+2]=e[4*o+3]);if(e.length=e.length/4*r,i)for(o=0,a=i.length;o<a;o++)i[o]=i[o]/4*r}return n}function Rr(t,e){var i=e[e.length-1],n=t.getAttribute("href");null!==n&&(i.link=n),cn(Pv,t,e)}function Mr(t,e){e[e.length-1].extensionsNode_=t}function Fr(t,e){var i=e[0],n=pn({flatCoordinates:[],layoutOptions:{}},Ov,t,e);if(n){var r=n.flatCoordinates;delete n.flatCoordinates;var o=n.layoutOptions;delete n.layoutOptions;var a=Ar(o,r),s=new zf(r,a);ur(s,!1,i);var l=new La(s);return l.setProperties(n,!0),l}}function kr(t,e){var i=e[0],n=pn({flatCoordinates:[],ends:[],layoutOptions:{}},Rv,t,e);if(n){var r=n.flatCoordinates;delete n.flatCoordinates;var o=n.ends;delete n.ends;var a=n.layoutOptions;delete n.layoutOptions;var s=Ar(a,r,o),l=new sg(r,s,o);ur(l,!1,i);var h=new La(l);return h.setProperties(n,!0),h}}function Nr(t,e){var i=e[0],n=pn({},kv,t,e);if(n){var r={},o=Or([],r,t,n),a=Ar(r,o),s=new Ss(o,a);ur(s,!1,i);var l=new La(s);return l.setProperties(n,!0),l}}function Dr(t,e,i){t.setAttribute("href",e);var n=i[i.length-1].properties;fn({node:t},Dv,ku,[n.linkText,n.linkType],i,Nv)}function jr(t,e,i){var n=i[i.length-1],r=n.node.namespaceURI,o=n.properties;switch(t.setAttributeNS(null,"lat",String(e[1])),t.setAttributeNS(null,"lon",String(e[0])),n.geometryLayout){case Ya:0!==e[3]&&(o.time=e[3]);case za:0!==e[2]&&(o.ele=e[2]);break;case Ba:0!==e[2]&&(o.time=e[2])}var a="rtept"==t.nodeName?zv[r]:Uv[r],s=hn(o,a);fn({node:t,properties:o},Vv,ku,s,i,a)}function Gr(t,e){if(!t)return null;var i;switch(t.type){case Xa.POINT:i=new Ss(t.coordinates);break;case Xa.LINE_STRING:i=new zf(t.coordinates);break;case Xa.POLYGON:i=new Ts(t.coordinates);break;case Xa.MULTI_POINT:i=new hg(t.coordinates);break;case Xa.MULTI_LINE_STRING:i=new sg(t.coordinates);break;case Xa.MULTI_POLYGON:i=new cg(t.coordinates);break;case Xa.GEOMETRY_COLLECTION:i=function(e,i){var n=t.geometries.map(function(t){return Gr(t,void 0)});return new zg(n)}();break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return ur(i,!1,e)}function zr(t,e){var i,n=(t=ur(t,!0,e)).getType();switch(n){case Xa.POINT:i={type:"Point",coordinates:t.getCoordinates()};break;case Xa.LINE_STRING:i={type:"LineString",coordinates:t.getCoordinates()};break;case Xa.POLYGON:i=function(i,n){var r;return e&&(r=e.rightHanded),{type:"Polygon",coordinates:t.getCoordinates(r)}}();break;case Xa.MULTI_POINT:i={type:"MultiPoint",coordinates:t.getCoordinates()};break;case Xa.MULTI_LINE_STRING:i={type:"MultiLineString",coordinates:t.getCoordinates()};break;case Xa.MULTI_POLYGON:i=function(i,n){var r;return e&&(r=e.rightHanded),{type:"MultiPolygon",coordinates:t.getCoordinates(r)}}();break;case Xa.GEOMETRY_COLLECTION:i=function(e,i){return{type:"GeometryCollection",geometries:t.getGeometriesArray().map(function(t){var e=na({},i);return delete e.featureProjection,zr(t,e)})}}(0,e);break;case Xa.CIRCLE:i={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+n)}return i}function Br(t){return"string"==typeof t?t:""}function Yr(t){var e=Ji(t,!1),i=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(i){var n=i[1];return[parseInt(n.substr(6,2),16),parseInt(n.substr(4,2),16),parseInt(n.substr(2,2),16),parseInt(n.substr(0,2),16)/255]}}function Xr(t){for(var e,i=Ji(t,!1),n=[],r=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?))?\s*/i;e=r.exec(i);){var o=parseFloat(e[1]),a=parseFloat(e[2]),s=e[3]?parseFloat(e[3]):0;n.push(o,a,s),i=i.substr(e[0].length)}if(""===i)return n}function Wr(t){var e=Ji(t,!1).trim(),i=t.baseURI;return i&&"about:blank"!=i||(i=window.location.href),i?new URL(e,i).href:e}function Ur(t){return xr(t)}function Vr(t,e){return pn(void 0,Sy,t,e,this)}function Hr(t,e){return pn(null,Ly,t,e)}function qr(t,e){var i=pn({flatCoordinates:[],whens:[]},Oy,t,e);if(i){for(var n=i.flatCoordinates,r=i.whens,o=0,a=Math.min(n.length,r.length);o<a;++o)n[4*o+3]=r[o];return new zf(n,Ya)}}function Zr(t,e){return pn(null,Ry,t,e)}function Kr(t,e){var i=pn({},My,t,e),n=Zr(t,e);if(n){var r=new zf(n,za);return r.setProperties(i,!0),r}}function Jr(t,e){var i=pn({},My,t,e),n=Zr(t,e);if(n){var r=new Ts(n,za,[n.length]);return r.setProperties(i,!0),r}}function $r(t,e){var i,n=pn([],Fy,t,e);if(!n)return null;if(0===n.length)return new zg(n);for(var r=!0,o=n[0].getType(),a=1,s=n.length;a<s;++a)if(n[a].getType()!=o){r=!1;break}if(r){var l=void 0,h=void 0;if(o==Xa.POINT){var u=n[0];for(l=u.getLayout(),h=u.getFlatCoordinates(),a=1,s=n.length;a<s;++a)f(h,n[a].getFlatCoordinates());io(i=new hg(h,l),n)}else o==Xa.LINE_STRING?io(i=new sg(n),n):o==Xa.POLYGON?io(i=new cg(n),n):o==Xa.GEOMETRY_COLLECTION?i=new zg(n):S(!1,37)}else i=new zg(n);return i}function Qr(t,e){var i=pn({},My,t,e),n=Zr(t,e);if(n){var r=new Ss(n,za);return r.setProperties(i,!0),r}}function to(t,e){var i=pn({},My,t,e),n=pn([null],ky,t,e);if(n&&n[0]){for(var r=n[0],o=[r.length],a=1,s=n.length;a<s;++a)f(r,n[a]),o.push(r.length);var l=new Ts(r,za,o);return l.setProperties(i,!0),l}}function eo(t,e){var i=pn({},Ny,t,e,this);if(!i)return null;var n,r="fillStyle"in i?i.fillStyle:vy,o=i.fill;void 0===o||o||(r=null),"imageStyle"in i?i.imageStyle!=_v&&(n=i.imageStyle):n=yy;var a="textStyle"in i?i.textStyle:_y,s="strokeStyle"in i?i.strokeStyle:my,l=i.outline;return void 0===l||l?[new xc({fill:r,image:n,stroke:s,text:a,zIndex:void 0})]:[new xc({geometry:function(t){var e=t.getGeometry(),i=e.getType();return i===Xa.GEOMETRY_COLLECTION?new zg(e.getGeometriesArrayRecursive().filter(function(t){var e=t.getType();return e!==Xa.POLYGON&&e!==Xa.MULTI_POLYGON})):i!==Xa.POLYGON&&i!==Xa.MULTI_POLYGON?e:void 0},fill:r,image:n,stroke:s,text:a,zIndex:void 0}),new xc({geometry:function(t){var e=t.getGeometry(),i=e.getType();return i===Xa.GEOMETRY_COLLECTION?new zg(e.getGeometriesArrayRecursive().filter(function(t){var e=t.getType();return e===Xa.POLYGON||e===Xa.MULTI_POLYGON})):i===Xa.POLYGON||i===Xa.MULTI_POLYGON?e:void 0},fill:r,stroke:null,zIndex:void 0})]}function io(t,e){var i,n,r,o=e.length,a=new Array(e.length),s=new Array(e.length),l=new Array(e.length);i=!1,n=!1,r=!1;for(var h=0;h<o;++h){var u=e[h];a[h]=u.get("extrude"),s[h]=u.get("tessellate"),l[h]=u.get("altitudeMode"),i=i||void 0!==a[h],n=n||void 0!==s[h],r=r||l[h]}i&&t.set("extrude",a),n&&t.set("tessellate",s),r&&t.set("altitudeMode",l)}function no(t,e){cn(jy,t,e)}function ro(t,e){cn(dy,t,e)}function oo(t,e){for(var i=yi(e),n=[255*(4==i.length?i[3]:1),i[2],i[1],i[0]],r=0;r<4;++r){var o=Math.floor(n[r]).toString(16);n[r]=1==o.length?"0"+o:o}Lr(t,n.join(""))}function ao(t,e,i){var n,r={node:t},o=e.getType(),a=[];o===Xa.GEOMETRY_COLLECTION?(e.getGeometriesArrayRecursive().forEach(function(t){var e=t.getType();e===Xa.MULTI_POINT?a=a.concat(t.getPoints()):e===Xa.MULTI_LINE_STRING?a=a.concat(t.getLineStrings()):e===Xa.MULTI_POLYGON?a=a.concat(t.getPolygons()):e===Xa.POINT||e===Xa.LINE_STRING||e===Xa.POLYGON?a.push(t):S(!1,39)}),n=om):o===Xa.MULTI_POINT?(a=e.getPoints(),n=am):o===Xa.MULTI_LINE_STRING?(a=e.getLineStrings(),n=sm):o===Xa.MULTI_POLYGON?(a=e.getPolygons(),n=hm):S(!1,39),fn(r,um,n,a,i)}function so(t,e,i){fn({node:t},cm,lm,[e],i)}function lo(t,e,i){var n={node:t};e.getId()&&t.setAttribute("id",e.getId());var r=e.getProperties(),o={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};o[e.getGeometryName()]=1;var a=Object.keys(r||{}).sort().filter(function(t){return!o[t]}),s=e.getStyleFunction();if(s){var l=s(e,0);if(l){var h=Array.isArray(l)?l:[l],u=h;if(e.getGeometry()&&(u=h.filter(function(t){var i=t.getGeometryFunction()(e);if(i){var n=i.getType();return n===Xa.GEOMETRY_COLLECTION?i.getGeometriesArrayRecursive().filter(function(t){var e=t.getType();return e===Xa.POINT||e===Xa.MULTI_POINT}).length:n===Xa.POINT||n===Xa.MULTI_POINT}})),this.writeStyles_){var c=h,p=h;e.getGeometry()&&(c=h.filter(function(t){var i=t.getGeometryFunction()(e);if(i){var n=i.getType();return n===Xa.GEOMETRY_COLLECTION?i.getGeometriesArrayRecursive().filter(function(t){var e=t.getType();return e===Xa.LINE_STRING||e===Xa.MULTI_LINE_STRING}).length:n===Xa.LINE_STRING||n===Xa.MULTI_LINE_STRING}}),p=h.filter(function(t){var i=t.getGeometryFunction()(e);if(i){var n=i.getType();return n===Xa.GEOMETRY_COLLECTION?i.getGeometriesArrayRecursive().filter(function(t){var e=t.getType();return e===Xa.POLYGON||e===Xa.MULTI_POLYGON}).length:n===Xa.POLYGON||n===Xa.MULTI_POLYGON}})),r.Style={pointStyles:u,lineStyles:c,polyStyles:p}}if(u.length&&void 0===r.name){var d=u[0].getText();d&&(r.name=d.getText())}}}var f=dm[i[i.length-1].node.namespaceURI],g=hn(r,f);if(fn(n,pm,ku,g,i,f),a.length>0){var v=hn(r,a);fn(n,pm,fm,[{names:a,values:v}],i)}var y=i[0],m=e.getGeometry();m&&(m=ur(m,!0,y)),fn(n,pm,om,[m],i)}function ho(t,e,i){var n=e.getFlatCoordinates(),r={node:t};r.layout=e.getLayout(),r.stride=e.getStride();var o=e.getProperties();o.coordinates=n;var a=gm[i[i.length-1].node.namespaceURI],s=hn(o,a);fn(r,vm,ku,s,i,a)}function uo(t,e,i){var n=e.getLinearRings(),r=n.shift(),o={node:t};fn(o,mm,_m,n,i),fn(o,mm,xm,[r],i)}function co(t,e){Tr(t,Math.round(1e6*e)/1e6)}function po(t,e,i){if(3===t){var n={keys:[],values:[],features:[]},r=i.readVarint()+i.pos;i.readFields(fo,n,r),n.length=n.features.length,n.length&&(e[n.name]=n)}}function fo(t,e,i){if(15===t)e.version=i.readVarint();else if(1===t)e.name=i.readString();else if(5===t)e.extent=i.readVarint();else if(2===t)e.features.push(i.pos);else if(3===t)e.keys.push(i.readString());else if(4===t){for(var n=null,r=i.readVarint()+i.pos;i.pos<r;)n=1==(t=i.readVarint()>>3)?i.readString():2===t?i.readFloat():3===t?i.readDouble():4===t?i.readVarint64():5===t?i.readVarint():6===t?i.readSVarint():7===t?i.readBoolean():null;e.values.push(n)}}function go(t,e,i){if(1==t)e.id=i.readVarint();else if(2==t)for(var n=i.readVarint()+i.pos;i.pos<n;){var r=e.layer.keys[i.readVarint()],o=e.layer.values[i.readVarint()];e.properties[r]=o}else 3==t?e.type=i.readVarint():4==t&&(e.geometry=i.pos)}function vo(t,e,i){t.pos=e.features[i];var n=t.readVarint()+t.pos,r={layer:e,type:0,properties:{}};return t.readFields(go,r,n),r}function yo(t,e){e[e.length-1].tags[t.getAttribute("k")]=t.getAttribute("v")}function mo(t,e,i,n,r,o){var a,s;void 0!==r?(a=r,s=void 0!==o?o:0):(a=[],s=0);for(var l=e;l<i;){var h=t[l++];a[s++]=t[l++],a[s++]=h;for(var u=2;u<n;++u)a[s++]=t[l++]}return a.length=s,a}function _o(t,e,i){var n,r=i||1e5,o=new Array(e);for(n=0;n<e;++n)o[n]=0;for(var a=0,s=t.length;a<s;)for(n=0;n<e;++n,++a){var l=t[a],h=l-o[n];o[n]=l,t[a]=h}return bo(t,r)}function xo(t,e,i){var n,r=i||1e5,o=new Array(e);for(n=0;n<e;++n)o[n]=0;for(var a=wo(t,r),s=0,l=a.length;s<l;)for(n=0;n<e;++n,++s)o[n]+=a[s],a[s]=o[n];return a}function bo(t,e){for(var i=e||1e5,n=0,r=t.length;n<r;++n)t[n]=Math.round(t[n]*i);return function(t){for(var e=0,i=t.length;e<i;++e){var n=t[e];t[e]=n<0?~(n<<1):n<<1}return function(t){for(var e="",i=0,n=t.length;i<n;++i)e+=function(t){for(var e,i="";t>=32;)e=63+(32|31&t),i+=String.fromCharCode(e),t>>=5;return e=t+63,i+=String.fromCharCode(e)}(t[i]);return e}(t)}(t)}function wo(t,e){for(var i=e||1e5,n=function(e){for(var i=function(t){for(var e=[],i=0,n=0,r=0,o=t.length;r<o;++r){var a=t.charCodeAt(r)-63;i|=(31&a)<<n,a<32?(e.push(i),i=0,n=0):n+=5}return e}(t),n=0,r=i.length;n<r;++n){var o=i[n];i[n]=1&o?~(o>>1):o>>1}return i}(),r=0,o=n.length;r<o;++r)n[r]/=i;return n}function So(t,e){for(var i,n,r=[],o=0,a=t.length;o<a;++o)i=t[o],o>0&&r.pop(),n=i>=0?e[i]:e[~i].slice().reverse(),r.push.apply(r,n);for(var s=0,l=r.length;s<l;++s)r[s]=r[s].slice();return r}function Co(t,e,i,n,r,o,a){var s,l=t.type,h=Ym[l];s="Point"===l||"MultiPoint"===l?h(t,i,n):h(t,e);var u=new La;u.setGeometry(ur(s,!1,a)),void 0!==t.id&&u.setId(t.id);var c=t.properties;return r&&(c||(c={}),c[r]=o),c&&u.setProperties(c,!0),u}function Eo(t,e,i){t[0]=t[0]*e[0]+i[0],t[1]=t[1]*e[1]+i[1]}function To(t){var e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(qm,e))}function Po(t,e,i){return new Km(t,e,i)}function Lo(t,e,i){var n=Ki(z_,"Filter"),r=Ki(z_,"FeatureId");n.appendChild(r),r.setAttribute("fid",e),t.appendChild(n)}function Io(t,e){var i=(t=t||"feature")+":";return 0===e.indexOf(i)?e:i+e}function Oo(t,e,i){fn({node:t},V_,ln(e.getTagName()),[e],i)}function Ao(t,e,i){for(var n={node:t},r=e.conditions,o=0,a=r.length;o<a;++o){var s=r[o];fn(n,V_,ln(s.getTagName()),[s],i)}}function Ro(t,e,i){void 0!==e.matchCase&&t.setAttribute("matchCase",e.matchCase.toString()),Fo(t,e.propertyName),ko(t,""+e.expression)}function Mo(t,e,i){var n=Ki(z_,t);Lr(n,i),e.appendChild(n)}function Fo(t,e){Mo("PropertyName",t,e)}function ko(t,e){Mo("Literal",t,e)}function No(t,e){var i=Ki(Jg,"TimeInstant");t.appendChild(i);var n=Ki(Jg,"timePosition");i.appendChild(n),Lr(n,e)}function Do(t){var e=t.getCoordinates();return 0===e.length?"":e.join(" ")}function jo(t){for(var e=t.getCoordinates(),i=[],n=0,r=e.length;n<r;++n)i.push(e[n].join(" "));return i.join(",")}function Go(t){for(var e=[],i=t.getLinearRings(),n=0,r=i.length;n<r;++n)e.push("("+jo(i[n])+")");return e.join(",")}function zo(t){var e=t.getType(),i=(0,tx[e])(t);if(e=e.toUpperCase(),"function"==typeof t.getFlatCoordinates){var n=function(e){var i=t.getLayout(),n="";return i!==za&&i!==Ya||(n+="Z"),i!==Ba&&i!==Ya||(n+="M"),n}();n.length>0&&(e+=" "+n)}return 0===i.length?e+" EMPTY":e+"("+i+")"}function Bo(t){return t.getAttributeNS("http://www.w3.org/1999/xlink","href")}function Yo(t,e){return pn({},bx,t,e)}function Xo(t,e){return pn({},yx,t,e)}function Wo(t,e){var i=Yo(t,e);if(i){var n=[Sr(t.getAttribute("width")),Sr(t.getAttribute("height"))];return i.size=n,i}}function Uo(t,e){return pn([],wx,t,e)}function Vo(t,e){var i=Cr(t).split(/\s+/);if(i&&2==i.length){var n=+i[0],r=+i[1];if(!isNaN(n)&&!isNaN(r))return[n,r]}}function Ho(){var t=document.body;return!!(t.webkitRequestFullscreen||t.msRequestFullscreen&&document.msFullscreenEnabled||t.requestFullscreen&&document.fullscreenEnabled)}function qo(){return!!(document.webkitIsFullScreen||document.msFullscreenElement||document.fullscreenElement)}function Zo(t){t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}i.r(e);var Ko,Jo=0,$o=(Ko=function(t,e){return(Ko=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}Ko(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Qo=function(t){function e(e){var i=this,n="Assertion failed. See https://openlayers.org/en/v"+"6.3.1".split("-")[0]+"/doc/errors/#"+e+" for details.";return(i=t.call(this,n)||this).code=e,i.name="AssertionError",i.message=n,i}return $o(e,t),e}(Error),ta="add",ea="remove",ia="propertychange",na="function"==typeof Object.assign?Object.assign:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),n=1,r=arguments.length;n<r;++n){var o=arguments[n];if(null!=o)for(var a in o)o.hasOwnProperty(a)&&(i[a]=o[a])}return i},ra="function"==typeof Object.values?Object.values:function(t){var e=[];for(var i in t)e.push(t[i]);return e},oa=function(){function t(){this.disposed_=!1}return t.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}(),aa=function(){function t(t){this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.propagationStopped=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}(),sa=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),la=function(t){function e(e){var i=t.call(this)||this;return i.eventTarget_=e,i.pendingRemovals_={},i.dispatching_={},i.listeners_={},i}return sa(e,t),e.prototype.addEventListener=function(t,e){if(t&&e){var i=this.listeners_[t];i||(i=[],this.listeners_[t]=i),-1===i.indexOf(e)&&i.push(e)}},e.prototype.dispatchEvent=function(t){var e="string"==typeof t?new aa(t):t,i=e.type;e.target||(e.target=this.eventTarget_||this);var n,r=this.listeners_[i];if(r){i in this.dispatching_||(this.dispatching_[i]=0,this.pendingRemovals_[i]=0),++this.dispatching_[i];for(var o=0,a=r.length;o<a;++o)if(!1===(n="handleEvent"in r[o]?r[o].handleEvent(e):r[o].call(this,e))||e.propagationStopped){n=!1;break}if(--this.dispatching_[i],0===this.dispatching_[i]){var s=this.pendingRemovals_[i];for(delete this.pendingRemovals_[i];s--;)this.removeEventListener(i,x);delete this.dispatching_[i]}return n}},e.prototype.disposeInternal=function(){o(this.listeners_)},e.prototype.getListeners=function(t){return this.listeners_[t]},e.prototype.hasListener=function(t){return t?t in this.listeners_:Object.keys(this.listeners_).length>0},e.prototype.removeEventListener=function(t,e){var i=this.listeners_[t];if(i){var n=i.indexOf(e);-1!==n&&(t in this.pendingRemovals_?(i[n]=x,++this.pendingRemovals_[t]):(i.splice(n,1),0===i.length&&delete this.listeners_[t]))}},e}(oa),ha="change",ua="error",ca="contextmenu",pa="click",da="keydown",fa="keypress",ga="load",va="touchmove",ya="wheel",ma=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),_a=function(t){function e(){var e=t.call(this)||this;return e.revision_=0,e}return ma(e,t),e.prototype.changed=function(){++this.revision_,this.dispatchEvent(ha)},e.prototype.getRevision=function(){return this.revision_},e.prototype.on=function(t,e){if(Array.isArray(t)){for(var i=t.length,n=new Array(i),r=0;r<i;++r)n[r]=s(this,t[r],e);return n}return s(this,t,e)},e.prototype.once=function(t,e){if(Array.isArray(t)){for(var i=t.length,n=new Array(i),r=0;r<i;++r)n[r]=l(this,t[r],e);return n}return l(this,t,e)},e.prototype.un=function(t,e){if(Array.isArray(t))for(var i=0,n=t.length;i<n;++i)this.removeEventListener(t[i],e);else this.removeEventListener(t,e)},e}(la),xa=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ba=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.key=i,r.oldValue=n,r}return xa(e,t),e}(aa),wa={},Sa=function(t){function e(e){var i=t.call(this)||this;return r(i),i.values_={},void 0!==e&&i.setProperties(e),i}return xa(e,t),e.prototype.get=function(t){var e;return this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},e.prototype.getKeys=function(){return Object.keys(this.values_)},e.prototype.getProperties=function(){return na({},this.values_)},e.prototype.notify=function(t,e){var i;i=w(t),this.dispatchEvent(new ba(i,t,e)),this.dispatchEvent(new ba(i=ia,t,e))},e.prototype.set=function(t,e,i){if(i)this.values_[t]=e;else{var n=this.values_[t];this.values_[t]=e,n!==e&&this.notify(t,n)}},e.prototype.setProperties=function(t,e){for(var i in t)this.set(i,t[i],e)},e.prototype.unset=function(t,e){if(t in this.values_){var i=this.values_[t];delete this.values_[t],e||this.notify(t,i)}},e}(_a),Ca=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ea=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.element=i,r.index=n,r}return Ca(e,t),e}(aa),Ta=function(t){function e(e,i){var n=t.call(this)||this;if(n.unique_=!!(i||{}).unique,n.array_=e||[],n.unique_)for(var r=0,o=n.array_.length;r<o;++r)n.assertUnique_(n.array_[r],r);return n.updateLength_(),n}return Ca(e,t),e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var e=0,i=t.length;e<i;++e)this.push(t[e]);return this},e.prototype.forEach=function(t){for(var e=this.array_,i=0,n=e.length;i<n;++i)t(e[i],i,e)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get("length")},e.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new Ea(ta,e,t))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.array_,i=0,n=e.length;i<n;++i)if(e[i]===t)return this.removeAt(i)},e.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new Ea(ea,e,t)),e},e.prototype.setAt=function(t,e){var i=this.getLength();if(t<i){this.unique_&&this.assertUnique_(e,t);var n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new Ea(ea,n,t)),this.dispatchEvent(new Ea(ta,e,t))}else{for(var r=i;r<t;++r)this.insertAt(r,void 0);this.insertAt(t,e)}},e.prototype.updateLength_=function(){this.set("length",this.array_.length)},e.prototype.assertUnique_=function(t,e){for(var i=0,n=this.array_.length;i<n;++i)if(this.array_[i]===t&&i!==e)throw new Qo(58)},e}(Sa),Pa=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),La=function(t){function e(e){var i=t.call(this)||this;return i.id_=void 0,i.geometryName_="geometry",i.style_=null,i.styleFunction_=void 0,i.geometryChangeKey_=null,i.addEventListener(w(i.geometryName_),i.handleGeometryChanged_),e&&("function"==typeof e.getSimplifiedGeometry?i.setGeometry(e):i.setProperties(e)),i}return Pa(e,t),e.prototype.clone=function(){var t=new e(this.getProperties());t.setGeometryName(this.getGeometryName());var i=this.getGeometry();i&&t.setGeometry(i.clone());var n=this.getStyle();return n&&t.setStyle(n),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(h(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=s(t,ha,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?function(t){if("function"==typeof t)return t;var e;return Array.isArray(t)?e=t:(S("function"==typeof t.getZIndex,41),e=[t]),function(){return e}}(t):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){this.removeEventListener(w(this.geometryName_),this.handleGeometryChanged_),this.geometryName_=t,this.addEventListener(w(this.geometryName_),this.handleGeometryChanged_),this.handleGeometryChanged_()},e}(Sa),Ia="bottom-left",Oa="bottom-right",Aa="top-left",Ra="top-right",Ma=0,Fa=1,ka=2,Na=4,Da=8,ja=16,Ga="XY",za="XYZ",Ba="XYM",Ya="XYZM",Xa={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},Wa="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2},Ua={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},Va={};Va[Ua.DEGREES]=2*Math.PI*6370997/360,Va[Ua.FEET]=.3048,Va[Ua.METERS]=1,Va[Ua.USFEET]=1200/3937;var Ha,qa,Za,Ka=Ua,Ja=function(){function t(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.canWrapX_},t.prototype.getCode=function(){return this.code_},t.prototype.getExtent=function(){return this.extent_},t.prototype.getUnits=function(){return this.units_},t.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||Va[this.units_]},t.prototype.getWorldExtent=function(){return this.worldExtent_},t.prototype.getAxisOrientation=function(){return this.axisOrientation_},t.prototype.isGlobal=function(){return this.global_},t.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},t.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},t.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},t.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},t.prototype.setWorldExtent=function(t){this.worldExtent_=t},t.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},t.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},t}(),$a=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Qa=6378137*Math.PI,ts=[-Qa,-Qa,Qa,Qa],es=[-180,-85,180,85],is=function(t){function e(e){return t.call(this,{code:e,units:Ka.METERS,extent:ts,global:!0,worldExtent:es,getPointResolution:function(t,e){return t/Wa(e[1]/6378137)}})||this}return $a(e,t),e}(Ja),ns=[new is("EPSG:3857"),new is("EPSG:102100"),new is("EPSG:102113"),new is("EPSG:900913"),new is("urn:ogc:def:crs:EPSG:6.18:3:3857"),new is("urn:ogc:def:crs:EPSG::3857"),new is("http://www.opengis.net/gml/srs/epsg.xml#3857")],rs=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),os=[-180,-90,180,90],as=6378137*Math.PI/180,ss=function(t){function e(e,i){return t.call(this,{code:e,units:Ka.DEGREES,extent:os,axisOrientation:i,global:!0,metersPerUnit:as,worldExtent:os})||this}return rs(e,t),e}(Ja),ls=[new ss("CRS:84"),new ss("EPSG:4326","neu"),new ss("urn:ogc:def:crs:EPSG::4326","neu"),new ss("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new ss("urn:ogc:def:crs:OGC:1.3:CRS84"),new ss("urn:ogc:def:crs:OGC:2:84"),new ss("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new ss("urn:x-ogc:def:crs:EPSG:4326","neu")],hs={},us={},cs=null;St(ns),St(ls),Ha=ns,qa=function(t,e,i){var n=t.length,r=i>1?i:2,o=e;void 0===o&&(o=r>2?t.slice():new Array(n));for(var a=Qa,s=0;s<n;s+=r){o[s]=a*t[s]/180;var l=6378137*Math.log(Math.tan(Math.PI*(+t[s+1]+90)/360));l>a?l=a:l<-a&&(l=-a),o[s+1]=l}return o},Za=function(t,e,i){var n=t.length,r=i>1?i:2,o=e;void 0===o&&(o=r>2?t.slice():new Array(n));for(var a=0;a<n;a+=r)o[a]=180*t[a]/Qa,o[a+1]=360*Math.atan(Math.exp(t[a+1]/6378137))/Math.PI-90;return o},ls.forEach(function(t){Ha.forEach(function(e){vt(t,e,qa),vt(e,t,Za)})});var ps,ds,fs=new Array(6),gs=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),vs=[1,0,0,1,0,0],ys=function(t){function e(){var e,i,n,r,o,a=t.call(this)||this;return a.extent_=[1/0,1/0,-1/0,-1/0],a.extentRevision_=-1,a.simplifiedGeometryMaxMinSquaredTolerance=0,a.simplifiedGeometryRevision=0,a.simplifyTransformedInternal=(e=function(t,e,i){if(!i)return this.getSimplifiedGeometry(e);var n=this.clone();return n.applyTransform(i),n.getSimplifiedGeometry(e)},o=!1,function(){var t=Array.prototype.slice.call(arguments);return o&&this===r&&v(t,n)||(o=!0,r=this,n=t,i=e.apply(this,arguments)),i}),a}return gs(e,t),e.prototype.simplifyTransformed=function(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)},e.prototype.clone=function(){return n()},e.prototype.closestPointXY=function(t,e,i,r){return n()},e.prototype.containsXY=function(t,e){var i=this.getClosestPoint([t,e]);return i[0]===t&&i[1]===e},e.prototype.getClosestPoint=function(t,e){var i=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],i,1/0),i},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return n()},e.prototype.getExtent=function(t){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}(this.extent_,t)},e.prototype.rotate=function(t,e){n()},e.prototype.scale=function(t,e,i){n()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return n()},e.prototype.getType=function(){return n()},e.prototype.applyTransform=function(t){n()},e.prototype.intersectsExtent=function(t){return n()},e.prototype.translate=function(t,e){n()},e.prototype.transform=function(t,e){var i=bt(t),n=i.getUnits()==Ka.TILE_PIXELS?function(t,n,r){var o=i.getExtent(),a=i.getWorldExtent(),s=V(a)/V(o);return Yt(vs,a[0],a[3],s,-s,0,0,0),it(t,0,t.length,r,vs,n),It(i,e)(t,n,r)}:It(i,e);return this.applyTransform(n),this},e}(Sa),ms=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),_s=function(t){function e(){var e=t.call(this)||this;return e.layout=Ga,e.stride=2,e.flatCoordinates=null,e}return ms(e,t),e.prototype.computeExtent=function(t){return k(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinates=function(){return n()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,e){this.stride=Ut(t),this.layout=t,this.flatCoordinates=e},e.prototype.setCoordinates=function(t,e){n()},e.prototype.setLayout=function(t,e,i){var n;if(t)n=Ut(t);else{for(var r=0;r<i;++r){if(0===e.length)return this.layout=Ga,void(this.stride=2);e=e[0]}t=function(t){var e;return 2==t?e=Ga:3==t?e=za:4==t&&(e=Ya),e}(n=e.length)}this.layout=t,this.stride=n},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,e){var i=this.getFlatCoordinates();if(i){var n=this.getStride();nt(i,0,i.length,n,t,e,i),this.changed()}},e.prototype.scale=function(t,e,i){var n=e;void 0===n&&(n=t);var r=i;r||(r=W(this.getExtent()));var o=this.getFlatCoordinates();if(o){var a=this.getStride();!function(t,e,i,n,o,a,s,l){for(var h=l||[],u=r[0],c=r[1],p=0,d=0;d<i;d+=n){var f=t[d+1]-c;h[p++]=u+o*(t[d]-u),h[p++]=c+a*f;for(var g=d+2;g<d+n;++g)h[p++]=t[g]}l&&h.length!=p&&(h.length=p)}(o,0,o.length,a,t,n,0,o),this.changed()}},e.prototype.translate=function(t,e){var i=this.getFlatCoordinates();if(i){var n=this.getStride();rt(i,0,i.length,n,t,e,i),this.changed()}},e}(ys),xs=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),bs=function(t){function e(e,i){var n=t.call(this)||this;return n.maxDelta_=-1,n.maxDeltaRevision_=-1,void 0===i||Array.isArray(e[0])?n.setCoordinates(e,i):n.setFlatCoordinates(i,e),n}return xs(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,n){return n<P(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Zt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Jt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,n))},e.prototype.getArea=function(){return Vt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return ie(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=oe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,Ga)},e.prototype.getType=function(){return Xa.LINEAR_RING},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=te(this.flatCoordinates,0,t,this.stride),this.changed()},e}(_s),ws=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ss=function(t){function e(e,i){var n=t.call(this)||this;return n.setCoordinates(e,i),n}return ws(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,n){var r=this.flatCoordinates,o=st(t,e,r[0],r[1]);if(o<n){for(var a=this.stride,s=0;s<a;++s)i[s]=r[s];return i.length=a,o}return n},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return F(this.flatCoordinates,t)},e.prototype.getType=function(){return Xa.POINT},e.prototype.intersectsExtent=function(t){return O(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Qt(this.flatCoordinates,0,t),this.changed()},e}(_s),Cs=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Es=function(t){function e(e,i,n){var r=t.call(this)||this;return r.ends_=[],r.flatInteriorPointRevision_=-1,r.flatInteriorPoint_=null,r.maxDelta_=-1,r.maxDeltaRevision_=-1,r.orientedRevision_=-1,r.orientedFlatCoordinates_=null,void 0!==i&&n?(r.setFlatCoordinates(i,e),r.ends_=n):r.setCoordinates(e,i),r}return Cs(e,t),e.prototype.appendLinearRing=function(t){this.flatCoordinates?f(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,i,n){return n<P(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Kt(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),$t(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,n))},e.prototype.containsXY=function(t,e){return ce(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return Ht(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?xe(e=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,t):e=this.flatCoordinates,ne(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=W(this.getExtent());this.flatInteriorPoint_=pe(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new Ss(this.getFlatInteriorPoint(),Ba)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new bs(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.ends_,n=[],r=0,o=0,a=i.length;o<a;++o){var s=i[o],l=new bs(e.slice(r,s),t);n.push(l),r=s}return n},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;_e(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=xe(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],n=[];return i.length=le(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),i,0,n),new e(i,Ga,n)},e.prototype.getType=function(){return Xa.POLYGON},e.prototype.intersectsExtent=function(t){return ve(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=ee(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},e}(_s),Ts=Es,Ps=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ls="projection",Is="tracking",Os=function(t){function e(e){var i=t.call(this,ua)||this;return i.code=e.code,i.message=e.message,i}return Ps(e,t),e}(aa),As=function(t){function e(e){var i=t.call(this)||this,n=e||{};return i.position_=null,i.transform_=_t,i.watchId_=void 0,i.addEventListener(w(Ls),i.handleProjectionChanged_),i.addEventListener(w(Is),i.handleTrackingChanged_),void 0!==n.projection&&i.setProjection(n.projection),void 0!==n.trackingOptions&&i.setTrackingOptions(n.trackingOptions),i.setTracking(void 0!==n.tracking&&n.tracking),i}return Ps(e,t),e.prototype.disposeInternal=function(){this.setTracking(!1),t.prototype.disposeInternal.call(this)},e.prototype.handleProjectionChanged_=function(){var t=this.getProjection();t&&(this.transform_=Lt(bt("EPSG:4326"),t),this.position_&&this.set("position",this.transform_(this.position_)))},e.prototype.handleTrackingChanged_=function(){if("geolocation"in navigator){var t=this.getTracking();t&&void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):t||void 0===this.watchId_||(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}},e.prototype.positionChange_=function(t){var e=t.coords;this.set("accuracy",e.accuracy),this.set("altitude",null===e.altitude?void 0:e.altitude),this.set("altitudeAccuracy",null===e.altitudeAccuracy?void 0:e.altitudeAccuracy),this.set("heading",null===e.heading?void 0:ht(e.heading)),this.position_?(this.position_[0]=e.longitude,this.position_[1]=e.latitude):this.position_=[e.longitude,e.latitude];var i=this.transform_(this.position_);this.set("position",i),this.set("speed",null===e.speed?void 0:e.speed);var n=we(this.position_,e.accuracy);n.applyTransform(this.transform_),this.set("accuracyGeometry",n),this.changed()},e.prototype.positionError_=function(t){this.setTracking(!1),this.dispatchEvent(new Os(t))},e.prototype.getAccuracy=function(){return this.get("accuracy")},e.prototype.getAccuracyGeometry=function(){return this.get("accuracyGeometry")||null},e.prototype.getAltitude=function(){return this.get("altitude")},e.prototype.getAltitudeAccuracy=function(){return this.get("altitudeAccuracy")},e.prototype.getHeading=function(){return this.get("heading")},e.prototype.getPosition=function(){return this.get("position")},e.prototype.getProjection=function(){return this.get(Ls)},e.prototype.getSpeed=function(){return this.get("speed")},e.prototype.getTracking=function(){return this.get(Is)},e.prototype.getTrackingOptions=function(){return this.get("trackingOptions")},e.prototype.setProjection=function(t){this.set(Ls,bt(t))},e.prototype.setTracking=function(t){this.set(Is,t)},e.prototype.setTrackingOptions=function(t){this.set("trackingOptions",t)},e}(Sa),Rs=function(){function t(t,e,i){this.decay_=t,this.minVelocity_=e,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}return t.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},t.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},t.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var i=e-3;i>0&&this.points_[i+2]>t;)i-=3;var n=this.points_[e+2]-this.points_[i+2];if(n<1e3/60)return!1;var r=this.points_[e]-this.points_[i],o=this.points_[e+1]-this.points_[i+1];return this.angle_=Math.atan2(o,r),this.initialVelocity_=Math.sqrt(r*r+o*o)/n,this.initialVelocity_>this.minVelocity_},t.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},t.prototype.getAngle=function(){return this.angle_},t}(),Ms=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Fs=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.map=i,r.frameState=void 0!==n?n:null,r}return Ms(e,t),e}(aa),ks=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ns=function(t){function e(e,i,n,r,o){var a=t.call(this,e,i,o)||this;return a.originalEvent=n,a.pixel_=null,a.coordinate_=null,a.dragging=void 0!==r&&r,a}return ks(e,t),Object.defineProperty(e.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t},enumerable:!0,configurable:!0}),e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},e}(Fs),Ds=(i(1),"undefined"!=typeof navigator?navigator.userAgent.toLowerCase():""),js=-1!==Ds.indexOf("firefox"),Gs=(-1!==Ds.indexOf("safari")&&Ds.indexOf("chrom"),-1!==Ds.indexOf("webkit")&&-1==Ds.indexOf("edge")),zs=-1!==Ds.indexOf("macintosh"),Bs="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,Ys="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,Xs="undefined"!=typeof Image&&Image.prototype.decode,Ws=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(t){}return t}(),Us={SINGLECLICK:"singleclick",CLICK:pa,DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Vs=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Hs=function(t){function e(e,i,n,r,o){var a=t.call(this,e,i,n,r,o)||this;return a.pointerEvent=n,a}return Vs(e,t),e}(Ns),qs="pointermove",Zs="pointerdown",Ks="pointerup",Js=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),$s=function(t){function e(e,i){var n=t.call(this,e)||this;n.map_=e,n.dragging_=!1,n.dragListenerKeys_=[],n.moveTolerance_=i?i*Bs:Bs,n.down_=null;var r=n.map_.getViewport();return n.activePointers_=0,n.trackedTouches_={},n.element_=r,n.pointerdownListenerKey_=s(r,Zs,n.handlePointerDown_,n),n.relayedListenerKey_=s(r,qs,n.relayEvent_,n),n.boundHandleTouchMove_=n.handleTouchMove_.bind(n),n.element_.addEventListener(va,n.boundHandleTouchMove_,!!Ws&&{passive:!1}),n}return Js(e,t),e.prototype.emulateClick_=function(t){var e=new Hs(Us.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new Hs(Us.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout((function(){this.clickTimeoutId_=void 0;var e=new Hs(Us.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}).bind(this),250)},e.prototype.updateActivePointers_=function(t){var e=t;e.type==Us.POINTERUP||e.type==Us.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==Us.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new Hs(Us.POINTERUP,this.map_,t);this.dispatchEvent(e),e.propagationStopped||this.dragging_||!this.isMouseActionButton_(t)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(h),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},e.prototype.isMouseActionButton_=function(t){return 0===t.button},e.prototype.handlePointerDown_=function(t){this.updateActivePointers_(t);var e=new Hs(Us.POINTERDOWN,this.map_,t);this.dispatchEvent(e),this.down_=t,0===this.dragListenerKeys_.length&&this.dragListenerKeys_.push(s(document,Us.POINTERMOVE,this.handlePointerMove_,this),s(document,Us.POINTERUP,this.handlePointerUp_,this),s(this.element_,Us.POINTERCANCEL,this.handlePointerUp_,this))},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new Hs(Us.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}},e.prototype.relayEvent_=function(t){this.originalPointerMoveEvent_=t;var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new Hs(t.type,this.map_,t,e))},e.prototype.handleTouchMove_=function(t){this.originalPointerMoveEvent_&&!this.originalPointerMoveEvent_.defaultPrevented||t.preventDefault()},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&(h(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(va,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(h(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(h),this.dragListenerKeys_.length=0,this.element_=null,t.prototype.disposeInternal.call(this)},e}(la),Qs="layergroup",tl="size",el="target",il="view",nl="postrender",rl=0,ol=2,al=4,sl=function(){function t(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return t.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,o(this.queuedElements_)},t.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,i=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var n=this.keyFunction_(i);return delete this.queuedElements_[n],i},t.prototype.enqueue=function(t){S(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=1/0&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},t.prototype.getCount=function(){return this.elements_.length},t.prototype.getLeftChildIndex_=function(t){return 2*t+1},t.prototype.getRightChildIndex_=function(t){return 2*t+2},t.prototype.getParentIndex_=function(t){return t-1>>1},t.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},t.prototype.isEmpty=function(){return 0===this.elements_.length},t.prototype.isKeyQueued=function(t){return t in this.queuedElements_},t.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},t.prototype.siftUp_=function(t){for(var e=this.elements_,i=this.priorities_,n=e.length,r=e[t],o=i[t],a=t;t<n>>1;){var s=this.getLeftChildIndex_(t),l=this.getRightChildIndex_(t),h=l<n&&i[l]<i[s]?l:s;e[t]=e[h],i[t]=i[h],t=h}e[t]=r,i[t]=o,this.siftDown_(a,t)},t.prototype.siftDown_=function(t,e){for(var i=this.elements_,n=this.priorities_,r=i[e],o=n[e];e>t;){var a=this.getParentIndex_(e);if(!(n[a]>o))break;i[e]=i[a],n[e]=n[a],e=a}i[e]=r,n[e]=o},t.prototype.reprioritize=function(){var t,e,i,n=this.priorityFunction_,r=this.elements_,o=this.priorities_,a=0,s=r.length;for(e=0;e<s;++e)(i=n(t=r[e]))==1/0?delete this.queuedElements_[this.keyFunction_(t)]:(o[a]=i,r[a++]=t);r.length=a,o.length=a,this.heapify_()},t}(),ll=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),hl=function(t){function e(e,i){var n=t.call(this,function(t){return e.apply(null,t)},function(t){return t[0].getKey()})||this;return n.boundHandleTileChange_=n.handleTileChange.bind(n),n.tileChangeCallback_=i,n.tilesLoading_=0,n.tilesLoadingKeys_={},n}return ll(e,t),e.prototype.enqueue=function(e){var i=t.prototype.enqueue.call(this,e);return i&&e[0].addEventListener(ha,this.boundHandleTileChange_),i},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var e=t.target,i=e.getState();if(e.hifi&&i===ol||3===i||i===al){e.removeEventListener(ha,this.boundHandleTileChange_);var n=e.getKey();n in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[n],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,e){for(var i,n,r=0;this.tilesLoading_<t&&r<e&&this.getCount()>0;)n=(i=this.dequeue()[0]).getKey(),i.getState()!==rl||n in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[n]=!0,++this.tilesLoading_,++r,i.load())},e}(sl),ul=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),cl=function(t){function e(e){var i=t.call(this)||this,n=na({},e);return i.hints_=[0,0],i.animations_=[],i.projection_=Ct(n.projection,"EPSG:3857"),i.viewportSize_=[100,100],i.targetCenter_=null,i.cancelAnchor_=void 0,n.center&&(n.center=Ft(n.center,i.projection_)),n.extent&&(n.extent=Nt(n.extent,i.projection_)),i.applyOptions_(n),i}return ul(e,t),e.prototype.applyOptions_=function(t){var e=function(t){var e,i,n,r=void 0!==t.minZoom?t.minZoom:0,o=void 0!==t.maxZoom?t.maxZoom:28,a=void 0!==t.zoomFactor?t.zoomFactor:2,s=void 0!==t.multiWorld&&t.multiWorld,l=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,h=void 0!==t.showFullExtent&&t.showFullExtent,u=Ct(t.projection,"EPSG:3857"),c=u.getExtent(),d=t.constrainOnlyCenter,f=t.extent;if(s||f||!u.isGlobal()||(d=!1,f=c),void 0!==t.resolutions){var g=t.resolutions;i=g[r],n=void 0!==g[o]?g[o]:g[g.length-1],e=t.constrainResolution?function(t,e,i,n){return function(r,o,a,s){if(void 0!==r){var l=t[0],h=t[t.length-1],u=i?Le(l,i,a,n):l;if(s)return void 0===e||e?Ie(r,u,h):ot(r,h,u);var c=Math.min(u,r),d=Math.floor(p(t,c,o));return t[d]>u&&d<t.length-1?t[d+1]:t[d]}}}(g,l,!d&&f,h):Oe(i,n,l,!d&&f,h)}else{var v=(c?Math.max(K(c),V(c)):360*Va[Ka.DEGREES]/u.getMetersPerUnit())/256/Math.pow(2,0),y=v/Math.pow(2,28);void 0!==(i=t.maxResolution)?r=0:i=v/Math.pow(a,r),void 0===(n=t.minResolution)&&(n=void 0!==t.maxZoom?void 0!==t.maxResolution?i/Math.pow(a,o):v/Math.pow(a,o):y),o=r+Math.floor(Math.log(i/n)/Math.log(a)),n=i/Math.pow(a,o-r),e=t.constrainResolution?function(t,e,i,n,r,o){return function(a,s,l,h){if(void 0!==a){var u=r?Le(e,r,l,o):e,c=void 0!==i?i:0;if(h)return void 0===n||n?Ie(a,u,c):ot(a,c,u);var p=Math.ceil(Math.log(e/u)/Math.log(t)-1e-9),d=-s*(.5-1e-9)+.5,f=Math.min(u,a),g=Math.floor(Math.log(e/f)/Math.log(t)+d),v=Math.max(p,g);return ot(e/Math.pow(t,v),c,u)}}}(a,i,n,l,!d&&f,h):Oe(i,n,l,!d&&f,h)}return{constraint:e,maxResolution:i,minResolution:n,minZoom:r,zoomFactor:a}}(t);this.maxResolution_=e.maxResolution,this.minResolution_=e.minResolution,this.zoomFactor_=e.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=e.minZoom;var i=function(t){if(void 0!==t.extent)return Te(t.extent,t.constrainOnlyCenter,void 0===t.smoothExtentConstraint||t.smoothExtentConstraint);var e=Ct(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&e.isGlobal()){var i=e.getExtent().slice();return i[0]=-1/0,i[2]=1/0,Te(i,!1,!1)}return Pe}(t),n=e.constraint,r=function(e){if(void 0===t.enableRotation||t.enableRotation){var i=t.constrainRotation;return void 0===i||!0===i?(a=o||ht(5),function(t,e){return e?t:void 0!==t?Math.abs(t)<=a?0:t:void 0}):!1===i?Re:"number"==typeof i?(n=i,r=2*Math.PI/n,function(t,e){return e?t:void 0!==t?t=Math.floor(t/r+.5)*r:void 0}):Re}return Ae;var n,r,o,a}();this.constraints_={center:i,resolution:n,rotation:r},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom),this.setProperties({}),this.options_=t},e.prototype.getUpdatedOptions_=function(t){var e=na({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),na({},e,t)},e.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var e=new Array(arguments.length),i=0;i<e.length;++i){var n=arguments[i];n.center&&((n=na({},n)).center=Ft(n.center,this.getProjection())),n.anchor&&((n=na({},n)).anchor=Ft(n.anchor,this.getProjection())),e[i]=n}this.animateInternal.apply(this,e)},e.prototype.animateInternal=function(t){var e,i=arguments.length;if(i>1&&"function"==typeof arguments[i-1]&&(e=arguments[i-1],--i),!this.isDef()){var n=arguments[i-1];return n.center&&this.setCenterInternal(n.center),void 0!==n.zoom&&this.setZoom(n.zoom),void 0!==n.rotation&&this.setRotation(n.rotation),void(e&&Je(e,!0))}for(var r=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,s=this.targetRotation_,l=[],h=0;h<i;++h){var u=arguments[h],c={start:r,complete:!1,anchor:u.anchor,duration:void 0!==u.duration?u.duration:1e3,easing:u.easing||Ze,callback:e};if(u.center&&(c.sourceCenter=o,c.targetCenter=u.center.slice(),o=c.targetCenter),void 0!==u.zoom?(c.sourceResolution=a,c.targetResolution=this.getResolutionForZoom(u.zoom),a=c.targetResolution):u.resolution&&(c.sourceResolution=a,c.targetResolution=u.resolution,a=c.targetResolution),void 0!==u.rotation){c.sourceRotation=s;var p=ut(u.rotation-s+Math.PI,2*Math.PI)-Math.PI;c.targetRotation=s+p,s=c.targetRotation}$e(c)?c.complete=!0:r+=c.duration,l.push(c)}this.animations_.push(l),this.setHint(0,1),this.updateAnimations_()},e.prototype.getAnimating=function(){return this.hints_[0]>0},e.prototype.getInteracting=function(){return this.hints_[1]>0},e.prototype.cancelAnimations=function(){var t;this.setHint(0,-this.hints_[0]);for(var e=0,i=this.animations_.length;e<i;++e){var n=this.animations_[e];if(n[0].callback&&Je(n[0].callback,!1),!t)for(var r=0,o=n.length;r<o;++r){var a=n[r];if(!a.complete){t=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t},e.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,i=this.animations_.length-1;i>=0;--i){for(var n=this.animations_[i],r=!0,o=0,a=n.length;o<a;++o){var s=n[o];if(!s.complete){var l=s.duration>0?(t-s.start)/s.duration:1;l>=1?(s.complete=!0,l=1):r=!1;var h=s.easing(l);if(s.sourceCenter){var u=s.sourceCenter[0],c=s.sourceCenter[1];this.targetCenter_=[u+h*(s.targetCenter[0]-u),c+h*(s.targetCenter[1]-c)]}if(s.sourceResolution&&s.targetResolution){var p=1===h?s.targetResolution:s.sourceResolution+h*(s.targetResolution-s.sourceResolution);if(s.anchor){var d=this.getViewportSize_(this.getRotation()),f=this.constraints_.resolution(p,0,d,!0);this.targetCenter_=this.calculateCenterZoom(f,s.anchor)}this.targetResolution_=p,this.applyTargetState_(!0)}if(void 0!==s.sourceRotation&&void 0!==s.targetRotation){var g=1===h?ut(s.targetRotation+Math.PI,2*Math.PI)-Math.PI:s.sourceRotation+h*(s.targetRotation-s.sourceRotation);if(s.anchor){var v=this.constraints_.rotation(g,!0);this.targetCenter_=this.calculateCenterRotate(v,s.anchor)}this.targetRotation_=g}if(this.applyTargetState_(!0),e=!0,!s.complete)break}}if(r){this.animations_[i]=null,this.setHint(0,-1);var y=n[0].callback;y&&Je(y,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},e.prototype.calculateCenterRotate=function(t,e){var i,n=this.getCenterInternal();return void 0!==n&&(ze(i=[n[0]-e[0],n[1]-e[1]],t-this.getRotation()),ke(i,e)),i},e.prototype.calculateCenterZoom=function(t,e){var i,n=this.getCenterInternal(),r=this.getResolution();return void 0!==n&&void 0!==r&&(i=[e[0]-t*(e[0]-n[0])/r,e[1]-t*(e[1]-n[1])/r]),i},e.prototype.getViewportSize_=function(t){var e=this.viewportSize_;if(t){var i=e[0],n=e[1];return[Math.abs(i*Math.cos(t))+Math.abs(n*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(n*Math.cos(t))]}return e},e.prototype.setViewportSize=function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.resolveConstraints(0)},e.prototype.getCenter=function(){var t=this.getCenterInternal();return t?Mt(t,this.getProjection()):t},e.prototype.getCenterInternal=function(){return this.get("center")},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getConstrainResolution=function(){return this.options_.constrainResolution},e.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){return kt(this.calculateExtentInternal(t),this.getProjection())},e.prototype.calculateExtentInternal=function(t){var e=t||this.getViewportSize_(),i=this.getCenterInternal();S(i,1);var n=this.getResolution();S(void 0!==n,2);var r=this.getRotation();return S(void 0!==r,3),U(i,n,r,e)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.setConstrainResolution=function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get("resolution")},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,e){return this.getResolutionForExtentInternal(Nt(t,this.getProjection()),e)},e.prototype.getResolutionForExtentInternal=function(t,e){var i=e||this.getViewportSize_(),n=K(t)/i[0],r=V(t)/i[1];return Math.max(n,r)},e.prototype.getResolutionForValueFunction=function(t){var e=t||2,i=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,r=Math.log(i/n)/Math.log(e);return function(t){return i/Math.pow(e,t*r)}},e.prototype.getRotation=function(){return this.get("rotation")},e.prototype.getValueForResolutionFunction=function(t){var e=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,r=Math.log(i/n)/e;return function(t){return Math.log(i/t)/e/r}},e.prototype.getState=function(){var t=this.getCenterInternal(),e=this.getProjection(),i=this.getResolution(),n=this.getRotation();return{center:t.slice(0),projection:void 0!==e?e:null,resolution:i,rotation:n,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},e.prototype.getZoomForResolution=function(t){var e,i,n=this.minZoom_||0;if(this.resolutions_){var r=p(this.resolutions_,t,1);n=r,e=this.resolutions_[r],i=r==this.resolutions_.length-1?2:e/this.resolutions_[r+1]}else e=this.maxResolution_,i=this.zoomFactor_;return n+Math.log(e/t)/Math.log(i)},e.prototype.getResolutionForZoom=function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var e=ot(Math.floor(t),0,this.resolutions_.length-2),i=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(i,ot(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)},e.prototype.fit=function(t,e){var i,n=na({size:this.getViewportSize_()},e||{});if(S(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t))S(!$(t),25),i=Se(r=Nt(t,this.getProjection()));else if(t.getType()===Xa.CIRCLE){var r;(i=Se(r=Nt(t.getExtent(),this.getProjection()))).rotate(this.getRotation(),W(r))}else{var o=Rt();i=o?t.clone().transform(o,this.getProjection()):t}this.fitInternal(i,n)},e.prototype.fitInternal=function(t,e){var i=e||{},n=i.size;n||(n=this.getViewportSize_());var r,o=void 0!==i.padding?i.padding:[0,0,0,0],a=void 0!==i.nearest&&i.nearest;r=void 0!==i.minResolution?i.minResolution:void 0!==i.maxZoom?this.getResolutionForZoom(i.maxZoom):0;for(var s=t.getFlatCoordinates(),l=this.getRotation(),h=Math.cos(-l),u=Math.sin(-l),c=1/0,p=1/0,d=-1/0,f=-1/0,g=t.getStride(),v=0,y=s.length;v<y;v+=g){var m=s[v]*h-s[v+1]*u,_=s[v]*u+s[v+1]*h;c=Math.min(c,m),p=Math.min(p,_),d=Math.max(d,m),f=Math.max(f,_)}var b=this.getResolutionForExtentInternal([c,p,d,f],[n[0]-o[1]-o[3],n[1]-o[0]-o[2]]);b=isNaN(b)?r:Math.max(b,r),b=this.getConstrainedResolution(b,a?0:1);var w=(c+d)/2,S=(p+f)/2,C=[(w+=(o[1]-o[3])/2*b)*h-(S+=(o[0]-o[2])/2*b)*(u=-u),S*h+w*u],E=i.callback?i.callback:x;void 0!==i.duration?this.animateInternal({resolution:b,center:this.getConstrainedCenter(C,b),duration:i.duration,easing:i.easing},E):(this.targetResolution_=b,this.targetCenter_=C,this.applyTargetState_(!1,!0),Je(E,!0))},e.prototype.centerOn=function(t,e,i){this.centerOnInternal(Ft(t,this.getProjection()),e,i)},e.prototype.centerOnInternal=function(t,e,i){var n=this.getRotation(),r=Math.cos(-n),o=Math.sin(-n),a=t[0]*r-t[1]*o,s=t[1]*r+t[0]*o,l=this.getResolution(),h=(a+=(e[0]/2-i[0])*l)*r-(s+=(i[1]-e[1]/2)*l)*(o=-o);this.setCenterInternal([h,s*r+a*o])},e.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},e.prototype.adjustCenter=function(t){var e=Mt(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustCenterInternal=function(t){var e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustResolution=function(t,e){var i=e&&Ft(e,this.getProjection());this.adjustResolutionInternal(t,i)},e.prototype.adjustResolutionInternal=function(t,e){var i=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*t,0,n,i);e&&(this.targetCenter_=this.calculateCenterZoom(r,e)),this.targetResolution_*=t,this.applyTargetState_()},e.prototype.adjustZoom=function(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)},e.prototype.adjustRotation=function(t,e){e&&(e=Ft(e,this.getProjection())),this.adjustRotationInternal(t,e)},e.prototype.adjustRotationInternal=function(t,e){var i=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+t,i);e&&(this.targetCenter_=this.calculateCenterRotate(n,e)),this.targetRotation_+=t,this.applyTargetState_()},e.prototype.setCenter=function(t){this.setCenterInternal(Ft(t,this.getProjection()))},e.prototype.setCenterInternal=function(t){this.targetCenter_=t,this.applyTargetState_()},e.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.targetResolution_=t,this.applyTargetState_()},e.prototype.setRotation=function(t){this.targetRotation_=t,this.applyTargetState_()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e.prototype.applyTargetState_=function(t,e){var i=this.getAnimating()||this.getInteracting()||e,n=this.constraints_.rotation(this.targetRotation_,i),r=this.getViewportSize_(n),o=this.constraints_.resolution(this.targetResolution_,0,r,i),a=this.constraints_.center(this.targetCenter_,o,r,i);this.get("rotation")!==n&&this.set("rotation",n),this.get("resolution")!==o&&this.set("resolution",o),this.get("center")&&Ge(this.get("center"),a)||this.set("center",a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0},e.prototype.resolveConstraints=function(t,e,i){var n=void 0!==t?t:200,r=e||0,o=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(o),s=this.constraints_.resolution(this.targetResolution_,r,a),l=this.constraints_.center(this.targetCenter_,s,a);if(0===n&&!this.cancelAnchor_)return this.targetResolution_=s,this.targetRotation_=o,this.targetCenter_=l,void this.applyTargetState_();var h=i||(0===n?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,this.getResolution()===s&&this.getRotation()===o&&this.getCenterInternal()&&Ge(this.getCenterInternal(),l)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:l,resolution:s,duration:n,easing:qe,anchor:h}))},e.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(1,1)},e.prototype.endInteraction=function(t,e,i){var n=i&&Ft(i,this.getProjection());this.endInteractionInternal(t,e,n)},e.prototype.endInteractionInternal=function(t,e,i){this.setHint(1,-1),this.resolveConstraints(t,e,i)},e.prototype.getConstrainedCenter=function(t,e){var i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),i)},e.prototype.getConstrainedZoom=function(t,e){var i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,e))},e.prototype.getConstrainedResolution=function(t,e){var i=e||0,n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,i,n)},e}(Sa),pl="opacity",dl="visible",fl="zIndex",gl="maxResolution",vl="minResolution",yl="maxZoom",ml="minZoom",_l="source",xl=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),bl=function(t){function e(e){var i=t.call(this)||this,n=na({},e);return n[pl]=void 0!==e.opacity?e.opacity:1,S("number"==typeof n[pl],64),n[dl]=void 0===e.visible||e.visible,n[fl]=e.zIndex,n[gl]=void 0!==e.maxResolution?e.maxResolution:1/0,n[vl]=void 0!==e.minResolution?e.minResolution:0,n[ml]=void 0!==e.minZoom?e.minZoom:-1/0,n[yl]=void 0!==e.maxZoom?e.maxZoom:1/0,i.className_=void 0!==n.className?e.className:"ol-layer",delete n.className,i.setProperties(n),i.state_=null,i}return xl(e,t),e.prototype.getClassName=function(){return this.className_},e.prototype.getLayerState=function(t){var e=this.state_||{layer:this,managed:void 0===t||t},i=this.getZIndex();return e.opacity=ot(Math.round(100*this.getOpacity())/100,0,1),e.sourceState=this.getSourceState(),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==i?i:!1===e.managed?1/0:0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e},e.prototype.getLayersArray=function(t){return n()},e.prototype.getLayerStatesArray=function(t){return n()},e.prototype.getExtent=function(){return this.get("extent")},e.prototype.getMaxResolution=function(){return this.get(gl)},e.prototype.getMinResolution=function(){return this.get(vl)},e.prototype.getMinZoom=function(){return this.get(ml)},e.prototype.getMaxZoom=function(){return this.get(yl)},e.prototype.getOpacity=function(){return this.get(pl)},e.prototype.getSourceState=function(){return n()},e.prototype.getVisible=function(){return this.get(dl)},e.prototype.getZIndex=function(){return this.get(fl)},e.prototype.setExtent=function(t){this.set("extent",t)},e.prototype.setMaxResolution=function(t){this.set(gl,t)},e.prototype.setMinResolution=function(t){this.set(vl,t)},e.prototype.setMaxZoom=function(t){this.set(yl,t)},e.prototype.setMinZoom=function(t){this.set(ml,t)},e.prototype.setOpacity=function(t){S("number"==typeof t,64),this.set(pl,t)},e.prototype.setVisible=function(t){this.set(dl,t)},e.prototype.setZIndex=function(t){this.set(fl,t)},e.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),t.prototype.disposeInternal.call(this)},e}(Sa),wl="loading",Sl="ready",Cl=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),El="layers",Tl=function(t){function e(e){var i=this,n=e||{},r=na({},n);delete r.layers;var o=n.layers;return(i=t.call(this,r)||this).layersListenerKeys_=[],i.listenerKeys_={},i.addEventListener(w(El),i.handleLayersChanged_),o?Array.isArray(o)?o=new Ta(o.slice(),{unique:!0}):S("function"==typeof o.getArray,43):o=new Ta(void 0,{unique:!0}),i.setLayers(o),i}return Cl(e,t),e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(h),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push(s(t,ta,this.handleLayersAdd_,this),s(t,ea,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(h);o(this.listenerKeys_);for(var i=t.getArray(),n=0,a=i.length;n<a;n++){var l=i[n];this.listenerKeys_[r(l)]=[s(l,ia,this.handleLayerChange_,this),s(l,ha,this.handleLayerChange_,this)]}this.changed()},e.prototype.handleLayersAdd_=function(t){var e=t.element;this.listenerKeys_[r(e)]=[s(e,ia,this.handleLayerChange_,this),s(e,ha,this.handleLayerChange_,this)],this.changed()},e.prototype.handleLayersRemove_=function(t){var e=r(t.element);this.listenerKeys_[e].forEach(h),delete this.listenerKeys_[e],this.changed()},e.prototype.getLayers=function(){return this.get(El)},e.prototype.setLayers=function(t){this.set(El,t)},e.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach(function(t){t.getLayersArray(e)}),e},e.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],i=e.length;this.getLayers().forEach(function(t){t.getLayerStatesArray(e)});for(var n=this.getLayerState(),r=i,o=e.length;r<o;r++){var a=e[r];a.opacity*=n.opacity,a.visible=a.visible&&n.visible,a.maxResolution=Math.min(a.maxResolution,n.maxResolution),a.minResolution=Math.max(a.minResolution,n.minResolution),a.minZoom=Math.max(a.minZoom,n.minZoom),a.maxZoom=Math.min(a.maxZoom,n.maxZoom),void 0!==n.extent&&(a.extent=void 0!==a.extent?H(a.extent,n.extent):n.extent)}return e},e.prototype.getSourceState=function(){return Sl},e}(bl),Pl=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ll=function(t){function e(e){var i=t.call(this)||this,n=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var i,n,r,o={},a=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new Tl({layers:t.layers});return o[Qs]=a,o[el]=t.target,o[il]=void 0!==t.view?t.view:new cl,void 0!==t.controls&&(Array.isArray(t.controls)?i=new Ta(t.controls.slice()):(S("function"==typeof t.controls.getArray,47),i=t.controls)),void 0!==t.interactions&&(Array.isArray(t.interactions)?n=new Ta(t.interactions.slice()):(S("function"==typeof t.interactions.getArray,48),n=t.interactions)),void 0!==t.overlays?Array.isArray(t.overlays)?r=new Ta(t.overlays.slice()):(S("function"==typeof t.overlays.getArray,49),r=t.overlays):r=new Ta,{controls:i,interactions:n,keyboardEventTarget:e,overlays:r,values:o}}(e);i.boundHandleBrowserEvent_=i.handleBrowserEvent.bind(i),i.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,i.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:Bs,i.animationDelay_=(function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}).bind(i),i.coordinateToPixelTransform_=[1,0,0,1,0,0],i.pixelToCoordinateTransform_=[1,0,0,1,0,0],i.frameIndex_=0,i.frameState_=null,i.previousExtent_=null,i.viewPropertyListenerKey_=null,i.viewChangeListenerKey_=null,i.layerGroupPropertyListenerKeys_=null,i.viewport_=document.createElement("div"),i.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),i.viewport_.style.position="relative",i.viewport_.style.overflow="hidden",i.viewport_.style.width="100%",i.viewport_.style.height="100%",i.overlayContainer_=document.createElement("div"),i.overlayContainer_.style.position="absolute",i.overlayContainer_.style.zIndex="0",i.overlayContainer_.style.width="100%",i.overlayContainer_.style.height="100%",i.overlayContainer_.className="ol-overlaycontainer",i.viewport_.appendChild(i.overlayContainer_),i.overlayContainerStopEvent_=document.createElement("div"),i.overlayContainerStopEvent_.style.position="absolute",i.overlayContainerStopEvent_.style.zIndex="0",i.overlayContainerStopEvent_.style.width="100%",i.overlayContainerStopEvent_.style.height="100%",i.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",i.viewport_.appendChild(i.overlayContainerStopEvent_),i.mapBrowserEventHandler_=new $s(i,e.moveTolerance);var r=i.handleMapBrowserEvent.bind(i);for(var o in Us)i.mapBrowserEventHandler_.addEventListener(Us[o],r);i.keyboardEventTarget_=n.keyboardEventTarget,i.keyHandlerKeys_=null;var a=i.handleBrowserEvent.bind(i);return i.viewport_.addEventListener(ca,a,!1),i.viewport_.addEventListener(ya,a,!!Ws&&{passive:!1}),i.controls=n.controls||new Ta,i.interactions=n.interactions||new Ta,i.overlays_=n.overlays,i.overlayIdIndex_={},i.renderer_=null,i.postRenderFunctions_=[],i.tileQueue_=new hl(i.getTilePriority.bind(i),i.handleTileChange_.bind(i)),i.addEventListener(w(Qs),i.handleLayerGroupChanged_),i.addEventListener(w(il),i.handleViewChanged_),i.addEventListener(w(tl),i.handleSizeChanged_),i.addEventListener(w(el),i.handleTargetChanged_),i.setProperties(n.values),i.controls.forEach((function(t){t.setMap(this)}).bind(i)),i.controls.addEventListener(ta,(function(t){t.element.setMap(this)}).bind(i)),i.controls.addEventListener(ea,(function(t){t.element.setMap(null)}).bind(i)),i.interactions.forEach((function(t){t.setMap(this)}).bind(i)),i.interactions.addEventListener(ta,(function(t){t.element.setMap(this)}).bind(i)),i.interactions.addEventListener(ea,(function(t){t.element.setMap(null)}).bind(i)),i.overlays_.forEach(i.addOverlayInternal_.bind(i)),i.overlays_.addEventListener(ta,(function(t){this.addOverlayInternal_(t.element)}).bind(i)),i.overlays_.addEventListener(ea,(function(t){var e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)}).bind(i)),i}return Pl(e,t),e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.mapBrowserEventHandler_.dispose(),this.viewport_.removeEventListener(ca,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(ya,this.boundHandleBrowserEvent_),void 0!==this.handleResize_&&(removeEventListener("resize",this.handleResize_,!1),this.handleResize_=void 0),this.setTarget(null),t.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,e,i){if(this.frameState_){var n=this.getCoordinateFromPixelInternal(t),r=void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance*this.frameState_.pixelRatio:0;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,r,!1!==i.checkWrapped,e,null,void 0!==i.layerFilter?i.layerFilter:m,null)}},e.prototype.getFeaturesAtPixel=function(t,e){var i=[];return this.forEachFeatureAtPixel(t,function(t){i.push(t)},e),i},e.prototype.forEachLayerAtPixel=function(t,e,i){if(this.frameState_){var n=i||{};return this.renderer_.forEachLayerAtPixel(t,this.frameState_,void 0!==n.hitTolerance?n.hitTolerance*this.frameState_.pixelRatio:0,e,n.layerFilter||m)}},e.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;var i=this.getCoordinateFromPixelInternal(t),n=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:m;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,void 0!==e.hitTolerance?e.hitTolerance*this.frameState_.pixelRatio:0,!1!==e.checkWrapped,n,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),i="changedTouches"in t?t.changedTouches[0]:t;return[i.clientX-e.left,i.clientY-e.top]},e.prototype.getTarget=function(){return this.get(el)},e.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){return Mt(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},e.prototype.getCoordinateFromPixelInternal=function(t){var e=this.frameState_;return e?zt(e.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(Qs)},e.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},e.prototype.getLoading=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,i=t.length;e<i;++e){var n=t[e].layer.getSource();if(n&&n.loading)return!0}return!1},e.prototype.getPixelFromCoordinate=function(t){var e=Ft(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)},e.prototype.getPixelFromCoordinateInternal=function(t){var e=this.frameState_;return e?zt(e.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get(tl)},e.prototype.getView=function(){return this.get(il)},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getTilePriority=function(t,e,i,n){return function(t,e,i,n,r){if(!(t&&i in t.wantedTiles))return 1/0;if(!t.wantedTiles[i][e.getKey()])return 1/0;var o=t.viewState.center,a=n[0]-o[0],s=n[1]-o[1];return 65536*Math.log(r)+Math.sqrt(a*a+s*s)/r}(this.frameState_,t,e,i,n)},e.prototype.handleBrowserEvent=function(t,e){var i=new Ns(e||t.type,this,t);this.handleMapBrowserEvent(i)},e.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){var e=t.originalEvent.target;if(t.dragging||!this.overlayContainerStopEvent_.contains(e)&&(document.body.contains(e)||this.viewport_.getRootNode&&this.viewport_.getRootNode().contains(e))){t.frameState=this.frameState_;var i=this.getInteractions().getArray();if(!1!==this.dispatchEvent(t))for(var n=i.length-1;n>=0;n--){var r=i[n];if(r.getActive()&&!r.handleEvent(t))break}}}},e.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var i=this.maxTilesLoading_,n=i;if(t){var r=t.viewHints;if(r[0]||r[1]){var o=!Xs&&Date.now()-t.time>8;i=o?0:8,n=o?0:2}}e.getTilesLoading()<i&&(e.reprioritize(),e.loadMoreTiles(i,n))}!t||!this.hasListener("rendercomplete")||t.animate||this.tileQueue_.getTilesLoading()||this.getLoading()||this.renderer_.dispatchRenderEvent("rendercomplete",t);for(var a=this.postRenderFunctions_,s=0,l=a.length;s<l;++s)a[s](this,t);a.length=0},e.prototype.handleSizeChanged_=function(){this.getView()&&this.getView().resolveConstraints(0),this.render()},e.prototype.handleTargetChanged_=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.keyHandlerKeys_){for(var e=0,i=this.keyHandlerKeys_.length;e<i;++e)h(this.keyHandlerKeys_[e]);this.keyHandlerKeys_=null}if(t){t.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer());var n=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[s(n,da,this.handleBrowserEvent,this),s(n,fa,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener("resize",this.handleResize_,!1))}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0),ei(this.viewport_),void 0!==this.handleResize_&&(removeEventListener("resize",this.handleResize_,!1),this.handleResize_=void 0);this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(h(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(h(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=s(t,ia,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=s(t,ha,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(h),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[s(t,ia,this.render,this),s(t,ha,this.render,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,i=t.length;e<i;++e){var n=t[e].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}},e.prototype.render=function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.renderFrame_=function(t){var e=this.getSize(),i=this.getView(),n=this.frameState_,r=null;if(void 0!==e&&e[0]>0&&e[1]>0&&i&&i.isDef()){var o=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterItems:n?n.declutterItems:[],extent:U(a.center,a.resolution,a.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{}}}this.frameState_=r,this.renderer_.renderFrame(r),r&&(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),n&&(!this.previousExtent_||!$(this.previousExtent_)&&!N(r.extent,this.previousExtent_))&&(this.dispatchEvent(new Fs("movestart",this,n)),this.previousExtent_=M(this.previousExtent_)),this.previousExtent_&&!r.viewHints[0]&&!r.viewHints[1]&&!N(r.extent,this.previousExtent_)&&(this.dispatchEvent(new Fs("moveend",this,r)),T(r.extent,this.previousExtent_))),this.dispatchEvent(new Fs("postrender",this,r)),this.postRenderTimeoutHandle_=setTimeout(this.handlePostRender.bind(this),0)},e.prototype.setLayerGroup=function(t){this.set(Qs,t)},e.prototype.setSize=function(t){this.set(tl,t)},e.prototype.setTarget=function(t){this.set(el,t)},e.prototype.setView=function(t){this.set(il,t)},e.prototype.updateSize=function(){var t=this.getTargetElement();if(t){var e=getComputedStyle(t);this.setSize([t.offsetWidth-parseFloat(e.borderLeftWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderRightWidth),t.offsetHeight-parseFloat(e.borderTopWidth)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)-parseFloat(e.borderBottomWidth)])}else this.setSize(void 0);this.updateViewportSize_()},e.prototype.updateViewportSize_=function(){var t=this.getView();if(t){var e=void 0,i=getComputedStyle(this.viewport_);i.width&&i.height&&(e=[parseInt(i.width,10),parseInt(i.height,10)]),t.setViewportSize(e)}},e}(Sa),Il=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ol=function(t){function e(e){var i=t.call(this)||this;return i.element=e.element?e.element:null,i.target_=null,i.map_=null,i.listenerKeys=[],i.render_=e.render?e.render:x,e.target&&i.setTarget(e.target),i}return Il(e,t),e.prototype.disposeInternal=function(){ei(this.element),t.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&ei(this.element);for(var e=0,i=this.listenerKeys.length;e<i;++e)h(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,this.map_&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==x&&this.listenerKeys.push(s(t,"postrender",this.render,this)),t.render())},e.prototype.render=function(t){this.render_.call(this,t)},e.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},e}(Sa),Al=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),Rl=["style","variant","weight","size","lineHeight","family"],Ml=function(t){var e=t.match(Al);if(!e)return null;for(var i={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},n=0,r=Rl.length;n<r;++n){var o=e[n+1];void 0!==o&&(i[Rl[n]]=o)}return i.families=i.family.split(/,\s?/),i},Fl=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),kl=function(t){function e(e){var i=this,n=na({},e);return delete n.source,(i=t.call(this,n)||this).mapPrecomposeKey_=null,i.mapRenderKey_=null,i.sourceChangeKey_=null,i.renderer_=null,e.render&&(i.render=e.render),e.map&&i.setMap(e.map),i.addEventListener(w(_l),i.handleSourcePropertyChange_),i.setSource(e.source?e.source:null),i}return Fl(e,t),e.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},e.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},e.prototype.getSource=function(){return this.get(_l)||null},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():"undefined"},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(h(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=s(t,ha,this.handleSourceChange_,this)),this.changed()},e.prototype.getFeatures=function(t){return this.renderer_.getFeatures(t)},e.prototype.render=function(t,e){var i=this.getRenderer();if(i.prepareFrame(t))return i.renderFrame(t,e)},e.prototype.setMap=function(t){this.mapPrecomposeKey_&&(h(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(h(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=s(t,"precompose",function(t){var e=t.frameState.layerStatesArray,i=this.getLayerState(!1);S(!e.some(function(t){return t.layer===i.layer}),67),e.push(i)},this),this.mapRenderKey_=s(this,ha,t.render,t),this.changed())},e.prototype.setSource=function(t){this.set(_l,t)},e.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},e.prototype.hasRenderer=function(){return!!this.renderer_},e.prototype.createRenderer=function(){return null},e.prototype.disposeInternal=function(){this.setSource(null),t.prototype.disposeInternal.call(this)},e}(bl),Nl=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Dl=function(t){function e(e){var i=this,n=e||{};(i=t.call(this,{element:document.createElement("div"),render:n.render||function(t){this.updateElement_(t.frameState)},target:n.target})||this).ulElement_=document.createElement("ul"),i.collapsed_=void 0===n.collapsed||n.collapsed,i.overrideCollapsible_=void 0!==n.collapsible,i.collapsible_=void 0===n.collapsible||n.collapsible,i.collapsible_||(i.collapsed_=!1);var r=void 0!==n.className?n.className:"ol-attribution",o=void 0!==n.tipLabel?n.tipLabel:"Attributions",a=void 0!==n.collapseLabel?n.collapseLabel:"\xbb";"string"==typeof a?(i.collapseLabel_=document.createElement("span"),i.collapseLabel_.textContent=a):i.collapseLabel_=a;var s=void 0!==n.label?n.label:"i";"string"==typeof s?(i.label_=document.createElement("span"),i.label_.textContent=s):i.label_=s;var l=i.collapsible_&&!i.collapsed_?i.collapseLabel_:i.label_,h=document.createElement("button");h.setAttribute("type","button"),h.title=o,h.appendChild(l),h.addEventListener(pa,i.handleClick_.bind(i),!1);var u=i.element;return u.className=r+" ol-unselectable ol-control"+(i.collapsed_&&i.collapsible_?" ol-collapsed":"")+(i.collapsible_?"":" ol-uncollapsible"),u.appendChild(i.ulElement_),u.appendChild(h),i.renderedAttributions_=[],i.renderedVisible_=!0,i}return Nl(e,t),e.prototype.collectSourceAttributions_=function(t){for(var e={},i=[],n=t.layerStatesArray,r=0,o=n.length;r<o;++r){var a=n[r];if(ai(a,t.viewState)){var s=a.layer.getSource();if(s){var l=s.getAttributions();if(l){var h=l(t);if(h)if(this.overrideCollapsible_||!1!==s.getAttributionsCollapsible()||this.setCollapsible(!1),Array.isArray(h))for(var u=0,c=h.length;u<c;++u)h[u]in e||(i.push(h[u]),e[h[u]]=!0);else h in e||(i.push(h),e[h]=!0)}}}}return i},e.prototype.updateElement_=function(t){if(t){var e=this.collectSourceAttributions_(t),i=e.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!v(e,this.renderedAttributions_)){ii(this.ulElement_);for(var n=0,r=e.length;n<r;++n){var o=document.createElement("li");o.innerHTML=e[n],this.ulElement_.appendChild(o)}this.renderedAttributions_=e}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},e.prototype.handleToggle_=function(){this.element.classList.toggle("ol-collapsed"),this.collapsed_?ti(this.collapseLabel_,this.label_):ti(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e}(Ol),jl=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Gl=function(t){function e(e){var i=this,n=e||{};i=t.call(this,{element:document.createElement("div"),render:n.render||function(t){var e=t.frameState;if(e){var i=e.viewState.rotation;if(i!=this.rotation_){var n="rotate("+i+"rad)";if(this.autoHide_){var r=this.element.classList.contains("ol-hidden");r||0!==i?r&&0!==i&&this.element.classList.remove("ol-hidden"):this.element.classList.add("ol-hidden")}this.label_.style.transform=n}this.rotation_=i}},target:n.target})||this;var r=void 0!==n.className?n.className:"ol-rotate",o=void 0!==n.label?n.label:"\u21e7";i.label_=null,"string"==typeof o?(i.label_=document.createElement("span"),i.label_.className="ol-compass",i.label_.textContent=o):(i.label_=o,i.label_.classList.add("ol-compass"));var a=n.tipLabel?n.tipLabel:"Reset rotation",s=document.createElement("button");s.className=r+"-reset",s.setAttribute("type","button"),s.title=a,s.appendChild(i.label_),s.addEventListener(pa,i.handleClick_.bind(i),!1);var l=i.element;return l.className=r+" ol-unselectable ol-control",l.appendChild(s),i.callResetNorth_=n.resetNorth?n.resetNorth:void 0,i.duration_=void 0!==n.duration?n.duration:250,i.autoHide_=void 0===n.autoHide||n.autoHide,i.rotation_=void 0,i.autoHide_&&i.element.classList.add("ol-hidden"),i}return jl(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap().getView();if(t){var e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:qe}):t.setRotation(0))}},e}(Ol),zl=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Bl=function(t){function e(e){var i=this,n=e||{};i=t.call(this,{element:document.createElement("div"),target:n.target})||this;var r=void 0!==n.className?n.className:"ol-zoom",o=void 0!==n.delta?n.delta:1,a=void 0!==n.zoomInLabel?n.zoomInLabel:"+",s=void 0!==n.zoomOutLabel?n.zoomOutLabel:"\u2212",l=void 0!==n.zoomInTipLabel?n.zoomInTipLabel:"Zoom in",h=void 0!==n.zoomOutTipLabel?n.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=r+"-in",u.setAttribute("type","button"),u.title=l,u.appendChild("string"==typeof a?document.createTextNode(a):a),u.addEventListener(pa,i.handleClick_.bind(i,o),!1);var c=document.createElement("button");c.className=r+"-out",c.setAttribute("type","button"),c.title=h,c.appendChild("string"==typeof s?document.createTextNode(s):s),c.addEventListener(pa,i.handleClick_.bind(i,-o),!1);var p=i.element;return p.className=r+" ol-unselectable ol-control",p.appendChild(u),p.appendChild(c),i.duration_=void 0!==n.duration?n.duration:250,i}return zl(e,t),e.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var i=e.getZoom();if(void 0!==i){var n=e.getConstrainedZoom(i+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:n,duration:this.duration_,easing:qe})):e.setZoom(n)}}},e}(Ol),Yl="active",Xl=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Wl=function(t){function e(e){var i=t.call(this)||this;return e.handleEvent&&(i.handleEvent=e.handleEvent),i.map_=null,i.setActive(!0),i}return Xl(e,t),e.prototype.getActive=function(){return this.get(Yl)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(Yl,t)},e.prototype.setMap=function(t){this.map_=t},e}(Sa),Ul=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Vl=function(t){function e(e){var i=t.call(this,{handleEvent:hi})||this,n=e||{};return i.delta_=n.delta?n.delta:1,i.duration_=void 0!==n.duration?n.duration:250,i}return Ul(e,t),e}(Wl),Hl=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},ql=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Zl=function(t){return t.target.getTargetElement()===document.activeElement},Kl=m,Jl=function(t){var e=t.originalEvent;return 0==e.button&&!(Gs&&zs&&e.ctrlKey)},$l=_,Ql=function(t){return t.type==Us.SINGLECLICK},th=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},eh=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},ih=function(t){var e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},nh=function(t){var e=t.pointerEvent;return S(void 0!==e,56),"mouse"==e.pointerType},rh=function(t){var e=t.pointerEvent;return S(void 0!==e,56),e.isPrimary&&0===e.button},oh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ah=function(t){function e(e){var i=this,n=e||{};return i=t.call(this,n)||this,n.handleDownEvent&&(i.handleDownEvent=n.handleDownEvent),n.handleDragEvent&&(i.handleDragEvent=n.handleDragEvent),n.handleMoveEvent&&(i.handleMoveEvent=n.handleMoveEvent),n.handleUpEvent&&(i.handleUpEvent=n.handleUpEvent),n.stopDown&&(i.stopDown=n.stopDown),i.handlingDownUpSequence=!1,i.trackedPointers_={},i.targetPointers=[],i}return oh(e,t),e.prototype.getPointerCount=function(){return this.targetPointers.length},e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.pointerEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Us.POINTERDRAG)this.handleDragEvent(t);else if(t.type==Us.POINTERUP){var i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==Us.POINTERDOWN){var n=this.handleDownEvent(t);this.handlingDownUpSequence=n,e=this.stopDown(n)}else t.type==Us.POINTERMOVE&&this.handleMoveEvent(t);return!e},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.updateTrackedPointers_=function(t){if(function(e){var i=t.type;return i===Us.POINTERDOWN||i===Us.POINTERDRAG||i===Us.POINTERUP}()){var e=t.pointerEvent,i=e.pointerId.toString();t.type==Us.POINTERUP?delete this.trackedPointers_[i]:(t.type==Us.POINTERDOWN||i in this.trackedPointers_)&&(this.trackedPointers_[i]=e),this.targetPointers=ra(this.trackedPointers_)}},e}(Wl),sh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),lh=function(t){function e(e){var i=t.call(this,{stopDown:_})||this,n=e||{};return i.kinetic_=n.kinetic,i.lastCentroid=null,i.panning_=!1,i.condition_=n.condition?n.condition:ci,i.noKinetic_=!1,i}return sh(e,t),e.prototype.conditionInternal_=function(t){var e=!0;return t.map.getTargetElement().hasAttribute("tabindex")&&(e=Zl(t)),e&&this.condition_(t)},e.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var e=this.targetPointers,i=ui(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){var n=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],r=t.map.getView();Be(n,r.getResolution()),ze(n,r.getRotation()),r.adjustCenterInternal(n)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=e.length,t.originalEvent.preventDefault()},e.prototype.handleUpEvent=function(t){var e=t.map,i=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var n=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),o=i.getCenterInternal(),a=e.getPixelFromCoordinateInternal(o),s=e.getCoordinateFromPixelInternal([a[0]-n*Math.cos(r),a[1]-n*Math.sin(r)]);i.animateInternal({center:i.getConstrainedCenter(s),duration:500,easing:qe})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.conditionInternal_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},e}(ah),hh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),uh=function(t){function e(e){var i=this,n=e||{};return(i=t.call(this,{stopDown:_})||this).condition_=n.condition?n.condition:ql,i.lastAngle_=void 0,i.duration_=void 0!==n.duration?n.duration:250,i}return hh(e,t),e.prototype.handleDragEvent=function(t){if(nh(t)){var e=t.map,i=e.getView();if(i.getConstraints().rotation!==Ae){var n=e.getSize(),r=t.pixel,o=Math.atan2(n[1]/2-r[1],r[0]-n[0]/2);void 0!==this.lastAngle_&&i.adjustRotationInternal(-(o-this.lastAngle_)),this.lastAngle_=o}}},e.prototype.handleUpEvent=function(t){return!nh(t)||(t.map.getView().endInteraction(this.duration_),!1)},e.prototype.handleDownEvent=function(t){return!(!nh(t)||!Jl(t)||!this.condition_(t)||(t.map.getView().beginInteraction(),this.lastAngle_=void 0,0))},e}(ah),ch=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ph=function(t){function e(e){var i=t.call(this)||this;return i.geometry_=null,i.element_=document.createElement("div"),i.element_.style.position="absolute",i.element_.className="ol-box "+e,i.map_=null,i.startPixel_=null,i.endPixel_=null,i}return ch(e,t),e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,i=this.element_.style;i.left=Math.min(t[0],e[0])+"px",i.top=Math.min(t[1],e[1])+"px",i.width=Math.abs(e[0]-t[0])+"px",i.height=Math.abs(e[1]-t[1])+"px"},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,i=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new Ts([i])},e.prototype.getGeometry=function(){return this.geometry_},e}(oa),dh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),fh=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.coordinate=i,r.mapBrowserEvent=n,r}return dh(e,t),e}(aa),gh=function(t){function e(e){var i=t.call(this)||this,n=e||{};return i.box_=new ph(n.className||"ol-dragbox"),i.minArea_=void 0!==n.minArea?n.minArea:64,i.onBoxEnd_=n.onBoxEnd?n.onBoxEnd:x,i.startPixel_=null,i.condition_=n.condition?n.condition:Jl,i.boxEndCondition_=n.boxEndCondition?n.boxEndCondition:i.defaultBoxEndCondition,i}return dh(e,t),e.prototype.defaultBoxEndCondition=function(t,e,i){var n=i[0]-e[0],r=i[1]-e[1];return n*n+r*r>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new fh("boxdrag",t.coordinate,t))},e.prototype.handleUpEvent=function(t){return this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd_(t),this.dispatchEvent(new fh("boxend",t.coordinate,t))),!1},e.prototype.handleDownEvent=function(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new fh("boxstart",t.coordinate,t)),!0)},e}(ah),vh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),yh=function(t){function e(e){var i=this,n=e||{};return(i=t.call(this,{condition:n.condition?n.condition:eh,className:n.className||"ol-dragzoom",minArea:n.minArea,onBoxEnd:pi})||this).duration_=void 0!==n.duration?n.duration:200,i.out_=void 0!==n.out&&n.out,i}return vh(e,t),e}(gh),mh=37,_h=38,xh=39,bh=40,wh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Sh=function(t){function e(e){var i=t.call(this,{handleEvent:di})||this,n=e||{};return i.defaultCondition_=function(t){return th(t)&&ih(t)},i.condition_=void 0!==n.condition?n.condition:i.defaultCondition_,i.duration_=void 0!==n.duration?n.duration:100,i.pixelDelta_=void 0!==n.pixelDelta?n.pixelDelta:128,i}return wh(e,t),e}(Wl),Ch=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Eh=function(t){function e(e){var i=t.call(this,{handleEvent:fi})||this,n=e||{};return i.condition_=n.condition?n.condition:ih,i.delta_=n.delta?n.delta:1,i.duration_=void 0!==n.duration?n.duration:100,i}return Ch(e,t),e}(Wl),Th=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ph=function(t){function e(e){var i=this,n=e||{};return(i=t.call(this,n)||this).totalDelta_=0,i.lastDelta_=0,i.maxDelta_=void 0!==n.maxDelta?n.maxDelta:1,i.duration_=void 0!==n.duration?n.duration:250,i.timeout_=void 0!==n.timeout?n.timeout:80,i.useAnchor_=void 0===n.useAnchor||n.useAnchor,i.condition_=n.condition?n.condition:Kl,i.lastAnchor_=null,i.startTime_=void 0,i.mode_=void 0,i.trackpadEventGap_=400,i.deltaPerZoom_=300,i}return Th(e,t),e.prototype.conditionInternal_=function(t){var e=!0;return t.map.getTargetElement().hasAttribute("tabindex")&&(e=Zl(t)),e&&this.condition_(t)},e.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},e.prototype.handleEvent=function(t){if(!this.conditionInternal_(t))return!0;if(t.type!==ya)return!0;t.preventDefault();var e,i=t.map,n=t.originalEvent;if(this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==ya&&(e=n.deltaY,js&&n.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(e/=Bs),n.deltaMode===WheelEvent.DOM_DELTA_LINE&&(e*=40)),0===e)return!1;this.lastDelta_=e;var r=Date.now();void 0===this.startTime_&&(this.startTime_=r),(!this.mode_||r-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(e)<4?"trackpad":"wheel");var o=i.getView();if("trackpad"===this.mode_&&!o.getConstrainResolution())return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-e/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=r,!1;this.totalDelta_+=e;var a=Math.max(this.timeout_-(r-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),a),!1},e.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var i=-ot(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;e.getConstrainResolution()&&(i=i?i>0?1:-1:0),li(e,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(Wl),Lh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ih=function(t){function e(e){var i=this,n=e||{},r=n;return r.stopDown||(r.stopDown=_),(i=t.call(this,r)||this).anchor_=null,i.lastAngle_=void 0,i.rotating_=!1,i.rotationDelta_=0,i.threshold_=void 0!==n.threshold?n.threshold:.3,i.duration_=void 0!==n.duration?n.duration:250,i}return Lh(e,t),e.prototype.handleDragEvent=function(t){var e=0,i=this.targetPointers[0],n=this.targetPointers[1],r=Math.atan2(n.clientY-i.clientY,n.clientX-i.clientX);if(void 0!==this.lastAngle_){var o=r-this.lastAngle_;this.rotationDelta_+=o,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=o}this.lastAngle_=r;var a=t.map,s=a.getView();if(s.getConstraints().rotation!==Ae){var l=a.getViewport().getBoundingClientRect(),h=ui(this.targetPointers);h[0]-=l.left,h[1]-=l.top,this.anchor_=a.getCoordinateFromPixelInternal(h),this.rotating_&&(a.render(),s.adjustRotationInternal(e,this.anchor_))}},e.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2&&(t.map.getView().endInteraction(this.duration_),1))},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(ah),Oh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ah=function(t){function e(e){var i=this,n=e||{},r=n;return r.stopDown||(r.stopDown=_),(i=t.call(this,r)||this).anchor_=null,i.duration_=void 0!==n.duration?n.duration:400,i.lastDistance_=void 0,i.lastScaleDelta_=1,i}return Oh(e,t),e.prototype.handleDragEvent=function(t){var e=1,i=this.targetPointers[0],n=this.targetPointers[1],r=i.clientX-n.clientX,o=i.clientY-n.clientY,a=Math.sqrt(r*r+o*o);void 0!==this.lastDistance_&&(e=this.lastDistance_/a),this.lastDistance_=a;var s=t.map,l=s.getView();1!=e&&(this.lastScaleDelta_=e);var h=s.getViewport().getBoundingClientRect(),u=ui(this.targetPointers);u[0]-=h.left,u[1]-=h.top,this.anchor_=s.getCoordinateFromPixelInternal(u),s.render(),l.adjustResolutionInternal(e,this.anchor_)},e.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2&&(t.map.getView().endInteraction(this.duration_,this.lastScaleDelta_>1?1:-1),1))},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(ah),Rh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Mh=function(t){function e(e,i,n,r){var o=t.call(this,e)||this;return o.inversePixelTransform=i,o.frameState=n,o.context=r,o}return Rh(e,t),e}(aa),Fh=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,kh=/^([a-z]*)$|^hsla?\(.*\)$/i,Nh=(ps={},ds=0,function(t){var e;if(ps.hasOwnProperty(t))e=ps[t];else{if(ds>=1024){var i=0;for(var n in ps)0==(3&i++)&&(delete ps[n],--ds)}e=function(t){var e,i,n,r,o;if(kh.exec(t)&&(t=function(t){var e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);var i=getComputedStyle(e).color;return document.body.removeChild(e),i}return""}(t)),Fh.exec(t)){var a=t.length-1,s=void 0;s=a<=4?1:2;var l=4===a||8===a;e=parseInt(t.substr(1+0*s,s),16),i=parseInt(t.substr(1+1*s,s),16),n=parseInt(t.substr(1+2*s,s),16),r=l?parseInt(t.substr(1+3*s,s),16):255,1==s&&(e=(e<<4)+e,i=(i<<4)+i,n=(n<<4)+n,l&&(r=(r<<4)+r)),o=[e,i,n,r/255]}else 0==t.indexOf("rgba(")?mi(o=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((o=t.slice(4,-1).split(",").map(Number)).push(1),mi(o)):S(!1,14);return o}(t),ps[t]=e,++ds}return e}),Dh=new(function(){function t(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return t.prototype.clear=function(){this.cache_={},this.cacheSize_=0},t.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},t.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var e in this.cache_)0!=(3&t++)||this.cache_[e].hasListener()||(delete this.cache_[e],--this.cacheSize_)}},t.prototype.get=function(t,e,i){var n=xi(t,e,i);return n in this.cache_?this.cache_[n]:null},t.prototype.set=function(t,e,i,n){var r=xi(t,e,i);this.cache_[r]=n,++this.cacheSize_},t.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()},t}()),jh=function(){function t(){}return t.prototype.drawCustom=function(t,e,i){},t.prototype.drawGeometry=function(t){},t.prototype.setStyle=function(t){},t.prototype.drawCircle=function(t,e){},t.prototype.drawFeature=function(t,e){},t.prototype.drawGeometryCollection=function(t,e){},t.prototype.drawLineString=function(t,e){},t.prototype.drawMultiLineString=function(t,e){},t.prototype.drawMultiPoint=function(t,e){},t.prototype.drawMultiPolygon=function(t,e){},t.prototype.drawPoint=function(t,e){},t.prototype.drawPolygon=function(t,e){},t.prototype.drawText=function(t,e){},t.prototype.setFillStrokeStyle=function(t,e){},t.prototype.setImageStyle=function(t,e){},t.prototype.setTextStyle=function(t,e){},t}(),Gh=[],zh=[0,0,0,0],Bh=new Sa,Yh=new la;Yh.setSize=function(){console.warn("labelCache is deprecated.")};var Xh,Wh,Uh,Vh,Hh=null,qh={},Zh=function(){function t(t,e,i){for(var o=!0,l=0;l<a;++l){var h=r[l];if(n=Si(t+" "+e+" 32px "+h,s),i!=h){var u=Si(t+" "+e+" 32px "+i+","+h,s);o=o&&u!=n}}return!!o}function e(){for(var e=!0,n=Bh.getKeys(),r=0,a=n.length;r<a;++r){var s=n[r];Bh.get(s)<100&&(t.apply(this,s.split("\n"))?(o(qh),Hh=null,Xh=void 0,Bh.set(s,100)):(Bh.set(s,Bh.get(s)+1,!0),e=!1))}e&&(clearInterval(i),i=void 0)}var i,n,r=["monospace","serif"],a=r.length,s="wmytzilWMYTZIL@#/&?$%10\uf013";return function(n){var r=Ml(n);if(r)for(var o=r.families,a=0,s=o.length;a<s;++a){var l=o[a],h=r.style+"\n"+r.weight+"\n"+l;void 0===Bh.get(h)&&(Bh.set(h,100,!0),t(r.style,r.weight,l)||(Bh.set(h,0,!0),void 0===i&&(i=setInterval(e,32))))}}}(),Kh=(Uh=qh,function(t){var e=Uh[t];if(null==e)if(Ys){var i=Ml(t),n=wi(t,"\u017dg"),r=isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight);qh[t]=r*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else Wh||((Wh=document.createElement("div")).innerHTML="M",Wh.style.margin="0 !important",Wh.style.padding="0 !important",Wh.style.position="absolute !important",Wh.style.left="-99999px !important"),Wh.style.font=t,document.body.appendChild(Wh),e=Wh.offsetHeight,Uh[t]=e,document.body.removeChild(Wh);return e}),Jh=null,$h=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Qh=function(t){function e(e,i,n,r,o,a,s){var l=t.call(this)||this;return l.context_=e,l.pixelRatio_=i,l.extent_=n,l.transform_=r,l.viewRotation_=o,l.squaredTolerance_=a,l.userTransform_=s,l.contextFillState_=null,l.contextStrokeState_=null,l.contextTextState_=null,l.fillState_=null,l.strokeState_=null,l.image_=null,l.imageAnchorX_=0,l.imageAnchorY_=0,l.imageHeight_=0,l.imageOpacity_=0,l.imageOriginX_=0,l.imageOriginY_=0,l.imageRotateWithView_=!1,l.imageRotation_=0,l.imageScale_=0,l.imageWidth_=0,l.text_="",l.textOffsetX_=0,l.textOffsetY_=0,l.textRotateWithView_=!1,l.textRotation_=0,l.textScale_=0,l.textFillState_=null,l.textStrokeState_=null,l.textState_=null,l.pixelCoordinates_=[],l.tmpLocalTransform_=[1,0,0,1,0,0],l}return $h(e,t),e.prototype.drawImages_=function(t,e,i,n){if(this.image_){var r=it(t,e,i,2,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,s=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=s*this.imageOpacity_);var l=this.imageRotation_;this.imageRotateWithView_&&(l+=this.viewRotation_);for(var h=0,u=r.length;h<u;h+=2){var c=r[h]-this.imageAnchorX_,p=r[h+1]-this.imageAnchorY_;if(0!==l||1!=this.imageScale_){var d=c+this.imageAnchorX_,f=p+this.imageAnchorY_;Yt(a,d,f,this.imageScale_,this.imageScale_,l,-d,-f),o.setTransform.apply(o,a)}o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,c,p,this.imageWidth_,this.imageHeight_)}0===l&&1==this.imageScale_||o.setTransform(1,0,0,1,0,0),1!=this.imageOpacity_&&(o.globalAlpha=s)}},e.prototype.drawText_=function(t,e,i,n){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var r=it(t,e,i,n,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.textRotation_;for(this.textRotateWithView_&&(a+=this.viewRotation_);e<i;e+=n){var s=r[e]+this.textOffsetX_,l=r[e+1]+this.textOffsetY_;if(0!==a||1!=this.textScale_){var h=Yt(this.tmpLocalTransform_,s,l,this.textScale_,this.textScale_,a,-s,-l);o.setTransform.apply(o,h)}this.textStrokeState_&&o.strokeText(this.text_,s,l),this.textFillState_&&o.fillText(this.text_,s,l)}0===a&&1==this.textScale_||o.setTransform(1,0,0,1,0,0)}},e.prototype.moveToLineTo_=function(t,e,i,n,r){var o=this.context_,a=it(t,e,i,n,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);var s=a.length;r&&(s-=2);for(var l=2;l<s;l+=2)o.lineTo(a[l],a[l+1]);return r&&o.closePath(),i},e.prototype.drawRings_=function(t,e,i,n){for(var r=0,o=i.length;r<o;++r)e=this.moveToLineTo_(t,e,i[r],n,!0);return e},e.prototype.drawCircle=function(t){if(J(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=function(t,e,i){var n=t.getFlatCoordinates();if(n){var r=t.getStride();return it(n,0,n.length,r,e,i)}return null}(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],n=e[3]-e[1],r=Math.sqrt(i*i+n*n),o=this.context_;o.beginPath(),o.arc(e[0],e[1],r,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.setTransform=function(t){this.transform_=t},e.prototype.drawGeometry=function(t){switch(t.getType()){case Xa.POINT:this.drawPoint(t);break;case Xa.LINE_STRING:this.drawLineString(t);break;case Xa.POLYGON:this.drawPolygon(t);break;case Xa.MULTI_POINT:this.drawMultiPoint(t);break;case Xa.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case Xa.MULTI_POLYGON:this.drawMultiPolygon(t);break;case Xa.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case Xa.CIRCLE:this.drawCircle(t)}},e.prototype.drawFeature=function(t,e){var i=e.getGeometryFunction()(t);i&&J(this.extent_,i.getExtent())&&(this.setStyle(e),this.drawGeometry(i))},e.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),i=0,n=e.length;i<n;++i)this.drawGeometry(e[i])},e.prototype.drawPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawMultiPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawLineString=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),J(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var n=t.getFlatMidpoint();this.drawText_(n,0,2,2)}}},e.prototype.drawMultiLineString=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getExtent();if(J(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,n=t.getFlatCoordinates(),r=0,o=t.getEnds(),a=t.getStride();i.beginPath();for(var s=0,l=o.length;s<l;++s)r=this.moveToLineTo_(n,r,o[s],a,!1);i.stroke()}if(""!==this.text_){var h=t.getFlatMidpoints();this.drawText_(h,0,h.length,2)}}},e.prototype.drawPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),J(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var i=t.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),J(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getOrientedFlatCoordinates(),n=0,r=t.getEndss(),o=t.getStride();e.beginPath();for(var a=0,s=r.length;a<s;++a)n=this.drawRings_(i,n,r[a],o);this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var l=t.getFlatInteriorPoints();this.drawText_(l,0,l.length,2)}}},e.prototype.setContextFillState_=function(t){var e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),e.setLineDash&&(v(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset)),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var e=this.context_,i=this.contextTextState_,n=t.textAlign?t.textAlign:"center";i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=n&&(i.textAlign=n,e.textAlign=n),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=n,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:n,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,e){if(t){var i=t.getColor();this.fillState_={fillStyle:bi(i||"#000")}}else this.fillState_=null;if(e){var n=e.getColor(),r=e.getLineCap(),o=e.getLineDash(),a=e.getLineDashOffset(),s=e.getLineJoin(),l=e.getWidth(),h=e.getMiterLimit();this.strokeState_={lineCap:void 0!==r?r:"round",lineDash:o||Gh,lineDashOffset:a||0,lineJoin:void 0!==s?s:"round",lineWidth:this.pixelRatio_*(void 0!==l?l:1),miterLimit:void 0!==h?h:10,strokeStyle:bi(n||"#000")}}else this.strokeState_=null},e.prototype.setImageStyle=function(t){if(t){var e=t.getAnchor(),i=t.getImage(1),n=t.getOrigin(),r=t.getSize();this.imageAnchorX_=e[0],this.imageAnchorY_=e[1],this.imageHeight_=r[1],this.image_=i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=n[0],this.imageOriginY_=n[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScale()*this.pixelRatio_,this.imageWidth_=r[0]}else this.image_=null},e.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var i=e.getColor();this.textFillState_={fillStyle:bi(i||"#000")}}else this.textFillState_=null;var n=t.getStroke();if(n){var r=n.getColor(),o=n.getLineCap(),a=n.getLineDash(),s=n.getLineDashOffset(),l=n.getLineJoin(),h=n.getWidth(),u=n.getMiterLimit();this.textStrokeState_={lineCap:void 0!==o?o:"round",lineDash:a||Gh,lineDashOffset:s||0,lineJoin:void 0!==l?l:"round",lineWidth:void 0!==h?h:1,miterLimit:void 0!==u?u:10,strokeStyle:bi(r||"#000")}}else this.textStrokeState_=null;var c=t.getFont(),p=t.getOffsetX(),d=t.getOffsetY(),f=t.getRotateWithView(),g=t.getRotation(),v=t.getScale(),y=t.getText(),m=t.getTextAlign(),_=t.getTextBaseline();this.textState_={font:void 0!==c?c:"10px sans-serif",textAlign:void 0!==m?m:"center",textBaseline:void 0!==_?_:"middle"},this.text_=void 0!==y?y:"",this.textOffsetX_=void 0!==p?this.pixelRatio_*p:0,this.textOffsetY_=void 0!==d?this.pixelRatio_*d:0,this.textRotateWithView_=void 0!==f&&f,this.textRotation_=void 0!==g?g:0,this.textScale_=this.pixelRatio_*(void 0!==v?v:1)}else this.text_=""},e}(jh),tu=0,eu=2,iu=3,nu=4,ru="Default",ou="Image",au="LineString",su="Text",lu={Point:function(t,e,i,n){var r=i.getImage();if(r){if(r.getImageState()!=eu)return;var o=t.getBuilder(i.getZIndex(),ou);o.setImageStyle(r,t.addDeclutter(!1)),o.drawPoint(e,n)}var a=i.getText();if(a){var s=t.getBuilder(i.getZIndex(),su);s.setTextStyle(a,t.addDeclutter(!!r)),s.drawText(e,n)}},LineString:function(t,e,i,n){var r=i.getStroke();if(r){var o=t.getBuilder(i.getZIndex(),au);o.setFillStrokeStyle(null,r),o.drawLineString(e,n)}var a=i.getText();if(a){var s=t.getBuilder(i.getZIndex(),su);s.setTextStyle(a,t.addDeclutter(!1)),s.drawText(e,n)}},Polygon:function(t,e,i,n){var r=i.getFill(),o=i.getStroke();if(r||o){var a=t.getBuilder(i.getZIndex(),"Polygon");a.setFillStrokeStyle(r,o),a.drawPolygon(e,n)}var s=i.getText();if(s){var l=t.getBuilder(i.getZIndex(),su);l.setTextStyle(s,t.addDeclutter(!1)),l.drawText(e,n)}},MultiPoint:function(t,e,i,n){var r=i.getImage();if(r){if(r.getImageState()!=eu)return;var o=t.getBuilder(i.getZIndex(),ou);o.setImageStyle(r,t.addDeclutter(!1)),o.drawMultiPoint(e,n)}var a=i.getText();if(a){var s=t.getBuilder(i.getZIndex(),su);s.setTextStyle(a,t.addDeclutter(!!r)),s.drawText(e,n)}},MultiLineString:function(t,e,i,n){var r=i.getStroke();if(r){var o=t.getBuilder(i.getZIndex(),au);o.setFillStrokeStyle(null,r),o.drawMultiLineString(e,n)}var a=i.getText();if(a){var s=t.getBuilder(i.getZIndex(),su);s.setTextStyle(a,t.addDeclutter(!1)),s.drawText(e,n)}},MultiPolygon:function(t,e,i,n){var r=i.getFill(),o=i.getStroke();if(o||r){var a=t.getBuilder(i.getZIndex(),"Polygon");a.setFillStrokeStyle(r,o),a.drawMultiPolygon(e,n)}var s=i.getText();if(s){var l=t.getBuilder(i.getZIndex(),su);l.setTextStyle(s,t.addDeclutter(!1)),l.drawText(e,n)}},GeometryCollection:function(t,e,i,n){var r,o,a=e.getGeometriesArray();for(r=0,o=a.length;r<o;++r)(0,lu[a[r].getType()])(t,a[r],i,n)},Circle:function(t,e,i,n){var r=i.getFill(),o=i.getStroke();if(r||o){var a=t.getBuilder(i.getZIndex(),"Circle");a.setFillStrokeStyle(r,o),a.drawCircle(e,n)}var s=i.getText();if(s){var l=t.getBuilder(i.getZIndex(),su);l.setTextStyle(s,t.addDeclutter(!1)),l.drawText(e,n)}}},hu=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),uu=function(t){function e(e){var i=t.call(this)||this;return i.map_=e,i.declutterTree_=null,i}return hu(e,t),e.prototype.dispatchRenderEvent=function(t,e){n()},e.prototype.calculateMatrices2D=function(t){var e=t.viewState,i=t.coordinateToPixelTransform,n=t.pixelToCoordinateTransform;Yt(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),Xt(n,i)},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,r,o,a,s){function l(t,e,i){return r.call(o,e,t?i:null)}var h,u=e.viewState,c=u.projection,p=Ve(t.slice(),c),d=[[0,0]];if(c.canWrapX()&&n){var f=K(c.getExtent());d.push([-f,0],[f,0])}var g,v=e.layerStatesArray,y=v.length;this.declutterTree_&&(g=this.declutterTree_.all().map(function(t){return t.value}));for(var m=[],_=0;_<d.length;_++)for(var x=y-1;x>=0;--x){var b=v[x],w=b.layer;if(w.hasRenderer()&&ai(b,u)&&a.call(s,w)){var S=w.getRenderer(),C=w.getSource();if(S&&C){var E=C.getWrapX()?p:t,T=l.bind(null,b.managed);m[0]=E[0]+d[_][0],m[1]=E[1]+d[_][1],h=S.forEachFeatureAtCoordinate(m,e,i,T,g)}if(h)return h}}},e.prototype.forEachLayerAtPixel=function(t,e,i,r,o){return n()},e.prototype.hasFeatureAtCoordinate=function(t,e,i,n,r,o){return void 0!==this.forEachFeatureAtCoordinate(t,e,i,n,m,this,r,o)},e.prototype.getMap=function(){return this.map_},e.prototype.renderFrame=function(t){this.declutterTree_=Mi(t,this.declutterTree_)},e.prototype.scheduleExpireIconCache=function(t){Dh.canExpireCache()&&t.postRenderFunctions.push(Fi)},e}(oa),cu=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),pu=function(t){function e(e){var i=t.call(this,e)||this;i.fontChangeListenerKey_=s(Bh,ia,e.redrawText.bind(e)),i.element_=document.createElement("div");var n=i.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",i.element_.className="ol-unselectable ol-layers";var r=e.getViewport();return r.insertBefore(i.element_,r.firstChild||null),i.children_=[],i.renderedVisible_=!0,i}return cu(e,t),e.prototype.dispatchRenderEvent=function(t,e){var i=this.getMap();if(i.hasListener(t)){var n=new Mh(t,void 0,e);i.dispatchEvent(n)}},e.prototype.disposeInternal=function(){h(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),t.prototype.disposeInternal.call(this)},e.prototype.renderFrame=function(e){if(e){this.calculateMatrices2D(e),this.dispatchRenderEvent("precompose",e);var i=e.layerStatesArray.sort(function(t,e){return t.zIndex-e.zIndex}),n=e.viewState;this.children_.length=0;for(var r=null,o=0,a=i.length;o<a;++o){var s=i[o];if(e.layerIndex=o,ai(s,n)&&(s.sourceState==Sl||"undefined"==s.sourceState)){var l=s.layer.render(e,r);l&&l!==r&&(this.children_.push(l),r=l)}}t.prototype.renderFrame.call(this,e),function(t,e){for(var i=t.childNodes,n=0;;++n){var r=i[n],o=e[n];if(!r&&!o)break;r!==o&&(r?o?t.insertBefore(o,r):(t.removeChild(r),--n):t.appendChild(o))}}(this.element_,this.children_),this.dispatchRenderEvent("postcompose",e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)},e.prototype.forEachLayerAtPixel=function(t,e,i,n,r){for(var o=e.viewState,a=e.layerStatesArray,s=a.length-1;s>=0;--s){var l=a[s],h=l.layer;if(h.hasRenderer()&&ai(l,o)&&r(h)){var u=h.getRenderer().getDataAtPixel(t,e,i);if(u){var c=n(h,u);if(c)return c}}}},e}(uu),du=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),fu=function(t){function e(e){return(e=na({},e)).controls||(e.controls=si()),e.interactions||(e.interactions=gi()),t.call(this,e)||this}return du(e,t),e.prototype.createRenderer=function(){return new pu(this)},e}(Ll),gu="center-center",vu="top-left",yu=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),mu="element",_u="map",xu="offset",bu="position",wu="positioning",Su=function(t){function e(e){var i=t.call(this)||this;i.options=e,i.id=e.id,i.insertFirst=void 0===e.insertFirst||e.insertFirst,i.stopEvent=void 0===e.stopEvent||e.stopEvent,i.element=document.createElement("div"),i.element.className=void 0!==e.className?e.className:"ol-overlay-container ol-selectable",i.element.style.position="absolute";var n=e.autoPan;return n&&"object"!=typeof n&&(n={animation:e.autoPanAnimation,margin:e.autoPanMargin}),i.autoPan=n||!1,i.rendered={transform_:"",visible:!0},i.mapPostrenderListenerKey=null,i.addEventListener(w(mu),i.handleElementChanged),i.addEventListener(w(_u),i.handleMapChanged),i.addEventListener(w(xu),i.handleOffsetChanged),i.addEventListener(w(bu),i.handlePositionChanged),i.addEventListener(w(wu),i.handlePositioningChanged),void 0!==e.element&&i.setElement(e.element),i.setOffset(void 0!==e.offset?e.offset:[0,0]),i.setPositioning(void 0!==e.positioning?e.positioning:vu),void 0!==e.position&&i.setPosition(e.position),i}return yu(e,t),e.prototype.getElement=function(){return this.get(mu)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get(_u)},e.prototype.getOffset=function(){return this.get(xu)},e.prototype.getPosition=function(){return this.get(bu)},e.prototype.getPositioning=function(){return this.get(wu)},e.prototype.handleElementChanged=function(){ii(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(ei(this.element),h(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=s(t,"postrender",this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(mu,t)},e.prototype.setMap=function(t){this.set(_u,t)},e.prototype.setOffset=function(t){this.set(xu,t)},e.prototype.setPosition=function(t){this.set(bu,t)},e.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},e.prototype.panIntoView=function(t){var e=this.getMap();if(e&&e.getTargetElement()&&this.get(bu)){var i=this.getRect(e.getTargetElement(),e.getSize()),n=this.getElement(),r=this.getRect(n,[function(t){var e=t.offsetWidth,i=getComputedStyle(t);return e+=parseInt(i.marginLeft,10)+parseInt(i.marginRight,10)}(n),function(t){var e=t.offsetHeight,i=getComputedStyle(t);return e+=parseInt(i.marginTop,10)+parseInt(i.marginBottom,10)}(n)]),o=void 0===t.margin?20:t.margin;if(!I(i,r)){var a=r[0]-i[0],s=i[2]-r[2],l=r[1]-i[1],h=i[3]-r[3],u=[0,0];if(a<0?u[0]=a-o:s<0&&(u[0]=Math.abs(s)+o),l<0?u[1]=l-o:h<0&&(u[1]=Math.abs(h)+o),0!==u[0]||0!==u[1]){var c=e.getView().getCenterInternal(),p=e.getPixelFromCoordinateInternal(c),d=[p[0]+u[0],p[1]+u[1]],f=t.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(d),duration:f.duration,easing:f.easing})}}}},e.prototype.getRect=function(t,e){var i=t.getBoundingClientRect(),n=i.left+window.pageXOffset,r=i.top+window.pageYOffset;return[n,r,n+e[0],r+e[1]]},e.prototype.setPositioning=function(t){this.set(wu,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var i=t.getPixelFromCoordinate(e),n=t.getSize();this.updateRenderedPosition(i,n)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var i=this.element.style,n=this.getOffset(),r=this.getPositioning();this.setVisible(!0);var o=Math.round(t[0]+n[0])+"px",a=Math.round(t[1]+n[1])+"px",s="0%",l="0%";"bottom-right"==r||"center-right"==r||"top-right"==r?s="-100%":"bottom-center"!=r&&r!=gu&&"top-center"!=r||(s="-50%"),"bottom-left"==r||"bottom-center"==r||"bottom-right"==r?l="-100%":"center-left"!=r&&r!=gu&&"center-right"!=r||(l="-50%");var h="translate("+s+", "+l+") translate("+o+", "+a+")";this.rendered.transform_!=h&&(this.rendered.transform_=h,i.transform=h,i.msTransform=h)},e.prototype.getOptions=function(){return this.options},e}(Sa),Cu="arraybuffer",Eu="json",Tu="text",Pu="xml",Lu=!1,Iu=function(){function t(t,e,i,n){this.minX=t,this.maxX=e,this.minY=i,this.maxY=n}return t.prototype.contains=function(t){return this.containsXY(t[1],t[2])},t.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},t.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},t.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},t.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},t}(),Ou=Iu,Au=[0,0,0],Ru=function(){function t(t){var e,i,n;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,S((e=this.resolutions_,i=function(t,e){return e-t}||u,e.every(function(t,n){if(0===n)return!0;var r=i(e[n-1],t);return!(r>0||0===r)})),17),!t.origins)for(var r=0,o=this.resolutions_.length-1;r<o;++r)if(n){if(this.resolutions_[r]/this.resolutions_[r+1]!==n){n=void 0;break}}else n=this.resolutions_[r]/this.resolutions_[r+1];this.zoomFactor_=n,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,S(this.origins_.length==this.resolutions_.length,20));var a=t.extent;void 0===a||this.origin_||this.origins_||(this.origin_=q(a)),S(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,S(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:256,S(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==a?a:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map(function(t,e){return new Ou(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))},this):a&&this.calculateTileRanges_(a)}return t.prototype.forEachTileCoord=function(t,e,i){for(var n=this.getTileRangeForExtentAndZ(t,e),r=n.minX,o=n.maxX;r<=o;++r)for(var a=n.minY,s=n.maxY;a<=s;++a)i([e,r,a])},t.prototype.forEachTileCoordParentTileRange=function(t,e,i,n){var r,o,a=null,s=t[0]-1;for(2===this.zoomFactor_?(r=t[1],o=t[2]):a=this.getTileCoordExtent(t,n);s>=this.minZoom;){if(e(s,2===this.zoomFactor_?ji(r=Math.floor(r/2),r,o=Math.floor(o/2),o,i):this.getTileRangeForExtentAndZ(a,s,i)))return!0;--s}return!1},t.prototype.getExtent=function(){return this.extent_},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.getMinZoom=function(){return this.minZoom},t.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},t.prototype.getResolution=function(t){return this.resolutions_[t]},t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getTileCoordChildTileRange=function(t,e,i){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var n=2*t[1],r=2*t[2];return ji(n,n+1,r,r+1,e)}var o=this.getTileCoordExtent(t,i);return this.getTileRangeForExtentAndZ(o,t[0]+1,e)}return null},t.prototype.getTileRangeExtent=function(t,e,i){var n=this.getOrigin(t),r=this.getResolution(t),o=oi(this.getTileSize(t),this.tmpSize_);return R(n[0]+e.minX*o[0]*r,n[1]+e.minY*o[1]*r,n[0]+(e.maxX+1)*o[0]*r,n[1]+(e.maxY+1)*o[1]*r,i)},t.prototype.getTileRangeForExtentAndZ=function(t,e,i){var n=Au;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,n);var r=n[1],o=n[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,n),ji(r,n[1],o,n[2],i)},t.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),i=this.getResolution(t[0]),n=oi(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*n[0]*i,e[1]-(t[2]+.5)*n[1]*i]},t.prototype.getTileCoordExtent=function(t,e){var i=this.getOrigin(t[0]),n=this.getResolution(t[0]),r=oi(this.getTileSize(t[0]),this.tmpSize_),o=i[0]+t[1]*r[0]*n,a=i[1]-(t[2]+1)*r[1]*n;return R(o,a,o+r[0]*n,a+r[1]*n,e)},t.prototype.getTileCoordForCoordAndResolution=function(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)},t.prototype.getTileCoordForXYAndResolution_=function(t,e,i,n,r){var o=this.getZForResolution(i),a=i/this.getResolution(o),s=this.getOrigin(o),l=oi(this.getTileSize(o),this.tmpSize_),h=n?.5:0,u=n?.5:0,c=Math.floor((t-s[0])/i+h),p=Math.floor((s[1]-e)/i+u),d=a*c/l[0],f=a*p/l[1];return n?(d=Math.ceil(d)-1,f=Math.ceil(f)-1):(d=Math.floor(d),f=Math.floor(f)),Gi(o,d,f,r)},t.prototype.getTileCoordForXYAndZ_=function(t,e,i,n,r){var o=this.getOrigin(i),a=this.getResolution(i),s=oi(this.getTileSize(i),this.tmpSize_),l=n?.5:0,h=n?.5:0,u=Math.floor((t-o[0])/a+l),c=Math.floor((o[1]-e)/a+h),p=u/s[0],d=c/s[1];return n?(p=Math.ceil(p)-1,d=Math.ceil(d)-1):(p=Math.floor(p),d=Math.floor(d)),Gi(i,p,d,r)},t.prototype.getTileCoordForCoordAndZ=function(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)},t.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},t.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},t.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:null},t.prototype.getZForResolution=function(t,e){return ot(p(this.resolutions_,t,e||0),this.minZoom,this.maxZoom)},t.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,i=new Array(e),n=this.minZoom;n<e;++n)i[n]=this.getTileRangeForExtentAndZ(t,n);this.fullTileRanges_=i},t}(),Mu=["experimental-webgl","webgl","webkit-3d","moz-webgl"],Fu="http://www.w3.org/2001/XMLSchema-instance",ku=ln(),Nu=void 0,Du=void 0,ju=35044,Gu=function(){function t(t,e){this.array=null,this.type=t,S(34962===t||34963===t,62),this.usage=void 0!==e?e:ju}return t.prototype.ofSize=function(t){this.array=new(vn(this.type))(t)},t.prototype.fromArray=function(t){this.array=vn(this.type).from(t)},t.prototype.fromArrayBuffer=function(t){this.array=new(vn(this.type))(t)},t.prototype.getType=function(){return this.type},t.prototype.getArray=function(){return this.array},t.prototype.getUsage=function(){return this.usage},t.prototype.getSize=function(){return this.array?this.array.length:0},t}(),zu="webglcontextlost",Bu="webglcontextrestored",Yu=function(){function t(t){this.gl_=t.webGlContext;var e=this.gl_;this.scaleRatio_=t.scaleRatio||1,this.renderTargetTexture_=e.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=e.createFramebuffer();var i=e.createShader(e.VERTEX_SHADER);e.shaderSource(i,t.vertexShader||"\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n"),e.compileShader(i);var n=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(n,t.fragmentShader||"\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n   \n  varying vec2 v_texCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord);\n  }\n"),e.compileShader(n),this.renderTargetProgram_=e.createProgram(),e.attachShader(this.renderTargetProgram_,i),e.attachShader(this.renderTargetProgram_,n),e.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),e.STATIC_DRAW),this.renderTargetAttribLocation_=e.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetTextureLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],t.uniforms&&Object.keys(t.uniforms).forEach((function(i){this.uniforms_.push({value:t.uniforms[i],location:e.getUniformLocation(this.renderTargetProgram_,i)})}).bind(this))}return t.prototype.getGL=function(){return this.gl_},t.prototype.init=function(t){var e=this.getGL(),i=[e.drawingBufferWidth*this.scaleRatio_,e.drawingBufferHeight*this.scaleRatio_];if(e.bindFramebuffer(e.FRAMEBUFFER,this.getFrameBuffer()),e.viewport(0,0,i[0],i[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==i[0]||this.renderTargetTextureSize_[1]!==i[1]){this.renderTargetTextureSize_=i;var n=e.RGBA,r=e.RGBA,o=e.UNSIGNED_BYTE;e.bindTexture(e.TEXTURE_2D,this.renderTargetTexture_),e.texImage2D(e.TEXTURE_2D,0,n,i[0],i[1],0,r,o,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.renderTargetTexture_,0)}},t.prototype.apply=function(t,e){var i=this.getGL(),n=t.size;i.bindFramebuffer(i.FRAMEBUFFER,e?e.getFrameBuffer():null),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,this.renderTargetTexture_),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA),i.viewport(0,0,i.drawingBufferWidth,i.drawingBufferHeight),i.bindBuffer(i.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),i.useProgram(this.renderTargetProgram_),i.enableVertexAttribArray(this.renderTargetAttribLocation_),i.vertexAttribPointer(this.renderTargetAttribLocation_,2,i.FLOAT,!1,0,0),i.uniform2f(this.renderTargetUniformLocation_,n[0],n[1]),i.uniform1i(this.renderTargetTextureLocation_,0),this.applyUniforms(t),i.drawArrays(i.TRIANGLES,0,6)},t.prototype.getFrameBuffer=function(){return this.frameBuffer_},t.prototype.applyUniforms=function(t){var e,i=this.getGL(),n=1;this.uniforms_.forEach(function(r){if((e="function"==typeof r.value?r.value(t):r.value)instanceof HTMLCanvasElement||e instanceof ImageData)r.texture||(r.texture=i.createTexture()),i.activeTexture(i["TEXTURE"+n]),i.bindTexture(i.TEXTURE_2D,r.texture),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),e instanceof ImageData?i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,e.width,e.height,0,i.UNSIGNED_BYTE,new Uint8Array(e.data)):i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,e),i.uniform1i(r.location,n++);else if(Array.isArray(e))switch(e.length){case 2:return void i.uniform2f(r.location,e[0],e[1]);case 3:return void i.uniform3f(r.location,e[0],e[1],e[2]);case 4:return void i.uniform4f(r.location,e[0],e[1],e[2],e[3]);default:return}else"number"==typeof e&&i.uniform1f(r.location,e)})},t}(),Xu=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Wu="u_projectionMatrix",Uu={UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126},Vu=function(t){function e(e){var i=t.call(this)||this,n=e||{};i.boundHandleWebGLContextLost_=i.handleWebGLContextLost.bind(i),i.boundHandleWebGLContextRestored_=i.handleWebGLContextRestored.bind(i),i.canvas_=document.createElement("canvas"),i.canvas_.style.position="absolute",i.canvas_.style.left="0",i.gl_=Zi(i.canvas_);var r=i.getGL();if(i.bufferCache_={},i.currentProgram_=null,S(c(function(){if(!Vh){var t=Zi(document.createElement("canvas"));t&&(Vh=t.getSupportedExtensions())}return Vh}(),"OES_element_index_uint"),63),r.getExtension("OES_element_index_uint"),i.canvas_.addEventListener(zu,i.boundHandleWebGLContextLost_),i.canvas_.addEventListener(Bu,i.boundHandleWebGLContextRestored_),i.offsetRotateMatrix_=[1,0,0,1,0,0],i.offsetScaleMatrix_=[1,0,0,1,0,0],i.tmpMat4_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],i.uniformLocations_={},i.attribLocations_={},i.uniforms_=[],n.uniforms)for(var o in n.uniforms)i.uniforms_.push({name:o,value:n.uniforms[o]});return i.postProcessPasses_=n.postProcesses?n.postProcesses.map(function(t){return new Yu({webGlContext:r,scaleRatio:t.scaleRatio,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms})}):[new Yu({webGlContext:r})],i.shaderCompileErrors_=null,i.startTime_=Date.now(),i}return Xu(e,t),e.prototype.bindBuffer=function(t){var e=this.getGL(),i=r(t),n=this.bufferCache_[i];n||(n={buffer:t,webGlBuffer:e.createBuffer()},this.bufferCache_[i]=n),e.bindBuffer(t.getType(),n.webGlBuffer)},e.prototype.flushBufferData=function(t){var e=this.getGL();this.bindBuffer(t),e.bufferData(t.getType(),t.getArray(),t.getUsage())},e.prototype.deleteBuffer=function(t){var e=this.getGL(),i=r(t),n=this.bufferCache_[i];e.isContextLost()||e.deleteBuffer(n.buffer),delete this.bufferCache_[i]},e.prototype.disposeInternal=function(){this.canvas_.removeEventListener(zu,this.boundHandleWebGLContextLost_),this.canvas_.removeEventListener(Bu,this.boundHandleWebGLContextRestored_)},e.prototype.prepareDraw=function(t){var e=this.getGL(),i=this.getCanvas(),n=t.size,r=t.pixelRatio;i.width=n[0]*r,i.height=n[1]*r,i.style.width=n[0]+"px",i.style.height=n[1]+"px",e.useProgram(this.currentProgram_);for(var o=this.postProcessPasses_.length-1;o>=0;o--)this.postProcessPasses_[o].init(t);e.bindTexture(e.TEXTURE_2D,null),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),e.useProgram(this.currentProgram_),this.applyFrameState(t),this.applyUniforms(t)},e.prototype.prepareDrawToRenderTarget=function(t,e,i){var n=this.getGL(),r=e.getSize();n.bindFramebuffer(n.FRAMEBUFFER,e.getFramebuffer()),n.viewport(0,0,r[0],r[1]),n.bindTexture(n.TEXTURE_2D,e.getTexture()),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.enable(n.BLEND),n.blendFunc(n.ONE,i?n.ZERO:n.ONE_MINUS_SRC_ALPHA),n.useProgram(this.currentProgram_),this.applyFrameState(t),this.applyUniforms(t)},e.prototype.drawElements=function(t,e){var i=this.getGL();i.drawElements(i.TRIANGLES,e-t,i.UNSIGNED_INT,4*t)},e.prototype.finalizeDraw=function(t){for(var e=0;e<this.postProcessPasses_.length;e++)this.postProcessPasses_[e].apply(t,this.postProcessPasses_[e+1]||null)},e.prototype.getCanvas=function(){return this.canvas_},e.prototype.getGL=function(){return this.gl_},e.prototype.applyFrameState=function(t){var e=t.size,i=t.viewState.rotation,n=Dt(this.offsetScaleMatrix_);Bt(n,2/e[0],2/e[1]);var r,o,a,s,l=Dt(this.offsetRotateMatrix_);0!==i&&(r=l,o=-i,a=Math.cos(o),s=Math.sin(o),jt(r,Gt(fs,a,s,-s,a,0,0))),this.setUniformMatrixValue("u_offsetScaleMatrix",yn(this.tmpMat4_,n)),this.setUniformMatrixValue("u_offsetRotateMatrix",yn(this.tmpMat4_,l)),this.setUniformFloatValue("u_time",.001*(Date.now()-this.startTime_)),this.setUniformFloatValue("u_zoom",t.viewState.zoom),this.setUniformFloatValue("u_resolution",t.viewState.resolution)},e.prototype.applyUniforms=function(t){var e,i=this.getGL(),n=0;this.uniforms_.forEach((function(r){if((e="function"==typeof r.value?r.value(t):r.value)instanceof HTMLCanvasElement||e instanceof HTMLImageElement||e instanceof ImageData)r.texture||(r.prevValue=void 0,r.texture=i.createTexture()),i.activeTexture(i["TEXTURE"+n]),i.bindTexture(i.TEXTURE_2D,r.texture),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),(!(e instanceof HTMLImageElement)||e.complete)&&r.prevValue!==e&&(r.prevValue=e,i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,e)),i.uniform1i(this.getUniformLocation(r.name),n++);else if(Array.isArray(e)&&6===e.length)this.setUniformMatrixValue(r.name,yn(this.tmpMat4_,e));else if(Array.isArray(e)&&e.length<=4)switch(e.length){case 2:return void i.uniform2f(this.getUniformLocation(r.name),e[0],e[1]);case 3:return void i.uniform3f(this.getUniformLocation(r.name),e[0],e[1],e[2]);case 4:return void i.uniform4f(this.getUniformLocation(r.name),e[0],e[1],e[2],e[3]);default:return}else"number"==typeof e&&i.uniform1f(this.getUniformLocation(r.name),e)}).bind(this))},e.prototype.useProgram=function(t){return t!=this.currentProgram_&&(this.getGL().useProgram(t),this.currentProgram_=t,this.uniformLocations_={},this.attribLocations_={},!0)},e.prototype.compileShader=function(t,e){var i=this.getGL(),n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n},e.prototype.getProgram=function(t,e){var i=this.getGL(),n=this.compileShader(t,i.FRAGMENT_SHADER),r=this.compileShader(e,i.VERTEX_SHADER);this.shaderCompileErrors_=null,i.getShaderInfoLog(n)&&(this.shaderCompileErrors_="Fragment shader compilation failed:\n"+i.getShaderInfoLog(n)),i.getShaderInfoLog(r)&&(this.shaderCompileErrors_=(this.shaderCompileErrors_||"")+"Vertex shader compilation failed:\n"+i.getShaderInfoLog(r));var o=i.createProgram();return i.attachShader(o,n),i.attachShader(o,r),i.linkProgram(o),o},e.prototype.getShaderCompileErrors=function(){return this.shaderCompileErrors_},e.prototype.getUniformLocation=function(t){return void 0===this.uniformLocations_[t]&&(this.uniformLocations_[t]=this.getGL().getUniformLocation(this.currentProgram_,t)),this.uniformLocations_[t]},e.prototype.getAttributeLocation=function(t){return void 0===this.attribLocations_[t]&&(this.attribLocations_[t]=this.getGL().getAttribLocation(this.currentProgram_,t)),this.attribLocations_[t]},e.prototype.makeProjectionTransform=function(t,e){var i=t.size,n=t.viewState.rotation,r=t.viewState.resolution,o=t.viewState.center;return Dt(e),Yt(e,0,0,2/(r*i[0]),2/(r*i[1]),-n,-o[0],-o[1]),e},e.prototype.setUniformFloatValue=function(t,e){this.getGL().uniform1f(this.getUniformLocation(t),e)},e.prototype.setUniformMatrixValue=function(t,e){this.getGL().uniformMatrix4fv(this.getUniformLocation(t),!1,e)},e.prototype.enableAttributeArray_=function(t,e,i,n,r){var o=this.getAttributeLocation(t);o<0||(this.getGL().enableVertexAttribArray(o),this.getGL().vertexAttribPointer(o,e,i,!1,n,r))},e.prototype.enableAttributes=function(t){for(var e=mn(t),i=0,n=0;n<t.length;n++){var r=t[n];this.enableAttributeArray_(r.name,r.size,r.type||5126,e,i),i+=r.size*_n(r.type)}},e.prototype.handleWebGLContextLost=function(){o(this.bufferCache_),this.currentProgram_=null},e.prototype.handleWebGLContextRestored=function(){},e.prototype.createTexture=function(t,e,i){var n=this.getGL(),r=i||n.createTexture(),o=n.RGBA,a=n.RGBA,s=n.UNSIGNED_BYTE;return n.bindTexture(n.TEXTURE_2D,r),e?n.texImage2D(n.TEXTURE_2D,0,o,a,s,e):n.texImage2D(n.TEXTURE_2D,0,o,t[0],t[1],0,a,s,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),r},e}(oa),Hu=new Uint8Array(4),qu=function(){function t(t,e){this.helper_=t;var i=t.getGL();this.texture_=i.createTexture(),this.framebuffer_=i.createFramebuffer(),this.size_=e||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}return t.prototype.setSize=function(t){v(t,this.size_)||(this.size_[0]=t[0],this.size_[1]=t[1],this.updateSize_())},t.prototype.getSize=function(){return this.size_},t.prototype.clearCachedData=function(){this.dataCacheDirty_=!0},t.prototype.readAll=function(){if(this.dataCacheDirty_){var t=this.size_,e=this.helper_.getGL();e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.readPixels(0,0,t[0],t[1],e.RGBA,e.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_},t.prototype.readPixel=function(t,e){if(t<0||e<0||t>this.size_[0]||e>=this.size_[1])return Hu[0]=0,Hu[1]=0,Hu[2]=0,Hu[3]=0,Hu;this.readAll();var i=Math.floor(t)+(this.size_[1]-Math.floor(e)-1)*this.size_[0];return Hu[0]=this.data_[4*i],Hu[1]=this.data_[4*i+1],Hu[2]=this.data_[4*i+2],Hu[3]=this.data_[4*i+3],Hu},t.prototype.getTexture=function(){return this.texture_},t.prototype.getFramebuffer=function(){return this.framebuffer_},t.prototype.updateSize_=function(){var t=this.size_,e=this.helper_.getGL();this.texture_=this.helper_.createTexture(t,null,this.texture_),e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.viewport(0,0,t[0],t[1]),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture_,0),this.data_=new Uint8Array(t[0]*t[1]*4)},t}(),Zu=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ku=function(t){function e(e){var i=t.call(this,{extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes})||this;return i.matrixIds_=e.matrixIds,i}return Zu(e,t),e.prototype.getMatrixId=function(t){return this.matrixIds_[t]},e.prototype.getMatrixIds=function(){return this.matrixIds_},e}(Ru),Ju=Ku,$u=function(){function t(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.displacement_=t.displacement}return t.prototype.clone=function(){return new t({opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},t.prototype.getOpacity=function(){return this.opacity_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getDisplacement=function(){return this.displacement_},t.prototype.getAnchor=function(){return n()},t.prototype.getImage=function(t){return n()},t.prototype.getHitDetectionImage=function(t){return n()},t.prototype.getImageState=function(){return n()},t.prototype.getImageSize=function(){return n()},t.prototype.getHitDetectionImageSize=function(){return n()},t.prototype.getOrigin=function(){return n()},t.prototype.getSize=function(){return n()},t.prototype.setOpacity=function(t){this.opacity_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t},t.prototype.listenImageChange=function(t){n()},t.prototype.load=function(){n()},t.prototype.unlistenImageChange=function(t){n()},t}(),Qu=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),tc=function(t){function e(e){var i=this;return(i=t.call(this,{opacity:1,rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,rotation:void 0!==e.rotation?e.rotation:0,scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0]})||this).canvas_=null,i.hitDetectionCanvas_=null,i.fill_=void 0!==e.fill?e.fill:null,i.origin_=[0,0],i.points_=e.points,i.radius_=void 0!==e.radius?e.radius:e.radius1,i.radius2_=e.radius2,i.angle_=void 0!==e.angle?e.angle:0,i.stroke_=void 0!==e.stroke?e.stroke:null,i.anchor_=null,i.size_=null,i.imageSize_=null,i.hitDetectionImageSize_=null,i.render(),i}return Qu(e,t),e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.getAnchor=function(){return this.anchor_},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.getHitDetectionImage=function(t){return this.hitDetectionCanvas_},e.prototype.getImage=function(t){return this.canvas_},e.prototype.getImageSize=function(){return this.imageSize_},e.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},e.prototype.getImageState=function(){return eu},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.listenImageChange=function(t){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(t){},e.prototype.render=function(){var t,e="round",i="round",n=0,r=null,o=0,a=0;this.stroke_&&(null===(t=this.stroke_.getColor())&&(t="#000"),t=bi(t),void 0===(a=this.stroke_.getWidth())&&(a=1),r=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset(),void 0===(i=this.stroke_.getLineJoin())&&(i="round"),void 0===(e=this.stroke_.getLineCap())&&(e="round"),void 0===(n=this.stroke_.getMiterLimit())&&(n=10));var s=2*(this.radius_+a)+1,l={strokeStyle:t,strokeWidth:a,size:s,lineCap:e,lineDash:r,lineDashOffset:o,lineJoin:i,miterLimit:n},h=Qe(s,s);this.canvas_=h.canvas;var u=s=this.canvas_.width,c=this.getDisplacement();this.draw_(l,h,0,0),this.createHitDetectionCanvas_(l),this.anchor_=[s/2-c[0],s/2+c[1]],this.size_=[s,s],this.imageSize_=[u,u]},e.prototype.draw_=function(t,e,i,n){var r,o,a;e.setTransform(1,0,0,1,0,0),e.translate(i,n),e.beginPath();var s=this.points_;if(s===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var l=void 0!==this.radius2_?this.radius2_:this.radius_;for(l!==this.radius_&&(s*=2),r=0;r<=s;r++)o=2*r*Math.PI/s-Math.PI/2+this.angle_,a=r%2==0?this.radius_:l,e.lineTo(t.size/2+a*Math.cos(o),t.size/2+a*Math.sin(o))}if(this.fill_){var h=this.fill_.getColor();null===h&&(h="#000"),e.fillStyle=bi(h),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,e.setLineDash&&t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke()),e.closePath()},e.prototype.createHitDetectionCanvas_=function(t){if(this.hitDetectionImageSize_=[t.size,t.size],this.hitDetectionCanvas_=this.canvas_,this.fill_){var e=this.fill_.getColor(),i=0;if("string"==typeof e&&(e=yi(e)),null===e?i=1:Array.isArray(e)&&(i=4===e.length?e[3]:1),0===i){var n=Qe(t.size,t.size);this.hitDetectionCanvas_=n.canvas,this.drawHitDetectionCanvas_(t,n,0,0)}}},e.prototype.drawHitDetectionCanvas_=function(t,e,i,n){e.setTransform(1,0,0,1,0,0),e.translate(i,n),e.beginPath();var r=this.points_;if(r===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var o=void 0!==this.radius2_?this.radius2_:this.radius_;o!==this.radius_&&(r*=2);var a=void 0,s=void 0,l=void 0;for(a=0;a<=r;a++)l=2*a*Math.PI/r-Math.PI/2+this.angle_,s=a%2==0?this.radius_:o,e.lineTo(t.size/2+s*Math.cos(l),t.size/2+s*Math.sin(l))}e.fillStyle="#000",e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.stroke()),e.closePath()},e}($u),ec=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ic=function(t){function e(e){var i=e||{};return t.call(this,{points:1/0,fill:i.fill,radius:i.radius,stroke:i.stroke,displacement:void 0!==i.displacement?i.displacement:[0,0]})||this}return ec(e,t),e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),displacement:this.getDisplacement().slice()});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.setRadius=function(t){this.radius_=t,this.render()},e}(tc),nc=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0})},t.prototype.getColor=function(){return this.color_},t.prototype.setColor=function(t){this.color_=t},t}(),rc="fraction",oc="pixels",ac=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),sc=function(t){function e(e,i,n,r){var o=t.call(this)||this;return o.extent=e,o.pixelRatio_=n,o.resolution=i,o.state=r,o}return ac(e,t),e.prototype.changed=function(){this.dispatchEvent(ha)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return n()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){n()},e}(la),lc=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),hc=function(t){function e(e,i,n,r,o,a){var s=t.call(this,e,i,n,tu)||this;return s.src_=r,s.image_=new Image,null!==o&&(s.image_.crossOrigin=o),s.unlisten_=null,s.state=tu,s.imageLoadFunction_=a,s}return lc(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=iu,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=V(this.extent)/this.image_.height),this.state=eu,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state!=tu&&this.state!=iu||(this.state=1,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=bn(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.setImage=function(t){this.image_=t},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(sc),uc=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),cc=function(t){function e(e,i,n,r,o,a){var s=t.call(this)||this;return s.hitDetectionImage_=null,s.image_=e||new Image,null!==r&&(s.image_.crossOrigin=r),s.canvas_=a?document.createElement("canvas"):null,s.color_=a,s.unlisten_=null,s.imageState_=o,s.size_=n,s.src_=i,s}return uc(e,t),e.prototype.isTainted_=function(t){if(void 0===this.tainted_&&this.imageState_===eu){t||(t=Qe(1,1)).drawImage(this.image_,0,0);try{t.getImageData(0,0,1,1),this.tainted_=!1}catch(t){this.tainted_=!0}}return!0===this.tainted_},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(ha)},e.prototype.handleImageError_=function(){this.imageState_=iu,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=eu,this.size_&&(this.image_.width=this.size_[0],this.image_.height=this.size_[1]),this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.replaceColor_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.canvas_?this.canvas_:this.image_},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(t){if(!this.hitDetectionImage_)if(this.isTainted_()){var e=this.size_[0],i=this.size_[1],n=Qe(e,i);n.fillRect(0,0,e,i),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(this.imageState_==tu){this.imageState_=1;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=bn(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},e.prototype.replaceColor_=function(){if(this.color_){this.canvas_.width=this.image_.width,this.canvas_.height=this.image_.height;var t=this.canvas_.getContext("2d");if(t.drawImage(this.image_,0,0),this.isTainted_(t)){var e=this.color_;return t.globalCompositeOperation="multiply",t.fillStyle="rgb("+e[0]+","+e[1]+","+e[2]+")",t.fillRect(0,0,this.image_.width,this.image_.height),t.globalCompositeOperation="destination-in",void t.drawImage(this.image_,0,0)}for(var i=t.getImageData(0,0,this.image_.width,this.image_.height),n=i.data,r=this.color_[0]/255,o=this.color_[1]/255,a=this.color_[2]/255,s=0,l=n.length;s<l;s+=4)n[s]*=r,n[s+1]*=o,n[s+2]*=a;t.putImageData(i,0,0)}},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(la),pc="bottom-left",dc="bottom-right",fc="top-left",gc=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),vc=function(t){function e(e){var i=this,n=e||{};(i=t.call(this,{opacity:void 0!==n.opacity?n.opacity:1,rotation:void 0!==n.rotation?n.rotation:0,scale:void 0!==n.scale?n.scale:1,displacement:void 0!==n.displacement?n.displacement:[0,0],rotateWithView:void 0!==n.rotateWithView&&n.rotateWithView})||this).anchor_=void 0!==n.anchor?n.anchor:[.5,.5],i.normalizedAnchor_=null,i.anchorOrigin_=void 0!==n.anchorOrigin?n.anchorOrigin:fc,i.anchorXUnits_=void 0!==n.anchorXUnits?n.anchorXUnits:rc,i.anchorYUnits_=void 0!==n.anchorYUnits?n.anchorYUnits:rc,i.crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:null;var o=void 0!==n.img?n.img:null,a=void 0!==n.imgSize?n.imgSize:null,s=n.src;S(!(void 0!==s&&o),4),S(!o||o&&a,5),void 0!==s&&0!==s.length||!o||(s=o.src||r(o)),S(void 0!==s&&s.length>0,6);var l=void 0!==n.src?tu:eu;return i.color_=void 0!==n.color?yi(n.color):null,i.iconImage_=function(t,e,i,n,r,o){var a=Dh.get(e,n,o);return a||(a=new cc(t,e,i,n,r,o),Dh.set(e,n,o,a)),a}(o,s,a,i.crossOrigin_,l,i.color_),i.offset_=void 0!==n.offset?n.offset:[0,0],i.offsetOrigin_=void 0!==n.offsetOrigin?n.offsetOrigin:fc,i.origin_=null,i.size_=void 0!==n.size?n.size:null,i}return gc(e,t),e.prototype.clone=function(){return new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},e.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,e=this.getSize();if(this.anchorXUnits_==rc||this.anchorYUnits_==rc){if(!e)return null;t=this.anchor_.slice(),this.anchorXUnits_==rc&&(t[0]*=e[0]),this.anchorYUnits_==rc&&(t[1]*=e[1])}if(this.anchorOrigin_!=fc){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),"top-right"!=this.anchorOrigin_&&this.anchorOrigin_!=dc||(t[0]=-t[0]+e[0]),this.anchorOrigin_!=pc&&this.anchorOrigin_!=dc||(t[1]=-t[1]+e[1])}return this.normalizedAnchor_=t,this.normalizedAnchor_},e.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},e.prototype.getColor=function(){return this.color_},e.prototype.getImage=function(t){return this.iconImage_.getImage(t)},e.prototype.getImageSize=function(){return this.iconImage_.getSize()},e.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},e.prototype.getImageState=function(){return this.iconImage_.getImageState()},e.prototype.getHitDetectionImage=function(t){return this.iconImage_.getHitDetectionImage(t)},e.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_,e=this.getDisplacement();if(this.offsetOrigin_!=fc){var i=this.getSize(),n=this.iconImage_.getSize();if(!i||!n)return null;t=t.slice(),"top-right"!=this.offsetOrigin_&&this.offsetOrigin_!=dc||(t[0]=n[0]-i[0]-t[0]),this.offsetOrigin_!=pc&&this.offsetOrigin_!=dc||(t[1]=n[1]-i[1]-t[1])}return t[0]+=e[0],t[1]+=e[1],this.origin_=t,this.origin_},e.prototype.getSrc=function(){return this.iconImage_.getSrc()},e.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},e.prototype.listenImageChange=function(t){this.iconImage_.addEventListener(ha,t)},e.prototype.load=function(){this.iconImage_.load()},e.prototype.unlistenImageChange=function(t){this.iconImage_.removeEventListener(ha,t)},e}($u),yc=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},t.prototype.getColor=function(){return this.color_},t.prototype.getLineCap=function(){return this.lineCap_},t.prototype.getLineDash=function(){return this.lineDash_},t.prototype.getLineDashOffset=function(){return this.lineDashOffset_},t.prototype.getLineJoin=function(){return this.lineJoin_},t.prototype.getMiterLimit=function(){return this.miterLimit_},t.prototype.getWidth=function(){return this.width_},t.prototype.setColor=function(t){this.color_=t},t.prototype.setLineCap=function(t){this.lineCap_=t},t.prototype.setLineDash=function(t){this.lineDash_=t},t.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t},t.prototype.setLineJoin=function(t){this.lineJoin_=t},t.prototype.setMiterLimit=function(t){this.miterLimit_=t},t.prototype.setWidth=function(t){this.width_=t},t}(),mc=function(){function t(t){var e=t||{};this.geometry_=null,this.geometryFunction_=Cn,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex}return t.prototype.clone=function(){var e=this.getGeometry();return e&&"object"==typeof e&&(e=e.clone()),new t({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},t.prototype.getRenderer=function(){return this.renderer_},t.prototype.setRenderer=function(t){this.renderer_=t},t.prototype.getGeometry=function(){return this.geometry_},t.prototype.getGeometryFunction=function(){return this.geometryFunction_},t.prototype.getFill=function(){return this.fill_},t.prototype.setFill=function(t){this.fill_=t},t.prototype.getImage=function(){return this.image_},t.prototype.setImage=function(t){this.image_=t},t.prototype.getStroke=function(){return this.stroke_},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.getText=function(){return this.text_},t.prototype.setText=function(t){this.text_=t},t.prototype.getZIndex=function(){return this.zIndex_},t.prototype.setGeometry=function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=Cn,this.geometry_=t},t.prototype.setZIndex=function(t){this.zIndex_=t},t}(),_c=null,xc=mc,bc="point",wc=function(){function t(t){var e=t||{};this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.text_=e.text,this.textAlign_=e.textAlign,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new nc({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:bc,this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding}return t.prototype.clone=function(){return new t({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:this.getScale(),text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()})},t.prototype.getOverflow=function(){return this.overflow_},t.prototype.getFont=function(){return this.font_},t.prototype.getMaxAngle=function(){return this.maxAngle_},t.prototype.getPlacement=function(){return this.placement_},t.prototype.getOffsetX=function(){return this.offsetX_},t.prototype.getOffsetY=function(){return this.offsetY_},t.prototype.getFill=function(){return this.fill_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getStroke=function(){return this.stroke_},t.prototype.getText=function(){return this.text_},t.prototype.getTextAlign=function(){return this.textAlign_},t.prototype.getTextBaseline=function(){return this.textBaseline_},t.prototype.getBackgroundFill=function(){return this.backgroundFill_},t.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},t.prototype.getPadding=function(){return this.padding_},t.prototype.setOverflow=function(t){this.overflow_=t},t.prototype.setFont=function(t){this.font_=t},t.prototype.setMaxAngle=function(t){this.maxAngle_=t},t.prototype.setOffsetX=function(t){this.offsetX_=t},t.prototype.setOffsetY=function(t){this.offsetY_=t},t.prototype.setPlacement=function(t){this.placement_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setFill=function(t){this.fill_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.setText=function(t){this.text_=t},t.prototype.setTextAlign=function(t){this.textAlign_=t},t.prototype.setTextBaseline=function(t){this.textBaseline_=t},t.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},t.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},t.prototype.setPadding=function(t){this.padding_=t},t}(),Sc=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Cc=function(t){function e(e,i,n){var r=t.call(this)||this,o=n||{};return r.tileCoord=e,r.state=i,r.interimTile=null,r.hifi=!0,r.key="",r.transition_=void 0===o.transition?250:o.transition,r.transitionStarts_={},r}return Sc(e,t),e.prototype.changed=function(){this.dispatchEvent(ha)},e.prototype.release=function(){},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==ol)return this.transition_=0,t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(t.getState()==ol){t.interimTile=null;break}1==t.getState()?e=t:t.getState()==rl?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){if(3!==this.state&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},e.prototype.load=function(){n()},e.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var i=this.transitionStarts_[t];if(i){if(-1===i)return 1}else i=e,this.transitionStarts_[t]=i;var n=e-i+1e3/60;return n>=this.transition_?1:He(n/this.transition_)},e.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(la),Ec=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Tc=function(t){function e(e,i,n,r,o,a){var s=t.call(this,e,i,a)||this;return s.crossOrigin_=r,s.src_=n,s.image_=new Image,null!==r&&(s.image_.crossOrigin=r),s.unlisten_=null,s.tileLoadFunction_=o,s}return Ec(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.getKey=function(){return this.src_},e.prototype.handleImageError_=function(){var t;this.state=3,this.unlistenImage_(),this.image_=((t=Qe(1,1)).fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;this.state=t.naturalWidth&&t.naturalHeight?ol:al,this.unlistenImage_(),this.changed()},e.prototype.load=function(){3==this.state&&(this.state=rl,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==rl&&(this.state=1,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=bn(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(Cc),Pc=function(){function t(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark},t.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},t.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},t.prototype.forEach=function(t){for(var e=this.oldest_;e;)t(e.value_,e.key_,this),e=e.newer},t.prototype.get=function(t,e){var i=this.entries_[t];return S(void 0!==i,15),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_},t.prototype.remove=function(t){var e=this.entries_[t];return S(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},t.prototype.getCount=function(){return this.count_},t.prototype.getKeys=function(){var t,e=new Array(this.count_),i=0;for(t=this.newest_;t;t=t.older)e[i++]=t.key_;return e},t.prototype.getValues=function(){var t,e=new Array(this.count_),i=0;for(t=this.newest_;t;t=t.older)e[i++]=t.value_;return e},t.prototype.peekLast=function(){return this.oldest_.value_},t.prototype.peekLastKey=function(){return this.oldest_.key_},t.prototype.peekFirstKey=function(){return this.newest_.key_},t.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},t.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},t.prototype.set=function(t,e){S(!(t in this.entries_),16);var i={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_},t.prototype.setSize=function(t){this.highWaterMark=t},t}(),Lc=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ic=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Lc(e,t),e.prototype.expireCache=function(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()},e.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=Yi(this.peekFirstKey())[0];this.forEach((function(e){e.tileCoord[0]!==t&&(this.remove(Bi(e.tileCoord)),e.release())}).bind(this))}},e}(Pc),Oc=function(){function t(t,e,i,n,r,o){this.sourceProj_=t,this.targetProj_=e;var a={},s=It(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return a[e]||(a[e]=s(t)),a[e]},this.maxSourceExtent_=n,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&K(n)==K(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?K(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?K(this.targetProj_.getExtent()):null;var l=q(i),h=Z(i),u=X(i),c=Y(i),p=this.transformInv_(l),d=this.transformInv_(h),f=this.transformInv_(u),g=this.transformInv_(c),v=10+(o?Math.max(0,Math.ceil(Math.log2(B(i)/(o*o*256*256)))):0);if(this.addQuad_(l,h,u,c,p,d,f,g,v),this.wrapsXInSource_){var y=1/0;this.triangles_.forEach(function(t,e,i){y=Math.min(y,t.source[0][0],t.source[1][0],t.source[2][0])}),this.triangles_.forEach((function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-y>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-y>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-y>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-y>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var i=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-i<this.sourceWorldWidth_/2&&(t.source=e)}}).bind(this))}a={}}return t.prototype.addTriangle_=function(t,e,i,n,r,o){this.triangles_.push({source:[n,r,o],target:[t,e,i]})},t.prototype.addQuad_=function(t,e,i,n,r,o,a,s,l){var h=C([r,o,a,s]),u=this.sourceWorldWidth_?K(h)/this.sourceWorldWidth_:null,c=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&u>.5&&u<1,d=!1;if(l>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(d=K(C([t,e,i,n]))/this.targetWorldWidth_>.25||d),!p&&this.sourceProj_.isGlobal()&&u&&(d=u>.25||d)),d||!this.maxSourceExtent_||J(h,this.maxSourceExtent_)){if(!(d||isFinite(r[0])&&isFinite(r[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(s[0])&&isFinite(s[1]))){if(!(l>0))return;d=!0}if(l>0){if(!d){var f=this.transformInv_([(t[0]+i[0])/2,(t[1]+i[1])/2]),g=void 0;g=p?(ut(r[0],c)+ut(a[0],c))/2-ut(f[0],c):(r[0]+a[0])/2-f[0];var v=(r[1]+a[1])/2-f[1];d=g*g+v*v>this.errorThresholdSquared_}if(d){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){var y=[(e[0]+i[0])/2,(e[1]+i[1])/2],m=this.transformInv_(y),_=[(n[0]+t[0])/2,(n[1]+t[1])/2],x=this.transformInv_(_);this.addQuad_(t,e,y,_,r,o,m,x,l-1),this.addQuad_(_,y,i,n,x,m,a,s,l-1)}else{var b=[(t[0]+e[0])/2,(t[1]+e[1])/2],w=this.transformInv_(b),S=[(i[0]+n[0])/2,(i[1]+n[1])/2],E=this.transformInv_(S);this.addQuad_(t,b,S,n,r,w,E,s,l-1),this.addQuad_(b,e,i,S,w,o,a,E,l-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}this.addTriangle_(t,i,n,r,a,s),this.addTriangle_(t,e,i,r,o,a)}},t.prototype.calculateSourceExtent=function(){var t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach(function(e,i,n){var r=e.source;j(t,r[0]),j(t,r[1]),j(t,r[2])}),t},t.prototype.getTriangles=function(){return this.triangles_},t}(),Ac=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Rc=function(t){function e(e,i,n,r,o,a,s,l,h,u,c){var p=t.call(this,o,rl)||this;p.renderEdges_=void 0!==c&&c,p.pixelRatio_=s,p.gutter_=l,p.canvas_=null,p.sourceTileGrid_=i,p.targetTileGrid_=r,p.wrappedTileCoord_=a||o,p.sourceTiles_=[],p.sourcesListenerKeys_=null,p.sourceZ_=0;var d=r.getTileCoordExtent(p.wrappedTileCoord_),f=p.targetTileGrid_.getExtent(),g=p.sourceTileGrid_.getExtent(),v=f?H(d,f):d;if(0===B(v))return p.state=al,p;var y=e.getExtent();y&&(g=g?H(g,y):y);var m=r.getResolution(p.wrappedTileCoord_[0]),_=An(e,n,W(v),m);if(!isFinite(_)||_<=0)return p.state=al,p;if(p.triangulation_=new Oc(e,n,v,g,_*(void 0!==u?u:.5),m),0===p.triangulation_.getTriangles().length)return p.state=al,p;p.sourceZ_=i.getZForResolution(_);var x=p.triangulation_.calculateSourceExtent();if(g&&(e.canWrapX()?(x[1]=ot(x[1],g[1],g[3]),x[3]=ot(x[3],g[1],g[3])):x=H(x,g)),B(x)){for(var b=i.getTileRangeForExtentAndZ(x,p.sourceZ_),w=b.minX;w<=b.maxX;w++)for(var S=b.minY;S<=b.maxY;S++){var C=h(p.sourceZ_,w,S,s);C&&p.sourceTiles_.push(C)}0===p.sourceTiles_.length&&(p.state=al)}else p.state=al;return p}return Ac(e,t),e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach((function(e,i,n){e&&e.getState()==ol&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}).bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=3;else{var e=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(e),n="number"==typeof i?i:i[0],r="number"==typeof i?i:i[1],o=this.targetTileGrid_.getResolution(e),a=this.sourceTileGrid_.getResolution(this.sourceZ_),s=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Mn(n,r,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,s,this.triangulation_,t,this.gutter_,this.renderEdges_),this.state=ol}this.changed()},e.prototype.load=function(){if(this.state==rl){this.state=1,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach((function(e,i,n){var r=e.getState();if(r==rl||1==r){t++;var o=s(e,ha,function(i){var n=e.getState();n!=ol&&3!=n&&n!=al||(h(o),0==--t&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(o)}}).bind(this)),this.sourceTiles_.forEach(function(t,e,i){t.getState()==rl&&t.load()}),0===t&&setTimeout(this.reproject_.bind(this),0)}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(h),this.sourcesListenerKeys_=null},e}(Cc),Mc=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Fc=function(t){function e(e){var i=t.call(this)||this;return i.projection_=bt(e.projection),i.attributions_=Fn(e.attributions),i.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,i.loading=!1,i.state_=void 0!==e.state?e.state:Sl,i.wrapX_=void 0!==e.wrapX&&e.wrapX,i}return Mc(e,t),e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolutions=function(){return n()},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=Fn(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(Sa),kc=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Nc=function(t){function e(e){var i=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX})||this;i.opaque_=void 0!==e.opaque&&e.opaque,i.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,i.tileGrid=void 0!==e.tileGrid?e.tileGrid:null;var n=[256,256],r=e.tileGrid;r&&oi(r.getTileSize(r.getMinZoom()),n);var o="undefined"!=typeof screen,a=o?screen.availWidth||screen.width:1920,s=o?screen.availHeight||screen.height:1080,l=4*Math.ceil(a/n[0])*Math.ceil(s/n[1]);return i.tileCache=new Ic(Math.max(l,e.cacheSize||0)),i.tmpSize=[0,0],i.key_=e.key||"",i.tileOptions={transition:e.transition},i.zDirection=e.zDirection?e.zDirection:0,i}return kc(e,t),e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,e){var i=this.getTileCacheForProjection(t);i&&i.expireCache(e)},e.prototype.forEachLoadedTile=function(t,e,i,n){var r=this.getTileCacheForProjection(t);if(!r)return!1;for(var o,a,s,l=!0,h=i.minX;h<=i.maxX;++h)for(var u=i.minY;u<=i.maxY;++u)a=zi(e,h,u),s=!1,r.containsKey(a)&&(s=(o=r.get(a)).getState()===ol)&&(s=!1!==n(o)),s||(l=!1);return l},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},e.prototype.getTile=function(t,e,i,r,o){return n()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:Wi(t)},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();return e&&!Pt(e,t)?null:this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,e,i){var n=this.getTileGridForProjection(i),r=this.getTilePixelRatio(e),o=oi(n.getTileSize(t),this.tmpSize);return 1==r?o:ri(o,r,this.tmpSize)},e.prototype.getTileCoordForTileUrlFunction=function(t,e){var i=void 0!==e?e:this.getProjection(),n=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(t=function(t,e,i){var n=e[0],r=t.getTileCoordCenter(e),o=qi(i);if(L(o,r))return e;var a=K(o),s=Math.ceil((o[0]-r[0])/a);return r[0]+=a*s,t.getTileCoordForCoordAndZ(r,n)}(n,t,i)),function(e,i){var n=t[0],r=t[1],o=t[2];if(i.getMinZoom()>n||n>i.getMaxZoom())return!1;var a,s=i.getExtent();return!(a=s?i.getTileRangeForExtentAndZ(s,n):i.getFullTileRange(n))||a.containsXY(r,o)}(0,n)?t:null},e.prototype.clear=function(){this.tileCache.clear()},e.prototype.refresh=function(){this.clear(),t.prototype.refresh.call(this)},e.prototype.useTile=function(t,e,i,n){},e}(Fc),Dc=function(t){function e(e,i){var n=t.call(this,e)||this;return n.tile=i,n}return kc(e,t),e}(aa),jc=Nc,Gc=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),zc=function(t){function e(e){var i=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return i.generateTileUrlFunction_=!e.tileUrlFunction,i.tileLoadFunction=e.tileLoadFunction,i.tileUrlFunction=e.tileUrlFunction?e.tileUrlFunction.bind(i):Ln,i.urls=null,e.urls?i.setUrls(e.urls):e.url&&i.setUrl(e.url),i.tileLoadingKeys_={},i}return Gc(e,t),e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var e,i=t.target,n=r(i),o=i.getState();1==o?(this.tileLoadingKeys_[n]=!0,e="tileloadstart"):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],e=3==o?"tileloaderror":o==ol?"tileloadend":void 0),null!=e&&this.dispatchEvent(new Dc(e,i))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},e.prototype.setUrl=function(t){var e=In(t);this.urls=e,this.setUrls(e)},e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(Tn(t,this.tileGrid),e):this.setKey(e)},e.prototype.useTile=function(t,e,i){var n=zi(t,e,i);this.tileCache.containsKey(n)&&this.tileCache.get(n)},e}(jc),Bc=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Yc=function(t){function e(e){var i=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:kn,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return i.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,i.tileClass=void 0!==e.tileClass?e.tileClass:Tc,i.tileCacheForProjection={},i.tileGridForProjection={},i.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,i.renderReprojectionEdges_=!1,i}return Bc(e,t),e.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},e.prototype.expireCache=function(t,e){var i=this.getTileCacheForProjection(t);for(var n in this.tileCache.expireCache(this.tileCache==i?e:{}),this.tileCacheForProjection){var r=this.tileCacheForProjection[n];r.expireCache(r==i?e:{})}},e.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!Pt(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getOpaque=function(e){return!(this.getProjection()&&e&&!Pt(this.getProjection(),e))&&t.prototype.getOpaque.call(this,e)},e.prototype.getTileGridForProjection=function(t){var e=this.getProjection();if(!this.tileGrid||e&&!Pt(e,t)){var i=r(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=Wi(t)),this.tileGridForProjection[i]}return this.tileGrid},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();if(!e||Pt(e,t))return this.tileCache;var i=r(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new Ic(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]},e.prototype.createTile_=function(t,e,i,n,r,o){var a=[t,e,i],s=this.getTileCoordForTileUrlFunction(a,r),l=s?this.tileUrlFunction(s,n,r):void 0,h=new this.tileClass(a,void 0!==l?rl:al,void 0!==l?l:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return h.key=o,h.addEventListener(ha,this.handleTileChange.bind(this)),h},e.prototype.getTile=function(t,e,i,n,r){var o=this.getProjection();if(o&&r&&!Pt(o,r)){var a=this.getTileCacheForProjection(r),s=[t,e,i],l=void 0,h=Bi(s);a.containsKey(h)&&(l=a.get(h));var u=this.getKey();if(l&&l.key==u)return l;var c=this.getTileGridForProjection(o),p=this.getTileGridForProjection(r),d=this.getTileCoordForTileUrlFunction(s,r),f=new Rc(o,c,r,p,s,d,this.getTilePixelRatio(n),this.getGutter(),(function(t,e,i,n){return this.getTileInternal(t,e,i,n,o)}).bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);return f.key=u,l?(f.interimTile=l,f.refreshInterimChain(),a.replace(h,f)):a.set(h,f),f}return this.getTileInternal(t,e,i,n,o||r)},e.prototype.getTileInternal=function(t,e,i,n,r){var o=null,a=zi(t,e,i),s=this.getKey();if(this.tileCache.containsKey(a)){if((o=this.tileCache.get(a)).key!=s){var l=o;(o=this.createTile_(t,e,i,n,r,s)).interimTile=l.getState()==rl?l.interimTile:l,o.refreshInterimChain(),this.tileCache.replace(a,o)}}else o=this.createTile_(t,e,i,n,r,s),this.tileCache.set(a,o);return o},e.prototype.setRenderReprojectionEdges=function(t){if(this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,e){var i=bt(t);if(i){var n=r(i);n in this.tileGridForProjection||(this.tileGridForProjection[n]=e)}},e}(zc),Xc=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Wc=function(t){function e(e){var i=this,n=void 0!==e.hidpi&&e.hidpi;return(i=t.call(this,{cacheSize:e.cacheSize,crossOrigin:"anonymous",opaque:!0,projection:bt("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:wl,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:n?2:1,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition})||this).hidpi_=n,i.culture_=void 0!==e.culture?e.culture:"en-us",i.maxZoom_=void 0!==e.maxZoom?e.maxZoom:-1,i.apiKey_=e.key,i.imagerySet_=e.imagerySet,On("https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+i.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+i.apiKey_+"&c="+i.culture_,i.handleImageryMetadataResponse.bind(i),void 0,"jsonp"),i}return Xc(e,t),e.prototype.getApiKey=function(){return this.apiKey_},e.prototype.getImagerySet=function(){return this.imagerySet_},e.prototype.handleImageryMetadataResponse=function(t){if(200==t.statusCode&&"OK"==t.statusDescription&&"ValidCredentials"==t.authenticationResultCode&&1==t.resourceSets.length&&1==t.resourceSets[0].resources.length){var e=t.resourceSets[0].resources[0],i=-1==this.maxZoom_?e.zoomMax:this.maxZoom_,n=qi(this.getProjection()),r=this.hidpi_?2:1,o=Ui({extent:n,minZoom:e.zoomMin,maxZoom:i,tileSize:e.imageWidth==e.imageHeight?e.imageWidth/r:[e.imageWidth/r,e.imageHeight/r]});this.tileGrid=o;var a=this.culture_,s=this.hidpi_;if(this.tileUrlFunction=Pn(e.imageUrlSubdomains.map(function(t){var i=[0,0,0],n=e.imageUrl.replace("{subdomain}",t).replace("{culture}",a);return function(t,e,r){if(t){Gi(t[0],t[1],t[2],i);var o=n;return s&&(o+="&dpi=d1&device=mobile"),o.replace("{quadkey}",function(t){var e,i,n=t[0],r=new Array(n),o=1<<n-1;for(e=0;e<n;++e)i=48,t[1]&o&&(i+=1),t[2]&o&&(i+=2),r[e]=String.fromCharCode(i),o>>=1;return r.join("")}(i))}}})),e.imageryProviders){var l=Lt(bt("EPSG:4326"),this.getProjection());this.setAttributions((function(t){var i=[],n=t.viewState,r=this.getTileGrid(),o=r.getZForResolution(n.resolution,this.zDirection),a=r.getTileCoordForCoordAndZ(n.center,o)[0];return e.imageryProviders.map(function(e){for(var n=!1,r=e.coverageAreas,o=0,s=r.length;o<s;++o){var h=r[o];if(a>=h.zoomMin&&a<=h.zoomMax){var u=h.bbox;if(J(tt([u[1],u[0],u[3],u[2]],l),t.extent)){n=!0;break}}}n&&i.push(e.attribution)}),i.push('<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html" target="_blank">Terms of Use</a>'),i}).bind(this))}this.setState(Sl)}else this.setState("error")},e}(Yc),Uc=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Vc=function(t){function e(e){var i=e||{},n=void 0!==i.projection?i.projection:"EPSG:3857",r=void 0!==i.tileGrid?i.tileGrid:Ui({extent:qi(n),maxResolution:i.maxResolution,maxZoom:i.maxZoom,minZoom:i.minZoom,tileSize:i.tileSize});return t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,opaque:i.opaque,projection:n,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileGrid:r,tileLoadFunction:i.tileLoadFunction,tilePixelRatio:i.tilePixelRatio,tileUrlFunction:i.tileUrlFunction,url:i.url,urls:i.urls,wrapX:void 0===i.wrapX||i.wrapX,transition:i.transition,attributionsCollapsible:i.attributionsCollapsible,zDirection:i.zDirection})||this}return Uc(e,t),e}(Yc),Hc=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),qc=function(t){function e(e){var i=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,maxZoom:void 0!==e.maxZoom?e.maxZoom:18,minZoom:e.minZoom,projection:e.projection,wrapX:e.wrapX})||this;return i.account_=e.account,i.mapId_=e.map||"",i.config_=e.config||{},i.templateCache_={},i.initializeMap_(),i}return Hc(e,t),e.prototype.getConfig=function(){return this.config_},e.prototype.updateConfig=function(t){na(this.config_,t),this.initializeMap_()},e.prototype.setConfig=function(t){this.config_=t||{},this.initializeMap_()},e.prototype.initializeMap_=function(){var t=JSON.stringify(this.config_);if(this.templateCache_[t])this.applyTemplate_(this.templateCache_[t]);else{var e="https://"+this.account_+".carto.com/api/v1/map";this.mapId_&&(e+="/named/"+this.mapId_);var i=new XMLHttpRequest;i.addEventListener("load",this.handleInitResponse_.bind(this,t)),i.addEventListener("error",this.handleInitError_.bind(this)),i.open("POST",e),i.setRequestHeader("Content-type","application/json"),i.send(JSON.stringify(this.config_))}},e.prototype.handleInitResponse_=function(t,e){var i=e.target;if(!i.status||i.status>=200&&i.status<300){var n=void 0;try{n=JSON.parse(i.responseText)}catch(t){return void this.setState("error")}this.applyTemplate_(n),this.templateCache_[t]=n,this.setState(Sl)}else this.setState("error")},e.prototype.handleInitError_=function(t){this.setState("error")},e.prototype.applyTemplate_=function(t){this.setUrl("https://"+t.cdn_url.https+"/"+this.account_+"/api/v1/map/"+t.layergroupid+"/{z}/{x}/{y}.png")},e}(Vc),Zc="addfeature",Kc="changefeature",Jc="clear",$c="removefeature",Qc=i(0),tp=i.n(Qc),ep=function(){function t(t){this.rbush_=new tp.a(t),this.items_={}}return t.prototype.insert=function(t,e){var i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[r(e)]=i},t.prototype.load=function(t,e){for(var i=new Array(e.length),n=0,o=e.length;n<o;n++){var a=t[n],s=e[n],l={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:s};i[n]=l,this.items_[r(s)]=l}this.rbush_.load(i)},t.prototype.remove=function(t){var e=r(t),i=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(i)},t.prototype.update=function(t,e){var i=this.items_[r(e)];N([i.minX,i.minY,i.maxX,i.maxY],t)||(this.remove(e),this.insert(t,e))},t.prototype.getAll=function(){return this.rbush_.all().map(function(t){return t.value})},t.prototype.getInExtent=function(t){return this.rbush_.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}).map(function(t){return t.value})},t.prototype.forEach=function(t){return this.forEach_(this.getAll(),t)},t.prototype.forEachInExtent=function(t,e){return this.forEach_(this.getInExtent(t),e)},t.prototype.forEach_=function(t,e){for(var i,n=0,r=t.length;n<r;n++)if(i=e(t[n]))return i;return i},t.prototype.isEmpty=function(){return a(this.items_)},t.prototype.clear=function(){this.rbush_.clear(),this.items_={}},t.prototype.getExtent=function(t){var e=this.rbush_.toJSON();return R(e.minX,e.minY,e.maxX,e.maxY,t)},t.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]},t}(),ip=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),np=function(t){function e(e,i){var n=t.call(this,e)||this;return n.feature=i,n}return ip(e,t),e}(aa),rp=function(t){function e(e){var i=this,n=e||{};(i=t.call(this,{attributions:n.attributions,projection:void 0,state:Sl,wrapX:void 0===n.wrapX||n.wrapX})||this).loader_=x,i.format_=n.format,i.overlaps_=void 0===n.overlaps||n.overlaps,i.url_=n.url,void 0!==n.loader?i.loader_=n.loader:void 0!==i.url_&&(S(i.format_,7),i.loader_=Ni(i.url_,i.format_)),i.strategy_=void 0!==n.strategy?n.strategy:Di;var r,o,a=void 0===n.useSpatialIndex||n.useSpatialIndex;return i.featuresRtree_=a?new ep:null,i.loadedExtentsRtree_=new ep,i.nullGeometryFeatures_={},i.idIndex_={},i.uidIndex_={},i.featureChangeKeys_={},i.featuresCollection_=null,Array.isArray(n.features)?o=n.features:n.features&&(o=(r=n.features).getArray()),a||void 0!==r||(r=new Ta(o)),void 0!==o&&i.addFeaturesInternal(o),void 0!==r&&i.bindFeaturesCollection_(r),i}return ip(e,t),e.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},e.prototype.addFeatureInternal=function(t){var e=r(t);if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var i=t.getGeometry();if(i){var n=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(n,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new np(Zc,t))}else this.featuresCollection_&&this.featuresCollection_.remove(t)},e.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[s(e,ha,this.handleFeatureChange_,this),s(e,ia,this.handleFeatureChange_,this)]},e.prototype.addToIndex_=function(t,e){var i=!0,n=e.getId();return void 0!==n&&(n.toString()in this.idIndex_?i=!1:this.idIndex_[n.toString()]=e),i&&(S(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),i},e.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},e.prototype.addFeaturesInternal=function(t){for(var e=[],i=[],n=[],o=0,a=t.length;o<a;o++){var s=r(h=t[o]);this.addToIndex_(s,h)&&i.push(h)}o=0;for(var l=i.length;o<l;o++){var h;s=r(h=i[o]),this.setupChangeEvents_(s,h);var u=h.getGeometry();if(u){var c=u.getExtent();e.push(c),n.push(h)}else this.nullGeometryFeatures_[s]=h}this.featuresRtree_&&this.featuresRtree_.load(e,n),o=0;for(var p=i.length;o<p;o++)this.dispatchEvent(new np(Zc,i[o]))},e.prototype.bindFeaturesCollection_=function(t){var e=!1;this.addEventListener(Zc,function(i){e||(e=!0,t.push(i.feature),e=!1)}),this.addEventListener($c,function(i){e||(e=!0,t.remove(i.feature),e=!1)}),t.addEventListener(ta,(function(t){e||(e=!0,this.addFeature(t.element),e=!1)}).bind(this)),t.addEventListener(ea,(function(t){e||(e=!0,this.removeFeature(t.element),e=!1)}).bind(this)),this.featuresCollection_=t},e.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_)this.featureChangeKeys_[e].forEach(h);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_)for(var i in this.featuresRtree_.forEach(this.removeFeatureInternal.bind(this)),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var n=new np(Jc);this.dispatchEvent(n),this.changed()},e.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},e.prototype.forEachFeatureAtCoordinateDirect=function(t,e){return this.forEachFeatureInExtent([t[0],t[1],t[0],t[1]],function(i){return i.getGeometry().intersectsCoordinate(t)?e(i):void 0})},e.prototype.forEachFeatureInExtent=function(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},e.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,function(i){if(i.getGeometry().intersectsExtent(t)){var n=e(i);if(n)return n}})},e.prototype.getFeaturesCollection=function(){return this.featuresCollection_},e.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray():this.featuresRtree_&&(t=this.featuresRtree_.getAll(),a(this.nullGeometryFeatures_)||f(t,ra(this.nullGeometryFeatures_))),t},e.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,function(t){e.push(t)}),e},e.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_?this.featuresRtree_.getInExtent(t):this.featuresCollection_?this.featuresCollection_.getArray():[]},e.prototype.getClosestFeatureToCoordinate=function(t,e){var i=t[0],n=t[1],r=null,o=[NaN,NaN],a=1/0,s=[-1/0,-1/0,1/0,1/0],l=e||m;return this.featuresRtree_.forEachInExtent(s,function(t){if(l(t)){var e=t.getGeometry(),h=a;if((a=e.closestPointXY(i,n,o,a))<h){r=t;var u=Math.sqrt(a);s[0]=i-u,s[1]=n-u,s[2]=i+u,s[3]=n+u}}}),r},e.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},e.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getFeatureByUid=function(t){var e=this.uidIndex_[t];return void 0!==e?e:null},e.prototype.getFormat=function(){return this.format_},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.getUrl=function(){return this.url_},e.prototype.handleFeatureChange_=function(t){var e=t.target,i=r(e),n=e.getGeometry();if(n){var o=n.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,e)):this.featuresRtree_&&this.featuresRtree_.update(o,e)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);var a=e.getId();if(void 0!==a){var s=a.toString();this.idIndex_[s]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[s]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[i]=e;this.changed(),this.dispatchEvent(new np(Kc,e))},e.prototype.hasFeature=function(t){var e=t.getId();return void 0!==e?e in this.idIndex_:r(t)in this.uidIndex_},e.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&a(this.nullGeometryFeatures_)},e.prototype.loadFeatures=function(t,e,i){var n=this.loadedExtentsRtree_,r=this.strategy_(t,e);this.loading=!1;for(var o=function(t,o){var s=r[t];n.forEachInExtent(s,function(t){return I(t.extent,s)})||(a.loader_.call(a,s,e,i),n.insert(s,{extent:s.slice()}),a.loading=a.loader_!==x)},a=this,s=0,l=r.length;s<l;++s)o(s)},e.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),t.prototype.refresh.call(this)},e.prototype.removeLoadedExtent=function(t){var e,i=this.loadedExtentsRtree_;i.forEachInExtent(t,function(i){if(N(i.extent,t))return e=i,!0}),e&&i.remove(e)},e.prototype.removeFeature=function(t){var e=r(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},e.prototype.removeFeatureInternal=function(t){var e=r(t);this.featureChangeKeys_[e].forEach(h),delete this.featureChangeKeys_[e];var i=t.getId();void 0!==i&&delete this.idIndex_[i.toString()],delete this.uidIndex_[e],this.dispatchEvent(new np($c,t))},e.prototype.removeFromIdIndex_=function(t){var e=!1;for(var i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}return e},e.prototype.setLoader=function(t){this.loader_=t},e.prototype.setUrl=function(t){S(this.format_,7),this.setLoader(Ni(t,this.format_))},e}(Fc),op=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ap=function(t){function e(e){var i=t.call(this,{attributions:e.attributions,wrapX:e.wrapX})||this;return i.resolution=void 0,i.distance=void 0!==e.distance?e.distance:20,i.features=[],i.geometryFunction=e.geometryFunction||function(t){var e=t.getGeometry();return S(e.getType()==Xa.POINT,10),e},i.boundRefresh_=i.refresh.bind(i),i.setSource(e.source||null),i}return op(e,t),e.prototype.clear=function(e){this.features.length=0,t.prototype.clear.call(this,e)},e.prototype.getDistance=function(){return this.distance},e.prototype.getSource=function(){return this.source},e.prototype.loadFeatures=function(t,e,i){this.source.loadFeatures(t,e,i),e!==this.resolution&&(this.clear(),this.resolution=e,this.cluster(),this.addFeatures(this.features))},e.prototype.setDistance=function(t){this.distance=t,this.refresh()},e.prototype.setSource=function(t){this.source&&this.source.removeEventListener(ha,this.boundRefresh_),this.source=t,t&&t.addEventListener(ha,this.boundRefresh_),this.refresh()},e.prototype.refresh=function(){this.clear(),this.cluster(),this.addFeatures(this.features)},e.prototype.cluster=function(){if(void 0!==this.resolution&&this.source)for(var t=[1/0,1/0,-1/0,-1/0],e=this.distance*this.resolution,i=this.source.getFeatures(),n={},o=0,a=i.length;o<a;o++){var s=i[o];if(!(r(s)in n)){var l=this.geometryFunction(s);if(l){F(l.getCoordinates(),t),E(t,e,t);var h=this.source.getFeaturesInExtent(t);h=h.filter(function(t){var e=r(t);return!(e in n||(n[e]=!0,0))}),this.features.push(this.createCluster(h))}}}},e.prototype.createCluster=function(t){for(var e=[0,0],i=t.length-1;i>=0;--i){var n=this.geometryFunction(t[i]);n?ke(e,n.getCoordinates()):t.splice(i,1)}Be(e,1/t.length);var r=new La(new Ss(e));return r.set("features",t),r},e}(rp),sp=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),lp="default",hp="truncated",up=function(t){function e(e,i,n,r,o,a,s){var l=t.call(this,i,n,r,o,a,s)||this;return l.zoomifyImage_=null,l.tileSize_=e,l}return sp(e,t),e.prototype.getImage=function(){if(this.zoomifyImage_)return this.zoomifyImage_;var e=t.prototype.getImage.call(this);if(this.state==ol){var i=this.tileSize_;if(e.width==i[0]&&e.height==i[1])return this.zoomifyImage_=e,e;var n=Qe(i[0],i[1]);return n.drawImage(e,0,0),this.zoomifyImage_=n.canvas,n.canvas}return e},e}(Tc),cp=function(t){function e(e){var i=this,n=e,r=n.size,o=n.tilePixelRatio||1,a=r[0],s=r[1],l=[],h=n.tileSize||256,u=h*o;switch(void 0!==n.tierSizeCalculation?n.tierSizeCalculation:lp){case lp:for(;a>u||s>u;)l.push([Math.ceil(a/u),Math.ceil(s/u)]),u+=u;break;case hp:for(var c=a,p=s;c>u||p>u;)l.push([Math.ceil(c/u),Math.ceil(p/u)]),c>>=1,p>>=1;break;default:S(!1,53)}l.push([1,1]),l.reverse();for(var d=[o],f=[0],g=1,v=l.length;g<v;g++)d.push(o<<g),f.push(l[g-1][0]*l[g-1][1]+f[g-1]);d.reverse();var y=new Ru({tileSize:h,extent:n.extent||[0,-s,a,0],resolutions:d}),m=n.url;m&&-1==m.indexOf("{TileGroup}")&&-1==m.indexOf("{tileIndex}")&&(m+="{TileGroup}/{z}-{x}-{y}.jpg");var _=In(m),x=h*o,b=Pn(_.map(function(t){return function(e,i,n){if(e){var r=e[0],o=e[1],a=e[2],s=o+a*l[r][0],h={z:r,x:o,y:a,tileIndex:s,TileGroup:"TileGroup"+((s+f[r])/x|0)};return t.replace(/\{(\w+?)\}/g,function(t,e){return h[e]})}}})),w=up.bind(null,oi(h*o));(i=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,projection:n.projection,tilePixelRatio:o,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileClass:w,tileGrid:y,tileUrlFunction:b,transition:n.transition})||this).zDirection=n.zDirection;var C=b(y.getTileCoordForCoordAndResolution(W(y.getExtent()),d[d.length-1]),1,null),E=new Image;return E.addEventListener("error",(function(){x=h,this.changed()}).bind(i)),E.src=C,i}return sp(e,t),e}(Yc),pp="version1",dp="version2",fp="version3",gp={};gp[pp]={level0:{supports:[],formats:[],qualities:["native"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["native"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["native","color","grey","bitonal"]}},gp[dp]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByDistortedWh","sizeByWh"],formats:["jpg","png"],qualities:["default","bitonal"]}},gp[fp]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","regionSquare","sizeByW","sizeByH","sizeByWh"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionSquare","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["default"]}},gp.none={none:{supports:[],formats:[],qualities:[]}};var vp=new RegExp("^https?://library.stanford.edu/iiif/image-api/(1.1/)?compliance.html#level[0-2]$"),yp=new RegExp("^https?://iiif.io/api/image/2/level[0-2](.json)?$"),mp=new RegExp("(^https?://iiif.io/api/image/3/level[0-2](.json)?$)|(^level[0-2]$)"),_p={};_p[pp]=function(t){var e=t.getComplianceLevelSupportedFeatures();return void 0===e&&(e=gp[pp].level0),{url:void 0===t.imageInfo["@id"]?void 0:t.imageInfo["@id"].replace(/\/?(info.json)?$/g,""),supports:e.supports,formats:e.formats.concat([void 0===t.imageInfo.formats?[]:t.imageInfo.formats]),qualities:e.qualities.concat([void 0===t.imageInfo.qualities?[]:t.imageInfo.qualities]),resolutions:t.imageInfo.scale_factors,tileSize:void 0!==t.imageInfo.tile_width?void 0!==t.imageInfo.tile_height?[t.imageInfo.tile_width,t.imageInfo.tile_height]:[t.imageInfo.tile_width,t.imageInfo.tile_width]:null!=t.imageInfo.tile_height?[t.imageInfo.tile_height,t.imageInfo.tile_height]:void 0}},_p[dp]=function(t){var e=t.getComplianceLevelSupportedFeatures(),i=Array.isArray(t.imageInfo.profile)&&t.imageInfo.profile.length>1,n=i&&t.imageInfo.profile[1].supports?t.imageInfo.profile[1].supports:[],r=i&&t.imageInfo.profile[1].formats?t.imageInfo.profile[1].formats:[],o=i&&t.imageInfo.profile[1].qualities?t.imageInfo.profile[1].qualities:[];return{url:t.imageInfo["@id"].replace(/\/?(info.json)?$/g,""),sizes:void 0===t.imageInfo.sizes?void 0:t.imageInfo.sizes.map(function(t){return[t.width,t.height]}),tileSize:void 0===t.imageInfo.tiles?void 0:[t.imageInfo.tiles.map(function(t){return t.width})[0],t.imageInfo.tiles.map(function(t){return void 0===t.height?t.width:t.height})[0]],resolutions:void 0===t.imageInfo.tiles?void 0:t.imageInfo.tiles.map(function(t){return t.scaleFactors})[0],supports:e.supports.concat(n),formats:e.formats.concat(r),qualities:e.qualities.concat(o)}},_p[fp]=function(t){var e=t.getComplianceLevelSupportedFeatures(),i=void 0===t.imageInfo.extraFormats?e.formats:e.formats.concat(t.imageInfo.extraFormats),n=void 0!==t.imageInfo.preferredFormats&&Array.isArray(t.imageInfo.preferredFormats)&&t.imageInfo.preferredFormats.length>0?t.imageInfo.preferredFormats.filter(function(t){return["jpg","png","gif"].includes(t)}).reduce(function(t,e){return void 0===t&&i.includes(e)?e:t},void 0):void 0;return{url:t.imageInfo.id,sizes:void 0===t.imageInfo.sizes?void 0:t.imageInfo.sizes.map(function(t){return[t.width,t.height]}),tileSize:void 0===t.imageInfo.tiles?void 0:[t.imageInfo.tiles.map(function(t){return t.width})[0],t.imageInfo.tiles.map(function(t){return t.height})[0]],resolutions:void 0===t.imageInfo.tiles?void 0:t.imageInfo.tiles.map(function(t){return t.scaleFactors})[0],supports:void 0===t.imageInfo.extraFeatures?e.supports:e.supports.concat(t.imageInfo.extraFeatures),formats:i,qualities:void 0===t.imageInfo.extraQualities?e.qualities:e.qualities.concat(t.imageInfo.extraQualities),preferredFormat:n}};var xp=function(){function t(t){this.setImageInfo(t)}return t.prototype.setImageInfo=function(t){this.imageInfo="string"==typeof t?JSON.parse(t):t},t.prototype.getImageApiVersion=function(){if(void 0!==this.imageInfo){var t=this.imageInfo["@context"]||"ol-no-context";"string"==typeof t&&(t=[t]);for(var e=0;e<t.length;e++)switch(t[e]){case"http://library.stanford.edu/iiif/image-api/1.1/context.json":case"http://iiif.io/api/image/1/context.json":return pp;case"http://iiif.io/api/image/2/context.json":return dp;case"http://iiif.io/api/image/3/context.json":return fp;case"ol-no-context":if(this.getComplianceLevelEntryFromProfile(pp)&&this.imageInfo.identifier)return pp}S(!1,61)}},t.prototype.getComplianceLevelEntryFromProfile=function(t){if(void 0!==this.imageInfo&&void 0!==this.imageInfo.profile)switch(void 0===t&&(t=this.getImageApiVersion()),t){case pp:if(vp.test(this.imageInfo.profile))return this.imageInfo.profile;break;case fp:if(mp.test(this.imageInfo.profile))return this.imageInfo.profile;break;case dp:if("string"==typeof this.imageInfo.profile&&yp.test(this.imageInfo.profile))return this.imageInfo.profile;if(Array.isArray(this.imageInfo.profile)&&this.imageInfo.profile.length>0&&"string"==typeof this.imageInfo.profile[0]&&yp.test(this.imageInfo.profile[0]))return this.imageInfo.profile[0]}},t.prototype.getComplianceLevelFromProfile=function(t){var e=this.getComplianceLevelEntryFromProfile(t);if(void 0!==e){var i=e.match(/level[0-2](\.json)?$/g);return Array.isArray(i)?i[0].replace(".json",""):void 0}},t.prototype.getComplianceLevelSupportedFeatures=function(){if(void 0!==this.imageInfo){var t=this.getImageApiVersion(),e=this.getComplianceLevelFromProfile(t);return void 0===e?gp.none.none:gp[t][e]}},t.prototype.getTileSourceOptions=function(t){var e=t||{},i=this.getImageApiVersion();if(void 0!==i){var n=void 0===i?void 0:_p[i](this);if(void 0!==n)return{url:n.url,version:i,size:[this.imageInfo.width,this.imageInfo.height],sizes:n.sizes,format:void 0!==e.format&&n.formats.includes(e.format)?e.format:void 0!==n.preferredFormat?n.preferredFormat:"jpg",supports:n.supports,quality:e.quality&&n.qualities.includes(e.quality)?e.quality:n.qualities.includes("native")?"native":"default",resolutions:Array.isArray(n.resolutions)?n.resolutions.sort(function(t,e){return e-t}):void 0,tileSize:n.tileSize}}},t}(),bp=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),wp=function(t){function e(e){var i=this,n=e||{},r=n.url||"";r+=r.lastIndexOf("/")===r.length-1||""===r?"":"/";var o=n.version||dp,a=n.sizes||[],s=n.size;S(null!=s&&Array.isArray(s)&&2==s.length&&!isNaN(s[0])&&s[0]>0&&!isNaN(s[1])&&s[1]>0,60);var l,h,u,c=s[0],p=s[1],d=n.tileSize,f=n.tilePixelRatio||1,g=n.format||"jpg",v=n.quality||(n.version==pp?"native":"default"),y=n.resolutions||[],m=n.supports||[],_=n.extent||[0,-p,c,0],x=null!=a&&Array.isArray(a)&&a.length>0,b=void 0!==d&&("number"==typeof d&&Number.isInteger(d)&&d>0||Array.isArray(d)&&d.length>0),w=null!=m&&Array.isArray(m)&&(m.includes("regionByPx")||m.includes("regionByPct"))&&(m.includes("sizeByWh")||m.includes("sizeByH")||m.includes("sizeByW")||m.includes("sizeByPct"));if(y.sort(function(t,e){return e-t}),b||w)if(null!=d&&("number"==typeof d&&Number.isInteger(d)&&d>0?(l=d,h=d):Array.isArray(d)&&d.length>0&&((1==d.length||null==d[1]&&Number.isInteger(d[0]))&&(l=d[0],h=d[0]),2==d.length&&(Number.isInteger(d[0])&&Number.isInteger(d[1])?(l=d[0],h=d[1]):null==d[0]&&Number.isInteger(d[1])&&(l=d[1],h=d[1])))),void 0!==l&&void 0!==h||(l=256,h=256),0==y.length)for(var C=u=Math.max(Math.ceil(Math.log(c/l)/Math.LN2),Math.ceil(Math.log(p/h)/Math.LN2));C>=0;C--)y.push(Math.pow(2,C));else{var E=Math.max.apply(Math,y);u=Math.round(Math.log(E)/Math.LN2)}else if(l=c,h=p,y=[],x){a.sort(function(t,e){return t[0]-e[0]}),u=-1;var T=[];for(C=0;C<a.length;C++){var P=c/a[C][0];y.length>0&&y[y.length-1]==P?T.push(C):(y.push(P),u++)}if(T.length>0)for(C=0;C<T.length;C++)a.splice(T[C]-C,1)}else y.push(1),a.push([c,p]),u=0;var L=new Ru({tileSize:[l,h],extent:_,origin:q(_),resolutions:y}),I=up.bind(null,oi(d||256).map(function(t){return t*f}));return(i=t.call(this,{attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,state:n.state,tileClass:I,tileGrid:L,tilePixelRatio:n.tilePixelRatio,tileUrlFunction:function(t,e,i){var n,s,d=t[0];if(!(d>u)){var f=t[1],_=t[2],S=y[d];if(!(void 0===f||void 0===_||void 0===S||f<0||Math.ceil(c/S/l)<=f||_<0||Math.ceil(p/S/h)<=_)){if(w||b){var C=f*l*S,E=_*h*S,T=l*S,P=h*S,L=l,I=h;C+T>c&&(T=c-C),E+P>p&&(P=p-E),C+l*S>c&&(L=Math.floor((c-C+S-1)/S)),E+h*S>p&&(I=Math.floor((p-E+S-1)/S)),0==C&&T==c&&0==E&&P==p?n="full":!w||m.includes("regionByPx")?n=C+","+E+","+T+","+P:m.includes("regionByPct")&&(n="pct:"+Nn(C/c*100)+","+Nn(E/p*100)+","+Nn(T/c*100)+","+Nn(P/p*100)),o!=fp||w&&!m.includes("sizeByWh")?!w||m.includes("sizeByW")?s=L+",":m.includes("sizeByH")?s=","+I:m.includes("sizeByWh")?s=L+","+I:m.includes("sizeByPct")&&(s="pct:"+Nn(100/S)):s=L+","+I}else if(n="full",x){var O=a[d][0],A=a[d][1];s=o==fp?O==c&&A==p?"max":O+","+A:O==c?"full":O+","}else s=o==fp?"max":"full";return r+n+"/"+s+"/0/"+v+"."+g}}},transition:n.transition})||this).zDirection=n.zDirection,i}return bp(e,t),e}(Yc),Sp=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Cp=function(t){function e(e,i,n,r,o,a){var s=this,l=e.getExtent(),h=i.getExtent(),u=h?H(n,h):n,c=An(e,i,W(u),r),p=new Oc(e,i,u,l,.5*c,r),d=a(p.calculateSourceExtent(),c,o),f=d?tu:nu,g=d?d.getPixelRatio():1;return(s=t.call(this,n,r,g,f)||this).targetProj_=i,s.maxSourceExtent_=l,s.triangulation_=p,s.targetResolution_=r,s.targetExtent_=n,s.sourceImage_=d,s.sourcePixelRatio_=g,s.canvas_=null,s.sourceListenerKey_=null,s}return Sp(e,t),e.prototype.disposeInternal=function(){1==this.state&&this.unlistenSource_(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.canvas_},e.prototype.getProjection=function(){return this.targetProj_},e.prototype.reproject_=function(){var t=this.sourceImage_.getState();if(t==eu){var e=K(this.targetExtent_)/this.targetResolution_,i=V(this.targetExtent_)/this.targetResolution_;this.canvas_=Mn(e,i,this.sourcePixelRatio_,this.sourceImage_.getResolution(),0,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0)}this.state=t,this.changed()},e.prototype.load=function(){if(this.state==tu){this.state=1,this.changed();var t=this.sourceImage_.getState();t==eu||t==iu?this.reproject_():(this.sourceListenerKey_=s(this.sourceImage_,ha,function(t){var e=this.sourceImage_.getState();e!=eu&&e!=iu||(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}},e.prototype.unlistenSource_=function(){h(this.sourceListenerKey_),this.sourceListenerKey_=null},e}(sc),Ep=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Tp=function(t){function e(e,i){var n=t.call(this,e)||this;return n.image=i,n}return Ep(e,t),e}(aa),Pp=function(t){function e(e){var i=t.call(this,{attributions:e.attributions,projection:e.projection,state:e.state})||this;return i.resolutions_=void 0!==e.resolutions?e.resolutions:null,i.reprojectedImage_=null,i.reprojectedRevision_=0,i}return Ep(e,t),e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.findNearestResolution=function(t){if(this.resolutions_){var e=p(this.resolutions_,t,0);t=this.resolutions_[e]}return t},e.prototype.getImage=function(t,e,i,n){var r=this.getProjection();if(r&&n&&!Pt(r,n)){if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Pt(this.reprojectedImage_.getProjection(),n)&&this.reprojectedImage_.getResolution()==e&&N(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new Cp(r,n,t,e,i,(function(t,e,i){return this.getImageInternal(t,e,i,r)}).bind(this)),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}return r&&(n=r),this.getImageInternal(t,e,i,n)},e.prototype.getImageInternal=function(t,e,i,r){return n()},e.prototype.handleImageChange=function(t){var e=t.target;switch(e.getState()){case 1:this.loading=!0,this.dispatchEvent(new Tp("imageloadstart",e));break;case eu:this.loading=!1,this.dispatchEvent(new Tp("imageloadend",e));break;case iu:this.loading=!1,this.dispatchEvent(new Tp("imageloaderror",e))}},e}(Fc),Lp=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ip=function(t){function e(e){var i=this,n=e||{};return(i=t.call(this,{attributions:n.attributions,projection:n.projection,resolutions:n.resolutions})||this).crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:null,i.hidpi_=void 0===n.hidpi||n.hidpi,i.url_=n.url,i.imageLoadFunction_=void 0!==n.imageLoadFunction?n.imageLoadFunction:Dn,i.params_=n.params||{},i.image_=null,i.imageSize_=[0,0],i.renderedRevision_=0,i.ratio_=void 0!==n.ratio?n.ratio:1.5,i}return Lp(e,t),e.prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function(t,e,i,n){if(void 0===this.url_)return null;e=this.findNearestResolution(e),i=this.hidpi_?i:1;var r=this.image_;if(r&&this.renderedRevision_==this.getRevision()&&r.getResolution()==e&&r.getPixelRatio()==i&&I(r.getExtent(),t))return r;var o={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};na(o,this.params_);var a=((t=t.slice())[0]+t[2])/2,s=(t[1]+t[3])/2;if(1!=this.ratio_){var l=this.ratio_*K(t)/2,h=this.ratio_*V(t)/2;t[0]=a-l,t[1]=s-h,t[2]=a+l,t[3]=s+h}var u=e/i,c=Math.ceil(K(t)/u),p=Math.ceil(V(t)/u);t[0]=a-u*c/2,t[2]=a+u*c/2,t[1]=s-u*p/2,t[3]=s+u*p/2,this.imageSize_[0]=c,this.imageSize_[1]=p;var d=this.getRequestUrl_(t,this.imageSize_,i,n,o);return this.image_=new hc(t,e,i,d,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener(ha,this.handleImageChange.bind(this)),this.image_},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.getRequestUrl_=function(t,e,i,n,r){var o=n.getCode().split(":").pop();r.SIZE=e[0]+","+e[1],r.BBOX=t.join(","),r.BBOXSR=o,r.IMAGESR=o,r.DPI=Math.round(90*i);var a=this.url_,s=a.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return s==a&&S(!1,50),jn(s,r)},e.prototype.getUrl=function(){return this.url_},e.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},e.prototype.updateParams=function(t){na(this.params_,t),this.image_=null,this.changed()},e}(Pp),Op=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ap=function(t){function e(e,i,n,r,o){var a=this;return(a=t.call(this,e,i,n,void 0!==o?tu:eu)||this).loader_=void 0!==o?o:null,a.canvas_=r,a.error_=null,a}return Op(e,t),e.prototype.getError=function(){return this.error_},e.prototype.handleLoad_=function(t){t?(this.error_=t,this.state=iu):this.state=eu,this.changed()},e.prototype.load=function(){this.state==tu&&(this.state=1,this.changed(),this.loader_(this.handleLoad_.bind(this)))},e.prototype.getImage=function(){return this.canvas_},e}(sc),Rp=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Mp=function(t){function e(e){var i=this,n=e||{};return(i=t.call(this,{attributions:n.attributions,projection:n.projection,resolutions:n.resolutions,state:n.state})||this).canvasFunction_=n.canvasFunction,i.canvas_=null,i.renderedRevision_=0,i.ratio_=void 0!==n.ratio?n.ratio:1.5,i}return Rp(e,t),e.prototype.getImageInternal=function(t,e,i,n){e=this.findNearestResolution(e);var r=this.canvas_;if(r&&this.renderedRevision_==this.getRevision()&&r.getResolution()==e&&r.getPixelRatio()==i&&I(r.getExtent(),t))return r;Q(t=t.slice(),this.ratio_);var o=[K(t)/e*i,V(t)/e*i],a=this.canvasFunction_.call(this,t,e,i,o,n);return a&&(r=new Ap(t,e,i,a)),this.canvas_=r,this.renderedRevision_=this.getRevision(),r},e}(Pp),Fp=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),kp=function(t){function e(e){var i=t.call(this,{projection:e.projection,resolutions:e.resolutions})||this;return i.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null,i.displayDpi_=void 0!==e.displayDpi?e.displayDpi:96,i.params_=e.params||{},i.url_=e.url,i.imageLoadFunction_=void 0!==e.imageLoadFunction?e.imageLoadFunction:Dn,i.hidpi_=void 0===e.hidpi||e.hidpi,i.metersPerUnit_=void 0!==e.metersPerUnit?e.metersPerUnit:1,i.ratio_=void 0!==e.ratio?e.ratio:1,i.useOverlay_=void 0!==e.useOverlay&&e.useOverlay,i.image_=null,i.renderedRevision_=0,i}return Fp(e,t),e.prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function(t,e,i,n){e=this.findNearestResolution(e),i=this.hidpi_?i:1;var r=this.image_;if(r&&this.renderedRevision_==this.getRevision()&&r.getResolution()==e&&r.getPixelRatio()==i&&I(r.getExtent(),t))return r;1!=this.ratio_&&Q(t=t.slice(),this.ratio_);var o=[K(t)/e*i,V(t)/e*i];if(void 0!==this.url_){var a=this.getUrl(this.url_,this.params_,t,o,n);(r=new hc(t,e,i,a,this.crossOrigin_,this.imageLoadFunction_)).addEventListener(ha,this.handleImageChange.bind(this))}else r=null;return this.image_=r,this.renderedRevision_=this.getRevision(),r},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.updateParams=function(t){na(this.params_,t),this.changed()},e.prototype.getUrl=function(t,e,i,n,r){var o=function(t,e,i,n){var r=K(t),o=V(t),a=e[0],s=e[1],l=.0254/n;return s*r>a*o?r*i/(a*l):o*i/(s*l)}(i,n,this.metersPerUnit_,this.displayDpi_),a=W(i),s={OPERATION:this.useOverlay_?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:this.displayDpi_,SETDISPLAYWIDTH:Math.round(n[0]),SETDISPLAYHEIGHT:Math.round(n[1]),SETVIEWSCALE:o,SETVIEWCENTERX:a[0],SETVIEWCENTERY:a[1]};return na(s,e),jn(t,s)},e.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e}(Pp),Np=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Dp=function(t){function e(e){var i=this,n=void 0!==e.crossOrigin?e.crossOrigin:null,r=void 0!==e.imageLoadFunction?e.imageLoadFunction:Dn;return(i=t.call(this,{attributions:e.attributions,projection:bt(e.projection)})||this).url_=e.url,i.imageExtent_=e.imageExtent,i.image_=new hc(i.imageExtent_,void 0,1,i.url_,n,r),i.imageSize_=e.imageSize?e.imageSize:null,i.image_.addEventListener(ha,i.handleImageChange.bind(i)),i}return Np(e,t),e.prototype.getImageExtent=function(){return this.imageExtent_},e.prototype.getImageInternal=function(t,e,i,n){return J(t,this.image_.getExtent())?this.image_:null},e.prototype.getUrl=function(){return this.url_},e.prototype.handleImageChange=function(e){if(this.image_.getState()==eu){var i=this.image_.getExtent(),n=this.image_.getImage(),r=void 0,o=void 0;this.imageSize_?(r=this.imageSize_[0],o=this.imageSize_[1]):(r=n.width,o=n.height);var a=V(i)/o,s=Math.ceil(K(i)/a);if(s!=r){var l=Qe(s,o),h=l.canvas;l.drawImage(n,0,0,r,o,0,0,h.width,h.height),this.image_.setImage(h)}}t.prototype.handleImageChange.call(this,e)},e}(Pp),jp=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Gp=[101,101],zp=function(t){function e(e){var i=this,n=e||{};return(i=t.call(this,{attributions:n.attributions,projection:n.projection,resolutions:n.resolutions})||this).crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:null,i.url_=n.url,i.imageLoadFunction_=void 0!==n.imageLoadFunction?n.imageLoadFunction:Dn,i.params_=n.params||{},i.v13_=!0,i.updateV13_(),i.serverType_=n.serverType,i.hidpi_=void 0===n.hidpi||n.hidpi,i.image_=null,i.imageSize_=[0,0],i.renderedRevision_=0,i.ratio_=void 0!==n.ratio?n.ratio:1.5,i}return jp(e,t),e.prototype.getFeatureInfoUrl=function(t,e,i,n){if(void 0!==this.url_){var r=bt(i),o=this.getProjection();o&&o!==r&&(e=An(o,r,t,e),t=Ot(t,r,o));var a=U(t,e,0,Gp),s={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};na(s,this.params_,n);var l=Math.floor((t[0]-a[0])/e),h=Math.floor((a[3]-t[1])/e);return s[this.v13_?"I":"X"]=l,s[this.v13_?"J":"Y"]=h,this.getRequestUrl_(a,Gp,1,o||r,s)}},e.prototype.getLegendUrl=function(t,e){if(void 0!==this.url_){var i={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===e||void 0===e.LAYER){var n=this.params_.LAYERS;if(Array.isArray(n)&&1!==n.length)return;i.LAYER=n}if(void 0!==t){var r=this.getProjection()?this.getProjection().getMetersPerUnit():1;i.SCALE=t*r*39.37*(25.4/.28)}return na(i,e),jn(this.url_,i)}},e.prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function(t,e,i,n){if(void 0===this.url_)return null;e=this.findNearestResolution(e),1==i||this.hidpi_&&void 0!==this.serverType_||(i=1);var r=e/i,o=W(t),a=U(o,r,0,[Math.ceil(K(t)/r),Math.ceil(V(t)/r)]),s=U(o,r,0,[Math.ceil(this.ratio_*K(t)/r),Math.ceil(this.ratio_*V(t)/r)]),l=this.image_;if(l&&this.renderedRevision_==this.getRevision()&&l.getResolution()==e&&l.getPixelRatio()==i&&I(l.getExtent(),a))return l;var h={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};na(h,this.params_),this.imageSize_[0]=Math.round(K(s)/r),this.imageSize_[1]=Math.round(V(s)/r);var u=this.getRequestUrl_(s,this.imageSize_,i,n,h);return this.image_=new hc(s,e,i,u,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener(ha,this.handleImageChange.bind(this)),this.image_},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.getRequestUrl_=function(t,e,i,n,r){if(S(void 0!==this.url_,9),r[this.v13_?"CRS":"SRS"]=n.getCode(),"STYLES"in this.params_||(r.STYLES=""),1!=i)switch(this.serverType_){case"geoserver":var o=90*i+.5|0;"FORMAT_OPTIONS"in r?r.FORMAT_OPTIONS+=";dpi:"+o:r.FORMAT_OPTIONS="dpi:"+o;break;case"mapserver":r.MAP_RESOLUTION=90*i;break;case"carmentaserver":case"qgis":r.DPI=90*i;break;default:S(!1,8)}r.WIDTH=e[0],r.HEIGHT=e[1];var a,s=n.getAxisOrientation();return a=this.v13_&&"ne"==s.substr(0,2)?[t[1],t[0],t[3],t[2]]:t,r.BBOX=a.join(","),jn(this.url_,r)},e.prototype.getUrl=function(){return this.url_},e.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},e.prototype.updateParams=function(t){na(this.params_,t),this.updateV13_(),this.image_=null,this.changed()},e.prototype.updateV13_=function(){this.v13_=Fe(this.params_.VERSION||"1.3.0","1.3")>=0},e}(Pp),Bp=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Yp='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.',Xp=function(t){function e(e){var i=e||{};return t.call(this,{attributions:void 0!==i.attributions?i.attributions:[Yp],cacheSize:i.cacheSize,crossOrigin:void 0!==i.crossOrigin?i.crossOrigin:"anonymous",opaque:void 0===i.opaque||i.opaque,maxZoom:void 0!==i.maxZoom?i.maxZoom:19,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileLoadFunction:i.tileLoadFunction,url:void 0!==i.url?i.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png",wrapX:i.wrapX,attributionsCollapsible:!1})||this}return Bp(e,t),e}(Vc),Wp=i(3),Up=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Vp=function(t){function e(e){return t.call(this,e||{})||this}return Up(e,t),e}(kl),Hp=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),qp=function(t){function e(e){var i=t.call(this)||this;return i.boundHandleImageChange_=i.handleImageChange_.bind(i),i.layer_=e,i}return Hp(e,t),e.prototype.getFeatures=function(t){return n()},e.prototype.prepareFrame=function(t){return n()},e.prototype.renderFrame=function(t,e){return n()},e.prototype.loadedTileCallback=function(t,e,i){t[e]||(t[e]={}),t[e][i.tileCoord.toString()]=i},e.prototype.createLoadedTileFinder=function(t,e,i){return(function(n,r){var o=this.loadedTileCallback.bind(this,i,n);return t.forEachLoadedTile(e,n,r,o)}).bind(this)},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,r){},e.prototype.getDataAtPixel=function(t,e,i){return n()},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleFontsChanged=function(){},e.prototype.handleImageChange_=function(t){t.target.getState()===eu&&this.renderIfReadyAndVisible()},e.prototype.loadImage=function(t){var e=t.getState();return e!=eu&&e!=iu&&t.addEventListener(ha,this.boundHandleImageChange_),e==tu&&(t.load(),e=t.getState()),e==eu},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==Sl&&t.changed()},e}(_a),Zp=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Kp=function(t){function e(e){var i=t.call(this,e)||this;return i.container=null,i.tempTransform_=[1,0,0,1,0,0],i.pixelTransform=[1,0,0,1,0,0],i.inversePixelTransform=[1,0,0,1,0,0],i.context=null,i.containerReused=!1,i}return Zp(e,t),e.prototype.useContainer=function(t,e,i){var n,r,o=this.getLayer().getClassName();if(t&&""===t.style.opacity&&t.className===o&&(s=t.firstElementChild)instanceof HTMLCanvasElement&&(r=s.getContext("2d")),r&&r.canvas.style.transform===e?(this.container=t,this.context=r,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(n=document.createElement("div")).className=o;var a=n.style;a.position="absolute",a.width="100%",a.height="100%";var s=(r=Qe()).canvas;n.appendChild(s),(a=s.style).position="absolute",a.left="0",a.transformOrigin="top left",this.container=n,this.context=r}},e.prototype.clip=function(t,e,i){var n=e.pixelRatio,r=e.size[0]*n/2,o=e.size[1]*n/2,a=e.viewState.rotation,s=q(i),l=Z(i),h=X(i),u=Y(i);zt(e.coordinateToPixelTransform,s),zt(e.coordinateToPixelTransform,l),zt(e.coordinateToPixelTransform,h),zt(e.coordinateToPixelTransform,u),t.save(),Ei(t,-a,r,o),t.beginPath(),t.moveTo(s[0]*n,s[1]*n),t.lineTo(l[0]*n,l[1]*n),t.lineTo(h[0]*n,h[1]*n),t.lineTo(u[0]*n,u[1]*n),t.clip(),Ei(t,a,r,o)},e.prototype.clipUnrotated=function(t,e,i){var n=q(i),r=Z(i),o=X(i),a=Y(i);zt(e.coordinateToPixelTransform,n),zt(e.coordinateToPixelTransform,r),zt(e.coordinateToPixelTransform,o),zt(e.coordinateToPixelTransform,a);var s=this.inversePixelTransform;zt(s,n),zt(s,r),zt(s,o),zt(s,a),t.save(),t.beginPath(),t.moveTo(Math.round(n[0]),Math.round(n[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()},e.prototype.dispatchRenderEvent_=function(t,e,i){var n=this.getLayer();if(n.hasListener(t)){var r=new Mh(t,this.inversePixelTransform,i,e);n.dispatchEvent(r)}},e.prototype.preRender=function(t,e){this.dispatchRenderEvent_("prerender",t,e)},e.prototype.postRender=function(t,e){this.dispatchRenderEvent_(nl,t,e)},e.prototype.getRenderTransform=function(t,e,i,n,r,o,a){var s=n/e;return Yt(this.tempTransform_,r/2,o/2,s,-s,-i,-t[0]+a,-t[1])},e.prototype.getDataAtPixel=function(t,e,i){var n,r=zt(this.inversePixelTransform,t.slice()),o=this.context;try{n=o.getImageData(Math.round(r[0]),Math.round(r[1]),1,1).data}catch(t){return"SecurityError"===t.name?new Uint8Array:n}return 0===n[3]?null:n},e}(qp),Jp=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),$p=function(t){function e(e){var i=t.call(this,e)||this;return i.image_=null,i}return Jp(e,t),e.prototype.getImage=function(){return this.image_?this.image_.getImage():null},e.prototype.prepareFrame=function(t){var e=t.layerStatesArray[t.layerIndex],i=t.pixelRatio,n=t.viewState,r=n.resolution,o=this.getLayer().getSource(),a=t.viewHints,s=t.extent;if(void 0!==e.extent&&(s=H(s,Nt(e.extent,n.projection))),!a[0]&&!a[1]&&!$(s))if(o){var l=o.getImage(s,r,i,n.projection);l&&this.loadImage(l)&&(this.image_=l)}else this.image_=null;return!!this.image_},e.prototype.renderFrame=function(t,e){var i=this.image_,n=i.getExtent(),r=i.getResolution(),o=i.getPixelRatio(),a=t.layerStatesArray[t.layerIndex],s=t.pixelRatio,l=t.viewState,h=l.center,u=t.size,c=s*r/(l.resolution*o),p=Math.round(u[0]*s),d=Math.round(u[1]*s),f=l.rotation;if(f){var g=Math.round(Math.sqrt(p*p+d*d));p=g,d=g}Yt(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/s,1/s,f,-p/2,-d/2),Xt(this.inversePixelTransform,this.pixelTransform);var v=Pi(this.pixelTransform);this.useContainer(e,v,a.opacity);var y=this.context,m=y.canvas;m.width!=p||m.height!=d?(m.width=p,m.height=d):this.containerReused||y.clearRect(0,0,p,d);var _=!1;if(a.extent){var x=Nt(a.extent,l.projection);(_=!I(x,t.extent)&&J(x,t.extent))&&this.clipUnrotated(y,t,x)}var b=i.getImage(),w=Yt(this.tempTransform_,p/2,d/2,c,c,0,o*(n[0]-h[0])/r,o*(h[1]-n[3])/r);this.renderedResolution=r*s/o;var S=w[4],C=w[5],E=b.width*w[0],T=b.height*w[3];if(this.preRender(y,t),E>=.5&&T>=.5){var P=a.opacity,L=void 0;1!==P&&(L=this.context.globalAlpha,this.context.globalAlpha=P),this.context.drawImage(b,0,0,+b.width,+b.height,Math.round(S),Math.round(C),Math.round(E),Math.round(T)),1!==P&&(this.context.globalAlpha=L)}return this.postRender(y,t),_&&y.restore(),v!==m.style.transform&&(m.style.transform=v),this.container},e}(Kp),Qp=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),td=function(t){function e(e){return t.call(this,e)||this}return Qp(e,t),e.prototype.createRenderer=function(){return new $p(this)},e}(Vp),ed="useInterimTilesOnError",id=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),nd=function(t){function e(e){var i=this,n=e||{},r=na({},n);return delete r.preload,delete r.useInterimTilesOnError,(i=t.call(this,r)||this).setPreload(void 0!==n.preload?n.preload:0),i.setUseInterimTilesOnError(void 0===n.useInterimTilesOnError||n.useInterimTilesOnError),i}return id(e,t),e.prototype.getPreload=function(){return this.get("preload")},e.prototype.setPreload=function(t){this.set("preload",t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(ed)},e.prototype.setUseInterimTilesOnError=function(t){this.set(ed,t)},e}(kl),rd=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),od=function(t){function e(e){var i=t.call(this,e)||this;return i.extentChanged=!0,i.renderedExtent_=null,i.renderedProjection=null,i.renderedTiles=[],i.newTiles_=!1,i.tmpExtent=[1/0,1/0,-1/0,-1/0],i.tmpTileRange_=new Ou(0,0,0,0),i}return rd(e,t),e.prototype.isDrawableTile=function(t){var e=this.getLayer(),i=t.getState(),n=e.getUseInterimTilesOnError();return i==ol||i==al||3==i&&!n},e.prototype.getTile=function(t,e,i,n){var r=n.pixelRatio,o=n.viewState.projection,a=this.getLayer(),s=a.getSource().getTile(t,e,i,r,o);return 3==s.getState()&&(a.getUseInterimTilesOnError()?a.getPreload()>0&&(this.newTiles_=!0):s.setState(ol)),this.isDrawableTile(s)||(s=s.getInterimTile()),s},e.prototype.loadedTileCallback=function(e,i,n){return!!this.isDrawableTile(n)&&t.prototype.loadedTileCallback.call(this,e,i,n)},e.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},e.prototype.renderFrame=function(t,e){var i=t.layerStatesArray[t.layerIndex],n=t.viewState,o=n.projection,a=n.resolution,s=n.center,l=n.rotation,h=t.pixelRatio,c=this.getLayer(),p=c.getSource(),d=p.getRevision(),f=p.getTileGridForProjection(o),g=f.getZForResolution(a,p.zDirection),v=f.getResolution(g),y=t.extent,m=i.extent&&Nt(i.extent,o);m&&(y=H(y,Nt(i.extent,o)));var _=p.getTilePixelRatio(h),x=Math.round(t.size[0]*_),b=Math.round(t.size[1]*_);if(l){var w=Math.round(Math.sqrt(x*x+b*b));x=w,b=w}var S=v*x/2/_,C=v*b/2/_,E=[s[0]-S,s[1]-C,s[0]+S,s[1]+C],T=f.getTileRangeForExtentAndZ(y,g),P={};P[g]={};var L=this.createLoadedTileFinder(p,o,P),I=this.tmpExtent,O=this.tmpTileRange_;this.newTiles_=!1;for(var A=T.minX;A<=T.maxX;++A)for(var R=T.minY;R<=T.maxY;++R){var M=this.getTile(g,A,R,t);if(this.isDrawableTile(M)){var F=r(this);if(M.getState()==ol){P[g][M.tileCoord.toString()]=M;var k=M.inTransition(F);this.newTiles_||!k&&-1!==this.renderedTiles.indexOf(M)||(this.newTiles_=!0)}if(1===M.getAlpha(F,t.time))continue}var D=f.getTileCoordChildTileRange(M.tileCoord,O,I),j=!1;D&&(j=L(g+1,D)),j||f.forEachTileCoordParentTileRange(M.tileCoord,L,O,I)}var G=v/a;Yt(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/_,1/_,l,-x/2,-b/2);var z=Pi(this.pixelTransform);this.useContainer(e,z,i.opacity);var B=this.context,Y=B.canvas;Xt(this.inversePixelTransform,this.pixelTransform),Yt(this.tempTransform_,x/2,b/2,G,G,0,-x/2,-b/2),Y.width!=x||Y.height!=b?(Y.width=x,Y.height=b):this.containerReused||B.clearRect(0,0,x,b),m&&this.clipUnrotated(B,t,m),this.preRender(B,t),this.renderedTiles.length=0;var X,W,U,V=Object.keys(P).map(Number);V.sort(u),1!==i.opacity||this.containerReused&&!p.getOpaque(t.viewState.projection)?(X=[],W=[]):V=V.reverse();for(var Z=V.length-1;Z>=0;--Z){var K=V[Z],J=p.getTilePixelSize(K,h,o),$=f.getResolution(K)/v,Q=J[0]*$*G,tt=J[1]*$*G,et=f.getTileCoordForCoordAndZ(q(E),K),it=f.getTileCoordExtent(et),nt=zt(this.tempTransform_,[_*(it[0]-E[0])/v,_*(E[3]-it[3])/v]),rt=_*p.getGutterForProjection(o),ot=P[K];for(var at in ot){var st=(M=ot[at]).tileCoord,lt=nt[0]-(et[1]-st[1])*Q,ht=Math.round(lt+Q),ut=nt[1]-(et[2]-st[2])*tt,ct=Math.round(ut+tt),pt=ht-(A=Math.round(lt)),dt=ct-(R=Math.round(ut)),ft=g===K;if(!(k=ft&&1!==M.getAlpha(r(this),t.time)))if(X){B.save(),U=[A,R,A+pt,R,A+pt,R+dt,A,R+dt];for(var gt=0,vt=X.length;gt<vt;++gt)if(g!==K&&K<W[gt]){var yt=X[gt];B.beginPath(),B.moveTo(U[0],U[1]),B.lineTo(U[2],U[3]),B.lineTo(U[4],U[5]),B.lineTo(U[6],U[7]),B.moveTo(yt[6],yt[7]),B.lineTo(yt[4],yt[5]),B.lineTo(yt[2],yt[3]),B.lineTo(yt[0],yt[1]),B.clip()}X.push(U),W.push(K)}else B.clearRect(A,R,pt,dt);this.drawTileImage(M,t,A,R,pt,dt,rt,ft,i.opacity),X&&!k&&B.restore(),this.renderedTiles.push(M),this.updateUsedTiles(t.usedTiles,p,M)}}return this.renderedRevision=d,this.renderedResolution=v,this.extentChanged=!this.renderedExtent_||!N(this.renderedExtent_,E),this.renderedExtent_=E,this.renderedPixelRatio=h,this.renderedProjection=o,this.manageTilePyramid(t,p,f,h,o,y,g,c.getPreload()),this.scheduleExpireCache(t,p),this.postRender(B,t),i.extent&&B.restore(),z!==Y.style.transform&&(Y.style.transform=z),this.container},e.prototype.drawTileImage=function(t,e,i,n,o,a,s,l,h){var u=this.getTileImage(t);if(u){var c=r(this),p=l?t.getAlpha(c,e.time):1,d=h*p,f=d!==this.context.globalAlpha;f&&(this.context.save(),this.context.globalAlpha=d),this.context.drawImage(u,s,s,u.width-2*s,u.height-2*s,i,n,o,a),f&&this.context.restore(),1!==p?e.animate=!0:l&&t.endTransition(c)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getTileImage=function(t){return t.getImage()},e.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var i=(function(t,e,i){var n=r(t);n in i.usedTiles&&t.expireCache(i.viewState.projection,i.usedTiles[n])}).bind(null,e);t.postRenderFunctions.push(i)}},e.prototype.updateUsedTiles=function(t,e,i){var n=r(e);n in t||(t[n]={}),t[n][i.getKey()]=!0},e.prototype.manageTilePyramid=function(t,e,i,n,o,a,s,l,h){var u=r(e);u in t.wantedTiles||(t.wantedTiles[u]={});var c,p,d,f,g,v,y=t.wantedTiles[u],m=t.tileQueue;for(v=i.getMinZoom();v<=s;++v)for(p=i.getTileRangeForExtentAndZ(a,v,p),d=i.getResolution(v),f=p.minX;f<=p.maxX;++f)for(g=p.minY;g<=p.maxY;++g)s-v<=l?((c=e.getTile(v,f,g,n,o)).getState()==rl&&(y[c.getKey()]=!0,m.isKeyQueued(c.getKey())||m.enqueue([c,u,i.getTileCoordCenter(c.tileCoord),d])),void 0!==h&&h(c)):e.useTile(v,f,g,o)},e}(Kp),ad=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),sd=function(t){function e(e){return t.call(this,e)||this}return ad(e,t),e.prototype.createRenderer=function(){return new od(this)},e}(nd),ld=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),hd="pixel",ud=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.extent=i.extent,r.resolution=i.viewState.resolution/i.pixelRatio,r.data=n,r}return ld(e,t),e}(aa),cd=function(t){function e(e){var i=t.call(this,{projection:null})||this;i.worker_=null,i.operationType_=void 0!==e.operationType?e.operationType:hd,i.threads_=void 0!==e.threads?e.threads:1,i.layers_=function(t){for(var e=t.length,i=new Array(e),n=0;n<e;++n)i[n]=function(t){var e;return t instanceof Fc?t instanceof jc?e=new sd({source:t}):t instanceof Pp&&(e=new td({source:t})):e=t,e}(t[n]);return i}(e.sources);for(var n=i.changed.bind(i),r=0,o=i.layers_.length;r<o;++r)i.layers_[r].addEventListener(ha,n);return i.tileQueue_=new hl(function(){return 1},i.changed.bind(i)),i.renderedImageCanvas_=null,i.frameState_={animate:!1,coordinateToPixelTransform:[1,0,0,1,0,0],extent:null,index:0,layerIndex:0,layerStatesArray:i.layers_.map(function(t){return t.getLayerState()}),pixelRatio:1,pixelToCoordinateTransform:[1,0,0,1,0,0],postRenderFunctions:[],size:[0,0],tileQueue:i.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},declutterItems:[]},i.setAttributions(function(t){for(var i=[],n=0,r=e.sources.length;n<r;++n){var o=e.sources[n],a=(o instanceof Fc?o:o.getSource()).getAttributions();if("function"==typeof a){var s=a(t);i.push.apply(i,s)}}return 0!==i.length?i:null}),void 0!==e.operation&&i.setOperation(e.operation,e.lib),i}return ld(e,t),e.prototype.setOperation=function(t,e){this.worker_=new Wp.Processor({operation:t,imageOps:"image"===this.operationType_,queue:1,lib:e,threads:this.threads_}),this.changed()},e.prototype.updateFrameState_=function(t,e,i){var n=na({},this.frameState_);n.viewState=na({},n.viewState);var r=W(t);n.extent=t.slice(),n.size[0]=Math.round(K(t)/e),n.size[1]=Math.round(V(t)/e),n.time=1/0;var o=n.viewState;return o.center=r,o.projection=i,o.resolution=e,n},e.prototype.allSourcesReady_=function(){for(var t=!0,e=0,i=this.layers_.length;e<i;++e)if(this.layers_[e].getSource().getState()!==Sl){t=!1;break}return t},e.prototype.getImage=function(t,e,i,n){if(!this.allSourcesReady_())return null;var r=this.updateFrameState_(t,e,n);if(this.requestedFrameState_=r,this.renderedImageCanvas_){var o=this.renderedImageCanvas_.getResolution(),a=this.renderedImageCanvas_.getExtent();e===o&&N(t,a)||(this.renderedImageCanvas_=null)}return this.renderedImageCanvas_&&this.getRevision()===this.renderedRevision_||this.processSources_(),r.tileQueue.loadMoreTiles(16,16),r.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_},e.prototype.processSources_=function(){for(var t=this.requestedFrameState_,e=this.layers_.length,i=new Array(e),n=0;n<e;++n){t.layerIndex=n;var r=function(t,e){var i=t.getRenderer();if(!i)throw new Error("Unsupported layer type: "+t);if(!i.prepareFrame(e))return null;var n,r=e.size[0],o=e.size[1],a=i.renderFrame(e,null);if(a&&(n=a.firstElementChild),!(n instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+n);if(n.width===r&&n.height===o)return n.getContext("2d").getImageData(0,0,r,o);if(pd){var s=pd.canvas;s.width!==r||s.height!==o?pd=Qe(r,o):pd.clearRect(0,0,r,o)}else pd=Qe(r,o);return pd.drawImage(n,0,0,r,o),pd.getImageData(0,0,r,o)}(this.layers_[n],t);if(!r)return;i[n]=r}var o={};this.dispatchEvent(new ud("beforeoperations",t,o)),this.worker_.process(i,o,this.onWorkerComplete_.bind(this,t))},e.prototype.onWorkerComplete_=function(t,e,i,n){if(!e&&i){var r=t.extent,o=t.viewState.resolution;if(o===this.requestedFrameState_.viewState.resolution&&N(r,this.requestedFrameState_.extent)){var a;this.renderedImageCanvas_?a=this.renderedImageCanvas_.getImage().getContext("2d"):(a=Qe(Math.round(K(r)/o),Math.round(V(r)/o)),this.renderedImageCanvas_=new Ap(r,o,1,a.canvas)),a.putImageData(i,0,0),this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new ud("afteroperations",t,n))}}},e.prototype.getImageInternal=function(){return null},e}(Pp),pd=null,dd=cd,fd=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),gd=['Map tiles by <a href="https://stamen.com/" target="_blank">Stamen Design</a>, under <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC BY 3.0</a>.',Yp],vd={terrain:{extension:"jpg",opaque:!0},"terrain-background":{extension:"jpg",opaque:!0},"terrain-labels":{extension:"png",opaque:!1},"terrain-lines":{extension:"png",opaque:!1},"toner-background":{extension:"png",opaque:!0},toner:{extension:"png",opaque:!0},"toner-hybrid":{extension:"png",opaque:!1},"toner-labels":{extension:"png",opaque:!1},"toner-lines":{extension:"png",opaque:!1},"toner-lite":{extension:"png",opaque:!0},watercolor:{extension:"jpg",opaque:!0}},yd={terrain:{minZoom:0,maxZoom:18},toner:{minZoom:0,maxZoom:20},watercolor:{minZoom:0,maxZoom:18}},md=function(t){function e(e){var i=e.layer.indexOf("-"),n=-1==i?e.layer:e.layer.slice(0,i),r=yd[n],o=vd[e.layer];return t.call(this,{attributions:gd,cacheSize:e.cacheSize,crossOrigin:"anonymous",maxZoom:null!=e.maxZoom?e.maxZoom:r.maxZoom,minZoom:null!=e.minZoom?e.minZoom:r.minZoom,opaque:o.opaque,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:void 0!==e.url?e.url:"https://stamen-tiles-{a-d}.a.ssl.fastly.net/"+e.layer+"/{z}/{x}/{y}."+o.extension,wrapX:e.wrapX})||this}return fd(e,t),e}(Vc),_d=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),xd=function(t){function e(e){var i=this,n=e||{};return(i=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileGrid:n.tileGrid,tileLoadFunction:n.tileLoadFunction,tileUrlFunction:Gn,url:n.url,urls:n.urls,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition})||this).params_=n.params||{},i.hidpi_=void 0===n.hidpi||n.hidpi,i.tmpExtent_=[1/0,1/0,-1/0,-1/0],i.setKey(i.getKeyForParams_()),i}return _d(e,t),e.prototype.getKeyForParams_=function(){var t=0,e=[];for(var i in this.params_)e[t++]=i+"-"+this.params_[i];return e.join("/")},e.prototype.getParams=function(){return this.params_},e.prototype.getRequestUrl_=function(t,e,i,n,r,o){var a=this.urls;if(a){var s,l=r.getCode().split(":").pop();return o.SIZE=e[0]+","+e[1],o.BBOX=i.join(","),o.BBOXSR=l,o.IMAGESR=l,o.DPI=Math.round(o.DPI?o.DPI*n:90*n),s=1==a.length?a[0]:a[ut(Xi(t),a.length)],jn(s.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage"),o)}},e.prototype.getTilePixelRatio=function(t){return this.hidpi_?t:1},e.prototype.updateParams=function(t){na(this.params_,t),this.setKey(this.getKeyForParams_())},e}(Yc),bd=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),wd=function(t){function e(e,i,n){var r=t.call(this,e,ol)||this;return r.tileSize_=i,r.text_=n,r.canvas_=null,r}return bd(e,t),e.prototype.getImage=function(){if(this.canvas_)return this.canvas_;var t=this.tileSize_,e=Qe(t[0],t[1]);return e.strokeStyle="grey",e.strokeRect(.5,.5,t[0]+.5,t[1]+.5),e.fillStyle="grey",e.strokeStyle="white",e.textAlign="center",e.textBaseline="middle",e.font="24px sans-serif",e.lineWidth=4,e.strokeText(this.text_,t[0]/2,t[1]/2,t[0]),e.fillText(this.text_,t[0]/2,t[1]/2,t[0]),this.canvas_=e.canvas,e.canvas},e.prototype.load=function(){},e}(Cc),Sd=function(t){function e(e){var i=e||{};return t.call(this,{opaque:!1,projection:i.projection,tileGrid:i.tileGrid,wrapX:void 0===i.wrapX||i.wrapX,zDirection:i.zDirection})||this}return bd(e,t),e.prototype.getTile=function(t,e,i){var n=zi(t,e,i);if(this.tileCache.containsKey(n))return this.tileCache.get(n);var r=oi(this.tileGrid.getTileSize(t)),o=[t,e,i],a=this.getTileCoordForTileUrlFunction(o),s=new wd(o,r,a?"z:"+a[0]+" x:"+a[1]+" y:"+a[2]:"none");return this.tileCache.set(n,s),s},e}(Vc),Cd=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ed=function(t){function e(e){var i=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,projection:bt("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:wl,tileLoadFunction:e.tileLoadFunction,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition})||this;if(i.tileJSON_=null,i.tileSize_=e.tileSize,e.url)if(e.jsonp)On(e.url,i.handleTileJSONResponse.bind(i),i.handleTileJSONError.bind(i));else{var n=new XMLHttpRequest;n.addEventListener("load",i.onXHRLoad_.bind(i)),n.addEventListener("error",i.onXHRError_.bind(i)),n.open("GET",e.url),n.send()}else e.tileJSON?i.handleTileJSONResponse(e.tileJSON):S(!1,51);return i}return Cd(e,t),e.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var i=void 0;try{i=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(i)}else this.handleTileJSONError()},e.prototype.onXHRError_=function(t){this.handleTileJSONError()},e.prototype.getTileJSON=function(){return this.tileJSON_},e.prototype.handleTileJSONResponse=function(t){var e,i=bt("EPSG:4326"),n=this.getProjection();if(void 0!==t.bounds){var r=Lt(i,n);e=tt(t.bounds,r)}var o=t.minzoom||0,a=t.maxzoom||22,s=Ui({extent:qi(n),maxZoom:a,minZoom:o,tileSize:this.tileSize_});if(this.tileGrid=s,this.tileUrlFunction=Tn(t.tiles,s),void 0!==t.attribution&&!this.getAttributions()){var l=void 0!==e?e:i.getExtent();this.setAttributions(function(e){return J(l,e.extent)?[t.attribution]:null})}this.tileJSON_=t,this.setState(Sl)},e.prototype.handleTileJSONError=function(){this.setState("error")},e}(Yc),Td=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Pd=function(t){function e(e){var i=this,n=e||{},r=n.params||{};return(i=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,opaque:!(!("TRANSPARENT"in r)||r.TRANSPARENT),projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileClass:n.tileClass,tileGrid:n.tileGrid,tileLoadFunction:n.tileLoadFunction,tileUrlFunction:zn,url:n.url,urls:n.urls,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition})||this).gutter_=void 0!==n.gutter?n.gutter:0,i.params_=r,i.v13_=!0,i.serverType_=n.serverType,i.hidpi_=void 0===n.hidpi||n.hidpi,i.tmpExtent_=[1/0,1/0,-1/0,-1/0],i.updateV13_(),i.setKey(i.getKeyForParams_()),i}return Td(e,t),e.prototype.getFeatureInfoUrl=function(t,e,i,n){var r=bt(i),o=this.getProjection(),a=this.getTileGrid();a||(a=this.getTileGridForProjection(r));var s=a.getZForResolution(e,this.zDirection),l=a.getTileCoordForCoordAndZ(t,s);if(!(a.getResolutions().length<=l[0])){var h=a.getResolution(l[0]),u=a.getTileCoordExtent(l,this.tmpExtent_),c=oi(a.getTileSize(l[0]),this.tmpSize),p=this.gutter_;0!==p&&(c=ni(c,p,this.tmpSize),u=E(u,h*p,u)),o&&o!==r&&(h=An(o,r,t,h),u=At(u,r,o),t=Ot(t,r,o));var d={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};na(d,this.params_,n);var f=Math.floor((t[0]-u[0])/h),g=Math.floor((u[3]-t[1])/h);return d[this.v13_?"I":"X"]=f,d[this.v13_?"J":"Y"]=g,this.getRequestUrl_(l,c,u,1,o||r,d)}},e.prototype.getLegendUrl=function(t,e){if(void 0!==this.urls[0]){var i={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===e||void 0===e.LAYER){var n=this.params_.LAYERS;if(Array.isArray(n)&&1!==n.length)return;i.LAYER=n}if(void 0!==t){var r=this.getProjection()?this.getProjection().getMetersPerUnit():1;i.SCALE=t*r*39.37*(25.4/.28)}return na(i,e),jn(this.urls[0],i)}},e.prototype.getGutter=function(){return this.gutter_},e.prototype.getParams=function(){return this.params_},e.prototype.getRequestUrl_=function(t,e,i,n,r,o){var a=this.urls;if(a){if(o.WIDTH=e[0],o.HEIGHT=e[1],o[this.v13_?"CRS":"SRS"]=r.getCode(),"STYLES"in this.params_||(o.STYLES=""),1!=n)switch(this.serverType_){case"geoserver":var s=90*n+.5|0;"FORMAT_OPTIONS"in o?o.FORMAT_OPTIONS+=";dpi:"+s:o.FORMAT_OPTIONS="dpi:"+s;break;case"mapserver":o.MAP_RESOLUTION=90*n;break;case"carmentaserver":case"qgis":o.DPI=90*n;break;default:S(!1,52)}var l,h=r.getAxisOrientation(),u=i;if(this.v13_&&"ne"==h.substr(0,2)){var c=void 0;c=i[0],u[0]=i[1],u[1]=c,c=i[2],u[2]=i[3],u[3]=c}return o.BBOX=u.join(","),l=1==a.length?a[0]:a[ut(Xi(t),a.length)],jn(l,o)}},e.prototype.getTilePixelRatio=function(t){return this.hidpi_&&void 0!==this.serverType_?t:1},e.prototype.getKeyForParams_=function(){var t=0,e=[];for(var i in this.params_)e[t++]=i+"-"+this.params_[i];return e.join("/")},e.prototype.updateParams=function(t){na(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())},e.prototype.updateV13_=function(){this.v13_=Fe(this.params_.VERSION||"1.3.0","1.3")>=0},e}(Yc),Ld=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Id=function(t){function e(e,i,n,r,o,a){var s=t.call(this,e,i)||this;return s.src_=n,s.extent_=r,s.preemptive_=o,s.grid_=null,s.keys_=null,s.data_=null,s.jsonp_=a,s}return Ld(e,t),e.prototype.getImage=function(){return null},e.prototype.getData=function(t){if(!this.grid_||!this.keys_)return null;var e=(t[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),i=(t[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),n=this.grid_[Math.floor((1-i)*this.grid_.length)];if("string"!=typeof n)return null;var r=n.charCodeAt(Math.floor(e*n.length));r>=93&&r--,r>=35&&r--;var o=null;if((r-=32)in this.keys_){var a=this.keys_[r];o=this.data_&&a in this.data_?this.data_[a]:a}return o},e.prototype.forDataAtCoordinate=function(t,e,i){this.state==al&&!0===i?(this.state=rl,l(this,ha,function(i){e(this.getData(t))},this),this.loadInternal_()):!0===i?setTimeout((function(){e(this.getData(t))}).bind(this),0):e(this.getData(t))},e.prototype.getKey=function(){return this.src_},e.prototype.handleError_=function(){this.state=3,this.changed()},e.prototype.handleLoad_=function(t){this.grid_=t.grid,this.keys_=t.keys,this.data_=t.data,this.state=ol,this.changed()},e.prototype.loadInternal_=function(){if(this.state==rl)if(this.state=1,this.jsonp_)On(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this));else{var t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",this.src_),t.send()}},e.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var i=void 0;try{i=JSON.parse(e.responseText)}catch(t){return void this.handleError_()}this.handleLoad_(i)}else this.handleError_()},e.prototype.onXHRError_=function(t){this.handleError_()},e.prototype.load=function(){this.preemptive_?this.loadInternal_():this.setState(al)},e}(Cc),Od=function(t){function e(e){var i=t.call(this,{projection:bt("EPSG:3857"),state:wl})||this;if(i.preemptive_=void 0===e.preemptive||e.preemptive,i.tileUrlFunction_=Ln,i.template_=void 0,i.jsonp_=e.jsonp||!1,e.url)if(i.jsonp_)On(e.url,i.handleTileJSONResponse.bind(i),i.handleTileJSONError.bind(i));else{var n=new XMLHttpRequest;n.addEventListener("load",i.onXHRLoad_.bind(i)),n.addEventListener("error",i.onXHRError_.bind(i)),n.open("GET",e.url),n.send()}else e.tileJSON?i.handleTileJSONResponse(e.tileJSON):S(!1,51);return i}return Ld(e,t),e.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var i=void 0;try{i=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(i)}else this.handleTileJSONError()},e.prototype.onXHRError_=function(t){this.handleTileJSONError()},e.prototype.getTemplate=function(){return this.template_},e.prototype.forDataAtCoordinateAndResolution=function(t,e,i,n){if(this.tileGrid){var r=this.tileGrid.getZForResolution(e,this.zDirection),o=this.tileGrid.getTileCoordForCoordAndZ(t,r);this.getTile(o[0],o[1],o[2],1,this.getProjection()).forDataAtCoordinate(t,i,n)}else!0===n?setTimeout(function(){i(null)},0):i(null)},e.prototype.handleTileJSONError=function(){this.setState("error")},e.prototype.handleTileJSONResponse=function(t){var e,i=bt("EPSG:4326"),n=this.getProjection();if(void 0!==t.bounds){var r=Lt(i,n);e=tt(t.bounds,r)}var o=t.minzoom||0,a=t.maxzoom||22,s=Ui({extent:qi(n),maxZoom:a,minZoom:o});this.tileGrid=s,this.template_=t.template;var l=t.grids;if(l){if(this.tileUrlFunction_=Tn(l,s),void 0!==t.attribution){var h=void 0!==e?e:i.getExtent();this.setAttributions(function(e){return J(h,e.extent)?[t.attribution]:null})}this.setState(Sl)}else this.setState("error")},e.prototype.getTile=function(t,e,i,n,r){var o=zi(t,e,i);if(this.tileCache.containsKey(o))return this.tileCache.get(o);var a=[t,e,i],s=this.getTileCoordForTileUrlFunction(a,r),l=this.tileUrlFunction_(s,n,r),h=new Id(a,void 0!==l?rl:al,void 0!==l?l:"",this.tileGrid.getTileCoordExtent(a),this.preemptive_,this.jsonp_);return this.tileCache.set(o,h),h},e.prototype.useTile=function(t,e,i){var n=zi(t,e,i);this.tileCache.containsKey(n)&&this.tileCache.get(n)},e}(jc),Ad=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Rd=[],Md=function(t){function e(e,i,n,r){var o=t.call(this,e,i,{transition:0})||this;return o.context_={},o.executorGroups={},o.loadingSourceTiles=0,o.errorSourceTileKeys={},o.hitDetectionImageData={},o.replayState_={},o.sourceTiles=null,o.getSourceTiles=r.bind(void 0,o),o.sourceZ=-1,o.hifi=!1,o.wrappedTileCoord=n,o}return Ad(e,t),e.prototype.getContext=function(t){var e=r(t);return e in this.context_||(this.context_[e]=Qe(1,1,Rd)),this.context_[e]},e.prototype.hasContext=function(t){return r(t)in this.context_},e.prototype.getImage=function(t){return this.hasContext(t)?this.getContext(t).canvas:null},e.prototype.getReplayState=function(t){var e=r(t);return e in this.replayState_||(this.replayState_[e]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedZ:-1,renderedTileZ:-1}),this.replayState_[e]},e.prototype.load=function(){this.getSourceTiles()},e.prototype.release=function(){for(var e in this.context_)Rd.push(this.context_[e].canvas);t.prototype.release.call(this)},e}(Cc),Fd=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),kd=function(t){function e(e,i,n,r,o,a){var s=t.call(this,e,i,a)||this;return s.extent=null,s.format_=r,s.features_=null,s.projection=null,s.tileLoadFunction_=o,s.url_=n,s}return Fd(e,t),e.prototype.getFormat=function(){return this.format_},e.prototype.getFeatures=function(){return this.features_},e.prototype.getKey=function(){return this.url_},e.prototype.load=function(){this.state==rl&&(this.setState(1),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))},e.prototype.onLoad=function(t,e){this.setFeatures(t)},e.prototype.onError=function(){this.setState(3)},e.prototype.setFeatures=function(t){this.features_=t,this.setState(ol)},e.prototype.setLoader=function(t){this.loader_=t},e}(Cc),Nd=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Dd=function(t){function e(e){var i=this,n=e.projection||"EPSG:3857",r=e.extent||qi(n),o=e.tileGrid||Ui({extent:r,maxResolution:e.maxResolution,maxZoom:void 0!==e.maxZoom?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});return(i=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,opaque:!1,projection:n,state:e.state,tileGrid:o,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Bn,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:void 0===e.zDirection?1:e.zDirection})||this).format_=e.format?e.format:null,i.loadingTiles_={},i.sourceTileCache=new Ic(i.tileCache.highWaterMark),i.overlaps_=null==e.overlaps||e.overlaps,i.tileClass=e.tileClass?e.tileClass:kd,i.tileGrids_={},i}return Nd(e,t),e.prototype.getFeaturesInExtent=function(t){var e=[],i=this.tileCache;if(0===i.getCount())return e;var n=Yi(i.peekFirstKey())[0],r=this.tileGrid;return i.forEach(function(i){if(i.tileCoord[0]===n&&i.getState()===ol)for(var o=i.getSourceTiles(),a=0,s=o.length;a<s;++a){var l=o[a];if(J(t,r.getTileCoordExtent(l.tileCoord))){var h=l.getFeatures();if(h)for(var u=0,c=h.length;u<c;++u){var p=h[u],d=p.getGeometry();J(t,d.getExtent())&&e.push(p)}}}}),e},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.clear=function(){this.tileCache.clear(),this.sourceTileCache.clear()},e.prototype.expireCache=function(e,i){t.prototype.expireCache.call(this,e,i),this.sourceTileCache.expireCache({})},e.prototype.getSourceTiles=function(t,e,i){var n=i.wrappedTileCoord,r=this.getTileGridForProjection(e),o=r.getTileCoordExtent(n),a=r.getResolution(n[0]);E(o,-a,o);var s=this.tileGrid,l=s.getExtent();l&&H(o,l,o);var h,u,c,p=s.getZForResolution(a,1),d=s.getMinZoom(),f=i.sourceTiles;if(f&&f.length>0&&f[0].tileCoord[0]===p)h=f,u=!0,c=p;else{h=[],c=p+1;do{u=!0,s.forEachTileCoord(o,--c,(function(n){var r,o=this.tileUrlFunction(n,t,e);if(void 0!==o)if(this.sourceTileCache.containsKey(o)){var a=(r=this.sourceTileCache.get(o)).getState();if(a===ol||3===a||a===al)return void h.push(r)}else c===p&&((r=new this.tileClass(n,rl,o,this.format_,this.tileLoadFunction)).extent=s.getTileCoordExtent(n),r.projection=e,r.resolution=s.getResolution(n[0]),this.sourceTileCache.set(o,r),r.addEventListener(ha,this.handleTileChange.bind(this)),r.load());u=u&&r&&r.getState()===ol,r&&r.getState()!==al&&i.getState()===rl&&(i.loadingSourceTiles++,r.addEventListener(ha,function t(){var e=r.getState(),n=r.getKey();if(e===ol||3===e){e===ol?(r.removeEventListener(ha,t),i.loadingSourceTiles--,delete i.errorSourceTileKeys[n]):3===e&&(i.errorSourceTileKeys[n]=!0);var o=Object.keys(i.errorSourceTileKeys).length;i.loadingSourceTiles-o==0&&(i.hifi=0===o,i.sourceZ=p,i.setState(ol))}}))}).bind(this)),u||(h.length=0)}while(!u&&c>d)}return i.getState()===rl&&i.setState(1),u&&(i.hifi=p===c,i.sourceZ=c,i.getState()<ol?i.setState(ol):f&&v(h,f)||(i.sourceTiles=h)),h},e.prototype.getTile=function(t,e,i,n,r){var o,a=zi(t,e,i),s=this.getKey();if(this.tileCache.containsKey(a)&&(o=this.tileCache.get(a)).key===s)return o;var l=[t,e,i],h=this.getTileCoordForTileUrlFunction(l,r),u=this.getTileGrid().getExtent(),c=this.getTileGridForProjection(r);if(h&&u){var p=c.getTileCoordExtent(h);E(p,-c.getResolution(t),p),J(u,p)||(h=null)}var d=!0;if(null!==h){var f=this.tileGrid,g=c.getResolution(t),v=f.getZForResolution(g,1),y=c.getTileCoordExtent(h);E(y,-g,y),f.forEachTileCoord(y,v,(function(t){d=d&&!this.tileUrlFunction(t,n,r)}).bind(this))}var m=new Md(l,d?al:rl,h,this.getSourceTiles.bind(this,n,r));return m.key=s,o?(m.interimTile=o,m.refreshInterimChain(),this.tileCache.replace(a,m)):this.tileCache.set(a,m),m},e.prototype.getTileGridForProjection=function(t){var e=t.getCode(),i=this.tileGrids_[e];if(!i){var n=this.tileGrid;i=Hi(t,void 0,n?n.getTileSize(n.getMinZoom()):void 0),this.tileGrids_[e]=i}return i},e.prototype.getTilePixelRatio=function(t){return t},e.prototype.getTilePixelSize=function(t,e,i){var n=oi(this.getTileGridForProjection(i).getTileSize(t),this.tmpSize);return[Math.round(n[0]*e),Math.round(n[1]*e)]},e}(zc),jd="KVP",Gd=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),zd=function(t){function e(e){var i=this,n=void 0!==e.requestEncoding?e.requestEncoding:jd,r=e.tileGrid,o=e.urls;return void 0===o&&void 0!==e.url&&(o=In(e.url)),(i=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:Ln,urls:o,wrapX:void 0!==e.wrapX&&e.wrapX,transition:e.transition})||this).version_=void 0!==e.version?e.version:"1.0.0",i.format_=void 0!==e.format?e.format:"image/jpeg",i.dimensions_=void 0!==e.dimensions?e.dimensions:{},i.layer_=e.layer,i.matrixSet_=e.matrixSet,i.style_=e.style,i.requestEncoding_=n,i.setKey(i.getKeyForDimensions_()),o&&o.length>0&&(i.tileUrlFunction=Pn(o.map(Yn.bind(i)))),i}return Gd(e,t),e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.setTileUrlFunction(Pn(t.map(Yn.bind(this))),e)},e.prototype.getDimensions=function(){return this.dimensions_},e.prototype.getFormat=function(){return this.format_},e.prototype.getLayer=function(){return this.layer_},e.prototype.getMatrixSet=function(){return this.matrixSet_},e.prototype.getRequestEncoding=function(){return this.requestEncoding_},e.prototype.getStyle=function(){return this.style_},e.prototype.getVersion=function(){return this.version_},e.prototype.getKeyForDimensions_=function(){var t=0,e=[];for(var i in this.dimensions_)e[t++]=i+"-"+this.dimensions_[i];return e.join("/")},e.prototype.updateDimensions=function(t){na(this.dimensions_,t),this.setKey(this.getKeyForDimensions_())},e}(Yc),Bd=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Yd="GENERATE_BUFFERS",Xd=function(t){function e(e,i){var n=t.call(this,e)||this,r=i||{};return n.helper=new Vu({postProcesses:r.postProcesses,uniforms:r.uniforms}),n}return Bd(e,t),e.prototype.disposeInternal=function(){this.helper.dispose(),t.prototype.disposeInternal.call(this)},e.prototype.getShaderCompileErrors=function(){return this.helper.getShaderCompileErrors()},e}(qp),Wd=new Blob(['var e="function"==typeof Object.assign?Object.assign:function(e,n){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1,o=arguments.length;r<o;++r){var i=arguments[r];if(null!=i)for(var f in i)i.hasOwnProperty(f)&&(t[f]=i[f])}return t},n="GENERATE_BUFFERS",t=[],r={vertexPosition:0,indexPosition:0};function o(e,n,t,r,o){e[n+0]=t,e[n+1]=r,e[n+2]=o}function i(e,n,i,f,s,u){var a=3+s,l=e[n+0],v=e[n+1],c=t;c.length=s;for(var g=0;g<c.length;g++)c[g]=e[n+2+g];var b=u?u.vertexPosition:0,h=u?u.indexPosition:0,d=b/a;return o(i,b,l,v,0),c.length&&i.set(c,b+3),o(i,b+=a,l,v,1),c.length&&i.set(c,b+3),o(i,b+=a,l,v,2),c.length&&i.set(c,b+3),o(i,b+=a,l,v,3),c.length&&i.set(c,b+3),b+=a,f[h++]=d,f[h++]=d+1,f[h++]=d+3,f[h++]=d+1,f[h++]=d+2,f[h++]=d+3,r.vertexPosition=b,r.indexPosition=h,r}var f=self;f.onmessage=function(t){var r=t.data;if(r.type===n){for(var o=r.customAttributesCount,s=2+o,u=new Float32Array(r.renderInstructions),a=u.length/s,l=4*a*(o+3),v=new Uint32Array(6*a),c=new Float32Array(l),g=null,b=0;b<u.length;b+=s)g=i(u,b,c,v,o,g);var h=e({vertexBuffer:c.buffer,indexBuffer:v.buffer,renderInstructions:u.buffer},r);f.postMessage(h,[c.buffer,v.buffer,u.buffer])}};'],{type:"application/javascript"}),Ud=URL.createObjectURL(Wd),Vd=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Hd=function(t){function e(e){var i=this,n=e||{},r=na({},n);return delete r.style,delete r.renderBuffer,delete r.updateWhileAnimating,delete r.updateWhileInteracting,(i=t.call(this,r)||this).declutter_=void 0!==n.declutter&&n.declutter,i.renderBuffer_=void 0!==n.renderBuffer?n.renderBuffer:100,i.style_=null,i.styleFunction_=void 0,i.setStyle(n.style),i.updateWhileAnimating_=void 0!==n.updateWhileAnimating&&n.updateWhileAnimating,i.updateWhileInteracting_=void 0!==n.updateWhileInteracting&&n.updateWhileInteracting,i}return Vd(e,t),e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.getFeatures=function(e){return t.prototype.getFeatures.call(this,e)},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get("renderOrder")},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.setRenderOrder=function(t){this.set("renderOrder",t)},e.prototype.setStyle=function(t){this.style_=void 0!==t?t:wn,this.styleFunction_=null===t?void 0:function(t){var e;if("function"==typeof t)e=t;else{var i;Array.isArray(t)?i=t:(S("function"==typeof t.getZIndex,41),i=[t]),e=function(){return i}}return e}(this.style_),this.changed()},e}(kl),qd=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Zd=function(t){function e(e,i){var n=this,o=i.uniforms||{},a=[1,0,0,1,0,0];o[Wu]=a,(n=t.call(this,e,{uniforms:o,postProcesses:i.postProcesses})||this).sourceRevision_=-1,n.verticesBuffer_=new Gu(34962,35048),n.hitVerticesBuffer_=new Gu(34962,35048),n.indicesBuffer_=new Gu(34963,35048),n.program_=n.helper.getProgram(i.fragmentShader,i.vertexShader),n.hitDetectionEnabled_=!(!i.hitFragmentShader||!i.hitVertexShader),n.hitProgram_=n.hitDetectionEnabled_&&n.helper.getProgram(i.hitFragmentShader,i.hitVertexShader);var l=i.attributes?i.attributes.map(function(t){return{name:"a_"+t.name,size:1,type:Uu.FLOAT}}):[];n.attributes=[{name:"a_position",size:2,type:Uu.FLOAT},{name:"a_index",size:1,type:Uu.FLOAT}].concat(l),n.hitDetectionAttributes=[{name:"a_position",size:2,type:Uu.FLOAT},{name:"a_index",size:1,type:Uu.FLOAT},{name:"a_hitColor",size:4,type:Uu.FLOAT},{name:"a_featureUid",size:1,type:Uu.FLOAT}].concat(l),n.customAttributes=i.attributes?i.attributes:[],n.previousExtent_=[1/0,1/0,-1/0,-1/0],n.currentTransform_=a,n.renderTransform_=[1,0,0,1,0,0],n.invertRenderTransform_=[1,0,0,1,0,0],n.renderInstructions_=new Float32Array(0),n.hitRenderInstructions_=new Float32Array(0),n.hitRenderTarget_=n.hitDetectionEnabled_&&new qu(n.helper),n.worker_=new Worker(Ud),n.worker_.addEventListener("message",(function(t){var e=t.data;if(e.type===Yd){var i=e.projectionTransform;e.hitDetection?(this.hitVerticesBuffer_.fromArrayBuffer(e.vertexBuffer),this.helper.flushBufferData(this.hitVerticesBuffer_)):(this.verticesBuffer_.fromArrayBuffer(e.vertexBuffer),this.helper.flushBufferData(this.verticesBuffer_)),this.indicesBuffer_.fromArrayBuffer(e.indexBuffer),this.helper.flushBufferData(this.indicesBuffer_),this.renderTransform_=i,Xt(this.invertRenderTransform_,this.renderTransform_),e.hitDetection?this.hitRenderInstructions_=new Float32Array(t.data.renderInstructions):this.renderInstructions_=new Float32Array(t.data.renderInstructions),this.getLayer().changed()}}).bind(n)),n.featureCache_={},n.featureCount_=0;var h=n.getLayer().getSource();return n.sourceListenKeys_=[s(h,Zc,n.handleSourceFeatureAdded_,n),s(h,Kc,n.handleSourceFeatureChanged_,n),s(h,$c,n.handleSourceFeatureDelete_,n),s(h,Jc,n.handleSourceFeatureClear_,n)],h.forEachFeature((function(t){this.featureCache_[r(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()},this.featureCount_++}).bind(n)),n}return qd(e,t),e.prototype.handleSourceFeatureAdded_=function(t){var e=t.feature;this.featureCache_[r(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()},this.featureCount_++},e.prototype.handleSourceFeatureChanged_=function(t){var e=t.feature;this.featureCache_[r(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()}},e.prototype.handleSourceFeatureDelete_=function(t){delete this.featureCache_[r(t.feature)],this.featureCount_--},e.prototype.handleSourceFeatureClear_=function(){this.featureCache_={},this.featureCount_=0},e.prototype.renderFrame=function(t){var e=this.indicesBuffer_.getSize();this.helper.drawElements(0,e),this.helper.finalizeDraw(t);var i=this.helper.getCanvas(),n=t.layerStatesArray[t.layerIndex].opacity;return n!==parseFloat(i.style.opacity)&&(i.style.opacity=n),this.hitDetectionEnabled_&&(this.renderHitDetection(t),this.hitRenderTarget_.clearCachedData()),i},e.prototype.prepareFrame=function(t){var e=this.getLayer(),i=e.getSource(),n=t.viewState,r=!t.viewHints[0]&&!t.viewHints[1],o=!N(this.previousExtent_,t.extent),a=this.sourceRevision_<i.getRevision();if(a&&(this.sourceRevision_=i.getRevision()),r&&(o||a)){var s=n.projection,l=n.resolution,h=e instanceof Hd?e.getRenderBuffer():0,u=E(t.extent,h*l);i.loadFeatures(u,l,s),this.rebuildBuffers_(t),this.previousExtent_=t.extent.slice()}return this.helper.makeProjectionTransform(t,this.currentTransform_),jt(this.currentTransform_,this.invertRenderTransform_),this.helper.useProgram(this.program_),this.helper.prepareDraw(t),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes),!0},e.prototype.rebuildBuffers_=function(t){var e=[1,0,0,1,0,0];this.helper.makeProjectionTransform(t,e);var i,n,r=(2+this.customAttributes.length)*this.featureCount_;if(this.renderInstructions_&&this.renderInstructions_.length===r||(this.renderInstructions_=new Float32Array(r)),this.hitDetectionEnabled_){var o=(7+this.customAttributes.length)*this.featureCount_;this.hitRenderInstructions_&&this.hitRenderInstructions_.length===o||(this.hitRenderInstructions_=new Float32Array(o))}var a,s,l,h=[],u=[],c=0,p=0;for(var d in this.featureCache_)if((n=(i=this.featureCache_[d]).geometry)&&n.getType()===Xa.POINT){h[0]=n.getFlatCoordinates()[0],h[1]=n.getFlatCoordinates()[1],zt(e,h),s=p+6,l=void 0,(l=u||[])[0]=Math.floor(s/256/256/256)/255,l[1]=Math.floor(s/256/256)%256/255,l[2]=Math.floor(s/256)%256/255,l[3]=s%256/255,a=l,this.renderInstructions_[c++]=h[0],this.renderInstructions_[c++]=h[1],this.hitDetectionEnabled_&&(this.hitRenderInstructions_[p++]=h[0],this.hitRenderInstructions_[p++]=h[1],this.hitRenderInstructions_[p++]=a[0],this.hitRenderInstructions_[p++]=a[1],this.hitRenderInstructions_[p++]=a[2],this.hitRenderInstructions_[p++]=a[3],this.hitRenderInstructions_[p++]=Number(d));for(var f=void 0,g=0;g<this.customAttributes.length;g++)f=this.customAttributes[g].callback(i.feature,i.properties),this.renderInstructions_[c++]=f,this.hitDetectionEnabled_&&(this.hitRenderInstructions_[p++]=f)}var v={type:Yd,renderInstructions:this.renderInstructions_.buffer,customAttributesCount:this.customAttributes.length};if(v.projectionTransform=e,this.worker_.postMessage(v,[this.renderInstructions_.buffer]),this.renderInstructions_=null,this.hitDetectionEnabled_){var y={type:Yd,renderInstructions:this.hitRenderInstructions_.buffer,customAttributesCount:5+this.customAttributes.length};y.projectionTransform=e,y.hitDetection=!0,this.worker_.postMessage(y,[this.hitRenderInstructions_.buffer]),this.hitRenderInstructions_=null}},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,r){if(S(this.hitDetectionEnabled_,66),this.hitRenderInstructions_){var o=zt(e.coordinateToPixelTransform,t.slice()),a=this.hitRenderTarget_.readPixel(o[0]/2,o[1]/2),s=function(t){var e=0;return e+=Math.round(256*t[0]*256*256*255),e+=Math.round(256*t[1]*256*255),e+=Math.round(256*t[2]*255),e+=Math.round(255*t[3])}([a[0]/255,a[1]/255,a[2]/255,a[3]/255]),l=this.hitRenderInstructions_[s],h=Math.floor(l).toString(),u=this.getLayer().getSource().getFeatureByUid(h);return u?n(u,this.getLayer()):void 0}},e.prototype.renderHitDetection=function(t){if(this.hitVerticesBuffer_.getSize()){this.hitRenderTarget_.setSize([Math.floor(t.size[0]/2),Math.floor(t.size[1]/2)]),this.helper.useProgram(this.hitProgram_),this.helper.prepareDrawToRenderTarget(t,this.hitRenderTarget_,!0),this.helper.bindBuffer(this.hitVerticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.hitDetectionAttributes);var e=this.indicesBuffer_.getSize();this.helper.drawElements(0,e)}},e.prototype.disposeInternal=function(){this.worker_.terminate(),this.layer_=null,this.sourceListenKeys_.forEach(function(t){h(t)}),this.sourceListenKeys_=null,t.prototype.disposeInternal.call(this)},e}(Xd),Kd={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Jd=[Kd.FILL],$d=[Kd.STROKE],Qd=[Kd.BEGIN_PATH],tf=[Kd.CLOSE_PATH],ef=Kd,nf=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),rf=function(t){function e(e,i,n,r){var o=t.call(this)||this;return o.tolerance=e,o.maxExtent=i,o.pixelRatio=r,o.maxLineWidth=0,o.resolution=n,o.beginGeometryInstruction1_=null,o.beginGeometryInstruction2_=null,o.bufferedMaxExtent_=null,o.instructions=[],o.coordinates=[],o.tmpCoordinate_=[],o.hitDetectionInstructions=[],o.state={},o}return nf(e,t),e.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map(function(t){return t*e})},e.prototype.appendFlatCoordinates=function(t,e,i,n,r,o){var a=this.coordinates.length,s=this.getBufferedMaxExtent();o&&(e+=n);var l,h,u,c=t[e],p=t[e+1],d=this.tmpCoordinate_,f=!0;for(l=e+n;l<i;l+=n)d[0]=t[l],d[1]=t[l+1],(u=A(s,d))!==h?(f&&(this.coordinates[a++]=c,this.coordinates[a++]=p),this.coordinates[a++]=d[0],this.coordinates[a++]=d[1],f=!1):u===Fa?(this.coordinates[a++]=d[0],this.coordinates[a++]=d[1],f=!1):f=!0,c=d[0],p=d[1],h=u;return(r&&f||l===e+n)&&(this.coordinates[a++]=c,this.coordinates[a++]=p),a},e.prototype.drawCustomCoordinates_=function(t,e,i,n,r){for(var o=0,a=i.length;o<a;++o){var s=i[o],l=this.appendFlatCoordinates(t,e,s,n,!1,!1);r.push(l),e=s}return e},e.prototype.drawCustom=function(t,e,i){this.beginGeometry(t,e);var n,r,o,a,s,l=t.getType(),h=t.getStride(),u=this.coordinates.length;if(l==Xa.MULTI_POLYGON){n=(t=t).getOrientedFlatCoordinates(),a=[];var c=t.getEndss();s=0;for(var p=0,d=c.length;p<d;++p){var f=[];s=this.drawCustomCoordinates_(n,s,c[p],h,f),a.push(f)}this.instructions.push([ef.CUSTOM,u,a,t,i,re])}else l==Xa.POLYGON||l==Xa.MULTI_LINE_STRING?(o=[],n=l==Xa.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),s=this.drawCustomCoordinates_(n,0,t.getEnds(),h,o),this.instructions.push([ef.CUSTOM,u,o,t,i,ne])):l==Xa.LINE_STRING||l==Xa.MULTI_POINT?(n=t.getFlatCoordinates(),r=this.appendFlatCoordinates(n,0,n.length,h,!1,!1),this.instructions.push([ef.CUSTOM,u,r,t,i,ie])):l==Xa.POINT&&(n=t.getFlatCoordinates(),this.coordinates.push(n[0],n[1]),r=this.coordinates.length,this.instructions.push([ef.CUSTOM,u,r,t,i]));this.endGeometry(e)},e.prototype.beginGeometry=function(t,e){var i=t.getExtent();this.beginGeometryInstruction1_=[ef.BEGIN_GEOMETRY,e,0,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[ef.BEGIN_GEOMETRY,e,0,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},e.prototype.reverseHitDetectionInstructions=function(){var t,e=this.hitDetectionInstructions;e.reverse();var i,n,r=e.length,o=-1;for(t=0;t<r;++t)(n=(i=e[t])[0])==ef.END_GEOMETRY?o=t:n==ef.BEGIN_GEOMETRY&&(i[2]=t,d(this.hitDetectionInstructions,o,t),o=-1)},e.prototype.setFillStrokeStyle=function(t,e){var i=this.state;if(t){var n=t.getColor();i.fillStyle=bi(n||"#000")}else i.fillStyle=void 0;if(e){var r=e.getColor();i.strokeStyle=bi(r||"#000");var o=e.getLineCap();i.lineCap=void 0!==o?o:"round";var a=e.getLineDash();i.lineDash=a?a.slice():Gh;var s=e.getLineDashOffset();i.lineDashOffset=s||0;var l=e.getLineJoin();i.lineJoin=void 0!==l?l:"round";var h=e.getWidth();i.lineWidth=void 0!==h?h:1;var u=e.getMiterLimit();i.miterLimit=void 0!==u?u:10,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},e.prototype.createFill=function(t){var e=t.fillStyle,i=[ef.SET_FILL_STYLE,e];return"string"!=typeof e&&i.push(!0),i},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[ef.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,e){var i=t.fillStyle;"string"==typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)},e.prototype.updateStrokeStyle=function(t,e){var i=t.strokeStyle,n=t.lineCap,r=t.lineDash,o=t.lineDashOffset,a=t.lineJoin,s=t.lineWidth,l=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=n||r!=t.currentLineDash&&!v(t.currentLineDash,r)||t.currentLineDashOffset!=o||t.currentLineJoin!=a||t.currentLineWidth!=s||t.currentMiterLimit!=l)&&(void 0!==i&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=n,t.currentLineDash=r,t.currentLineDashOffset=o,t.currentLineJoin=a,t.currentLineWidth=s,t.currentMiterLimit=l)},e.prototype.endGeometry=function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var e=[ef.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)},e.prototype.getBufferedMaxExtent=function(){return!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=T(this.maxExtent),this.maxLineWidth>0)&&E(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_),this.bufferedMaxExtent_},e}(jh),of=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),af=function(t){function e(e,i,n,r){var o=t.call(this,e,i,n,r)||this;return o.declutterGroups_=null,o.hitDetectionImage_=null,o.image_=null,o.anchorX_=void 0,o.anchorY_=void 0,o.height_=void 0,o.opacity_=void 0,o.originX_=void 0,o.originY_=void 0,o.rotateWithView_=void 0,o.rotation_=void 0,o.scale_=void 0,o.width_=void 0,o}return of(e,t),e.prototype.drawCoordinates_=function(t,e,i,n){return this.appendFlatCoordinates(t,e,i,n,!1,!1)},e.prototype.drawPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),n=t.getStride(),r=this.coordinates.length,o=this.drawCoordinates_(i,0,i.length,n);this.instructions.push([ef.DRAW_IMAGE,r,o,this.image_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([ef.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(e)}},e.prototype.drawMultiPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),n=t.getStride(),r=this.coordinates.length,o=this.drawCoordinates_(i,0,i.length,n);this.instructions.push([ef.DRAW_IMAGE,r,o,this.image_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([ef.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(e)}},e.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,t.prototype.finish.call(this)},e.prototype.setImageStyle=function(t,e){var i=t.getAnchor(),n=t.getSize(),r=t.getHitDetectionImage(1),o=t.getImage(1),a=t.getOrigin();this.anchorX_=i[0],this.anchorY_=i[1],this.declutterGroups_=e,this.hitDetectionImage_=r,this.image_=o,this.height_=n[1],this.opacity_=t.getOpacity(),this.originX_=a[0],this.originY_=a[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScale(),this.width_=n[0]},e}(rf),sf=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),lf=function(t){function e(e,i,n,r){return t.call(this,e,i,n,r)||this}return sf(e,t),e.prototype.drawFlatCoordinates_=function(t,e,i,n){var r=this.coordinates.length,o=this.appendFlatCoordinates(t,e,i,n,!1,!1),a=[ef.MOVE_TO_LINE_TO,r,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i},e.prototype.drawLineString=function(t,e){var i=this.state;if(void 0!==i.strokeStyle&&void 0!==i.lineWidth){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([ef.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],Qd);var n=t.getFlatCoordinates(),r=t.getStride();this.drawFlatCoordinates_(n,0,n.length,r),this.hitDetectionInstructions.push($d),this.endGeometry(e)}},e.prototype.drawMultiLineString=function(t,e){var i=this.state;if(void 0!==i.strokeStyle&&void 0!==i.lineWidth){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([ef.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],Qd);for(var n=t.getEnds(),r=t.getFlatCoordinates(),o=t.getStride(),a=0,s=0,l=n.length;s<l;++s)a=this.drawFlatCoordinates_(r,a,n[s],o);this.hitDetectionInstructions.push($d),this.endGeometry(e)}},e.prototype.finish=function(){var e=this.state;return null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push($d),this.reverseHitDetectionInstructions(),this.state=null,t.prototype.finish.call(this)},e.prototype.applyStroke=function(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push($d),e.lastStroke=this.coordinates.length),e.lastStroke=0,t.prototype.applyStroke.call(this,e),this.instructions.push(Qd)},e}(rf),hf=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),uf=function(t){function e(e,i,n,r){return t.call(this,e,i,n,r)||this}return hf(e,t),e.prototype.drawFlatCoordinatess_=function(t,e,i,n){var r=this.state,o=void 0!==r.fillStyle,a=void 0!==r.strokeStyle,s=i.length;this.instructions.push(Qd),this.hitDetectionInstructions.push(Qd);for(var l=0;l<s;++l){var h=i[l],u=this.coordinates.length,c=this.appendFlatCoordinates(t,e,h,n,!0,!a),p=[ef.MOVE_TO_LINE_TO,u,c];this.instructions.push(p),this.hitDetectionInstructions.push(p),a&&(this.instructions.push(tf),this.hitDetectionInstructions.push(tf)),e=h}return o&&(this.instructions.push(Jd),this.hitDetectionInstructions.push(Jd)),a&&(this.instructions.push($d),this.hitDetectionInstructions.push($d)),e},e.prototype.drawCircle=function(t,e){var i=this.state;if(void 0!==i.fillStyle||void 0!==i.strokeStyle){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([ef.SET_FILL_STYLE,"#000"]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([ef.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var n=t.getFlatCoordinates(),r=t.getStride(),o=this.coordinates.length;this.appendFlatCoordinates(n,0,n.length,r,!1,!1);var a=[ef.CIRCLE,o];this.instructions.push(Qd,a),this.hitDetectionInstructions.push(Qd,a),void 0!==i.fillStyle&&(this.instructions.push(Jd),this.hitDetectionInstructions.push(Jd)),void 0!==i.strokeStyle&&(this.instructions.push($d),this.hitDetectionInstructions.push($d)),this.endGeometry(e)}},e.prototype.drawPolygon=function(t,e){var i=this.state;if(void 0!==i.fillStyle||void 0!==i.strokeStyle){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([ef.SET_FILL_STYLE,"#000"]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([ef.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var n=t.getEnds(),r=t.getOrientedFlatCoordinates(),o=t.getStride();this.drawFlatCoordinatess_(r,0,n,o),this.endGeometry(e)}},e.prototype.drawMultiPolygon=function(t,e){var i=this.state;if(void 0!==i.fillStyle||void 0!==i.strokeStyle){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([ef.SET_FILL_STYLE,"#000"]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([ef.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);for(var n=t.getEndss(),r=t.getOrientedFlatCoordinates(),o=t.getStride(),a=0,s=0,l=n.length;s<l;++s)a=this.drawFlatCoordinatess_(r,a,n[s],o);this.endGeometry(e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var e=this.tolerance;if(0!==e)for(var i=this.coordinates,n=0,r=i.length;n<r;++n)i[n]=ae(i[n],e);return t.prototype.finish.call(this)},e.prototype.setFillStrokeStyles_=function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)},e}(rf),cf=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),pf={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},df={Circle:uf,Default:rf,Image:af,LineString:lf,Polygon:uf,Text:function(t){function e(e,i,n,r){var o=t.call(this,e,i,n,r)||this;return o.labels_=null,o.text_="",o.textOffsetX_=0,o.textOffsetY_=0,o.textRotateWithView_=void 0,o.textRotation_=0,o.textFillState_=null,o.fillStates={},o.textStrokeState_=null,o.strokeStates={},o.textState_={},o.textStates={},o.textKey_="",o.fillKey_="",o.strokeKey_="",o}return cf(e,t),e.prototype.finish=function(){var e=t.prototype.finish.call(this);return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e},e.prototype.drawText=function(t,e){var i=this.textState_;if(""!==this.text_&&i&&(this.textFillState_||this.textStrokeState_)){var n,r,o=this.coordinates.length,a=t.getType(),s=null,l=2,h=2;if("line"===i.placement){if(!J(this.getBufferedMaxExtent(),t.getExtent()))return;var u=void 0;if(s=t.getFlatCoordinates(),h=t.getStride(),a==Xa.LINE_STRING)u=[s.length];else if(a==Xa.MULTI_LINE_STRING)u=t.getEnds();else if(a==Xa.POLYGON)u=t.getEnds().slice(0,1);else if(a==Xa.MULTI_POLYGON){var c=t.getEndss();for(u=[],n=0,r=c.length;n<r;++n)u.push(c[n][0])}this.beginGeometry(t,e);for(var p=i.textAlign,d=0,f=void 0,g=0,v=u.length;g<v;++g){if(null==p){var y=Xn(i.maxAngle,s,d,u[g],h);d=y[0],f=y[1]}else f=u[g];for(n=d;n<f;n+=h)this.coordinates.push(s[n],s[n+1]);l=this.coordinates.length,d=u[g];var m=this.declutterGroups_?0===g?this.declutterGroups_[0]:[].concat(this.declutterGroups_[0]):null;this.drawChars_(o,l,m),o=l}this.endGeometry(e)}else{var _=null;switch(i.overflow||(_=[]),a){case Xa.POINT:case Xa.MULTI_POINT:l=(s=t.getFlatCoordinates()).length;break;case Xa.LINE_STRING:s=t.getFlatMidpoint();break;case Xa.CIRCLE:s=t.getCenter();break;case Xa.MULTI_LINE_STRING:l=(s=t.getFlatMidpoints()).length;break;case Xa.POLYGON:s=t.getFlatInteriorPoint(),i.overflow||_.push(s[2]/this.resolution),h=3;break;case Xa.MULTI_POLYGON:var x=t.getFlatInteriorPoints();for(s=[],n=0,r=x.length;n<r;n+=3)i.overflow||_.push(x[n+2]/this.resolution),s.push(x[n],x[n+1]);if(0==(l=s.length))return}l=this.appendFlatCoordinates(s,0,l,h,!1,!1),this.saveTextStates_(),(i.backgroundFill||i.backgroundStroke)&&(this.setFillStrokeStyle(i.backgroundFill,i.backgroundStroke),i.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),i.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);var b=this.pixelRatio;this.instructions.push([ef.DRAW_IMAGE,o,l,null,NaN,NaN,this.declutterGroups_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,1,NaN,i.padding==zh?zh:i.padding.map(function(t){return t*b}),!!i.backgroundFill,!!i.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,_]),this.hitDetectionInstructions.push([ef.DRAW_IMAGE,o,l,null,NaN,NaN,this.declutterGroups_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,1/this.pixelRatio,NaN,i.padding,!!i.backgroundFill,!!i.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,_]),this.endGeometry(e)}}},e.prototype.saveTextStates_=function(){var t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,n=this.strokeKey_;t&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var r=this.textKey_;r in this.textStates||(this.textStates[r]={font:e.font,textAlign:e.textAlign||"center",textBaseline:e.textBaseline||"middle",scale:e.scale});var o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))},e.prototype.drawChars_=function(t,e,i){var n=this.textStrokeState_,r=this.textState_,o=this.strokeKey_,a=this.textKey_,s=this.fillKey_;this.saveTextStates_();var l=this.pixelRatio,h=pf[r.textBaseline],u=this.textOffsetY_*l,c=this.text_,p=n?n.lineWidth*r.scale/2:0;this.instructions.push([ef.DRAW_CHARS,t,e,h,i,r.overflow,s,r.maxAngle,l,u,o,p*l,c,a,1]),this.hitDetectionInstructions.push([ef.DRAW_CHARS,t,e,h,i,r.overflow,s,r.maxAngle,1,u,o,p,c,a,1/l])},e.prototype.setTextStyle=function(t,e){var i,n,o;if(t){this.declutterGroups_=e;var a=t.getFill();a?((n=this.textFillState_)||(n={},this.textFillState_=n),n.fillStyle=bi(a.getColor()||"#000")):(n=null,this.textFillState_=n);var s=t.getStroke();if(s){(o=this.textStrokeState_)||(o={},this.textStrokeState_=o);var l=s.getLineDash(),h=s.getLineDashOffset(),u=s.getWidth(),c=s.getMiterLimit();o.lineCap=s.getLineCap()||"round",o.lineDash=l?l.slice():Gh,o.lineDashOffset=void 0===h?0:h,o.lineJoin=s.getLineJoin()||"round",o.lineWidth=void 0===u?1:u,o.miterLimit=void 0===c?10:c,o.strokeStyle=bi(s.getColor()||"#000")}else o=null,this.textStrokeState_=o;i=this.textState_;var p=t.getFont()||"10px sans-serif";Zh(p);var d=t.getScale();i.overflow=t.getOverflow(),i.font=p,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.textBaseline=t.getTextBaseline()||"middle",i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||zh,i.scale=void 0===d?1:d;var f=t.getOffsetX(),g=t.getOffsetY(),v=t.getRotateWithView(),y=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===f?0:f,this.textOffsetY_=void 0===g?0:g,this.textRotateWithView_=void 0!==v&&v,this.textRotation_=void 0===y?0:y,this.strokeKey_=o?("string"==typeof o.strokeStyle?o.strokeStyle:r(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.textBaseline||"?"),this.fillKey_=n?"string"==typeof n.fillStyle?n.fillStyle:"|"+r(n.fillStyle):""}else this.text_=""},e}(rf)},ff=function(){function t(t,e,i,n,r){this.declutter_=r,this.declutterGroups_=null,this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=n,this.resolution_=i,this.buildersByZIndex_={}}return t.prototype.addDeclutter=function(t){var e=null;return this.declutter_&&(t?(e=this.declutterGroups_)[0][4]++:(e=[[1/0,1/0,-1/0,-1/0]],this.declutterGroups_=e,e[0].push(1))),e},t.prototype.finish=function(){var t={};for(var e in this.buildersByZIndex_){t[e]=t[e]||{};var i=this.buildersByZIndex_[e];for(var n in i){var r=i[n].finish();t[e][n]=r}}return t},t.prototype.getBuilder=function(t,e){var i=void 0!==t?t.toString():"0",n=this.buildersByZIndex_[i];void 0===n&&(n={},this.buildersByZIndex_[i]=n);var r=n[e];return void 0===r&&(r=new(0,df[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[e]=r),r},t}(),gf=[1/0,1/0,-1/0,-1/0],vf=[1,0,0,1,0,0],yf=[],mf=[],_f=[],xf=[],bf=function(){function t(t,e,i,n){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.declutterItems=[],this.instructions=n.instructions,this.coordinates=n.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=n.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=n.fillStates||{},this.strokeStates=n.strokeStates||{},this.textStates=n.textStates||{},this.widths_={},this.labels_={}}return t.prototype.createLabel=function(t,e,i,n){var r=t+e+i+n;if(this.labels_[r])return this.labels_[r];var o=n?this.strokeStates[n]:null,a=i?this.fillStates[i]:null,s=this.textStates[e],l=s.scale*this.pixelRatio,h=pf[s.textAlign||"center"],u=n&&o.lineWidth?o.lineWidth:0,c=t.split("\n"),p=c.length,d=[],f=function(t,e,i){for(var n=e.length,r=0,o=0;o<n;++o){var a=Si(t,e[o]);r=Math.max(r,a),i.push(a)}return r}(s.font,c,d),g=Kh(s.font),v=g*p,y=f+u,m=[],_={width:Math.ceil((y+2)*l),height:Math.ceil((v+u)*l),contextInstructions:m};1!=l&&m.push("scale",[l,l]),m.push("font",s.font),n&&(m.push("strokeStyle",o.strokeStyle),m.push("lineWidth",u),m.push("lineCap",o.lineCap),m.push("lineJoin",o.lineJoin),m.push("miterLimit",o.miterLimit),(Ys?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(m.push("setLineDash",[o.lineDash]),m.push("lineDashOffset",o.lineDashOffset))),i&&m.push("fillStyle",a.fillStyle),m.push("textBaseline","middle"),m.push("textAlign","center");var x,b=.5-h,w=h*y+b*u;if(n)for(x=0;x<p;++x)m.push("strokeText",[c[x],w+b*d[x],.5*(u+g)+x*g]);if(i)for(x=0;x<p;++x)m.push("fillText",[c[x],w+b*d[x],.5*(u+g)+x*g]);return this.labels_[r]=_,_},t.prototype.replayTextBackground_=function(t,e,i,n,r,o,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,n),t.lineTo.apply(t,r),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())},t.prototype.replayImageOrLabel_=function(t,e,i,n,r,o,a,s,l,h,u,c,p,d,f,g,v,y){var m=v||y;e-=r*=p,i-=o*=p;var _=f+h>n.width?n.width-h:f,x=s+u>n.height?n.height-u:s,b=g[3]+_*p+g[1],w=g[0]+x*p+g[2],S=e-g[3],C=i-g[0];(m||0!==c)&&(yf[0]=S,xf[0]=S,yf[1]=C,mf[1]=C,mf[0]=S+b,_f[0]=mf[0],_f[1]=C+w,xf[1]=_f[1]);var E=null;if(0!==c){var T=e+r,P=i+o;E=Yt(vf,T,P,1,1,c,-T,-P),zt(vf,yf),zt(vf,mf),zt(vf,_f),zt(vf,xf),R(Math.min(yf[0],mf[0],_f[0],xf[0]),Math.min(yf[1],mf[1],_f[1],xf[1]),Math.max(yf[0],mf[0],_f[0],xf[0]),Math.max(yf[1],mf[1],_f[1],xf[1]),gf)}else R(S,C,S+b,C+w,gf);var L=t.canvas,I=y?y[2]*p/2:0,O=gf[0]-I<=L.width&&gf[2]+I>=0&&gf[1]-I<=L.height&&gf[3]+I>=0;if(d&&(e=Math.round(e),i=Math.round(i)),a){if(!O&&1==a[4])return;D(a,gf);var A=O?[t,E?E.slice(0):null,l,n,h,u,_,x,e,i,p]:null;A&&(m&&A.push(v,y,yf.slice(0),mf.slice(0),_f.slice(0),xf.slice(0)),a.push(A))}else O&&(m&&this.replayTextBackground_(t,yf,mf,_f,xf,v,y),Ti(t,E,l,n,h,u,_,x,e,i,p))},t.prototype.fill_=function(t){if(this.alignFill_){var e=zt(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()},t.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.setLineDash&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},t.prototype.renderDeclutter=function(t,e,i,n){if(t&&t.length>5){var r=t[4];if(1==r||r==t.length-5){var o={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};if(n||(n=new tp.a(9)),!n.collides(o)){n.insert(o);for(var a=5,s=t.length;a<s;++a){var l=t[a],h=l[0],u=h.globalAlpha;u!==i&&(h.globalAlpha=i),l.length>11&&this.replayTextBackground_(l[0],l[13],l[14],l[15],l[16],l[11],l[12]),Ti.apply(void 0,l),u!==i&&(h.globalAlpha=u)}}t.length=5,M(t)}}return n},t.prototype.drawLabelWithPointPlacement_=function(t,e,i,n){var r=this.textStates[e],o=this.createLabel(t,e,n,i),a=this.strokeStates[i],s=this.pixelRatio,l=pf[r.textAlign||"center"],h=pf[r.textBaseline||"middle"],u=a&&a.lineWidth?a.lineWidth:0;return{label:o,anchorX:l*(o.width/s-2*r.scale)+2*(.5-l)*u,anchorY:h*o.height/s+2*(.5-h)*u}},t.prototype.execute_=function(t,e,i,n,r,o){var a,s,l;this.declutterItems.length=0,this.pixelCoordinates_&&v(e,this.renderedTransform_)?a=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),a=it(this.coordinates,0,this.coordinates.length,2,e,this.pixelCoordinates_),s=this.renderedTransform_,l=e,s[0]=l[0],s[1]=l[1],s[2]=l[2],s[3]=l[3],s[4]=l[4],s[5]=l[5]);for(var h,u,c,p,d,f,g,y,m,_,x,b,w,S,C,E,T,P=0,L=i.length,I=0,O=0,A=0,R=null,M=null,F=this.coordinateCache_,k=this.viewRotation_,N=Math.round(1e12*Math.atan2(-e[1],e[0]))/1e12,D={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:k},j=this.instructions!=i||this.overlaps?0:200;P<L;){var G=i[P];switch(G[0]){case ef.BEGIN_GEOMETRY:(C=G[1]).getGeometry()?void 0===o||J(o,G[3])?++P:P=G[2]+1:P=G[2];break;case ef.BEGIN_PATH:O>j&&(this.fill_(t),O=0),A>j&&(t.stroke(),A=0),O||A||(t.beginPath(),p=NaN,d=NaN),++P;break;case ef.CIRCLE:var z=a[I=G[1]],B=a[I+1],Y=a[I+2]-z,X=a[I+3]-B,W=Math.sqrt(Y*Y+X*X);t.moveTo(z+W,B),t.arc(z,B,W,0,2*Math.PI,!0),++P;break;case ef.CLOSE_PATH:t.closePath(),++P;break;case ef.CUSTOM:I=G[1],h=G[2];var U=G[4],V=6==G.length?G[5]:void 0;D.geometry=G[3],D.feature=C,P in F||(F[P]=[]);var H=F[P];V?V(a,I,h,2,H):(H[0]=a[I],H[1]=a[I+1],H.length=2),U(H,D),++P;break;case ef.DRAW_IMAGE:I=G[1],h=G[2],_=G[3],u=G[4],c=G[5],m=r?null:G[6];var q=G[7],Z=G[8],K=G[9],$=G[10],Q=G[11],tt=G[12],et=G[13],nt=G[14];if(!_&&G.length>=19){var rt=this.drawLabelWithPointPlacement_(x=G[18],b=G[19],w=G[20],S=G[21]);G[3]=_=rt.label,G[4]=u=(rt.anchorX-G[22])*this.pixelRatio,G[5]=c=(rt.anchorY-G[23])*this.pixelRatio,G[7]=q=_.height,G[14]=nt=_.width}var ot=void 0;G.length>24&&(ot=G[24]);var at=void 0,st=void 0,lt=void 0;G.length>16?(at=G[15],st=G[16],lt=G[17]):(at=zh,st=!1,lt=!1),Q&&N?tt+=k:Q||N||(tt-=k);for(var ht=0,ut=0;I<h;I+=2)if(!(ot&&ot[ht++]<nt/this.pixelRatio)){if(m){var ct=Math.floor(ut);m.length<ct+1&&((y=[1/0,1/0,-1/0,-1/0]).push(m[0][4]),m.push(y)),y=m[ct]}this.replayImageOrLabel_(t,a[I],a[I+1],_,u,c,y,q,Z,K,$,tt,et,n,nt,at,st?R:null,lt?M:null),y&&(ut===Math.floor(ut)&&this.declutterItems.push(this,y,C),ut+=1/y[4])}++P;break;case ef.DRAW_CHARS:var pt=G[1],dt=G[2],ft=G[3];y=r?null:G[4];var gt=G[5];S=G[6];var vt=G[7],yt=G[9];w=G[10];var mt=G[11];x=G[12];var _t=G[14],xt=this.textStates[b=G[13]],bt=xt.font,wt=xt.scale*G[8],St=void 0;bt in this.widths_?St=this.widths_[bt]:(St={},this.widths_[bt]=St);var Ct=Wn(a,pt,dt,2),Et=wt*Ci(bt,x,St);if(gt||Et<=Ct){var Tt=Un(a,pt,dt,2,x,(Ct-Et)*pf[this.textStates[b].textAlign],vt,wt,Ci,bt,St);if(Tt){var Pt=void 0,Lt=void 0,It=void 0,Ot=void 0,At=void 0;if(w)for(Pt=0,Lt=Tt.length;Pt<Lt;++Pt)It=(At=Tt[Pt])[4],Ot=this.createLabel(It,b,"",w),u=At[2]+mt,c=ft*Ot.height+2*(.5-ft)*mt-yt,this.replayImageOrLabel_(t,At[0],At[1],Ot,u,c,y,Ot.height,1,0,0,At[3],_t,!1,Ot.width,zh,null,null);if(S)for(Pt=0,Lt=Tt.length;Pt<Lt;++Pt)It=(At=Tt[Pt])[4],Ot=this.createLabel(It,b,S,""),u=At[2],c=ft*Ot.height-yt,this.replayImageOrLabel_(t,At[0],At[1],Ot,u,c,y,Ot.height,1,0,0,At[3],_t,!1,Ot.width,zh,null,null)}}this.declutterItems.push(this,y,C),++P;break;case ef.END_GEOMETRY:if(void 0!==r){var Rt=r(C=G[1]);if(Rt)return Rt}++P;break;case ef.FILL:j?O++:this.fill_(t),++P;break;case ef.MOVE_TO_LINE_TO:for(h=G[2],g=(T=a[(I=G[1])+1])+.5|0,(f=(E=a[I])+.5|0)===p&&g===d||(t.moveTo(E,T),p=f,d=g),I+=2;I<h;I+=2)f=(E=a[I])+.5|0,g=(T=a[I+1])+.5|0,I!=h-2&&f===p&&g===d||(t.lineTo(E,T),p=f,d=g);++P;break;case ef.SET_FILL_STYLE:R=G,this.alignFill_=G[2],O&&(this.fill_(t),O=0,A&&(t.stroke(),A=0)),t.fillStyle=G[1],++P;break;case ef.SET_STROKE_STYLE:M=G,A&&(t.stroke(),A=0),this.setStrokeStyle_(t,G),++P;break;case ef.STROKE:j?A++:t.stroke(),++P;break;default:++P}}O&&this.fill_(t),A&&t.stroke()},t.prototype.execute=function(t,e,i,n){this.viewRotation_=i,this.execute_(t,e,this.instructions,n,void 0,void 0)},t.prototype.executeHitDetection=function(t,e,i,n,r){return this.viewRotation_=i,this.execute_(t,e,this.hitDetectionInstructions,!0,n,r)},t}(),wf=["Polygon","Circle",au,ou,su,ru],Sf=function(){function t(t,e,i,n,r,o){this.maxExtent_=t,this.overlaps_=n,this.pixelRatio_=i,this.resolution_=e,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.createExecutors_(r)}return t.prototype.clip=function(t,e){var i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()},t.prototype.createExecutors_=function(t){for(var e in t){var i=this.executorsByZIndex_[e];void 0===i&&(i={},this.executorsByZIndex_[e]=i);var n=t[e];for(var r in n)i[r]=new bf(this.resolution_,this.pixelRatio_,this.overlaps_,n[r])}},t.prototype.hasExecutors=function(t){for(var e in this.executorsByZIndex_)for(var i=this.executorsByZIndex_[e],n=0,r=t.length;n<r;++n)if(t[n]in i)return!0;return!1},t.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,r,o){function a(t){for(var e=c.getImageData(0,0,s,s).data,i=0;i<s;i++)for(var n=0;n<s;n++)if(m[i][n]&&e[4*(n*s+i)+3]>0){var a=void 0;return(!o||p!=ou&&p!=su||-1!==o.indexOf(t))&&(a=r(t)),a||void c.clearRect(0,0,s,s)}}var s=2*(n=Math.round(n))+1,l=Yt(this.hitDetectionTransform_,n+.5,n+.5,1/e,-1/e,-i,-t[0],-t[1]);this.hitDetectionContext_||(this.hitDetectionContext_=Qe(s,s));var h,c=this.hitDetectionContext_;c.canvas.width!==s||c.canvas.height!==s?(c.canvas.width=s,c.canvas.height=s):c.clearRect(0,0,s,s),void 0!==this.renderBuffer_&&(j(h=[1/0,1/0,-1/0,-1/0],t),E(h,e*(this.renderBuffer_+n),h));var p,d,f,g,v,y,m=function(t){if(void 0!==Cf[t])return Cf[t];for(var e=2*t+1,i=new Array(e),n=0;n<e;n++)i[n]=new Array(e);for(var r=t,o=0,a=0;r>=o;)Vn(i,t+r,t+o),Vn(i,t+o,t+r),Vn(i,t-o,t+r),Vn(i,t-r,t+o),Vn(i,t-r,t-o),Vn(i,t-o,t-r),Vn(i,t+o,t-r),Vn(i,t+r,t-o),o++,2*((a+=1+2*o)-r)+1>0&&(a+=1-2*(r-=1));return Cf[t]=i,i}(n),_=Object.keys(this.executorsByZIndex_).map(Number);for(_.sort(u),d=_.length-1;d>=0;--d){var x=_[d].toString();for(g=this.executorsByZIndex_[x],f=wf.length-1;f>=0;--f)if(void 0!==(v=g[p=wf[f]])&&(y=v.executeHitDetection(c,l,i,a,h)))return y}},t.prototype.getClipCoords=function(t){var e=this.maxExtent_;if(!e)return null;var i=e[0],n=e[1],r=e[2],o=e[3],a=[i,n,i,o,r,o,r,n];return it(a,0,8,2,t,a),a},t.prototype.isEmpty=function(){return a(this.executorsByZIndex_)},t.prototype.execute=function(t,e,i,n,r,o){var a=Object.keys(this.executorsByZIndex_).map(Number);a.sort(u),this.maxExtent_&&(t.save(),this.clip(t,e));var s,l,h,c,p,d,f=r||wf;for(s=0,l=a.length;s<l;++s){var g=a[s].toString();for(p=this.executorsByZIndex_[g],h=0,c=f.length;h<c;++h){var v=f[h];if(void 0!==(d=p[v]))if(!o||v!=ou&&v!=su)d.execute(t,e,i,n);else{var y=o[g];y?y.push(d,e.slice(0)):o[g]=[d,e.slice(0)]}}}this.maxExtent_&&t.restore()},t}(),Cf={0:[[!0]]},Ef=Sf,Tf=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Pf=function(t){function e(e){var i=t.call(this,e)||this;return i.boundHandleStyleImageChange_=i.handleStyleImageChange_.bind(i),i.dirty_=!1,i.hitDetectionImageData_=null,i.renderedFeatures_=null,i.renderedRevision_=-1,i.renderedResolution_=NaN,i.renderedExtent_=[1/0,1/0,-1/0,-1/0],i.renderedCenter_=null,i.renderedProjection_=null,i.renderedRenderOrder_=null,i.replayGroup_=null,i.replayGroupChanged=!0,i}return Tf(e,t),e.prototype.useContainer=function(e,i,n){n<1&&(e=null),t.prototype.useContainer.call(this,e,i,n)},e.prototype.renderFrame=function(t,e){var i=t.pixelRatio,n=t.layerStatesArray[t.layerIndex];!function(t,e,n){Gt(t,1/i,0,0,1/i,0,0)}(this.pixelTransform),Xt(this.inversePixelTransform,this.pixelTransform);var r=Wt(this.pixelTransform);this.useContainer(e,r,n.opacity);var o=this.context,a=o.canvas,s=this.replayGroup_;if(!s||s.isEmpty())return!this.containerReused&&a.width>0&&(a.width=0),this.container;var l=Math.round(t.size[0]*i),h=Math.round(t.size[1]*i);a.width!=l||a.height!=h?(a.width=l,a.height=h,a.style.transform!==r&&(a.style.transform=r)):this.containerReused||o.clearRect(0,0,l,h),this.preRender(o,t);var u=t.extent,c=t.viewState,p=c.center,d=c.resolution,f=c.projection,g=c.rotation,v=f.getExtent(),y=this.getLayer().getSource(),m=!1;if(n.extent){var _=Nt(n.extent,f);(m=!I(_,t.extent)&&J(_,t.extent))&&this.clip(o,t,_)}var x=t.viewHints,b=!(x[0]||x[1]),w=this.getRenderTransform(p,d,g,i,l,h,0),S=this.getLayer().getDeclutter()?{}:null;if(s.execute(o,w,g,b,void 0,S),y.getWrapX()&&f.canWrapX()&&!I(v,u)){for(var C=u[0],E=K(v),T=0,P=void 0;C<v[0];){P=E*--T;var L=this.getRenderTransform(p,d,g,i,l,h,P);s.execute(o,L,g,b,void 0,S),C+=E}for(T=0,C=u[2];C>v[2];){P=E*++T;var O=this.getRenderTransform(p,d,g,i,l,h,P);s.execute(o,O,g,b,void 0,S),C-=E}}if(S){var A=t.viewHints;Hn(S,o,g,1,!(A[0]||A[1]),t.declutterItems)}m&&o.restore(),this.postRender(o,t);var R=n.opacity,M=this.container;return R!==parseFloat(M.style.opacity)&&(M.style.opacity=1===R?"":R),this.container},e.prototype.getFeatures=function(t){return new Promise((function(e,i){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var n=[this.context.canvas.width,this.context.canvas.height];zt(this.pixelTransform,n);var r=this.renderedCenter_,o=this.renderedResolution_,a=this.renderedRotation_,s=this.renderedProjection_,l=this.renderedExtent_,h=this.getLayer(),u=[],c=n[0]/2,p=n[1]/2;u.push(this.getRenderTransform(r,o,a,.5,c,p,0).slice());var d=h.getSource(),f=s.getExtent();if(d.getWrapX()&&s.canWrapX()&&!I(f,l)){for(var g=l[0],v=K(f),y=0,m=void 0;g<f[0];)m=v*--y,u.push(this.getRenderTransform(r,o,a,.5,c,p,m).slice()),g+=v;for(y=0,g=l[2];g>f[2];)m=v*++y,u.push(this.getRenderTransform(r,o,a,.5,c,p,m).slice()),g-=v}this.hitDetectionImageData_=qn(n,u,this.renderedFeatures_,h.getStyleFunction(),l,o,a)}e(Zn(t,this.renderedFeatures_,this.hitDetectionImageData_))}).bind(this))},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,o){if(this.replayGroup_){var a=e.viewState.resolution,s=e.viewState.rotation,l=this.getLayer(),h={};return this.replayGroup_.forEachFeatureAtCoordinate(t,a,s,i,function(t){var e=r(t);if(!(e in h))return h[e]=!0,n(t,l)},l.getDeclutter()?o:null)}},e.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t){var e=this.getLayer(),i=e.getSource();if(!i)return!1;var n=t.viewHints[0],r=t.viewHints[1],o=e.getUpdateWhileAnimating(),a=e.getUpdateWhileInteracting();if(!this.dirty_&&!o&&n||!a&&r)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var s=t.extent,l=t.viewState,h=l.projection,u=l.resolution,c=t.pixelRatio,p=e.getRevision(),d=e.getRenderBuffer(),f=e.getRenderOrder();void 0===f&&(f=Li);var g=l.center.slice(),v=E(s,d*u),y=[v.slice()],m=h.getExtent();if(i.getWrapX()&&h.canWrapX()&&!I(m,t.extent)){var _=K(m),x=Math.max(K(v)/2,_);v[0]=m[0]-x,v[2]=m[2]+x,Ve(g,h);var b=et(y[0],h);b[0]<m[0]&&b[2]<m[2]?y.push([b[0]+_,b[1],b[2]+_,b[3]]):b[0]>m[0]&&b[2]>m[2]&&y.push([b[0]-_,b[1],b[2]-_,b[3]])}if(!this.dirty_&&this.renderedResolution_==u&&this.renderedRevision_==p&&this.renderedRenderOrder_==f&&I(this.renderedExtent_,v))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var w,S=new ff(Oi(u,c),v,u,c,e.getDeclutter()),C=Rt();if(C){for(var T=0,P=y.length;T<P;++T)i.loadFeatures(kt(y[T],h),u,C);w=Lt(C,h)}else for(T=0,P=y.length;T<P;++T)i.loadFeatures(y[T],u,h);var L=Ii(u,c),O=(function(t){var i,n=t.getStyleFunction()||e.getStyleFunction();if(n&&(i=n(t,u)),i){var r=this.renderFeature(t,L,i,S,w);this.dirty_=this.dirty_||r}}).bind(this),A=kt(v,h),R=i.getFeaturesInExtent(A);for(f&&R.sort(f),T=0,P=R.length;T<P;++T)O(R[T]);this.renderedFeatures_=R;var M=S.finish(),F=new Ef(v,u,c,i.getOverlaps(),M,e.getRenderBuffer());return this.renderedResolution_=u,this.renderedRevision_=p,this.renderedRenderOrder_=f,this.renderedExtent_=v,this.renderedRotation_=l.rotation,this.renderedCenter_=g,this.renderedProjection_=h,this.replayGroup_=F,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(t,e,i,n,r){if(!i)return!1;var o=!1;if(Array.isArray(i))for(var a=0,s=i.length;a<s;++a)o=Ai(n,t,i[a],e,this.boundHandleStyleImageChange_,r)||o;else o=Ai(n,t,i,e,this.boundHandleStyleImageChange_,r);return o},e}(Kp),Lf=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),If=function(t){function e(e){var i=t.call(this,e)||this;return i.vectorRenderer_=new Pf(e),i.layerImageRatio_=e.getImageRatio(),i.coordinateToVectorPixelTransform_=[1,0,0,1,0,0],i.renderedPixelToCoordinateTransform_=null,i}return Lf(e,t),e.prototype.disposeInternal=function(){this.vectorRenderer_.dispose(),t.prototype.disposeInternal.call(this)},e.prototype.getFeatures=function(t){if(this.vectorRenderer_){var e=zt(this.coordinateToVectorPixelTransform_,zt(this.renderedPixelToCoordinateTransform_,t.slice()));return this.vectorRenderer_.getFeatures(e)}return new Promise(function(t,e){t([])})},e.prototype.handleFontsChanged=function(){this.vectorRenderer_.handleFontsChanged()},e.prototype.prepareFrame=function(t){var e=t.pixelRatio,i=t.viewState,n=i.resolution,r=t.viewHints,o=this.vectorRenderer_,a=t.extent;1!==this.layerImageRatio_&&Q(a=a.slice(0),this.layerImageRatio_);var s=K(a)/n,l=V(a)/n;if(!r[0]&&!r[1]&&!$(a)){o.useContainer(null,null,1);var h=o.context,u=na({},t,{declutterItems:[],extent:a,size:[s,l],viewState:na({},t.viewState,{rotation:0})}),c=new Ap(a,n,e,h.canvas,function(t){o.prepareFrame(u)&&o.replayGroupChanged&&(o.renderFrame(u,null),Mi(u,null),t())});c.addEventListener(ha,(function(){c.getState()===eu&&(this.image_=c)}).bind(this)),c.load()}if(this.image_){var p=this.image_,d=p.getResolution()*e/p.getPixelRatio();this.renderedResolution=d,this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.coordinateToVectorPixelTransform_=Yt(this.coordinateToVectorPixelTransform_,s/2,l/2,1/d,-1/d,0,-i.center[0],-i.center[1])}return!!this.image_},e.prototype.preRender=function(){},e.prototype.postRender=function(){},e.prototype.forEachFeatureAtCoordinate=function(e,i,n,r,o){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(e,i,n,r,o):t.prototype.forEachFeatureAtCoordinate.call(this,e,i,n,r,o)},e}($p),Of="image",Af="hybrid",Rf="vector",Mf=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ff={image:["Polygon","Circle",au,ou,su],hybrid:["Polygon",au],vector:[]},kf={image:[ru],hybrid:[ou,su,ru],vector:["Polygon","Circle",au,ou,su,ru]},Nf=function(t){function e(e){var i=t.call(this,e)||this;return i.boundHandleStyleImageChange_=i.handleStyleImageChange_.bind(i),i.dirty_=!1,i.renderedPixelToCoordinateTransform_=null,i.renderTileImageQueue_={},i.tileListenerKeys_={},i.tmpTransform_=[1,0,0,1,0,0],i}return Mf(e,t),e.prototype.prepareTile=function(t,e,i,n){var o,a=r(t),s=t.getState();return(s===ol&&t.hifi||3===s)&&a in this.tileListenerKeys_&&(h(this.tileListenerKeys_[a]),delete this.tileListenerKeys_[a]),s!==ol&&3!==s||(this.updateExecutorGroup_(t,e,i),this.tileImageNeedsRender_(t,e,i)&&(o=!0,n&&(this.renderTileImageQueue_[a]=t))),o},e.prototype.getTile=function(e,i,n,o){var a=o.pixelRatio,l=o.viewState,h=l.resolution,u=l.projection,c=this.getLayer(),p=c.getSource().getTile(e,i,n,a,u);if(p.getState()<ol){p.wantedResolution=h;var d=r(p);if(!(d in this.tileListenerKeys_)){var f=s(p,ha,this.prepareTile.bind(this,p,a,u,!0));this.tileListenerKeys_[d]=f}}else{var g=o.viewHints;!(!g[0]&&!g[1])&&p.wantedResolution||(p.wantedResolution=h),this.prepareTile(p,a,u,!1)&&c.getRenderMode()!==Rf&&this.renderTileImage_(p,o)}return t.prototype.getTile.call(this,e,i,n,o)},e.prototype.isDrawableTile=function(e){var i=this.getLayer();return t.prototype.isDrawableTile.call(this,e)&&i.getRenderMode()===Rf||e.hasContext(i)},e.prototype.getTileImage=function(t){return t.getImage(this.getLayer())},e.prototype.prepareFrame=function(e){var i=this.getLayer().getRevision();return this.renderedLayerRevision_!=i&&(this.renderedTiles.length=0),this.renderedLayerRevision_=i,t.prototype.prepareFrame.call(this,e)},e.prototype.updateExecutorGroup_=function(t,e,i){var n=this.getLayer(),o=n.getRevision(),a=n.getRenderOrder()||null,s=t.wantedResolution,l=t.getReplayState(n);if(l.dirty||l.renderedResolution!==s||l.renderedRevision!=o||l.renderedRenderOrder!=a||l.renderedZ!==t.sourceZ){var h=n.getSource(),u=h.getTileGrid(),c=h.getTileGridForProjection(i).getTileCoordExtent(t.wrappedTileCoord),p=h.getSourceTiles(e,i,t),d=r(n);delete t.hitDetectionImageData[d],t.executorGroups[d]=[];for(var f=function(i,r){var o=p[i];if(o.getState()!=ol)return"continue";var f=u.getTileCoordExtent(o.tileCoord),v=H(c,f),y=N(f,v)?null:E(v,n.getRenderBuffer()*s,g.tmpExtent);l.dirty=!1;var m=new ff(0,v,s,e,n.getDeclutter()),_=Ii(s,e),x=function(t){var e,i=t.getStyleFunction()||n.getStyleFunction();if(i&&(e=i(t,s)),e){var r=this.renderFeature(t,_,e,m);this.dirty_=this.dirty_||r,l.dirty=l.dirty||r}},b=o.getFeatures();a&&a!==l.renderedRenderOrder&&b.sort(a);for(var w=0,S=b.length;w<S;++w){var C=b[w];y&&!J(y,C.getGeometry().getExtent())||x.call(g,C)}var T=m.finish(),P=n.getRenderMode()!==Rf&&n.getDeclutter()&&1===p.length?null:v,L=new Ef(P,s,e,h.getOverlaps(),T,n.getRenderBuffer());t.executorGroups[d].push(L)},g=this,v=0,y=p.length;v<y;++v)f(v);l.renderedRevision=o,l.renderedZ=t.sourceZ,l.renderedRenderOrder=a,l.renderedResolution=s}},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,o){var a=e.viewState.resolution,s=e.viewState.rotation;i=null==i?0:i;var l,h,u,c=this.getLayer(),p=c.getDeclutter(),d=c.getSource().getTileGridForProjection(e.viewState.projection),f={},g=this.renderedTiles,v=function(){var e=g[h],u=L(d.getTileCoordExtent(e.wrappedTileCoord),t);if(!p&&!u)return"continue";for(var v=e.executorGroups[r(c)],y=0,m=v.length;y<m;++y)l=l||v[y].forEachFeatureAtCoordinate(t,a,s,i,function(t){if(u||o&&-1!==o.indexOf(t)){var e=t.getId();if(void 0===e&&(e=r(t)),!(e in f))return f[e]=!0,n(t,c)}},c.getDeclutter()?o:null)};for(h=0,u=g.length;h<u;++h)v();return l},e.prototype.getFeatures=function(t){return new Promise((function(e,i){for(var n,o=this.getLayer(),a=r(o),s=o.getSource(),l=this.renderedProjection,h=l.getExtent(),u=this.renderedResolution,c=s.getTileGridForProjection(l),p=zt(this.renderedPixelToCoordinateTransform_,t.slice()),d=c.getTileCoordForCoordAndResolution(p,u),f=0,g=this.renderedTiles.length;f<g;++f)if(d.toString()===this.renderedTiles[f].tileCoord.toString()){if((n=this.renderedTiles[f]).getState()===ol&&n.hifi){var v=c.getTileCoordExtent(n.tileCoord);s.getWrapX()&&l.canWrapX()&&!I(h,v)&&Ve(p,l);break}n=void 0}if(!n||n.loadingSourceTiles>0)e([]);else{var y=q(c.getTileCoordExtent(n.wrappedTileCoord)),m=[(p[0]-y[0])/u,(y[1]-p[1])/u],_=n.getSourceTiles().reduce(function(t,e){return t.concat(e.getFeatures())},[]),x=n.hitDetectionImageData[a];if(!x&&!this.animatingOrInteracting_){var b=oi(c.getTileSize(c.getZForResolution(u))),w=[b[0]/2,b[1]/2],S=this.renderedRotation_;x=qn(b,[this.getRenderTransform(c.getTileCoordCenter(n.wrappedTileCoord),u,0,.5,w[0],w[1],0)],_,o.getStyleFunction(),c.getTileCoordExtent(n.wrappedTileCoord),n.getReplayState(o).renderedResolution,S),n.hitDetectionImageData[a]=x}e(Zn(m,_,x))}}).bind(this))},e.prototype.handleFontsChanged=function(){o(this.renderTileImageQueue_);var t=this.getLayer();t.getVisible()&&void 0!==this.renderedLayerRevision_&&t.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.renderFrame=function(e,i){var n=e.viewHints,o=!(n[0]||n[1]);this.renderQueuedTileImages_(o,e),t.prototype.renderFrame.call(this,e,i),this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice(),this.renderedRotation_=e.viewState.rotation;var a=this.getLayer(),s=a.getRenderMode();if(s===Of)return this.container;var l=a.getSource(),h=e.usedTiles[r(l)];for(var u in this.renderTileImageQueue_)h&&u in h||delete this.renderTileImageQueue_[u];for(var c=this.context,p=a.getDeclutter()?{}:null,d=kf[s],f=e.pixelRatio,g=e.viewState,v=g.center,y=g.resolution,m=g.rotation,_=e.size,x=Math.round(_[0]*f),b=Math.round(_[1]*f),w=this.renderedTiles,S=l.getTileGridForProjection(e.viewState.projection),C=[],E=[],T=w.length-1;T>=0;--T)for(var P=w[T],L=P.tileCoord,I=S.getTileCoordExtent(P.wrappedTileCoord),O=S.getTileCoordExtent(L,this.tmpExtent)[0]-I[0],A=jt(Bt(this.inversePixelTransform.slice(),1/f,1/f),this.getRenderTransform(v,y,m,f,x,b,O)),R=P.executorGroups[r(a)],M=!1,F=0,k=R.length;F<k;++F){var N=R[F];if(N.hasExecutors(d)){var D=P.tileCoord[0],j=void 0;if(!p&&!M){j=N.getClipCoords(A),c.save();for(var G=0,z=C.length;G<z;++G){var B=C[G];D<E[G]&&(c.beginPath(),c.moveTo(j[0],j[1]),c.lineTo(j[2],j[3]),c.lineTo(j[4],j[5]),c.lineTo(j[6],j[7]),c.moveTo(B[6],B[7]),c.lineTo(B[4],B[5]),c.lineTo(B[2],B[3]),c.lineTo(B[0],B[1]),c.clip())}}N.execute(c,A,m,o,d,p),p||M||(c.restore(),C.push(j),E.push(D),M=!0)}}return p&&Hn(p,c,m,e.layerStatesArray[e.layerIndex].opacity,o,e.declutterItems),this.container},e.prototype.renderQueuedTileImages_=function(t,e){for(var i in this.renderTileImageQueue_){if(!t&&Date.now()-e.time>8){e.animate=!0;break}var n=this.renderTileImageQueue_[i];delete this.renderTileImageQueue_[i],this.renderTileImage_(n,e)}},e.prototype.renderFeature=function(t,e,i,n){if(!i)return!1;var r=!1;if(Array.isArray(i))for(var o=0,a=i.length;o<a;++o)r=Ai(n,t,i[o],e,this.boundHandleStyleImageChange_)||r;else r=Ai(n,t,i,e,this.boundHandleStyleImageChange_);return r},e.prototype.tileImageNeedsRender_=function(t,e,i){var n=this.getLayer(),r=t.getReplayState(n),o=n.getRevision();return r.renderedTileResolution!==t.wantedResolution||r.renderedTileRevision!==o||r.renderedTileZ!==t.sourceZ},e.prototype.renderTileImage_=function(t,e){var i=this.getLayer(),n=t.getReplayState(i),o=i.getRevision(),a=t.executorGroups[r(i)];n.renderedTileRevision=o,n.renderedTileZ=t.sourceZ;var s=t.wrappedTileCoord,l=s[0],h=i.getSource(),u=e.pixelRatio,c=e.viewState.projection,p=h.getTileGridForProjection(c),d=p.getResolution(t.tileCoord[0]),f=e.pixelRatio/t.wantedResolution*d,g=p.getResolution(l),v=t.getContext(i);u=Math.max(u,f/u);var y=h.getTilePixelSize(l,u,c);v.canvas.width=y[0],v.canvas.height=y[1];var m=u/f;if(1!==m){var _=Dt(this.tmpTransform_);Bt(_,m,m),v.setTransform.apply(v,_)}var x=p.getTileCoordExtent(s,this.tmpExtent),b=f/g,w=Dt(this.tmpTransform_);Bt(w,b,-b),jt(w,Gt(fs,1,0,0,1,-x[0],-x[3]));for(var S=0,C=a.length;S<C;++S)a[S].execute(v,w,0,!0,Ff[i.getRenderMode()]);n.renderedTileResolution=t.wantedResolution},e}(od),Df=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),jf=function(t){function e(e){return t.call(this,e)||this}return Df(e,t),e.prototype.createRenderer=function(){return new Pf(this)},e}(Hd),Gf=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),zf=function(t){function e(e,i){var n=t.call(this)||this;return n.flatMidpoint_=null,n.flatMidpointRevision_=-1,n.maxDelta_=-1,n.maxDeltaRevision_=-1,void 0===i||Array.isArray(e[0])?n.setCoordinates(e,i):n.setFlatCoordinates(i,e),n}return Gf(e,t),e.prototype.appendCoordinate=function(t){this.flatCoordinates?f(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,n){return n<P(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Zt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Jt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,n))},e.prototype.forEachSegment=function(t){return fe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,e){return this.layout!=Ba&&this.layout!=Ya?null:Jn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,void 0!==e&&e)},e.prototype.getCoordinates=function(){return ie(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,e){return Kn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e)},e.prototype.getLength=function(){return Wn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=oe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,Ga)},e.prototype.getType=function(){return Xa.LINE_STRING},e.prototype.intersectsExtent=function(t){return ge(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=te(this.flatCoordinates,0,t,this.stride),this.changed()},e}(_s),Bf=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Yf=new yc({color:"rgba(0,0,0,0.2)"}),Xf=[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001],Wf=function(t){function e(e){var i=this,n=e||{},r=na({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},n);return delete r.maxLines,delete r.strokeStyle,delete r.targetSize,delete r.showLabels,delete r.lonLabelFormatter,delete r.latLabelFormatter,delete r.lonLabelPosition,delete r.latLabelPosition,delete r.lonLabelStyle,delete r.latLabelStyle,delete r.intervals,(i=t.call(this,r)||this).projection_=null,i.maxLat_=1/0,i.maxLon_=1/0,i.minLat_=-1/0,i.minLon_=-1/0,i.maxX_=1/0,i.maxY_=1/0,i.minX_=-1/0,i.minY_=-1/0,i.targetSize_=void 0!==n.targetSize?n.targetSize:100,i.maxLines_=void 0!==n.maxLines?n.maxLines:100,i.meridians_=[],i.parallels_=[],i.strokeStyle_=void 0!==n.strokeStyle?n.strokeStyle:Yf,i.fromLonLatTransform_=void 0,i.toLonLatTransform_=void 0,i.projectionCenterLonLat_=null,i.bottomLeft_=null,i.bottomRight_=null,i.topLeft_=null,i.topRight_=null,i.meridiansLabels_=null,i.parallelsLabels_=null,n.showLabels&&(i.lonLabelFormatter_=null==n.lonLabelFormatter?De.bind(i,"EW"):n.lonLabelFormatter,i.latLabelFormatter_=null==n.latLabelFormatter?De.bind(i,"NS"):n.latLabelFormatter,i.lonLabelPosition_=null==n.lonLabelPosition?0:n.lonLabelPosition,i.latLabelPosition_=null==n.latLabelPosition?1:n.latLabelPosition,i.lonLabelStyleBase_=new xc({text:void 0!==n.lonLabelStyle?n.lonLabelStyle.clone():new wc({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new nc({color:"rgba(0,0,0,1)"}),stroke:new yc({color:"rgba(255,255,255,1)",width:3})})}),i.lonLabelStyle_=(function(t){var e=t.get("graticule_label");return this.lonLabelStyleBase_.getText().setText(e),this.lonLabelStyleBase_}).bind(i),i.latLabelStyleBase_=new xc({text:void 0!==n.latLabelStyle?n.latLabelStyle.clone():new wc({font:"12px Calibri,sans-serif",textAlign:"right",fill:new nc({color:"rgba(0,0,0,1)"}),stroke:new yc({color:"rgba(255,255,255,1)",width:3})})}),i.latLabelStyle_=(function(t){var e=t.get("graticule_label");return this.latLabelStyleBase_.getText().setText(e),this.latLabelStyleBase_}).bind(i),i.meridiansLabels_=[],i.parallelsLabels_=[],i.addEventListener(nl,i.drawLabels_.bind(i))),i.intervals_=void 0!==n.intervals?n.intervals:Xf,i.setSource(new rp({loader:i.loaderFunction.bind(i),strategy:i.strategyFunction.bind(i),features:new Ta,overlaps:!1,useSpatialIndex:!1,wrapX:n.wrapX})),i.featurePool_=[],i.lineStyle_=new xc({stroke:i.strokeStyle_}),i.loadedExtent_=null,i.renderedExtent_=null,i.setRenderOrder(null),i}return Bf(e,t),e.prototype.strategyFunction=function(t,e){var i,n,r,o=t.slice();return this.projection_&&this.getSource().getWrapX()&&et(o,this.projection_),this.loadedExtent_&&(i=this.loadedExtent_,n=o,r=e,Math.abs(i[0]-n[0])<r&&Math.abs(i[2]-n[2])<r&&Math.abs(i[1]-n[1])<r&&Math.abs(i[3]-n[3])<r?o=this.loadedExtent_.slice():this.getSource().removeLoadedExtent(this.loadedExtent_)),[o]},e.prototype.loaderFunction=function(t,e,i){this.loadedExtent_=t;var n=this.getSource(),r=H(this.getExtent()||[-1/0,-1/0,1/0,1/0],t);if(!(this.renderedExtent_&&N(this.renderedExtent_,r)||(this.renderedExtent_=r,$(r)))){var o=W(r),a=e*e/4;(!this.projection_||!Pt(this.projection_,i))&&this.updateProjectionInfo_(i),this.createGraticule_(r,o,e,a);var s,l=this.meridians_.length+this.parallels_.length;for(this.meridiansLabels_&&(l+=this.meridians_.length),this.parallelsLabels_&&(l+=this.parallels_.length);l>this.featurePool_.length;)s=new La,this.featurePool_.push(s);var h=n.getFeaturesCollection();h.clear();var u,c,p=0;for(u=0,c=this.meridians_.length;u<c;++u)(s=this.featurePool_[p++]).setGeometry(this.meridians_[u]),s.setStyle(this.lineStyle_),h.push(s);for(u=0,c=this.parallels_.length;u<c;++u)(s=this.featurePool_[p++]).setGeometry(this.parallels_[u]),s.setStyle(this.lineStyle_),h.push(s)}},e.prototype.addMeridian_=function(t,e,i,n,r,o){var a=this.getMeridian_(t,e,i,n,o);if(J(a.getExtent(),r)){if(this.meridiansLabels_){var s=this.lonLabelFormatter_(t);o in this.meridiansLabels_?this.meridiansLabels_[o].text=s:this.meridiansLabels_[o]={geom:new Ss([]),text:s}}this.meridians_[o++]=a}return o},e.prototype.addParallel_=function(t,e,i,n,r,o){var a=this.getParallel_(t,e,i,n,o);if(J(a.getExtent(),r)){if(this.parallelsLabels_){var s=this.latLabelFormatter_(t);o in this.parallelsLabels_?this.parallelsLabels_[o].text=s:this.parallelsLabels_[o]={geom:new Ss([]),text:s}}this.parallels_[o++]=a}return o},e.prototype.drawLabels_=function(t){var e=t.frameState.viewState.rotation,i=t.frameState.extent,n=W(i),r=i;if(e){var o=K(i),a=V(i),s=Math.abs(Math.cos(e)),l=Math.abs(Math.sin(e)),h=(l*a-s*o)/(l*l-s*s),u=(l*o-s*a)/(l*l-s*s);r=[n[0]-h/2,n[1]-u/2,n[0]+h/2,n[1]+u/2]}var c=0,p=0,d=this.latLabelPosition_<.5,f=this.projection_.getExtent(),g=K(f);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!I(f,i)&&(c=Math.floor((i[0]-f[0])/g),p=Math.ceil((i[2]-f[2])/g),d=d!==Math.abs(e)>Math.PI/2);for(var v=Ri(t),y=c;y<=p;++y){var m=this.meridians_.length+this.parallels_.length,_=void 0,x=void 0,b=void 0,w=void 0;if(this.meridiansLabels_)for(x=0,b=this.meridiansLabels_.length;x<b;++x){var S=this.meridians_[x];e||0!==y?((C=S.clone()).translate(y*g,0),C.rotate(-e,n),(w=this.getMeridianPoint_(C,r,x)).rotate(e,n)):w=this.getMeridianPoint_(S,i,x),(_=this.featurePool_[m++]).setGeometry(w),_.set("graticule_label",this.meridiansLabels_[x].text),v.drawFeature(_,this.lonLabelStyle_(_))}if(this.parallelsLabels_&&(y===c&&d||y===p&&!d))for(x=0,b=this.parallels_.length;x<b;++x){var C;S=this.parallels_[x],e||0!==y?((C=S.clone()).translate(y*g,0),C.rotate(-e,n),(w=this.getParallelPoint_(C,r,x)).rotate(e,n)):w=this.getParallelPoint_(S,i,x),(_=this.featurePool_[m++]).setGeometry(w),_.set("graticule_label",this.parallelsLabels_[x].text),v.drawFeature(_,this.latLabelStyle_(_))}}},e.prototype.createGraticule_=function(t,e,i,n){var r=this.getInterval_(i);if(-1==r)return this.meridians_.length=0,this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),void(this.parallelsLabels_&&(this.parallelsLabels_.length=0));var o=!1,a=this.projection_.getExtent(),s=K(a);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!I(a,t)&&(K(t)>=s?(t[0]=a[0],t[2]=a[2]):o=!0);var l=[ot(e[0],this.minX_,this.maxX_),ot(e[1],this.minY_,this.maxY_)],h=this.toLonLatTransform_(l);isNaN(h[1])&&(h[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_);var u,c,p,d,f=ot(h[0],this.minLon_,this.maxLon_),g=ot(h[1],this.minLat_,this.maxLat_),v=this.maxLines_,y=t;o||(y=[ot(t[0],this.minX_,this.maxX_),ot(t[1],this.minY_,this.maxY_),ot(t[2],this.minX_,this.maxX_),ot(t[3],this.minY_,this.maxY_)]);var m=tt(y,this.toLonLatTransform_,void 0,8),_=m[3],x=m[2],b=m[1],w=m[0];if(o||(L(y,this.bottomLeft_)&&(w=this.minLon_,b=this.minLat_),L(y,this.bottomRight_)&&(x=this.maxLon_,b=this.minLat_),L(y,this.topLeft_)&&(w=this.minLon_,_=this.maxLat_),L(y,this.topRight_)&&(x=this.maxLon_,_=this.maxLat_),_=ot(_,g,this.maxLat_),x=ot(x,f,this.maxLon_),b=ot(b,this.minLat_,g),w=ot(w,this.minLon_,f)),d=ot(f=Math.floor(f/r)*r,this.minLon_,this.maxLon_),c=this.addMeridian_(d,b,_,n,t,0),u=0,o)for(;(d-=r)>=w&&u++<v;)c=this.addMeridian_(d,b,_,n,t,c);else for(;d!=this.minLon_&&u++<v;)d=Math.max(d-r,this.minLon_),c=this.addMeridian_(d,b,_,n,t,c);if(d=ot(f,this.minLon_,this.maxLon_),u=0,o)for(;(d+=r)<=x&&u++<v;)c=this.addMeridian_(d,b,_,n,t,c);else for(;d!=this.maxLon_&&u++<v;)d=Math.min(d+r,this.maxLon_),c=this.addMeridian_(d,b,_,n,t,c);for(this.meridians_.length=c,this.meridiansLabels_&&(this.meridiansLabels_.length=c),p=ot(g=Math.floor(g/r)*r,this.minLat_,this.maxLat_),c=this.addParallel_(p,w,x,n,t,0),u=0;p!=this.minLat_&&u++<v;)p=Math.max(p-r,this.minLat_),c=this.addParallel_(p,w,x,n,t,c);for(p=ot(g,this.minLat_,this.maxLat_),u=0;p!=this.maxLat_&&u++<v;)p=Math.min(p+r,this.maxLat_),c=this.addParallel_(p,w,x,n,t,c);this.parallels_.length=c,this.parallelsLabels_&&(this.parallelsLabels_.length=c)},e.prototype.getInterval_=function(t){for(var e=this.projectionCenterLonLat_[0],i=this.projectionCenterLonLat_[1],n=-1,r=Math.pow(this.targetSize_*t,2),o=[],a=[],s=0,l=this.intervals_.length;s<l;++s){var h=ot(this.intervals_[s]/2,0,90),u=ot(i,-90+h,90-h);if(o[0]=e-h,o[1]=u-h,a[0]=e+h,a[1]=u+h,this.fromLonLatTransform_(o,o),this.fromLonLatTransform_(a,a),Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2)<=r)break;n=this.intervals_[s]}return n},e.prototype.getMeridian_=function(t,e,i,n,r){var o=function(t,e,i,n,r){return $n(function(n){return[t,e+(i-e)*n]},It(bt("EPSG:4326"),n),r)}(t,e,i,this.projection_,n),a=this.meridians_[r];return a?(a.setFlatCoordinates(Ga,o),a.changed()):(a=new zf(o,Ga),this.meridians_[r]=a),a},e.prototype.getMeridianPoint_=function(t,e,i){var n=t.getFlatCoordinates(),r=1,o=n.length-1;n[r]>n[o]&&(r=o,o=1);var a=Math.max(e[1],n[r]),s=Math.min(e[3],n[o]),l=ot(e[1]+Math.abs(e[1]-e[3])*this.lonLabelPosition_,a,s),h=this.meridiansLabels_[i].geom;return h.setCoordinates([n[r-1]+(n[o-1]-n[r-1])*(l-n[r])/(n[o]-n[r]),l]),h},e.prototype.getMeridians=function(){return this.meridians_},e.prototype.getParallel_=function(t,e,i,n,r){var o=function(t,e,i,n,r){return $n(function(n){return[e+(i-e)*n,t]},It(bt("EPSG:4326"),n),r)}(t,e,i,this.projection_,n),a=this.parallels_[r];return a?(a.setFlatCoordinates(Ga,o),a.changed()):a=new zf(o,Ga),a},e.prototype.getParallelPoint_=function(t,e,i){var n=t.getFlatCoordinates(),r=0,o=n.length-2;n[r]>n[o]&&(r=o,o=0);var a=Math.max(e[0],n[r]),s=Math.min(e[2],n[o]),l=ot(e[0]+Math.abs(e[0]-e[2])*this.latLabelPosition_,a,s),h=this.parallelsLabels_[i].geom;return h.setCoordinates([l,n[r+1]+(n[o+1]-n[r+1])*(l-n[r])/(n[o]-n[r])]),h},e.prototype.getParallels=function(){return this.parallels_},e.prototype.updateProjectionInfo_=function(t){var e=bt("EPSG:4326"),i=t.getWorldExtent();this.maxLat_=i[3],this.maxLon_=i[2],this.minLat_=i[1],this.minLon_=i[0];var n=It(t,e);if(this.minLon_<this.maxLon_)this.toLonLatTransform_=n;else{var r=this.minLon_+this.maxLon_/2;this.maxLon_+=360,this.toLonLatTransform_=function(t,e,i){for(var o=i||2,a=n(t,e,o),s=0,l=a.length;s<l;s+=o)a[s]<r&&(a[s]+=360);return a}}this.fromLonLatTransform_=It(e,t);var o=tt([this.minLon_,this.minLat_,this.maxLon_,this.maxLat_],this.fromLonLatTransform_,void 0,8);this.minX_=o[0],this.maxX_=o[2],this.minY_=o[1],this.maxY_=o[3],this.bottomLeft_=this.fromLonLatTransform_([this.minLon_,this.minLat_]),this.bottomRight_=this.fromLonLatTransform_([this.maxLon_,this.minLat_]),this.topLeft_=this.fromLonLatTransform_([this.minLon_,this.maxLat_]),this.topRight_=this.fromLonLatTransform_([this.maxLon_,this.maxLat_]),this.projectionCenterLonLat_=this.toLonLatTransform_(W(t.getExtent())),isNaN(this.projectionCenterLonLat_[1])&&(this.projectionCenterLonLat_[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_),this.projection_=t},e}(jf),Uf=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Vf="gradient",Hf=["#00f","#0ff","#0f0","#ff0","#f00"],qf=function(t){function e(e){var i=this,n=e||{},r=na({},n);delete r.gradient,delete r.radius,delete r.blur,delete r.weight,(i=t.call(this,r)||this).gradient_=null,i.addEventListener(w(Vf),i.handleGradientChanged_),i.setGradient(n.gradient?n.gradient:Hf),i.setBlur(void 0!==n.blur?n.blur:15),i.setRadius(void 0!==n.radius?n.radius:8);var o=n.weight?n.weight:"weight";return i.weightFunction_="string"==typeof o?function(t){return t.get(o)}:o,i.setRenderOrder(null),i}return Uf(e,t),e.prototype.getBlur=function(){return this.get("blur")},e.prototype.getGradient=function(){return this.get(Vf)},e.prototype.getRadius=function(){return this.get("radius")},e.prototype.handleGradientChanged_=function(){this.gradient_=function(t){for(var e=Qe(1,256),i=e.createLinearGradient(0,0,1,256),n=1/(t.length-1),r=0,o=t.length;r<o;++r)i.addColorStop(r*n,t[r]);return e.fillStyle=i,e.fillRect(0,0,1,256),e.canvas}(this.getGradient())},e.prototype.setBlur=function(t){this.set("blur",t)},e.prototype.setGradient=function(t){this.set(Vf,t)},e.prototype.setRadius=function(t){this.set("radius",t)},e.prototype.createRenderer=function(){return new Zd(this,{attributes:[{name:"weight",callback:(function(t){var e=this.weightFunction_(t);return void 0!==e?ot(e,0,1):1}).bind(this)}],vertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_weight = a_weight;\n        }",fragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          gl_FragColor = vec4(alpha, alpha, alpha, alpha);\n        }",hitVertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n        attribute vec4 a_hitColor;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_hitColor = a_hitColor;\n          v_weight = a_weight;\n        }",hitFragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          if (alpha < 0.05) {\n            discard;\n          }\n\n          gl_FragColor = v_hitColor;\n        }",uniforms:{u_size:(function(){return 2*(this.get("radius")+this.get("blur"))}).bind(this),u_blurSlope:(function(){return this.get("radius")/Math.max(1,this.get("blur"))}).bind(this)},postProcesses:[{fragmentShader:"\n            precision mediump float;\n\n            uniform sampler2D u_image;\n            uniform sampler2D u_gradientTexture;\n\n            varying vec2 v_texCoord;\n\n            void main() {\n              vec4 color = texture2D(u_image, v_texCoord);\n              gl_FragColor.a = color.a;\n              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;\n              gl_FragColor.rgb *= gl_FragColor.a;\n            }",uniforms:{u_gradientTexture:(function(){return this.gradient_}).bind(this)}}]})},e}(jf),Zf=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Kf=function(t){function e(e){var i=this,n=e||{},r=na({},n);return delete r.imageRatio,(i=t.call(this,r)||this).imageRatio_=void 0!==n.imageRatio?n.imageRatio:1,i}return Zf(e,t),e.prototype.getImageRatio=function(){return this.imageRatio_},e.prototype.createRenderer=function(){return new If(this)},e}(Hd),Jf=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),$f=function(t){function e(e){var i=this,n=e||{},r=na({},n);delete r.preload,delete r.useInterimTilesOnError,i=t.call(this,r)||this;var o=n.renderMode||Af;return S(null==o||o==Of||o==Af||o==Rf,28),i.renderMode_=o,i.setPreload(n.preload?n.preload:0),i.setUseInterimTilesOnError(void 0===n.useInterimTilesOnError||n.useInterimTilesOnError),i}return Jf(e,t),e.prototype.createRenderer=function(){return new Nf(this)},e.prototype.getFeatures=function(e){return t.prototype.getFeatures.call(this,e)},e.prototype.getRenderMode=function(){return this.renderMode_},e.prototype.getPreload=function(){return this.get("preload")},e.prototype.getUseInterimTilesOnError=function(){return this.get(ed)},e.prototype.setPreload=function(t){this.set("preload",t)},e.prototype.setUseInterimTilesOnError=function(t){this.set(ed,t)},e}(Hd),Qf=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),tg=function(t){function e(e,i,n,r){var o=t.call(this,e)||this;return o.features=n,o.file=i,o.projection=r,o}return Qf(e,t),e}(aa),eg=function(t){function e(e){var i=this,n=e||{};return(i=t.call(this,{handleEvent:m})||this).formatConstructors_=n.formatConstructors?n.formatConstructors:[],i.projection_=n.projection?bt(n.projection):null,i.dropListenKeys_=null,i.source_=n.source||null,i.target=n.target?n.target:null,i}return Qf(e,t),e.prototype.handleResult_=function(t,e){var i=e.target.result,n=this.getMap(),r=this.projection_;r||(r=n.getView().getProjection());for(var o=this.formatConstructors_,a=[],s=0,l=o.length;s<l;++s){var h=new o[s];if((a=this.tryReadFeatures_(h,i,{featureProjection:r}))&&a.length>0)break}this.source_&&(this.source_.clear(),this.source_.addFeatures(a)),this.dispatchEvent(new tg("addfeatures",t,a,r))},e.prototype.registerListeners_=function(){var t=this.getMap();if(t){var e=this.target?this.target:t.getViewport();this.dropListenKeys_=[s(e,"drop",Qn,this),s(e,"dragenter",tr,this),s(e,"dragover",tr,this),s(e,"drop",tr,this)]}},e.prototype.setActive=function(e){!this.getActive()&&e&&this.registerListeners_(),this.getActive()&&!e&&this.unregisterListeners_(),t.prototype.setActive.call(this,e)},e.prototype.setMap=function(e){this.unregisterListeners_(),t.prototype.setMap.call(this,e),this.getActive()&&this.registerListeners_()},e.prototype.tryReadFeatures_=function(t,e,i){try{return t.readFeatures(e,i)}catch(t){return null}},e.prototype.unregisterListeners_=function(){this.dropListenKeys_&&(this.dropListenKeys_.forEach(h),this.dropListenKeys_=null)},e}(Wl),ig=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ng=function(t){function e(e){var i=this,n=e||{};return(i=t.call(this,n)||this).condition_=n.condition?n.condition:eh,i.lastAngle_=void 0,i.lastMagnitude_=void 0,i.lastScaleDelta_=0,i.duration_=void 0!==n.duration?n.duration:400,i}return ig(e,t),e.prototype.handleDragEvent=function(t){if(nh(t)){var e=t.map,i=e.getSize(),n=t.pixel,r=n[0]-i[0]/2,o=i[1]/2-n[1],a=Math.atan2(o,r),s=Math.sqrt(r*r+o*o),l=e.getView();void 0!==this.lastAngle_&&l.adjustRotationInternal(this.lastAngle_-a),this.lastAngle_=a,void 0!==this.lastMagnitude_&&l.adjustResolutionInternal(this.lastMagnitude_/s),void 0!==this.lastMagnitude_&&(this.lastScaleDelta_=this.lastMagnitude_/s),this.lastMagnitude_=s}},e.prototype.handleUpEvent=function(t){return!nh(t)||(t.map.getView().endInteraction(this.duration_,this.lastScaleDelta_>1?1:-1),this.lastScaleDelta_=0,!1)},e.prototype.handleDownEvent=function(t){return!!nh(t)&&!!this.condition_(t)&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,this.lastMagnitude_=void 0,!0)},e}(ah),rg=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),og=function(t){function e(e,i,n){var r=t.call(this)||this;return void 0!==n&&void 0===i?r.setFlatCoordinates(n,e):r.setCenterAndRadius(e,i||0,n),r}return rg(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),void 0,this.layout)},e.prototype.closestPointXY=function(t,e,i,n){var r=this.flatCoordinates,o=t-r[0],a=e-r[1],s=o*o+a*a;if(s<n){if(0===s)for(var l=0;l<this.stride;++l)i[l]=r[l];else{var h=this.getRadius()/Math.sqrt(s);for(i[0]=r[0]+h*o,i[1]=r[1]+h*a,l=2;l<this.stride;++l)i[l]=r[l]}return i.length=this.stride,s}return n},e.prototype.containsXY=function(t,e){var i=this.flatCoordinates,n=t-i[0],r=e-i[1];return n*n+r*r<=this.getRadiusSquared_()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(t){var e=this.flatCoordinates,i=e[this.stride]-e[0];return R(e[0]-i,e[1]-i,e[0]+i,e[1]+i,t)},e.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},e.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},e.prototype.getType=function(){return Xa.CIRCLE},e.prototype.intersectsExtent=function(t){if(J(t,this.getExtent())){var e=this.getCenter();return t[0]<=e[0]&&t[2]>=e[0]||t[1]<=e[1]&&t[3]>=e[1]||z(t,this.intersectsCoordinate.bind(this))}return!1},e.prototype.setCenter=function(t){var e=this.stride,i=this.flatCoordinates[e]-this.flatCoordinates[0],n=t.slice();n[e]=n[0]+i;for(var r=1;r<e;++r)n[e+r]=t[r];this.setFlatCoordinates(this.layout,n),this.changed()},e.prototype.setCenterAndRadius=function(t,e,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var n=this.flatCoordinates,r=Qt(n,0,t);n[r++]=n[0]+e;for(var o=1,a=this.stride;o<a;++o)n[r++]=n[o];n.length=r,this.changed()},e.prototype.getCoordinates=function(){return null},e.prototype.setCoordinates=function(t,e){},e.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},e.prototype.rotate=function(t,e){var i=this.getCenter(),n=this.getStride();this.setCenter(nt(i,0,i.length,n,t,e,i)),this.changed()},e.prototype.translate=function(t,e){var i=this.getCenter(),n=this.getStride();this.setCenter(rt(i,0,i.length,n,t,e,i)),this.changed()},e}(_s),ag=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),sg=function(t){function e(e,i,n){var r=t.call(this)||this;if(r.ends_=[],r.maxDelta_=-1,r.maxDeltaRevision_=-1,Array.isArray(e[0]))r.setCoordinates(e,i);else if(void 0!==i&&n)r.setFlatCoordinates(i,e),r.ends_=n;else{for(var o=r.getLayout(),a=e,s=[],l=[],h=0,u=a.length;h<u;++h){var c=a[h];0===h&&(o=c.getLayout()),f(s,c.getFlatCoordinates()),l.push(s.length)}r.setFlatCoordinates(o,s),r.ends_=l}return r}return ag(e,t),e.prototype.appendLineString=function(t){this.flatCoordinates?f(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,i,n){return n<P(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Kt(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),$t(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,n))},e.prototype.getCoordinateAtM=function(t,e,i){if(this.layout!=Ba&&this.layout!=Ya||0===this.flatCoordinates.length)return null;var n=void 0!==i&&i;return function(t,e,i,r,o,a,s){if(n)return Jn(t,e,i[i.length-1],r,o,a);var l;if(o<t[r-1])return a?((l=t.slice(0,r))[r-1]=o,l):null;if(t[t.length-1]<o)return a?((l=t.slice(t.length-r))[r-1]=o,l):null;for(var h=0,u=i.length;h<u;++h){var c=i[h];if(e!=c){if(o<t[e+r-1])return null;if(o<=t[c-1])return Jn(t,e,c,r,o,!1);e=c}}return null}(this.flatCoordinates,0,this.ends_,this.stride,t,void 0!==e&&e)},e.prototype.getCoordinates=function(){return ne(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new zf(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.ends_,i=this.layout,n=[],r=0,o=0,a=e.length;o<a;++o){var s=e[o],l=new zf(t.slice(r,s),i);n.push(l),r=s}return n},e.prototype.getFlatMidpoints=function(){for(var t=[],e=this.flatCoordinates,i=0,n=this.ends_,r=this.stride,o=0,a=n.length;o<a;++o){var s=n[o];f(t,Kn(e,i,s,r,.5)),i=s}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],n=[];return i.length=function(t,e,i,n,r,o,a,s){for(var l=0,h=i.length;l<h;++l){var u=i[l];a=oe(t,e,u,n,r,o,a),s.push(a),e=u}return a}(this.flatCoordinates,0,this.ends_,this.stride,t,i,0,n),new e(i,Ga,n)},e.prototype.getType=function(){return Xa.MULTI_LINE_STRING},e.prototype.intersectsExtent=function(t){return function(t,e,i,n,r){for(var o=0,a=i.length;o<a;++o){if(ge(t,e,i[o],n,r))return!0;e=i[o]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=ee(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},e}(_s),lg=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),hg=function(t){function e(e,i){var n=t.call(this)||this;return i&&!Array.isArray(e[0])?n.setFlatCoordinates(i,e):n.setCoordinates(e,i),n}return lg(e,t),e.prototype.appendPoint=function(t){this.flatCoordinates?f(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,n){if(n<P(this.getExtent(),t,e))return n;for(var r=this.flatCoordinates,o=this.stride,a=0,s=r.length;a<s;a+=o){var l=st(t,e,r[a],r[a+1]);if(l<n){n=l;for(var h=0;h<o;++h)i[h]=r[a+h];i.length=o}}return n},e.prototype.getCoordinates=function(){return ie(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){return t<0||(this.flatCoordinates?this.flatCoordinates.length/this.stride:0)<=t?null:new Ss(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,e=this.layout,i=this.stride,n=[],r=0,o=t.length;r<o;r+=i){var a=new Ss(t.slice(r,r+i),e);n.push(a)}return n},e.prototype.getType=function(){return Xa.MULTI_POINT},e.prototype.intersectsExtent=function(t){for(var e=this.flatCoordinates,i=this.stride,n=0,r=e.length;n<r;n+=i)if(O(t,e[n],e[n+1]))return!0;return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=te(this.flatCoordinates,0,t,this.stride),this.changed()},e}(_s),ug=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),cg=function(t){function e(e,i,n){var r=t.call(this)||this;if(r.endss_=[],r.flatInteriorPointsRevision_=-1,r.flatInteriorPoints_=null,r.maxDelta_=-1,r.maxDeltaRevision_=-1,r.orientedRevision_=-1,r.orientedFlatCoordinates_=null,!n&&!Array.isArray(e[0])){for(var o=r.getLayout(),a=e,s=[],l=[],h=0,u=a.length;h<u;++h){var c=a[h];0===h&&(o=c.getLayout());for(var p=s.length,d=c.getEnds(),g=0,v=d.length;g<v;++g)d[g]+=p;f(s,c.getFlatCoordinates()),l.push(d)}i=o,e=s,n=l}return void 0!==i&&n?(r.setFlatCoordinates(i,e),r.endss_=n):r.setCoordinates(e,i),r}return ug(e,t),e.prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var i=this.flatCoordinates.length;f(this.flatCoordinates,t.getFlatCoordinates());for(var n=0,r=(e=t.getEnds().slice()).length;n<r;++n)e[n]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},e.prototype.clone=function(){for(var t=this.endss_.length,i=new Array(t),n=0;n<t;++n)i[n]=this.endss_[n].slice();return new e(this.flatCoordinates.slice(),this.layout,i)},e.prototype.closestPointXY=function(t,e,i,n){return n<P(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(t,e,i,n,r){for(var o=0,a=i.length;o<a;++o){var s=i[o];r=Kt(t,e,s,n,r),e=s[s.length-1]}return r}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(t,e,i,n,r,o,a,s,l,h,u){for(var c=[NaN,NaN],p=0,d=i.length;p<d;++p){var f=i[p];h=$t(t,e,f,n,r,!0,a,s,l,h,c),e=f[f.length-1]}return h}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,0,t,e,i,n))},e.prototype.containsXY=function(t,e){return function(t,e,i,n,r,o){if(0===i.length)return!1;for(var a=0,s=i.length;a<s;++a){var l=i[a];if(ce(t,e,l,n,r,o))return!0;e=l[l.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},e.prototype.getArea=function(){return function(t,e,i,n){for(var r=0,o=0,a=i.length;o<a;++o){var s=i[o];r+=Ht(t,e,s,n),e=s[s.length-1]}return r}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?be(e=this.getOrientedFlatCoordinates().slice(),0,this.endss_,this.stride,t):e=this.flatCoordinates,re(e,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=er(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=de(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new hg(this.getFlatInteriorPoints().slice(),Ba)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;!function(t,e,i,n,r){for(var o=0,a=i.length;o<a;++o){var s=i[o];if(!_e(t,e,s,n,void 0))return!1;s.length&&(e=s[s.length-1])}return!0}(t,0,this.endss_,this.stride)?(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=be(this.orientedFlatCoordinates_,0,this.endss_,this.stride)):this.orientedFlatCoordinates_=t,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],n=[];return i.length=function(t,e,i,n,r,o,a,s){for(var l=0,h=i.length;l<h;++l){var u=i[l],c=[];a=le(t,e,u,n,r,o,a,c),s.push(c),e=u[u.length-1]}return a}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),i,0,n),new e(i,Ga,n)},e.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var i=this.endss_[t-1];e=i[i.length-1]}var n=this.endss_[t].slice(),r=n[n.length-1];if(0!==e)for(var o=0,a=n.length;o<a;++o)n[o]-=e;return new Ts(this.flatCoordinates.slice(e,r),this.layout,n)},e.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.endss_,n=[],r=0,o=0,a=i.length;o<a;++o){var s=i[o].slice(),l=s[s.length-1];if(0!==r)for(var h=0,u=s.length;h<u;++h)s[h]-=r;var c=new Ts(e.slice(r,l),t,s);n.push(c),r=l}return n},e.prototype.getType=function(){return Xa.MULTI_POLYGON},e.prototype.intersectsExtent=function(t){return function(t,e,i,n,r){for(var o=0,a=i.length;o<a;++o){var s=i[o];if(ve(t,e,s,n,r))return!0;e=s[s.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=function(t,e,i,n,r){for(var o=r||[],a=0,s=0,l=i.length;s<l;++s){var h=ee(t,e,i[s],n,o[a]);o[a++]=h,e=h[h.length-1]}return o.length=a,o}(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{var n=i[i.length-1];this.flatCoordinates.length=0===n.length?0:n[n.length-1]}this.changed()},e}(_s),pg=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),dg="Point",fg="LineString",gg="Polygon",vg="Circle",yg=function(t){function e(e,i){var n=t.call(this,e)||this;return n.feature=i,n}return pg(e,t),e}(aa),mg=function(t){function e(e){var i=this,n=e;n.stopDown||(n.stopDown=_),(i=t.call(this,n)||this).shouldHandle_=!1,i.downPx_=null,i.freehand_=!1,i.source_=e.source?e.source:null,i.features_=e.features?e.features:null,i.snapTolerance_=e.snapTolerance?e.snapTolerance:12,i.type_=e.type,i.mode_=function(t){var e;return t===Xa.POINT||t===Xa.MULTI_POINT?e=dg:t===Xa.LINE_STRING||t===Xa.MULTI_LINE_STRING?e=fg:t===Xa.POLYGON||t===Xa.MULTI_POLYGON?e=gg:t===Xa.CIRCLE&&(e=vg),e}(i.type_),i.stopClick_=!!e.stopClick,i.minPoints_=e.minPoints?e.minPoints:i.mode_===gg?3:2,i.maxPoints_=e.maxPoints?e.maxPoints:1/0,i.finishCondition_=e.finishCondition?e.finishCondition:m;var r,o=e.geometryFunction;if(!o)if(i.type_===Xa.CIRCLE)o=function(t,e,i){var n=e||new og([NaN,NaN]),r=Ft(t[0],i),o=Ye(r,Ft(t[1],i));n.setCenterAndRadius(r,Math.sqrt(o));var a=Rt();return a&&n.transform(i,a),n};else{var a,s=i.mode_;s===dg?a=Ss:s===fg?a=zf:s===gg&&(a=Ts),o=function(t,e,i){var n=e;return n?n.setCoordinates(s===gg?t[0].length?[t[0].concat([t[0][0]])]:[]:t):n=new a(t),n}}return i.geometryFunction_=o,i.dragVertexDelay_=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,i.finishCoordinate_=null,i.sketchFeature_=null,i.sketchPoint_=null,i.sketchCoords_=null,i.sketchLine_=null,i.sketchLineCoords_=null,i.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,i.overlay_=new jf({source:new rp({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:(r=Sn(),function(t,e){return r[t.getGeometry().getType()]}),updateWhileInteracting:!0}),i.geometryName_=e.geometryName,i.condition_=e.condition?e.condition:th,i.freehandCondition_=e.freehand?Kl:e.freehandCondition?e.freehandCondition:eh,i.addEventListener(w(Yl),i.updateState_),i}return pg(e,t),e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),this.updateState_()},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleEvent=function(e){e.originalEvent.type===ca&&e.preventDefault(),this.freehand_=this.mode_!==dg&&this.freehandCondition_(e);var i=e.type===Us.POINTERMOVE,n=!0;return!this.freehand_&&this.lastDragTime_&&e.type===Us.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,i=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===Us.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(e.coordinate),n=!1):this.freehand_&&e.type===Us.POINTERDOWN?n=!1:i?(n=e.type===Us.POINTERMOVE)&&this.freehand_?n=this.handlePointerMove_(e):("mouse"==e.pointerEvent.pointerType||e.type===Us.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(e):e.type===Us.DBLCLICK&&(n=!1),t.prototype.handleEvent.call(this,e)&&n},e.prototype.handleDownEvent=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout((function(){this.handlePointerMove_(new Hs(Us.POINTERMOVE,t.map,t.pointerEvent,!1,t.frameState))}).bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)},e.prototype.handleUpEvent=function(t){var e=!0;return this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t),this.shouldHandle_?(this.finishCoordinate_?this.freehand_||this.mode_===vg?this.finishDrawing():this.atFinish_(t)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate):(this.startDrawing_(t),this.mode_===dg&&this.finishDrawing()),e=!1):this.freehand_&&this.abortDrawing(),!e&&this.stopClick_&&t.stopPropagation(),e},e.prototype.handlePointerMove_=function(t){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,i=t.pixel,n=e[0]-i[0],r=e[1]-i[1],o=n*n+r*r;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return!0}return this.finishCoordinate_?this.modifyDrawing_(t):this.createOrUpdateSketchPoint_(t),!0},e.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var i=!1,n=[this.finishCoordinate_];if(this.mode_===fg)i=this.sketchCoords_.length>this.minPoints_;else if(this.mode_===gg){var r=this.sketchCoords_;i=r[0].length>this.minPoints_,n=[r[0][0],r[0][r[0].length-2]]}if(i)for(var o=t.map,a=0,s=n.length;a<s;a++){var l=n[a],h=o.getPixelFromCoordinate(l),u=t.pixel,c=u[0]-h[0],p=u[1]-h[1],d=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(c*c+p*p)<=d){this.finishCoordinate_=l;break}}}return e},e.prototype.createOrUpdateSketchPoint_=function(t){var e=t.coordinate.slice();this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new La(new Ss(e)),this.updateSketchFeatures_())},e.prototype.startDrawing_=function(t){var e=t.coordinate,i=t.map.getView().getProjection();this.finishCoordinate_=e,this.mode_===dg?this.sketchCoords_=e.slice():this.mode_===gg?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new La(new zf(this.sketchLineCoords_)));var n=this.geometryFunction_(this.sketchCoords_,void 0,i);this.sketchFeature_=new La,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(n),this.updateSketchFeatures_(),this.dispatchEvent(new yg("drawstart",this.sketchFeature_))},e.prototype.modifyDrawing_=function(t){var e,i,n,r=t.coordinate,o=this.sketchFeature_.getGeometry(),a=t.map.getView().getProjection();if(this.mode_===dg?i=this.sketchCoords_:this.mode_===gg?(i=(e=this.sketchCoords_[0])[e.length-1],this.atFinish_(t)&&(r=this.finishCoordinate_.slice())):i=(e=this.sketchCoords_)[e.length-1],i[0]=r[0],i[1]=r[1],this.geometryFunction_(this.sketchCoords_,o,a),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(r),o.getType()==Xa.POLYGON&&this.mode_!==gg){this.sketchLine_||(this.sketchLine_=new La);var s=o.getLinearRing(0);(n=this.sketchLine_.getGeometry())?(n.setFlatCoordinates(s.getLayout(),s.getFlatCoordinates()),n.changed()):(n=new zf(s.getFlatCoordinates(),s.getLayout()),this.sketchLine_.setGeometry(n))}else this.sketchLineCoords_&&(n=this.sketchLine_.getGeometry()).setCoordinates(this.sketchLineCoords_);this.updateSketchFeatures_()},e.prototype.addToDrawing_=function(t){var e,i,n=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection();this.mode_===fg?(this.finishCoordinate_=t.slice(),(i=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(t.slice()),this.geometryFunction_(i,n,r)):this.mode_===gg&&((i=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(t.slice()),e&&(this.finishCoordinate_=i[0]),this.geometryFunction_(this.sketchCoords_,n,r)),this.updateSketchFeatures_(),e&&this.finishDrawing()},e.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t,e=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection();this.mode_===fg?((t=this.sketchCoords_).splice(-2,1),this.geometryFunction_(t,e,i),t.length>=2&&(this.finishCoordinate_=t[t.length-2].slice())):this.mode_===gg&&((t=this.sketchCoords_[0]).splice(-2,1),this.sketchLine_.getGeometry().setCoordinates(t),this.geometryFunction_(this.sketchCoords_,e,i)),0===t.length&&this.abortDrawing(),this.updateSketchFeatures_()}},e.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(t){var e=this.sketchCoords_,i=t.getGeometry(),n=this.getMap().getView().getProjection();this.mode_===fg?(e.pop(),this.geometryFunction_(e,i,n)):this.mode_===gg&&(e[0].pop(),this.geometryFunction_(e,i,n),e=i.getCoordinates()),this.type_===Xa.MULTI_POINT?t.setGeometry(new hg([e])):this.type_===Xa.MULTI_LINE_STRING?t.setGeometry(new sg([e])):this.type_===Xa.MULTI_POLYGON&&t.setGeometry(new cg([e])),this.dispatchEvent(new yg("drawend",t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},e.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),t},e.prototype.abortDrawing=function(){var t=this.abortDrawing_();t&&this.dispatchEvent(new yg("drawabort",t))},e.prototype.appendCoordinates=function(t){var e=this.mode_,i=[];e===fg?i=this.sketchCoords_:e===gg&&(i=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]);for(var n=i.pop(),r=0;r<t.length;r++)this.addToDrawing_(t[r]);this.addToDrawing_(n)},e.prototype.extend=function(t){var e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();var i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new yg("drawstart",this.sketchFeature_))},e.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},e.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing(),this.overlay_.setMap(e?t:null)},e}(ah),_g=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),xg="extentchanged",bg=function(t){function e(e){var i=t.call(this,xg)||this;return i.extent=e,i}return _g(e,t),e}(aa),wg=function(t){function e(e){var i,n=this,r=e||{};return(n=t.call(this,r)||this).extent_=null,n.pointerHandler_=null,n.pixelTolerance_=void 0!==r.pixelTolerance?r.pixelTolerance:10,n.snappedToVertex_=!1,n.extentFeature_=null,n.vertexFeature_=null,e||(e={}),n.extentOverlay_=new jf({source:new rp({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.boxStyle?e.boxStyle:(i=Sn(),function(t,e){return i[Xa.POLYGON]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),n.vertexOverlay_=new jf({source:new rp({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.pointerStyle?e.pointerStyle:function(){var t=Sn();return function(e,i){return t[Xa.POINT]}}(),updateWhileAnimating:!0,updateWhileInteracting:!0}),e.extent&&n.setExtent(e.extent),n}return _g(e,t),e.prototype.snapToVertex_=function(t,e){var i=e.getCoordinateFromPixelInternal(t),n=this.getExtentInternal();if(n){var r=[[[n[0],n[1]],[n[0],n[3]]],[[n[0],n[3]],[n[2],n[3]]],[[n[2],n[3]],[n[2],n[1]]],[[n[2],n[1]],[n[0],n[1]]]];r.sort(function(t,e){return We(i,t)-We(i,e)});var o=r[0],a=Ne(i,o),s=e.getPixelFromCoordinateInternal(a);if(Xe(t,s)<=this.pixelTolerance_){var l=e.getPixelFromCoordinateInternal(o[0]),h=e.getPixelFromCoordinateInternal(o[1]),u=Ye(s,l),c=Ye(s,h),p=Math.sqrt(Math.min(u,c));return this.snappedToVertex_=p<=this.pixelTolerance_,this.snappedToVertex_&&(a=u>c?o[1]:o[0]),a}}return null},e.prototype.handlePointerMove_=function(t){var e=t.pixel,i=t.map,n=this.snapToVertex_(e,i);n||(n=i.getCoordinateFromPixelInternal(e)),this.createOrUpdatePointerFeature_(n)},e.prototype.createOrUpdateExtentFeature_=function(t){var e=this.extentFeature_;return e?e.setGeometry(t?Se(t):void 0):(e=new La(t?Se(t):{}),this.extentFeature_=e,this.extentOverlay_.getSource().addFeature(e)),e},e.prototype.createOrUpdatePointerFeature_=function(t){var e=this.vertexFeature_;return e?e.getGeometry().setCoordinates(t):(e=new La(new Ss(t)),this.vertexFeature_=e,this.vertexOverlay_.getSource().addFeature(e)),e},e.prototype.handleEvent=function(e){return!e.pointerEvent||(e.type!=Us.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),t.prototype.handleEvent.call(this,e),!1)},e.prototype.handleDownEvent=function(t){var e=t.pixel,i=t.map,n=this.getExtentInternal(),r=this.snapToVertex_(e,i),o=function(t){var e=null,i=null;return t[0]==n[0]?e=n[2]:t[0]==n[2]&&(e=n[0]),t[1]==n[1]?i=n[3]:t[1]==n[3]&&(i=n[1]),null!==e&&null!==i?[e,i]:null};if(r&&n){var a=r[0]==n[0]||r[0]==n[2]?r[0]:null,s=r[1]==n[1]||r[1]==n[3]?r[1]:null;null!==a&&null!==s?this.pointerHandler_=ir(o(r)):null!==a?this.pointerHandler_=nr(o([a,n[1]]),o([a,n[3]])):null!==s&&(this.pointerHandler_=nr(o([n[0],s]),o([n[2],s])))}else r=i.getCoordinateFromPixelInternal(e),this.setExtent([r[0],r[1],r[0],r[1]]),this.pointerHandler_=ir(r);return!0},e.prototype.handleDragEvent=function(t){if(this.pointerHandler_){var e=t.coordinate;this.setExtent(this.pointerHandler_(e)),this.createOrUpdatePointerFeature_(e)}return!0},e.prototype.handleUpEvent=function(t){this.pointerHandler_=null;var e=this.getExtentInternal();return e&&0!==B(e)||this.setExtent(null),!1},e.prototype.setMap=function(e){this.extentOverlay_.setMap(e),this.vertexOverlay_.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.getExtent=function(){return kt(this.getExtentInternal(),this.getMap().getView().getProjection())},e.prototype.getExtentInternal=function(){return this.extent_},e.prototype.setExtent=function(t){this.extent_=t||null,this.createOrUpdateExtentFeature_(t),this.dispatchEvent(new bg(this.extent_))},e}(ah),Sg=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Cg=[0,0,0,0],Eg=[],Tg=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.features=i,r.mapBrowserEvent=n,r}return Sg(e,t),e}(aa),Pg=function(t){function e(e){var i,n,r=t.call(this,e)||this;if(r.boundHandleFeatureChange_=r.handleFeatureChange_.bind(r),r.condition_=e.condition?e.condition:rh,r.defaultDeleteCondition_=function(t){return Hl(t)&&Ql(t)},r.deleteCondition_=e.deleteCondition?e.deleteCondition:r.defaultDeleteCondition_,r.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:Kl,r.vertexFeature_=null,r.vertexSegments_=null,r.lastPixel_=[0,0],r.ignoreNextSingleClick_=!1,r.modified_=!1,r.rBush_=new ep,r.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,r.snappedToVertex_=!1,r.changingFeature_=!1,r.dragSegments_=[],r.overlay_=new jf({source:new rp({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:(i=Sn(),function(t,e){return i[Xa.POINT]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),r.SEGMENT_WRITERS_={Point:r.writePointGeometry_.bind(r),LineString:r.writeLineStringGeometry_.bind(r),LinearRing:r.writeLineStringGeometry_.bind(r),Polygon:r.writePolygonGeometry_.bind(r),MultiPoint:r.writeMultiPointGeometry_.bind(r),MultiLineString:r.writeMultiLineStringGeometry_.bind(r),MultiPolygon:r.writeMultiPolygonGeometry_.bind(r),Circle:r.writeCircleGeometry_.bind(r),GeometryCollection:r.writeGeometryCollectionGeometry_.bind(r)},r.source_=null,e.source?(r.source_=e.source,n=new Ta(r.source_.getFeatures()),r.source_.addEventListener(Zc,r.handleSourceAdd_.bind(r)),r.source_.addEventListener($c,r.handleSourceRemove_.bind(r))):n=e.features,!n)throw new Error("The modify interaction requires features or a source");return r.features_=n,r.features_.forEach(r.addFeature_.bind(r)),r.features_.addEventListener(ta,r.handleFeatureAdd_.bind(r)),r.features_.addEventListener(ea,r.handleFeatureRemove_.bind(r)),r.lastPointerEvent_=null,r}return Sg(e,t),e.prototype.addFeature_=function(t){var e=t.getGeometry();if(e){var i=this.SEGMENT_WRITERS_[e.getType()];i&&i(t,e)}var n=this.getMap();n&&n.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,n),t.addEventListener(ha,this.boundHandleFeatureChange_)},e.prototype.willModifyFeatures_=function(t){this.modified_||(this.modified_=!0,this.dispatchEvent(new Tg("modifystart",this.features_,t)))},e.prototype.removeFeature_=function(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.removeEventListener(ha,this.boundHandleFeatureChange_)},e.prototype.removeFeatureSegmentData_=function(t){var e=this.rBush_,i=[];e.forEach(function(e){t===e.feature&&i.push(e)});for(var n=i.length-1;n>=0;--n){for(var r=i[n],o=this.dragSegments_.length-1;o>=0;--o)this.dragSegments_[o][0]===r&&this.dragSegments_.splice(o,1);e.remove(r)}},e.prototype.setActive=function(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.prototype.setActive.call(this,e)},e.prototype.setMap=function(e){this.overlay_.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleSourceAdd_=function(t){t.feature&&this.features_.push(t.feature)},e.prototype.handleSourceRemove_=function(t){t.feature&&this.features_.remove(t.feature)},e.prototype.handleFeatureAdd_=function(t){this.addFeature_(t.element)},e.prototype.handleFeatureChange_=function(t){if(!this.changingFeature_){var e=t.target;this.removeFeature_(e),this.addFeature_(e)}},e.prototype.handleFeatureRemove_=function(t){this.removeFeature_(t.element)},e.prototype.writePointGeometry_=function(t,e){var i=e.getCoordinates(),n={feature:t,geometry:e,segment:[i,i]};this.rBush_.insert(e.getExtent(),n)},e.prototype.writeMultiPointGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n){var o=i[n],a={feature:t,geometry:e,depth:[n],index:n,segment:[o,o]};this.rBush_.insert(e.getExtent(),a)}},e.prototype.writeLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length-1;n<r;++n){var o=i.slice(n,n+2),a={feature:t,geometry:e,index:n,segment:o};this.rBush_.insert(C(o),a)}},e.prototype.writeMultiLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n)for(var o=i[n],a=0,s=o.length-1;a<s;++a){var l=o.slice(a,a+2),h={feature:t,geometry:e,depth:[n],index:a,segment:l};this.rBush_.insert(C(l),h)}},e.prototype.writePolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n)for(var o=i[n],a=0,s=o.length-1;a<s;++a){var l=o.slice(a,a+2),h={feature:t,geometry:e,depth:[n],index:a,segment:l};this.rBush_.insert(C(l),h)}},e.prototype.writeMultiPolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n)for(var o=i[n],a=0,s=o.length;a<s;++a)for(var l=o[a],h=0,u=l.length-1;h<u;++h){var c=l.slice(h,h+2),p={feature:t,geometry:e,depth:[a,n],index:h,segment:c};this.rBush_.insert(C(c),p)}},e.prototype.writeCircleGeometry_=function(t,e){var i=e.getCenter(),n={feature:t,geometry:e,index:0,segment:[i,i]},r={feature:t,geometry:e,index:1,segment:[i,i]},o=[n,r];n.featureSegments=o,r.featureSegments=o,this.rBush_.insert(F(i),n);var a=e,s=Rt();if(s&&this.getMap()){var l=this.getMap().getView().getProjection();a=Ce(a=a.clone().transform(s,l)).transform(l,s)}this.rBush_.insert(a.getExtent(),r)},e.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var i=e.getGeometriesArray(),n=0;n<i.length;++n){var r=i[n];(0,this.SEGMENT_WRITERS_[r.getType()])(t,r)}},e.prototype.createOrUpdateVertexFeature_=function(t){var e=this.vertexFeature_;return e?e.getGeometry().setCoordinates(t):(e=new La(new Ss(t)),this.vertexFeature_=e,this.overlay_.getSource().addFeature(e)),e},e.prototype.handleEvent=function(e){return!e.pointerEvent||(this.lastPointerEvent_=e,e.map.getView().getInteracting()||e.type!=Us.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(i=!(e.type!=Us.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),e.type==Us.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),t.prototype.handleEvent.call(this,e)&&!i);var i},e.prototype.handleDragEvent=function(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t);for(var e=t.coordinate,i=0,n=this.dragSegments_.length;i<n;++i){for(var r=this.dragSegments_[i],o=r[0],a=o.depth,s=o.geometry,l=void 0,h=o.segment,u=r[1];e.length<s.getStride();)e.push(h[u][e.length]);switch(s.getType()){case Xa.POINT:l=e,h[0]=e,h[1]=e;break;case Xa.MULTI_POINT:(l=s.getCoordinates())[o.index]=e,h[0]=e,h[1]=e;break;case Xa.LINE_STRING:(l=s.getCoordinates())[o.index+u]=e,h[u]=e;break;case Xa.MULTI_LINE_STRING:case Xa.POLYGON:(l=s.getCoordinates())[a[0]][o.index+u]=e,h[u]=e;break;case Xa.MULTI_POLYGON:(l=s.getCoordinates())[a[1]][a[0]][o.index+u]=e,h[u]=e;break;case Xa.CIRCLE:if(h[0]=e,h[1]=e,0===o.index)this.changingFeature_=!0,s.setCenter(e),this.changingFeature_=!1;else{this.changingFeature_=!0;var c=t.map.getView().getProjection(),p=Xe(Ft(s.getCenter(),c),Ft(e,c)),d=Rt();if(d){var f=s.clone().transform(d,c);f.setRadius(p),p=f.transform(c,d).getRadius()}s.setRadius(p),this.changingFeature_=!1}}l&&this.setGeometryCoordinates_(s,l)}this.createOrUpdateVertexFeature_(e)},e.prototype.handleDownEvent=function(t){if(!this.condition_(t))return!1;var e=t.coordinate;this.handlePointerAtPixel_(t.pixel,t.map,e),this.dragSegments_.length=0,this.modified_=!1;var i=this.vertexFeature_;if(i){var n=t.map.getView().getProjection(),o=[],a=i.getGeometry().getCoordinates(),s=C([a]),l=this.rBush_.getInExtent(s),h={};l.sort(rr);for(var u=0,c=l.length;u<c;++u){var p=l[u],d=p.segment,f=r(p.feature),g=p.depth;if(g&&(f+="-"+g.join("-")),h[f]||(h[f]=new Array(2)),p.geometry.getType()!==Xa.CIRCLE||1!==p.index)if(!Ge(d[0],a)||h[f][0])if(!Ge(d[1],a)||h[f][1])r(d)in this.vertexSegments_&&!h[f][0]&&!h[f][1]&&this.insertVertexCondition_(t)&&o.push([p,a]);else{if((p.geometry.getType()===Xa.LINE_STRING||p.geometry.getType()===Xa.MULTI_LINE_STRING)&&h[f][0]&&0===h[f][0].index)continue;this.dragSegments_.push([p,1]),h[f][1]=p}else this.dragSegments_.push([p,0]),h[f][0]=p;else Ge(ar(e,p,n),a)&&!h[f][0]&&(this.dragSegments_.push([p,0]),h[f][0]=p)}o.length&&this.willModifyFeatures_(t);for(var v=o.length-1;v>=0;--v)this.insertVertex_.apply(this,o[v])}return!!this.vertexFeature_},e.prototype.handleUpEvent=function(t){for(var e=this.dragSegments_.length-1;e>=0;--e){var i=this.dragSegments_[e][0],n=i.geometry;if(n.getType()===Xa.CIRCLE){var r=n.getCenter(),o=i.featureSegments[0],a=i.featureSegments[1];o.segment[0]=r,o.segment[1]=r,a.segment[0]=r,a.segment[1]=r,this.rBush_.update(F(r),o);var s=n,l=Rt();if(l){var h=t.map.getView().getProjection();s=Ce(s=s.clone().transform(l,h)).transform(h,l)}this.rBush_.update(s.getExtent(),a)}else this.rBush_.update(C(i.segment),i)}return this.modified_&&(this.dispatchEvent(new Tg("modifyend",this.features_,t)),this.modified_=!1),!1},e.prototype.handlePointerMove_=function(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map,t.coordinate)},e.prototype.handlePointerAtPixel_=function(t,e,i){var n=i||e.getCoordinateFromPixel(t),o=e.getView().getProjection(),a=kt(E(Nt(F(n,Cg),o),e.getView().getResolution()*this.pixelTolerance_,Cg),o),s=this.rBush_.getInExtent(a);if(s.length>0){s.sort(function(t,e){return or(n,t,o)-or(n,e,o)});var l=s[0],h=l.segment,u=ar(n,l,o),c=e.getPixelFromCoordinate(u),p=Xe(t,c);if(p<=this.pixelTolerance_){var d={};if(l.geometry.getType()===Xa.CIRCLE&&1===l.index)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(u);else{var f=e.getPixelFromCoordinate(h[0]),g=e.getPixelFromCoordinate(h[1]),v=Ye(c,f),y=Ye(c,g);p=Math.sqrt(Math.min(v,y)),this.snappedToVertex_=p<=this.pixelTolerance_,this.snappedToVertex_&&(u=v>y?h[1]:h[0]),this.createOrUpdateVertexFeature_(u);for(var m=1,_=s.length;m<_;++m){var x=s[m].segment;if(!(Ge(h[0],x[0])&&Ge(h[1],x[1])||Ge(h[0],x[1])&&Ge(h[1],x[0])))break;d[r(x)]=!0}}return d[r(h)]=!0,void(this.vertexSegments_=d)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},e.prototype.insertVertex_=function(t,e){for(var i,n=t.segment,r=t.feature,o=t.geometry,a=t.depth,s=t.index;e.length<o.getStride();)e.push(0);switch(o.getType()){case Xa.MULTI_LINE_STRING:case Xa.POLYGON:(i=o.getCoordinates())[a[0]].splice(s+1,0,e);break;case Xa.MULTI_POLYGON:(i=o.getCoordinates())[a[1]][a[0]].splice(s+1,0,e);break;case Xa.LINE_STRING:(i=o.getCoordinates()).splice(s+1,0,e);break;default:return}this.setGeometryCoordinates_(o,i);var l=this.rBush_;l.remove(t),this.updateSegmentIndices_(o,s,a,1);var h={segment:[n[0],e],feature:r,geometry:o,depth:a,index:s};l.insert(C(h.segment),h),this.dragSegments_.push([h,1]);var u={segment:[e,n[1]],feature:r,geometry:o,depth:a,index:s+1};l.insert(C(u.segment),u),this.dragSegments_.push([u,0]),this.ignoreNextSingleClick_=!0},e.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=Us.POINTERDRAG){var t=this.lastPointerEvent_;this.willModifyFeatures_(t);var e=this.removeVertex_();return this.dispatchEvent(new Tg("modifyend",this.features_,t)),this.modified_=!1,e}return!1},e.prototype.removeVertex_=function(){var t,e,i,n,o,a,s,l,h,u,c,p=this.dragSegments_,d={},f=!1;for(o=p.length-1;o>=0;--o)c=r((u=(i=p[o])[0]).feature),u.depth&&(c+="-"+u.depth.join("-")),c in d||(d[c]={}),0===i[1]?(d[c].right=u,d[c].index=u.index):1==i[1]&&(d[c].left=u,d[c].index=u.index+1);for(c in d){switch(h=d[c].right,s=d[c].left,(l=(a=d[c].index)-1)<0&&(l=0),t=e=(n=(u=void 0!==s?s:h).geometry).getCoordinates(),f=!1,n.getType()){case Xa.MULTI_LINE_STRING:e[u.depth[0]].length>2&&(e[u.depth[0]].splice(a,1),f=!0);break;case Xa.LINE_STRING:e.length>2&&(e.splice(a,1),f=!0);break;case Xa.MULTI_POLYGON:t=t[u.depth[1]];case Xa.POLYGON:(t=t[u.depth[0]]).length>4&&(a==t.length-1&&(a=0),t.splice(a,1),f=!0,0===a&&(t.pop(),t.push(t[0]),l=t.length-1))}if(f){this.setGeometryCoordinates_(n,e);var g=[];if(void 0!==s&&(this.rBush_.remove(s),g.push(s.segment[0])),void 0!==h&&(this.rBush_.remove(h),g.push(h.segment[1])),void 0!==s&&void 0!==h){var v={depth:u.depth,feature:u.feature,geometry:u.geometry,index:l,segment:g};this.rBush_.insert(C(v.segment),v)}this.updateSegmentIndices_(n,a,u.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),p.length=0}}return f},e.prototype.setGeometryCoordinates_=function(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1},e.prototype.updateSegmentIndices_=function(t,e,i,n){this.rBush_.forEachInExtent(t.getExtent(),function(r){r.geometry===t&&(void 0===i||void 0===r.depth||v(r.depth,i))&&r.index>e&&(r.index+=n)})},e}(ah),Lg=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ig="select",Og=function(t){function e(e,i,n,r){var o=t.call(this,e)||this;return o.selected=i,o.deselected=n,o.mapBrowserEvent=r,o}return Lg(e,t),e}(aa),Ag={},Rg=function(t){function e(e){var i,n,r=t.call(this,{handleEvent:sr})||this,o=e||{};if(r.boundAddFeature_=r.addFeature_.bind(r),r.boundRemoveFeature_=r.removeFeature_.bind(r),r.condition_=o.condition?o.condition:Ql,r.addCondition_=o.addCondition?o.addCondition:$l,r.removeCondition_=o.removeCondition?o.removeCondition:$l,r.toggleCondition_=o.toggleCondition?o.toggleCondition:eh,r.multi_=!!o.multi&&o.multi,r.filter_=o.filter?o.filter:m,r.hitTolerance_=o.hitTolerance?o.hitTolerance:0,r.style_=void 0!==o.style?o.style:(f((i=Sn())[Xa.POLYGON],i[Xa.LINE_STRING]),f(i[Xa.GEOMETRY_COLLECTION],i[Xa.LINE_STRING]),function(t){return t.getGeometry()?i[t.getGeometry().getType()]:null}),r.features_=o.features||new Ta,o.layers)if("function"==typeof o.layers)n=o.layers;else{var a=o.layers;n=function(t){return c(a,t)}}else n=m;return r.layerFilter_=n,r.featureLayerAssociation_={},r}return Lg(e,t),e.prototype.addFeatureLayerAssociation_=function(t,e){this.featureLayerAssociation_[r(t)]=e},e.prototype.getFeatures=function(){return this.features_},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.getLayer=function(t){return this.featureLayerAssociation_[r(t)]},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),t.prototype.setMap.call(this,e),e?(this.features_.addEventListener(ta,this.boundAddFeature_),this.features_.addEventListener(ea,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(ta,this.boundAddFeature_),this.features_.removeEventListener(ea,this.boundRemoveFeature_))},e.prototype.addFeature_=function(t){this.style_&&this.applySelectedStyle_(t.element)},e.prototype.removeFeature_=function(t){this.style_&&this.restorePreviousStyle_(t.element)},e.prototype.getStyle=function(){return this.style_},e.prototype.applySelectedStyle_=function(t){var e=r(t);e in Ag||(Ag[e]=t.getStyle()),t.setStyle(this.style_)},e.prototype.restorePreviousStyle_=function(t){var i=r(t),n=this.getMap().getInteractions().getArray().filter(function(i){return i instanceof e&&i.getStyle()&&-1!==i.getFeatures().getArray().indexOf(t)});n.length>0?t.setStyle(n[n.length-1].getStyle()):(t.setStyle(Ag[i]),delete Ag[i])},e.prototype.removeFeatureLayerAssociation_=function(t){delete this.featureLayerAssociation_[r(t)]},e}(Wl),Mg=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Fg=[],kg=function(t){function e(e){var i=this,n=e||{},r=n;return r.handleDownEvent||(r.handleDownEvent=m),r.stopDown||(r.stopDown=_),(i=t.call(this,r)||this).source_=n.source?n.source:null,i.vertex_=void 0===n.vertex||n.vertex,i.edge_=void 0===n.edge||n.edge,i.features_=n.features?n.features:null,i.featuresListenerKeys_=[],i.featureChangeListenerKeys_={},i.indexedFeaturesExtents_={},i.pendingFeatures_={},i.pixelTolerance_=void 0!==n.pixelTolerance?n.pixelTolerance:10,i.rBush_=new ep,i.SEGMENT_WRITERS_={Point:i.writePointGeometry_.bind(i),LineString:i.writeLineStringGeometry_.bind(i),LinearRing:i.writeLineStringGeometry_.bind(i),Polygon:i.writePolygonGeometry_.bind(i),MultiPoint:i.writeMultiPointGeometry_.bind(i),MultiLineString:i.writeMultiLineStringGeometry_.bind(i),MultiPolygon:i.writeMultiPolygonGeometry_.bind(i),GeometryCollection:i.writeGeometryCollectionGeometry_.bind(i),Circle:i.writeCircleGeometry_.bind(i)},i}return Mg(e,t),e.prototype.addFeature=function(t,e){var i=void 0===e||e,n=r(t),o=t.getGeometry();if(o){var a=this.SEGMENT_WRITERS_[o.getType()];a&&(this.indexedFeaturesExtents_[n]=o.getExtent([1/0,1/0,-1/0,-1/0]),a(t,o))}i&&(this.featureChangeListenerKeys_[n]=s(t,ha,this.handleFeatureChange_,this))},e.prototype.forEachFeatureAdd_=function(t){this.addFeature(t)},e.prototype.forEachFeatureRemove_=function(t){this.removeFeature(t)},e.prototype.getFeatures_=function(){var t;return this.features_?t=this.features_:this.source_&&(t=this.source_.getFeatures()),t},e.prototype.handleEvent=function(e){var i=this.snapTo(e.pixel,e.coordinate,e.map);return i.snapped&&(e.coordinate=i.vertex.slice(0,2),e.pixel=i.vertexPixel),t.prototype.handleEvent.call(this,e)},e.prototype.handleFeatureAdd_=function(t){var e=lr(t);this.addFeature(e)},e.prototype.handleFeatureRemove_=function(t){var e=lr(t);this.removeFeature(e)},e.prototype.handleFeatureChange_=function(t){var e=t.target;if(this.handlingDownUpSequence){var i=r(e);i in this.pendingFeatures_||(this.pendingFeatures_[i]=e)}else this.updateFeature_(e)},e.prototype.handleUpEvent=function(t){var e=ra(this.pendingFeatures_);return e.length&&(e.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1},e.prototype.removeFeature=function(t,e){var i=void 0===e||e,n=r(t),o=this.indexedFeaturesExtents_[n];if(o){var a=this.rBush_,s=[];a.forEachInExtent(o,function(e){t===e.feature&&s.push(e)});for(var l=s.length-1;l>=0;--l)a.remove(s[l])}i&&(h(this.featureChangeListenerKeys_[n]),delete this.featureChangeListenerKeys_[n])},e.prototype.setMap=function(e){var i=this.getMap(),n=this.featuresListenerKeys_,r=this.getFeatures_();i&&(n.forEach(h),n.length=0,r.forEach(this.forEachFeatureRemove_.bind(this))),t.prototype.setMap.call(this,e),e&&(this.features_?n.push(s(this.features_,ta,this.handleFeatureAdd_,this),s(this.features_,ea,this.handleFeatureRemove_,this)):this.source_&&n.push(s(this.source_,Zc,this.handleFeatureAdd_,this),s(this.source_,$c,this.handleFeatureRemove_,this)),r.forEach(this.forEachFeatureAdd_.bind(this)))},e.prototype.snapTo=function(t,e,i){var n=C([i.getCoordinateFromPixel([t[0]-this.pixelTolerance_,t[1]+this.pixelTolerance_]),i.getCoordinateFromPixel([t[0]+this.pixelTolerance_,t[1]-this.pixelTolerance_])]),r=this.rBush_.getInExtent(n);this.vertex_&&!this.edge_&&(r=r.filter(function(t){return t.feature.getGeometry().getType()!==Xa.CIRCLE}));var o=!1,a=null,s=null;if(0===r.length)return{snapped:o,vertex:a,vertexPixel:s};for(var l,h=i.getView().getProjection(),u=Ft(e,h),c=1/0,p=0;p<r.length;++p){var d=r[p];Fg[0]=Ft(d.segment[0],h),Fg[1]=Ft(d.segment[1],h);var f=We(u,Fg);f<c&&(l=d,c=f)}var g=l.segment;if(this.vertex_&&!this.edge_){var v=i.getPixelFromCoordinate(g[0]),y=i.getPixelFromCoordinate(g[1]),m=Ye(t,v),_=Ye(t,y);Math.sqrt(Math.min(m,_))<=this.pixelTolerance_&&(o=!0,a=m>_?g[1]:g[0],s=i.getPixelFromCoordinate(a))}else if(this.edge_){var x=l.feature.getGeometry().getType()===Xa.CIRCLE;if(x){var b=l.feature.getGeometry(),w=Rt();w&&(b=b.clone().transform(w,h)),a=Mt(function(t,e){var i=e.getRadius(),n=e.getCenter(),r=n[0],o=n[1],a=t[0]-r,s=t[1]-o;0===a&&0===s&&(a=1);var l=Math.sqrt(a*a+s*s);return[r+i*a/l,o+i*s/l]}(u,b),h)}else Fg[0]=Ft(g[0],h),Fg[1]=Ft(g[1],h),a=Mt(Ne(u,Fg),h);Xe(t,s=i.getPixelFromCoordinate(a))<=this.pixelTolerance_&&(o=!0,this.vertex_&&!x)&&(v=i.getPixelFromCoordinate(g[0]),y=i.getPixelFromCoordinate(g[1]),m=Ye(s,v),_=Ye(s,y),Math.sqrt(Math.min(m,_))<=this.pixelTolerance_&&(a=m>_?g[1]:g[0],s=i.getPixelFromCoordinate(a)))}return o&&(s=[Math.round(s[0]),Math.round(s[1])]),{snapped:o,vertex:a,vertexPixel:s}},e.prototype.updateFeature_=function(t){this.removeFeature(t,!1),this.addFeature(t,!1)},e.prototype.writeCircleGeometry_=function(t,e){var i=this.getMap().getView().getProjection(),n=e,r=Rt();r&&(n=n.clone().transform(r,i));var o=Ce(n);r&&o.transform(i,r);for(var a=o.getCoordinates()[0],s=0,l=a.length-1;s<l;++s){var h=a.slice(s,s+2),u={feature:t,segment:h};this.rBush_.insert(C(h),u)}},e.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var i=e.getGeometriesArray(),n=0;n<i.length;++n){var r=this.SEGMENT_WRITERS_[i[n].getType()];r&&r(t,i[n])}},e.prototype.writeLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length-1;n<r;++n){var o=i.slice(n,n+2),a={feature:t,segment:o};this.rBush_.insert(C(o),a)}},e.prototype.writeMultiLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n)for(var o=i[n],a=0,s=o.length-1;a<s;++a){var l=o.slice(a,a+2),h={feature:t,segment:l};this.rBush_.insert(C(l),h)}},e.prototype.writeMultiPointGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n){var o=i[n],a={feature:t,segment:[o,o]};this.rBush_.insert(e.getExtent(),a)}},e.prototype.writeMultiPolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n)for(var o=i[n],a=0,s=o.length;a<s;++a)for(var l=o[a],h=0,u=l.length-1;h<u;++h){var c=l.slice(h,h+2),p={feature:t,segment:c};this.rBush_.insert(C(c),p)}},e.prototype.writePointGeometry_=function(t,e){var i=e.getCoordinates(),n={feature:t,segment:[i,i]};this.rBush_.insert(e.getExtent(),n)},e.prototype.writePolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n)for(var o=i[n],a=0,s=o.length-1;a<s;++a){var l=o.slice(a,a+2),h={feature:t,segment:l};this.rBush_.insert(C(l),h)}},e}(ah),Ng=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Dg=function(t){function e(e,i,n,r,o){var a=t.call(this,e)||this;return a.features=i,a.coordinate=n,a.startCoordinate=r,a.mapBrowserEvent=o,a}return Ng(e,t),e}(aa),jg=function(t){function e(e){var i,n=this,r=e||{};if((n=t.call(this,r)||this).lastCoordinate_=null,n.startCoordinate_=null,n.features_=void 0!==r.features?r.features:null,r.layers)if("function"==typeof r.layers)i=r.layers;else{var o=r.layers;i=function(t){return c(o,t)}}else i=m;return n.layerFilter_=i,n.filter_=r.filter?r.filter:m,n.hitTolerance_=r.hitTolerance?r.hitTolerance:0,n.lastFeature_=null,n.addEventListener(w(Yl),n.handleActiveChanged_),n}return Ng(e,t),e.prototype.handleDownEvent=function(t){if(this.lastFeature_=this.featuresAtPixel_(t.pixel,t.map),!this.lastCoordinate_&&this.lastFeature_){this.startCoordinate_=t.coordinate,this.lastCoordinate_=t.coordinate,this.handleMoveEvent(t);var e=this.features_||new Ta([this.lastFeature_]);return this.dispatchEvent(new Dg("translatestart",e,t.coordinate,this.startCoordinate_,t)),!0}return!1},e.prototype.handleUpEvent=function(t){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(t);var e=this.features_||new Ta([this.lastFeature_]);return this.dispatchEvent(new Dg("translateend",e,t.coordinate,this.startCoordinate_,t)),this.startCoordinate_=null,!0}return!1},e.prototype.handleDragEvent=function(t){if(this.lastCoordinate_){var e=t.coordinate,i=e[0]-this.lastCoordinate_[0],n=e[1]-this.lastCoordinate_[1],r=this.features_||new Ta([this.lastFeature_]);r.forEach(function(t){var e=t.getGeometry();e.translate(i,n),t.setGeometry(e)}),this.lastCoordinate_=e,this.dispatchEvent(new Dg("translating",r,e,this.startCoordinate_,t))}},e.prototype.handleMoveEvent=function(t){var e=t.map.getViewport();this.featuresAtPixel_(t.pixel,t.map)?(e.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),e.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):e.classList.remove("ol-grab","ol-grabbing")},e.prototype.featuresAtPixel_=function(t,e){return e.forEachFeatureAtPixel(t,(function(t,e){if(this.filter_(t,e)&&(!this.features_||c(this.features_.getArray(),t)))return t}).bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(e){var i=this.getMap();t.prototype.setMap.call(this,e),this.updateState_(i)},e.prototype.handleActiveChanged_=function(){this.updateState_(null)},e.prototype.updateState_=function(t){var e=this.getMap(),i=this.getActive();e&&i||(e=e||t)&&e.getViewport().classList.remove("ol-grab","ol-grabbing")},e}(ah),Gg=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),zg=function(t){function e(e){var i=t.call(this)||this;return i.geometries_=e||null,i.changeEventsKeys_=[],i.listenGeometriesChange_(),i}return Gg(e,t),e.prototype.unlistenGeometriesChange_=function(){this.changeEventsKeys_.forEach(h),this.changeEventsKeys_.length=0},e.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var t=0,e=this.geometries_.length;t<e;++t)this.changeEventsKeys_.push(s(this.geometries_[t],ha,this.changed,this))},e.prototype.clone=function(){var t=new e(null);return t.setGeometries(this.geometries_),t},e.prototype.closestPointXY=function(t,e,i,n){if(n<P(this.getExtent(),t,e))return n;for(var r=this.geometries_,o=0,a=r.length;o<a;++o)n=r[o].closestPointXY(t,e,i,n);return n},e.prototype.containsXY=function(t,e){for(var i=this.geometries_,n=0,r=i.length;n<r;++n)if(i[n].containsXY(t,e))return!0;return!1},e.prototype.computeExtent=function(t){M(t);for(var e=this.geometries_,i=0,n=e.length;i<n;++i)D(t,e[i].getExtent());return t},e.prototype.getGeometries=function(){return hr(this.geometries_)},e.prototype.getGeometriesArray=function(){return this.geometries_},e.prototype.getGeometriesArrayRecursive=function(){for(var t=[],e=this.geometries_,i=0,n=e.length;i<n;++i)e[i].getType()===this.getType()?t=t.concat(e[i].getGeometriesArrayRecursive()):t.push(e[i]);return t},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var i=[],n=this.geometries_,r=!1,o=0,a=n.length;o<a;++o){var s=n[o],l=s.getSimplifiedGeometry(t);i.push(l),l!==s&&(r=!0)}if(r){var h=new e(null);return h.setGeometriesArray(i),h}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},e.prototype.getType=function(){return Xa.GEOMETRY_COLLECTION},e.prototype.intersectsExtent=function(t){for(var e=this.geometries_,i=0,n=e.length;i<n;++i)if(e[i].intersectsExtent(t))return!0;return!1},e.prototype.isEmpty=function(){return 0===this.geometries_.length},e.prototype.rotate=function(t,e){for(var i=this.geometries_,n=0,r=i.length;n<r;++n)i[n].rotate(t,e);this.changed()},e.prototype.scale=function(t,e,i){var n=i;n||(n=W(this.getExtent()));for(var r=this.geometries_,o=0,a=r.length;o<a;++o)r[o].scale(t,e,n);this.changed()},e.prototype.setGeometries=function(t){this.setGeometriesArray(hr(t))},e.prototype.setGeometriesArray=function(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()},e.prototype.applyTransform=function(t){for(var e=this.geometries_,i=0,n=e.length;i<n;++i)e[i].applyTransform(t);this.changed()},e.prototype.translate=function(t,e){for(var i=this.geometries_,n=0,r=i.length;n<r;++n)i[n].translate(t,e);this.changed()},e.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),t.prototype.disposeInternal.call(this)},e}(ys),Bg=function(){function t(){this.dataProjection=null,this.defaultFeatureProjection=null}return t.prototype.getReadOptions=function(t,e){var i;if(e){var n=e.dataProjection?bt(e.dataProjection):this.readProjection(t);e.extent&&n&&n.getUnits()===Ka.TILE_PIXELS&&(n=bt(n)).setWorldExtent(e.extent),i={dataProjection:n,featureProjection:e.featureProjection}}return this.adaptOptions(i)},t.prototype.adaptOptions=function(t){return na({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},t.prototype.getType=function(){return n()},t.prototype.readFeature=function(t,e){return n()},t.prototype.readFeatures=function(t,e){return n()},t.prototype.readGeometry=function(t,e){return n()},t.prototype.readProjection=function(t){return n()},t.prototype.writeFeature=function(t,e){return n()},t.prototype.writeFeatures=function(t,e){return n()},t.prototype.writeGeometry=function(t,e){return n()},t}(),Yg=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Xg=function(t){function e(){return t.call(this)||this}return Yg(e,t),e.prototype.getType=function(){return Eu},e.prototype.readFeature=function(t,e){return this.readFeatureFromObject(pr(t),this.getReadOptions(t,e))},e.prototype.readFeatures=function(t,e){return this.readFeaturesFromObject(pr(t),this.getReadOptions(t,e))},e.prototype.readFeatureFromObject=function(t,e){return n()},e.prototype.readFeaturesFromObject=function(t,e){return n()},e.prototype.readGeometry=function(t,e){return this.readGeometryFromObject(pr(t),this.getReadOptions(t,e))},e.prototype.readGeometryFromObject=function(t,e){return n()},e.prototype.readProjection=function(t){return this.readProjectionFromObject(pr(t))},e.prototype.readProjectionFromObject=function(t){return n()},e.prototype.writeFeature=function(t,e){return JSON.stringify(this.writeFeatureObject(t,e))},e.prototype.writeFeatureObject=function(t,e){return n()},e.prototype.writeFeatures=function(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))},e.prototype.writeFeaturesObject=function(t,e){return n()},e.prototype.writeGeometry=function(t,e){return JSON.stringify(this.writeGeometryObject(t,e))},e.prototype.writeGeometryObject=function(t,e){return n()},e}(Bg),Wg=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ug={};Ug[Xa.POINT]=function(t){return void 0!==t.m&&void 0!==t.z?new Ss([t.x,t.y,t.z,t.m],Ya):void 0!==t.z?new Ss([t.x,t.y,t.z],za):void 0!==t.m?new Ss([t.x,t.y,t.m],Ba):new Ss([t.x,t.y])},Ug[Xa.LINE_STRING]=function(t){var e=fr(t);return new zf(t.paths[0],e)},Ug[Xa.POLYGON]=function(t){var e=fr(t);return new Ts(t.rings,e)},Ug[Xa.MULTI_POINT]=function(t){var e=fr(t);return new hg(t.points,e)},Ug[Xa.MULTI_LINE_STRING]=function(t){var e=fr(t);return new sg(t.paths,e)},Ug[Xa.MULTI_POLYGON]=function(t){var e=fr(t);return new cg(t.rings,e)};var Vg={};Vg[Xa.POINT]=function(t,e){var i,n=t.getCoordinates(),r=t.getLayout();return r===za?i={x:n[0],y:n[1],z:n[2]}:r===Ba?i={x:n[0],y:n[1],m:n[2]}:r===Ya?i={x:n[0],y:n[1],z:n[2],m:n[3]}:r===Ga?i={x:n[0],y:n[1]}:S(!1,34),i},Vg[Xa.LINE_STRING]=function(t,e){var i=gr(t);return{hasZ:i.hasZ,hasM:i.hasM,paths:[t.getCoordinates()]}},Vg[Xa.POLYGON]=function(t,e){var i=gr(t);return{hasZ:i.hasZ,hasM:i.hasM,rings:t.getCoordinates(!1)}},Vg[Xa.MULTI_POINT]=function(t,e){var i=gr(t);return{hasZ:i.hasZ,hasM:i.hasM,points:t.getCoordinates()}},Vg[Xa.MULTI_LINE_STRING]=function(t,e){var i=gr(t);return{hasZ:i.hasZ,hasM:i.hasM,paths:t.getCoordinates()}},Vg[Xa.MULTI_POLYGON]=function(t,e){for(var i=gr(t),n=t.getCoordinates(!1),r=[],o=0;o<n.length;o++)for(var a=n[o].length-1;a>=0;a--)r.push(n[o][a]);return{hasZ:i.hasZ,hasM:i.hasM,rings:r}};var Hg=function(t){function e(e){var i=this,n=e||{};return(i=t.call(this)||this).geometryName_=n.geometryName,i}return Wg(e,t),e.prototype.readFeatureFromObject=function(t,e){var i=t,n=dr(i.geometry,e),r=new La;return this.geometryName_&&r.setGeometryName(this.geometryName_),r.setGeometry(n),e&&e.idField&&i.attributes[e.idField]&&r.setId(i.attributes[e.idField]),i.attributes&&r.setProperties(i.attributes,!0),r},e.prototype.readFeaturesFromObject=function(t,e){var i=e||{};if(t.features){var n=[],r=t.features;i.idField=t.objectIdFieldName;for(var o=0,a=r.length;o<a;++o)n.push(this.readFeatureFromObject(r[o],i));return n}return[this.readFeatureFromObject(t,i)]},e.prototype.readGeometryFromObject=function(t,e){return dr(t,e)},e.prototype.readProjectionFromObject=function(t){return t.spatialReference&&void 0!==t.spatialReference.wkid?bt("EPSG:"+t.spatialReference.wkid):null},e.prototype.writeGeometryObject=function(t,e){return vr(t,this.adaptOptions(e))},e.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var i={},n=t.getGeometry();n&&(i.geometry=vr(n,e),e&&e.featureProjection&&(i.geometry.spatialReference={wkid:Number(bt(e.featureProjection).getCode().split(":").pop())}));var r=t.getProperties();return delete r[t.getGeometryName()],i.attributes=a(r)?{}:r,i},e.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);for(var i=[],n=0,r=t.length;n<r;++n)i.push(this.writeFeatureObject(t[n],e));return{features:i}},e}(Xg),qg=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Zg=function(t){function e(){var e=t.call(this)||this;return e.xmlSerializer_=(void 0===Nu&&"undefined"!=typeof XMLSerializer&&(Nu=new XMLSerializer),Nu),e}return qg(e,t),e.prototype.getType=function(){return Pu},e.prototype.readFeature=function(t,e){if(t){if("string"==typeof t){var i=Qi(t);return this.readFeatureFromDocument(i,e)}return $i(t)?this.readFeatureFromDocument(t,e):this.readFeatureFromNode(t,e)}return null},e.prototype.readFeatureFromDocument=function(t,e){var i=this.readFeaturesFromDocument(t,e);return i.length>0?i[0]:null},e.prototype.readFeatureFromNode=function(t,e){return null},e.prototype.readFeatures=function(t,e){if(t){if("string"==typeof t){var i=Qi(t);return this.readFeaturesFromDocument(i,e)}return $i(t)?this.readFeaturesFromDocument(t,e):this.readFeaturesFromNode(t,e)}return[]},e.prototype.readFeaturesFromDocument=function(t,e){for(var i=[],n=t.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&f(i,this.readFeaturesFromNode(n,e));return i},e.prototype.readFeaturesFromNode=function(t,e){return n()},e.prototype.readGeometry=function(t,e){if(t){if("string"==typeof t){var i=Qi(t);return this.readGeometryFromDocument(i,e)}return $i(t)?this.readGeometryFromDocument(t,e):this.readGeometryFromNode(t,e)}return null},e.prototype.readGeometryFromDocument=function(t,e){return null},e.prototype.readGeometryFromNode=function(t,e){return null},e.prototype.readProjection=function(t){if(t){if("string"==typeof t){var e=Qi(t);return this.readProjectionFromDocument(e)}return $i(t)?this.readProjectionFromDocument(t):this.readProjectionFromNode(t)}return null},e.prototype.readProjectionFromDocument=function(t){return this.dataProjection},e.prototype.readProjectionFromNode=function(t){return this.dataProjection},e.prototype.writeFeature=function(t,e){var i=this.writeFeatureNode(t,e);return this.xmlSerializer_.serializeToString(i)},e.prototype.writeFeatureNode=function(t,e){return null},e.prototype.writeFeatures=function(t,e){var i=this.writeFeaturesNode(t,e);return this.xmlSerializer_.serializeToString(i)},e.prototype.writeFeaturesNode=function(t,e){return null},e.prototype.writeGeometry=function(t,e){var i=this.writeGeometryNode(t,e);return this.xmlSerializer_.serializeToString(i)},e.prototype.writeGeometryNode=function(t,e){return null},e}(Bg),Kg=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Jg="http://www.opengis.net/gml",$g=/^[\s\xa0]*$/,Qg=function(t){function e(e){var i=t.call(this)||this,n=e||{};return i.featureType=n.featureType,i.featureNS=n.featureNS,i.srsName=n.srsName,i.schemaLocation="",i.FEATURE_COLLECTION_PARSERS={},i.FEATURE_COLLECTION_PARSERS[i.namespace]={featureMember:en(i.readFeaturesInternal),featureMembers:nn(i.readFeaturesInternal)},i}return Kg(e,t),e.prototype.readFeaturesInternal=function(t,e){var i=t.localName,n=null;if("FeatureCollection"==i)n=pn([],this.FEATURE_COLLECTION_PARSERS,t,e,this);else if("featureMembers"==i||"featureMember"==i){var r=e[0],o=r.featureType,a=r.featureNS;if(!o&&t.childNodes){o=[],a={};for(var s=0,l=t.childNodes.length;s<l;++s){var h=t.childNodes[s];if(1===h.nodeType){var u=h.nodeName.split(":").pop();if(-1===o.indexOf(u)){var c="",p=0,d=h.namespaceURI;for(var f in a){if(a[f]===d){c=f;break}++p}c||(a[c="p"+p]=d),o.push(c+":"+u)}}}"featureMember"!=i&&(r.featureType=o,r.featureNS=a)}if("string"==typeof a){var g=a;(a={}).p0=g}var v={},y=Array.isArray(o)?o:[o];for(var m in a){var _={};for(s=0,l=y.length;s<l;++s)(-1===y[s].indexOf(":")?"p0":y[s].split(":")[0])===m&&(_[y[s].split(":").pop()]="featureMembers"==i?en(this.readFeatureElement,this):nn(this.readFeatureElement,this));v[a[m]]=_}n=pn("featureMember"==i?void 0:[],v,t,e)}return null===n&&(n=[]),n},e.prototype.readGeometryElement=function(t,e){var i=e[0];i.srsName=t.firstElementChild.getAttribute("srsName"),i.srsDimension=t.firstElementChild.getAttribute("srsDimension");var n=pn(null,this.GEOMETRY_PARSERS,t,e,this);return n?Array.isArray(n)?cr(n,i):ur(n,!1,i):void 0},e.prototype.readFeatureElementInternal=function(t,e,i){for(var n,r={},o=t.firstElementChild;o;o=o.nextElementSibling){var a=void 0,s=o.localName;0===o.childNodes.length||1===o.childNodes.length&&(3===o.firstChild.nodeType||4===o.firstChild.nodeType)?(a=Ji(o,!1),$g.test(a)&&(a=void 0)):(i&&(a=this.readGeometryElement(o,e)),a?"boundedBy"!==s&&(n=s):a=this.readFeatureElementInternal(o,e,!1)),r[s]?(r[s]instanceof Array||(r[s]=[r[s]]),r[s].push(a)):r[s]=a;var l=o.attributes.length;if(l>0){r[s]={_content_:r[s]};for(var h=0;h<l;h++)r[s][o.attributes[h].name]=o.attributes[h].value}}if(i){var u=new La(r);n&&u.setGeometryName(n);var c=t.getAttribute("fid")||function(e,i,n){return t.getAttributeNS(i,"id")||""}(0,this.namespace);return c&&u.setId(c),u}return r},e.prototype.readFeatureElement=function(t,e){return this.readFeatureElementInternal(t,e,!0)},e.prototype.readPoint=function(t,e){var i=this.readFlatCoordinatesFromNode_(t,e);if(i)return new Ss(i,za)},e.prototype.readMultiPoint=function(t,e){var i=pn([],this.MULTIPOINT_PARSERS_,t,e,this);return i?new hg(i):void 0},e.prototype.readMultiLineString=function(t,e){var i=pn([],this.MULTILINESTRING_PARSERS_,t,e,this);if(i)return new sg(i)},e.prototype.readMultiPolygon=function(t,e){var i=pn([],this.MULTIPOLYGON_PARSERS_,t,e,this);if(i)return new cg(i)},e.prototype.pointMemberParser_=function(t,e){cn(this.POINTMEMBER_PARSERS_,t,e,this)},e.prototype.lineStringMemberParser_=function(t,e){cn(this.LINESTRINGMEMBER_PARSERS_,t,e,this)},e.prototype.polygonMemberParser_=function(t,e){cn(this.POLYGONMEMBER_PARSERS_,t,e,this)},e.prototype.readLineString=function(t,e){var i=this.readFlatCoordinatesFromNode_(t,e);return i?new zf(i,za):void 0},e.prototype.readFlatLinearRing_=function(t,e){return pn(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)||void 0},e.prototype.readLinearRing=function(t,e){var i=this.readFlatCoordinatesFromNode_(t,e);if(i)return new bs(i,za)},e.prototype.readPolygon=function(t,e){var i=pn([null],this.FLAT_LINEAR_RINGS_PARSERS,t,e,this);if(i&&i[0]){var n,r=i[0],o=[r.length],a=void 0;for(a=1,n=i.length;a<n;++a)f(r,i[a]),o.push(r.length);return new Ts(r,za,o)}},e.prototype.readFlatCoordinatesFromNode_=function(t,e){return pn(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)},e.prototype.readGeometryFromNode=function(t,e){return this.readGeometryElement(t,[this.getReadOptions(t,e||{})])||null},e.prototype.readFeaturesFromNode=function(t,e){var i={featureType:this.featureType,featureNS:this.featureNS};return e&&na(i,this.getReadOptions(t,e)),this.readFeaturesInternal(t,[i])||[]},e.prototype.readProjectionFromNode=function(t){return bt(this.srsName?this.srsName:t.firstElementChild.getAttribute("srsName"))},e}(Zg);Qg.prototype.namespace=Jg,Qg.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}},Qg.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}},Qg.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}},Qg.prototype.MULTIPOINT_PARSERS_={"http://www.opengis.net/gml":{pointMember:en(Qg.prototype.pointMemberParser_),pointMembers:en(Qg.prototype.pointMemberParser_)}},Qg.prototype.MULTILINESTRING_PARSERS_={"http://www.opengis.net/gml":{lineStringMember:en(Qg.prototype.lineStringMemberParser_),lineStringMembers:en(Qg.prototype.lineStringMemberParser_)}},Qg.prototype.MULTIPOLYGON_PARSERS_={"http://www.opengis.net/gml":{polygonMember:en(Qg.prototype.polygonMemberParser_),polygonMembers:en(Qg.prototype.polygonMemberParser_)}},Qg.prototype.POINTMEMBER_PARSERS_={"http://www.opengis.net/gml":{Point:en(Qg.prototype.readFlatCoordinatesFromNode_)}},Qg.prototype.LINESTRINGMEMBER_PARSERS_={"http://www.opengis.net/gml":{LineString:en(Qg.prototype.readLineString)}},Qg.prototype.POLYGONMEMBER_PARSERS_={"http://www.opengis.net/gml":{Polygon:en(Qg.prototype.readPolygon)}},Qg.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:nn(Qg.prototype.readFlatLinearRing_)}};var tv=Qg,ev=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),iv={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},nv=function(t){function e(e){var i=this,n=e||{};return(i=t.call(this,n)||this).surface_=void 0!==n.surface&&n.surface,i.curve_=void 0!==n.curve&&n.curve,i.multiCurve_=void 0===n.multiCurve||n.multiCurve,i.multiSurface_=void 0===n.multiSurface||n.multiSurface,i.schemaLocation=n.schemaLocation?n.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",i.hasZ=void 0!==n.hasZ&&n.hasZ,i}return ev(e,t),e.prototype.readMultiCurve_=function(t,e){var i=pn([],this.MULTICURVE_PARSERS_,t,e,this);return i?new sg(i):void 0},e.prototype.readMultiSurface_=function(t,e){var i=pn([],this.MULTISURFACE_PARSERS_,t,e,this);if(i)return new cg(i)},e.prototype.curveMemberParser_=function(t,e){cn(this.CURVEMEMBER_PARSERS_,t,e,this)},e.prototype.surfaceMemberParser_=function(t,e){cn(this.SURFACEMEMBER_PARSERS_,t,e,this)},e.prototype.readPatch_=function(t,e){return pn([null],this.PATCHES_PARSERS_,t,e,this)},e.prototype.readSegment_=function(t,e){return pn([null],this.SEGMENTS_PARSERS_,t,e,this)},e.prototype.readPolygonPatch_=function(t,e){return pn([null],this.FLAT_LINEAR_RINGS_PARSERS,t,e,this)},e.prototype.readLineStringSegment_=function(t,e){return pn([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)},e.prototype.interiorParser_=function(t,e){var i=pn(void 0,this.RING_PARSERS,t,e,this);i&&e[e.length-1].push(i)},e.prototype.exteriorParser_=function(t,e){var i=pn(void 0,this.RING_PARSERS,t,e,this);i&&(e[e.length-1][0]=i)},e.prototype.readSurface_=function(t,e){var i=pn([null],this.SURFACE_PARSERS_,t,e,this);if(i&&i[0]){var n,r=i[0],o=[r.length],a=void 0;for(a=1,n=i.length;a<n;++a)f(r,i[a]),o.push(r.length);return new Ts(r,za,o)}},e.prototype.readCurve_=function(t,e){var i=pn([null],this.CURVE_PARSERS_,t,e,this);return i?new zf(i,za):void 0},e.prototype.readEnvelope_=function(t,e){var i=pn([null],this.ENVELOPE_PARSERS_,t,e,this);return R(i[1][0],i[1][1],i[2][0],i[2][1])},e.prototype.readFlatPos_=function(t,e){for(var i,n=Ji(t,!1),r=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,o=[];i=r.exec(n);)o.push(parseFloat(i[1])),n=n.substr(i[0].length);if(""===n){var a=e[0].srsName,s="enu";if(a&&(s=bt(a).getAxisOrientation()),"neu"===s){var l,h=void 0;for(h=0,l=o.length;h<l;h+=3){var u=o[h];o[h]=o[h+1],o[h+1]=u}}var c=o.length;if(2==c&&o.push(0),0!==c)return o}},e.prototype.readFlatPosList_=function(t,e){var i=Ji(t,!1).replace(/^\s*|\s*$/g,""),n=e[0],r=n.srsName,o=n.srsDimension,a="enu";r&&(a=bt(r).getAxisOrientation());var s,l,h,u=i.split(/\s+/),c=2;t.getAttribute("srsDimension")?c=Sr(t.getAttribute("srsDimension")):t.getAttribute("dimension")?c=Sr(t.getAttribute("dimension")):t.parentNode.getAttribute("srsDimension")?c=Sr(t.parentNode.getAttribute("srsDimension")):o&&(c=Sr(o));for(var p=[],d=0,f=u.length;d<f;d+=c)s=parseFloat(u[d]),l=parseFloat(u[d+1]),h=3===c?parseFloat(u[d+2]):0,"en"===a.substr(0,2)?p.push(s,l,h):p.push(l,s,h);return p},e.prototype.writePos_=function(t,e,i){var n=i[i.length-1],r=n.hasZ;t.setAttribute("srsDimension",r?"3":"2");var o=n.srsName,a="enu";o&&(a=bt(o).getAxisOrientation());var s,l=e.getCoordinates();s="en"===a.substr(0,2)?l[0]+" "+l[1]:l[1]+" "+l[0],r&&(s+=" "+(l[2]||0)),Lr(t,s)},e.prototype.getCoords_=function(t,e,i){var n="enu";e&&(n=bt(e).getAxisOrientation());var r="en"===n.substr(0,2)?t[0]+" "+t[1]:t[1]+" "+t[0];return i&&(r+=" "+(t[2]||0)),r},e.prototype.writePosList_=function(t,e,i){var n=i[i.length-1],r=n.hasZ;t.setAttribute("srsDimension",r?"3":"2");for(var o,a=n.srsName,s=e.getCoordinates(),l=s.length,h=new Array(l),u=0;u<l;++u)o=s[u],h[u]=this.getCoords_(o,a,r);Lr(t,h.join(" "))},e.prototype.writePoint_=function(t,e,i){var n=i[i.length-1].srsName;n&&t.setAttribute("srsName",n);var r=Ki(t.namespaceURI,"pos");t.appendChild(r),this.writePos_(r,e,i)},e.prototype.writeEnvelope=function(t,e,i){var n=i[i.length-1].srsName;n&&t.setAttribute("srsName",n),fn({node:t},this.ENVELOPE_SERIALIZERS_,ku,[e[0]+" "+e[1],e[2]+" "+e[3]],i,["lowerCorner","upperCorner"],this)},e.prototype.writeLinearRing_=function(t,e,i){var n=i[i.length-1].srsName;n&&t.setAttribute("srsName",n);var r=Ki(t.namespaceURI,"posList");t.appendChild(r),this.writePosList_(r,e,i)},e.prototype.RING_NODE_FACTORY_=function(t,e,i){var n=e[e.length-1],r=n.node,o=n.exteriorWritten;return void 0===o&&(n.exteriorWritten=!0),Ki(r.namespaceURI,void 0!==o?"interior":"exterior")},e.prototype.writeSurfaceOrPolygon_=function(t,e,i){var n=i[i.length-1],r=n.hasZ,o=n.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var a=e.getLinearRings();fn({node:t,hasZ:r,srsName:o},this.RING_SERIALIZERS_,this.RING_NODE_FACTORY_,a,i,void 0,this)}else if("Surface"===t.nodeName){var s=Ki(t.namespaceURI,"patches");t.appendChild(s),this.writeSurfacePatches_(s,e,i)}},e.prototype.writeCurveOrLineString_=function(t,e,i){var n=i[i.length-1].srsName;if("LineStringSegment"!==t.nodeName&&n&&t.setAttribute("srsName",n),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var r=Ki(t.namespaceURI,"posList");t.appendChild(r),this.writePosList_(r,e,i)}else if("Curve"===t.nodeName){var o=Ki(t.namespaceURI,"segments");t.appendChild(o),this.writeCurveSegments_(o,e,i)}},e.prototype.writeMultiSurfaceOrPolygon_=function(t,e,i){var n=i[i.length-1],r=n.hasZ,o=n.srsName,a=n.surface;o&&t.setAttribute("srsName",o);var s=e.getPolygons();fn({node:t,hasZ:r,srsName:o,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,i,void 0,this)},e.prototype.writeMultiPoint_=function(t,e,i){var n=i[i.length-1],r=n.srsName,o=n.hasZ;r&&t.setAttribute("srsName",r);var a=e.getPoints();fn({node:t,hasZ:o,srsName:r},this.POINTMEMBER_SERIALIZERS_,ln("pointMember"),a,i,void 0,this)},e.prototype.writeMultiCurveOrLineString_=function(t,e,i){var n=i[i.length-1],r=n.hasZ,o=n.srsName,a=n.curve;o&&t.setAttribute("srsName",o);var s=e.getLineStrings();fn({node:t,hasZ:r,srsName:o,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,i,void 0,this)},e.prototype.writeRing_=function(t,e,i){var n=Ki(t.namespaceURI,"LinearRing");t.appendChild(n),this.writeLinearRing_(n,e,i)},e.prototype.writeSurfaceOrPolygonMember_=function(t,e,i){var n=this.GEOMETRY_NODE_FACTORY_(e,i);n&&(t.appendChild(n),this.writeSurfaceOrPolygon_(n,e,i))},e.prototype.writePointMember_=function(t,e,i){var n=Ki(t.namespaceURI,"Point");t.appendChild(n),this.writePoint_(n,e,i)},e.prototype.writeLineStringOrCurveMember_=function(t,e,i){var n=this.GEOMETRY_NODE_FACTORY_(e,i);n&&(t.appendChild(n),this.writeCurveOrLineString_(n,e,i))},e.prototype.writeSurfacePatches_=function(t,e,i){var n=Ki(t.namespaceURI,"PolygonPatch");t.appendChild(n),this.writeSurfaceOrPolygon_(n,e,i)},e.prototype.writeCurveSegments_=function(t,e,i){var n=Ki(t.namespaceURI,"LineStringSegment");t.appendChild(n),this.writeCurveOrLineString_(n,e,i)},e.prototype.writeGeometryElement=function(t,e,i){var n,r=i[i.length-1],o=na({},r);o.node=t,n=Array.isArray(e)?cr(e,r):ur(e,!0,r),fn(o,this.GEOMETRY_SERIALIZERS_,this.GEOMETRY_NODE_FACTORY_,[n],i,void 0,this)},e.prototype.writeFeatureElement=function(t,e,i){var n=e.getId();n&&t.setAttribute("fid",n);var r=i[i.length-1],o=r.featureNS,a=e.getGeometryName();r.serializers||(r.serializers={},r.serializers[o]={});var s=e.getProperties(),l=[],h=[];for(var u in s){var c=s[u];null!==c&&(l.push(u),h.push(c),u==a||"function"==typeof c.getSimplifiedGeometry?u in r.serializers[o]||(r.serializers[o][u]=an(this.writeGeometryElement,this)):u in r.serializers[o]||(r.serializers[o][u]=an(Lr)))}var p=na({},r);p.node=t,fn(p,r.serializers,ln(void 0,o),h,i,l)},e.prototype.writeFeatureMembers_=function(t,e,i){var n=i[i.length-1],r=n.featureType,o=n.featureNS,a={};a[o]={},a[o][r]=an(this.writeFeatureElement,this);var s=na({},n);s.node=t,fn(s,a,ln(r,o),e,i)},e.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(t,e,i){return Ki(this.namespace,iv[e[e.length-1].node.nodeName])},e.prototype.GEOMETRY_NODE_FACTORY_=function(t,e,i){var n,r=e[e.length-1],o=r.multiSurface,a=r.surface,s=r.curve,l=r.multiCurve;return Array.isArray(t)?n="Envelope":"MultiPolygon"===(n=t.getType())&&!0===o?n="MultiSurface":"Polygon"===n&&!0===a?n="Surface":"LineString"===n&&!0===s?n="Curve":"MultiLineString"===n&&!0===l&&(n="MultiCurve"),Ki(this.namespace,n)},e.prototype.writeGeometryNode=function(t,e){e=this.adaptOptions(e);var i=Ki(this.namespace,"geom"),n={node:i,hasZ:this.hasZ,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};return e&&na(n,e),this.writeGeometryElement(i,t,[n]),i},e.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var i=Ki(this.namespace,"featureMembers");i.setAttributeNS(Fu,"xsi:schemaLocation",this.schemaLocation);var n={srsName:this.srsName,hasZ:this.hasZ,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};return e&&na(n,e),this.writeFeatureMembers_(i,t,[n]),i},e}(tv);nv.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:nn(nv.prototype.readFlatPos_),posList:nn(nv.prototype.readFlatPosList_)}},nv.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:nv.prototype.interiorParser_,exterior:nv.prototype.exteriorParser_}},nv.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:nn(tv.prototype.readPoint),MultiPoint:nn(tv.prototype.readMultiPoint),LineString:nn(tv.prototype.readLineString),MultiLineString:nn(tv.prototype.readMultiLineString),LinearRing:nn(tv.prototype.readLinearRing),Polygon:nn(tv.prototype.readPolygon),MultiPolygon:nn(tv.prototype.readMultiPolygon),Surface:nn(nv.prototype.readSurface_),MultiSurface:nn(nv.prototype.readMultiSurface_),Curve:nn(nv.prototype.readCurve_),MultiCurve:nn(nv.prototype.readMultiCurve_),Envelope:nn(nv.prototype.readEnvelope_)}},nv.prototype.MULTICURVE_PARSERS_={"http://www.opengis.net/gml":{curveMember:en(nv.prototype.curveMemberParser_),curveMembers:en(nv.prototype.curveMemberParser_)}},nv.prototype.MULTISURFACE_PARSERS_={"http://www.opengis.net/gml":{surfaceMember:en(nv.prototype.surfaceMemberParser_),surfaceMembers:en(nv.prototype.surfaceMemberParser_)}},nv.prototype.CURVEMEMBER_PARSERS_={"http://www.opengis.net/gml":{LineString:en(tv.prototype.readLineString),Curve:en(nv.prototype.readCurve_)}},nv.prototype.SURFACEMEMBER_PARSERS_={"http://www.opengis.net/gml":{Polygon:en(tv.prototype.readPolygon),Surface:en(nv.prototype.readSurface_)}},nv.prototype.SURFACE_PARSERS_={"http://www.opengis.net/gml":{patches:nn(nv.prototype.readPatch_)}},nv.prototype.CURVE_PARSERS_={"http://www.opengis.net/gml":{segments:nn(nv.prototype.readSegment_)}},nv.prototype.ENVELOPE_PARSERS_={"http://www.opengis.net/gml":{lowerCorner:en(nv.prototype.readFlatPosList_),upperCorner:en(nv.prototype.readFlatPosList_)}},nv.prototype.PATCHES_PARSERS_={"http://www.opengis.net/gml":{PolygonPatch:nn(nv.prototype.readPolygonPatch_)}},nv.prototype.SEGMENTS_PARSERS_={"http://www.opengis.net/gml":{LineStringSegment:nn(nv.prototype.readLineStringSegment_)}},nv.prototype.RING_SERIALIZERS_={"http://www.opengis.net/gml":{exterior:an(nv.prototype.writeRing_),interior:an(nv.prototype.writeRing_)}},nv.prototype.ENVELOPE_SERIALIZERS_={"http://www.opengis.net/gml":{lowerCorner:an(Lr),upperCorner:an(Lr)}},nv.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{surfaceMember:an(nv.prototype.writeSurfaceOrPolygonMember_),polygonMember:an(nv.prototype.writeSurfaceOrPolygonMember_)}},nv.prototype.POINTMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{pointMember:an(nv.prototype.writePointMember_)}},nv.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{lineStringMember:an(nv.prototype.writeLineStringOrCurveMember_),curveMember:an(nv.prototype.writeLineStringOrCurveMember_)}},nv.prototype.GEOMETRY_SERIALIZERS_={"http://www.opengis.net/gml":{Curve:an(nv.prototype.writeCurveOrLineString_),MultiCurve:an(nv.prototype.writeMultiCurveOrLineString_),Point:an(nv.prototype.writePoint_),MultiPoint:an(nv.prototype.writeMultiPoint_),LineString:an(nv.prototype.writeCurveOrLineString_),MultiLineString:an(nv.prototype.writeMultiCurveOrLineString_),LinearRing:an(nv.prototype.writeLinearRing_),Polygon:an(nv.prototype.writeSurfaceOrPolygon_),MultiPolygon:an(nv.prototype.writeMultiSurfaceOrPolygon_),Surface:an(nv.prototype.writeSurfaceOrPolygon_),MultiSurface:an(nv.prototype.writeMultiSurfaceOrPolygon_),Envelope:an(nv.prototype.writeEnvelope)}};var rv=nv,ov=rv,av=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),sv={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},lv=function(t){function e(e){var i=this,n=e||{};return(i=t.call(this,n)||this).FEATURE_COLLECTION_PARSERS[Jg].featureMember=en(i.readFeaturesInternal),i.schemaLocation=n.schemaLocation?n.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/2.1.2/feature.xsd",i}return av(e,t),e.prototype.readFlatCoordinates_=function(t,e){var i=Ji(t,!1).replace(/^\s*|\s*$/g,""),n=e[0].srsName,r="enu";if(n){var o=bt(n);o&&(r=o.getAxisOrientation())}for(var a=i.trim().split(/\s+/),s=[],l=0,h=a.length;l<h;l++){var u=a[l].split(/,+/),c=parseFloat(u[0]),p=parseFloat(u[1]),d=3===u.length?parseFloat(u[2]):0;"en"===r.substr(0,2)?s.push(c,p,d):s.push(p,c,d)}return s},e.prototype.readBox_=function(t,e){var i=pn([null],this.BOX_PARSERS_,t,e,this);return R(i[1][0],i[1][1],i[1][3],i[1][4])},e.prototype.innerBoundaryIsParser_=function(t,e){var i=pn(void 0,this.RING_PARSERS,t,e,this);i&&e[e.length-1].push(i)},e.prototype.outerBoundaryIsParser_=function(t,e){var i=pn(void 0,this.RING_PARSERS,t,e,this);i&&(e[e.length-1][0]=i)},e.prototype.GEOMETRY_NODE_FACTORY_=function(t,e,i){var n,r=e[e.length-1],o=r.multiSurface,a=r.surface,s=r.multiCurve;return Array.isArray(t)?n="Envelope":"MultiPolygon"===(n=t.getType())&&!0===o?n="MultiSurface":"Polygon"===n&&!0===a?n="Surface":"MultiLineString"===n&&!0===s&&(n="MultiCurve"),Ki("http://www.opengis.net/gml",n)},e.prototype.writeFeatureElement=function(t,e,i){var n=e.getId();n&&t.setAttribute("fid",n);var r=i[i.length-1],o=r.featureNS,a=e.getGeometryName();r.serializers||(r.serializers={},r.serializers[o]={});var s=e.getProperties(),l=[],h=[];for(var u in s){var c=s[u];null!==c&&(l.push(u),h.push(c),u==a||"function"==typeof c.getSimplifiedGeometry?u in r.serializers[o]||(r.serializers[o][u]=an(this.writeGeometryElement,this)):u in r.serializers[o]||(r.serializers[o][u]=an(Lr)))}var p=na({},r);p.node=t,fn(p,r.serializers,ln(void 0,o),h,i,l)},e.prototype.writeCurveOrLineString_=function(t,e,i){var n=i[i.length-1].srsName;if("LineStringSegment"!==t.nodeName&&n&&t.setAttribute("srsName",n),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var r=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(r),this.writeCoordinates_(r,e,i)}else if("Curve"===t.nodeName){var o=Ki(t.namespaceURI,"segments");t.appendChild(o),this.writeCurveSegments_(o,e,i)}},e.prototype.writeLineStringOrCurveMember_=function(t,e,i){var n=this.GEOMETRY_NODE_FACTORY_(e,i);n&&(t.appendChild(n),this.writeCurveOrLineString_(n,e,i))},e.prototype.writeMultiCurveOrLineString_=function(t,e,i){var n=i[i.length-1],r=n.hasZ,o=n.srsName,a=n.curve;o&&t.setAttribute("srsName",o);var s=e.getLineStrings();fn({node:t,hasZ:r,srsName:o,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,i,void 0,this)},e.prototype.writeGeometryElement=function(t,e,i){var n,r=i[i.length-1],o=na({},r);o.node=t,n=Array.isArray(e)?cr(e,r):ur(e,!0,r),fn(o,this.GEOMETRY_SERIALIZERS_,this.GEOMETRY_NODE_FACTORY_,[n],i,void 0,this)},e.prototype.createCoordinatesNode_=function(t){var e=Ki(t,"coordinates");return e.setAttribute("decimal","."),e.setAttribute("cs",","),e.setAttribute("ts"," "),e},e.prototype.writeCoordinates_=function(t,e,i){for(var n=i[i.length-1],r=n.hasZ,o=n.srsName,a=e.getCoordinates(),s=a.length,l=new Array(s),h=0;h<s;++h)l[h]=this.getCoords_(a[h],o,r);Lr(t,l.join(" "))},e.prototype.writeCurveSegments_=function(t,e,i){var n=Ki(t.namespaceURI,"LineStringSegment");t.appendChild(n),this.writeCurveOrLineString_(n,e,i)},e.prototype.writeSurfaceOrPolygon_=function(t,e,i){var n=i[i.length-1],r=n.hasZ,o=n.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var a=e.getLinearRings();fn({node:t,hasZ:r,srsName:o},this.RING_SERIALIZERS_,this.RING_NODE_FACTORY_,a,i,void 0,this)}else if("Surface"===t.nodeName){var s=Ki(t.namespaceURI,"patches");t.appendChild(s),this.writeSurfacePatches_(s,e,i)}},e.prototype.RING_NODE_FACTORY_=function(t,e,i){var n=e[e.length-1],r=n.node,o=n.exteriorWritten;return void 0===o&&(n.exteriorWritten=!0),Ki(r.namespaceURI,void 0!==o?"innerBoundaryIs":"outerBoundaryIs")},e.prototype.writeSurfacePatches_=function(t,e,i){var n=Ki(t.namespaceURI,"PolygonPatch");t.appendChild(n),this.writeSurfaceOrPolygon_(n,e,i)},e.prototype.writeRing_=function(t,e,i){var n=Ki(t.namespaceURI,"LinearRing");t.appendChild(n),this.writeLinearRing_(n,e,i)},e.prototype.getCoords_=function(t,e,i){var n="enu";e&&(n=bt(e).getAxisOrientation());var r="en"===n.substr(0,2)?t[0]+","+t[1]:t[1]+","+t[0];return i&&(r+=","+(t[2]||0)),r},e.prototype.writePoint_=function(t,e,i){var n=i[i.length-1],r=n.hasZ,o=n.srsName;o&&t.setAttribute("srsName",o);var a=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(a);var s=e.getCoordinates();Lr(a,this.getCoords_(s,o,r))},e.prototype.writeMultiPoint_=function(t,e,i){var n=i[i.length-1],r=n.hasZ,o=n.srsName;o&&t.setAttribute("srsName",o);var a=e.getPoints();fn({node:t,hasZ:r,srsName:o},this.POINTMEMBER_SERIALIZERS_,ln("pointMember"),a,i,void 0,this)},e.prototype.writePointMember_=function(t,e,i){var n=Ki(t.namespaceURI,"Point");t.appendChild(n),this.writePoint_(n,e,i)},e.prototype.writeLinearRing_=function(t,e,i){var n=i[i.length-1].srsName;n&&t.setAttribute("srsName",n);var r=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(r),this.writeCoordinates_(r,e,i)},e.prototype.writeMultiSurfaceOrPolygon_=function(t,e,i){var n=i[i.length-1],r=n.hasZ,o=n.srsName,a=n.surface;o&&t.setAttribute("srsName",o);var s=e.getPolygons();fn({node:t,hasZ:r,srsName:o,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,i,void 0,this)},e.prototype.writeSurfaceOrPolygonMember_=function(t,e,i){var n=this.GEOMETRY_NODE_FACTORY_(e,i);n&&(t.appendChild(n),this.writeSurfaceOrPolygon_(n,e,i))},e.prototype.writeEnvelope=function(t,e,i){var n=i[i.length-1].srsName;n&&t.setAttribute("srsName",n),fn({node:t},this.ENVELOPE_SERIALIZERS_,ku,[e[0]+" "+e[1],e[2]+" "+e[3]],i,["lowerCorner","upperCorner"],this)},e.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(t,e,i){return Ki("http://www.opengis.net/gml",sv[e[e.length-1].node.nodeName])},e}(tv);lv.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:nn(lv.prototype.readFlatCoordinates_)}},lv.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:lv.prototype.innerBoundaryIsParser_,outerBoundaryIs:lv.prototype.outerBoundaryIsParser_}},lv.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:en(lv.prototype.readFlatCoordinates_)}},lv.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:nn(tv.prototype.readPoint),MultiPoint:nn(tv.prototype.readMultiPoint),LineString:nn(tv.prototype.readLineString),MultiLineString:nn(tv.prototype.readMultiLineString),LinearRing:nn(tv.prototype.readLinearRing),Polygon:nn(tv.prototype.readPolygon),MultiPolygon:nn(tv.prototype.readMultiPolygon),Box:nn(lv.prototype.readBox_)}},lv.prototype.GEOMETRY_SERIALIZERS_={"http://www.opengis.net/gml":{Curve:an(lv.prototype.writeCurveOrLineString_),MultiCurve:an(lv.prototype.writeMultiCurveOrLineString_),Point:an(lv.prototype.writePoint_),MultiPoint:an(lv.prototype.writeMultiPoint_),LineString:an(lv.prototype.writeCurveOrLineString_),MultiLineString:an(lv.prototype.writeMultiCurveOrLineString_),LinearRing:an(lv.prototype.writeLinearRing_),Polygon:an(lv.prototype.writeSurfaceOrPolygon_),MultiPolygon:an(lv.prototype.writeMultiSurfaceOrPolygon_),Surface:an(lv.prototype.writeSurfaceOrPolygon_),MultiSurface:an(lv.prototype.writeMultiSurfaceOrPolygon_),Envelope:an(lv.prototype.writeEnvelope)}},lv.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{lineStringMember:an(lv.prototype.writeLineStringOrCurveMember_),curveMember:an(lv.prototype.writeLineStringOrCurveMember_)}},lv.prototype.RING_SERIALIZERS_={"http://www.opengis.net/gml":{outerBoundaryIs:an(lv.prototype.writeRing_),innerBoundaryIs:an(lv.prototype.writeRing_)}},lv.prototype.POINTMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{pointMember:an(lv.prototype.writePointMember_)}},lv.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{surfaceMember:an(lv.prototype.writeSurfaceOrPolygonMember_),polygonMember:an(lv.prototype.writeSurfaceOrPolygonMember_)}},lv.prototype.ENVELOPE_SERIALIZERS_={"http://www.opengis.net/gml":{lowerCorner:an(Lr),upperCorner:an(Lr)}};var hv=lv,uv=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),cv=function(t){function e(e){var i=this,n=e||{};return(i=t.call(this,n)||this).schemaLocation=n.schemaLocation?n.schemaLocation:i.namespace+" http://schemas.opengis.net/gml/3.2.1/gml.xsd",i}return uv(e,t),e}(rv);cv.prototype.namespace="http://www.opengis.net/gml/3.2",cv.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml/3.2":{pos:nn(rv.prototype.readFlatPos_),posList:nn(rv.prototype.readFlatPosList_)}},cv.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml/3.2":{interior:rv.prototype.interiorParser_,exterior:rv.prototype.exteriorParser_}},cv.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml/3.2":{Point:nn(tv.prototype.readPoint),MultiPoint:nn(tv.prototype.readMultiPoint),LineString:nn(tv.prototype.readLineString),MultiLineString:nn(tv.prototype.readMultiLineString),LinearRing:nn(tv.prototype.readLinearRing),Polygon:nn(tv.prototype.readPolygon),MultiPolygon:nn(tv.prototype.readMultiPolygon),Surface:nn(cv.prototype.readSurface_),MultiSurface:nn(rv.prototype.readMultiSurface_),Curve:nn(cv.prototype.readCurve_),MultiCurve:nn(rv.prototype.readMultiCurve_),Envelope:nn(cv.prototype.readEnvelope_)}},cv.prototype.MULTICURVE_PARSERS_={"http://www.opengis.net/gml/3.2":{curveMember:en(rv.prototype.curveMemberParser_),curveMembers:en(rv.prototype.curveMemberParser_)}},cv.prototype.MULTISURFACE_PARSERS_={"http://www.opengis.net/gml/3.2":{surfaceMember:en(rv.prototype.surfaceMemberParser_),surfaceMembers:en(rv.prototype.surfaceMemberParser_)}},cv.prototype.CURVEMEMBER_PARSERS_={"http://www.opengis.net/gml/3.2":{LineString:en(tv.prototype.readLineString),Curve:en(rv.prototype.readCurve_)}},cv.prototype.SURFACEMEMBER_PARSERS_={"http://www.opengis.net/gml/3.2":{Polygon:en(tv.prototype.readPolygon),Surface:en(rv.prototype.readSurface_)}},cv.prototype.SURFACE_PARSERS_={"http://www.opengis.net/gml/3.2":{patches:nn(rv.prototype.readPatch_)}},cv.prototype.CURVE_PARSERS_={"http://www.opengis.net/gml/3.2":{segments:nn(rv.prototype.readSegment_)}},cv.prototype.ENVELOPE_PARSERS_={"http://www.opengis.net/gml/3.2":{lowerCorner:en(rv.prototype.readFlatPosList_),upperCorner:en(rv.prototype.readFlatPosList_)}},cv.prototype.PATCHES_PARSERS_={"http://www.opengis.net/gml/3.2":{PolygonPatch:nn(rv.prototype.readPolygonPatch_)}},cv.prototype.SEGMENTS_PARSERS_={"http://www.opengis.net/gml/3.2":{LineStringSegment:nn(rv.prototype.readLineStringSegment_)}},cv.prototype.MULTIPOINT_PARSERS_={"http://www.opengis.net/gml/3.2":{pointMember:en(tv.prototype.pointMemberParser_),pointMembers:en(tv.prototype.pointMemberParser_)}},cv.prototype.MULTILINESTRING_PARSERS_={"http://www.opengis.net/gml/3.2":{lineStringMember:en(tv.prototype.lineStringMemberParser_),lineStringMembers:en(tv.prototype.lineStringMemberParser_)}},cv.prototype.MULTIPOLYGON_PARSERS_={"http://www.opengis.net/gml/3.2":{polygonMember:en(tv.prototype.polygonMemberParser_),polygonMembers:en(tv.prototype.polygonMemberParser_)}},cv.prototype.POINTMEMBER_PARSERS_={"http://www.opengis.net/gml/3.2":{Point:en(tv.prototype.readFlatCoordinatesFromNode_)}},cv.prototype.LINESTRINGMEMBER_PARSERS_={"http://www.opengis.net/gml/3.2":{LineString:en(tv.prototype.readLineString)}},cv.prototype.POLYGONMEMBER_PARSERS_={"http://www.opengis.net/gml/3.2":{Polygon:en(tv.prototype.readPolygon)}},cv.prototype.RING_PARSERS={"http://www.opengis.net/gml/3.2":{LinearRing:nn(tv.prototype.readFlatLinearRing_)}},cv.prototype.RING_SERIALIZERS_={"http://www.opengis.net/gml/3.2":{exterior:an(rv.prototype.writeRing_),interior:an(rv.prototype.writeRing_)}},cv.prototype.ENVELOPE_SERIALIZERS_={"http://www.opengis.net/gml/3.2":{lowerCorner:an(Lr),upperCorner:an(Lr)}},cv.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS_={"http://www.opengis.net/gml/3.2":{surfaceMember:an(rv.prototype.writeSurfaceOrPolygonMember_),polygonMember:an(rv.prototype.writeSurfaceOrPolygonMember_)}},cv.prototype.POINTMEMBER_SERIALIZERS_={"http://www.opengis.net/gml/3.2":{pointMember:an(rv.prototype.writePointMember_)}},cv.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS_={"http://www.opengis.net/gml/3.2":{lineStringMember:an(rv.prototype.writeLineStringOrCurveMember_),curveMember:an(rv.prototype.writeLineStringOrCurveMember_)}},cv.prototype.GEOMETRY_SERIALIZERS_={"http://www.opengis.net/gml/3.2":{Curve:an(rv.prototype.writeCurveOrLineString_),MultiCurve:an(rv.prototype.writeMultiCurveOrLineString_),Point:an(cv.prototype.writePoint_),MultiPoint:an(rv.prototype.writeMultiPoint_),LineString:an(rv.prototype.writeCurveOrLineString_),MultiLineString:an(rv.prototype.writeMultiCurveOrLineString_),LinearRing:an(rv.prototype.writeLinearRing_),Polygon:an(rv.prototype.writeSurfaceOrPolygon_),MultiPolygon:an(rv.prototype.writeMultiSurfaceOrPolygon_),Surface:an(rv.prototype.writeSurfaceOrPolygon_),MultiSurface:an(rv.prototype.writeMultiSurfaceOrPolygon_),Envelope:an(rv.prototype.writeEnvelope)}};var pv,dv,fv,gv,vv,yv,mv,_v,xv,bv,wv=cv,Sv=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Cv=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],Ev={rte:Fr,trk:kr,wpt:Nr},Tv=un(Cv,{rte:en(Fr),trk:en(kr),wpt:en(Nr)}),Pv=un(Cv,{text:on(Cr,"linkText"),type:on(Cr,"linkType")}),Lv=un(Cv,{rte:an(function(t,e,i){var n=i[0],r=e.getProperties(),o={node:t};o.properties=r;var a=e.getGeometry();if(a.getType()==Xa.LINE_STRING){var s=ur(a,!0,n);o.geometryLayout=s.getLayout(),r.rtept=s.getCoordinates()}var l=jv[i[i.length-1].node.namespaceURI],h=hn(r,l);fn(o,Gv,ku,h,i,l)}),trk:an(function(t,e,i){var n=i[0],r=e.getProperties(),o={node:t};o.properties=r;var a=e.getGeometry();if(a.getType()==Xa.MULTI_LINE_STRING){var s=ur(a,!0,n);r.trkseg=s.getLineStrings()}var l=Bv[i[i.length-1].node.namespaceURI],h=hn(r,l);fn(o,Yv,ku,h,i,l)}),wpt:an(function(t,e,i){var n=i[0],r=i[i.length-1];r.properties=e.getProperties();var o=e.getGeometry();if(o.getType()==Xa.POINT){var a=ur(o,!0,n);r.geometryLayout=a.getLayout(),jr(t,a.getCoordinates(),i)}})}),Iv=function(t){function e(e){var i=t.call(this)||this,n=e||{};return i.dataProjection=bt("EPSG:4326"),i.readExtensions_=n.readExtensions,i}return Sv(e,t),e.prototype.handleReadExtensions_=function(t){t||(t=[]);for(var e=0,i=t.length;e<i;++e){var n=t[e];if(this.readExtensions_){var r=n.get("extensionsNode_")||null;this.readExtensions_(n,r)}n.set("extensionsNode_",void 0)}},e.prototype.readFeatureFromNode=function(t,e){if(!c(Cv,t.namespaceURI))return null;var i=Ev[t.localName];if(!i)return null;var n=i(t,[this.getReadOptions(t,e)]);return n?(this.handleReadExtensions_([n]),n):null},e.prototype.readFeaturesFromNode=function(t,e){if(!c(Cv,t.namespaceURI))return[];if("gpx"==t.localName){var i=pn([],Tv,t,[this.getReadOptions(t,e)]);return i?(this.handleReadExtensions_(i),i):[]}return[]},e.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var i=Ki("http://www.topografix.com/GPX/1/1","gpx");return i.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",Fu),i.setAttributeNS(Fu,"xsi:schemaLocation","http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"),i.setAttribute("version","1.1"),i.setAttribute("creator","OpenLayers"),fn({node:i},Lv,Ir,t,[e]),i},e}(Zg),Ov=un(Cv,{name:on(Cr),cmt:on(Cr),desc:on(Cr),src:on(Cr),link:Rr,number:on(wr),extensions:Mr,type:on(Cr),rtept:function(t,e){var i=pn({},Av,t,e);if(i){var n=e[e.length-1];Or(n.flatCoordinates,n.layoutOptions,t,i)}}}),Av=un(Cv,{ele:on(xr),time:on(_r)}),Rv=un(Cv,{name:on(Cr),cmt:on(Cr),desc:on(Cr),src:on(Cr),link:Rr,number:on(wr),type:on(Cr),extensions:Mr,trkseg:function(t,e){var i=e[e.length-1];cn(Mv,t,e),i.ends.push(i.flatCoordinates.length)}}),Mv=un(Cv,{trkpt:function(t,e){var i=pn({},Fv,t,e);if(i){var n=e[e.length-1];Or(n.flatCoordinates,n.layoutOptions,t,i)}}}),Fv=un(Cv,{ele:on(xr),time:on(_r)}),kv=un(Cv,{ele:on(xr),time:on(_r),magvar:on(xr),geoidheight:on(xr),name:on(Cr),cmt:on(Cr),desc:on(Cr),src:on(Cr),link:Rr,sym:on(Cr),type:on(Cr),fix:on(Cr),sat:on(wr),hdop:on(xr),vdop:on(xr),pdop:on(xr),ageofdgpsdata:on(xr),dgpsid:on(wr),extensions:Mr}),Nv=["text","type"],Dv=un(Cv,{text:an(Lr),type:an(Lr)}),jv=un(Cv,["name","cmt","desc","src","link","number","type","rtept"]),Gv=un(Cv,{name:an(Lr),cmt:an(Lr),desc:an(Lr),src:an(Lr),link:an(Dr),number:an(Pr),type:an(Lr),rtept:sn(an(jr))}),zv=un(Cv,["ele","time"]),Bv=un(Cv,["name","cmt","desc","src","link","number","type","trkseg"]),Yv=un(Cv,{name:an(Lr),cmt:an(Lr),desc:an(Lr),src:an(Lr),link:an(Dr),number:an(Pr),type:an(Lr),trkseg:sn(an(function(t,e,i){var n={node:t};n.geometryLayout=e.getLayout(),n.properties={},fn(n,Wv,Xv,e.getCoordinates(),i)}))}),Xv=ln("trkpt"),Wv=un(Cv,{trkpt:an(jr)}),Uv=un(Cv,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),Vv=un(Cv,{ele:an(Tr),time:an(function(t,e){var i=new Date(1e3*e),n=i.getUTCFullYear()+"-"+Me(i.getUTCMonth()+1,2)+"-"+Me(i.getUTCDate(),2)+"T"+Me(i.getUTCHours(),2)+":"+Me(i.getUTCMinutes(),2)+":"+Me(i.getUTCSeconds(),2)+"Z";t.appendChild(gn().createTextNode(n))}),magvar:an(Tr),geoidheight:an(Tr),name:an(Lr),cmt:an(Lr),desc:an(Lr),src:an(Lr),link:an(Dr),sym:an(Lr),type:an(Lr),fix:an(Lr),sat:an(Pr),hdop:an(Tr),vdop:an(Tr),pdop:an(Tr),ageofdgpsdata:an(Tr),dgpsid:an(Pr)}),Hv={Point:"wpt",LineString:"rte",MultiLineString:"trk"},qv=Iv,Zv=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Kv=function(t){function e(e){var i=this,n=e||{};return(i=t.call(this)||this).dataProjection=bt(n.dataProjection?n.dataProjection:"EPSG:4326"),n.featureProjection&&(i.defaultFeatureProjection=bt(n.featureProjection)),i.geometryName_=n.geometryName,i.extractGeometryName_=n.extractGeometryName,i}return Zv(e,t),e.prototype.readFeatureFromObject=function(t,e){var i=null,n=Gr((i="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null}).geometry,e),r=new La;return this.geometryName_?r.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&r.setGeometryName(i.geometry_name),r.setGeometry(n),"id"in i&&r.setId(i.id),i.properties&&r.setProperties(i.properties,!0),r},e.prototype.readFeaturesFromObject=function(t,e){var i=null;if("FeatureCollection"===t.type){i=[];for(var n=t.features,r=0,o=n.length;r<o;++r)i.push(this.readFeatureFromObject(n[r],e))}else i=[this.readFeatureFromObject(t,e)];return i},e.prototype.readGeometryFromObject=function(t,e){return Gr(t,e)},e.prototype.readProjectionFromObject=function(t){var e,i=t.crs;return i?"name"==i.type?e=bt(i.properties.name):"EPSG"===i.type?e=bt("EPSG:"+i.properties.code):S(!1,36):e=this.dataProjection,e},e.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var i={type:"Feature",geometry:null,properties:null},n=t.getId();void 0!==n&&(i.id=n);var r=t.getGeometry();r&&(i.geometry=zr(r,e));var o=t.getProperties();return delete o[t.getGeometryName()],a(o)||(i.properties=o),i},e.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);for(var i=[],n=0,r=t.length;n<r;++n)i.push(this.writeFeatureObject(t[n],e));return{type:"FeatureCollection",features:i}},e.prototype.writeGeometryObject=function(t,e){return zr(t,this.adaptOptions(e))},e}(Xg),Jv=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),$v=function(t){function e(){return t.call(this)||this}return Jv(e,t),e.prototype.getType=function(){return Tu},e.prototype.readFeature=function(t,e){return this.readFeatureFromText(Br(t),this.adaptOptions(e))},e.prototype.readFeatureFromText=function(t,e){return n()},e.prototype.readFeatures=function(t,e){return this.readFeaturesFromText(Br(t),this.adaptOptions(e))},e.prototype.readFeaturesFromText=function(t,e){return n()},e.prototype.readGeometry=function(t,e){return this.readGeometryFromText(Br(t),this.adaptOptions(e))},e.prototype.readGeometryFromText=function(t,e){return n()},e.prototype.readProjection=function(t){return this.readProjectionFromText(Br(t))},e.prototype.readProjectionFromText=function(t){return this.dataProjection},e.prototype.writeFeature=function(t,e){return this.writeFeatureText(t,this.adaptOptions(e))},e.prototype.writeFeatureText=function(t,e){return n()},e.prototype.writeFeatures=function(t,e){return this.writeFeaturesText(t,this.adaptOptions(e))},e.prototype.writeFeaturesText=function(t,e){return n()},e.prototype.writeGeometry=function(t,e){return this.writeGeometryText(t,this.adaptOptions(e))},e.prototype.writeGeometryText=function(t,e){return n()},e}(Bg),Qv=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ty="none",ey=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,iy=/^H.([A-Z]{3}).*?:(.*)/,ny=/^HFDTE(\d{2})(\d{2})(\d{2})/,ry=/\r\n|\r|\n/,oy=function(t){function e(e){var i=t.call(this)||this,n=e||{};return i.dataProjection=bt("EPSG:4326"),i.altitudeMode_=n.altitudeMode?n.altitudeMode:ty,i}return Qv(e,t),e.prototype.readFeatureFromText=function(t,e){var i,n,r=this.altitudeMode_,o=t.split(ry),a={},s=[],l=2e3,h=0,u=1,c=-1;for(i=0,n=o.length;i<n;++i){var p=o[i],d=void 0;if("B"==p.charAt(0)){if(d=ey.exec(p)){var f=parseInt(d[1],10),g=parseInt(d[2],10),v=parseInt(d[3],10),y=parseInt(d[4],10)+parseInt(d[5],10)/6e4;"S"==d[6]&&(y=-y);var m=parseInt(d[7],10)+parseInt(d[8],10)/6e4;if("W"==d[9]&&(m=-m),s.push(m,y),r!=ty){var _=void 0;_="gps"==r?parseInt(d[11],10):"barometric"==r?parseInt(d[12],10):0,s.push(_)}var x=Date.UTC(l,h,u,f,g,v);x<c&&(x=Date.UTC(l,h,u+1,f,g,v)),s.push(x/1e3),c=x}}else"H"==p.charAt(0)&&((d=ny.exec(p))?(u=parseInt(d[1],10),h=parseInt(d[2],10)-1,l=2e3+parseInt(d[3],10)):(d=iy.exec(p))&&(a[d[1]]=d[2].trim()))}if(0===s.length)return null;var b=new zf(s,r==ty?Ba:Ya),w=new La(ur(b,!1,e));return w.setProperties(a,!0),w},e.prototype.readFeaturesFromText=function(t,e){var i=this.readFeatureFromText(t,e);return i?[i]:[]},e}($v),ay=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),sy=["http://www.google.com/kml/ext/2.2"],ly=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],hy={fraction:rc,pixels:oc,insetPixels:oc},uy=un(ly,{ExtendedData:no,Region:ro,MultiGeometry:on($r,"geometry"),LineString:on(Kr,"geometry"),LinearRing:on(Jr,"geometry"),Point:on(Qr,"geometry"),Polygon:on(to,"geometry"),Style:on(eo),StyleMap:function(t,e){var i=Vr.call(this,t,e);if(i){var n=e[e.length-1];Array.isArray(i)?n.Style=i:"string"==typeof i?n.styleUrl=i:S(!1,38)}},address:on(Cr),description:on(Cr),name:on(Cr),open:on(yr),phoneNumber:on(Cr),styleUrl:on(Wr),visibility:on(yr)},un(sy,{MultiTrack:on(function(t,e){var i=pn([],Iy,t,e);if(i)return new sg(i)},"geometry"),Track:on(qr,"geometry")})),cy=un(ly,{ExtendedData:no,Region:ro,Link:function(t,e){cn(py,t,e)},address:on(Cr),description:on(Cr),name:on(Cr),open:on(yr),phoneNumber:on(Cr),visibility:on(yr)}),py=un(ly,{href:on(Wr)}),dy=un(ly,{LatLonAltBox:function(t,e){var i=pn({},By,t,e);if(i){var n=e[e.length-1],r=[parseFloat(i.west),parseFloat(i.south),parseFloat(i.east),parseFloat(i.north)];n.extent=r,n.altitudeMode=i.altitudeMode,n.minAltitude=parseFloat(i.minAltitude),n.maxAltitude=parseFloat(i.maxAltitude)}},Lod:function(t,e){var i=pn({},Yy,t,e);if(i){var n=e[e.length-1];n.minLodPixels=parseFloat(i.minLodPixels),n.maxLodPixels=parseFloat(i.maxLodPixels),n.minFadeExtent=parseFloat(i.minFadeExtent),n.maxFadeExtent=parseFloat(i.maxFadeExtent)}}}),fy=un(ly,["Document","Placemark"]),gy=un(ly,{Document:an(function(t,e,i){fn({node:t},Vy,Hy,e,i,void 0,this)}),Placemark:an(lo)}),vy=null,yy=null,my=null,_y=null,xy=null,by=null,wy=function(t){function e(e){var i=t.call(this)||this,n=e||{};return by||(vy=new nc({color:pv=[255,255,255,1]}),yy=new vc({anchor:dv=[20,2],anchorOrigin:pc,anchorXUnits:fv=oc,anchorYUnits:gv=oc,crossOrigin:"anonymous",rotation:0,scale:mv=.5,size:vv=[64,64],src:yv="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png"}),_v="NO_IMAGE",my=new yc({color:pv,width:1}),xv=new yc({color:[51,51,51,1],width:2}),_y=new wc({font:"bold 16px Helvetica",fill:vy,stroke:xv,scale:.8}),xy=new xc({fill:vy,image:yy,text:_y,stroke:my,zIndex:0}),by=[xy]),i.dataProjection=bt("EPSG:4326"),i.defaultStyle_=n.defaultStyle?n.defaultStyle:by,i.extractStyles_=void 0===n.extractStyles||n.extractStyles,i.writeStyles_=void 0===n.writeStyles||n.writeStyles,i.sharedStyles_={},i.showPointNames_=void 0===n.showPointNames||n.showPointNames,i.crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:"anonymous",i}return ay(e,t),e.prototype.readDocumentOrFolder_=function(t,e){return pn([],un(ly,{Document:tn(this.readDocumentOrFolder_,this),Folder:tn(this.readDocumentOrFolder_,this),Placemark:en(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),t,e,this)||void 0},e.prototype.readPlacemark_=function(t,e){var i=pn({geometry:null},uy,t,e,this);if(i){var n=new La,r=t.getAttribute("id");null!==r&&n.setId(r);var o=i.geometry;if(o&&ur(o,!1,e[0]),n.setGeometry(o),delete i.geometry,this.extractStyles_){var a=function(t,e,i,n,r){return function(o,a){var s=r,l="",h=[];if(s){var u=o.getGeometry();if(u){var c=u.getType();s=c===Xa.GEOMETRY_COLLECTION?(h=u.getGeometriesArrayRecursive().filter(function(t){var e=t.getType();return e===Xa.POINT||e===Xa.MULTI_POINT})).length>0:c===Xa.POINT||c===Xa.MULTI_POINT}}s&&(l=o.get("name"),(s=s&&!!l)&&l.search(/&[^&]+;/)>-1&&(bv||(bv=document.createElement("textarea")),bv.innerHTML=l,l=bv.value));var p=i;if(t?p=t:e&&(p=function t(e,i,n){return Array.isArray(e)?e:"string"==typeof e?(!(e in n)&&"#"+e in n&&(e="#"+e),t(n[e],i,n)):i}(e,i,n)),s){var d=function(t,e){var i=[0,0],n="start",r=t.getImage();if(r){var o=r.getImageSize();if(null===o&&(o=vv),2==o.length){var a=r.getScale();i[0]=a*o[0]/2,i[1]=-a*o[1]/2,n="left"}}var s=t.getText();return s?((s=s.clone()).setFont(s.getFont()||_y.getFont()),s.setScale(s.getScale()||_y.getScale()),s.setFill(s.getFill()||_y.getFill()),s.setStroke(s.getStroke()||xv)):s=_y.clone(),s.setText(e),s.setOffsetX(i[0]),s.setOffsetY(i[1]),s.setTextAlign(n),new xc({image:r,text:s})}(p[0],l);return h.length>0?(d.setGeometry(new zg(h)),[d,new xc({geometry:p[0].getGeometry(),image:null,fill:p[0].getFill(),stroke:p[0].getStroke(),text:null})].concat(p.slice(1))):d}return p}}(i.Style,i.styleUrl,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);n.setStyle(a)}return delete i.Style,n.setProperties(i,!0),n}},e.prototype.readSharedStyle_=function(t,e){var i=t.getAttribute("id");if(null!==i){var n=eo.call(this,t,e);if(n){var r=void 0,o=t.baseURI;o&&"about:blank"!=o||(o=window.location.href),r=o?new URL("#"+i,o).href:"#"+i,this.sharedStyles_[r]=n}}},e.prototype.readSharedStyleMap_=function(t,e){var i=t.getAttribute("id");if(null!==i){var n=Vr.call(this,t,e);if(n){var r,o=t.baseURI;o&&"about:blank"!=o||(o=window.location.href),r=o?new URL("#"+i,o).href:"#"+i,this.sharedStyles_[r]=n}}},e.prototype.readFeatureFromNode=function(t,e){return c(ly,t.namespaceURI)?this.readPlacemark_(t,[this.getReadOptions(t,e)])||null:null},e.prototype.readFeaturesFromNode=function(t,e){if(!c(ly,t.namespaceURI))return[];var i,n=t.localName;if("Document"==n||"Folder"==n)return(i=this.readDocumentOrFolder_(t,[this.getReadOptions(t,e)]))||[];if("Placemark"==n){var r=this.readPlacemark_(t,[this.getReadOptions(t,e)]);return r?[r]:[]}if("kml"==n){i=[];for(var o=t.firstElementChild;o;o=o.nextElementSibling){var a=this.readFeaturesFromNode(o,e);a&&f(i,a)}return i}return[]},e.prototype.readName=function(t){if(t){if("string"==typeof t){var e=Qi(t);return this.readNameFromDocument(e)}return $i(t)?this.readNameFromDocument(t):this.readNameFromNode(t)}},e.prototype.readNameFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE){var i=this.readNameFromNode(e);if(i)return i}},e.prototype.readNameFromNode=function(t){for(var e=t.firstElementChild;e;e=e.nextElementSibling)if(c(ly,e.namespaceURI)&&"name"==e.localName)return Cr(e);for(e=t.firstElementChild;e;e=e.nextElementSibling){var i=e.localName;if(c(ly,e.namespaceURI)&&("Document"==i||"Folder"==i||"Placemark"==i||"kml"==i)){var n=this.readNameFromNode(e);if(n)return n}}},e.prototype.readNetworkLinks=function(t){var e=[];if("string"==typeof t){var i=Qi(t);f(e,this.readNetworkLinksFromDocument(i))}else $i(t)?f(e,this.readNetworkLinksFromDocument(t)):f(e,this.readNetworkLinksFromNode(t));return e},e.prototype.readNetworkLinksFromDocument=function(t){for(var e=[],i=t.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&f(e,this.readNetworkLinksFromNode(i));return e},e.prototype.readNetworkLinksFromNode=function(t){for(var e=[],i=t.firstElementChild;i;i=i.nextElementSibling)if(c(ly,i.namespaceURI)&&"NetworkLink"==i.localName){var n=pn({},cy,i,[]);e.push(n)}for(i=t.firstElementChild;i;i=i.nextElementSibling){var r=i.localName;!c(ly,i.namespaceURI)||"Document"!=r&&"Folder"!=r&&"kml"!=r||f(e,this.readNetworkLinksFromNode(i))}return e},e.prototype.readRegion=function(t){var e=[];if("string"==typeof t){var i=Qi(t);f(e,this.readRegionFromDocument(i))}else $i(t)?f(e,this.readRegionFromDocument(t)):f(e,this.readRegionFromNode(t));return e},e.prototype.readRegionFromDocument=function(t){for(var e=[],i=t.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&f(e,this.readRegionFromNode(i));return e},e.prototype.readRegionFromNode=function(t){for(var e=[],i=t.firstElementChild;i;i=i.nextElementSibling)if(c(ly,i.namespaceURI)&&"Region"==i.localName){var n=pn({},dy,i,[]);e.push(n)}for(i=t.firstElementChild;i;i=i.nextElementSibling){var r=i.localName;!c(ly,i.namespaceURI)||"Document"!=r&&"Folder"!=r&&"kml"!=r||f(e,this.readRegionFromNode(i))}return e},e.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var i=Ki(ly[4],"kml"),n="http://www.w3.org/2000/xmlns/";i.setAttributeNS(n,"xmlns:gx",sy[0]),i.setAttributeNS(n,"xmlns:xsi",Fu),i.setAttributeNS(Fu,"xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");var r={node:i},o={};t.length>1?o.Document=t:1==t.length&&(o.Placemark=t[0]);var a=fy[i.namespaceURI],s=hn(o,a);return fn(r,gy,ku,s,[e],a,this),i},e}(Zg),Sy=un(ly,{Pair:function(t,e){var i=pn({},Gy,t,e,this);if(i){var n=i.key;if(n&&"normal"==n){var r=i.styleUrl;r&&(e[e.length-1]=r);var o=i.Style;o&&(e[e.length-1]=o)}}}}),Cy=un(ly,{Icon:on(function(t,e){return pn({},Ay,t,e)||null}),color:on(Yr),heading:on(xr),hotSpot:on(function(t){var e,i=t.getAttribute("xunits"),n=t.getAttribute("yunits");return e="insetPixels"!==i?"insetPixels"!==n?pc:fc:"insetPixels"!==n?dc:"top-right",{x:parseFloat(t.getAttribute("x")),xunits:hy[i],y:parseFloat(t.getAttribute("y")),yunits:hy[n],origin:e}}),scale:on(Ur)}),Ey=un(ly,{color:on(Yr),scale:on(Ur)}),Ty=un(ly,{color:on(Yr),width:on(xr)}),Py=un(ly,{color:on(Yr),fill:on(yr),outline:on(yr)}),Ly=un(ly,{coordinates:nn(Xr)}),Iy=un(sy,{Track:en(qr)}),Oy=un(ly,{when:function(t,e){var i=e[e.length-1].whens,n=Ji(t,!1),r=Date.parse(n);i.push(isNaN(r)?0:r)}},un(sy,{coord:function(t,e){var i=e[e.length-1].flatCoordinates,n=Ji(t,!1),r=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(n);if(r){var o=parseFloat(r[1]),a=parseFloat(r[2]),s=parseFloat(r[3]);i.push(o,a,s,0)}else i.push(0,0,0,0)}})),Ay=un(ly,{href:on(Wr)},un(sy,{x:on(xr),y:on(xr),w:on(xr),h:on(xr)})),Ry=un(ly,{coordinates:nn(Xr)}),My=un(ly,{extrude:on(yr),tessellate:on(yr),altitudeMode:on(Cr)}),Fy=un(ly,{LineString:en(Kr),LinearRing:en(Jr),MultiGeometry:en($r),Point:en(Qr),Polygon:en(to)}),ky=un(ly,{innerBoundaryIs:function(t,e){var i=pn(void 0,Xy,t,e);i&&e[e.length-1].push(i)},outerBoundaryIs:function(t,e){var i=pn(void 0,Wy,t,e);i&&(e[e.length-1][0]=i)}}),Ny=un(ly,{IconStyle:function(t,e){var i=pn({},Cy,t,e);if(i){var n,r,o,a,s=e[e.length-1],l="Icon"in i?i.Icon:{},h=!("Icon"in i)||Object.keys(l).length>0,u=l.href;u?n=u:h&&(n=yv);var c,p=pc,d=i.hotSpot;d?(r=[d.x,d.y],o=d.xunits,a=d.yunits,p=d.origin):n===yv?(r=dv,o=fv,a=gv):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(n)&&(r=[.5,0],o=rc,a=rc);var f,g=l.x,v=l.y;void 0!==g&&void 0!==v&&(c=[g,v]);var y,m=l.w,_=l.h;void 0!==m&&void 0!==_&&(f=[m,_]);var x=i.heading;void 0!==x&&(y=ht(x));var b=i.scale;if(h){n==yv&&(f=vv,void 0===b&&(b=mv));var w=new vc({anchor:r,anchorOrigin:p,anchorXUnits:o,anchorYUnits:a,crossOrigin:this.crossOrigin_,offset:c,offsetOrigin:pc,rotation:y,scale:b,size:f,src:n,color:i.color});s.imageStyle=w}else s.imageStyle=_v}},LabelStyle:function(t,e){var i=pn({},Ey,t,e);if(i){var n=e[e.length-1],r=new wc({fill:new nc({color:"color"in i?i.color:pv}),scale:i.scale});n.textStyle=r}},LineStyle:function(t,e){var i=pn({},Ty,t,e);if(i){var n=e[e.length-1],r=new yc({color:"color"in i?i.color:pv,width:"width"in i?i.width:1});n.strokeStyle=r}},PolyStyle:function(t,e){var i=pn({},Py,t,e);if(i){var n=e[e.length-1],r=new nc({color:"color"in i?i.color:pv});n.fillStyle=r;var o=i.fill;void 0!==o&&(n.fill=o);var a=i.outline;void 0!==a&&(n.outline=a)}}}),Dy=un(ly,{displayName:on(Cr),value:on(Cr)}),jy=un(ly,{Data:function(t,e){var i=t.getAttribute("name");cn(Dy,t,e);var n=e[e.length-1];i&&n.displayName?n[i]={value:n.value,displayName:n.displayName,toString:function(){return n.value}}:null!==i?n[i]=n.value:null!==n.displayName&&(n[n.displayName]=n.value),delete n.value},SchemaData:function(t,e){cn(zy,t,e)}}),Gy=un(ly,{Style:on(eo),key:on(Cr),styleUrl:on(Wr)}),zy=un(ly,{SimpleData:function(t,e){var i=t.getAttribute("name");if(null!==i){var n=Cr(t);e[e.length-1][i]=n}}}),By=un(ly,{altitudeMode:on(Cr),minAltitude:on(xr),maxAltitude:on(xr),north:on(xr),south:on(xr),east:on(xr),west:on(xr)}),Yy=un(ly,{minLodPixels:on(xr),maxLodPixels:on(xr),minFadeExtent:on(xr),maxFadeExtent:on(xr)}),Xy=un(ly,{LinearRing:nn(Hr)}),Wy=un(ly,{LinearRing:nn(Hr)}),Uy=un(ly,{Data:an(function(t,e,i){t.setAttribute("name",e.name);var n={node:t},r=e.value;"object"==typeof r?(null!==r&&r.displayName&&fn(n,Uy,ku,[r.displayName],i,["displayName"]),null!==r&&r.value&&fn(n,Uy,ku,[r.value],i,["value"])):fn(n,Uy,ku,[r],i,["value"])}),value:an(function(t,e){Lr(t,e)}),displayName:an(function(t,e){!function(e,i){t.appendChild(gn().createCDATASection(i))}(0,e)})}),Vy=un(ly,{Placemark:an(lo)}),Hy=function(t,e,i){return Ki(e[e.length-1].node.namespaceURI,"Placemark")},qy=ln("Data"),Zy=un(ly,["href"],un(sy,["x","y","w","h"])),Ky=un(ly,{href:an(Lr)},un(sy,{x:an(Tr),y:an(Tr),w:an(Tr),h:an(Tr)})),Jy=function(t,e,i){return Ki(sy[0],"gx:"+i)},$y=un(ly,["scale","heading","Icon","color","hotSpot"]),Qy=un(ly,{Icon:an(function(t,e,i){var n={node:t},r=Zy[i[i.length-1].node.namespaceURI],o=hn(e,r);fn(n,Ky,ku,o,i,r),o=hn(e,r=Zy[sy[0]]),fn(n,Ky,Jy,o,i,r)}),color:an(oo),heading:an(Tr),hotSpot:an(function(t,e){t.setAttribute("x",String(e.x)),t.setAttribute("y",String(e.y)),t.setAttribute("xunits",e.xunits),t.setAttribute("yunits",e.yunits)}),scale:an(co)}),tm=un(ly,["color","scale"]),em=un(ly,{color:an(oo),scale:an(co)}),im=un(ly,["color","width"]),nm=un(ly,{color:an(oo),width:an(Tr)}),rm={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},om=function(t,e,i){if(t)return Ki(e[e.length-1].node.namespaceURI,rm[t.getType()])},am=ln("Point"),sm=ln("LineString"),lm=ln("LinearRing"),hm=ln("Polygon"),um=un(ly,{LineString:an(ho),Point:an(ho),Polygon:an(uo),GeometryCollection:an(ao)}),cm=un(ly,{LinearRing:an(ho)}),pm=un(ly,{ExtendedData:an(function(t,e,i){for(var n={node:t},r=e.names,o=e.values,a=r.length,s=0;s<a;s++)fn(n,Uy,qy,[{name:r[s],value:o[s]}],i)}),MultiGeometry:an(ao),LineString:an(ho),LinearRing:an(ho),Point:an(ho),Polygon:an(uo),Style:an(function(t,e,i){var n={node:t},r={};if(e.pointStyles.length){var o=e.pointStyles[0].getText();o&&(r.LabelStyle=o);var a=e.pointStyles[0].getImage();a&&"function"==typeof a.getSrc&&(r.IconStyle=a)}if(e.lineStyles.length&&(s=e.lineStyles[0].getStroke())&&(r.LineStyle=s),e.polyStyles.length){var s;(s=e.polyStyles[0].getStroke())&&!r.LineStyle&&(r.LineStyle=s),r.PolyStyle=e.polyStyles[0]}var l=wm[i[i.length-1].node.namespaceURI],h=hn(r,l);fn(n,Sm,ku,h,i,l)}),address:an(Lr),description:an(Lr),name:an(Lr),open:an(Er),phoneNumber:an(Lr),styleUrl:an(Lr),visibility:an(Er)}),dm=un(ly,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),fm=ln("ExtendedData"),gm=un(ly,["extrude","tessellate","altitudeMode","coordinates"]),vm=un(ly,{extrude:an(Er),tessellate:an(Er),altitudeMode:an(Lr),coordinates:an(function(t,e,i){var n,r=i[i.length-1],o=r.layout,a=r.stride;o==Ga||o==Ba?n=2:o==za||o==Ya?n=3:S(!1,34);var s=e.length,l="";if(s>0){l+=e[0];for(var h=1;h<n;++h)l+=","+e[h];for(var u=a;u<s;u+=a)for(l+=" "+e[u],h=1;h<n;++h)l+=","+e[u+h]}Lr(t,l)})}),ym=un(ly,["color","fill","outline"]),mm=un(ly,{outerBoundaryIs:an(so),innerBoundaryIs:an(so)}),_m=ln("innerBoundaryIs"),xm=ln("outerBoundaryIs"),bm=un(ly,{color:an(oo),fill:an(Er),outline:an(Er)}),wm=un(ly,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),Sm=un(ly,{IconStyle:an(function(t,e,i){var n={node:t},r={},o=e.getSrc(),a=e.getSize(),s=e.getImageSize(),l={href:o};if(a){l.w=a[0],l.h=a[1];var h=e.getAnchor(),u=e.getOrigin();u&&s&&0!==u[0]&&u[1]!==a[1]&&(l.x=u[0],l.y=s[1]-(u[1]+a[1])),!h||h[0]===a[0]/2&&h[1]===a[1]/2||(r.hotSpot={x:h[0],xunits:oc,y:a[1]-h[1],yunits:oc})}r.Icon=l;var c=e.getScale();1!==c&&(r.scale=c);var p=e.getRotation();0!==p&&(r.heading=p);var d=e.getColor();d&&(r.color=d);var f=$y[i[i.length-1].node.namespaceURI],g=hn(r,f);fn(n,Qy,ku,g,i,f)}),LabelStyle:an(function(t,e,i){var n={node:t},r={},o=e.getFill();o&&(r.color=o.getColor());var a=e.getScale();a&&1!==a&&(r.scale=a);var s=tm[i[i.length-1].node.namespaceURI],l=hn(r,s);fn(n,em,ku,l,i,s)}),LineStyle:an(function(t,e,i){var n={node:t},r={color:e.getColor(),width:Number(e.getWidth())||1},o=im[i[i.length-1].node.namespaceURI],a=hn(r,o);fn(n,nm,ku,a,i,o)}),PolyStyle:an(function(t,e,i){var n={node:t},r=e.getFill(),o=e.getStroke(),a={color:r?r.getColor():void 0,fill:!!r&&void 0,outline:!!o&&void 0},s=ym[i[i.length-1].node.namespaceURI],l=hn(a,s);fn(n,bm,ku,l,i,s)})}),Cm=wy,Em=i(2),Tm=i.n(Em),Pm=[1,0,0,1,0,0],Lm=function(){function t(t,e,i,n,r){this.id_=r,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i,this.properties_=n}return t.prototype.get=function(t){return this.properties_[t]},t.prototype.getExtent=function(){return this.extent_||(this.extent_=this.type_===Xa.POINT?F(this.flatCoordinates_):k(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_},t.prototype.getFlatInteriorPoint=function(){if(!this.flatInteriorPoints_){var t=W(this.getExtent());this.flatInteriorPoints_=pe(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_},t.prototype.getFlatInteriorPoints=function(){if(!this.flatInteriorPoints_){var t=er(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=de(this.flatCoordinates_,0,this.ends_,2,t)}return this.flatInteriorPoints_},t.prototype.getFlatMidpoint=function(){return this.flatMidpoints_||(this.flatMidpoints_=Kn(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_},t.prototype.getFlatMidpoints=function(){if(!this.flatMidpoints_){this.flatMidpoints_=[];for(var t=this.flatCoordinates_,e=0,i=this.ends_,n=0,r=i.length;n<r;++n){var o=i[n],a=Kn(t,e,o,2,.5);f(this.flatMidpoints_,a),e=o}}return this.flatMidpoints_},t.prototype.getId=function(){return this.id_},t.prototype.getOrientedFlatCoordinates=function(){return this.flatCoordinates_},t.prototype.getGeometry=function(){return this},t.prototype.getSimplifiedGeometry=function(t){return this},t.prototype.simplifyTransformed=function(t,e){return this},t.prototype.getProperties=function(){return this.properties_},t.prototype.getStride=function(){return 2},t.prototype.getStyleFunction=function(){},t.prototype.getType=function(){return this.type_},t.prototype.transform=function(t,e){var i=(t=bt(t)).getExtent(),n=t.getWorldExtent(),r=V(n)/V(i);Yt(Pm,n[0],n[3],r,-r,0,0,0),it(this.flatCoordinates_,0,this.flatCoordinates_.length,2,Pm,this.flatCoordinates_)},t}();Lm.prototype.getEnds=function(){return this.ends_},Lm.prototype.getEndss=Lm.prototype.getEnds,Lm.prototype.getFlatCoordinates=Lm.prototype.getOrientedFlatCoordinates;var Im=Lm,Om=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Am=function(t){function e(e){var i=t.call(this)||this,n=e||{};return i.dataProjection=new Ja({code:"",units:Ka.TILE_PIXELS}),i.featureClass_=n.featureClass?n.featureClass:Im,i.geometryName_=n.geometryName,i.layerName_=n.layerName?n.layerName:"layer",i.layers_=n.layers?n.layers:null,i.idProperty_=n.idProperty,i}return Om(e,t),e.prototype.readRawGeometry_=function(t,e,i,n){t.pos=e.geometry;for(var r=t.readVarint()+t.pos,o=1,a=0,s=0,l=0,h=0,u=0;t.pos<r;){if(!a){var c=t.readVarint();o=7&c,a=c>>3}a--,1===o||2===o?(s+=t.readSVarint(),l+=t.readSVarint(),1===o&&h>u&&(n.push(h),u=h),i.push(s,l),h+=2):7===o?h>u&&(i.push(i[u],i[u+1]),h+=2):S(!1,59)}h>u&&(n.push(h),u=h)},e.prototype.createFeature_=function(t,e,i){var n,r=e.type;if(0===r)return null;var o,a=e.properties;this.idProperty_?(o=a[this.idProperty_],delete a[this.idProperty_]):o=e.id,a[this.layerName_]=e.layer.name;var s=[],l=[];this.readRawGeometry_(t,e,s,l);var h=function(t,e){var i;return 1===r?i=1===e?Xa.POINT:Xa.MULTI_POINT:2===r?i=1===e?Xa.LINE_STRING:Xa.MULTI_LINE_STRING:3===r&&(i=Xa.POLYGON),i}(0,l.length);if(this.featureClass_===Im)(n=new this.featureClass_(h,s,l,a,o)).transform(i.dataProjection,i.featureProjection);else{var u=void 0;if(h==Xa.POLYGON){for(var c=[],p=0,d=0,f=0,g=l.length;f<g;++f){var v=l[f];me(s,p,v,2)||(c.push(l.slice(d,f)),d=f),p=v}u=c.length>1?new cg(s,Ga,c):new Ts(s,Ga,l)}else u=h===Xa.POINT?new Ss(s,Ga):h===Xa.LINE_STRING?new zf(s,Ga):h===Xa.POLYGON?new Ts(s,Ga,l):h===Xa.MULTI_POINT?new hg(s,Ga):h===Xa.MULTI_LINE_STRING?new sg(s,Ga,l):null;n=new(0,this.featureClass_),this.geometryName_&&n.setGeometryName(this.geometryName_);var y=ur(u,!1,i);n.setGeometry(y),n.setId(o),n.setProperties(a,!0)}return n},e.prototype.getType=function(){return Cu},e.prototype.readFeatures=function(t,e){var i=this.layers_,n=this.adaptOptions(e),r=bt(n.dataProjection);r.setWorldExtent(n.extent),n.dataProjection=r;var o=new Tm.a(t),a=o.readFields(po,{}),s=[];for(var l in a)if(!i||-1!=i.indexOf(l)){var h=a[l];r.setExtent(h?[0,0,h.extent,h.extent]:null);for(var u=0,c=h.length;u<c;++u){var p=vo(o,h,u);s.push(this.createFeature_(o,p,n))}}return s},e.prototype.readProjection=function(t){return this.dataProjection},e.prototype.setLayers=function(t){this.layers_=t},e}(Bg),Rm=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Mm=[null],Fm=un(Mm,{nd:function(t,e){e[e.length-1].ndrefs.push(t.getAttribute("ref"))},tag:yo}),km=un(Mm,{node:function(t,e){var i=e[0],n=e[e.length-1],r=t.getAttribute("id"),o=[parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))];n.nodes[r]=o;var s=pn({tags:{}},Dm,t,e);if(!a(s.tags)){var l=new Ss(o);ur(l,!1,i);var h=new La(l);h.setId(r),h.setProperties(s.tags,!0),n.features.push(h)}},way:function(t,e){var i=pn({id:t.getAttribute("id"),ndrefs:[],tags:{}},Fm,t,e);e[e.length-1].ways.push(i)}}),Nm=function(t){function e(){var e=t.call(this)||this;return e.dataProjection=bt("EPSG:4326"),e}return Rm(e,t),e.prototype.readFeaturesFromNode=function(t,e){var i=this.getReadOptions(t,e);if("osm"==t.localName){for(var n=pn({nodes:{},ways:[],features:[]},km,t,[i]),r=0;r<n.ways.length;r++){for(var o=n.ways[r],a=[],s=0,l=o.ndrefs.length;s<l;s++)f(a,n.nodes[o.ndrefs[s]]);var h=void 0;ur(h=o.ndrefs[0]==o.ndrefs[o.ndrefs.length-1]?new Ts(a,Ga,[a.length]):new zf(a,Ga),!1,i);var u=new La(h);u.setId(o.id),u.setProperties(o.tags,!0),n.features.push(u)}if(n.features)return n.features}return[]},e}(Zg),Dm=un(Mm,{tag:yo}),jm=Nm,Gm=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),zm=function(t){function e(e){var i=t.call(this)||this,n=e||{};return i.dataProjection=bt("EPSG:4326"),i.factor_=n.factor?n.factor:1e5,i.geometryLayout_=n.geometryLayout?n.geometryLayout:Ga,i}return Gm(e,t),e.prototype.readFeatureFromText=function(t,e){var i=this.readGeometryFromText(t,e);return new La(i)},e.prototype.readFeaturesFromText=function(t,e){return[this.readFeatureFromText(t,e)]},e.prototype.readGeometryFromText=function(t,e){var i=Ut(this.geometryLayout_),n=xo(t,i,this.factor_);mo(n,0,n.length,i,n);var r=ie(n,0,n.length,i);return ur(new zf(r,this.geometryLayout_),!1,this.adaptOptions(e))},e.prototype.writeFeatureText=function(t,e){var i=t.getGeometry();return i?this.writeGeometryText(i,e):(S(!1,40),"")},e.prototype.writeFeaturesText=function(t,e){return this.writeFeatureText(t[0],e)},e.prototype.writeGeometryText=function(t,e){var i=(t=ur(t,!0,this.adaptOptions(e))).getFlatCoordinates(),n=t.getStride();return mo(i,0,i.length,n,i),_o(i,n,this.factor_)},e}($v),Bm=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ym={Point:function(t,e,i){var n=t.coordinates;return e&&i&&Eo(n,e,i),new Ss(n)},LineString:function(t,e){var i=So(t.arcs,e);return new zf(i)},Polygon:function(t,e){for(var i=[],n=0,r=t.arcs.length;n<r;++n)i[n]=So(t.arcs[n],e);return new Ts(i)},MultiPoint:function(t,e,i){var n=t.coordinates;if(e&&i)for(var r=0,o=n.length;r<o;++r)Eo(n[r],e,i);return new hg(n)},MultiLineString:function(t,e){for(var i=[],n=0,r=t.arcs.length;n<r;++n)i[n]=So(t.arcs[n],e);return new sg(i)},MultiPolygon:function(t,e){for(var i=[],n=0,r=t.arcs.length;n<r;++n){for(var o=t.arcs[n],a=[],s=0,l=o.length;s<l;++s)a[s]=So(o[s],e);i[n]=a}return new cg(i)}},Xm=function(t){function e(e){var i=t.call(this)||this,n=e||{};return i.layerName_=n.layerName,i.layers_=n.layers?n.layers:null,i.dataProjection=bt(n.dataProjection?n.dataProjection:"EPSG:4326"),i}return Bm(e,t),e.prototype.readFeaturesFromObject=function(t,e){if("Topology"==t.type){var i=t,n=void 0,r=null,o=null;i.transform&&(r=(n=i.transform).scale,o=n.translate);var a=i.arcs;n&&function(t,e,i){for(var n=0,r=t.length;n<r;++n)!function(t,e,i){for(var n=0,r=0,o=0,a=t.length;o<a;++o){var s=t[o];r+=s[1],s[0]=n+=s[0],s[1]=r,Eo(s,e,i)}}(t[n],e,i)}(a,r,o);var s=[],l=i.objects,h=this.layerName_,u=void 0;for(var c in l)this.layers_&&-1==this.layers_.indexOf(c)||("GeometryCollection"===l[c].type?(u=l[c],s.push.apply(s,function(t,e,i,n,r,o,a){for(var s=u.geometries,l=[],h=0,c=s.length;h<c;++h)l[h]=Co(s[h],e,i,n,r,o,a);return l}(0,a,r,o,h,c,e))):(u=l[c],s.push(Co(u,a,r,o,h,c,e))));return s}return[]},e.prototype.readProjectionFromObject=function(t){return this.dataProjection},e}(Xg),Wm=function(){function t(t){this.tagName_=t}return t.prototype.getTagName=function(){return this.tagName_},t}(),Um=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Vm=function(t){function e(e,i){var n=t.call(this,e)||this;return n.conditions=i,S(n.conditions.length>=2,57),n}return Um(e,t),e}(Wm),Hm=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),qm=function(t){function e(e){return t.call(this,"And",Array.prototype.slice.call(arguments))||this}return Hm(e,t),e}(Vm),Zm=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Km=function(t){function e(e,i,n){var r=t.call(this,"BBOX")||this;if(r.geometryName=e,r.extent=i,4!==i.length)throw new Error("Expected an extent with four values ([minX, minY, maxX, maxY])");return r.srsName=n,r}return Zm(e,t),e}(Wm),Jm=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),$m=function(t){function e(e,i,n,r){var o=t.call(this,e)||this;return o.geometryName=i||"the_geom",o.geometry=n,o.srsName=r,o}return Jm(e,t),e}(Wm),Qm=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),t_=function(t){function e(e,i,n){return t.call(this,"Contains",e,i,n)||this}return Qm(e,t),e}($m),e_=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),i_=function(t){function e(e,i){var n=t.call(this,e)||this;return n.propertyName=i,n}return e_(e,t),e}(Wm),n_=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),r_=function(t){function e(e,i,n){var r=t.call(this,"During",e)||this;return r.begin=i,r.end=n,r}return n_(e,t),e}(i_),o_=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),a_=function(t){function e(e,i,n,r){var o=t.call(this,e,i)||this;return o.expression=n,o.matchCase=r,o}return o_(e,t),e}(i_),s_=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),l_=function(t){function e(e,i,n){return t.call(this,"PropertyIsEqualTo",e,i,n)||this}return s_(e,t),e}(a_),h_=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),u_=function(t){function e(e,i){return t.call(this,"PropertyIsGreaterThan",e,i)||this}return h_(e,t),e}(a_),c_=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),p_=function(t){function e(e,i){return t.call(this,"PropertyIsGreaterThanOrEqualTo",e,i)||this}return c_(e,t),e}(a_),d_=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),f_=function(t){function e(e,i,n){return t.call(this,"Intersects",e,i,n)||this}return d_(e,t),e}($m),g_=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),v_=function(t){function e(e,i,n){var r=t.call(this,"PropertyIsBetween",e)||this;return r.lowerBoundary=i,r.upperBoundary=n,r}return g_(e,t),e}(i_),y_=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),m_=function(t){function e(e,i,n,r,o,a){var s=t.call(this,"PropertyIsLike",e)||this;return s.pattern=i,s.wildCard=void 0!==n?n:"*",s.singleChar=void 0!==r?r:".",s.escapeChar=void 0!==o?o:"!",s.matchCase=a,s}return y_(e,t),e}(i_),__=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),x_=function(t){function e(e){return t.call(this,"PropertyIsNull",e)||this}return __(e,t),e}(i_),b_=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),w_=function(t){function e(e,i){return t.call(this,"PropertyIsLessThan",e,i)||this}return b_(e,t),e}(a_),S_=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),C_=function(t){function e(e,i){return t.call(this,"PropertyIsLessThanOrEqualTo",e,i)||this}return S_(e,t),e}(a_),E_=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),T_=function(t){function e(e){var i=t.call(this,"Not")||this;return i.condition=e,i}return E_(e,t),e}(Wm),P_=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),L_=function(t){function e(e,i,n){return t.call(this,"PropertyIsNotEqualTo",e,i,n)||this}return P_(e,t),e}(a_),I_=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),O_=function(t){function e(e){return t.call(this,"Or",Array.prototype.slice.call(arguments))||this}return I_(e,t),e}(Vm),A_=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),R_=function(t){function e(e,i,n){return t.call(this,"Within",e,i,n)||this}return A_(e,t),e}($m),M_=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),F_={"http://www.opengis.net/gml":{boundedBy:on(tv.prototype.readGeometryElement,"bounds")}},k_={"http://www.opengis.net/wfs":{totalInserted:on(wr),totalUpdated:on(wr),totalDeleted:on(wr)}},N_={"http://www.opengis.net/wfs":{TransactionSummary:on(function(t,e){return pn({},k_,t,e)},"transactionSummary"),InsertResults:on(function(t,e){return pn([],U_,t,e)},"insertIds")}},D_={"http://www.opengis.net/wfs":{PropertyName:an(Lr)}},j_={"http://www.opengis.net/wfs":{Insert:an(function(t,e,i){var n=i[i.length-1],r=n.gmlVersion,o=Ki(n.featureNS,n.featureType);t.appendChild(o),2===r?hv.prototype.writeFeatureElement(o,e,i):rv.prototype.writeFeatureElement(o,e,i)}),Update:an(function(t,e,i){var n=i[i.length-1];S(void 0!==e.getId(),27);var r=n.featurePrefix,o=n.featureNS,a=Io(r,n.featureType),s=e.getGeometryName();t.setAttribute("typeName",a),t.setAttributeNS(G_,"xmlns:"+r,o);var l=e.getId();if(void 0!==l){for(var h=e.getKeys(),u=[],c=0,p=h.length;c<p;c++){var d=e.get(h[c]);if(void 0!==d){var f=h[c];d&&"function"==typeof d.getSimplifiedGeometry&&(f=s),u.push({name:f,value:d})}}fn({gmlVersion:n.gmlVersion,node:t,hasZ:n.hasZ,srsName:n.srsName},j_,ln("Property"),u,i),Lo(t,l)}}),Delete:an(function(t,e,i){var n=i[i.length-1];S(void 0!==e.getId(),26);var r=n.featurePrefix,o=n.featureNS,a=Io(r,n.featureType);t.setAttribute("typeName",a),t.setAttributeNS(G_,"xmlns:"+r,o);var s=e.getId();void 0!==s&&Lo(t,s)}),Property:an(function(t,e,i){var n=Ki(B_,"Name"),r=i[i.length-1].gmlVersion;if(t.appendChild(n),Lr(n,e.name),void 0!==e.value&&null!==e.value){var o=Ki(B_,"Value");t.appendChild(o),e.value&&"function"==typeof e.value.getSimplifiedGeometry?2===r?hv.prototype.writeGeometryElement(o,e.value,i):rv.prototype.writeGeometryElement(o,e.value,i):Lr(o,e.value)}}),Native:an(function(t,e,i){e.vendorId&&t.setAttribute("vendorId",e.vendorId),void 0!==e.safeToIgnore&&t.setAttribute("safeToIgnore",String(e.safeToIgnore)),void 0!==e.value&&Lr(t,e.value)})}},G_="http://www.w3.org/2000/xmlns/",z_="http://www.opengis.net/ogc",B_="http://www.opengis.net/wfs",Y_={"1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},X_=function(t){function e(e){var i=t.call(this)||this,n=e||{};return i.featureType_=n.featureType,i.featureNS_=n.featureNS,i.gmlFormat_=n.gmlFormat?n.gmlFormat:new rv,i.schemaLocation_=n.schemaLocation?n.schemaLocation:Y_["1.1.0"],i}return M_(e,t),e.prototype.getFeatureType=function(){return this.featureType_},e.prototype.setFeatureType=function(t){this.featureType_=t},e.prototype.readFeaturesFromNode=function(t,e){var i={node:t};na(i,{featureType:this.featureType_,featureNS:this.featureNS_}),na(i,this.getReadOptions(t,e||{}));var n=[i];this.gmlFormat_.FEATURE_COLLECTION_PARSERS[Jg].featureMember=en(tv.prototype.readFeaturesInternal);var r=pn([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,t,n,this.gmlFormat_);return r||(r=[]),r},e.prototype.readTransactionResponse=function(t){if(t){if("string"==typeof t){var e=Qi(t);return this.readTransactionResponseFromDocument(e)}return $i(t)?this.readTransactionResponseFromDocument(t):this.readTransactionResponseFromNode(t)}},e.prototype.readFeatureCollectionMetadata=function(t){if(t){if("string"==typeof t){var e=Qi(t);return this.readFeatureCollectionMetadataFromDocument(e)}return $i(t)?this.readFeatureCollectionMetadataFromDocument(t):this.readFeatureCollectionMetadataFromNode(t)}},e.prototype.readFeatureCollectionMetadataFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(e)},e.prototype.readFeatureCollectionMetadataFromNode=function(t){var e={},i=Sr(t.getAttribute("numberOfFeatures"));return e.numberOfFeatures=i,pn(e,F_,t,[],this.gmlFormat_)},e.prototype.readTransactionResponseFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(e)},e.prototype.readTransactionResponseFromNode=function(t){return pn({},N_,t,[])},e.prototype.writeGetFeature=function(t){var e,i=Ki(B_,"GetFeature");if(i.setAttribute("service","WFS"),i.setAttribute("version","1.1.0"),t&&(t.handle&&i.setAttribute("handle",t.handle),t.outputFormat&&i.setAttribute("outputFormat",t.outputFormat),void 0!==t.maxFeatures&&i.setAttribute("maxFeatures",String(t.maxFeatures)),t.resultType&&i.setAttribute("resultType",t.resultType),void 0!==t.startIndex&&i.setAttribute("startIndex",String(t.startIndex)),void 0!==t.count&&i.setAttribute("count",String(t.count)),void 0!==t.viewParams&&i.setAttribute("viewParams",t.viewParams),e=t.filter,t.bbox)){S(t.geometryName,12);var n=Po(t.geometryName,t.bbox,t.srsName);e=e?To(e,n):n}i.setAttributeNS(Fu,"xsi:schemaLocation",this.schemaLocation_);var r={node:i};return na(r,{srsName:t.srsName,featureNS:t.featureNS?t.featureNS:this.featureNS_,featurePrefix:t.featurePrefix,geometryName:t.geometryName,filter:e,propertyNames:t.propertyNames?t.propertyNames:[]}),S(Array.isArray(t.featureTypes),11),function(t,e,i){var n=na({},i[i.length-1]);n.node=t,fn(n,V_,ln("Query"),e,i)}(i,t.featureTypes,[r]),i},e.prototype.writeTransaction=function(t,e,i,n){var r,o,a=[],s=Ki(B_,"Transaction"),l=n.version?n.version:"1.1.0",h="1.0.0"===l?2:3;s.setAttribute("service","WFS"),s.setAttribute("version",l),n&&(r=n.gmlOptions?n.gmlOptions:{},n.handle&&s.setAttribute("handle",n.handle)),s.setAttributeNS(Fu,"xsi:schemaLocation",Y_[l]);var u=n.featurePrefix?n.featurePrefix:"feature";return t&&(o=na({node:s},{featureNS:n.featureNS,featureType:n.featureType,featurePrefix:u,gmlVersion:h,hasZ:n.hasZ,srsName:n.srsName}),na(o,r),fn(o,j_,ln("Insert"),t,a)),e&&(o=na({node:s},{featureNS:n.featureNS,featureType:n.featureType,featurePrefix:u,gmlVersion:h,hasZ:n.hasZ,srsName:n.srsName}),na(o,r),fn(o,j_,ln("Update"),e,a)),i&&fn({node:s,featureNS:n.featureNS,featureType:n.featureType,featurePrefix:u,gmlVersion:h,srsName:n.srsName},j_,ln("Delete"),i,a),n.nativeElements&&fn({node:s,featureNS:n.featureNS,featureType:n.featureType,featurePrefix:u,gmlVersion:h,srsName:n.srsName},j_,ln("Native"),n.nativeElements,a),s},e.prototype.readProjectionFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(e);return null},e.prototype.readProjectionFromNode=function(t){if(t.firstElementChild&&t.firstElementChild.firstElementChild)for(var e=(t=t.firstElementChild.firstElementChild).firstElementChild;e;e=e.nextElementSibling)if(0!==e.childNodes.length&&(1!==e.childNodes.length||3!==e.firstChild.nodeType)){var i=[{}];return this.gmlFormat_.readGeometryElement(e,i),bt(i.pop().srsName)}return null},e}(Zg),W_={"http://www.opengis.net/ogc":{FeatureId:en(function(t,e){return t.getAttribute("fid")})}},U_={"http://www.opengis.net/wfs":{Feature:function(t,e){cn(W_,t,e)}}},V_={"http://www.opengis.net/wfs":{Query:an(function(t,e,i){var n,r=i[i.length-1],o=r.featurePrefix,a=r.featureNS,s=r.propertyNames,l=r.srsName;n=o?Io(o,e):e,t.setAttribute("typeName",n),l&&t.setAttribute("srsName",l),a&&t.setAttributeNS(G_,"xmlns:"+o,a);var h=na({},r);h.node=t,fn(h,D_,ln("PropertyName"),s,i);var u=r.filter;if(u){var c=Ki(z_,"Filter");t.appendChild(c),Oo(c,u,i)}})},"http://www.opengis.net/ogc":{During:an(function(t,e,i){var n=Ki("http://www.opengis.net/fes","ValueReference");Lr(n,e.propertyName),t.appendChild(n);var r=Ki(Jg,"TimePeriod");t.appendChild(r);var o=Ki(Jg,"begin");r.appendChild(o),No(o,e.begin);var a=Ki(Jg,"end");r.appendChild(a),No(a,e.end)}),And:an(Ao),Or:an(Ao),Not:an(function(t,e,i){var n=e.condition;fn({node:t},V_,ln(n.getTagName()),[n],i)}),BBOX:an(function(t,e,i){i[i.length-1].srsName=e.srsName,Fo(t,e.geometryName),rv.prototype.writeGeometryElement(t,e.extent,i)}),Contains:an(function(t,e,i){i[i.length-1].srsName=e.srsName,Fo(t,e.geometryName),rv.prototype.writeGeometryElement(t,e.geometry,i)}),Intersects:an(function(t,e,i){i[i.length-1].srsName=e.srsName,Fo(t,e.geometryName),rv.prototype.writeGeometryElement(t,e.geometry,i)}),Within:an(function(t,e,i){i[i.length-1].srsName=e.srsName,Fo(t,e.geometryName),rv.prototype.writeGeometryElement(t,e.geometry,i)}),PropertyIsEqualTo:an(Ro),PropertyIsNotEqualTo:an(Ro),PropertyIsLessThan:an(Ro),PropertyIsLessThanOrEqualTo:an(Ro),PropertyIsGreaterThan:an(Ro),PropertyIsGreaterThanOrEqualTo:an(Ro),PropertyIsNull:an(function(t,e,i){Fo(t,e.propertyName)}),PropertyIsBetween:an(function(t,e,i){Fo(t,e.propertyName);var n=Ki(z_,"LowerBoundary");t.appendChild(n),ko(n,""+e.lowerBoundary);var r=Ki(z_,"UpperBoundary");t.appendChild(r),ko(r,""+e.upperBoundary)}),PropertyIsLike:an(function(t,e,i){t.setAttribute("wildCard",e.wildCard),t.setAttribute("singleChar",e.singleChar),t.setAttribute("escapeChar",e.escapeChar),void 0!==e.matchCase&&t.setAttribute("matchCase",e.matchCase.toString()),Fo(t,e.propertyName),ko(t,""+e.pattern)})}},H_=X_,q_=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Z_={POINT:Ss,LINESTRING:zf,POLYGON:Ts,MULTIPOINT:hg,MULTILINESTRING:sg,MULTIPOLYGON:cg},K_={};for(var J_ in Xa)K_[J_]=Xa[J_].toUpperCase();var $_=function(){function t(t){this.wkt=t,this.index_=-1}return t.prototype.isAlpha_=function(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"},t.prototype.isNumeric_=function(t,e){return t>="0"&&t<="9"||"."==t&&!(void 0!==e&&e)},t.prototype.isWhiteSpace_=function(t){return" "==t||"\t"==t||"\r"==t||"\n"==t},t.prototype.nextChar_=function(){return this.wkt.charAt(++this.index_)},t.prototype.nextToken=function(){var t,e=this.nextChar_(),i=this.index_,n=e;if("("==e)t=2;else if(","==e)t=5;else if(")"==e)t=3;else if(this.isNumeric_(e)||"-"==e)t=4,n=this.readNumber_();else if(this.isAlpha_(e))t=1,n=this.readText_();else{if(this.isWhiteSpace_(e))return this.nextToken();if(""!==e)throw new Error("Unexpected character: "+e);t=6}return{position:i,value:n,type:t}},t.prototype.readNumber_=function(){var t,e=this.index_,i=!1,n=!1;do{"."==t?i=!0:"e"!=t&&"E"!=t||(n=!0),t=this.nextChar_()}while(this.isNumeric_(t,i)||!n&&("e"==t||"E"==t)||n&&("-"==t||"+"==t));return parseFloat(this.wkt.substring(e,this.index_--))},t.prototype.readText_=function(){var t,e=this.index_;do{t=this.nextChar_()}while(this.isAlpha_(t));return this.wkt.substring(e,this.index_--).toUpperCase()},t}(),Q_=function(){function t(t){this.lexer_=t,this.layout_=Ga}return t.prototype.consume_=function(){this.token_=this.lexer_.nextToken()},t.prototype.isTokenType=function(t){return this.token_.type==t},t.prototype.match=function(t){var e=this.isTokenType(t);return e&&this.consume_(),e},t.prototype.parse=function(){return this.consume_(),this.parseGeometry_()},t.prototype.parseGeometryLayout_=function(){var t=Ga,e=this.token_;if(this.isTokenType(1)){var i=e.value;"Z"===i?t=za:"M"===i?t=Ba:"ZM"===i&&(t=Ya),t!==Ga&&this.consume_()}return t},t.prototype.parseGeometryCollectionText_=function(){if(this.match(2)){var t=[];do{t.push(this.parseGeometry_())}while(this.match(5));if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parsePointText_=function(){if(this.match(2)){var t=this.parsePoint_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())},t.prototype.parseLineStringText_=function(){if(this.match(2)){var t=this.parsePointList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parsePolygonText_=function(){if(this.match(2)){var t=this.parseLineStringTextList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parseMultiPointText_=function(){if(this.match(2)){var t=void 0;if(t=2==this.token_.type?this.parsePointTextList_():this.parsePointList_(),this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parseMultiLineStringText_=function(){if(this.match(2)){var t=this.parseLineStringTextList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parseMultiPolygonText_=function(){if(this.match(2)){var t=this.parsePolygonTextList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parsePoint_=function(){for(var t=[],e=this.layout_.length,i=0;i<e;++i){var n=this.token_;if(!this.match(4))break;t.push(n.value)}if(t.length==e)return t;throw new Error(this.formatErrorMessage_())},t.prototype.parsePointList_=function(){for(var t=[this.parsePoint_()];this.match(5);)t.push(this.parsePoint_());return t},t.prototype.parsePointTextList_=function(){for(var t=[this.parsePointText_()];this.match(5);)t.push(this.parsePointText_());return t},t.prototype.parseLineStringTextList_=function(){for(var t=[this.parseLineStringText_()];this.match(5);)t.push(this.parseLineStringText_());return t},t.prototype.parsePolygonTextList_=function(){for(var t=[this.parsePolygonText_()];this.match(5);)t.push(this.parsePolygonText_());return t},t.prototype.isEmptyGeometry_=function(){var t=this.isTokenType(1)&&"EMPTY"==this.token_.value;return t&&this.consume_(),t},t.prototype.formatErrorMessage_=function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"},t.prototype.parseGeometry_=function(){var t=this.token_;if(this.match(1)){var e=t.value;if(this.layout_=this.parseGeometryLayout_(),"GEOMETRYCOLLECTION"==e){var i=this.parseGeometryCollectionText_();return new zg(i)}var n=Z_[e];if(!n)throw new Error("Invalid geometry type: "+e);var r=void 0;switch(e){case"POINT":r=this.parsePointText_();break;case"LINESTRING":r=this.parseLineStringText_();break;case"POLYGON":r=this.parsePolygonText_();break;case"MULTIPOINT":r=this.parseMultiPointText_();break;case"MULTILINESTRING":r=this.parseMultiLineStringText_();break;case"MULTIPOLYGON":r=this.parseMultiPolygonText_();break;default:throw new Error("Invalid geometry type: "+e)}return r||(r=n===Z_.POINT?[NaN,NaN]:[]),new n(r,this.layout_)}throw new Error(this.formatErrorMessage_())},t}(),tx={Point:Do,LineString:jo,Polygon:Go,MultiPoint:function(t){for(var e=[],i=t.getPoints(),n=0,r=i.length;n<r;++n)e.push("("+Do(i[n])+")");return e.join(",")},MultiLineString:function(t){for(var e=[],i=t.getLineStrings(),n=0,r=i.length;n<r;++n)e.push("("+jo(i[n])+")");return e.join(",")},MultiPolygon:function(t){for(var e=[],i=t.getPolygons(),n=0,r=i.length;n<r;++n)e.push("("+Go(i[n])+")");return e.join(",")},GeometryCollection:function(t){for(var e=[],i=t.getGeometries(),n=0,r=i.length;n<r;++n)e.push(zo(i[n]));return e.join(",")}},ex=function(t){function e(e){var i=t.call(this)||this,n=e||{};return i.splitCollection_=void 0!==n.splitCollection&&n.splitCollection,i}return q_(e,t),e.prototype.parse_=function(t){var e=new $_(t);return new Q_(e).parse()},e.prototype.readFeatureFromText=function(t,e){var i=this.readGeometryFromText(t,e);if(i){var n=new La;return n.setGeometry(i),n}return null},e.prototype.readFeaturesFromText=function(t,e){for(var i=[],n=this.readGeometryFromText(t,e),r=[],o=0,a=(i=this.splitCollection_&&n.getType()==Xa.GEOMETRY_COLLECTION?n.getGeometriesArray():[n]).length;o<a;++o){var s=new La;s.setGeometry(i[o]),r.push(s)}return r},e.prototype.readGeometryFromText=function(t,e){var i=this.parse_(t);return i?ur(i,!1,e):null},e.prototype.writeFeatureText=function(t,e){var i=t.getGeometry();return i?this.writeGeometryText(i,e):""},e.prototype.writeFeaturesText=function(t,e){if(1==t.length)return this.writeFeatureText(t[0],e);for(var i=[],n=0,r=t.length;n<r;++n)i.push(t[n].getGeometry());var o=new zg(i);return this.writeGeometryText(o,e)},e.prototype.writeGeometryText=function(t,e){return zo(ur(t,!0,e))},e}($v),ix=function(){function t(){}return t.prototype.read=function(t){if(t){if("string"==typeof t){var e=Qi(t);return this.readFromDocument(e)}return $i(t)?this.readFromDocument(t):this.readFromNode(t)}return null},t.prototype.readFromDocument=function(t){},t.prototype.readFromNode=function(t){},t}(),nx=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),rx=[null,"http://www.opengis.net/wms"],ox=un(rx,{Service:on(function(t,e){return pn({},lx,t,e)}),Capability:on(function(t,e){return pn({},ax,t,e)})}),ax=un(rx,{Request:on(function(t,e){return pn({},vx,t,e)}),Exception:on(function(t,e){return pn([],px,t,e)}),Layer:on(function(t,e){return pn({},dx,t,e)})}),sx=function(t){function e(){var e=t.call(this)||this;return e.version=void 0,e}return nx(e,t),e.prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null},e.prototype.readFromNode=function(t){return this.version=t.getAttribute("version").trim(),pn({version:this.version},ox,t,[])||null},e}(ix),lx=un(rx,{Name:on(Cr),Title:on(Cr),Abstract:on(Cr),KeywordList:on(Uo),OnlineResource:on(Bo),ContactInformation:on(function(t,e){return pn({},hx,t,e)}),Fees:on(Cr),AccessConstraints:on(Cr),LayerLimit:on(wr),MaxWidth:on(wr),MaxHeight:on(wr)}),hx=un(rx,{ContactPersonPrimary:on(function(t,e){return pn({},ux,t,e)}),ContactPosition:on(Cr),ContactAddress:on(function(t,e){return pn({},cx,t,e)}),ContactVoiceTelephone:on(Cr),ContactFacsimileTelephone:on(Cr),ContactElectronicMailAddress:on(Cr)}),ux=un(rx,{ContactPerson:on(Cr),ContactOrganization:on(Cr)}),cx=un(rx,{AddressType:on(Cr),Address:on(Cr),City:on(Cr),StateOrProvince:on(Cr),PostCode:on(Cr),Country:on(Cr)}),px=un(rx,{Format:en(Cr)}),dx=un(rx,{Name:on(Cr),Title:on(Cr),Abstract:on(Cr),KeywordList:on(Uo),CRS:rn(Cr),EX_GeographicBoundingBox:on(function(t,e){var i=pn({},gx,t,e);if(i){var n=i.westBoundLongitude,r=i.southBoundLatitude,o=i.eastBoundLongitude,a=i.northBoundLatitude;if(void 0!==n&&void 0!==r&&void 0!==o&&void 0!==a)return[n,r,o,a]}}),BoundingBox:rn(function(t,e){var i=[br(t.getAttribute("minx")),br(t.getAttribute("miny")),br(t.getAttribute("maxx")),br(t.getAttribute("maxy"))],n=[br(t.getAttribute("resx")),br(t.getAttribute("resy"))];return{crs:t.getAttribute("CRS"),extent:i,res:n}}),Dimension:rn(function(t,e){return{name:t.getAttribute("name"),units:t.getAttribute("units"),unitSymbol:t.getAttribute("unitSymbol"),default:t.getAttribute("default"),multipleValues:mr(t.getAttribute("multipleValues")),nearestValue:mr(t.getAttribute("nearestValue")),current:mr(t.getAttribute("current")),values:Cr(t)}}),Attribution:on(function(t,e){return pn({},fx,t,e)}),AuthorityURL:rn(function(t,e){var i=Yo(t,e);if(i)return i.name=t.getAttribute("name"),i}),Identifier:rn(Cr),MetadataURL:rn(function(t,e){var i=Yo(t,e);if(i)return i.type=t.getAttribute("type"),i}),DataURL:rn(Yo),FeatureListURL:rn(Yo),Style:rn(function(t,e){return pn({},xx,t,e)}),MinScaleDenominator:on(xr),MaxScaleDenominator:on(xr),Layer:rn(function(t,e){var i=e[e.length-1],n=pn({},dx,t,e);if(n){var r=mr(t.getAttribute("queryable"));void 0===r&&(r=i.queryable),n.queryable=void 0!==r&&r;var o=Sr(t.getAttribute("cascaded"));void 0===o&&(o=i.cascaded),n.cascaded=o;var a=mr(t.getAttribute("opaque"));void 0===a&&(a=i.opaque),n.opaque=void 0!==a&&a;var s=mr(t.getAttribute("noSubsets"));void 0===s&&(s=i.noSubsets),n.noSubsets=void 0!==s&&s;var l=br(t.getAttribute("fixedWidth"));l||(l=i.fixedWidth),n.fixedWidth=l;var h=br(t.getAttribute("fixedHeight"));return h||(h=i.fixedHeight),n.fixedHeight=h,["Style","CRS","AuthorityURL"].forEach(function(t){t in i&&(n[t]=(n[t]||[]).concat(i[t]))}),["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"].forEach(function(t){t in n||(n[t]=i[t])}),n}})}),fx=un(rx,{Title:on(Cr),OnlineResource:on(Bo),LogoURL:on(Wo)}),gx=un(rx,{westBoundLongitude:on(xr),eastBoundLongitude:on(xr),southBoundLatitude:on(xr),northBoundLatitude:on(xr)}),vx=un(rx,{GetCapabilities:on(Xo),GetMap:on(Xo),GetFeatureInfo:on(Xo)}),yx=un(rx,{Format:rn(Cr),DCPType:rn(function(t,e){return pn({},mx,t,e)})}),mx=un(rx,{HTTP:on(function(t,e){return pn({},_x,t,e)})}),_x=un(rx,{Get:on(Yo),Post:on(Yo)}),xx=un(rx,{Name:on(Cr),Title:on(Cr),Abstract:on(Cr),LegendURL:rn(Wo),StyleSheetURL:on(Yo),StyleURL:on(Yo)}),bx=un(rx,{Format:on(Cr),OnlineResource:on(Bo)}),wx=un(rx,{Keyword:en(Cr)}),Sx=sx,Cx=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ex=function(t){function e(e){var i=t.call(this)||this,n=e||{};return i.featureNS_="http://mapserver.gis.umn.edu/mapserver",i.gmlFormat_=new hv,i.layers_=n.layers?n.layers:null,i}return Cx(e,t),e.prototype.getLayers=function(){return this.layers_},e.prototype.setLayers=function(t){this.layers_=t},e.prototype.readFeatures_=function(t,e){t.setAttribute("namespaceURI",this.featureNS_);var i=t.localName,n=[];if(0===t.childNodes.length)return n;if("msGMLOutput"==i)for(var r=0,o=t.childNodes.length;r<o;r++){var a=t.childNodes[r];if(a.nodeType===Node.ELEMENT_NODE){var s=a,l=e[0],h=s.localName.replace("_layer","");if(!this.layers_||c(this.layers_,h)){var u=h+"_feature";l.featureType=u,l.featureNS=this.featureNS_;var p={};p[u]=en(this.gmlFormat_.readFeatureElement,this.gmlFormat_);var d=un([l.featureNS,null],p);s.setAttribute("namespaceURI",this.featureNS_);var g=pn([],d,s,e,this.gmlFormat_);g&&f(n,g)}}}if("FeatureCollection"==i){var v=pn([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,t,[{}],this.gmlFormat_);v&&(n=v)}return n},e.prototype.readFeaturesFromNode=function(t,e){var i={};return e&&na(i,this.getReadOptions(t,e)),this.readFeatures_(t,[i])},e}(Zg),Tx=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Px=[null,"http://www.opengis.net/ows/1.1"],Lx=un(Px,{ServiceIdentification:on(function(t,e){return pn({},Bx,t,e)}),ServiceProvider:on(function(t,e){return pn({},Yx,t,e)}),OperationsMetadata:on(function(t,e){return pn({},Dx,t,e)})}),Ix=function(t){function e(){return t.call(this)||this}return Tx(e,t),e.prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null},e.prototype.readFromNode=function(t){return pn({},Lx,t,[])||null},e}(ix),Ox=un(Px,{DeliveryPoint:on(Cr),City:on(Cr),AdministrativeArea:on(Cr),PostalCode:on(Cr),Country:on(Cr),ElectronicMailAddress:on(Cr)}),Ax=un(Px,{Value:rn(function(t,e){return Cr(t)})}),Rx=un(Px,{AllowedValues:on(function(t,e){return pn({},Ax,t,e)})}),Mx=un(Px,{Phone:on(function(t,e){return pn({},jx,t,e)}),Address:on(function(t,e){return pn({},Ox,t,e)})}),Fx=un(Px,{HTTP:on(function(t,e){return pn({},kx,t,e)})}),kx=un(Px,{Get:rn(function(t,e){var i=Bo(t);if(i)return pn({href:i},Gx,t,e)}),Post:void 0}),Nx=un(Px,{DCP:on(function(t,e){return pn({},Fx,t,e)})}),Dx=un(Px,{Operation:function(t,e){var i=t.getAttribute("name"),n=pn({},Nx,t,e);n&&(e[e.length-1][i]=n)}}),jx=un(Px,{Voice:on(Cr),Facsimile:on(Cr)}),Gx=un(Px,{Constraint:rn(function(t,e){var i=t.getAttribute("name");if(i)return pn({name:i},Rx,t,e)})}),zx=un(Px,{IndividualName:on(Cr),PositionName:on(Cr),ContactInfo:on(function(t,e){return pn({},Mx,t,e)})}),Bx=un(Px,{Abstract:on(Cr),AccessConstraints:on(Cr),Fees:on(Cr),Title:on(Cr),ServiceTypeVersion:on(Cr),ServiceType:on(Cr)}),Yx=un(Px,{ProviderName:on(Cr),ProviderSite:on(Bo),ServiceContact:on(function(t,e){return pn({},zx,t,e)})}),Xx=Ix,Wx=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ux=[null,"http://www.opengis.net/wmts/1.0"],Vx=[null,"http://www.opengis.net/ows/1.1"],Hx=un(Ux,{Contents:on(function(t,e){return pn({},Zx,t,e)})}),qx=function(t){function e(){var e=t.call(this)||this;return e.owsParser_=new Xx,e}return Wx(e,t),e.prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null},e.prototype.readFromNode=function(t){var e=t.getAttribute("version");e&&(e=e.trim());var i=this.owsParser_.readFromNode(t);return i?(i.version=e,(i=pn(i,Hx,t,[]))||null):null},e}(ix),Zx=un(Ux,{Layer:rn(function(t,e){return pn({},Kx,t,e)}),TileMatrixSet:rn(function(t,e){return pn({},nb,t,e)})}),Kx=un(Ux,{Style:rn(function(t,e){var i=pn({},Jx,t,e);if(i){var n="true"===t.getAttribute("isDefault");return i.isDefault=n,i}}),Format:rn(Cr),TileMatrixSetLink:rn(function(t,e){return pn({},$x,t,e)}),Dimension:rn(function(t,e){return pn({},eb,t,e)}),ResourceURL:rn(function(t,e){var i=t.getAttribute("format"),n=t.getAttribute("template"),r=t.getAttribute("resourceType"),o={};return i&&(o.format=i),n&&(o.template=n),r&&(o.resourceType=r),o})},un(Vx,{Title:on(Cr),Abstract:on(Cr),WGS84BoundingBox:on(function(t,e){var i=pn([],ib,t,e);if(2==i.length)return C(i)}),Identifier:on(Cr)})),Jx=un(Ux,{LegendURL:rn(function(t,e){var i={};return i.format=t.getAttribute("format"),i.href=Bo(t),i})},un(Vx,{Title:on(Cr),Identifier:on(Cr)})),$x=un(Ux,{TileMatrixSet:on(Cr),TileMatrixSetLimits:on(function(t,e){return pn([],Qx,t,e)})}),Qx=un(Ux,{TileMatrixLimits:en(function(t,e){return pn({},tb,t,e)})}),tb=un(Ux,{TileMatrix:on(Cr),MinTileRow:on(wr),MaxTileRow:on(wr),MinTileCol:on(wr),MaxTileCol:on(wr)}),eb=un(Ux,{Default:on(Cr),Value:rn(Cr)},un(Vx,{Identifier:on(Cr)})),ib=un(Vx,{LowerCorner:en(Vo),UpperCorner:en(Vo)}),nb=un(Ux,{WellKnownScaleSet:on(Cr),TileMatrix:rn(function(t,e){return pn({},rb,t,e)})},un(Vx,{SupportedCRS:on(Cr),Identifier:on(Cr)})),rb=un(Ux,{TopLeftCorner:on(Vo),ScaleDenominator:on(xr),TileWidth:on(wr),TileHeight:on(wr),MatrixWidth:on(wr),MatrixHeight:on(wr)},un(Vx,{Identifier:on(Cr)})),ob=qx,ab=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),sb=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],lb=function(t){function e(e){var i=this,n=e||{};(i=t.call(this,{element:document.createElement("div"),target:n.target})||this).cssClassName_=void 0!==n.className?n.className:"ol-full-screen";var r=void 0!==n.label?n.label:"\u2922";i.labelNode_="string"==typeof r?document.createTextNode(r):r;var o=void 0!==n.labelActive?n.labelActive:"\xd7";i.labelActiveNode_="string"==typeof o?document.createTextNode(o):o,i.button_=document.createElement("button");var a=n.tipLabel?n.tipLabel:"Toggle full-screen";i.setClassName_(i.button_,qo()),i.button_.setAttribute("type","button"),i.button_.title=a,i.button_.appendChild(i.labelNode_),i.button_.addEventListener(pa,i.handleClick_.bind(i),!1);var s=i.cssClassName_+" ol-unselectable ol-control "+(Ho()?"":"ol-unsupported"),l=i.element;return l.className=s,l.appendChild(i.button_),i.keys_=void 0!==n.keys&&n.keys,i.source_=n.source,i}return ab(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),this.handleFullScreen_()},e.prototype.handleFullScreen_=function(){if(Ho()){var t=this.getMap();if(t)if(qo())document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();else{var e=void 0;e=this.source_?"string"==typeof this.source_?document.getElementById(this.source_):this.source_:t.getTargetElement(),this.keys_?function(t){t.webkitRequestFullscreen?t.webkitRequestFullscreen():Zo(t)}(e):Zo(e)}}},e.prototype.handleFullScreenChange_=function(){var t=this.getMap();qo()?(this.setClassName_(this.button_,!0),ti(this.labelActiveNode_,this.labelNode_),this.dispatchEvent("enterfullscreen")):(this.setClassName_(this.button_,!1),ti(this.labelNode_,this.labelActiveNode_),this.dispatchEvent("leavefullscreen")),t&&t.updateSize()},e.prototype.setClassName_=function(t,e){var i=this.cssClassName_+"-true",n=this.cssClassName_+"-false",r=e?i:n;t.classList.remove(i),t.classList.remove(n),t.classList.add(r)},e.prototype.setMap=function(e){if(t.prototype.setMap.call(this,e),e)for(var i=0,n=sb.length;i<n;++i)this.listenerKeys.push(s(document,sb[i],this.handleFullScreenChange_,this))},e}(Ol),hb=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ub=function(t){function e(e){var i=this,n=e||{},r=document.createElement("div");return r.className=void 0!==n.className?n.className:"ol-mouse-position",(i=t.call(this,{element:r,render:n.render||function(t){var e=t.frameState;e?this.mapProjection_!=e.viewState.projection&&(this.mapProjection_=e.viewState.projection,this.transform_=null):this.mapProjection_=null},target:n.target})||this).addEventListener(w("projection"),i.handleProjectionChanged_),n.coordinateFormat&&i.setCoordinateFormat(n.coordinateFormat),n.projection&&i.setProjection(n.projection),i.undefinedHTML_=void 0!==n.undefinedHTML?n.undefinedHTML:"&#160;",i.renderOnMouseOut_=!!i.undefinedHTML_,i.renderedHTML_=r.innerHTML,i.mapProjection_=null,i.transform_=null,i}return hb(e,t),e.prototype.handleProjectionChanged_=function(){this.transform_=null},e.prototype.getCoordinateFormat=function(){return this.get("coordinateFormat")},e.prototype.getProjection=function(){return this.get("projection")},e.prototype.handleMouseMove=function(t){var e=this.getMap();this.updateHTML_(e.getEventPixel(t))},e.prototype.handleMouseOut=function(t){this.updateHTML_(null)},e.prototype.setMap=function(e){if(t.prototype.setMap.call(this,e),e){var i=e.getViewport();this.listenerKeys.push(s(i,qs,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(s(i,"pointerout",this.handleMouseOut,this))}},e.prototype.setCoordinateFormat=function(t){this.set("coordinateFormat",t)},e.prototype.setProjection=function(t){this.set("projection",bt(t))},e.prototype.updateHTML_=function(t){var e=this.undefinedHTML_;if(t&&this.mapProjection_){if(!this.transform_){var i=this.getProjection();this.transform_=i?Lt(this.mapProjection_,i):_t}var n=this.getMap().getCoordinateFromPixelInternal(t);if(n){var r=Rt();r&&(this.transform_=Lt(this.mapProjection_,r)),this.transform_(n,n);var o=this.getCoordinateFormat();e=o?o(n):n.toString()}}this.renderedHTML_&&e===this.renderedHTML_||(this.element.innerHTML=e,this.renderedHTML_=e)},e}(Ol),cb=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),pb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return cb(e,t),e.prototype.createRenderer=function(){return new pu(this)},e}(Ll),db=function(t){function e(e){var i=this,n=e||{};(i=t.call(this,{element:document.createElement("div"),render:n.render||function(t){this.validateExtent_(),this.updateBox_()},target:n.target})||this).boundHandleRotationChanged_=i.handleRotationChanged_.bind(i),i.collapsed_=void 0===n.collapsed||n.collapsed,i.collapsible_=void 0===n.collapsible||n.collapsible,i.collapsible_||(i.collapsed_=!1),i.rotateWithView_=void 0!==n.rotateWithView&&n.rotateWithView,i.viewExtent_=void 0;var r=void 0!==n.className?n.className:"ol-overviewmap",o=void 0!==n.tipLabel?n.tipLabel:"Overview map",a=void 0!==n.collapseLabel?n.collapseLabel:"\xab";"string"==typeof a?(i.collapseLabel_=document.createElement("span"),i.collapseLabel_.textContent=a):i.collapseLabel_=a;var s=void 0!==n.label?n.label:"\xbb";"string"==typeof s?(i.label_=document.createElement("span"),i.label_.textContent=s):i.label_=s;var l=i.collapsible_&&!i.collapsed_?i.collapseLabel_:i.label_,h=document.createElement("button");h.setAttribute("type","button"),h.title=o,h.appendChild(l),h.addEventListener(pa,i.handleClick_.bind(i),!1),i.ovmapDiv_=document.createElement("div"),i.ovmapDiv_.className="ol-overviewmap-map",i.view_=n.view,i.ovmap_=new pb({view:n.view});var u=i.ovmap_;n.layers&&n.layers.forEach(function(t){u.addLayer(t)});var c=document.createElement("div");c.className="ol-overviewmap-box",c.style.boxSizing="border-box",i.boxOverlay_=new Su({position:[0,0],positioning:gu,element:c}),i.ovmap_.addOverlay(i.boxOverlay_);var p=i.element;p.className=r+" ol-unselectable ol-control"+(i.collapsed_&&i.collapsible_?" ol-collapsed":"")+(i.collapsible_?"":" ol-uncollapsible"),p.appendChild(i.ovmapDiv_),p.appendChild(h);var d=i,f=i.boxOverlay_,g=function(t){var e,i={clientX:(e=t).clientX,clientY:e.clientY},n=u.getEventCoordinateInternal(i);f.setPosition(n)},v=function(t){var e=u.getEventCoordinateInternal(t);d.getMap().getView().setCenterInternal(e),window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",v)};return i.boxOverlay_.getElement().addEventListener("mousedown",function(){window.addEventListener("mousemove",g),window.addEventListener("mouseup",v)}),i}return cb(e,t),e.prototype.setMap=function(e){var i=this.getMap();if(e!==i){if(i){var n=i.getView();n&&this.unbindView_(n),this.ovmap_.setTarget(null)}if(t.prototype.setMap.call(this,e),e){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(s(e,ia,this.handleMapPropertyChange_,this));var r=e.getView();r&&(this.bindView_(r),r.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_()))}}},e.prototype.handleMapPropertyChange_=function(t){if(t.key===il){var e=t.oldValue;e&&this.unbindView_(e);var i=this.getMap().getView();this.bindView_(i)}},e.prototype.bindView_=function(t){if(!this.view_){var e=new cl({projection:t.getProjection()});this.ovmap_.setView(e)}t.addEventListener(w("rotation"),this.boundHandleRotationChanged_),this.handleRotationChanged_()},e.prototype.unbindView_=function(t){t.removeEventListener(w("rotation"),this.boundHandleRotationChanged_)},e.prototype.handleRotationChanged_=function(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())},e.prototype.validateExtent_=function(){var t=this.getMap(),e=this.ovmap_;if(t.isRendered()&&e.isRendered()){var i=t.getSize(),n=t.getView().calculateExtentInternal(i);if(!this.viewExtent_||!N(n,this.viewExtent_)){this.viewExtent_=n;var r=e.getSize(),o=e.getView().calculateExtentInternal(r),a=e.getPixelFromCoordinateInternal(q(n)),s=e.getPixelFromCoordinateInternal(X(n)),l=Math.abs(a[0]-s[0]),h=Math.abs(a[1]-s[1]),u=r[0],c=r[1];l<.1*u||h<.1*c||l>.75*u||h>.75*c?this.resetExtent_():I(o,n)||this.recenter_()}}},e.prototype.resetExtent_=function(){var t=this.getMap(),e=this.ovmap_,i=t.getSize(),n=t.getView().calculateExtentInternal(i),r=e.getView(),o=Math.log(7.5)/Math.LN2;Q(n,1/(.1*Math.pow(2,o/2))),r.fitInternal(Se(n))},e.prototype.recenter_=function(){var t=this.getMap(),e=this.ovmap_,i=t.getView();e.getView().setCenterInternal(i.getCenterInternal())},e.prototype.updateBox_=function(){var t=this.getMap(),e=this.ovmap_;if(t.isRendered()&&e.isRendered()){var i=t.getSize(),n=t.getView(),r=e.getView(),o=this.rotateWithView_?0:-n.getRotation(),a=this.boxOverlay_,s=this.boxOverlay_.getElement(),l=n.getCenterInternal(),h=n.getResolution(),u=r.getResolution(),c=i[0]*h/u,p=i[1]*h/u;a.setPosition(l),s&&(s.style.width=c+"px",s.style.height=p+"px",s.style.transform="rotate("+o+"rad)")}},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},e.prototype.handleToggle_=function(){this.element.classList.toggle("ol-collapsed"),this.collapsed_?ti(this.collapseLabel_,this.label_):ti(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;var t=this.ovmap_;if(!this.collapsed_){if(t.isRendered())return this.viewExtent_=void 0,void t.render();t.updateSize(),this.resetExtent_(),l(t,"postrender",function(t){this.updateBox_()},this)}},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e.prototype.getRotateWithView=function(){return this.rotateWithView_},e.prototype.setRotateWithView=function(t){this.rotateWithView_!==t&&(this.rotateWithView_=t,0!==this.getMap().getView().getRotation()&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))},e.prototype.getOverviewMap=function(){return this.ovmap_},e}(Ol),fb=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),gb="metric",vb=[1,2,5],yb=function(t){function e(e){var i=this,n=e||{},r=void 0!==n.className?n.className:n.bar?"ol-scale-bar":"ol-scale-line";return(i=t.call(this,{element:document.createElement("div"),render:n.render||function(t){var e=t.frameState;this.viewState_=e?e.viewState:null,this.updateElement_()},target:n.target})||this).innerElement_=document.createElement("div"),i.innerElement_.className=r+"-inner",i.element.className=r+" ol-unselectable",i.element.appendChild(i.innerElement_),i.viewState_=null,i.minWidth_=void 0!==n.minWidth?n.minWidth:64,i.renderedVisible_=!1,i.renderedWidth_=void 0,i.renderedHTML_="",i.addEventListener(w("units"),i.handleUnitsChanged_),i.setUnits(n.units||gb),i.scaleBar_=n.bar||!1,i.scaleBarSteps_=n.steps||4,i.scaleBarText_=n.text||!1,i}return fb(e,t),e.prototype.getUnits=function(){return this.get("units")},e.prototype.handleUnitsChanged_=function(){this.updateElement_()},e.prototype.setUnits=function(t){this.set("units",t)},e.prototype.updateElement_=function(){var t=this.viewState_;if(t){var e=t.center,i=t.projection,n=this.getUnits(),r=wt(i,t.resolution,e,"degrees"==n?Ka.DEGREES:Ka.METERS),o=this.minWidth_*r,a="";if("degrees"==n){var s=Va[Ka.DEGREES];(o*=s)<s/60?(a="\u2033",r*=3600):o<s?(a="\u2032",r*=60):a="\xb0"}else"imperial"==n?o<.9144?(a="in",r/=.0254):o<1609.344?(a="ft",r/=.3048):(a="mi",r/=1609.344):"nautical"==n?(r/=1852,a="nm"):n==gb?o<.001?(a="\u03bcm",r*=1e6):o<1?(a="mm",r*=1e3):o<1e3?a="m":(a="km",r/=1e3):"us"==n?o<.9144?(a="in",r*=39.37):o<1609.344?(a="ft",r/=.30480061):(a="mi",r/=1609.3472):S(!1,33);for(var l,h,u,c,p=3*Math.floor(Math.log(this.minWidth_*r)/Math.log(10));;){u=Math.floor(p/3);var d=Math.pow(10,u);if(l=vb[(p%3+3)%3]*d,h=Math.round(l/r),isNaN(h))return this.element.style.display="none",void(this.renderedVisible_=!1);if(h>=this.minWidth_)break;++p}c=this.scaleBar_?this.createScaleBar(h,l,a):l.toFixed(u<0?-u:0)+" "+a,this.renderedHTML_!=c&&(this.innerElement_.innerHTML=c,this.renderedHTML_=c),this.renderedWidth_!=h&&(this.innerElement_.style.width=h+"px",this.renderedWidth_=h),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.createScaleBar=function(t,e,i){for(var n="1 : "+Math.round(this.getScaleForResolution()).toLocaleString(),r=[],o=t/this.scaleBarSteps_,a="#ffffff",s=0;s<this.scaleBarSteps_;s++)0===s&&r.push(this.createMarker("absolute",s)),r.push('<div><div class="ol-scale-singlebar" style="width: '+o+"px;background-color: "+a+';"></div>'+this.createMarker("relative",s)+(s%2==0||2===this.scaleBarSteps_?this.createStepText(s,t,!1,e,i):"")+"</div>"),s===this.scaleBarSteps_-1&&r.push(this.createStepText(s+1,t,!0,e,i)),a="#ffffff"===a?"#000000":"#ffffff";return'<div style="display: flex;">'+(this.scaleBarText_?'<div class="ol-scale-text" style="width: '+t+'px;">'+n+"</div>":"")+r.join("")+"</div>"},e.prototype.createMarker=function(t,e){return'<div class="ol-scale-step-marker" style="position: '+t+";top: "+("absolute"===t?3:-10)+'px;"></div>'},e.prototype.createStepText=function(t,e,i,n,r){var o=(0===t?0:Math.round(n/this.scaleBarSteps_*t*100)/100)+(0===t?"":" "+r);return'<div class="ol-scale-step-text" style="margin-left: '+(0===t?-3:e/this.scaleBarSteps_*-1)+"px;text-align: "+(0===t?"left":"center")+"; min-width: "+(0===t?0:e/this.scaleBarSteps_*2)+"px;left: "+(i?e+"px":"unset")+';">'+o+"</div>"},e.prototype.getScaleForResolution=function(){var t=this.getMap().getView().getResolution(),e=this.viewState_.projection.getMetersPerUnit();return parseFloat(t.toString())*e*39.37*(25.4/.28)},e}(Ol),mb=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),_b=0,xb=function(t){function e(e){var i=this,n=e||{};(i=t.call(this,{element:document.createElement("div"),render:n.render||function(t){if(t.frameState){this.sliderInitialized_||this.initSlider_();var e=t.frameState.viewState.resolution;this.currentResolution_=e,this.setThumbPosition_(e)}}})||this).dragListenerKeys_=[],i.currentResolution_=void 0,i.direction_=_b,i.heightLimit_=0,i.widthLimit_=0,i.thumbSize_=null,i.sliderInitialized_=!1,i.duration_=void 0!==n.duration?n.duration:200;var r=void 0!==n.className?n.className:"ol-zoomslider",o=document.createElement("button");o.setAttribute("type","button"),o.className=r+"-thumb ol-unselectable";var a=i.element;return a.className=r+" ol-unselectable ol-control",a.appendChild(o),a.addEventListener(Zs,i.handleDraggerStart_.bind(i),!1),a.addEventListener(qs,i.handleDraggerDrag_.bind(i),!1),a.addEventListener(Ks,i.handleDraggerEnd_.bind(i),!1),a.addEventListener(pa,i.handleContainerClick_.bind(i),!1),o.addEventListener(pa,b,!1),i}return mb(e,t),e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),e&&e.render()},e.prototype.initSlider_=function(){var t=this.element,e=t.offsetWidth,i=t.offsetHeight,n=t.firstElementChild,r=getComputedStyle(n),o=n.offsetWidth+parseFloat(r.marginRight)+parseFloat(r.marginLeft),a=n.offsetHeight+parseFloat(r.marginTop)+parseFloat(r.marginBottom);this.thumbSize_=[o,a],e>i?(this.direction_=1,this.widthLimit_=e-o):(this.direction_=_b,this.heightLimit_=i-a),this.sliderInitialized_=!0},e.prototype.handleContainerClick_=function(t){var e=this.getMap().getView(),i=this.getRelativePosition_(t.offsetX-this.thumbSize_[0]/2,t.offsetY-this.thumbSize_[1]/2),n=this.getResolutionForPosition_(i),r=e.getConstrainedZoom(e.getZoomForResolution(n));e.animateInternal({zoom:r,duration:this.duration_,easing:qe})},e.prototype.handleDraggerStart_=function(t){if(!this.dragging_&&t.target===this.element.firstElementChild){var e=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.startX_=t.clientX-parseFloat(e.style.left),this.startY_=t.clientY-parseFloat(e.style.top),this.dragging_=!0,0===this.dragListenerKeys_.length){var i=this.handleDraggerDrag_,n=this.handleDraggerEnd_;this.dragListenerKeys_.push(s(document,qs,i,this),s(document,Ks,n,this))}}},e.prototype.handleDraggerDrag_=function(t){if(this.dragging_){var e=this.getRelativePosition_(t.clientX-this.startX_,t.clientY-this.startY_);this.currentResolution_=this.getResolutionForPosition_(e),this.getMap().getView().setResolution(this.currentResolution_)}},e.prototype.handleDraggerEnd_=function(t){this.dragging_&&(this.getMap().getView().endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(h),this.dragListenerKeys_.length=0)},e.prototype.setThumbPosition_=function(t){var e=this.getPositionForResolution_(t),i=this.element.firstElementChild;1==this.direction_?i.style.left=this.widthLimit_*e+"px":i.style.top=this.heightLimit_*e+"px"},e.prototype.getRelativePosition_=function(t,e){return ot(1===this.direction_?t/this.widthLimit_:e/this.heightLimit_,0,1)},e.prototype.getResolutionForPosition_=function(t){return this.getMap().getView().getResolutionForValueFunction()(1-t)},e.prototype.getPositionForResolution_=function(t){return ot(1-this.getMap().getView().getValueForResolutionFunction()(t),0,1)},e}(Ol),bb=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),wb=function(t){function e(e){var i=this,n=e||{};(i=t.call(this,{element:document.createElement("div"),target:n.target})||this).extent=n.extent?n.extent:null;var r=void 0!==n.className?n.className:"ol-zoom-extent",o=void 0!==n.label?n.label:"E",a=void 0!==n.tipLabel?n.tipLabel:"Fit to extent",s=document.createElement("button");s.setAttribute("type","button"),s.title=a,s.appendChild("string"==typeof o?document.createTextNode(o):o),s.addEventListener(pa,i.handleClick_.bind(i),!1);var l=i.element;return l.className=r+" ol-unselectable ol-control",l.appendChild(s),i}return bb(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),this.handleZoomToExtent()},e.prototype.handleZoomToExtent=function(){var t=this.getMap().getView(),e=this.extent?this.extent:t.getProjection().getExtent();t.fitInternal(Se(e))},e}(Ol),Sb={array:{},color:{},colorlike:{},control:{},coordinate:{},easing:{},events:{}};Sb.events.condition={},Sb.extent={},Sb.featureloader={},Sb.format={},Sb.format.filter={},Sb.geom={},Sb.has={},Sb.interaction={},Sb.layer={},Sb.loadingstrategy={},Sb.proj={},Sb.proj.Units={},Sb.proj.proj4={},Sb.render={},Sb.render.canvas={},Sb.renderer={},Sb.renderer.canvas={},Sb.renderer.webgl={},Sb.size={},Sb.source={},Sb.sphere={},Sb.style={},Sb.style.IconImageCache={},Sb.tilegrid={},Sb.transform={},Sb.util={},Sb.webgl={},Sb.xml={},Sb.Collection=Ta,Sb.Feature=La,Sb.Geolocation=As,Sb.Kinetic=Rs,Sb.Map=fu,Sb.Object=Sa,Sb.Observable=_a,Sb.Observable.unByKey=function(t){if(Array.isArray(t))for(var e=0,i=t.length;e<i;++e)h(t[e]);else h(t)},Sb.Overlay=Su,Sb.PluggableMap=Ll,Sb.View=cl,Sb.array.stableSort=function(t,e){var i,n=t.length,r=Array(t.length);for(i=0;i<n;i++)r[i]={index:i,value:t[i]};for(r.sort(function(t,i){return e(t.value,i.value)||t.index-i.index}),i=0;i<t.length;i++)t[i]=r[i].value},Sb.color.asArray=yi,Sb.color.asString=vi,Sb.colorlike.asColorLike=bi,Sb.control.Attribution=Dl,Sb.control.Control=Ol,Sb.control.FullScreen=lb,Sb.control.MousePosition=ub,Sb.control.OverviewMap=db,Sb.control.Rotate=Gl,Sb.control.ScaleLine=yb,Sb.control.Zoom=Bl,Sb.control.ZoomSlider=xb,Sb.control.ZoomToExtent=wb,Sb.control.defaults=si,Sb.coordinate.add=ke,Sb.coordinate.createStringXY=function(t){return function(e){return Ue(e,t)}},Sb.coordinate.format=je,Sb.coordinate.rotate=ze,Sb.coordinate.toStringHDMS=function(t,e){return t?De("NS",t[1],e)+" "+De("EW",t[0],e):""},Sb.coordinate.toStringXY=Ue,Sb.easing.easeIn=He,Sb.easing.easeOut=qe,Sb.easing.inAndOut=Ze,Sb.easing.linear=Ke,Sb.easing.upAndDown=function(t){return t<.5?Ze(2*t):1-Ze(2*(t-.5))},Sb.events.condition.altKeyOnly=Hl,Sb.events.condition.altShiftKeysOnly=ql,Sb.events.condition.always=Kl,Sb.events.condition.click=function(t){return t.type==Us.CLICK},Sb.events.condition.doubleClick=function(t){return t.type==Us.DBLCLICK},Sb.events.condition.focus=Zl,Sb.events.condition.mouseOnly=nh,Sb.events.condition.never=$l,Sb.events.condition.noModifierKeys=th,Sb.events.condition.penOnly=function(t){var e=t.pointerEvent;return S(void 0!==e,56),"pen"===e.pointerType},Sb.events.condition.platformModifierKeyOnly=function(t){var e=t.originalEvent;return!e.altKey&&(zs?e.metaKey:e.ctrlKey)&&!e.shiftKey},Sb.events.condition.pointerMove=function(t){return"pointermove"==t.type},Sb.events.condition.primaryAction=rh,Sb.events.condition.shiftKeyOnly=eh,Sb.events.condition.singleClick=Ql,Sb.events.condition.targetNotEditable=ih,Sb.events.condition.touchOnly=function(t){var e=t.pointerEvent;return S(void 0!==e,56),"touch"===e.pointerType},Sb.extent.applyTransform=tt,Sb.extent.boundingExtent=C,Sb.extent.buffer=E,Sb.extent.containsCoordinate=L,Sb.extent.containsExtent=I,Sb.extent.containsXY=O,Sb.extent.createEmpty=function(){return[1/0,1/0,-1/0,-1/0]},Sb.extent.equals=N,Sb.extent.extend=D,Sb.extent.getArea=B,Sb.extent.getBottomLeft=Y,Sb.extent.getBottomRight=X,Sb.extent.getCenter=W,Sb.extent.getHeight=V,Sb.extent.getIntersection=H,Sb.extent.getSize=function(t){return[t[2]-t[0],t[3]-t[1]]},Sb.extent.getTopLeft=q,Sb.extent.getTopRight=Z,Sb.extent.getWidth=K,Sb.extent.intersects=J,Sb.extent.isEmpty=$,Sb.featureloader.setWithCredentials=function(t){Lu=t},Sb.featureloader.xhr=Ni,Sb.format.EsriJSON=Hg,Sb.format.Feature=Bg,Sb.format.GML=ov,Sb.format.GML2=hv,Sb.format.GML3=rv,Sb.format.GML32=wv,Sb.format.GPX=qv,Sb.format.GeoJSON=Kv,Sb.format.IGC=oy,Sb.format.IIIFInfo=xp,Sb.format.KML=Cm,Sb.format.MVT=Am,Sb.format.OSMXML=jm,Sb.format.Polyline=zm,Sb.format.Polyline.decodeDeltas=xo,Sb.format.Polyline.decodeFloats=wo,Sb.format.Polyline.encodeDeltas=_o,Sb.format.Polyline.encodeFloats=bo,Sb.format.TopoJSON=Xm,Sb.format.WFS=H_,Sb.format.WFS.writeFilter=function(t){var e=Ki(z_,"Filter");return Oo(e,t,[]),e},Sb.format.WKT=ex,Sb.format.WMSCapabilities=Sx,Sb.format.WMSGetFeatureInfo=Ex,Sb.format.WMTSCapabilities=ob,Sb.format.filter.Bbox=Km,Sb.format.filter.Contains=t_,Sb.format.filter.During=r_,Sb.format.filter.EqualTo=l_,Sb.format.filter.GreaterThan=u_,Sb.format.filter.GreaterThanOrEqualTo=p_,Sb.format.filter.Intersects=f_,Sb.format.filter.IsBetween=v_,Sb.format.filter.IsLike=m_,Sb.format.filter.IsNull=x_,Sb.format.filter.LessThan=w_,Sb.format.filter.LessThanOrEqualTo=C_,Sb.format.filter.Not=T_,Sb.format.filter.NotEqualTo=L_,Sb.format.filter.Or=O_,Sb.format.filter.Within=R_,Sb.format.filter.and=To,Sb.format.filter.bbox=Po,Sb.format.filter.between=function(t,e,i){return new v_(t,e,i)},Sb.format.filter.contains=function(t,e,i){return new t_(t,e,i)},Sb.format.filter.during=function(t,e,i){return new r_(t,e,i)},Sb.format.filter.equalTo=function(t,e,i){return new l_(t,e,i)},Sb.format.filter.greaterThan=function(t,e){return new u_(t,e)},Sb.format.filter.greaterThanOrEqualTo=function(t,e){return new p_(t,e)},Sb.format.filter.intersects=function(t,e,i){return new f_(t,e,i)},Sb.format.filter.isNull=function(t){return new x_(t)},Sb.format.filter.lessThan=function(t,e){return new w_(t,e)},Sb.format.filter.lessThanOrEqualTo=function(t,e){return new C_(t,e)},Sb.format.filter.like=function(t,e,i,n,r,o){return new m_(t,e,i,n,r,o)},Sb.format.filter.not=function(t){return new T_(t)},Sb.format.filter.notEqualTo=function(t,e,i){return new L_(t,e,i)},Sb.format.filter.or=function(t){var e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(O_,e))},Sb.format.filter.within=function(t,e,i){return new R_(t,e,i)},Sb.geom.Circle=og,Sb.geom.Geometry=ys,Sb.geom.GeometryCollection=zg,Sb.geom.LineString=zf,Sb.geom.LinearRing=bs,Sb.geom.MultiLineString=sg,Sb.geom.MultiPoint=hg,Sb.geom.MultiPolygon=cg,Sb.geom.Point=Ss,Sb.geom.Polygon=Ts,Sb.geom.Polygon.circular=we,Sb.geom.Polygon.fromCircle=Ce,Sb.geom.Polygon.fromExtent=Se,Sb.geom.SimpleGeometry=_s,Sb.has.DEVICE_PIXEL_RATIO=Bs,Sb.interaction.DoubleClickZoom=Vl,Sb.interaction.DragAndDrop=eg,Sb.interaction.DragBox=gh,Sb.interaction.DragPan=lh,Sb.interaction.DragRotate=uh,Sb.interaction.DragRotateAndZoom=ng,Sb.interaction.DragZoom=yh,Sb.interaction.Draw=mg,Sb.interaction.Draw.createBox=function(){return function(t,e,i){var n=C(t.map(function(t){return Ft(t,i)})),r=[[Y(n),X(n),Z(n),q(n),Y(n)]],o=e;o?o.setCoordinates(r):o=new Ts(r);var a=Rt();return a&&o.transform(i,a),o}},Sb.interaction.Draw.createRegularPolygon=function(t,e){return function(i,n,r){var o=Ft(i[0],r),a=Ft(i[1],r),s=Math.sqrt(Ye(o,a)),l=n||Ce(new og(o),t),h=e;if(!e){var u=a[0]-o[0],c=a[1]-o[1];h=Math.atan(c/u)-(u<0?Math.PI:0)}Ee(l,o,s,h);var p=Rt();return p&&l.transform(r,p),l}},Sb.interaction.Extent=wg,Sb.interaction.Interaction=Wl,Sb.interaction.KeyboardPan=Sh,Sb.interaction.KeyboardZoom=Eh,Sb.interaction.Modify=Pg,Sb.interaction.MouseWheelZoom=Ph,Sb.interaction.PinchRotate=Ih,Sb.interaction.PinchZoom=Ah,Sb.interaction.Pointer=ah,Sb.interaction.Select=Rg,Sb.interaction.Snap=kg,Sb.interaction.Translate=jg,Sb.interaction.defaults=gi,Sb.layer.Base=bl,Sb.layer.BaseImage=Vp,Sb.layer.BaseTile=nd,Sb.layer.BaseVector=Hd,Sb.layer.Graticule=Wf,Sb.layer.Group=Tl,Sb.layer.Heatmap=qf,Sb.layer.Image=td,Sb.layer.Layer=kl,Sb.layer.Tile=sd,Sb.layer.Vector=jf,Sb.layer.VectorImage=Kf,Sb.layer.VectorTile=$f,Sb.loadingstrategy.all=Di,Sb.loadingstrategy.bbox=function(t,e){return[t]},Sb.loadingstrategy.tile=function(t){return function(e,i){var n=t.getZForResolution(i),r=t.getTileRangeForExtentAndZ(e,n),o=[],a=[n,0,0];for(a[1]=r.minX;a[1]<=r.maxX;++a[1])for(a[2]=r.minY;a[2]<=r.maxY;++a[2])o.push(t.getTileCoordExtent(a));return o}},Sb.proj.Projection=Ja,Sb.proj.Units.METERS_PER_UNIT=Va,Sb.proj.addCoordinateTransforms=Tt,Sb.proj.addEquivalentProjections=St,Sb.proj.addProjection=xt,Sb.proj.equivalent=Pt,Sb.proj.fromLonLat=function(t,e){return Ot(t,"EPSG:4326",void 0!==e?e:"EPSG:3857")},Sb.proj.get=bt,Sb.proj.getPointResolution=wt,Sb.proj.getTransform=It,Sb.proj.proj4.register=function(t){var e,i,n=Object.keys(t.defs),r=n.length;for(e=0;e<r;++e){var o=n[e];if(!bt(o)){var a=t.defs(o);xt(new Ja({code:o,axisOrientation:a.axis,metersPerUnit:a.to_meter,units:a.units}))}}for(e=0;e<r;++e){var s=n[e],l=bt(s);for(i=0;i<r;++i){var h=n[i],u=bt(h);if(!yt(s,h))if(t.defs[s]===t.defs[h])St([l,u]);else{var c=t(s,h);Tt(l,u,c.forward,c.inverse)}}}},Sb.proj.toLonLat=function(t,e){var i=Ot(t,void 0!==e?e:"EPSG:3857","EPSG:4326"),n=i[0];return(n<-180||n>180)&&(i[0]=ut(n+180,360)-180),i},Sb.proj.transform=Ot,Sb.proj.transformExtent=At,Sb.render.VectorContext=jh,Sb.render.canvas.labelCache=Yh,Sb.render.getRenderPixel=function(t,e){var i=e.slice(0);return zt(t.inversePixelTransform.slice(),i),i},Sb.render.getVectorContext=Ri,Sb.render.toContext=function(t,e){var i=t.canvas,n=e||{},r=n.pixelRatio||Bs,o=n.size;o&&(i.width=o[0]*r,i.height=o[1]*r,i.style.width=o[0]+"px",i.style.height=o[1]+"px");var a=[0,0,i.width,i.height],s=Bt([1,0,0,1,0,0],r,r);return new Qh(t,r,a,s,0)},Sb.renderer.Composite=pu,Sb.renderer.canvas.ImageLayer=$p,Sb.renderer.canvas.TileLayer=od,Sb.renderer.canvas.VectorImageLayer=If,Sb.renderer.canvas.VectorLayer=Pf,Sb.renderer.canvas.VectorTileLayer=Nf,Sb.renderer.webgl.PointsLayer=Zd,Sb.size.toSize=oi,Sb.source.BingMaps=Wc,Sb.source.CartoDB=qc,Sb.source.Cluster=ap,Sb.source.IIIF=wp,Sb.source.Image=Pp,Sb.source.ImageArcGISRest=Ip,Sb.source.ImageCanvas=Mp,Sb.source.ImageMapGuide=kp,Sb.source.ImageStatic=Dp,Sb.source.ImageWMS=zp,Sb.source.OSM=Xp,Sb.source.OSM.ATTRIBUTION=Yp,Sb.source.Raster=dd,Sb.source.Source=Fc,Sb.source.Stamen=md,Sb.source.Tile=jc,Sb.source.TileArcGISRest=xd,Sb.source.TileDebug=Sd,Sb.source.TileImage=Yc,Sb.source.TileJSON=Ed,Sb.source.TileWMS=Pd,Sb.source.UTFGrid=Od,Sb.source.Vector=rp,Sb.source.VectorTile=Dd,Sb.source.WMTS=zd,Sb.source.WMTS.optionsFromCapabilities=function(t,e){var i=g(t.Contents.Layer,function(t,i,n){return t.Identifier==e.layer});if(null===i)return null;var n,r=t.Contents.TileMatrixSet;(n=i.TileMatrixSetLink.length>1?y(i.TileMatrixSetLink,"projection"in e?function(t,i,n){var o=g(r,function(e){return e.Identifier==t.TileMatrixSet}).SupportedCRS,a=bt(o.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||bt(o),s=bt(e.projection);return a&&s?Pt(a,s):o==e.projection}:function(t,i,n){return t.TileMatrixSet==e.matrixSet}):0)<0&&(n=0);var o=i.TileMatrixSetLink[n].TileMatrixSet,a=i.TileMatrixSetLink[n].TileMatrixSetLimits,s=i.Format[0];"format"in e&&(s=e.format),(n=y(i.Style,function(t,i,n){return"style"in e?t.Title==e.style:t.isDefault}))<0&&(n=0);var l=i.Style[n].Identifier,h={};"Dimension"in i&&i.Dimension.forEach(function(t,e,i){var n=t.Default;void 0===n&&(n=t.Value[0]),h[t.Identifier]=n});var u,p=g(t.Contents.TileMatrixSet,function(t,e,i){return t.Identifier==o}),d=p.SupportedCRS;if(d&&(u=bt(d.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||bt(d)),"projection"in e){var f=bt(e.projection);f&&(u&&!Pt(f,u)||(u=f))}var v=p.TileMatrix[0],m=28e-5*v.ScaleDenominator,_=u===bt("EPSG:4326")?[v.TopLeftCorner[1],v.TopLeftCorner[0]]:v.TopLeftCorner,x=[_[0],_[1]-v.TileHeight*m*v.MatrixHeight,_[0]+v.TileWidth*m*v.MatrixWidth,_[1]];null===u.getExtent()&&u.setExtent(x);var b=xn(p,x,a),w=[],S=e.requestEncoding;if(S=void 0!==S?S:"","OperationsMetadata"in t&&"GetTile"in t.OperationsMetadata)for(var C=t.OperationsMetadata.GetTile.DCP.HTTP.Get,E=0,T=C.length;E<T;++E)if(C[E].Constraint){var P=g(C[E].Constraint,function(t){return"GetEncoding"==t.name}).AllowedValues.Value;if(""===S&&(S=P[0]),S!==jd)break;c(P,jd)&&w.push(C[E].href)}else C[E].href&&(S=jd,w.push(C[E].href));return 0===w.length&&(S="REST",i.ResourceURL.forEach(function(t){"tile"===t.resourceType&&(s=t.format,w.push(t.template))})),{urls:w,layer:e.layer,matrixSet:o,format:s,projection:u,requestEncoding:S,tileGrid:b,style:l,dimensions:h,wrapX:!1,crossOrigin:e.crossOrigin}},Sb.source.XYZ=Vc,Sb.source.Zoomify=cp,Sb.sphere.getArea=function t(e,i){var n=i||{},r=n.radius||6371008.8,o=n.projection||"EPSG:3857",a=e.getType();a!==Xa.GEOMETRY_COLLECTION&&(e=e.clone().transform(o,"EPSG:4326"));var s,l,h,u,c,p,d=0;switch(a){case Xa.POINT:case Xa.MULTI_POINT:case Xa.LINE_STRING:case Xa.MULTI_LINE_STRING:case Xa.LINEAR_RING:break;case Xa.POLYGON:for(s=e.getCoordinates(),d=Math.abs(ft(s[0],r)),h=1,u=s.length;h<u;++h)d-=Math.abs(ft(s[h],r));break;case Xa.MULTI_POLYGON:for(h=0,u=(s=e.getCoordinates()).length;h<u;++h)for(l=s[h],d+=Math.abs(ft(l[0],r)),c=1,p=l.length;c<p;++c)d-=Math.abs(ft(l[c],r));break;case Xa.GEOMETRY_COLLECTION:var f=e.getGeometries();for(h=0,u=f.length;h<u;++h)d+=t(f[h],i);break;default:throw new Error("Unsupported geometry type: "+a)}return d},Sb.sphere.getDistance=pt,Sb.sphere.getLength=function t(e,i){var n=i||{},r=n.radius||6371008.8,o=n.projection||"EPSG:3857",a=e.getType();a!==Xa.GEOMETRY_COLLECTION&&(e=e.clone().transform(o,"EPSG:4326"));var s,l,h,u,c,p,d=0;switch(a){case Xa.POINT:case Xa.MULTI_POINT:break;case Xa.LINE_STRING:case Xa.LINEAR_RING:d=dt(s=e.getCoordinates(),r);break;case Xa.MULTI_LINE_STRING:case Xa.POLYGON:for(h=0,u=(s=e.getCoordinates()).length;h<u;++h)d+=dt(s[h],r);break;case Xa.MULTI_POLYGON:for(h=0,u=(s=e.getCoordinates()).length;h<u;++h)for(c=0,p=(l=s[h]).length;c<p;++c)d+=dt(l[c],r);break;case Xa.GEOMETRY_COLLECTION:var f=e.getGeometries();for(h=0,u=f.length;h<u;++h)d+=t(f[h],i);break;default:throw new Error("Unsupported geometry type: "+a)}return d},Sb.style.Circle=ic,Sb.style.Fill=nc,Sb.style.Icon=vc,Sb.style.IconImageCache.shared=Dh,Sb.style.Image=$u,Sb.style.RegularShape=tc,Sb.style.Stroke=yc,Sb.style.Style=xc,Sb.style.Text=wc,Sb.tilegrid.TileGrid=Ru,Sb.tilegrid.WMTS=Ju,Sb.tilegrid.WMTS.createFromCapabilitiesMatrixSet=xn,Sb.tilegrid.createXYZ=Ui,Sb.transform.composeCssTransform=function(t,e,i,n,r,o,a){return Wt(Yt([1,0,0,1,0,0],t,e,i,n,r,o,a))},Sb.util.getUid=r,Sb.webgl.ARRAY_BUFFER=34962,Sb.webgl.Buffer=Gu,Sb.webgl.DYNAMIC_DRAW=35048,Sb.webgl.ELEMENT_ARRAY_BUFFER=34963,Sb.webgl.Helper=Vu,Sb.webgl.Helper.computeAttributesStride=mn,Sb.webgl.PostProcessingPass=Yu,Sb.webgl.RenderTarget=qu,Sb.webgl.STATIC_DRAW=35044,Sb.webgl.STREAM_DRAW=35040,Sb.xml.getAllTextContent=Ji,Sb.xml.parse=Qi,Sb.xml.registerDocument=function(t){Du=t},Sb.xml.registerXMLSerializer=function(t){Nu=t},e.default=Sb}]).default}),console.log("naaa");var t={chart:{height:359,type:"bar",stacked:!0,toolbar:{show:!1},zoom:{enabled:!0}},plotOptions:{bar:{horizontal:!1,columnWidth:"15%",endingShape:"rounded"}},dataLabels:{enabled:!1},series:[{name:"Rejected",data:[44,55,41,67,22,43,36,52,24,18,36,48]},{name:"Pending",data:[13,23,20,8,13,27,18,22,10,16,24,22]},{name:"Approved",data:[11,17,15,15,21,14,11,18,17,12,20,18]}],xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},colors:["#8b0013","#f1b44c","#34c38f"],legend:{position:"bottom"},fill:{opacity:1}};new ApexCharts(document.querySelector("#stacked-column-chart"),t).render(),t={chart:{height:200,type:"radialBar",offsetY:-10},plotOptions:{radialBar:{startAngle:-135,endAngle:135,dataLabels:{name:{fontSize:"13px",color:void 0,offsetY:60},value:{offsetY:22,fontSize:"16px",color:void 0,formatter:function(t){return t+"%"}}}}},colors:["#8b0013"],fill:{type:"gradient",gradient:{shade:"dark",shadeIntensity:.15,inverseColors:!1,opacityFrom:1,opacityTo:1,stops:[0,50,65,91]}},stroke:{dashArray:4},series:[67],labels:["Rejected"]},new ApexCharts(document.querySelector("#radialBar-chart"),t).render()}function initLoader(){!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("jquery")):"function"==typeof define&&define.amd?define(["exports","jquery"],e):e((t=t||self).bootstrap={},t.jQuery)}(this,function(t,e){"use strict";function i(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function o(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach(function(e){var n,r,o;o=i[r=e],r in(n=t)?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function a(t){return t&&"[object Function]"==={}.toString.call(t)}function s(t,e){if(1!==t.nodeType)return[];var i=t.ownerDocument.defaultView.getComputedStyle(t,null);return e?i[e]:i}function l(t){return"HTML"===t.nodeName?t:t.parentNode||t.host}function h(t){if(!t)return document.body;switch(t.nodeName){case"HTML":case"BODY":return t.ownerDocument.body;case"#document":return t.body}var e=s(t);return/(auto|scroll|overlay)/.test(e.overflow+e.overflowY+e.overflowX)?t:h(l(t))}function u(t){return t&&t.referenceNode?t.referenceNode:t}function c(t){return 11===t?vt:10===t?yt:vt||yt}function p(t){if(!t)return document.documentElement;for(var e=c(10)?document.body:null,i=t.offsetParent||null;i===e&&t.nextElementSibling;)i=(t=t.nextElementSibling).offsetParent;var n=i&&i.nodeName;return n&&"BODY"!==n&&"HTML"!==n?-1!==["TH","TD","TABLE"].indexOf(i.nodeName)&&"static"===s(i,"position")?p(i):i:t?t.ownerDocument.documentElement:document.documentElement}function d(t){return null!==t.parentNode?d(t.parentNode):t}function f(t,e){if(!(t&&t.nodeType&&e&&e.nodeType))return document.documentElement;var i=t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,n=i?t:e,r=i?e:t,o=document.createRange();o.setStart(n,0),o.setEnd(r,0);var a=o.commonAncestorContainer;if(t!==a&&e!==a||n.contains(r))return function(t){var e=t.nodeName;return"BODY"!==e&&("HTML"===e||p(t.firstElementChild)===t)}(a)?a:p(a);var s=d(t);return s.host?f(s.host,e):f(t,d(e).host)}function g(t,e){var i="top"===(1<arguments.length&&void 0!==e?e:"top")?"scrollTop":"scrollLeft",n=t.nodeName;return"BODY"!==n&&"HTML"!==n?t[i]:(t.ownerDocument.scrollingElement||t.ownerDocument.documentElement)[i]}function v(t,e){var i="x"===e?"Left":"Top",n="Left"==i?"Right":"Bottom";return parseFloat(t["border"+i+"Width"],10)+parseFloat(t["border"+n+"Width"],10)}function y(t,e,i,n){return Math.max(e["offset"+t],e["scroll"+t],i["client"+t],i["offset"+t],i["scroll"+t],c(10)?parseInt(i["offset"+t])+parseInt(n["margin"+("Height"===t?"Top":"Left")])+parseInt(n["margin"+("Height"===t?"Bottom":"Right")]):0)}function m(t){var e=t.body,i=t.documentElement,n=c(10)&&getComputedStyle(i);return{height:y("Height",e,i,n),width:y("Width",e,i,n)}}function _(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function x(t){return mt({},t,{right:t.left+t.width,bottom:t.top+t.height})}function b(t){var e={};try{if(c(10)){e=t.getBoundingClientRect();var i=g(t,"top"),n=g(t,"left");e.top+=i,e.left+=n,e.bottom+=i,e.right+=n}else e=t.getBoundingClientRect()}catch(t){}var r={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},o="HTML"===t.nodeName?m(t.ownerDocument):{},a=t.offsetWidth-(o.width||t.clientWidth||r.width),l=t.offsetHeight-(o.height||t.clientHeight||r.height);if(a||l){var h=s(t);a-=v(h,"x"),l-=v(h,"y"),r.width-=a,r.height-=l}return x(r)}function w(t,e,i){var n=2<arguments.length&&void 0!==i&&i,r=c(10),o="HTML"===e.nodeName,a=b(t),l=b(e),u=h(t),p=s(e),d=parseFloat(p.borderTopWidth,10),f=parseFloat(p.borderLeftWidth,10);n&&o&&(l.top=Math.max(l.top,0),l.left=Math.max(l.left,0));var v=x({top:a.top-l.top-d,left:a.left-l.left-f,width:a.width,height:a.height});if(v.marginTop=0,v.marginLeft=0,!r&&o){var y=parseFloat(p.marginTop,10),m=parseFloat(p.marginLeft,10);v.top-=d-y,v.bottom-=d-y,v.left-=f-m,v.right-=f-m,v.marginTop=y,v.marginLeft=m}return(r&&!n?e.contains(u):e===u&&"BODY"!==u.nodeName)&&(v=function(t,e,i){var n=2<arguments.length&&void 0!==i&&i,r=g(e,"top"),o=g(e,"left"),a=n?-1:1;return t.top+=r*a,t.bottom+=r*a,t.left+=o*a,t.right+=o*a,t}(v,e)),v}function S(t){if(!t||!t.parentElement||c())return document.documentElement;for(var e=t.parentElement;e&&"none"===s(e,"transform");)e=e.parentElement;return e||document.documentElement}function C(t,e,i,n,r){var o=4<arguments.length&&void 0!==r&&r,a={top:0,left:0},c=o?S(t):f(t,u(e));if("viewport"===n)a=function(t,e){var i=1<arguments.length&&void 0!==e&&e,n=t.ownerDocument.documentElement,r=w(t,n),o=Math.max(n.clientWidth,window.innerWidth||0),a=Math.max(n.clientHeight,window.innerHeight||0),s=i?0:g(n),l=i?0:g(n,"left");return x({top:s-r.top+r.marginTop,left:l-r.left+r.marginLeft,width:o,height:a})}(c,o);else{var p=void 0;"scrollParent"===n?"BODY"===(p=h(l(e))).nodeName&&(p=t.ownerDocument.documentElement):p="window"===n?t.ownerDocument.documentElement:n;var d=w(p,c,o);if("HTML"!==p.nodeName||function t(e){var i=e.nodeName;if("BODY"===i||"HTML"===i)return!1;if("fixed"===s(e,"position"))return!0;var n=l(e);return!!n&&t(n)}(c))a=d;else{var v=m(t.ownerDocument),y=v.height,_=v.width;a.top+=d.top-d.marginTop,a.bottom=y+d.top,a.left+=d.left-d.marginLeft,a.right=_+d.left}}var b="number"==typeof(i=i||0);return a.left+=b?i:i.left||0,a.top+=b?i:i.top||0,a.right-=b?i:i.right||0,a.bottom-=b?i:i.bottom||0,a}function E(t,e,i,n,r,o){var a=5<arguments.length&&void 0!==o?o:0;if(-1===t.indexOf("auto"))return t;var s=C(i,n,a,r),l={top:{width:s.width,height:e.top-s.top},right:{width:s.right-e.right,height:s.height},bottom:{width:s.width,height:s.bottom-e.bottom},left:{width:e.left-s.left,height:s.height}},h=Object.keys(l).map(function(t){return mt({key:t},l[t],{area:function(t){return t.width*t.height}(l[t])})}).sort(function(t,e){return e.area-t.area}),u=h.filter(function(t){return t.width>=i.clientWidth&&t.height>=i.clientHeight}),c=0<u.length?u[0].key:h[0].key,p=t.split("-")[1];return c+(p?"-"+p:"")}function T(t,e,i,n){var r=3<arguments.length&&void 0!==n?n:null;return w(i,r?S(e):f(e,u(i)),r)}function P(t){var e=t.ownerDocument.defaultView.getComputedStyle(t),i=parseFloat(e.marginTop||0)+parseFloat(e.marginBottom||0),n=parseFloat(e.marginLeft||0)+parseFloat(e.marginRight||0);return{width:t.offsetWidth+n,height:t.offsetHeight+i}}function L(t){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,function(t){return e[t]})}function I(t,e,i){i=i.split("-")[0];var n=P(t),r={width:n.width,height:n.height},o=-1!==["right","left"].indexOf(i),a=o?"top":"left",s=o?"left":"top",l=o?"height":"width",h=o?"width":"height";return r[a]=e[a]+e[l]/2-n[l]/2,r[s]=i===s?e[s]-n[h]:e[L(s)],r}function O(t,e){return Array.prototype.find?t.find(e):t.filter(e)[0]}function A(t,e,i){return(void 0===i?t:t.slice(0,function(t,e,i){if(Array.prototype.findIndex)return t.findIndex(function(t){return t.name===i});var n=O(t,function(t){return t.name===i});return t.indexOf(n)}(t,0,i))).forEach(function(t){t.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var i=t.function||t.fn;t.enabled&&a(i)&&(e.offsets.popper=x(e.offsets.popper),e.offsets.reference=x(e.offsets.reference),e=i(e,t))}),e}function R(t,e){return t.some(function(t){return t.enabled&&t.name===e})}function M(t){for(var e=[!1,"ms","Webkit","Moz","O"],i=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<e.length;n++){var r=e[n],o=r?""+r+i:t;if("undefined"!=typeof document.body.style[o])return o}return null}function F(t){var e=t.ownerDocument;return e?e.defaultView:window}function k(t){return""!==t&&!isNaN(parseFloat(t))&&isFinite(t)}function N(t,e){Object.keys(e).forEach(function(i){var n="";-1!==["width","height","top","right","bottom","left"].indexOf(i)&&k(e[i])&&(n="px"),t.style[i]=e[i]+n})}function D(t,e,i){var n=O(t,function(t){return t.name===e}),r=!!n&&t.some(function(t){return t.name===i&&t.enabled&&t.order<n.order});if(!r){var o="`"+e+"`",a="`"+i+"`";console.warn(a+" modifier is required by "+o+" modifier in order to work, be sure to include it before "+o+"!")}return r}function j(t,e){var i=1<arguments.length&&void 0!==e&&e,n=bt.indexOf(t),r=bt.slice(n+1).concat(bt.slice(0,n));return i?r.reverse():r}function G(t,e){var i=this,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};!function(t,e){if(!(t instanceof G))throw new TypeError("Cannot call a class as a function")}(this),this.scheduleUpdate=function(){return requestAnimationFrame(i.update)},this.update=gt(this.update.bind(this)),this.options=mt({},G.Defaults,n),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=t&&t.jquery?t[0]:t,this.popper=e&&e.jquery?e[0]:e,this.options.modifiers={},Object.keys(mt({},G.Defaults.modifiers,n.modifiers)).forEach(function(t){i.options.modifiers[t]=mt({},G.Defaults.modifiers[t]||{},n.modifiers?n.modifiers[t]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(t){return mt({name:t},i.options.modifiers[t])}).sort(function(t,e){return t.order-e.order}),this.modifiers.forEach(function(t){t.enabled&&a(t.onLoad)&&t.onLoad(i.reference,i.popper,i.options,t,i.state)}),this.update();var r=this.options.eventsEnabled;r&&this.enableEventListeners(),this.state.eventsEnabled=r}function z(t,e,i){if(0===t.length)return t;if(i&&"function"==typeof i)return i(t);for(var n=(new window.DOMParser).parseFromString(t,"text/html"),r=Object.keys(e),o=[].slice.call(n.body.querySelectorAll("*")),a=function(t){var i=o[t],n=i.nodeName.toLowerCase();if(-1===r.indexOf(i.nodeName.toLowerCase()))return i.parentNode.removeChild(i),"continue";var a=[].slice.call(i.attributes),s=[].concat(e["*"]||[],e[n]||[]);a.forEach(function(t){!function(t,e){var i=t.nodeName.toLowerCase();if(-1!==e.indexOf(i))return-1===Yt.indexOf(i)||Boolean(t.nodeValue.match(Xt)||t.nodeValue.match(Wt));for(var n=e.filter(function(t){return t instanceof RegExp}),r=0,o=n.length;r<o;r++)if(i.match(n[r]))return!0;return!1}(t,s)&&i.removeAttribute(t.nodeName)})},s=0,l=o.length;s<l;s++)a(s);return n.body.innerHTML}e=e&&e.hasOwnProperty("default")?e.default:e;var B="transitionend",Y={TRANSITION_END:"bsTransitionEnd",getUID:function(t){for(;t+=~~(1e6*Math.random()),document.getElementById(t););return t},getSelectorFromElement:function(t){var e=t.getAttribute("data-target");if(!e||"#"===e){var i=t.getAttribute("href");e=i&&"#"!==i?i.trim():""}try{return document.querySelector(e)?e:null}catch(t){return null}},getTransitionDurationFromElement:function(t){if(!t)return 0;var i=e(t).css("transition-duration"),n=e(t).css("transition-delay"),r=parseFloat(i),o=parseFloat(n);return r||o?(i=i.split(",")[0],n=n.split(",")[0],1e3*(parseFloat(i)+parseFloat(n))):0},reflow:function(t){return t.offsetHeight},triggerTransitionEnd:function(t){e(t).trigger(B)},supportsTransitionEnd:function(){return Boolean(B)},isElement:function(t){return(t[0]||t).nodeType},typeCheckConfig:function(t,e,i){for(var n in i)if(Object.prototype.hasOwnProperty.call(i,n)){var r=i[n],o=e[n],a=o&&Y.isElement(o)?"element":(s=o,{}.toString.call(s).match(/\s([a-z]+)/i)[1].toLowerCase());if(!new RegExp(r).test(a))throw new Error(t.toUpperCase()+': Option "'+n+'" provided type "'+a+'" but expected type "'+r+'".')}var s},findShadowRoot:function(t){if(!document.documentElement.attachShadow)return null;if("function"!=typeof t.getRootNode)return t instanceof ShadowRoot?t:t.parentNode?Y.findShadowRoot(t.parentNode):null;var e=t.getRootNode();return e instanceof ShadowRoot?e:null},jQueryDetection:function(){if("undefined"==typeof e)throw new TypeError("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1===t[0]&&9===t[1]&&t[2]<1||4<=t[0])throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}};Y.jQueryDetection(),e.fn.emulateTransitionEnd=function(t){var i=this,n=!1;return e(this).one(Y.TRANSITION_END,function(){n=!0}),setTimeout(function(){n||Y.triggerTransitionEnd(i)},t),this},e.event.special[Y.TRANSITION_END]={bindType:B,delegateType:B,handle:function(t){if(e(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}};var X=e.fn.alert,W=function(){function t(t){this._element=t}var i=t.prototype;return i.close=function(t){var e=this._element;t&&(e=this._getRootElement(t)),this._triggerCloseEvent(e).isDefaultPrevented()||this._removeElement(e)},i.dispose=function(){e.removeData(this._element,"bs.alert"),this._element=null},i._getRootElement=function(t){var i=Y.getSelectorFromElement(t),n=!1;return i&&(n=document.querySelector(i)),n=n||e(t).closest(".alert")[0]},i._triggerCloseEvent=function(t){var i=e.Event("close.bs.alert");return e(t).trigger(i),i},i._removeElement=function(t){var i=this;if(e(t).removeClass("show"),e(t).hasClass("fade")){var n=Y.getTransitionDurationFromElement(t);e(t).one(Y.TRANSITION_END,function(e){return i._destroyElement(t,e)}).emulateTransitionEnd(n)}else this._destroyElement(t)},i._destroyElement=function(t){e(t).detach().trigger("closed.bs.alert").remove()},t._jQueryInterface=function(i){return this.each(function(){var n=e(this),r=n.data("bs.alert");r||(r=new t(this),n.data("bs.alert",r)),"close"===i&&r[i](this)})},t._handleDismiss=function(t){return function(e){e&&e.preventDefault(),t.close(this)}},n(t,null,[{key:"VERSION",get:function(){return"4.4.1"}}]),t}();e(document).on("click.bs.alert.data-api",'[data-dismiss="alert"]',W._handleDismiss(new W)),e.fn.alert=W._jQueryInterface,e.fn.alert.Constructor=W,e.fn.alert.noConflict=function(){return e.fn.alert=X,W._jQueryInterface};var U=e.fn.button,V='[data-toggle^="button"]',H='input:not([type="hidden"])',q=function(){function t(t){this._element=t}var i=t.prototype;return i.toggle=function(){var t=!0,i=!0,n=e(this._element).closest('[data-toggle="buttons"]')[0];if(n){var r=this._element.querySelector(H);if(r){if("radio"===r.type)if(r.checked&&this._element.classList.contains("active"))t=!1;else{var o=n.querySelector(".active");o&&e(o).removeClass("active")}else"checkbox"===r.type?"LABEL"===this._element.tagName&&r.checked===this._element.classList.contains("active")&&(t=!1):t=!1;t&&(r.checked=!this._element.classList.contains("active"),e(r).trigger("change")),r.focus(),i=!1}}this._element.hasAttribute("disabled")||this._element.classList.contains("disabled")||(i&&this._element.setAttribute("aria-pressed",!this._element.classList.contains("active")),t&&e(this._element).toggleClass("active"))},i.dispose=function(){e.removeData(this._element,"bs.button"),this._element=null},t._jQueryInterface=function(i){return this.each(function(){var n=e(this).data("bs.button");n||(n=new t(this),e(this).data("bs.button",n)),"toggle"===i&&n[i]()})},n(t,null,[{key:"VERSION",get:function(){return"4.4.1"}}]),t}();e(document).on("click.bs.button.data-api",V,function(t){var i=t.target;if(e(i).hasClass("btn")||(i=e(i).closest(".btn")[0]),!i||i.hasAttribute("disabled")||i.classList.contains("disabled"))t.preventDefault();else{var n=i.querySelector(H);if(n&&(n.hasAttribute("disabled")||n.classList.contains("disabled")))return void t.preventDefault();q._jQueryInterface.call(e(i),"toggle")}}).on("focus.bs.button.data-api blur.bs.button.data-api",V,function(t){var i=e(t.target).closest(".btn")[0];e(i).toggleClass("focus",/^focus(in)?$/.test(t.type))}),e(window).on("load.bs.button.data-api",function(){for(var t=[].slice.call(document.querySelectorAll('[data-toggle="buttons"] .btn')),e=0,i=t.length;e<i;e++){var n=t[e],r=n.querySelector(H);r.checked||r.hasAttribute("checked")?n.classList.add("active"):n.classList.remove("active")}for(var o=0,a=(t=[].slice.call(document.querySelectorAll('[data-toggle="button"]'))).length;o<a;o++){var s=t[o];"true"===s.getAttribute("aria-pressed")?s.classList.add("active"):s.classList.remove("active")}}),e.fn.button=q._jQueryInterface,e.fn.button.Constructor=q,e.fn.button.noConflict=function(){return e.fn.button=U,q._jQueryInterface};var Z="bs.carousel",K="."+Z,J=e.fn.carousel,$={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},Q={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},tt={SLIDE:"slide"+K,SLID:"slid"+K,KEYDOWN:"keydown"+K,MOUSEENTER:"mouseenter"+K,MOUSELEAVE:"mouseleave"+K,TOUCHSTART:"touchstart"+K,TOUCHMOVE:"touchmove"+K,TOUCHEND:"touchend"+K,POINTERDOWN:"pointerdown"+K,POINTERUP:"pointerup"+K,DRAG_START:"dragstart"+K,LOAD_DATA_API:"load"+K+".data-api",CLICK_DATA_API:"click"+K+".data-api"},et=".active.carousel-item",it=".carousel-indicators",nt={TOUCH:"touch",PEN:"pen"},rt=function(){function t(t,e){this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(e),this._element=t,this._indicatorsElement=this._element.querySelector(it),this._touchSupported="ontouchstart"in document.documentElement||0<navigator.maxTouchPoints,this._pointerEvent=Boolean(window.PointerEvent||window.MSPointerEvent),this._addEventListeners()}var i=t.prototype;return i.next=function(){this._isSliding||this._slide("next")},i.nextWhenVisible=function(){!document.hidden&&e(this._element).is(":visible")&&"hidden"!==e(this._element).css("visibility")&&this.next()},i.prev=function(){this._isSliding||this._slide("prev")},i.pause=function(t){t||(this._isPaused=!0),this._element.querySelector(".carousel-item-next, .carousel-item-prev")&&(Y.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},i.cycle=function(t){t||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},i.to=function(t){var i=this;this._activeElement=this._element.querySelector(et);var n=this._getItemIndex(this._activeElement);if(!(t>this._items.length-1||t<0))if(this._isSliding)e(this._element).one(tt.SLID,function(){return i.to(t)});else{if(n===t)return this.pause(),void this.cycle();this._slide(n<t?"next":"prev",this._items[t])}},i.dispose=function(){e(this._element).off(K),e.removeData(this._element,Z),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},i._getConfig=function(t){return t=o({},$,{},t),Y.typeCheckConfig("carousel",t,Q),t},i._handleSwipe=function(){var t=Math.abs(this.touchDeltaX);if(!(t<=40)){var e=t/this.touchDeltaX;(this.touchDeltaX=0)<e&&this.prev(),e<0&&this.next()}},i._addEventListeners=function(){var t=this;this._config.keyboard&&e(this._element).on(tt.KEYDOWN,function(e){return t._keydown(e)}),"hover"===this._config.pause&&e(this._element).on(tt.MOUSEENTER,function(e){return t.pause(e)}).on(tt.MOUSELEAVE,function(e){return t.cycle(e)}),this._config.touch&&this._addTouchEventListeners()},i._addTouchEventListeners=function(){var t=this;if(this._touchSupported){var i=function(e){t._pointerEvent&&nt[e.originalEvent.pointerType.toUpperCase()]?t.touchStartX=e.originalEvent.clientX:t._pointerEvent||(t.touchStartX=e.originalEvent.touches[0].clientX)},n=function(e){t._pointerEvent&&nt[e.originalEvent.pointerType.toUpperCase()]&&(t.touchDeltaX=e.originalEvent.clientX-t.touchStartX),t._handleSwipe(),"hover"===t._config.pause&&(t.pause(),t.touchTimeout&&clearTimeout(t.touchTimeout),t.touchTimeout=setTimeout(function(e){return t.cycle(e)},500+t._config.interval))};e(this._element.querySelectorAll(".carousel-item img")).on(tt.DRAG_START,function(t){return t.preventDefault()}),this._pointerEvent?(e(this._element).on(tt.POINTERDOWN,function(t){return i(t)}),e(this._element).on(tt.POINTERUP,function(t){return n(t)}),this._element.classList.add("pointer-event")):(e(this._element).on(tt.TOUCHSTART,function(t){return i(t)}),e(this._element).on(tt.TOUCHMOVE,function(e){t.touchDeltaX=e.originalEvent.touches&&1<e.originalEvent.touches.length?0:e.originalEvent.touches[0].clientX-t.touchStartX}),e(this._element).on(tt.TOUCHEND,function(t){return n(t)}))}},i._keydown=function(t){if(!/input|textarea/i.test(t.target.tagName))switch(t.which){case 37:t.preventDefault(),this.prev();break;case 39:t.preventDefault(),this.next()}},i._getItemIndex=function(t){return this._items=t&&t.parentNode?[].slice.call(t.parentNode.querySelectorAll(".carousel-item")):[],this._items.indexOf(t)},i._getItemByDirection=function(t,e){var i="next"===t,n="prev"===t,r=this._getItemIndex(e);if((n&&0===r||i&&r===this._items.length-1)&&!this._config.wrap)return e;var o=(r+("prev"===t?-1:1))%this._items.length;return-1==o?this._items[this._items.length-1]:this._items[o]},i._triggerSlideEvent=function(t,i){var n=this._getItemIndex(t),r=this._getItemIndex(this._element.querySelector(et)),o=e.Event(tt.SLIDE,{relatedTarget:t,direction:i,from:r,to:n});return e(this._element).trigger(o),o},i._setActiveIndicatorElement=function(t){if(this._indicatorsElement){var i=[].slice.call(this._indicatorsElement.querySelectorAll(".active"));e(i).removeClass("active");var n=this._indicatorsElement.children[this._getItemIndex(t)];n&&e(n).addClass("active")}},i._slide=function(t,i){var n,r,o,a=this,s=this._element.querySelector(et),l=this._getItemIndex(s),h=i||s&&this._getItemByDirection(t,s),u=this._getItemIndex(h),c=Boolean(this._interval);if(o="next"===t?(n="carousel-item-left",r="carousel-item-next","left"):(n="carousel-item-right",r="carousel-item-prev","right"),h&&e(h).hasClass("active"))this._isSliding=!1;else if(!this._triggerSlideEvent(h,o).isDefaultPrevented()&&s&&h){this._isSliding=!0,c&&this.pause(),this._setActiveIndicatorElement(h);var p=e.Event(tt.SLID,{relatedTarget:h,direction:o,from:l,to:u});if(e(this._element).hasClass("slide")){e(h).addClass(r),Y.reflow(h),e(s).addClass(n),e(h).addClass(n);var d=parseInt(h.getAttribute("data-interval"),10);d?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=d):this._config.interval=this._config.defaultInterval||this._config.interval;var f=Y.getTransitionDurationFromElement(s);e(s).one(Y.TRANSITION_END,function(){e(h).removeClass(n+" "+r).addClass("active"),e(s).removeClass("active "+r+" "+n),a._isSliding=!1,setTimeout(function(){return e(a._element).trigger(p)},0)}).emulateTransitionEnd(f)}else e(s).removeClass("active"),e(h).addClass("active"),this._isSliding=!1,e(this._element).trigger(p);c&&this.cycle()}},t._jQueryInterface=function(i){return this.each(function(){var n=e(this).data(Z),r=o({},$,{},e(this).data());"object"==typeof i&&(r=o({},r,{},i));var a="string"==typeof i?i:r.slide;if(n||(n=new t(this,r),e(this).data(Z,n)),"number"==typeof i)n.to(i);else if("string"==typeof a){if("undefined"==typeof n[a])throw new TypeError('No method named "'+a+'"');n[a]()}else r.interval&&r.ride&&(n.pause(),n.cycle())})},t._dataApiClickHandler=function(i){var n=Y.getSelectorFromElement(this);if(n){var r=e(n)[0];if(r&&e(r).hasClass("carousel")){var a=o({},e(r).data(),{},e(this).data()),s=this.getAttribute("data-slide-to");s&&(a.interval=!1),t._jQueryInterface.call(e(r),a),s&&e(r).data(Z).to(s),i.preventDefault()}}},n(t,null,[{key:"VERSION",get:function(){return"4.4.1"}},{key:"Default",get:function(){return $}}]),t}();e(document).on(tt.CLICK_DATA_API,"[data-slide], [data-slide-to]",rt._dataApiClickHandler),e(window).on(tt.LOAD_DATA_API,function(){for(var t=[].slice.call(document.querySelectorAll('[data-ride="carousel"]')),i=0,n=t.length;i<n;i++){var r=e(t[i]);rt._jQueryInterface.call(r,r.data())}}),e.fn.carousel=rt._jQueryInterface,e.fn.carousel.Constructor=rt,e.fn.carousel.noConflict=function(){return e.fn.carousel=J,rt._jQueryInterface};var ot="bs.collapse",at="."+ot,st=e.fn.collapse,lt={toggle:!0,parent:""},ht={toggle:"boolean",parent:"(string|element)"},ut={SHOW:"show"+at,SHOWN:"shown"+at,HIDE:"hide"+at,HIDDEN:"hidden"+at,CLICK_DATA_API:"click"+at+".data-api"},ct='[data-toggle="collapse"]',pt=function(){function t(t,e){this._isTransitioning=!1,this._element=t,this._config=this._getConfig(e),this._triggerArray=[].slice.call(document.querySelectorAll('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'));for(var i=[].slice.call(document.querySelectorAll(ct)),n=0,r=i.length;n<r;n++){var o=i[n],a=Y.getSelectorFromElement(o),s=[].slice.call(document.querySelectorAll(a)).filter(function(e){return e===t});null!==a&&0<s.length&&(this._selector=a,this._triggerArray.push(o))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}var i=t.prototype;return i.toggle=function(){e(this._element).hasClass("show")?this.hide():this.show()},i.show=function(){var i,n,r=this;if(!(this._isTransitioning||e(this._element).hasClass("show")||(this._parent&&0===(i=[].slice.call(this._parent.querySelectorAll(".show, .collapsing")).filter(function(t){return"string"==typeof r._config.parent?t.getAttribute("data-parent")===r._config.parent:t.classList.contains("collapse")})).length&&(i=null),i&&(n=e(i).not(this._selector).data(ot))&&n._isTransitioning))){var o=e.Event(ut.SHOW);if(e(this._element).trigger(o),!o.isDefaultPrevented()){i&&(t._jQueryInterface.call(e(i).not(this._selector),"hide"),n||e(i).data(ot,null));var a=this._getDimension();e(this._element).removeClass("collapse").addClass("collapsing"),this._element.style[a]=0,this._triggerArray.length&&e(this._triggerArray).removeClass("collapsed").attr("aria-expanded",!0),this.setTransitioning(!0);var s="scroll"+(a[0].toUpperCase()+a.slice(1)),l=Y.getTransitionDurationFromElement(this._element);e(this._element).one(Y.TRANSITION_END,function(){e(r._element).removeClass("collapsing").addClass("collapse").addClass("show"),r._element.style[a]="",r.setTransitioning(!1),e(r._element).trigger(ut.SHOWN)}).emulateTransitionEnd(l),this._element.style[a]=this._element[s]+"px"}}},i.hide=function(){var t=this;if(!this._isTransitioning&&e(this._element).hasClass("show")){var i=e.Event(ut.HIDE);if(e(this._element).trigger(i),!i.isDefaultPrevented()){var n=this._getDimension();this._element.style[n]=this._element.getBoundingClientRect()[n]+"px",Y.reflow(this._element),e(this._element).addClass("collapsing").removeClass("collapse").removeClass("show");var r=this._triggerArray.length;if(0<r)for(var o=0;o<r;o++){var a=this._triggerArray[o],s=Y.getSelectorFromElement(a);null!==s&&(e([].slice.call(document.querySelectorAll(s))).hasClass("show")||e(a).addClass("collapsed").attr("aria-expanded",!1))}this.setTransitioning(!0),this._element.style[n]="";var l=Y.getTransitionDurationFromElement(this._element);e(this._element).one(Y.TRANSITION_END,function(){t.setTransitioning(!1),e(t._element).removeClass("collapsing").addClass("collapse").trigger(ut.HIDDEN)}).emulateTransitionEnd(l)}}},i.setTransitioning=function(t){this._isTransitioning=t},i.dispose=function(){e.removeData(this._element,ot),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},i._getConfig=function(t){return(t=o({},lt,{},t)).toggle=Boolean(t.toggle),Y.typeCheckConfig("collapse",t,ht),t},i._getDimension=function(){return e(this._element).hasClass("width")?"width":"height"},i._getParent=function(){var i,n=this;Y.isElement(this._config.parent)?(i=this._config.parent,"undefined"!=typeof this._config.parent.jquery&&(i=this._config.parent[0])):i=document.querySelector(this._config.parent);var r=[].slice.call(i.querySelectorAll('[data-toggle="collapse"][data-parent="'+this._config.parent+'"]'));return e(r).each(function(e,i){n._addAriaAndCollapsedClass(t._getTargetFromElement(i),[i])}),i},i._addAriaAndCollapsedClass=function(t,i){var n=e(t).hasClass("show");i.length&&e(i).toggleClass("collapsed",!n).attr("aria-expanded",n)},t._getTargetFromElement=function(t){var e=Y.getSelectorFromElement(t);return e?document.querySelector(e):null},t._jQueryInterface=function(i){return this.each(function(){var n=e(this),r=n.data(ot),a=o({},lt,{},n.data(),{},"object"==typeof i&&i?i:{});if(!r&&a.toggle&&/show|hide/.test(i)&&(a.toggle=!1),r||(r=new t(this,a),n.data(ot,r)),"string"==typeof i){if("undefined"==typeof r[i])throw new TypeError('No method named "'+i+'"');r[i]()}})},n(t,null,[{key:"VERSION",get:function(){return"4.4.1"}},{key:"Default",get:function(){return lt}}]),t}();e(document).on(ut.CLICK_DATA_API,ct,function(t){"A"===t.currentTarget.tagName&&t.preventDefault();var i=e(this),n=Y.getSelectorFromElement(this),r=[].slice.call(document.querySelectorAll(n));e(r).each(function(){var t=e(this),n=t.data(ot)?"toggle":i.data();pt._jQueryInterface.call(t,n)})}),e.fn.collapse=pt._jQueryInterface,e.fn.collapse.Constructor=pt,e.fn.collapse.noConflict=function(){return e.fn.collapse=st,pt._jQueryInterface};var dt="undefined"!=typeof window&&"undefined"!=typeof document&&"undefined"!=typeof navigator,ft=function(){for(var t=["Edge","Trident","Firefox"],e=0;e<t.length;e+=1)if(dt&&0<=navigator.userAgent.indexOf(t[e]))return 1;return 0}(),gt=dt&&window.Promise?function(t){var e=!1;return function(){e||(e=!0,window.Promise.resolve().then(function(){e=!1,t()}))}}:function(t){var e=!1;return function(){e||(e=!0,setTimeout(function(){e=!1,t()},ft))}},vt=dt&&!(!window.MSInputMethodContext||!document.documentMode),yt=dt&&/MSIE 10/.test(navigator.userAgent),mt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},_t=dt&&/Firefox/i.test(navigator.userAgent),xt=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],bt=xt.slice(3),wt={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(t){var e=t.placement,i=e.split("-")[0],n=e.split("-")[1];if(n){var r=t.offsets,o=r.reference,a=r.popper,s=-1!==["bottom","top"].indexOf(i),l=s?"left":"top",h=s?"width":"height",u={start:_({},l,o[l]),end:_({},l,o[l]+o[h]-a[h])};t.offsets.popper=mt({},a,u[n])}return t}},offset:{order:200,enabled:!0,fn:function(t,e){var i=e.offset,n=t.offsets,r=n.popper,o=n.reference,a=t.placement.split("-")[0],s=void 0;return s=k(+i)?[+i,0]:function(t,e,i,n){var r=[0,0],o=-1!==["right","left"].indexOf(a),s=t.split(/(\+|\-)/).map(function(t){return t.trim()}),l=s.indexOf(O(s,function(t){return-1!==t.search(/,|\s/)}));s[l]&&-1===s[l].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var h=/\s*,\s*|\s+/,u=-1!==l?[s.slice(0,l).concat([s[l].split(h)[0]]),[s[l].split(h)[1]].concat(s.slice(l+1))]:[s];return(u=u.map(function(t,n){var r=(1===n?!o:o)?"height":"width",a=!1;return t.reduce(function(t,e){return""===t[t.length-1]&&-1!==["+","-"].indexOf(e)?(t[t.length-1]=e,a=!0,t):a?(t[t.length-1]+=e,a=!1,t):t.concat(e)},[]).map(function(t){return function(t,e,i,n){var r=t.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),o=+r[1],a=r[2];if(!o)return t;if(0!==a.indexOf("%"))return"vh"!==a&&"vw"!==a?o:("vh"===a?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*o;var s=void 0;switch(a){case"%p":s=i;break;case"%":case"%r":default:s=n}return x(s)[e]/100*o}(t,r,e,i)})})).forEach(function(t,e){t.forEach(function(i,n){k(i)&&(r[e]+=i*("-"===t[n-1]?-1:1))})}),r}(i,r,o),"left"===a?(r.top+=s[0],r.left-=s[1]):"right"===a?(r.top+=s[0],r.left+=s[1]):"top"===a?(r.left+=s[0],r.top-=s[1]):"bottom"===a&&(r.left+=s[0],r.top+=s[1]),t.popper=r,t},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(t,e){var i=e.boundariesElement||p(t.instance.popper);t.instance.reference===i&&(i=p(i));var n=M("transform"),r=t.instance.popper.style,o=r.top,a=r.left,s=r[n];r.top="",r.left="",r[n]="";var l=C(t.instance.popper,t.instance.reference,e.padding,i,t.positionFixed);r.top=o,r.left=a,r[n]=s,e.boundaries=l;var h=t.offsets.popper,u={primary:function(t){var i=h[t];return h[t]<l[t]&&!e.escapeWithReference&&(i=Math.max(h[t],l[t])),_({},t,i)},secondary:function(t){var i="right"===t?"left":"top",n=h[i];return h[t]>l[t]&&!e.escapeWithReference&&(n=Math.min(h[i],l[t]-("right"===t?h.width:h.height))),_({},i,n)}};return e.priority.forEach(function(t){var e=-1!==["left","top"].indexOf(t)?"primary":"secondary";h=mt({},h,u[e](t))}),t.offsets.popper=h,t},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(t){var e=t.offsets,i=e.popper,n=e.reference,r=t.placement.split("-")[0],o=Math.floor,a=-1!==["top","bottom"].indexOf(r),s=a?"right":"bottom",l=a?"left":"top",h=a?"width":"height";return i[s]<o(n[l])&&(t.offsets.popper[l]=o(n[l])-i[h]),i[l]>o(n[s])&&(t.offsets.popper[l]=o(n[s])),t}},arrow:{order:500,enabled:!0,fn:function(t,e){var i;if(!D(t.instance.modifiers,"arrow","keepTogether"))return t;var n=e.element;if("string"==typeof n){if(!(n=t.instance.popper.querySelector(n)))return t}else if(!t.instance.popper.contains(n))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),t;var r=t.placement.split("-")[0],o=t.offsets,a=o.popper,l=o.reference,h=-1!==["left","right"].indexOf(r),u=h?"height":"width",c=h?"Top":"Left",p=c.toLowerCase(),d=h?"left":"top",f=h?"bottom":"right",g=P(n)[u];l[f]-g<a[p]&&(t.offsets.popper[p]-=a[p]-(l[f]-g)),l[p]+g>a[f]&&(t.offsets.popper[p]+=l[p]+g-a[f]),t.offsets.popper=x(t.offsets.popper);var v=l[p]+l[u]/2-g/2,y=s(t.instance.popper),m=parseFloat(y["margin"+c],10),b=parseFloat(y["border"+c+"Width"],10),w=v-t.offsets.popper[p]-m-b;return w=Math.max(Math.min(a[u]-g,w),0),t.arrowElement=n,t.offsets.arrow=(_(i={},p,Math.round(w)),_(i,d,""),i),t},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(t,e){if(R(t.instance.modifiers,"inner"))return t;if(t.flipped&&t.placement===t.originalPlacement)return t;var i=C(t.instance.popper,t.instance.reference,e.padding,e.boundariesElement,t.positionFixed),n=t.placement.split("-")[0],r=L(n),o=t.placement.split("-")[1]||"",a=[];switch(e.behavior){case"flip":a=[n,r];break;case"clockwise":a=j(n);break;case"counterclockwise":a=j(n,!0);break;default:a=e.behavior}return a.forEach(function(s,l){if(n!==s||a.length===l+1)return t;n=t.placement.split("-")[0],r=L(n);var h=t.offsets.popper,u=t.offsets.reference,c=Math.floor,p="left"===n&&c(h.right)>c(u.left)||"right"===n&&c(h.left)<c(u.right)||"top"===n&&c(h.bottom)>c(u.top)||"bottom"===n&&c(h.top)<c(u.bottom),d=c(h.left)<c(i.left),f=c(h.right)>c(i.right),g=c(h.top)<c(i.top),v=c(h.bottom)>c(i.bottom),y="left"===n&&d||"right"===n&&f||"top"===n&&g||"bottom"===n&&v,m=-1!==["top","bottom"].indexOf(n),_=!!e.flipVariations&&(m&&"start"===o&&d||m&&"end"===o&&f||!m&&"start"===o&&g||!m&&"end"===o&&v)||!!e.flipVariationsByContent&&(m&&"start"===o&&f||m&&"end"===o&&d||!m&&"start"===o&&v||!m&&"end"===o&&g);(p||y||_)&&(t.flipped=!0,(p||y)&&(n=a[l+1]),_&&(o="end"===o?"start":"start"===o?"end":o),t.placement=n+(o?"-"+o:""),t.offsets.popper=mt({},t.offsets.popper,I(t.instance.popper,t.offsets.reference,t.placement)),t=A(t.instance.modifiers,t,"flip"))}),t},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(t){var e=t.placement,i=e.split("-")[0],n=t.offsets,r=n.popper,o=n.reference,a=-1!==["left","right"].indexOf(i),s=-1===["top","left"].indexOf(i);return r[a?"left":"top"]=o[i]-(s?r[a?"width":"height"]:0),t.placement=L(e),t.offsets.popper=x(r),t}},hide:{order:800,enabled:!0,fn:function(t){if(!D(t.instance.modifiers,"hide","preventOverflow"))return t;var e=t.offsets.reference,i=O(t.instance.modifiers,function(t){return"preventOverflow"===t.name}).boundaries;if(e.bottom<i.top||e.left>i.right||e.top>i.bottom||e.right<i.left){if(!0===t.hide)return t;t.hide=!0,t.attributes["x-out-of-boundaries"]=""}else{if(!1===t.hide)return t;t.hide=!1,t.attributes["x-out-of-boundaries"]=!1}return t}},computeStyle:{order:850,enabled:!0,fn:function(t,e){var i=e.x,n=e.y,r=t.offsets.popper,o=O(t.instance.modifiers,function(t){return"applyStyle"===t.name}).gpuAcceleration;void 0!==o&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var a=void 0!==o?o:e.gpuAcceleration,s=p(t.instance.popper),l=b(s),h={position:r.position},u=function(t,e){function i(t){return t}var n=t.offsets,r=n.popper,o=n.reference,a=Math.round,s=Math.floor,l=a(o.width),h=a(r.width),u=-1!==["left","right"].indexOf(t.placement),c=-1!==t.placement.indexOf("-"),p=e?u||c||l%2==h%2?a:s:i,d=e?a:i;return{left:p(l%2==1&&h%2==1&&!c&&e?r.left-1:r.left),top:d(r.top),bottom:d(r.bottom),right:p(r.right)}}(t,window.devicePixelRatio<2||!_t),c="bottom"===i?"top":"bottom",d="right"===n?"left":"right",f=M("transform"),g=void 0,v=void 0;if(v="bottom"==c?"HTML"===s.nodeName?-s.clientHeight+u.bottom:-l.height+u.bottom:u.top,g="right"==d?"HTML"===s.nodeName?-s.clientWidth+u.right:-l.width+u.right:u.left,a&&f)h[f]="translate3d("+g+"px, "+v+"px, 0)",h[c]=0,h[d]=0,h.willChange="transform";else{var y="right"==d?-1:1;h[c]=v*("bottom"==c?-1:1),h[d]=g*y,h.willChange=c+", "+d}return t.attributes=mt({},{"x-placement":t.placement},t.attributes),t.styles=mt({},h,t.styles),t.arrowStyles=mt({},t.offsets.arrow,t.arrowStyles),t},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(t){return N(t.instance.popper,t.styles),function(t,e){Object.keys(e).forEach(function(i){!1!==e[i]?t.setAttribute(i,e[i]):t.removeAttribute(i)})}(t.instance.popper,t.attributes),t.arrowElement&&Object.keys(t.arrowStyles).length&&N(t.arrowElement,t.arrowStyles),t},onLoad:function(t,e,i,n,r){var o=T(r,e,t,i.positionFixed),a=E(i.placement,o,e,t,i.modifiers.flip.boundariesElement,i.modifiers.flip.padding);return e.setAttribute("x-placement",a),N(e,{position:i.positionFixed?"fixed":"absolute"}),i},gpuAcceleration:void 0}}},St=(function(t,e,i){e&&function(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(G.prototype,e)}(0,[{key:"update",value:function(){return(function(){if(!this.state.isDestroyed){var t={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};t.offsets.reference=T(this.state,this.popper,this.reference,this.options.positionFixed),t.placement=E(this.options.placement,t.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),t.originalPlacement=t.placement,t.positionFixed=this.options.positionFixed,t.offsets.popper=I(this.popper,t.offsets.reference,t.placement),t.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",t=A(this.modifiers,t),this.state.isCreated?this.options.onUpdate(t):(this.state.isCreated=!0,this.options.onCreate(t))}}).call(this)}},{key:"destroy",value:function(){return(function(){return this.state.isDestroyed=!0,R(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[M("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}).call(this)}},{key:"enableEventListeners",value:function(){return(function(){this.state.eventsEnabled||(this.state=function(t,e,i,n){i.updateBound=n,F(t).addEventListener("resize",i.updateBound,{passive:!0});var r=h(t);return function t(e,i,n,r){var o="BODY"===e.nodeName,a=o?e.ownerDocument.defaultView:e;a.addEventListener(i,n,{passive:!0}),o||t(h(a.parentNode),i,n,r),r.push(a)}(r,"scroll",i.updateBound,i.scrollParents),i.scrollElement=r,i.eventsEnabled=!0,i}(this.reference,0,this.state,this.scheduleUpdate))}).call(this)}},{key:"disableEventListeners",value:function(){return(function(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=function(t,e){return F(t).removeEventListener("resize",e.updateBound),e.scrollParents.forEach(function(t){t.removeEventListener("scroll",e.updateBound)}),e.updateBound=null,e.scrollParents=[],e.scrollElement=null,e.eventsEnabled=!1,e}(this.reference,this.state))}).call(this)}}]),G);St.Utils=("undefined"!=typeof window?window:global).PopperUtils,St.placements=xt,St.Defaults=wt;var Ct="bs.dropdown",Et="."+Ct,Tt=e.fn.dropdown,Pt=new RegExp("38|40|27"),Lt={HIDE:"hide"+Et,HIDDEN:"hidden"+Et,SHOW:"show"+Et,SHOWN:"shown"+Et,CLICK:"click"+Et,CLICK_DATA_API:"click"+Et+".data-api",KEYDOWN_DATA_API:"keydown"+Et+".data-api",KEYUP_DATA_API:"keyup"+Et+".data-api"},It='[data-toggle="dropdown"]',Ot=".dropdown-menu",At={offset:0,flip:!0,boundary:"scrollParent",reference:"toggle",display:"dynamic",popperConfig:null},Rt={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element)",display:"string",popperConfig:"(null|object)"},Mt=function(){function t(t,e){this._element=t,this._popper=null,this._config=this._getConfig(e),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}var i=t.prototype;return i.toggle=function(){if(!this._element.disabled&&!e(this._element).hasClass("disabled")){var i=e(this._menu).hasClass("show");t._clearMenus(),i||this.show(!0)}},i.show=function(i){if(void 0===i&&(i=!1),!(this._element.disabled||e(this._element).hasClass("disabled")||e(this._menu).hasClass("show"))){var n={relatedTarget:this._element},r=e.Event(Lt.SHOW,n),o=t._getParentFromElement(this._element);if(e(o).trigger(r),!r.isDefaultPrevented()){if(!this._inNavbar&&i){if("undefined"==typeof St)throw new TypeError("Bootstrap's dropdowns require Popper.js (https://popper.js.org/)");var a=this._element;"parent"===this._config.reference?a=o:Y.isElement(this._config.reference)&&(a=this._config.reference,"undefined"!=typeof this._config.reference.jquery&&(a=this._config.reference[0])),"scrollParent"!==this._config.boundary&&e(o).addClass("position-static"),this._popper=new St(a,this._menu,this._getPopperConfig())}"ontouchstart"in document.documentElement&&0===e(o).closest(".navbar-nav").length&&e(document.body).children().on("mouseover",null,e.noop),this._element.focus(),this._element.setAttribute("aria-expanded",!0),e(this._menu).toggleClass("show"),e(o).toggleClass("show").trigger(e.Event(Lt.SHOWN,n))}}},i.hide=function(){if(!this._element.disabled&&!e(this._element).hasClass("disabled")&&e(this._menu).hasClass("show")){var i={relatedTarget:this._element},n=e.Event(Lt.HIDE,i),r=t._getParentFromElement(this._element);e(r).trigger(n),n.isDefaultPrevented()||(this._popper&&this._popper.destroy(),e(this._menu).toggleClass("show"),e(r).toggleClass("show").trigger(e.Event(Lt.HIDDEN,i)))}},i.dispose=function(){e.removeData(this._element,Ct),e(this._element).off(Et),this._element=null,(this._menu=null)!==this._popper&&(this._popper.destroy(),this._popper=null)},i.update=function(){this._inNavbar=this._detectNavbar(),null!==this._popper&&this._popper.scheduleUpdate()},i._addEventListeners=function(){var t=this;e(this._element).on(Lt.CLICK,function(e){e.preventDefault(),e.stopPropagation(),t.toggle()})},i._getConfig=function(t){return t=o({},this.constructor.Default,{},e(this._element).data(),{},t),Y.typeCheckConfig("dropdown",t,this.constructor.DefaultType),t},i._getMenuElement=function(){if(!this._menu){var e=t._getParentFromElement(this._element);e&&(this._menu=e.querySelector(Ot))}return this._menu},i._getPlacement=function(){var t=e(this._element.parentNode),i="bottom-start";return t.hasClass("dropup")?(i="top-start",e(this._menu).hasClass("dropdown-menu-right")&&(i="top-end")):t.hasClass("dropright")?i="right-start":t.hasClass("dropleft")?i="left-start":e(this._menu).hasClass("dropdown-menu-right")&&(i="bottom-end"),i},i._detectNavbar=function(){return 0<e(this._element).closest(".navbar").length},i._getOffset=function(){var t=this,e={};return"function"==typeof this._config.offset?e.fn=function(e){return e.offsets=o({},e.offsets,{},t._config.offset(e.offsets,t._element)||{}),e}:e.offset=this._config.offset,e},i._getPopperConfig=function(){var t={placement:this._getPlacement(),modifiers:{offset:this._getOffset(),flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}};return"static"===this._config.display&&(t.modifiers.applyStyle={enabled:!1}),o({},t,{},this._config.popperConfig)},t._jQueryInterface=function(i){return this.each(function(){var n=e(this).data(Ct);if(n||(n=new t(this,"object"==typeof i?i:null),e(this).data(Ct,n)),"string"==typeof i){if("undefined"==typeof n[i])throw new TypeError('No method named "'+i+'"');n[i]()}})},t._clearMenus=function(i){if(!i||3!==i.which&&("keyup"!==i.type||9===i.which))for(var n=[].slice.call(document.querySelectorAll(It)),r=0,o=n.length;r<o;r++){var a=t._getParentFromElement(n[r]),s=e(n[r]).data(Ct),l={relatedTarget:n[r]};if(i&&"click"===i.type&&(l.clickEvent=i),s){var h=s._menu;if(e(a).hasClass("show")&&!(i&&("click"===i.type&&/input|textarea/i.test(i.target.tagName)||"keyup"===i.type&&9===i.which)&&e.contains(a,i.target))){var u=e.Event(Lt.HIDE,l);e(a).trigger(u),u.isDefaultPrevented()||("ontouchstart"in document.documentElement&&e(document.body).children().off("mouseover",null,e.noop),n[r].setAttribute("aria-expanded","false"),s._popper&&s._popper.destroy(),e(h).removeClass("show"),e(a).removeClass("show").trigger(e.Event(Lt.HIDDEN,l)))}}}},t._getParentFromElement=function(t){var e,i=Y.getSelectorFromElement(t);return i&&(e=document.querySelector(i)),e||t.parentNode},t._dataApiKeydownHandler=function(i){if((/input|textarea/i.test(i.target.tagName)?!(32===i.which||27!==i.which&&(40!==i.which&&38!==i.which||e(i.target).closest(Ot).length)):Pt.test(i.which))&&(i.preventDefault(),i.stopPropagation(),!this.disabled&&!e(this).hasClass("disabled"))){var n=t._getParentFromElement(this),r=e(n).hasClass("show");if(r||27!==i.which)if(r&&(!r||27!==i.which&&32!==i.which)){var o=[].slice.call(n.querySelectorAll(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)")).filter(function(t){return e(t).is(":visible")});if(0!==o.length){var a=o.indexOf(i.target);38===i.which&&0<a&&a--,40===i.which&&a<o.length-1&&a++,a<0&&(a=0),o[a].focus()}}else{if(27===i.which){var s=n.querySelector(It);e(s).trigger("focus")}e(this).trigger("click")}}},n(t,null,[{key:"VERSION",get:function(){return"4.4.1"}},{key:"Default",get:function(){return At}},{key:"DefaultType",get:function(){return Rt}}]),t}();e(document).on(Lt.KEYDOWN_DATA_API,It,Mt._dataApiKeydownHandler).on(Lt.KEYDOWN_DATA_API,Ot,Mt._dataApiKeydownHandler).on(Lt.CLICK_DATA_API+" "+Lt.KEYUP_DATA_API,Mt._clearMenus).on(Lt.CLICK_DATA_API,It,function(t){t.preventDefault(),t.stopPropagation(),Mt._jQueryInterface.call(e(this),"toggle")}).on(Lt.CLICK_DATA_API,".dropdown form",function(t){t.stopPropagation()}),e.fn.dropdown=Mt._jQueryInterface,e.fn.dropdown.Constructor=Mt,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=Tt,Mt._jQueryInterface};var Ft=".bs.modal",kt=e.fn.modal,Nt={backdrop:!0,keyboard:!0,focus:!0,show:!0},Dt={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},jt={HIDE:"hide"+Ft,HIDE_PREVENTED:"hidePrevented"+Ft,HIDDEN:"hidden"+Ft,SHOW:"show"+Ft,SHOWN:"shown"+Ft,FOCUSIN:"focusin"+Ft,RESIZE:"resize"+Ft,CLICK_DISMISS:"click.dismiss"+Ft,KEYDOWN_DISMISS:"keydown.dismiss"+Ft,MOUSEUP_DISMISS:"mouseup.dismiss"+Ft,MOUSEDOWN_DISMISS:"mousedown.dismiss"+Ft,CLICK_DATA_API:"click.bs.modal.data-api"},Gt=".modal-dialog",zt=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Bt=function(){function t(t,e){this._config=this._getConfig(e),this._element=t,this._dialog=t.querySelector(Gt),this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollbarWidth=0}var i=t.prototype;return i.toggle=function(t){return this._isShown?this.hide():this.show(t)},i.show=function(t){var i=this;if(!this._isShown&&!this._isTransitioning){e(this._element).hasClass("fade")&&(this._isTransitioning=!0);var n=e.Event(jt.SHOW,{relatedTarget:t});e(this._element).trigger(n),this._isShown||n.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),e(this._element).on(jt.CLICK_DISMISS,'[data-dismiss="modal"]',function(t){return i.hide(t)}),e(this._dialog).on(jt.MOUSEDOWN_DISMISS,function(){e(i._element).one(jt.MOUSEUP_DISMISS,function(t){e(t.target).is(i._element)&&(i._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return i._showElement(t)}))}},i.hide=function(t){var i=this;if(t&&t.preventDefault(),this._isShown&&!this._isTransitioning){var n=e.Event(jt.HIDE);if(e(this._element).trigger(n),this._isShown&&!n.isDefaultPrevented()){this._isShown=!1;var r=e(this._element).hasClass("fade");if(r&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),e(document).off(jt.FOCUSIN),e(this._element).removeClass("show"),e(this._element).off(jt.CLICK_DISMISS),e(this._dialog).off(jt.MOUSEDOWN_DISMISS),r){var o=Y.getTransitionDurationFromElement(this._element);e(this._element).one(Y.TRANSITION_END,function(t){return i._hideModal(t)}).emulateTransitionEnd(o)}else this._hideModal()}}},i.dispose=function(){[window,this._element,this._dialog].forEach(function(t){return e(t).off(Ft)}),e(document).off(jt.FOCUSIN),e.removeData(this._element,"bs.modal"),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._isTransitioning=null,this._scrollbarWidth=null},i.handleUpdate=function(){this._adjustDialog()},i._getConfig=function(t){return t=o({},Nt,{},t),Y.typeCheckConfig("modal",t,Dt),t},i._triggerBackdropTransition=function(){var t=this;if("static"===this._config.backdrop){var i=e.Event(jt.HIDE_PREVENTED);if(e(this._element).trigger(i),i.defaultPrevented)return;this._element.classList.add("modal-static");var n=Y.getTransitionDurationFromElement(this._element);e(this._element).one(Y.TRANSITION_END,function(){t._element.classList.remove("modal-static")}).emulateTransitionEnd(n),this._element.focus()}else this.hide()},i._showElement=function(t){function i(){n._config.focus&&n._element.focus(),n._isTransitioning=!1,e(n._element).trigger(a)}var n=this,r=e(this._element).hasClass("fade"),o=this._dialog?this._dialog.querySelector(".modal-body"):null;this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),e(this._dialog).hasClass("modal-dialog-scrollable")&&o?o.scrollTop=0:this._element.scrollTop=0,r&&Y.reflow(this._element),e(this._element).addClass("show"),this._config.focus&&this._enforceFocus();var a=e.Event(jt.SHOWN,{relatedTarget:t});if(r){var s=Y.getTransitionDurationFromElement(this._dialog);e(this._dialog).one(Y.TRANSITION_END,i).emulateTransitionEnd(s)}else i()},i._enforceFocus=function(){var t=this;e(document).off(jt.FOCUSIN).on(jt.FOCUSIN,function(i){document!==i.target&&t._element!==i.target&&0===e(t._element).has(i.target).length&&t._element.focus()})},i._setEscapeEvent=function(){var t=this;this._isShown&&this._config.keyboard?e(this._element).on(jt.KEYDOWN_DISMISS,function(e){27===e.which&&t._triggerBackdropTransition()}):this._isShown||e(this._element).off(jt.KEYDOWN_DISMISS)},i._setResizeEvent=function(){var t=this;this._isShown?e(window).on(jt.RESIZE,function(e){return t.handleUpdate(e)}):e(window).off(jt.RESIZE)},i._hideModal=function(){var t=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._isTransitioning=!1,this._showBackdrop(function(){e(document.body).removeClass("modal-open"),t._resetAdjustments(),t._resetScrollbar(),e(t._element).trigger(jt.HIDDEN)})},i._removeBackdrop=function(){this._backdrop&&(e(this._backdrop).remove(),this._backdrop=null)},i._showBackdrop=function(t){var i=this,n=e(this._element).hasClass("fade")?"fade":"";if(this._isShown&&this._config.backdrop){if(this._backdrop=document.createElement("div"),this._backdrop.className="modal-backdrop",n&&this._backdrop.classList.add(n),e(this._backdrop).appendTo(document.body),e(this._element).on(jt.CLICK_DISMISS,function(t){i._ignoreBackdropClick?i._ignoreBackdropClick=!1:t.target===t.currentTarget&&i._triggerBackdropTransition()}),n&&Y.reflow(this._backdrop),e(this._backdrop).addClass("show"),!t)return;if(!n)return void t();var r=Y.getTransitionDurationFromElement(this._backdrop);e(this._backdrop).one(Y.TRANSITION_END,t).emulateTransitionEnd(r)}else if(!this._isShown&&this._backdrop){e(this._backdrop).removeClass("show");var o=function(){i._removeBackdrop(),t&&t()};if(e(this._element).hasClass("fade")){var a=Y.getTransitionDurationFromElement(this._backdrop);e(this._backdrop).one(Y.TRANSITION_END,o).emulateTransitionEnd(a)}else o()}else t&&t()},i._adjustDialog=function(){var t=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&t&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!t&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},i._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},i._checkScrollbar=function(){var t=document.body.getBoundingClientRect();this._isBodyOverflowing=t.left+t.right<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},i._setScrollbar=function(){var t=this;if(this._isBodyOverflowing){var i=[].slice.call(document.querySelectorAll(zt)),n=[].slice.call(document.querySelectorAll(".sticky-top"));e(i).each(function(i,n){var r=n.style.paddingRight,o=e(n).css("padding-right");e(n).data("padding-right",r).css("padding-right",parseFloat(o)+t._scrollbarWidth+"px")}),e(n).each(function(i,n){var r=n.style.marginRight,o=e(n).css("margin-right");e(n).data("margin-right",r).css("margin-right",parseFloat(o)-t._scrollbarWidth+"px")});var r=document.body.style.paddingRight,o=e(document.body).css("padding-right");e(document.body).data("padding-right",r).css("padding-right",parseFloat(o)+this._scrollbarWidth+"px")}e(document.body).addClass("modal-open")},i._resetScrollbar=function(){var t=[].slice.call(document.querySelectorAll(zt));e(t).each(function(t,i){var n=e(i).data("padding-right");e(i).removeData("padding-right"),i.style.paddingRight=n||""});var i=[].slice.call(document.querySelectorAll(".sticky-top"));e(i).each(function(t,i){var n=e(i).data("margin-right");"undefined"!=typeof n&&e(i).css("margin-right",n).removeData("margin-right")});var n=e(document.body).data("padding-right");e(document.body).removeData("padding-right"),document.body.style.paddingRight=n||""},i._getScrollbarWidth=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",document.body.appendChild(t);var e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e},t._jQueryInterface=function(i,n){return this.each(function(){var r=e(this).data("bs.modal"),a=o({},Nt,{},e(this).data(),{},"object"==typeof i&&i?i:{});if(r||(r=new t(this,a),e(this).data("bs.modal",r)),"string"==typeof i){if("undefined"==typeof r[i])throw new TypeError('No method named "'+i+'"');r[i](n)}else a.show&&r.show(n)})},n(t,null,[{key:"VERSION",get:function(){return"4.4.1"}},{key:"Default",get:function(){return Nt}}]),t}();e(document).on(jt.CLICK_DATA_API,'[data-toggle="modal"]',function(t){var i,n=this,r=Y.getSelectorFromElement(this);r&&(i=document.querySelector(r));var a=e(i).data("bs.modal")?"toggle":o({},e(i).data(),{},e(this).data());"A"!==this.tagName&&"AREA"!==this.tagName||t.preventDefault();var s=e(i).one(jt.SHOW,function(t){t.isDefaultPrevented()||s.one(jt.HIDDEN,function(){e(n).is(":visible")&&n.focus()})});Bt._jQueryInterface.call(e(i),a,this)}),e.fn.modal=Bt._jQueryInterface,e.fn.modal.Constructor=Bt,e.fn.modal.noConflict=function(){return e.fn.modal=kt,Bt._jQueryInterface};var Yt=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],Xt=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,Wt=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i,Ut=".bs.tooltip",Vt=e.fn.tooltip,Ht=new RegExp("(^|\\s)bs-tooltip\\S+","g"),qt=["sanitize","whiteList","sanitizeFn"],Zt={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string|function)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)",sanitize:"boolean",sanitizeFn:"(null|function)",whiteList:"object",popperConfig:"(null|object)"},Kt={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},Jt={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent",sanitize:!0,sanitizeFn:null,whiteList:{"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},popperConfig:null},$t="show",Qt={HIDE:"hide"+Ut,HIDDEN:"hidden"+Ut,SHOW:"show"+Ut,SHOWN:"shown"+Ut,INSERTED:"inserted"+Ut,CLICK:"click"+Ut,FOCUSIN:"focusin"+Ut,FOCUSOUT:"focusout"+Ut,MOUSEENTER:"mouseenter"+Ut,MOUSELEAVE:"mouseleave"+Ut},te=function(){function t(t,e){if("undefined"==typeof St)throw new TypeError("Bootstrap's tooltips require Popper.js (https://popper.js.org/)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=t,this.config=this._getConfig(e),this.tip=null,this._setListeners()}var i=t.prototype;return i.enable=function(){this._isEnabled=!0},i.disable=function(){this._isEnabled=!1},i.toggleEnabled=function(){this._isEnabled=!this._isEnabled},i.toggle=function(t){if(this._isEnabled)if(t){var i=this.constructor.DATA_KEY,n=e(t.currentTarget).data(i);n||(n=new this.constructor(t.currentTarget,this._getDelegateConfig()),e(t.currentTarget).data(i,n)),n._activeTrigger.click=!n._activeTrigger.click,n._isWithActiveTrigger()?n._enter(null,n):n._leave(null,n)}else{if(e(this.getTipElement()).hasClass("show"))return void this._leave(null,this);this._enter(null,this)}},i.dispose=function(){clearTimeout(this._timeout),e.removeData(this.element,this.constructor.DATA_KEY),e(this.element).off(this.constructor.EVENT_KEY),e(this.element).closest(".modal").off("hide.bs.modal",this._hideModalHandler),this.tip&&e(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null},i.show=function(){var t=this;if("none"===e(this.element).css("display"))throw new Error("Please use show on visible elements");var i=e.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){e(this.element).trigger(i);var n=Y.findShadowRoot(this.element),r=e.contains(null!==n?n:this.element.ownerDocument.documentElement,this.element);if(i.isDefaultPrevented()||!r)return;var o=this.getTipElement(),a=Y.getUID(this.constructor.NAME);o.setAttribute("id",a),this.element.setAttribute("aria-describedby",a),this.setContent(),this.config.animation&&e(o).addClass("fade");var s="function"==typeof this.config.placement?this.config.placement.call(this,o,this.element):this.config.placement,l=this._getAttachment(s);this.addAttachmentClass(l);var h=this._getContainer();e(o).data(this.constructor.DATA_KEY,this),e.contains(this.element.ownerDocument.documentElement,this.tip)||e(o).appendTo(h),e(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new St(this.element,o,this._getPopperConfig(l)),e(o).addClass("show"),"ontouchstart"in document.documentElement&&e(document.body).children().on("mouseover",null,e.noop);var u=function(){t.config.animation&&t._fixTransition();var i=t._hoverState;t._hoverState=null,e(t.element).trigger(t.constructor.Event.SHOWN),"out"===i&&t._leave(null,t)};if(e(this.tip).hasClass("fade")){var c=Y.getTransitionDurationFromElement(this.tip);e(this.tip).one(Y.TRANSITION_END,u).emulateTransitionEnd(c)}else u()}},i.hide=function(t){function i(){n._hoverState!==$t&&r.parentNode&&r.parentNode.removeChild(r),n._cleanTipClass(),n.element.removeAttribute("aria-describedby"),e(n.element).trigger(n.constructor.Event.HIDDEN),null!==n._popper&&n._popper.destroy(),t&&t()}var n=this,r=this.getTipElement(),o=e.Event(this.constructor.Event.HIDE);if(e(this.element).trigger(o),!o.isDefaultPrevented()){if(e(r).removeClass("show"),"ontouchstart"in document.documentElement&&e(document.body).children().off("mouseover",null,e.noop),this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1,e(this.tip).hasClass("fade")){var a=Y.getTransitionDurationFromElement(r);e(r).one(Y.TRANSITION_END,i).emulateTransitionEnd(a)}else i();this._hoverState=""}},i.update=function(){null!==this._popper&&this._popper.scheduleUpdate()},i.isWithContent=function(){return Boolean(this.getTitle())},i.addAttachmentClass=function(t){e(this.getTipElement()).addClass("bs-tooltip-"+t)},i.getTipElement=function(){return this.tip=this.tip||e(this.config.template)[0],this.tip},i.setContent=function(){var t=this.getTipElement();this.setElementContent(e(t.querySelectorAll(".tooltip-inner")),this.getTitle()),e(t).removeClass("fade show")},i.setElementContent=function(t,i){"object"!=typeof i||!i.nodeType&&!i.jquery?this.config.html?(this.config.sanitize&&(i=z(i,this.config.whiteList,this.config.sanitizeFn)),t.html(i)):t.text(i):this.config.html?e(i).parent().is(t)||t.empty().append(i):t.text(e(i).text())},i.getTitle=function(){var t=this.element.getAttribute("data-original-title");return t=t||("function"==typeof this.config.title?this.config.title.call(this.element):this.config.title)},i._getPopperConfig=function(t){var e=this;return o({},{placement:t,modifiers:{offset:this._getOffset(),flip:{behavior:this.config.fallbackPlacement},arrow:{element:".arrow"},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function(t){t.originalPlacement!==t.placement&&e._handlePopperPlacementChange(t)},onUpdate:function(t){return e._handlePopperPlacementChange(t)}},{},this.config.popperConfig)},i._getOffset=function(){var t=this,e={};return"function"==typeof this.config.offset?e.fn=function(e){return e.offsets=o({},e.offsets,{},t.config.offset(e.offsets,t.element)||{}),e}:e.offset=this.config.offset,e},i._getContainer=function(){return!1===this.config.container?document.body:Y.isElement(this.config.container)?e(this.config.container):e(document).find(this.config.container)},i._getAttachment=function(t){return Kt[t.toUpperCase()]},i._setListeners=function(){var t=this;this.config.trigger.split(" ").forEach(function(i){if("click"===i)e(t.element).on(t.constructor.Event.CLICK,t.config.selector,function(e){return t.toggle(e)});else if("manual"!==i){var n="hover"===i?t.constructor.Event.MOUSEENTER:t.constructor.Event.FOCUSIN,r="hover"===i?t.constructor.Event.MOUSELEAVE:t.constructor.Event.FOCUSOUT;e(t.element).on(n,t.config.selector,function(e){return t._enter(e)}).on(r,t.config.selector,function(e){return t._leave(e)})}}),this._hideModalHandler=function(){t.element&&t.hide()},e(this.element).closest(".modal").on("hide.bs.modal",this._hideModalHandler),this.config.selector?this.config=o({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},i._fixTitle=function(){var t=typeof this.element.getAttribute("data-original-title");!this.element.getAttribute("title")&&"string"==t||(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},i._enter=function(t,i){var n=this.constructor.DATA_KEY;(i=i||e(t.currentTarget).data(n))||(i=new this.constructor(t.currentTarget,this._getDelegateConfig()),e(t.currentTarget).data(n,i)),t&&(i._activeTrigger["focusin"===t.type?"focus":"hover"]=!0),e(i.getTipElement()).hasClass("show")||i._hoverState===$t?i._hoverState=$t:(clearTimeout(i._timeout),i._hoverState=$t,i.config.delay&&i.config.delay.show?i._timeout=setTimeout(function(){i._hoverState===$t&&i.show()},i.config.delay.show):i.show())},i._leave=function(t,i){var n=this.constructor.DATA_KEY;(i=i||e(t.currentTarget).data(n))||(i=new this.constructor(t.currentTarget,this._getDelegateConfig()),e(t.currentTarget).data(n,i)),t&&(i._activeTrigger["focusout"===t.type?"focus":"hover"]=!1),i._isWithActiveTrigger()||(clearTimeout(i._timeout),i._hoverState="out",i.config.delay&&i.config.delay.hide?i._timeout=setTimeout(function(){"out"===i._hoverState&&i.hide()},i.config.delay.hide):i.hide())},i._isWithActiveTrigger=function(){for(var t in this._activeTrigger)if(this._activeTrigger[t])return!0;return!1},i._getConfig=function(t){var i=e(this.element).data();return Object.keys(i).forEach(function(t){-1!==qt.indexOf(t)&&delete i[t]}),"number"==typeof(t=o({},this.constructor.Default,{},i,{},"object"==typeof t&&t?t:{})).delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),Y.typeCheckConfig("tooltip",t,this.constructor.DefaultType),t.sanitize&&(t.template=z(t.template,t.whiteList,t.sanitizeFn)),t},i._getDelegateConfig=function(){var t={};if(this.config)for(var e in this.config)this.constructor.Default[e]!==this.config[e]&&(t[e]=this.config[e]);return t},i._cleanTipClass=function(){var t=e(this.getTipElement()),i=t.attr("class").match(Ht);null!==i&&i.length&&t.removeClass(i.join(""))},i._handlePopperPlacementChange=function(t){this.tip=t.instance.popper,this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(t.placement))},i._fixTransition=function(){var t=this.getTipElement(),i=this.config.animation;null===t.getAttribute("x-placement")&&(e(t).removeClass("fade"),this.config.animation=!1,this.hide(),this.show(),this.config.animation=i)},t._jQueryInterface=function(i){return this.each(function(){var n=e(this).data("bs.tooltip"),r="object"==typeof i&&i;if((n||!/dispose|hide/.test(i))&&(n||(n=new t(this,r),e(this).data("bs.tooltip",n)),"string"==typeof i)){if("undefined"==typeof n[i])throw new TypeError('No method named "'+i+'"');n[i]()}})},n(t,null,[{key:"VERSION",get:function(){return"4.4.1"}},{key:"Default",get:function(){return Jt}},{key:"NAME",get:function(){return"tooltip"}},{key:"DATA_KEY",get:function(){return"bs.tooltip"}},{key:"Event",get:function(){return Qt}},{key:"EVENT_KEY",get:function(){return Ut}},{key:"DefaultType",get:function(){return Zt}}]),t}();e.fn.tooltip=te._jQueryInterface,e.fn.tooltip.Constructor=te,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=Vt,te._jQueryInterface};var ee=".bs.popover",ie=e.fn.popover,ne=new RegExp("(^|\\s)bs-popover\\S+","g"),re=o({},te.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),oe=o({},te.DefaultType,{content:"(string|element|function)"}),ae={HIDE:"hide"+ee,HIDDEN:"hidden"+ee,SHOW:"show"+ee,SHOWN:"shown"+ee,INSERTED:"inserted"+ee,CLICK:"click"+ee,FOCUSIN:"focusin"+ee,FOCUSOUT:"focusout"+ee,MOUSEENTER:"mouseenter"+ee,MOUSELEAVE:"mouseleave"+ee},se=function(t){function i(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}(i,t);var r=i.prototype;return r.isWithContent=function(){return this.getTitle()||this._getContent()},r.addAttachmentClass=function(t){e(this.getTipElement()).addClass("bs-popover-"+t)},r.getTipElement=function(){return this.tip=this.tip||e(this.config.template)[0],this.tip},r.setContent=function(){var t=e(this.getTipElement());this.setElementContent(t.find(".popover-header"),this.getTitle());var i=this._getContent();"function"==typeof i&&(i=i.call(this.element)),this.setElementContent(t.find(".popover-body"),i),t.removeClass("fade show")},r._getContent=function(){return this.element.getAttribute("data-content")||this.config.content},r._cleanTipClass=function(){var t=e(this.getTipElement()),i=t.attr("class").match(ne);null!==i&&0<i.length&&t.removeClass(i.join(""))},i._jQueryInterface=function(t){return this.each(function(){var n=e(this).data("bs.popover"),r="object"==typeof t?t:null;if((n||!/dispose|hide/.test(t))&&(n||(n=new i(this,r),e(this).data("bs.popover",n)),"string"==typeof t)){if("undefined"==typeof n[t])throw new TypeError('No method named "'+t+'"');n[t]()}})},n(i,null,[{key:"VERSION",get:function(){return"4.4.1"}},{key:"Default",get:function(){return re}},{key:"NAME",get:function(){return"popover"}},{key:"DATA_KEY",get:function(){return"bs.popover"}},{key:"Event",get:function(){return ae}},{key:"EVENT_KEY",get:function(){return ee}},{key:"DefaultType",get:function(){return oe}}]),i}(te);e.fn.popover=se._jQueryInterface,e.fn.popover.Constructor=se,e.fn.popover.noConflict=function(){return e.fn.popover=ie,se._jQueryInterface};var le="scrollspy",he="bs.scrollspy",ue="."+he,ce=e.fn[le],pe={offset:10,method:"auto",target:""},de={offset:"number",method:"string",target:"(string|element)"},fe={ACTIVATE:"activate"+ue,SCROLL:"scroll"+ue,LOAD_DATA_API:"load"+ue+".data-api"},ge=".nav-link",ve=".list-group-item",ye=".dropdown-item",me=function(){function t(t,i){var n=this;this._element=t,this._scrollElement="BODY"===t.tagName?window:t,this._config=this._getConfig(i),this._selector=this._config.target+" "+ge+","+this._config.target+" "+ve+","+this._config.target+" "+ye,this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,e(this._scrollElement).on(fe.SCROLL,function(t){return n._process(t)}),this.refresh(),this._process()}var i=t.prototype;return i.refresh=function(){var t=this,i="auto"===this._config.method?this._scrollElement===this._scrollElement.window?"offset":"position":this._config.method,n="position"===i?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),[].slice.call(document.querySelectorAll(this._selector)).map(function(t){var r,o=Y.getSelectorFromElement(t);if(o&&(r=document.querySelector(o)),r){var a=r.getBoundingClientRect();if(a.width||a.height)return[e(r)[i]().top+n,o]}return null}).filter(function(t){return t}).sort(function(t,e){return t[0]-e[0]}).forEach(function(e){t._offsets.push(e[0]),t._targets.push(e[1])})},i.dispose=function(){e.removeData(this._element,he),e(this._scrollElement).off(ue),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},i._getConfig=function(t){if("string"!=typeof(t=o({},pe,{},"object"==typeof t&&t?t:{})).target){var i=e(t.target).attr("id");i||(i=Y.getUID(le),e(t.target).attr("id",i)),t.target="#"+i}return Y.typeCheckConfig(le,t,de),t},i._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},i._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},i._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height},i._process=function(){var t=this._getScrollTop()+this._config.offset,e=this._getScrollHeight(),i=this._config.offset+e-this._getOffsetHeight();if(this._scrollHeight!==e&&this.refresh(),i<=t){var n=this._targets[this._targets.length-1];this._activeTarget!==n&&this._activate(n)}else{if(this._activeTarget&&t<this._offsets[0]&&0<this._offsets[0])return this._activeTarget=null,void this._clear();for(var r=this._offsets.length;r--;)this._activeTarget!==this._targets[r]&&t>=this._offsets[r]&&("undefined"==typeof this._offsets[r+1]||t<this._offsets[r+1])&&this._activate(this._targets[r])}},i._activate=function(t){this._activeTarget=t,this._clear();var i=this._selector.split(",").map(function(e){return e+'[data-target="'+t+'"],'+e+'[href="'+t+'"]'}),n=e([].slice.call(document.querySelectorAll(i.join(","))));n.hasClass("dropdown-item")?(n.closest(".dropdown").find(".dropdown-toggle").addClass("active"),n.addClass("active")):(n.addClass("active"),n.parents(".nav, .list-group").prev(ge+", "+ve).addClass("active"),n.parents(".nav, .list-group").prev(".nav-item").children(ge).addClass("active")),e(this._scrollElement).trigger(fe.ACTIVATE,{relatedTarget:t})},i._clear=function(){[].slice.call(document.querySelectorAll(this._selector)).filter(function(t){return t.classList.contains("active")}).forEach(function(t){return t.classList.remove("active")})},t._jQueryInterface=function(i){return this.each(function(){var n=e(this).data(he);if(n||(n=new t(this,"object"==typeof i&&i),e(this).data(he,n)),"string"==typeof i){if("undefined"==typeof n[i])throw new TypeError('No method named "'+i+'"');n[i]()}})},n(t,null,[{key:"VERSION",get:function(){return"4.4.1"}},{key:"Default",get:function(){return pe}}]),t}();e(window).on(fe.LOAD_DATA_API,function(){for(var t=[].slice.call(document.querySelectorAll('[data-spy="scroll"]')),i=t.length;i--;){var n=e(t[i]);me._jQueryInterface.call(n,n.data())}}),e.fn[le]=me._jQueryInterface,e.fn[le].Constructor=me,e.fn[le].noConflict=function(){return e.fn[le]=ce,me._jQueryInterface};var _e=e.fn.tab,xe=function(){function t(t){this._element=t}var i=t.prototype;return i.show=function(){var t=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&e(this._element).hasClass("active")||e(this._element).hasClass("disabled"))){var i,n,r=e(this._element).closest(".nav, .list-group")[0],o=Y.getSelectorFromElement(this._element);if(r){var a="UL"===r.nodeName||"OL"===r.nodeName?"> li > .active":".active";n=(n=e.makeArray(e(r).find(a)))[n.length-1]}var s=e.Event("hide.bs.tab",{relatedTarget:this._element}),l=e.Event("show.bs.tab",{relatedTarget:n});if(n&&e(n).trigger(s),e(this._element).trigger(l),!l.isDefaultPrevented()&&!s.isDefaultPrevented()){o&&(i=document.querySelector(o)),this._activate(this._element,r);var h=function(){var i=e.Event("hidden.bs.tab",{relatedTarget:t._element}),r=e.Event("shown.bs.tab",{relatedTarget:n});e(n).trigger(i),e(t._element).trigger(r)};i?this._activate(i,i.parentNode,h):h()}}},i.dispose=function(){e.removeData(this._element,"bs.tab"),this._element=null},i._activate=function(t,i,n){function r(){return o._transitionComplete(t,a,n)}var o=this,a=(!i||"UL"!==i.nodeName&&"OL"!==i.nodeName?e(i).children(".active"):e(i).find("> li > .active"))[0],s=n&&a&&e(a).hasClass("fade");if(a&&s){var l=Y.getTransitionDurationFromElement(a);e(a).removeClass("show").one(Y.TRANSITION_END,r).emulateTransitionEnd(l)}else r()},i._transitionComplete=function(t,i,n){if(i){e(i).removeClass("active");var r=e(i.parentNode).find("> .dropdown-menu .active")[0];r&&e(r).removeClass("active"),"tab"===i.getAttribute("role")&&i.setAttribute("aria-selected",!1)}if(e(t).addClass("active"),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!0),Y.reflow(t),t.classList.contains("fade")&&t.classList.add("show"),t.parentNode&&e(t.parentNode).hasClass("dropdown-menu")){var o=e(t).closest(".dropdown")[0];if(o){var a=[].slice.call(o.querySelectorAll(".dropdown-toggle"));e(a).addClass("active")}t.setAttribute("aria-expanded",!0)}n&&n()},t._jQueryInterface=function(i){return this.each(function(){var n=e(this),r=n.data("bs.tab");if(r||(r=new t(this),n.data("bs.tab",r)),"string"==typeof i){if("undefined"==typeof r[i])throw new TypeError('No method named "'+i+'"');r[i]()}})},n(t,null,[{key:"VERSION",get:function(){return"4.4.1"}}]),t}();e(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',function(t){t.preventDefault(),xe._jQueryInterface.call(e(this),"show")}),e.fn.tab=xe._jQueryInterface,e.fn.tab.Constructor=xe,e.fn.tab.noConflict=function(){return e.fn.tab=_e,xe._jQueryInterface};var be=e.fn.toast,we={CLICK_DISMISS:"click.dismiss.bs.toast",HIDE:"hide.bs.toast",HIDDEN:"hidden.bs.toast",SHOW:"show.bs.toast",SHOWN:"shown.bs.toast"},Se="hide",Ce={animation:"boolean",autohide:"boolean",delay:"number"},Ee={animation:!0,autohide:!0,delay:500},Te=function(){function t(t,e){this._element=t,this._config=this._getConfig(e),this._timeout=null,this._setListeners()}var i=t.prototype;return i.show=function(){var t=this,i=e.Event(we.SHOW);if(e(this._element).trigger(i),!i.isDefaultPrevented()){this._config.animation&&this._element.classList.add("fade");var n=function(){t._element.classList.remove("showing"),t._element.classList.add("show"),e(t._element).trigger(we.SHOWN),t._config.autohide&&(t._timeout=setTimeout(function(){t.hide()},t._config.delay))};if(this._element.classList.remove(Se),Y.reflow(this._element),this._element.classList.add("showing"),this._config.animation){var r=Y.getTransitionDurationFromElement(this._element);e(this._element).one(Y.TRANSITION_END,n).emulateTransitionEnd(r)}else n()}},i.hide=function(){if(this._element.classList.contains("show")){var t=e.Event(we.HIDE);e(this._element).trigger(t),t.isDefaultPrevented()||this._close()}},i.dispose=function(){clearTimeout(this._timeout),this._timeout=null,this._element.classList.contains("show")&&this._element.classList.remove("show"),e(this._element).off(we.CLICK_DISMISS),e.removeData(this._element,"bs.toast"),this._element=null,this._config=null},i._getConfig=function(t){return t=o({},Ee,{},e(this._element).data(),{},"object"==typeof t&&t?t:{}),Y.typeCheckConfig("toast",t,this.constructor.DefaultType),t},i._setListeners=function(){var t=this;e(this._element).on(we.CLICK_DISMISS,'[data-dismiss="toast"]',function(){return t.hide()})},i._close=function(){function t(){i._element.classList.add(Se),e(i._element).trigger(we.HIDDEN)}var i=this;if(this._element.classList.remove("show"),this._config.animation){var n=Y.getTransitionDurationFromElement(this._element);e(this._element).one(Y.TRANSITION_END,t).emulateTransitionEnd(n)}else t()},t._jQueryInterface=function(i){return this.each(function(){var n=e(this),r=n.data("bs.toast");if(r||(r=new t(this,"object"==typeof i&&i),n.data("bs.toast",r)),"string"==typeof i){if("undefined"==typeof r[i])throw new TypeError('No method named "'+i+'"');r[i](this)}})},n(t,null,[{key:"VERSION",get:function(){return"4.4.1"}},{key:"DefaultType",get:function(){return Ce}},{key:"Default",get:function(){return Ee}}]),t}();e.fn.toast=Te._jQueryInterface,e.fn.toast.Constructor=Te,e.fn.toast.noConflict=function(){return e.fn.toast=be,Te._jQueryInterface},t.Alert=W,t.Button=q,t.Carousel=rt,t.Collapse=pt,t.Dropdown=Mt,t.Modal=Bt,t.Popover=se,t.Scrollspy=me,t.Tab=xe,t.Toast=Te,t.Tooltip=te,t.Util=Y,Object.defineProperty(t,"__esModule",{value:!0})}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):(t=t||self).metisMenu=e(t.jQuery)}(this,function(t){"use strict";function e(){return(e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}t=t&&t.hasOwnProperty("default")?t.default:t;var i,n,r,o=(n="transitionend",r={TRANSITION_END:"mmTransitionEnd",triggerTransitionEnd:function(t){i(t).trigger(n)},supportsTransitionEnd:function(){return Boolean(n)}},(i=t).fn.mmEmulateTransitionEnd=function(t){var e=this,n=!1;return i(this).one(r.TRANSITION_END,function(){n=!0}),setTimeout(function(){n||r.triggerTransitionEnd(e)},t),this},i.event.special[r.TRANSITION_END]={bindType:n,delegateType:n,handle:function(t){if(i(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}},r),a=t.fn.metisMenu,s={toggle:!0,preventDefault:!0,triggerElement:"a",parentTrigger:"li",subMenu:"ul"},l="show.metisMenu",h="shown.metisMenu",u="hide.metisMenu",c="hidden.metisMenu",p="click.metisMenu.data-api",d="mm-active",f="mm-collapse",g="mm-collapsing",v=function(){function i(t,i){this.element=t,this.config=e({},s,{},i),this.transitioning=null,this.init()}var n=i.prototype;return n.init=function(){var e=this,i=this.config,n=t(this.element);n.addClass("metismenu"),n.find(i.parentTrigger+"."+d).children(i.triggerElement).attr("aria-expanded","true"),n.find(i.parentTrigger+"."+d).parents(i.parentTrigger).addClass(d),n.find(i.parentTrigger+"."+d).parents(i.parentTrigger).children(i.triggerElement).attr("aria-expanded","true"),n.find(i.parentTrigger+"."+d).has(i.subMenu).children(i.subMenu).addClass(f+" mm-show"),n.find(i.parentTrigger).not("."+d).has(i.subMenu).children(i.subMenu).addClass(f),n.find(i.parentTrigger).children(i.triggerElement).on(p,function(n){var r=t(this);if("true"!==r.attr("aria-disabled")){i.preventDefault&&"#"===r.attr("href")&&n.preventDefault();var o=r.parent(i.parentTrigger),a=o.siblings(i.parentTrigger),s=a.children(i.triggerElement);o.hasClass(d)?(r.attr("aria-expanded","false"),e.removeActive(o)):(r.attr("aria-expanded","true"),e.setActive(o),i.toggle&&(e.removeActive(a),s.attr("aria-expanded","false"))),i.onTransitionStart&&i.onTransitionStart(n)}})},n.setActive=function(e){t(e).addClass(d);var i=t(e).children(this.config.subMenu);0<i.length&&!i.hasClass("mm-show")&&this.show(i)},n.removeActive=function(e){t(e).removeClass(d);var i=t(e).children(this.config.subMenu+".mm-show");0<i.length&&this.hide(i)},n.show=function(e){var i=this;if(!this.transitioning&&!t(e).hasClass(g)){var n=t(e),r=t.Event(l);if(n.trigger(r),!r.isDefaultPrevented()){if(n.parent(this.config.parentTrigger).addClass(d),this.config.toggle){var a=n.parent(this.config.parentTrigger).siblings().children(this.config.subMenu+".mm-show");this.hide(a)}n.removeClass(f).addClass(g).height(0),this.setTransitioning(!0),n.height(e[0].scrollHeight).one(o.TRANSITION_END,function(){i.config&&i.element&&(n.removeClass(g).addClass(f+" mm-show").height(""),i.setTransitioning(!1),n.trigger(h))}).mmEmulateTransitionEnd(350)}}},n.hide=function(e){var i=this;if(!this.transitioning&&t(e).hasClass("mm-show")){var n=t(e),r=t.Event(u);if(n.trigger(r),!r.isDefaultPrevented()){n.parent(this.config.parentTrigger).removeClass(d),n.height(n.height()),n.addClass(g).removeClass(f).removeClass("mm-show"),this.setTransitioning(!0);var a=function(){i.config&&i.element&&(i.transitioning&&i.config.onTransitionEnd&&i.config.onTransitionEnd(),i.setTransitioning(!1),n.trigger(c),n.removeClass(g).addClass(f))};0===n.height()||"none"===n.css("display")?a():n.height(0).one(o.TRANSITION_END,a).mmEmulateTransitionEnd(350)}}},n.setTransitioning=function(t){this.transitioning=t},n.dispose=function(){t.removeData(this.element,"metisMenu"),t(this.element).find(this.config.parentTrigger).children(this.config.triggerElement).off(p),this.transitioning=null,this.config=null,this.element=null},i.jQueryInterface=function(n){return this.each(function(){var r=t(this),o=r.data("metisMenu"),a=e({},s,{},r.data(),{},"object"==typeof n&&n?n:{});if(o||(o=new i(this,a),r.data("metisMenu",o)),"string"==typeof n){if(void 0===o[n])throw new Error('No method named "'+n+'"');o[n]()}})},i}();return t.fn.metisMenu=v.jQueryInterface,t.fn.metisMenu.Constructor=v,t.fn.metisMenu.noConflict=function(){return t.fn.metisMenu=a,v.jQueryInterface},v}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).SimpleBar=e()}(this,function(){"use strict";function t(t,e){return t(e={exports:{}},e.exports),e.exports}function e(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function i(t){if("number"==typeof t)return t;if("symbol"==typeof t||t&&"object"==typeof t&&Xe.call(t)==Fe)return Me;if(e(t)){var i="function"==typeof t.valueOf?t.valueOf():t;t=e(i)?i+"":i}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(ke,"");var n=De.test(t);return n||je.test(t)?Ge(t.slice(2),n?2:8):Ne.test(t)?Me:+t}function n(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function r(t){if("number"==typeof t)return t;if("symbol"==typeof t||t&&"object"==typeof t&&ri.call(t)==Ze)return qe;if(n(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=n(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Ke,"");var i=$e.test(t);return i||Qe.test(t)?ti(t.slice(2),i?2:8):Je.test(t)?qe:+t}function o(t){var e=-1,i=t?t.length:0;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function a(t){var e=-1,i=t?t.length:0;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function s(t){var e=-1,i=t?t.length:0;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function l(t,e){for(var i,n,r=t.length;r--;)if((i=t[r][0])===(n=e)||i!=i&&n!=n)return r;return-1}function h(t,e){var i,n,r=t.__data__;return("string"==(n=typeof(i=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==i:null===i)?r["string"==typeof e?"string":"hash"]:r.map}function u(t,e){var i=null==t?void 0:t[e];return function(t){return!(!p(t)||(e=t,bi&&bi in e))&&(function(t){var e=p(t)?Ci.call(t):"";return e==ci||e==pi}(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?Ei:di).test(function(t){if(null!=t){try{return wi.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t));var e}(i)?i:void 0}function c(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(hi);var i=function(){var n=arguments,r=e?e.apply(this,n):n[0],o=i.cache;if(o.has(r))return o.get(r);var a=t.apply(this,n);return i.cache=o.set(r,a),a};return i.cache=new(c.Cache||s),i}function p(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function d(t){return parseFloat(t)||0}function f(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return e.reduce(function(e,i){return e+d(t["border-"+i+"-width"])},0)}function g(t,e,i,n){return{x:t,y:e,width:i,height:n}}function v(){if("undefined"==typeof document)return 0;var t=document.body,e=document.createElement("div"),i=e.style;i.position="fixed",i.left=0,i.visibility="hidden",i.overflowY="scroll",t.appendChild(e);var n=e.getBoundingClientRect().right;return t.removeChild(e),n}var y,m,_,x,b=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},w=function(t){try{return!!t()}catch(t){return!0}},S={}.toString,C=function(t){return S.call(t).slice(8,-1)},E="".split,T=w(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==C(t)?E.call(t,""):Object(t)}:Object,P=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},L=function(t){return Object(P(t))},I=Math.ceil,O=Math.floor,A=function(t){return isNaN(t=+t)?0:(t>0?O:I)(t)},R=Math.min,M=function(t){return t>0?R(A(t),9007199254740991):0},F=function(t){return"object"==typeof t?null!==t:"function"==typeof t},k=Array.isArray||function(t){return"Array"==C(t)},N="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},D="object"==typeof window&&window&&window.Math==Math?window:"object"==typeof self&&self&&self.Math==Math?self:Function("return this")(),j=!w(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),G=D.document,z=F(G)&&F(G.createElement),B=!j&&!w(function(){return 7!=Object.defineProperty((t="div",z?G.createElement(t):{}),"a",{get:function(){return 7}}).a;var t}),Y=function(t){if(!F(t))throw TypeError(String(t)+" is not an object");return t},X=function(t,e){if(!F(t))return t;var i,n;if(e&&"function"==typeof(i=t.toString)&&!F(n=i.call(t)))return n;if("function"==typeof(i=t.valueOf)&&!F(n=i.call(t)))return n;if(!e&&"function"==typeof(i=t.toString)&&!F(n=i.call(t)))return n;throw TypeError("Can't convert object to primitive value")},W=Object.defineProperty,U={f:j?W:function(t,e,i){if(Y(t),e=X(e,!0),Y(i),B)try{return W(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported");return"value"in i&&(t[e]=i.value),t}},V=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},H=j?function(t,e,i){return U.f(t,e,V(1,i))}:function(t,e,i){return t[e]=i,t},q=function(t,e){try{H(D,t,e)}catch(i){D[t]=e}return e},Z=t(function(t){var e=D["__core-js_shared__"]||q("__core-js_shared__",{});(t.exports=function(t,i){return e[t]||(e[t]=void 0!==i?i:{})})("versions",[]).push({version:"3.0.1",mode:"global",copyright:"\xa9 2019 Denis Pushkarev (zloirock.ru)"})}),K=0,J=Math.random(),$=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++K+J).toString(36))},Q=!w(function(){return!String(Symbol())}),tt=Z("wks"),et=D.Symbol,it=function(t){return tt[t]||(tt[t]=Q&&et[t]||(Q?et:$)("Symbol."+t))},nt=it("species"),rt=function(t,e){var i=1==t,n=2==t,r=3==t,o=4==t,a=6==t,s=5==t||a,l=e||function(t,e){var i;return k(t)&&("function"!=typeof(i=t.constructor)||i!==Array&&!k(i.prototype)?F(i)&&null===(i=i[nt])&&(i=void 0):i=void 0),new(void 0===i?Array:i)(0===e?0:e)};return function(e,h,u){for(var c,p,d=L(e),f=T(d),g=function(t,e,i){return b(t),void 0===e?t:function(i,n,r){return t.call(e,i,n,r)}}(h,u),v=M(f.length),y=0,m=i?l(e,v):n?l(e,0):void 0;v>y;y++)if((s||y in f)&&(p=g(c=f[y],y,d),t))if(i)m[y]=p;else if(p)switch(t){case 3:return!0;case 5:return c;case 6:return y;case 2:m.push(c)}else if(o)return!1;return a?-1:r||o?o:m}},ot=it("species"),at={}.propertyIsEnumerable,st=Object.getOwnPropertyDescriptor,lt={f:st&&!at.call({1:2},1)?function(t){var e=st(this,t);return!!e&&e.enumerable}:at},ht=function(t){return T(P(t))},ut={}.hasOwnProperty,ct=function(t,e){return ut.call(t,e)},pt=Object.getOwnPropertyDescriptor,dt={f:j?pt:function(t,e){if(t=ht(t),e=X(e,!0),B)try{return pt(t,e)}catch(t){}if(ct(t,e))return V(!lt.f.call(t,e),t[e])}},ft=Z("native-function-to-string",Function.toString),gt=D.WeakMap,vt="function"==typeof gt&&/native code/.test(ft.call(gt)),yt=Z("keys"),mt={};if(vt){var _t=new(0,D.WeakMap),xt=_t.get,bt=_t.has,wt=_t.set;y=function(t,e){return wt.call(_t,t,e),e},m=function(t){return xt.call(_t,t)||{}},_=function(t){return bt.call(_t,t)}}else{var St=yt[x="state"]||(yt[x]=$(x));mt[St]=!0,y=function(t,e){return H(t,St,e),e},m=function(t){return ct(t,St)?t[St]:{}},_=function(t){return ct(t,St)}}var Ct={set:y,get:m,has:_,enforce:function(t){return _(t)?m(t):y(t,{})},getterFor:function(t){return function(e){var i;if(!F(e)||(i=m(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return i}}},Et=t(function(t){var e=Ct.get,i=Ct.enforce,n=String(ft).split("toString");Z("inspectSource",function(t){return ft.call(t)}),(t.exports=function(t,e,r,o){var a=!!o&&!!o.unsafe,s=!!o&&!!o.enumerable,l=!!o&&!!o.noTargetGet;"function"==typeof r&&("string"!=typeof e||ct(r,"name")||H(r,"name",e),i(r).source=n.join("string"==typeof e?e:"")),t!==D?(a?!l&&t[e]&&(s=!0):delete t[e],s?t[e]=r:H(t,e,r)):s?t[e]=r:q(e,r)})(Function.prototype,"toString",function(){return"function"==typeof this&&e(this).source||ft.call(this)})}),Tt=Math.max,Pt=Math.min,Lt=function(t,e,i){for(var n=ht(t),r=M(n.length),o=function(t,e){var n=A(i);return n<0?Tt(n+e,0):Pt(n,e)}(0,r);r>o;o++)if(o in n&&n[o]===e)return o||0;return-1},It=function(t,e){var i,n=ht(t),r=0,o=[];for(i in n)!ct(mt,i)&&ct(n,i)&&o.push(i);for(;e.length>r;)ct(n,i=e[r++])&&(~Lt(o,i)||o.push(i));return o},Ot=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],At=Ot.concat("length","prototype"),Rt={f:Object.getOwnPropertyNames||function(t){return It(t,At)}},Mt={f:Object.getOwnPropertySymbols},Ft=D.Reflect,kt=Ft&&Ft.ownKeys||function(t){var e=Rt.f(Y(t)),i=Mt.f;return i?e.concat(i(t)):e},Nt=function(t,e){for(var i=kt(e),n=U.f,r=dt.f,o=0;o<i.length;o++){var a=i[o];ct(t,a)||n(t,a,r(e,a))}},Dt=/#|\.prototype\./,jt=function(t,e){var i=zt[Gt(t)];return i==Yt||i!=Bt&&("function"==typeof e?w(e):!!e)},Gt=jt.normalize=function(t){return String(t).replace(Dt,".").toLowerCase()},zt=jt.data={},Bt=jt.NATIVE="N",Yt=jt.POLYFILL="P",Xt=jt,Wt=dt.f,Ut=function(t,e){var i,n,r,o,a,s=t.target,l=t.global,h=t.stat;if(i=l?D:h?D[s]||q(s,{}):(D[s]||{}).prototype)for(n in e){if(o=e[n],r=t.noTargetGet?(a=Wt(i,n))&&a.value:i[n],!Xt(l?n:s+(h?".":"#")+n,t.forced)&&void 0!==r){if(typeof o==typeof r)continue;Nt(o,r)}(t.sham||r&&r.sham)&&H(o,"sham",!0),Et(i,n,o,t)}},Vt=rt(2);Ut({target:"Array",proto:!0,forced:!!w(function(){var t=[];return(t.constructor={})[ot]=function(){return{foo:1}},1!==t.filter(Boolean).foo})},{filter:function(t){return Vt(this,t,arguments[1])}});var Ht=function(t,e){var i=[][t];return!i||!w(function(){i.call(null,e||function(){throw 1},1)})},qt=[].forEach,Zt=rt(0),Kt=Ht("forEach")?function(t){return Zt(this,t,arguments[1])}:qt;Ut({target:"Array",proto:!0,forced:[].forEach!=Kt},{forEach:Kt}),Ut({target:"Array",proto:!0,forced:Ht("reduce")},{reduce:function(t){return function(t,e,i,n,r){b(e);var o=L(t),a=T(o),s=M(o.length),l=0;if(i<2)for(;;){if(l in a){n=a[l],l+=1;break}if(l+=1,s<=l)throw TypeError("Reduce of empty array with no initial value")}for(;s>l;l+=1)l in a&&(n=e(n,a[l],l,o));return n}(this,t,arguments.length,arguments[1])}});var Jt=U.f,$t=Function.prototype,Qt=$t.toString,te=/^\s*function ([^ (]*)/;!j||"name"in $t||Jt($t,"name",{configurable:!0,get:function(){try{return Qt.call(this).match(te)[1]}catch(t){return""}}});var ee=Object.keys||function(t){return It(t,Ot)},ie=Object.assign,ne=!ie||w(function(){var t={},e={},i=Symbol();return t[i]=7,"abcdefghijklmnopqrst".split("").forEach(function(t){e[t]=t}),7!=ie({},t)[i]||"abcdefghijklmnopqrst"!=ee(ie({},e)).join("")})?function(t,e){for(var i=L(t),n=arguments.length,r=1,o=Mt.f,a=lt.f;n>r;)for(var s,l=T(arguments[r++]),h=o?ee(l).concat(o(l)):ee(l),u=h.length,c=0;u>c;)a.call(l,s=h[c++])&&(i[s]=l[s]);return i}:ie;Ut({target:"Object",stat:!0,forced:Object.assign!==ne},{assign:ne});var re="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff",oe="["+re+"]",ae=RegExp("^"+oe+oe+"*"),se=RegExp(oe+oe+"*$"),le=D.parseInt,he=/^[-+]?0[xX]/,ue=8!==le(re+"08")||22!==le(re+"0x16")?function(t,e){var i=function(t,e){return t=String(P(t)),t=t.replace(ae,""),t=t.replace(se,"")}(String(t));return le(i,e>>>0||(he.test(i)?16:10))}:le;Ut({global:!0,forced:parseInt!=ue},{parseInt:ue});var ce,pe,de=RegExp.prototype.exec,fe=String.prototype.replace,ge=de,ve=(ce=/a/,pe=/b*/g,de.call(ce,"a"),de.call(pe,"a"),0!==ce.lastIndex||0!==pe.lastIndex),ye=void 0!==/()??/.exec("")[1];(ve||ye)&&(ge=function(t){var e,i,n,r;return ye&&(i=new RegExp("^"+this.source+"$(?!\\s)",(function(){var t=Y(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}).call(this))),ve&&(e=this.lastIndex),n=de.call(this,t),ve&&n&&(this.lastIndex=this.global?n.index+n[0].length:e),ye&&n&&n.length>1&&fe.call(n[0],i,function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(n[r]=void 0)}),n});var me=ge;Ut({target:"RegExp",proto:!0,forced:/./.exec!==me},{exec:me});var _e=function(t,e,i){return e+(i?function(t,e,i){var n,r,o=String(P(t)),a=A(e),s=o.length;return a<0||a>=s?"":(n=o.charCodeAt(a))<55296||n>56319||a+1===s||(r=o.charCodeAt(a+1))<56320||r>57343?o.charAt(a):o.slice(a,a+2)}(t,e).length:1)},xe=function(t,e){var i=t.exec;if("function"==typeof i){var n=i.call(t,e);if("object"!=typeof n)throw TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==C(t))throw TypeError("RegExp#exec called on incompatible receiver");return me.call(t,e)},be=it("species"),we=!w(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),Se=!w(function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var i="ab".split(t);return 2!==i.length||"a"!==i[0]||"b"!==i[1]}),Ce=function(t,e,i,n){var r=it(t),o=!w(function(){var e={};return e[r]=function(){return 7},7!=""[t](e)}),a=o&&!w(function(){var e=!1,i=/a/;return i.exec=function(){return e=!0,null},"split"===t&&(i.constructor={},i.constructor[be]=function(){return i}),i[r](""),!e});if(!o||!a||"replace"===t&&!we||"split"===t&&!Se){var s=/./[r],l=i(r,""[t],function(t,e,i,n,r){return e.exec===me?o&&!r?{done:!0,value:s.call(e,i,n)}:{done:!0,value:t.call(i,e,n)}:{done:!1}}),h=l[0],u=l[1];Et(String.prototype,t,h),Et(RegExp.prototype,r,2==e?function(t,e){return u.call(t,this,e)}:function(t){return u.call(t,this)}),n&&H(RegExp.prototype[r],"sham",!0)}};Ce("match",1,function(t,e,i){return[function(e){var i=P(this),n=null==e?void 0:e[t];return void 0!==n?n.call(e,i):new RegExp(e)[t](String(i))},function(t){var n=i(e,t,this);if(n.done)return n.value;var r=Y(t),o=String(this);if(!r.global)return xe(r,o);var a=r.unicode;r.lastIndex=0;for(var s,l=[],h=0;null!==(s=xe(r,o));){var u=String(s[0]);l[h]=u,""===u&&(r.lastIndex=_e(o,M(r.lastIndex),a)),h++}return 0===h?null:l}]});var Ee=Math.max,Te=Math.min,Pe=Math.floor,Le=/\$([$&`']|\d\d?|<[^>]*>)/g,Ie=/\$([$&`']|\d\d?)/g;Ce("replace",2,function(t,e,i){return[function(i,n){var r=P(this),o=null==i?void 0:i[t];return void 0!==o?o.call(i,r,n):e.call(String(r),i,n)},function(t,n){var r=i(e,t,this,n);if(r.done)return r.value;var o=Y(t),a=String(this),s="function"==typeof n;s||(n=String(n));var l=o.global;if(l){var h=o.unicode;o.lastIndex=0}for(var u=[];;){var c=xe(o,a);if(null===c)break;if(u.push(c),!l)break;""===String(c[0])&&(o.lastIndex=_e(a,M(o.lastIndex),h))}for(var p,d="",f=0,g=0;g<u.length;g++){c=u[g];for(var v=String(c[0]),y=Ee(Te(A(c.index),a.length),0),m=[],_=1;_<c.length;_++)m.push(void 0===(p=c[_])?p:String(p));var x=c.groups;if(s){var b=[v].concat(m,y,a);void 0!==x&&b.push(x);var w=String(n.apply(void 0,b))}else w=function(t,i,n,r,o,a){var s=n+t.length,l=r.length,h=Ie;return void 0!==o&&(o=L(o),h=Le),e.call(a,h,function(e,a){var h;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return i.slice(0,n);case"'":return i.slice(s);case"<":h=o[a.slice(1,-1)];break;default:var u=+a;if(0===u)return e;if(u>l){var c=Pe(u/10);return 0===c?e:c<=l?void 0===r[c-1]?a.charAt(1):r[c-1]+a.charAt(1):e}h=r[u-1]}return void 0===h?"":h})}(v,a,y,m,x,n);y>=f&&(d+=a.slice(f,y)+w,f=y+v.length)}return d+a.slice(f)}]});for(var Oe in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var Ae=D[Oe],Re=Ae&&Ae.prototype;if(Re&&Re.forEach!==Kt)try{H(Re,"forEach",Kt)}catch(b){Re.forEach=Kt}}var Me=NaN,Fe="[object Symbol]",ke=/^\s+|\s+$/g,Ne=/^[-+]0x[0-9a-f]+$/i,De=/^0b[01]+$/i,je=/^0o[0-7]+$/i,Ge=parseInt,ze="object"==typeof N&&N&&N.Object===Object&&N,Be="object"==typeof self&&self&&self.Object===Object&&self,Ye=ze||Be||Function("return this")(),Xe=Object.prototype.toString,We=Math.max,Ue=Math.min,Ve=function(){return Ye.Date.now()},He=function(t,n,r){var o=!0,a=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return e(r)&&(o="leading"in r?!!r.leading:o,a="trailing"in r?!!r.trailing:a),function(t,n,r){function o(e){var i=u,n=c;return u=c=void 0,v=e,d=t.apply(n,i)}function a(t){var e=t-g;return void 0===g||e>=n||e<0||m&&t-v>=p}function s(){var t=Ve();if(a(t))return l(t);f=setTimeout(s,function(e){var i=n-(t-g);return m?Ue(i,p-(t-v)):i}())}function l(t){return f=void 0,_&&u?o(t):(u=c=void 0,d)}function h(){var t=Ve(),e=a(t);if(u=arguments,c=this,g=t,e){if(void 0===f)return function(t){return v=t,f=setTimeout(s,n),y?o(t):d}(g);if(m)return f=setTimeout(s,n),o(g)}return void 0===f&&(f=setTimeout(s,n)),d}var u,c,p,d,f,g,v=0,y=!1,m=!1,_=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return n=i(n)||0,e(r)&&(y=!!r.leading,p=(m="maxWait"in r)?We(i(r.maxWait)||0,n):p,_="trailing"in r?!!r.trailing:_),h.cancel=function(){void 0!==f&&clearTimeout(f),v=0,u=g=c=f=void 0},h.flush=function(){return void 0===f?d:l(Ve())},h}(t,n,{leading:o,maxWait:n,trailing:a})},qe=NaN,Ze="[object Symbol]",Ke=/^\s+|\s+$/g,Je=/^[-+]0x[0-9a-f]+$/i,$e=/^0b[01]+$/i,Qe=/^0o[0-7]+$/i,ti=parseInt,ei="object"==typeof N&&N&&N.Object===Object&&N,ii="object"==typeof self&&self&&self.Object===Object&&self,ni=ei||ii||Function("return this")(),ri=Object.prototype.toString,oi=Math.max,ai=Math.min,si=function(){return ni.Date.now()},li=function(t,e,i){function o(e){var i=u,n=c;return u=c=void 0,v=e,d=t.apply(n,i)}function a(t){var i=t-g;return void 0===g||i>=e||i<0||m&&t-v>=p}function s(){var t=si();if(a(t))return l(t);f=setTimeout(s,function(i){var n=e-(t-g);return m?ai(n,p-(t-v)):n}())}function l(t){return f=void 0,_&&u?o(t):(u=c=void 0,d)}function h(){var t=si(),i=a(t);if(u=arguments,c=this,g=t,i){if(void 0===f)return function(t){return v=t,f=setTimeout(s,e),y?o(t):d}(g);if(m)return f=setTimeout(s,e),o(g)}return void 0===f&&(f=setTimeout(s,e)),d}var u,c,p,d,f,g,v=0,y=!1,m=!1,_=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return e=r(e)||0,n(i)&&(y=!!i.leading,p=(m="maxWait"in i)?oi(r(i.maxWait)||0,e):p,_="trailing"in i?!!i.trailing:_),h.cancel=function(){void 0!==f&&clearTimeout(f),v=0,u=g=c=f=void 0},h.flush=function(){return void 0===f?d:l(si())},h},hi="Expected a function",ui="__lodash_hash_undefined__",ci="[object Function]",pi="[object GeneratorFunction]",di=/^\[object .+?Constructor\]$/,fi="object"==typeof N&&N&&N.Object===Object&&N,gi="object"==typeof self&&self&&self.Object===Object&&self,vi=fi||gi||Function("return this")(),yi=Array.prototype,mi=Function.prototype,_i=Object.prototype,xi=vi["__core-js_shared__"],bi=function(){var t=/[^.]+$/.exec(xi&&xi.keys&&xi.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),wi=mi.toString,Si=_i.hasOwnProperty,Ci=_i.toString,Ei=RegExp("^"+wi.call(Si).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ti=yi.splice,Pi=u(vi,"Map"),Li=u(Object,"create");o.prototype.clear=function(){this.__data__=Li?Li(null):{}},o.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},o.prototype.get=function(t){var e=this.__data__;if(Li){var i=e[t];return i===ui?void 0:i}return Si.call(e,t)?e[t]:void 0},o.prototype.has=function(t){var e=this.__data__;return Li?void 0!==e[t]:Si.call(e,t)},o.prototype.set=function(t,e){return this.__data__[t]=Li&&void 0===e?ui:e,this},a.prototype.clear=function(){this.__data__=[]},a.prototype.delete=function(t){var e=this.__data__,i=l(e,t);return!(i<0||(i==e.length-1?e.pop():Ti.call(e,i,1),0))},a.prototype.get=function(t){var e=this.__data__,i=l(e,t);return i<0?void 0:e[i][1]},a.prototype.has=function(t){return l(this.__data__,t)>-1},a.prototype.set=function(t,e){var i=this.__data__,n=l(i,t);return n<0?i.push([t,e]):i[n][1]=e,this},s.prototype.clear=function(){this.__data__={hash:new o,map:new(Pi||a),string:new o}},s.prototype.delete=function(t){return h(this,t).delete(t)},s.prototype.get=function(t){return h(this,t).get(t)},s.prototype.has=function(t){return h(this,t).has(t)},s.prototype.set=function(t,e){return h(this,t).set(t,e),this},c.Cache=s;var Ii=c,Oi=function(){function t(t,e){var i=-1;return t.some(function(t,n){return t[0]===e&&(i=n,!0)}),i}return"undefined"!=typeof Map?Map:function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var i=t(this.__entries__,e),n=this.__entries__[i];return n&&n[1]},e.prototype.set=function(e,i){var n=t(this.__entries__,e);~n?this.__entries__[n][1]=i:this.__entries__.push([e,i])},e.prototype.delete=function(e){var i=this.__entries__,n=t(i,e);~n&&i.splice(n,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var i=0,n=this.__entries__;i<n.length;i++){var r=n[i];t.call(e,r[1],r[0])}},e}()}(),Ai="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,Ri="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),Mi="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(Ri):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)},Fi=2,ki=20,Ni=["top","right","bottom","left","width","height","size","weight"],Di="undefined"!=typeof MutationObserver,ji=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){function i(){o&&(o=!1,t()),a&&r()}function n(){Mi(i)}function r(){var t=Date.now();if(o){if(t-s<Fi)return;a=!0}else o=!0,a=!1,setTimeout(n,e);s=t}var o=!1,a=!1,s=0;return r}(this.refresh.bind(this),ki)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,i=e.indexOf(t);~i&&e.splice(i,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return t.forEach(function(t){return t.broadcastActive()}),t.length>0},t.prototype.connect_=function(){Ai&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Di?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){Ai&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,i=void 0===e?"":e;Ni.some(function(t){return!!~i.indexOf(t)})&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),Gi=function(t,e){for(var i=0,n=Object.keys(e);i<n.length;i++){var r=n[i];Object.defineProperty(t,r,{value:e[r],enumerable:!1,writable:!1,configurable:!0})}return t},zi=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||Ri},Bi=g(0,0,0,0),Yi="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof zi(t).SVGGraphicsElement}:function(t){return t instanceof zi(t).SVGElement&&"function"==typeof t.getBBox},Xi=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=g(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=function(t){return Ai?Yi(t)?function(e){var i=t.getBBox();return g(0,0,i.width,i.height)}():function(t){var e=t.clientWidth,i=t.clientHeight;if(!e&&!i)return Bi;var n=zi(t).getComputedStyle(t),r=function(t){for(var e={},i=0,n=["top","right","bottom","left"];i<n.length;i++){var r=n[i];e[r]=d(t["padding-"+r])}return e}(n),o=r.left+r.right,a=r.top+r.bottom,s=d(n.width),l=d(n.height);if("border-box"===n.boxSizing&&(Math.round(s+o)!==e&&(s-=f(n,"left","right")+o),Math.round(l+a)!==i&&(l-=f(n,"top","bottom")+a)),t!==zi(t).document.documentElement){var h=Math.round(s+o)-e,u=Math.round(l+a)-i;1!==Math.abs(h)&&(s-=h),1!==Math.abs(u)&&(l-=u)}return g(r.left,r.top,s,l)}(t):Bi}(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),Wi=function(){function t(t,e,i){if(this.activeObservations_=[],this.observations_=new Oi,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=i}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof zi(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new Xi(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof zi(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(e){e.isActive()&&t.activeObservations_.push(e)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map(function(t){return new function(e,i){var n,r,o,a,s,l,h,u=(r=(n=t.broadcastRect()).x,o=n.y,a=n.width,s=n.height,l="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,h=Object.create(l.prototype),Gi(h,{x:r,y:o,width:a,height:s,top:o,right:r+a,bottom:s+o,left:r}),h);Gi(this,{target:e,contentRect:u})}(t.target,0)});this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),Ui="undefined"!=typeof WeakMap?new WeakMap:new Oi,Vi=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var i=ji.getInstance(),n=new Wi(e,i,this);Ui.set(this,n)};["observe","unobserve","disconnect"].forEach(function(t){Vi.prototype[t]=function(){var e;return(e=Ui.get(this))[t].apply(e,arguments)}});var Hi=void 0!==Ri.ResizeObserver?Ri.ResizeObserver:Vi,qi=!("undefined"==typeof window||!window.document||!window.document.createElement),Zi=function(){function t(e,i){var n=this;this.onScroll=function(){n.scrollXTicking||(window.requestAnimationFrame(n.scrollX),n.scrollXTicking=!0),n.scrollYTicking||(window.requestAnimationFrame(n.scrollY),n.scrollYTicking=!0)},this.scrollX=function(){n.axis.x.isOverflowing&&(n.showScrollbar("x"),n.positionScrollbar("x")),n.scrollXTicking=!1},this.scrollY=function(){n.axis.y.isOverflowing&&(n.showScrollbar("y"),n.positionScrollbar("y")),n.scrollYTicking=!1},this.onMouseEnter=function(){n.showScrollbar("x"),n.showScrollbar("y")},this.onMouseMove=function(t){n.mouseX=t.clientX,n.mouseY=t.clientY,(n.axis.x.isOverflowing||n.axis.x.forceVisible)&&n.onMouseMoveForAxis("x"),(n.axis.y.isOverflowing||n.axis.y.forceVisible)&&n.onMouseMoveForAxis("y")},this.onMouseLeave=function(){n.onMouseMove.cancel(),(n.axis.x.isOverflowing||n.axis.x.forceVisible)&&n.onMouseLeaveForAxis("x"),(n.axis.y.isOverflowing||n.axis.y.forceVisible)&&n.onMouseLeaveForAxis("y"),n.mouseX=-1,n.mouseY=-1},this.onWindowResize=function(){n.scrollbarWidth=v(),n.hideNativeScrollbar()},this.hideScrollbars=function(){n.axis.x.track.rect=n.axis.x.track.el.getBoundingClientRect(),n.axis.y.track.rect=n.axis.y.track.el.getBoundingClientRect(),n.isWithinBounds(n.axis.y.track.rect)||(n.axis.y.scrollbar.el.classList.remove(n.classNames.visible),n.axis.y.isVisible=!1),n.isWithinBounds(n.axis.x.track.rect)||(n.axis.x.scrollbar.el.classList.remove(n.classNames.visible),n.axis.x.isVisible=!1)},this.onPointerEvent=function(t){var e,i;n.axis.x.scrollbar.rect=n.axis.x.scrollbar.el.getBoundingClientRect(),n.axis.y.scrollbar.rect=n.axis.y.scrollbar.el.getBoundingClientRect(),(n.axis.x.isOverflowing||n.axis.x.forceVisible)&&(i=n.isWithinBounds(n.axis.x.scrollbar.rect)),(n.axis.y.isOverflowing||n.axis.y.forceVisible)&&(e=n.isWithinBounds(n.axis.y.scrollbar.rect)),(e||i)&&(t.preventDefault(),t.stopPropagation(),"mousedown"===t.type&&(e&&n.onDragStart(t,"y"),i&&n.onDragStart(t,"x")))},this.drag=function(e){var i=n.axis[n.draggedAxis].track,r=i.rect[n.axis[n.draggedAxis].sizeAttr],o=n.axis[n.draggedAxis].scrollbar,a=n.contentWrapperEl[n.axis[n.draggedAxis].scrollSizeAttr],s=parseInt(n.elStyles[n.axis[n.draggedAxis].sizeAttr],10);e.preventDefault(),e.stopPropagation();var l=(("y"===n.draggedAxis?e.pageY:e.pageX)-i.rect[n.axis[n.draggedAxis].offsetAttr]-n.axis[n.draggedAxis].dragOffset)/(r-o.size)*(a-s);"x"===n.draggedAxis&&(l=n.isRtl&&t.getRtlHelpers().isRtlScrollbarInverted?l-(r+o.size):l,l=n.isRtl&&t.getRtlHelpers().isRtlScrollingInverted?-l:l),n.contentWrapperEl[n.axis[n.draggedAxis].scrollOffsetAttr]=l},this.onEndDrag=function(t){t.preventDefault(),t.stopPropagation(),n.el.classList.remove(n.classNames.dragging),document.removeEventListener("mousemove",n.drag,!0),document.removeEventListener("mouseup",n.onEndDrag,!0),n.removePreventClickId=window.setTimeout(function(){document.removeEventListener("click",n.preventClick,!0),document.removeEventListener("dblclick",n.preventClick,!0),n.removePreventClickId=null})},this.preventClick=function(t){t.preventDefault(),t.stopPropagation()},this.el=e,this.minScrollbarWidth=20,this.options=Object.assign({},t.defaultOptions,i),this.classNames=Object.assign({},t.defaultOptions.classNames,this.options.classNames),this.axis={x:{scrollOffsetAttr:"scrollLeft",sizeAttr:"width",scrollSizeAttr:"scrollWidth",offsetAttr:"left",overflowAttr:"overflowX",dragOffset:0,isOverflowing:!0,isVisible:!1,forceVisible:!1,track:{},scrollbar:{}},y:{scrollOffsetAttr:"scrollTop",sizeAttr:"height",scrollSizeAttr:"scrollHeight",offsetAttr:"top",overflowAttr:"overflowY",dragOffset:0,isOverflowing:!0,isVisible:!1,forceVisible:!1,track:{},scrollbar:{}}},this.removePreventClickId=null,this.el.SimpleBar||(this.recalculate=He(this.recalculate.bind(this),64),this.onMouseMove=He(this.onMouseMove.bind(this),64),this.hideScrollbars=li(this.hideScrollbars.bind(this),this.options.timeout),this.onWindowResize=li(this.onWindowResize.bind(this),64,{leading:!0}),t.getRtlHelpers=Ii(t.getRtlHelpers),this.init())}t.getRtlHelpers=function(){var e=document.createElement("div");e.innerHTML='<div class="hs-dummy-scrollbar-size"><div style="height: 200%; width: 200%; margin: 10px 0;"></div></div>';var i=e.firstElementChild;document.body.appendChild(i);var n=i.firstElementChild;i.scrollLeft=0;var r=t.getOffset(i),o=t.getOffset(n);i.scrollLeft=999;var a=t.getOffset(n);return{isRtlScrollingInverted:r.left!==o.left&&o.left-a.left!=0,isRtlScrollbarInverted:r.left!==o.left}},t.initHtmlApi=function(){this.initDOMLoadedElements=this.initDOMLoadedElements.bind(this),"undefined"!=typeof MutationObserver&&(this.globalObserver=new MutationObserver(function(e){e.forEach(function(e){Array.prototype.forEach.call(e.addedNodes,function(e){1===e.nodeType&&(e.hasAttribute("data-simplebar")?!e.SimpleBar&&new t(e,t.getElOptions(e)):Array.prototype.forEach.call(e.querySelectorAll("[data-simplebar]"),function(e){!e.SimpleBar&&new t(e,t.getElOptions(e))}))}),Array.prototype.forEach.call(e.removedNodes,function(t){1===t.nodeType&&(t.hasAttribute("data-simplebar")?t.SimpleBar&&t.SimpleBar.unMount():Array.prototype.forEach.call(t.querySelectorAll("[data-simplebar]"),function(t){t.SimpleBar&&t.SimpleBar.unMount()}))})})}),this.globalObserver.observe(document,{childList:!0,subtree:!0})),"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?window.setTimeout(this.initDOMLoadedElements):(document.addEventListener("DOMContentLoaded",this.initDOMLoadedElements),window.addEventListener("load",this.initDOMLoadedElements))},t.getElOptions=function(t){return Array.prototype.reduce.call(t.attributes,function(t,e){var i=e.name.match(/data-simplebar-(.+)/);if(i){var n=i[1].replace(/\W+(.)/g,function(t,e){return e.toUpperCase()});switch(e.value){case"true":t[n]=!0;break;case"false":t[n]=!1;break;case void 0:t[n]=!0;break;default:t[n]=e.value}}return t},{})},t.removeObserver=function(){this.globalObserver.disconnect()},t.initDOMLoadedElements=function(){document.removeEventListener("DOMContentLoaded",this.initDOMLoadedElements),window.removeEventListener("load",this.initDOMLoadedElements),Array.prototype.forEach.call(document.querySelectorAll("[data-simplebar]"),function(e){e.SimpleBar||new t(e,t.getElOptions(e))})},t.getOffset=function(t){var e=t.getBoundingClientRect();return{top:e.top+(window.pageYOffset||document.documentElement.scrollTop),left:e.left+(window.pageXOffset||document.documentElement.scrollLeft)}};var e=t.prototype;return e.init=function(){this.el.SimpleBar=this,qi&&(this.initDOM(),this.scrollbarWidth=v(),this.recalculate(),this.initListeners())},e.initDOM=function(){var t=this;if(Array.prototype.filter.call(this.el.children,function(e){return e.classList.contains(t.classNames.wrapper)}).length)this.wrapperEl=this.el.querySelector("."+this.classNames.wrapper),this.contentWrapperEl=this.el.querySelector("."+this.classNames.contentWrapper),this.offsetEl=this.el.querySelector("."+this.classNames.offset),this.maskEl=this.el.querySelector("."+this.classNames.mask),this.contentEl=this.el.querySelector("."+this.classNames.contentEl),this.placeholderEl=this.el.querySelector("."+this.classNames.placeholder),this.heightAutoObserverWrapperEl=this.el.querySelector("."+this.classNames.heightAutoObserverWrapperEl),this.heightAutoObserverEl=this.el.querySelector("."+this.classNames.heightAutoObserverEl),this.axis.x.track.el=this.findChild(this.el,"."+this.classNames.track+"."+this.classNames.horizontal),this.axis.y.track.el=this.findChild(this.el,"."+this.classNames.track+"."+this.classNames.vertical);else{for(this.wrapperEl=document.createElement("div"),this.contentWrapperEl=document.createElement("div"),this.offsetEl=document.createElement("div"),this.maskEl=document.createElement("div"),this.contentEl=document.createElement("div"),this.placeholderEl=document.createElement("div"),this.heightAutoObserverWrapperEl=document.createElement("div"),this.heightAutoObserverEl=document.createElement("div"),this.wrapperEl.classList.add(this.classNames.wrapper),this.contentWrapperEl.classList.add(this.classNames.contentWrapper),this.offsetEl.classList.add(this.classNames.offset),this.maskEl.classList.add(this.classNames.mask),this.contentEl.classList.add(this.classNames.contentEl),this.placeholderEl.classList.add(this.classNames.placeholder),this.heightAutoObserverWrapperEl.classList.add(this.classNames.heightAutoObserverWrapperEl),this.heightAutoObserverEl.classList.add(this.classNames.heightAutoObserverEl);this.el.firstChild;)this.contentEl.appendChild(this.el.firstChild);this.contentWrapperEl.appendChild(this.contentEl),this.offsetEl.appendChild(this.contentWrapperEl),this.maskEl.appendChild(this.offsetEl),this.heightAutoObserverWrapperEl.appendChild(this.heightAutoObserverEl),this.wrapperEl.appendChild(this.heightAutoObserverWrapperEl),this.wrapperEl.appendChild(this.maskEl),this.wrapperEl.appendChild(this.placeholderEl),this.el.appendChild(this.wrapperEl)}if(!this.axis.x.track.el||!this.axis.y.track.el){var e=document.createElement("div"),i=document.createElement("div");e.classList.add(this.classNames.track),i.classList.add(this.classNames.scrollbar),e.appendChild(i),this.axis.x.track.el=e.cloneNode(!0),this.axis.x.track.el.classList.add(this.classNames.horizontal),this.axis.y.track.el=e.cloneNode(!0),this.axis.y.track.el.classList.add(this.classNames.vertical),this.el.appendChild(this.axis.x.track.el),this.el.appendChild(this.axis.y.track.el)}this.axis.x.scrollbar.el=this.axis.x.track.el.querySelector("."+this.classNames.scrollbar),this.axis.y.scrollbar.el=this.axis.y.track.el.querySelector("."+this.classNames.scrollbar),this.options.autoHide||(this.axis.x.scrollbar.el.classList.add(this.classNames.visible),this.axis.y.scrollbar.el.classList.add(this.classNames.visible)),this.el.setAttribute("data-simplebar","init")},e.initListeners=function(){var t=this;this.options.autoHide&&this.el.addEventListener("mouseenter",this.onMouseEnter),["mousedown","click","dblclick"].forEach(function(e){t.el.addEventListener(e,t.onPointerEvent,!0)}),["touchstart","touchend","touchmove"].forEach(function(e){t.el.addEventListener(e,t.onPointerEvent,{capture:!0,passive:!0})}),this.el.addEventListener("mousemove",this.onMouseMove),this.el.addEventListener("mouseleave",this.onMouseLeave),this.contentWrapperEl.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.onWindowResize),this.resizeObserver=new Hi(this.recalculate),this.resizeObserver.observe(this.el),this.resizeObserver.observe(this.contentEl)},e.recalculate=function(){var t=this.heightAutoObserverEl.offsetHeight<=1,e=this.heightAutoObserverEl.offsetWidth<=1;this.elStyles=window.getComputedStyle(this.el),this.isRtl="rtl"===this.elStyles.direction,this.contentEl.style.padding=this.elStyles.paddingTop+" "+this.elStyles.paddingRight+" "+this.elStyles.paddingBottom+" "+this.elStyles.paddingLeft,this.wrapperEl.style.margin="-"+this.elStyles.paddingTop+" -"+this.elStyles.paddingRight+" -"+this.elStyles.paddingBottom+" -"+this.elStyles.paddingLeft,this.contentWrapperEl.style.height=t?"auto":"100%",this.placeholderEl.style.width=e?this.contentEl.offsetWidth+"px":"auto",this.placeholderEl.style.height=this.contentEl.scrollHeight+"px",this.axis.x.isOverflowing=this.contentWrapperEl.scrollWidth>this.contentWrapperEl.offsetWidth,this.axis.y.isOverflowing=this.contentWrapperEl.scrollHeight>this.contentWrapperEl.offsetHeight,this.axis.x.isOverflowing="hidden"!==this.elStyles.overflowX&&this.axis.x.isOverflowing,this.axis.y.isOverflowing="hidden"!==this.elStyles.overflowY&&this.axis.y.isOverflowing,this.axis.x.forceVisible="x"===this.options.forceVisible||!0===this.options.forceVisible,this.axis.y.forceVisible="y"===this.options.forceVisible||!0===this.options.forceVisible,this.hideNativeScrollbar(),this.axis.x.track.rect=this.axis.x.track.el.getBoundingClientRect(),this.axis.y.track.rect=this.axis.y.track.el.getBoundingClientRect(),this.axis.x.scrollbar.size=this.getScrollbarSize("x"),this.axis.y.scrollbar.size=this.getScrollbarSize("y"),this.axis.x.scrollbar.el.style.width=this.axis.x.scrollbar.size+"px",this.axis.y.scrollbar.el.style.height=this.axis.y.scrollbar.size+"px",this.positionScrollbar("x"),this.positionScrollbar("y"),this.toggleTrackVisibility("x"),this.toggleTrackVisibility("y")},e.getScrollbarSize=function(t){void 0===t&&(t="y");var e,i=this.axis[t].track.rect[this.axis[t].sizeAttr];if(this.axis[t].isOverflowing){var n=i/(this.scrollbarWidth?this.contentWrapperEl[this.axis[t].scrollSizeAttr]:this.contentWrapperEl[this.axis[t].scrollSizeAttr]-this.minScrollbarWidth);return e=Math.max(~~(n*i),this.options.scrollbarMinSize),this.options.scrollbarMaxSize&&(e=Math.min(e,this.options.scrollbarMaxSize)),e}},e.positionScrollbar=function(e){void 0===e&&(e="y");var i=this.contentWrapperEl[this.axis[e].scrollSizeAttr],n=this.axis[e].track.rect[this.axis[e].sizeAttr],r=parseInt(this.elStyles[this.axis[e].sizeAttr],10),o=this.axis[e].scrollbar,a=this.contentWrapperEl[this.axis[e].scrollOffsetAttr],s=(a="x"===e&&this.isRtl&&t.getRtlHelpers().isRtlScrollingInverted?-a:a)/(i-r),l=~~((n-o.size)*s);l="x"===e&&this.isRtl&&t.getRtlHelpers().isRtlScrollbarInverted?l+(n-o.size):l,o.el.style.transform="x"===e?"translate3d("+l+"px, 0, 0)":"translate3d(0, "+l+"px, 0)"},e.toggleTrackVisibility=function(t){void 0===t&&(t="y");var e=this.axis[t].track.el,i=this.axis[t].scrollbar.el;this.axis[t].isOverflowing||this.axis[t].forceVisible?(e.style.visibility="visible",this.contentWrapperEl.style[this.axis[t].overflowAttr]="scroll"):(e.style.visibility="hidden",this.contentWrapperEl.style[this.axis[t].overflowAttr]="hidden"),i.style.display=this.axis[t].isOverflowing?"block":"none"},e.hideNativeScrollbar=function(){this.offsetEl.style[this.isRtl?"left":"right"]=this.axis.y.isOverflowing||this.axis.y.forceVisible?"-"+(this.scrollbarWidth||this.minScrollbarWidth)+"px":0,this.offsetEl.style.bottom=this.axis.x.isOverflowing||this.axis.x.forceVisible?"-"+(this.scrollbarWidth||this.minScrollbarWidth)+"px":0,this.scrollbarWidth||(this.contentWrapperEl.style[[this.isRtl?"paddingLeft":"paddingRight"]]=this.axis.y.isOverflowing||this.axis.y.forceVisible?this.minScrollbarWidth+"px":0,this.contentWrapperEl.style.paddingBottom=this.axis.x.isOverflowing||this.axis.x.forceVisible?this.minScrollbarWidth+"px":0)},e.onMouseMoveForAxis=function(t){void 0===t&&(t="y"),this.axis[t].track.rect=this.axis[t].track.el.getBoundingClientRect(),this.axis[t].scrollbar.rect=this.axis[t].scrollbar.el.getBoundingClientRect(),this.isWithinBounds(this.axis[t].scrollbar.rect)?this.axis[t].scrollbar.el.classList.add(this.classNames.hover):this.axis[t].scrollbar.el.classList.remove(this.classNames.hover),this.isWithinBounds(this.axis[t].track.rect)?(this.showScrollbar(t),this.axis[t].track.el.classList.add(this.classNames.hover)):this.axis[t].track.el.classList.remove(this.classNames.hover)},e.onMouseLeaveForAxis=function(t){void 0===t&&(t="y"),this.axis[t].track.el.classList.remove(this.classNames.hover),this.axis[t].scrollbar.el.classList.remove(this.classNames.hover)},e.showScrollbar=function(t){void 0===t&&(t="y"),this.axis[t].isVisible||(this.axis[t].scrollbar.el.classList.add(this.classNames.visible),this.axis[t].isVisible=!0),this.options.autoHide&&this.hideScrollbars()},e.onDragStart=function(t,e){void 0===e&&(e="y"),this.axis[e].dragOffset=("y"===e?t.pageY:t.pageX)-this.axis[e].scrollbar.el.getBoundingClientRect()[this.axis[e].offsetAttr],this.draggedAxis=e,this.el.classList.add(this.classNames.dragging),document.addEventListener("mousemove",this.drag,!0),document.addEventListener("mouseup",this.onEndDrag,!0),null===this.removePreventClickId?(document.addEventListener("click",this.preventClick,!0),document.addEventListener("dblclick",this.preventClick,!0)):(window.clearTimeout(this.removePreventClickId),this.removePreventClickId=null)},e.getContentElement=function(){return this.contentEl},e.getScrollElement=function(){return this.contentWrapperEl},e.removeListeners=function(){var t=this;this.options.autoHide&&this.el.removeEventListener("mouseenter",this.onMouseEnter),["mousedown","click","dblclick"].forEach(function(e){t.el.removeEventListener(e,t.onPointerEvent,!0)}),["touchstart","touchend","touchmove"].forEach(function(e){t.el.removeEventListener(e,t.onPointerEvent,{capture:!0,passive:!0})}),this.el.removeEventListener("mousemove",this.onMouseMove),this.el.removeEventListener("mouseleave",this.onMouseLeave),this.contentWrapperEl.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onWindowResize),this.mutationObserver&&this.mutationObserver.disconnect(),this.resizeObserver.disconnect(),this.recalculate.cancel(),this.onMouseMove.cancel(),this.hideScrollbars.cancel(),this.onWindowResize.cancel()},e.unMount=function(){this.removeListeners(),this.el.SimpleBar=null},e.isChildNode=function(t){return null!==t&&(t===this.el||this.isChildNode(t.parentNode))},e.isWithinBounds=function(t){return this.mouseX>=t.left&&this.mouseX<=t.left+t.width&&this.mouseY>=t.top&&this.mouseY<=t.top+t.height},e.findChild=function(t,e){var i=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector;return Array.prototype.filter.call(t.children,function(t){return i.call(t,e)})[0]},t}();return Zi.defaultOptions={autoHide:!0,forceVisible:!1,classNames:{contentEl:"simplebar-content",contentWrapper:"simplebar-content-wrapper",offset:"simplebar-offset",mask:"simplebar-mask",wrapper:"simplebar-wrapper",placeholder:"simplebar-placeholder",scrollbar:"simplebar-scrollbar",track:"simplebar-track",heightAutoObserverWrapperEl:"simplebar-height-auto-observer-wrapper",heightAutoObserverEl:"simplebar-height-auto-observer",visible:"simplebar-visible",horizontal:"simplebar-horizontal",vertical:"simplebar-vertical",hover:"simplebar-hover",dragging:"simplebar-dragging"},scrollbarMinSize:25,scrollbarMaxSize:0,timeout:1e3},qi&&Zi.initHtmlApi(),Zi}),console.log("lllll"),function(t,e){"use strict";"function"==typeof define&&define.amd?define([],function(){return t.Waves=e.call(t),t.Waves}):"object"==typeof exports?module.exports=e.call(t):t.Waves=e.call(t)}("object"==typeof global?global:this,function(){"use strict";function t(t){var e=typeof t;return"function"===e||"object"===e&&!!t}function e(e){var i=l.call(e);return"[object String]"===i?s(e):t(e)&&/^\[object (Array|HTMLCollection|NodeList|Object)\]$/.test(i)&&e.hasOwnProperty("length")?e:function(e){return t(e)&&e.nodeType>0}(e)?[e]:[]}function i(t){var e,i,n={top:0,left:0},r=t&&t.ownerDocument;return e=r.documentElement,void 0!==t.getBoundingClientRect&&(n=t.getBoundingClientRect()),i=null!==r&&r===r.window?r:9===r.nodeType&&r.defaultView,{top:n.top+i.pageYOffset-e.clientTop,left:n.left+i.pageXOffset-e.clientLeft}}function n(t){var e="";for(var i in t)t.hasOwnProperty(i)&&(e+=i+":"+t[i]+";");return e}function r(t,e,i){if(i){i.classList.remove("waves-rippling");var r=i.getAttribute("data-x"),o=i.getAttribute("data-y"),a=i.getAttribute("data-scale"),s=i.getAttribute("data-translate"),l=350-(Date.now()-Number(i.getAttribute("data-hold")));l<0&&(l=0),"mousemove"===t.type&&(l=150);var h="mousemove"===t.type?2500:u.duration;setTimeout(function(){i.setAttribute("style",n({top:o+"px",left:r+"px",opacity:"0","-webkit-transition-duration":h+"ms","-moz-transition-duration":h+"ms","-o-transition-duration":h+"ms","transition-duration":h+"ms","-webkit-transform":a+" "+s,"-moz-transform":a+" "+s,"-ms-transform":a+" "+s,"-o-transform":a+" "+s,transform:a+" "+s})),setTimeout(function(){try{e.removeChild(i)}catch(t){return!1}},h)},l)}}function o(t){var e=function(t){if(!1===p.allowEvent(t))return null;for(var e=null,i=t.target||t.srcElement;i.parentElement;){if(!(i instanceof SVGElement)&&i.classList.contains("waves-effect")){e=i;break}i=i.parentElement}return e}(t);if(null!==e){if(e.disabled||e.getAttribute("disabled")||e.classList.contains("disabled"))return;if(p.registerEvent(t),"touchstart"===t.type&&u.delay){var i=!1,n=setTimeout(function(){n=null,u.show(t,e)},u.delay),r=function(r){n&&(clearTimeout(n),n=null,u.show(t,e)),i||(i=!0,u.hide(r,e)),a()},o=function(t){n&&(clearTimeout(n),n=null),r(t),a()};e.addEventListener("touchmove",o,!1),e.addEventListener("touchend",r,!1),e.addEventListener("touchcancel",r,!1);var a=function(){e.removeEventListener("touchmove",o),e.removeEventListener("touchend",r),e.removeEventListener("touchcancel",r)}}else u.show(t,e),h&&(e.addEventListener("touchend",u.hide,!1),e.addEventListener("touchcancel",u.hide,!1)),e.addEventListener("mouseup",u.hide,!1),e.addEventListener("mouseleave",u.hide,!1)}}var a=a||{},s=document.querySelectorAll.bind(document),l=Object.prototype.toString,h="ontouchstart"in window,u={duration:750,delay:200,show:function(t,e,r){if(2===t.button)return!1;e=e||this;var o=document.createElement("div");o.className="waves-ripple waves-rippling",e.appendChild(o);var a=i(e),s=0,l=0;"touches"in t&&t.touches.length?(s=t.touches[0].pageY-a.top,l=t.touches[0].pageX-a.left):(s=t.pageY-a.top,l=t.pageX-a.left),l=l>=0?l:0,s=s>=0?s:0;var h="scale("+e.clientWidth/100*3+")",c="translate(0,0)";r&&(c="translate("+r.x+"px, "+r.y+"px)"),o.setAttribute("data-hold",Date.now()),o.setAttribute("data-x",l),o.setAttribute("data-y",s),o.setAttribute("data-scale",h),o.setAttribute("data-translate",c);var p={top:s+"px",left:l+"px"};o.classList.add("waves-notransition"),o.setAttribute("style",n(p)),o.classList.remove("waves-notransition"),p["-webkit-transform"]=h+" "+c,p["-moz-transform"]=h+" "+c,p["-ms-transform"]=h+" "+c,p["-o-transform"]=h+" "+c,p.transform=h+" "+c,p.opacity="1";var d="mousemove"===t.type?2500:u.duration;p["-webkit-transition-duration"]=d+"ms",p["-moz-transition-duration"]=d+"ms",p["-o-transition-duration"]=d+"ms",p["transition-duration"]=d+"ms",o.setAttribute("style",n(p))},hide:function(t,e){for(var i=(e=e||this).getElementsByClassName("waves-rippling"),n=0,o=i.length;n<o;n++)r(t,e,i[n]);h&&(e.removeEventListener("touchend",u.hide),e.removeEventListener("touchcancel",u.hide)),e.removeEventListener("mouseup",u.hide),e.removeEventListener("mouseleave",u.hide)}},c={input:function(t){var e=t.parentNode;if("i"!==e.tagName.toLowerCase()||!e.classList.contains("waves-effect")){var i=document.createElement("i");i.className=t.className+" waves-input-wrapper",t.className="waves-button-input",e.replaceChild(i,t),i.appendChild(t);var n=window.getComputedStyle(t,null);i.setAttribute("style","color:"+n.color+";background:"+n.backgroundColor),t.setAttribute("style","background-color:rgba(0,0,0,0);")}},img:function(t){var e=t.parentNode;if("i"!==e.tagName.toLowerCase()||!e.classList.contains("waves-effect")){var i=document.createElement("i");e.replaceChild(i,t),i.appendChild(t)}}},p={touches:0,allowEvent:function(t){var e=!0;return/^(mousedown|mousemove)$/.test(t.type)&&p.touches&&(e=!1),e},registerEvent:function(t){var e=t.type;"touchstart"===e?p.touches+=1:/^(touchend|touchcancel)$/.test(e)&&setTimeout(function(){p.touches&&(p.touches-=1)},500)}};return a.init=function(t){var e=document.body;"duration"in(t=t||{})&&(u.duration=t.duration),"delay"in t&&(u.delay=t.delay),h&&(e.addEventListener("touchstart",o,!1),e.addEventListener("touchcancel",p.registerEvent,!1),e.addEventListener("touchend",p.registerEvent,!1)),e.addEventListener("mousedown",o,!1)},a.attach=function(t,i){t=e(t),"[object Array]"===l.call(i)&&(i=i.join(" ")),i=i?" "+i:"";for(var n,r,o=0,a=t.length;o<a;o++)r=(n=t[o]).tagName.toLowerCase(),-1!==["input","img"].indexOf(r)&&(c[r](n),n=n.parentElement),-1===n.className.indexOf("waves-effect")&&(n.className+=" waves-effect"+i)},a.ripple=function(t,n){var r=(t=e(t)).length;if(n=n||{},n.wait=n.wait||0,n.position=n.position||null,r)for(var o,a,s,l={},h=0,c={type:"mousedown",button:1};h<r;h++)if(o=t[h],a=n.position||{x:o.clientWidth/2,y:o.clientHeight/2},s=i(o),l.x=s.left+a.x,l.y=s.top+a.y,c.pageX=l.x,c.pageY=l.y,u.show(c,o),n.wait>=0&&null!==n.wait){var p={type:"mouseup",button:1};setTimeout(function(t,e){return function(){u.hide(t,e)}}(p,o),n.wait)}},a.calm=function(t){for(var i={type:"mouseup",button:1},n=0,r=(t=e(t)).length;n<r;n++)u.hide(i,t[n])},a.displayEffect=function(t){a.init(t)},a}),function(t){"use strict";function e(e){1==t("#light-mode-switch").prop("checked")&&"light-mode-switch"===e?(t("#dark-mode-switch").prop("checked",!1),t("#rtl-mode-switch").prop("checked",!1),t("#bootstrap-style").attr("href","assets/css/bootstrap.min.css"),t("#app-style").attr("href","assets/css/app.min.css"),sessionStorage.setItem("is_visited","light-mode-switch")):1==t("#dark-mode-switch").prop("checked")&&"dark-mode-switch"===e?(t("#light-mode-switch").prop("checked",!1),t("#rtl-mode-switch").prop("checked",!1),t("#bootstrap-style").attr("href","assets/css/bootstrap-dark.min.css"),t("#app-style").attr("href","assets/css/app-dark.min.css"),sessionStorage.setItem("is_visited","dark-mode-switch")):1==t("#rtl-mode-switch").prop("checked")&&"rtl-mode-switch"===e&&(t("#light-mode-switch").prop("checked",!1),t("#dark-mode-switch").prop("checked",!1),t("#bootstrap-style").attr("href","assets/css/bootstrap.min.css"),t("#app-style").attr("href","assets/css/app-rtl.min.css"),sessionStorage.setItem("is_visited","rtl-mode-switch"))}function i(){document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||(console.log("pressed"),t("body").removeClass("fullscreen-enable"))}t("#side-menu").metisMenu(),t("#vertical-menu-btn").on("click",function(e){e.preventDefault(),t("body").toggleClass("sidebar-enable"),992<=t(window).width()?t("body").toggleClass("vertical-collpsed"):t("body").removeClass("vertical-collpsed")}),t("#sidebar-menu a").each(function(){var e=window.location.href.split(/[?#]/)[0];this.href==e&&(t(this).addClass("active"),t(this).parent().addClass("mm-active"),t(this).parent().parent().addClass("mm-show"),t(this).parent().parent().prev().addClass("mm-active"),t(this).parent().parent().parent().addClass("mm-active"),t(this).parent().parent().parent().parent().addClass("mm-show"),t(this).parent().parent().parent().parent().parent().addClass("mm-active"))}),t(".navbar-nav a").each(function(){var e=window.location.href.split(/[?#]/)[0];this.href==e&&(t(this).addClass("active"),t(this).parent().addClass("active"),t(this).parent().parent().addClass("active"),t(this).parent().parent().parent().addClass("active"),t(this).parent().parent().parent().parent().addClass("active"))}),t('[data-toggle="fullscreen"]').on("click",function(e){e.preventDefault(),t("body").toggleClass("fullscreen-enable"),document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement?document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen&&document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}),document.addEventListener("fullscreenchange",i),document.addEventListener("webkitfullscreenchange",i),document.addEventListener("mozfullscreenchange",i),t(".right-bar-toggle").on("click",function(e){t("body").toggleClass("right-bar-enabled")}),t(document).on("click","body",function(e){0<t(e.target).closest(".right-bar-toggle, .right-bar").length||t("body").removeClass("right-bar-enabled")}),t(".dropdown-menu a.dropdown-toggle").on("click",function(e){return t(this).next().hasClass("show")||t(this).parents(".dropdown-menu").first().find(".show").removeClass("show"),t(this).next(".dropdown-menu").toggleClass("show"),!1}),t(function(){t('[data-toggle="tooltip"]').tooltip()}),t(function(){t('[data-toggle="popover"]').popover()}),function(){if(window.sessionStorage){var i=sessionStorage.getItem("is_visited");i?(t(".right-bar input:checkbox").prop("checked",!1),t("#"+i).prop("checked",!0),e(i)):sessionStorage.setItem("is_visited","light-mode-switch")}t("#light-mode-switch, #dark-mode-switch, #rtl-mode-switch").on("change",function(t){e(t.target.id)})}(),t(window).on("load",function(){t("#status").fadeOut(),t("#preloader").delay(350).fadeOut("slow")}),Waves.init()}(jQuery)}function sadad(){!function(t,e){function i(t,e){var i=t.find(".steps li").eq(e.currentIndex);t.triggerHandler("finishing",[e.currentIndex])?(i.addClass("done").removeClass("error"),t.triggerHandler("finished",[e.currentIndex])):i.addClass("error")}function n(t){var e=t.data("eventNamespace");return null==e&&(e="."+u(t),t.data("eventNamespace",e)),e}function r(t,e){var i=u(t);return t.find("#"+i+A+e)}function o(t,e){var i=u(t);return t.find("#"+i+R+e)}function a(t){return t.data("options")}function s(t){return t.data("state")}function l(t){return t.data("steps")}function h(t,e){var i=l(t);return(0>e||e>=i.length)&&P(F),i[e]}function u(t){var e=t.data("uid");return null==e&&(null==(e=t._id())&&(e="steps-uid-".concat(I),t._id(e)),I++,t.data("uid",e)),e}function c(t,i){if(L("enumType",t),L("keyOrValue",i),"string"==typeof i){var n=t[i];return n===e&&P("The enum key '{0}' does not exist.",i),n}if("number"==typeof i){for(var r in t)if(t[r]===i)return i;P("Invalid enum value '{0}'.",i)}else P("Invalid key or value type.")}function p(t,e,i){return y(t,e,i,i.currentIndex+1)}function d(t,e,i){return y(t,e,i,i.currentIndex-1)}function f(e,i,n,r,a){(0>r||r>n.stepCount)&&P(F),function(t,e,i){l(t).splice(e,0,i)}(e,r,a=t.extend({},G,a)),n.currentIndex!==n.stepCount&&n.currentIndex>=r&&(n.currentIndex++,E(e,i,n)),n.stepCount++;var s=e.find(".content"),h=t("<{0}>{1}</{0}>".format(i.headerTag,a.title)),u=t("<{0}></{0}>".format(i.bodyTag));return(null==a.contentMode||a.contentMode===N.html)&&u.html(a.content),0===r?s.prepend(u).prepend(h):o(e,r-1).after(u).after(h),w(e,n,u,r),C(e,i,n,h,r),b(e,i,n,r),r===n.currentIndex&&x(e,i,n),_(e,i,n),e}function g(e){var i=t(this),n=a(i),r=s(i);if(n.suppressPaginationOnFocus&&i.find(":focus").is(":input"))return e.preventDefault(),!1;37===e.keyCode?(e.preventDefault(),d(i,n,r)):39===e.keyCode&&(e.preventDefault(),p(i,n,r))}function v(e,i,n){if(n.stepCount>0){var r=n.currentIndex,a=h(e,r);if(!i.enableContentCache||!a.contentLoaded)switch(c(N,a.contentMode)){case N.iframe:e.find(".content > .body").eq(n.currentIndex).empty().html('<iframe src="'+a.contentUrl+'" frameborder="0" scrolling="no" />').data("loaded","1");break;case N.async:var s=o(e,r)._aria("busy","true").empty().append(S(i.loadingTemplate,{text:i.labels.loading}));t.ajax({url:a.contentUrl,cache:!1}).done(function(t){s.empty().html(t)._aria("busy","false").data("loaded","1"),e.triggerHandler("contentLoaded",[r])})}}}function y(t,e,i,n){var o=i.currentIndex;if(n>=0&&n<i.stepCount&&!(e.forceMoveForward&&n<i.currentIndex)){var a=r(t,n),s=a.parent(),l=s.hasClass("disabled");return s._enableAria(),a.click(),o!==i.currentIndex||!l||(s._enableAria(!1),!1)}return!1}function m(e){e.preventDefault();var n=t(this),r=n.parent().parent().parent().parent(),o=a(r),l=s(r),h=n.attr("href");switch(h.substring(h.lastIndexOf("#")+1)){case"cancel":r.triggerHandler("canceled");break;case"finish":i(r,l);break;case"next":p(r,o,l);break;case"previous":d(r,o,l)}}function _(t,e,i){if(e.enablePagination){var n=t.find(".actions a[href$='#finish']").parent(),r=t.find(".actions a[href$='#next']").parent();e.forceMoveForward||t.find(".actions a[href$='#previous']").parent()._enableAria(i.currentIndex>0),e.enableFinishButton&&e.showFinishButtonAlways?(n._enableAria(i.stepCount>0),r._enableAria(i.stepCount>1&&i.stepCount>i.currentIndex+1)):(n._showAria(e.enableFinishButton&&i.stepCount===i.currentIndex+1),r._showAria(0===i.stepCount||i.stepCount>i.currentIndex+1)._enableAria(i.stepCount>i.currentIndex+1||!e.enableFinishButton))}}function x(e,i,n,o){var a=r(e,n.currentIndex),s=t('<span class="current-info audible">'+i.labels.current+" </span>"),l=e.find(".content > .title");if(null!=o){var h=r(e,o);h.parent().addClass("done").removeClass("error")._selectAria(!1),l.eq(o).removeClass("current").next(".body").removeClass("current"),s=h.find(".current-info"),a.focus()}a.prepend(s).parent()._selectAria().removeClass("done")._enableAria(),l.eq(n.currentIndex).addClass("current").next(".body").addClass("current")}function b(t,e,i,n){for(var r=u(t),o=n;o<i.stepCount;o++){var a=r+A+o,s=r+R+o,l=r+M+o,h=t.find(".title").eq(o)._id(l);t.find(".steps a").eq(o)._id(a)._aria("controls",s).attr("href","#"+l).html(S(e.titleTemplate,{index:o+1,title:h.html()})),t.find(".body").eq(o)._id(s)._aria("labelledby",l)}}function w(t,e,i,n){var r=u(t),o=r+M+n;i._id(r+R+n).attr("role","tabpanel")._aria("labelledby",o).addClass("body")._showAria(e.currentIndex===n)}function S(t,i){for(var n=t.match(/#([a-z]*)#/gi),r=0;r<n.length;r++){var o=n[r],a=o.substring(1,o.length-1);i[a]===e&&P("The key '{0}' does not exist in the substitute collection!",a),t=t.replace(o,i[a])}return t}function C(e,i,r,o,a){var s=u(e),l=s+A+a,h=s+R+a,c=s+M+a,p=e.find(".steps > ul"),d=S(i.titleTemplate,{index:a+1,title:o.html()}),f=t('<li role="tab"><a id="'+l+'" href="#'+c+'" aria-controls="'+h+'">'+d+"</a></li>");f._enableAria(i.enableAllSteps||r.currentIndex>a),r.currentIndex>a&&f.addClass("done"),o._id(c).attr("tabindex","-1").addClass("title"),0===a?p.prepend(f):p.find("li").eq(a-1).after(f),0===a&&p.find("li").removeClass("first").eq(a).addClass("first"),a===r.stepCount-1&&p.find("li").removeClass("last").eq(a).addClass("last"),f.children("a").bind("click"+n(e),T)}function E(e,i,n){i.saveState&&t.cookie&&t.cookie(O+u(e),n.currentIndex)}function T(e){e.preventDefault();var i=t(this),n=i.parent().parent().parent().parent(),o=a(n),l=s(n),h=l.currentIndex;if(i.parent().is(":not(.disabled):not(.current)")){var u=i.attr("href");!function(e,i,n,r){if((0>r||r>=n.stepCount)&&P(F),!(i.forceMoveForward&&r<n.currentIndex)){var o=n.currentIndex;e.triggerHandler("stepChanging",[n.currentIndex,r])?(n.currentIndex=r,E(e,i,n),x(e,i,n,o),_(e,i,n),v(e,i,n),function(i,n,r,o,a,l){var h=e.find(".content > .body"),u=c(j,n.transitionEffect),p=n.transitionEffectSpeed,d=h.eq(o),f=h.eq(a);switch(u){case j.fade:case j.slide:var g=u===j.fade?"fadeOut":"slideUp",v=u===j.fade?"fadeIn":"slideDown";r.transitionElement=d,f[g](p,function(){var e=s(t(this)._showAria(!1).parent().parent());e.transitionElement&&(e.transitionElement[v](p,function(){t(this)._showAria()}).promise().done(l),e.transitionElement=null)});break;case j.slideLeft:var y=f.outerWidth(!0),m=o>a?y:-y;t.when(f.animate({left:o>a?-y:y},p,function(){t(this)._showAria(!1)}),d.css("left",m+"px")._showAria().animate({left:0},p)).done(l);break;default:t.when(f._showAria(!1),d._showAria()).done(l)}}(0,i,n,r,o,function(){e.triggerHandler("stepChanged",[r,o])})):e.find(".steps li").eq(o).addClass("error")}}(n,o,l,parseInt(u.substring(u.lastIndexOf("-")+1),0))}return h===l.currentIndex?(r(n,h).focus(),!1):void 0}function P(t){throw arguments.length>1&&(t=t.format(Array.prototype.slice.call(arguments,1))),new Error(t)}function L(t,e){null==e&&P("The argument '{0}' is null or undefined.",t)}t.fn.extend({_aria:function(t,e){return this.attr("aria-"+t,e)},_removeAria:function(t){return this.removeAttr("aria-"+t)},_enableAria:function(t){return null==t||t?this.removeClass("disabled")._aria("disabled","false"):this.addClass("disabled")._aria("disabled","true")},_showAria:function(t){return null==t||t?this.show()._aria("hidden","false"):this.hide()._aria("hidden","true")},_selectAria:function(t){return null==t||t?this.addClass("current")._aria("selected","true"):this.removeClass("current")._aria("selected","false")},_id:function(t){return t?this.attr("id",t):this.attr("id")}}),String.prototype.format||(String.prototype.format=function(){for(var e=1===arguments.length&&t.isArray(arguments[0])?arguments[0]:arguments,i=this,n=0;n<e.length;n++){var r=new RegExp("\\{"+n+"\\}","gm");i=i.replace(r,e[n])}return i});var I=0,O="jQu3ry_5teps_St@te_",A="-t-",R="-p-",M="-h-",F="Index out of range.",k="One or more corresponding step {0} are missing.";t.fn.steps=function(i){return t.fn.steps[i]?t.fn.steps[i].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof i&&i?void t.error("Method "+i+" does not exist on jQuery.steps"):(function(i){var o=t.extend(!0,{},z,i);return this.each(function(){var i=t(this),a={currentIndex:o.startIndex,currentStep:null,stepCount:0,transitionElement:null};i.data("options",o),i.data("state",a),i.data("steps",[]),function(i,n,r){var o=i.children(n.headerTag),a=i.children(n.bodyTag);o.length>a.length?P(k,"contents"):o.length<a.length&&P(k,"titles");var s=n.startIndex;if(r.stepCount=o.length,n.saveState&&t.cookie){var h=t.cookie(O+u(i)),p=parseInt(h,0);!isNaN(p)&&p<r.stepCount&&(s=p)}r.currentIndex=s,o.each(function(n){var r=t(this),o=a.eq(n),s=o.data("mode"),h=null==s?N.html:c(N,/^\s*$/.test(s)||isNaN(s)?s:parseInt(s,0)),u=h===N.html||o.data("url")===e?"":o.data("url"),p=h!==N.html&&"1"===o.data("loaded");!function(t,e){l(i).push(e)}(0,t.extend({},G,{title:r.html(),content:h===N.html?o.html():"",contentUrl:u,contentMode:h,contentLoaded:p}))})}(i,o,a),function(e,i,n){var r='<{0} class="{1}">{2}</{0}>',o=c(D,i.stepsOrientation)===D.vertical?" vertical":"",a=t(r.format(i.contentContainerTag,"content "+i.clearFixCssClass,e.html())),s=t(r.format(i.stepsContainerTag,"steps "+i.clearFixCssClass,'<ul role="tablist"></ul>')),l=a.children(i.headerTag),h=a.children(i.bodyTag);e.attr("role","application").empty().append(s).append(a).addClass(i.cssClass+" "+i.clearFixCssClass+o),h.each(function(i){w(e,n,t(this),i)}),l.each(function(r){C(e,i,n,t(this),r)}),x(e,i,n),function(t,e,i){if(e.enablePagination){var n='<li><a href="#{0}" role="menuitem">{1}</a></li>',r="";e.forceMoveForward||(r+=n.format("previous",e.labels.previous)),r+=n.format("next",e.labels.next),e.enableFinishButton&&(r+=n.format("finish",e.labels.finish)),e.enableCancelButton&&(r+=n.format("cancel",e.labels.cancel)),t.append('<{0} class="actions {1}"><ul role="menu" aria-label="{2}">{3}</ul></{0}>'.format(e.actionContainerTag,e.clearFixCssClass,e.labels.pagination,r)),_(t,e,i),v(t,e,i)}}(e,i,n)}(i,o,a),function(t,e){var i=n(t);t.bind("canceled"+i,e.onCanceled),t.bind("contentLoaded"+i,e.onContentLoaded),t.bind("finishing"+i,e.onFinishing),t.bind("finished"+i,e.onFinished),t.bind("init"+i,e.onInit),t.bind("stepChanging"+i,e.onStepChanging),t.bind("stepChanged"+i,e.onStepChanged),e.enableKeyNavigation&&t.bind("keyup"+i,g),t.find(".actions a").bind("click"+i,m)}(i,o),o.autoFocus&&0===I&&r(i,o.startIndex).focus(),i.triggerHandler("init",[o.startIndex])})}).apply(this,arguments)},t.fn.steps.add=function(t){var e=s(this);return f(this,a(this),e,e.stepCount,t)},t.fn.steps.destroy=function(){return function(e,i){var r=n(e);e.unbind(r).removeData("uid").removeData("options").removeData("state").removeData("steps").removeData("eventNamespace").find(".actions a").unbind(r),e.removeClass(i.clearFixCssClass+" vertical");var o=e.find(".content > *");o.removeData("loaded").removeData("mode").removeData("url"),o.removeAttr("id").removeAttr("role").removeAttr("tabindex").removeAttr("class").removeAttr("style")._removeAria("labelledby")._removeAria("hidden"),e.find(".content > [data-mode='async'],.content > [data-mode='iframe']").empty();var a=t('<{0} class="{1}"></{0}>'.format(e.get(0).tagName,e.attr("class"))),s=e._id();return null!=s&&""!==s&&a._id(s),a.html(e.find(".content").html()),e.after(a),e.remove(),a}(this,a(this))},t.fn.steps.finish=function(){i(this,s(this))},t.fn.steps.getCurrentIndex=function(){return s(this).currentIndex},t.fn.steps.getCurrentStep=function(){return h(this,s(this).currentIndex)},t.fn.steps.getStep=function(t){return h(this,t)},t.fn.steps.insert=function(t,e){return f(this,a(this),s(this),t,e)},t.fn.steps.next=function(){return p(this,a(this),s(this))},t.fn.steps.previous=function(){return d(this,a(this),s(this))},t.fn.steps.remove=function(t){return function(t,e,i,n){return!(0>n||n>=i.stepCount||i.currentIndex===n||(function(e,i){l(t).splice(i,1)}(0,n),i.currentIndex>n&&(i.currentIndex--,E(t,e,i)),i.stepCount--,function(t,e){var i=u(t);return t.find("#"+i+M+e)}(t,n).remove(),o(t,n).remove(),r(t,n).parent().remove(),0===n&&t.find(".steps li").first().addClass("first"),n===i.stepCount&&t.find(".steps li").eq(n).addClass("last"),b(t,e,i,n),_(t,e,i),0))}(this,a(this),s(this),t)},t.fn.steps.setStep=function(){throw new Error("Not yet implemented!")},t.fn.steps.skip=function(){throw new Error("Not yet implemented!")};var N=t.fn.steps.contentMode={html:0,iframe:1,async:2},D=t.fn.steps.stepsOrientation={horizontal:0,vertical:1},j=t.fn.steps.transitionEffect={none:0,fade:1,slide:2,slideLeft:3},G=t.fn.steps.stepModel={title:"",content:"",contentUrl:"",contentMode:N.html,contentLoaded:!1},z=t.fn.steps.defaults={headerTag:"h1",bodyTag:"div",contentContainerTag:"div",actionContainerTag:"div",stepsContainerTag:"div",cssClass:"wizard",clearFixCssClass:"clearfix",stepsOrientation:D.horizontal,titleTemplate:'<span class="number">#index#.</span> #title#',loadingTemplate:'<span class="spinner"></span> #text#',autoFocus:!1,enableAllSteps:!1,enableKeyNavigation:!0,enablePagination:!0,suppressPaginationOnFocus:!0,enableContentCache:!0,enableCancelButton:!1,enableFinishButton:!0,preloadContent:!1,showFinishButtonAlways:!1,forceMoveForward:!1,saveState:!1,startIndex:0,transitionEffect:j.none,transitionEffectSpeed:200,onStepChanging:function(){return!0},onStepChanged:function(){},onCanceled:function(){},onFinishing:function(){return!0},onFinished:function(){},onContentLoaded:function(){},onInit:function(){},labels:{cancel:"Cancel",current:"current step:",pagination:"Pagination",finish:"Finish",next:"Next",previous:"Previous",loading:"Loading ..."}}}(jQuery),$(function(){$("#form-horizontal").steps({headerTag:"h3",bodyTag:"fieldset",transitionEffect:"slide"})})}function activeMap(){!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ol=e():t.ol=e()}(window,function(){return function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var r in t)e.d(n,r,(function(e){return t[e]}).bind(null,r));return n},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=7)}([function(t,e,i){t.exports=function(){"use strict";function t(t,i,n,r,o){!function t(i,n,r,o,a){for(;o>r;){if(o-r>600){var s=o-r+1,l=n-r+1,h=Math.log(s),u=.5*Math.exp(2*h/3),c=.5*Math.sqrt(h*u*(s-u)/s)*(l-s/2<0?-1:1);t(i,n,Math.max(r,Math.floor(n-l*u/s+c)),Math.min(o,Math.floor(n+(s-l)*u/s+c)),a)}var p=i[n],d=r,f=o;for(e(i,r,n),a(i[o],p)>0&&e(i,r,o);d<f;){for(e(i,d,f),d++,f--;a(i[d],p)<0;)d++;for(;a(i[f],p)>0;)f--}0===a(i[r],p)?e(i,r,f):(f++,e(i,f,o)),f<=n&&(r=f+1),n<=f&&(o=f-1)}}(t,i,n||0,r||t.length-1,o||function(t,e){return t<e?-1:t>e?1:0})}function e(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function i(t,e,i){if(!i)return e.indexOf(t);for(var n=0;n<e.length;n++)if(i(t,e[n]))return n;return-1}function n(t,e){r(t,0,t.children.length,e,t)}function r(t,e,i,n,r){r||(r=p(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var a=e;a<i;a++){var s=t.children[a];o(r,t.leaf?n(s):s)}return r}function o(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function a(t,e){return t.minX-e.minX}function s(t,e){return t.minY-e.minY}function l(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function u(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function c(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(e,i,n,r,o){for(var a=[i,n];a.length;)if(!((n=a.pop())-(i=a.pop())<=r)){var s=i+Math.ceil((n-i)/r/2)*r;t(e,s,i,n,o),a.push(i,s,s,n)}}var f=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};return f.prototype.all=function(){return this._all(this.data,[])},f.prototype.search=function(t){var e=this.data,i=[];if(!c(t,e))return i;for(var n=this.toBBox,r=[];e;){for(var o=0;o<e.children.length;o++){var a=e.children[o],s=e.leaf?n(a):a;c(t,s)&&(e.leaf?i.push(a):u(t,s)?this._all(a,i):r.push(a))}e=r.pop()}return i},f.prototype.collides=function(t){var e=this.data;if(!c(t,e))return!1;for(var i=[];e;){for(var n=0;n<e.children.length;n++){var r=e.children[n],o=e.leaf?this.toBBox(r):r;if(c(t,o)){if(e.leaf||u(t,o))return!0;i.push(r)}}e=i.pop()}return!1},f.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var n=this.data;this.data=i,i=n}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},f.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},f.prototype.clear=function(){return this.data=p([]),this},f.prototype.remove=function(t,e){if(!t)return this;for(var n,r,o,a=this.data,s=this.toBBox(t),l=[],h=[];a||l.length;){if(a||(a=l.pop(),r=l[l.length-1],n=h.pop(),o=!0),a.leaf){var c=i(t,a.children,e);if(-1!==c)return a.children.splice(c,1),l.push(a),this._condense(l),this}o||a.leaf||!u(a,s)?r?(n++,a=r.children[n],o=!1):a=null:(l.push(a),h.push(n),n=0,r=a,a=a.children[0])}return this},f.prototype.toBBox=function(t){return t},f.prototype.compareMinX=function(t,e){return t.minX-e.minX},f.prototype.compareMinY=function(t,e){return t.minY-e.minY},f.prototype.toJSON=function(){return this.data},f.prototype.fromJSON=function(t){return this.data=t,this},f.prototype._all=function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},f.prototype._build=function(t,e,i,r){var o,a=i-e+1,s=this._maxEntries;if(a<=s)return n(o=p(t.slice(e,i+1)),this.toBBox),o;r||(r=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,r-1))),(o=p([])).leaf=!1,o.height=r;var l=Math.ceil(a/s),h=l*Math.ceil(Math.sqrt(s));d(t,e,i,h,this.compareMinX);for(var u=e;u<=i;u+=h){var c=Math.min(u+h-1,i);d(t,u,c,l,this.compareMinY);for(var f=u;f<=c;f+=l){var g=Math.min(f+l-1,c);o.children.push(this._build(t,f,g,r-1))}}return n(o,this.toBBox),o},f.prototype._chooseSubtree=function(t,e,i,n){for(;n.push(e),!e.leaf&&n.length-1!==i;){for(var r=1/0,o=1/0,a=void 0,s=0;s<e.children.length;s++){var h=e.children[s],u=l(h),c=(p=t,d=h,(Math.max(d.maxX,p.maxX)-Math.min(d.minX,p.minX))*(Math.max(d.maxY,p.maxY)-Math.min(d.minY,p.minY))-u);c<o?(o=c,r=u<r?u:r,a=h):c===o&&u<r&&(r=u,a=h)}e=a||e.children[0]}var p,d;return e},f.prototype._insert=function(t,e,i){var n=i?t:this.toBBox(t),r=[],a=this._chooseSubtree(n,this.data,e,r);for(a.children.push(t),o(a,n);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(n,r,e)},f.prototype._split=function(t,e){var i=t[e],r=i.children.length,o=this._minEntries;this._chooseSplitAxis(i,o,r);var a=this._chooseSplitIndex(i,o,r),s=p(i.children.splice(a,i.children.length-a));s.height=i.height,s.leaf=i.leaf,n(i,this.toBBox),n(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(i,s)},f.prototype._splitRoot=function(t,e){this.data=p([t,e]),this.data.height=t.height+1,this.data.leaf=!1,n(this.data,this.toBBox)},f.prototype._chooseSplitIndex=function(t,e,i){for(var n,o,a,s,h,u,c,p=1/0,d=1/0,f=e;f<=i-e;f++){var g=r(t,0,f,this.toBBox),v=r(t,f,i,this.toBBox),y=(o=g,a=v,s=void 0,h=void 0,u=void 0,c=void 0,s=Math.max(o.minX,a.minX),h=Math.max(o.minY,a.minY),u=Math.min(o.maxX,a.maxX),c=Math.min(o.maxY,a.maxY),Math.max(0,u-s)*Math.max(0,c-h)),m=l(g)+l(v);y<p?(p=y,n=f,d=m<d?m:d):y===p&&m<d&&(d=m,n=f)}return n||i-e},f.prototype._chooseSplitAxis=function(t,e,i){var n=t.leaf?this.compareMinX:a,r=t.leaf?this.compareMinY:s;this._allDistMargin(t,e,i,n)<this._allDistMargin(t,e,i,r)&&t.children.sort(n)},f.prototype._allDistMargin=function(t,e,i,n){t.children.sort(n);for(var a=this.toBBox,s=r(t,0,e,a),l=r(t,i-e,i,a),u=h(s)+h(l),c=e;c<i-e;c++){var p=t.children[c];o(s,t.leaf?a(p):p),u+=h(s)}for(var d=i-e-1;d>=e;d--){var f=t.children[d];o(l,t.leaf?a(f):f),u+=h(l)}return u},f.prototype._adjustParentBBoxes=function(t,e,i){for(var n=i;n>=0;n--)o(e[n],t)},f.prototype._condense=function(t){for(var e=t.length-1,i=void 0;e>=0;e--)0===t[e].children.length?e>0?(i=t[e-1].children).splice(i.indexOf(t[e]),1):this.clear():n(t[e],this.toBBox)},f}()},function(t,e){function i(t,e,i){t.addEventListener(e,function(t){var n=new MouseEvent(i,t);n.pointerId=1,n.isPrimary=!0,n.pointerType="mouse",n.width=1,n.height=1,n.tiltX=0,n.tiltY=0,n.pressure="buttons"in t&&0!==t.buttons?.5:0;var r=t.target;null!==o&&(r=o,"mouseup"===e&&(o=null)),r.dispatchEvent(n),n.defaultPrevented&&t.preventDefault()})}function n(t,e,i){t.addEventListener(e,function(t){for(var n=t.changedTouches,o=n.length,a=0;a<o;a++){var s=new CustomEvent(i,{bubbles:!0,cancelable:!0});s.ctrlKey=t.ctrlKey,s.shiftKey=t.shiftKey,s.altKey=t.altKey,s.metaKey=t.metaKey;var l=n.item(a);s.clientX=l.clientX,s.clientY=l.clientY,s.screenX=l.screenX,s.screenY=l.screenY,s.pageX=l.pageX,s.pageY=l.pageY;var h=l.target.getBoundingClientRect();s.offsetX=l.clientX-h.left,s.offsetY=l.clientY-h.top,s.pointerId=1+l.identifier,s.button=0,s.buttons=1,s.movementX=0,s.movementY=0,s.region=null,s.relatedTarget=null,s.x=s.clientX,s.y=s.clientY,s.pointerType="touch",s.width=1,s.height=1,s.tiltX=0,s.tiltY=0,s.pressure=1,"touchstart"===e&&null===r&&(r=l.identifier),s.isPrimary=l.identifier===r,"touchend"===e&&s.isPrimary&&(r=null),t.target.dispatchEvent(s),s.defaultPrevented&&t.preventDefault()}})}var r=null,o=null;"PointerEvent"in window||(Element.prototype.setPointerCapture=Element.prototype.setCapture,Element.prototype.releasePointerCapture=Element.prototype.releaseCapture,"TouchEvent"in window||(i(document,"mousedown","pointerdown"),i(document,"mousemove","pointermove"),i(document,"mouseup","pointerup")),n(document,"touchstart","pointerdown"),n(document,"touchmove","pointermove"),n(document,"touchend","pointerup"))},function(t,e,i){"use strict";function n(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}function r(t){return t.type===n.Bytes?t.readVarint()+t.pos:t.pos+1}function o(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function a(t,e,i){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));i.realloc(n);for(var r=i.pos-1;r>=t;r--)i.buf[r+n]=i.buf[r]}function s(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function l(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function h(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function u(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function c(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function p(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function d(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function f(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function g(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function v(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function y(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function m(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}t.exports=n;var _=i(4);n.Varint=0,n.Fixed64=1,n.Bytes=2,n.Fixed32=5;var x="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");n.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var n=this.readVarint(),r=n>>3,o=this.pos;this.type=7&n,t(r,e,this),this.pos===o&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=v(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=m(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=v(this.buf,this.pos)+4294967296*v(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=v(this.buf,this.pos)+4294967296*m(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=_.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=_.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,i,n=this.buf;return e=127&(i=n[this.pos++]),i<128?e:(e|=(127&(i=n[this.pos++]))<<7,i<128?e:(e|=(127&(i=n[this.pos++]))<<14,i<128?e:(e|=(127&(i=n[this.pos++]))<<21,i<128?e:function(t,e,i){var n,r,a=i.buf;if(r=a[i.pos++],n=(112&r)>>4,r<128)return o(t,n,e);if(r=a[i.pos++],n|=(127&r)<<3,r<128)return o(t,n,e);if(r=a[i.pos++],n|=(127&r)<<10,r<128)return o(t,n,e);if(r=a[i.pos++],n|=(127&r)<<17,r<128)return o(t,n,e);if(r=a[i.pos++],n|=(127&r)<<24,r<128)return o(t,n,e);if(r=a[i.pos++],n|=(1&r)<<31,r<128)return o(t,n,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(i=n[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&x?function(i,n,r){return x.decode(i.subarray(e,t))}(this.buf):function(t,i,n){for(var r="",o=e;o<n;){var a,s,l,h=t[o],u=null,c=h>239?4:h>223?3:h>191?2:1;if(o+c>n)break;1===c?h<128&&(u=h):2===c?128==(192&(a=t[o+1]))&&(u=(31&h)<<6|63&a)<=127&&(u=null):3===c?(a=t[o+1],s=t[o+2],128==(192&a)&&128==(192&s)&&((u=(15&h)<<12|(63&a)<<6|63&s)<=2047||u>=55296&&u<=57343)&&(u=null)):4===c&&(a=t[o+1],s=t[o+2],l=t[o+3],128==(192&a)&&128==(192&s)&&128==(192&l)&&((u=(15&h)<<18|(63&a)<<12|(63&s)<<6|63&l)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,c=1):u>65535&&(u-=65536,r+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),r+=String.fromCharCode(u),o+=c}return r}(this.buf,0,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==n.Bytes)return t.push(this.readVarint(e));var i=r(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==n.Bytes)return t.push(this.readSVarint());var e=r(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==n.Bytes)return t.push(this.readBoolean());var e=r(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==n.Bytes)return t.push(this.readFloat());var e=r(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==n.Bytes)return t.push(this.readDouble());var e=r(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==n.Bytes)return t.push(this.readFixed32());var e=r(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==n.Bytes)return t.push(this.readSFixed32());var e=r(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==n.Bytes)return t.push(this.readFixed64());var e=r(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==n.Bytes)return t.push(this.readSFixed64());var e=r(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===n.Varint)for(;this.buf[this.pos++]>127;);else if(e===n.Bytes)this.pos=this.readVarint()+this.pos;else if(e===n.Fixed32)this.pos+=4;else{if(e!==n.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),y(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),y(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),y(this.buf,-1&t,this.pos),y(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),y(this.buf,-1&t,this.pos),y(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(e,i){var n,r;if(t>=0?(n=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");i.realloc(10),function(t,e,i){i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,i.buf[i.pos]=127&(t>>>=7)}(n,0,i),function(t,e){var i=(7&t)<<4;e.buf[e.pos++]|=i|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,i)}(0,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,i){for(var n,r,o=0;o<e.length;o++){if((n=e.charCodeAt(o))>55295&&n<57344){if(!r){n>56319||o+1===e.length?(t[i++]=239,t[i++]=191,t[i++]=189):r=n;continue}if(n<56320){t[i++]=239,t[i++]=191,t[i++]=189,r=n;continue}n=r-55296<<10|n-56320|65536,r=null}else r&&(t[i++]=239,t[i++]=191,t[i++]=189,r=null);n<128?t[i++]=n:(n<2048?t[i++]=n>>6|192:(n<65536?t[i++]=n>>12|224:(t[i++]=n>>18|240,t[i++]=n>>12&63|128),t[i++]=n>>6&63|128),t[i++]=63&n|128)}return i}(this.buf,t,this.pos);var i=this.pos-e;i>=128&&a(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),_.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),_.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var n=this.pos-i;n>=128&&a(i,n,this),this.pos=i-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,i){this.writeTag(t,n.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,s,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,l,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,c,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,h,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,u,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,p,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,d,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,f,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,g,e)},writeBytesField:function(t,e){this.writeTag(t,n.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,n.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,n.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,n.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,n.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,n.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,n.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,n.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,n.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,n.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},function(t,e,i){var n=i(5);e.Processor=n},function(t,e){e.read=function(t,e,i,n,r){var o,a,s=8*r-n-1,l=(1<<s)-1,h=l>>1,u=-7,c=i?r-1:0,p=i?-1:1,d=t[e+c];for(c+=p,o=d&(1<<-u)-1,d>>=-u,u+=s;u>0;o=256*o+t[e+c],c+=p,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=n;u>0;a=256*a+t[e+c],c+=p,u-=8);if(0===o)o=1-h;else{if(o===l)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,n),o-=h}return(d?-1:1)*a*Math.pow(2,o-n)},e.write=function(t,e,i,n,r,o){var a,s,l,h=8*o-r-1,u=(1<<h)-1,c=u>>1,p=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,f=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+c>=1?p/l:p*Math.pow(2,1-c))*l>=2&&(a++,l/=2),a+c>=u?(s=0,a=u):a+c>=1?(s=(e*l-1)*Math.pow(2,r),a+=c):(s=e*Math.pow(2,c-1)*Math.pow(2,r),a=0));r>=8;t[i+d]=255&s,d+=f,s/=256,r-=8);for(a=a<<r|s,h+=r;h>0;t[i+d]=255&a,d+=f,a/=256,h-=8);t[i+d-f]|=128*g}},function(t,e,i){function n(t){function e(t,e,n){return i?new ImageData(t,e,n):{data:t,width:e,height:n}}var i=!0;try{new ImageData(10,10)}catch(t){i=!1}return function(i){var n,r,o=i.buffers,a=i.meta,s=i.width,l=i.height,h=o.length,u=o[0].byteLength;if(i.imageOps){var c=new Array(h);for(r=0;r<h;++r)c[r]=e(new Uint8ClampedArray(o[r]),s,l);n=t(c,a).data}else{n=new Uint8ClampedArray(u);var p=new Array(h),d=new Array(h);for(r=0;r<h;++r)p[r]=new Uint8ClampedArray(o[r]),d[r]=[0,0,0,0];for(var f=0;f<u;f+=4){for(var g=0;g<h;++g){var v=p[g];d[g][0]=v[f],d[g][1]=v[f+1],d[g][2]=v[f+2],d[g][3]=v[f+3]}var y=t(d,a);n[f]=y[0],n[f+1]=y[1],n[f+2]=y[2],n[f+3]=y[3]}}return n.buffer}}function r(t,e){var i=Object.keys(t.lib||{}).map(function(e){return"var "+e+" = "+t.lib[e].toString()+";"}).concat(["var __minion__ = ("+n.toString()+")(",t.operation.toString(),");",'self.addEventListener("message", function(event) {',"  var buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),r=new Blob(i,{type:"text/javascript"}),o=URL.createObjectURL(r),a=new Worker(o);return a.addEventListener("message",e),a}function o(t){var e;this._imageOps=!!t.imageOps;var i=[];if(e=0===t.threads?0:this._imageOps?1:t.threads||1)for(var o=0;o<e;++o)i[o]=r(t,this._onWorkerMessage.bind(this,o));else i[0]=function(t,e){var i=n(t.operation);return{postMessage:function(t){setTimeout(function(){e({data:{buffer:i(t),meta:t.meta}})},0)}}}(t,this._onWorkerMessage.bind(this,0));this._workers=i,this._queue=[],this._maxQueueLength=t.queue||1/0,this._running=0,this._dataLookup={},this._job=null}var a=i(6).newImageData;o.prototype.process=function(t,e,i){this._enqueue({inputs:t,meta:e,callback:i}),this._dispatch()},o.prototype.destroy=function(){for(var t in this)this[t]=null;this._destroyed=!0},o.prototype._enqueue=function(t){for(this._queue.push(t);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)},o.prototype._dispatch=function(){if(0===this._running&&this._queue.length>0){var t=this._job=this._queue.shift(),e=t.inputs[0].width,i=t.inputs[0].height,n=t.inputs.map(function(t){return t.data.buffer}),r=this._workers.length;if(this._running=r,1===r)this._workers[0].postMessage({buffers:n,meta:t.meta,imageOps:this._imageOps,width:e,height:i},n);else for(var o=t.inputs[0].data.length,a=4*Math.ceil(o/4/r),s=0;s<r;++s){for(var l=s*a,h=[],u=0,c=n.length;u<c;++u)h.push(n[s].slice(l,l+a));this._workers[s].postMessage({buffers:h,meta:t.meta,imageOps:this._imageOps,width:e,height:i},h)}}},o.prototype._onWorkerMessage=function(t,e){this._destroyed||(this._dataLookup[t]=e.data,--this._running,0===this._running&&this._resolveJob())},o.prototype._resolveJob=function(){var t,e,i=this._job,n=this._workers.length;if(1===n)t=new Uint8ClampedArray(this._dataLookup[0].buffer),e=this._dataLookup[0].meta;else{var r=i.inputs[0].data.length;t=new Uint8ClampedArray(r),e=new Array(r);for(var o=4*Math.ceil(r/4/n),s=0;s<n;++s){var l=this._dataLookup[s].buffer,h=s*o;t.set(new Uint8ClampedArray(l),h),e[s]=this._dataLookup[s].meta}}this._job=null,this._dataLookup={},i.callback(null,a(t,i.inputs[0].width,i.inputs[0].height),e),this._dispatch()},t.exports=o},function(t,e){var i=!0;try{new ImageData(10,10)}catch(t){i=!1}var n=document.createElement("canvas").getContext("2d");e.newImageData=function(t,e,r){if(i)return new ImageData(t,e,r);var o=n.createImageData(e,r);return o.data.set(t),o}},function(t,e,i){"use strict";function n(){return function(){throw new Error("Unimplemented abstract method.")}()}function r(t){return t.ol_uid||(t.ol_uid=String(++Jo))}function o(t){for(var e in t)delete t[e]}function a(t){var e;for(e in t)return!1;return!e}function s(t,e,i,n,r){if(n&&n!==t&&(i=i.bind(n)),r){var o=i;i=function(){t.removeEventListener(e,i),o.apply(this,arguments)}}var a={target:t,type:e,listener:i};return t.addEventListener(e,i),a}function l(t,e,i,n){return s(t,e,i,n,!0)}function h(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),o(t))}function u(t,e){return t>e?1:t<e?-1:0}function c(t,e){return t.indexOf(e)>=0}function p(t,e,i){var n=t.length;if(t[0]<=e)return 0;if(e<=t[n-1])return n-1;var r=void 0;if(i>0){for(r=1;r<n;++r)if(t[r]<e)return r-1}else if(i<0){for(r=1;r<n;++r)if(t[r]<=e)return r}else for(r=1;r<n;++r){if(t[r]==e)return r;if(t[r]<e)return t[r-1]-e<e-t[r]?r-1:r}return n-1}function d(t,e,i){for(;e<i;){var n=t[e];t[e]=t[i],t[i]=n,++e,--i}}function f(t,e){for(var i=Array.isArray(e)?e:[e],n=i.length,r=0;r<n;r++)t[t.length]=i[r]}function g(t,e){for(var i,n=t.length>>>0,r=0;r<n;r++)if(e(i=t[r],r,t))return i;return null}function v(t,e){var i=t.length;if(i!==e.length)return!1;for(var n=0;n<i;n++)if(t[n]!==e[n])return!1;return!0}function y(t,e){var i;return t.every(function(n,r){return i=r,!e(n,r,t)})?-1:i}function m(){return!0}function _(){return!1}function x(){}function b(t){t.stopPropagation()}function w(t){return wa.hasOwnProperty(t)?wa[t]:wa[t]="change:"+t}function S(t,e){if(!t)throw new Qo(e)}function C(t){for(var e=[1/0,1/0,-1/0,-1/0],i=0,n=t.length;i<n;++i)j(e,t[i]);return e}function E(t,e,i){return i?(i[0]=t[0]-e,i[1]=t[1]-e,i[2]=t[2]+e,i[3]=t[3]+e,i):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function T(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function P(t,e,i){var n,r;return(n=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*n+(r=i<t[1]?t[1]-i:t[3]<i?i-t[3]:0)*r}function L(t,e){return O(t,e[0],e[1])}function I(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function O(t,e,i){return t[0]<=e&&e<=t[2]&&t[1]<=i&&i<=t[3]}function A(t,e){var i=e[0],n=e[1],r=Ma;return i<t[0]?r|=ja:i>t[2]&&(r|=Na),n<t[1]?r|=Da:n>t[3]&&(r|=ka),r===Ma&&(r=Fa),r}function R(t,e,i,n,r){return r?(r[0]=t,r[1]=e,r[2]=i,r[3]=n,r):[t,e,i,n]}function M(t){return R(1/0,1/0,-1/0,-1/0,t)}function F(t,e){var i=t[0],n=t[1];return R(i,n,i,n,e)}function k(t,e,i,n,r){return G(M(r),t,e,i,n)}function N(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function D(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function j(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function G(t,e,i,n,r){for(;i<n;i+=r)!function(t,e,i){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],i),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],i)}(t,e[i],e[i+1]);return t}function z(t,e){var i;return(i=e(Y(t)))||(i=e(X(t)))||(i=e(Z(t)))?i:(i=e(q(t)))||!1}function B(t){var e=0;return $(t)||(e=K(t)*V(t)),e}function Y(t){return[t[0],t[1]]}function X(t){return[t[2],t[1]]}function W(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function U(t,e,i,n,r){var o=e*n[0]/2,a=e*n[1]/2,s=Math.cos(i),l=Math.sin(i),h=o*s,u=o*l,c=a*s,p=a*l,d=t[0],f=t[1],g=d-h+p,v=d-h-p,y=d+h-p,m=d+h+p,_=f-u-c,x=f-u+c,b=f+u+c,w=f+u-c;return R(Math.min(g,v,y,m),Math.min(_,x,b,w),Math.max(g,v,y,m),Math.max(_,x,b,w),r)}function V(t){return t[3]-t[1]}function H(t,e,i){var n=i||[1/0,1/0,-1/0,-1/0];return J(t,e)?(n[0]=t[0]>e[0]?t[0]:e[0],n[1]=t[1]>e[1]?t[1]:e[1],n[2]=t[2]<e[2]?t[2]:e[2],n[3]=t[3]<e[3]?t[3]:e[3]):M(n),n}function q(t){return[t[0],t[3]]}function Z(t){return[t[2],t[3]]}function K(t){return t[2]-t[0]}function J(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function $(t){return t[2]<t[0]||t[3]<t[1]}function Q(t,e){var i=(t[2]-t[0])/2*(e-1),n=(t[3]-t[1])/2*(e-1);t[0]-=i,t[2]+=i,t[1]-=n,t[3]+=n}function tt(t,e,i,n){var r=[];if(n>1)for(var o=t[2]-t[0],a=t[3]-t[1],s=0;s<n;++s)r.push(t[0]+o*s/n,t[1],t[2],t[1]+a*s/n,t[2]-o*s/n,t[3],t[0],t[3]-a*s/n);else r=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(r,r,2);for(var l=[],h=[],u=(s=0,r.length);s<u;s+=2)l.push(r[s]),h.push(r[s+1]);return function(t,e,i){return R(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),i)}(l,h,i)}function et(t,e){var i=e.getExtent(),n=W(t);if(e.canWrapX()&&(n[0]<i[0]||n[0]>=i[2])){var r=K(i),o=Math.floor((n[0]-i[0])/r)*r;t[0]-=o,t[2]-=o}return t}function it(t,e,i,n,r,o){for(var a=o||[],s=0,l=e;l<i;l+=n){var h=t[l],u=t[l+1];a[s++]=r[0]*h+r[2]*u+r[4],a[s++]=r[1]*h+r[3]*u+r[5]}return o&&a.length!=s&&(a.length=s),a}function nt(t,e,i,n,r,o,a){for(var s=a||[],l=Math.cos(r),h=Math.sin(r),u=o[0],c=o[1],p=0,d=e;d<i;d+=n){var f=t[d]-u,g=t[d+1]-c;s[p++]=u+f*l-g*h,s[p++]=c+f*h+g*l;for(var v=d+2;v<d+n;++v)s[p++]=t[v]}return a&&s.length!=p&&(s.length=p),s}function rt(t,e,i,n,r,o,a){for(var s=a||[],l=0,h=e;h<i;h+=n){s[l++]=t[h]+r,s[l++]=t[h+1]+o;for(var u=h+2;u<h+n;++u)s[l++]=t[u]}return a&&s.length!=l&&(s.length=l),s}function ot(t,e,i){return Math.min(Math.max(t,e),i)}function at(t,e,i,n,r,o){var a=r-i,s=o-n;if(0!==a||0!==s){var l=((t-i)*a+(e-n)*s)/(a*a+s*s);l>1?(i=r,n=o):l>0&&(i+=a*l,n+=s*l)}return st(t,e,i,n)}function st(t,e,i,n){var r=i-t,o=n-e;return r*r+o*o}function lt(t){return 180*t/Math.PI}function ht(t){return t*Math.PI/180}function ut(t,e){var i=t%e;return i*e<0?i+e:i}function ct(t,e,i){return t+i*(e-t)}function pt(t,e,i){var n=i||6371008.8,r=ht(t[1]),o=ht(e[1]),a=(o-r)/2,s=ht(e[0]-t[0])/2,l=Math.sin(a)*Math.sin(a)+Math.sin(s)*Math.sin(s)*Math.cos(r)*Math.cos(o);return 2*n*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}function dt(t,e){for(var i=0,n=0,r=t.length;n<r-1;++n)i+=pt(t[n],t[n+1],e);return i}function ft(t,e){for(var i=0,n=t.length,r=t[n-1][0],o=t[n-1][1],a=0;a<n;a++){var s=t[a][0],l=t[a][1];i+=ht(s-r)*(2+Math.sin(ht(o))+Math.sin(ht(l))),r=s,o=l}return i*e*e/2}function gt(t,e,i,n){var r=n||6371008.8,o=ht(t[1]),a=ht(t[0]),s=e/r,l=Math.asin(Math.sin(o)*Math.cos(s)+Math.cos(o)*Math.sin(s)*Math.cos(i));return[lt(a+Math.atan2(Math.sin(i)*Math.sin(s)*Math.cos(o),Math.cos(s)-Math.sin(o)*Math.sin(l))),lt(l)]}function vt(t,e,i){var n=t.getCode(),r=e.getCode();n in hs||(hs[n]={}),hs[n][r]=i}function yt(t,e){var i;return t in hs&&e in hs[t]&&(i=hs[t][e]),i}function mt(t,e,i){var n;if(void 0!==e){for(var r=0,o=t.length;r<o;++r)e[r]=t[r];n=e}else n=t.slice();return n}function _t(t,e,i){if(void 0!==e&&t!==e){for(var n=0,r=t.length;n<r;++n)e[n]=t[n];t=e}return t}function xt(t){!function(e,i){us[e]=t}(t.getCode()),vt(t,t,mt)}function bt(t){return"string"==typeof t?us[t]||null:t||null}function wt(t,e,i,n){var r,o=(t=bt(t)).getPointResolutionFunc();if(o)r=o(e,i),n&&n!==t.getUnits()&&(a=t.getMetersPerUnit())&&(r=r*a/Va[n]);else if(t.getUnits()==Ka.DEGREES&&!n||n==Ka.DEGREES)r=e;else{var a,s=Lt(t,bt("EPSG:4326")),l=[i[0]-e/2,i[1],i[0]+e/2,i[1],i[0],i[1]-e/2,i[0],i[1]+e/2];r=(pt((l=s(l,l,2)).slice(0,2),l.slice(2,4))+pt(l.slice(4,6),l.slice(6,8)))/2,void 0!==(a=n?Va[n]:t.getMetersPerUnit())&&(r/=a)}return r}function St(t){t.forEach(xt),t.forEach(function(e){t.forEach(function(t){e!==t&&vt(e,t,mt)})})}function Ct(t,e){return t?"string"==typeof t?bt(t):t:bt(e)}function Et(t){return function(e,i,n){for(var r=e.length,o=void 0!==n?n:2,a=void 0!==i?i:new Array(r),s=0;s<r;s+=o){var l=t([e[s],e[s+1]]);a[s]=l[0],a[s+1]=l[1];for(var h=o-1;h>=2;--h)a[s+h]=e[s+h]}return a}}function Tt(t,e,i,n){var r=bt(t),o=bt(e);vt(r,o,Et(i)),vt(o,r,Et(n))}function Pt(t,e){if(t===e)return!0;var i=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||Lt(t,e)===mt)&&i}function Lt(t,e){var i=yt(t.getCode(),e.getCode());return i||(i=_t),i}function It(t,e){return Lt(bt(t),bt(e))}function Ot(t,e,i){return It(e,i)(t,void 0,t.length)}function At(t,e,i,n){return tt(t,It(e,i),void 0,n)}function Rt(){return cs}function Mt(t,e){return cs?Ot(t,e,cs):t}function Ft(t,e){return cs?Ot(t,cs,e):t}function kt(t,e){return cs?At(t,e,cs):t}function Nt(t,e){return cs?At(t,cs,e):t}function Dt(t){return Gt(t,1,0,0,1,0,0)}function jt(t,e){var i=t[0],n=t[1],r=t[2],o=t[3],a=t[4],s=t[5],l=e[0],h=e[1],u=e[2],c=e[3],p=e[4],d=e[5];return t[0]=i*l+r*h,t[1]=n*l+o*h,t[2]=i*u+r*c,t[3]=n*u+o*c,t[4]=i*p+r*d+a,t[5]=n*p+o*d+s,t}function Gt(t,e,i,n,r,o,a){return t[0]=e,t[1]=i,t[2]=n,t[3]=r,t[4]=o,t[5]=a,t}function zt(t,e){var i=e[0],n=e[1];return e[0]=t[0]*i+t[2]*n+t[4],e[1]=t[1]*i+t[3]*n+t[5],e}function Bt(t,e,i){return jt(t,Gt(fs,e,0,0,i,0,0))}function Yt(t,e,i,n,r,o,a,s){var l=Math.sin(o),h=Math.cos(o);return t[0]=n*h,t[1]=r*l,t[2]=-n*l,t[3]=r*h,t[4]=a*n*h-s*n*l+e,t[5]=a*r*l+s*r*h+i,t}function Xt(t,e){var i,n=(i=e)[0]*i[3]-i[1]*i[2];S(0!==n,32);var r=e[0],o=e[1],a=e[2],s=e[3],l=e[4],h=e[5];return t[0]=s/n,t[1]=-o/n,t[2]=-a/n,t[3]=r/n,t[4]=(a*h-s*l)/n,t[5]=-(r*h-o*l)/n,t}function Wt(t){return"matrix("+t.join(", ")+")"}function Ut(t){var e;return t==Ga?e=2:t==za||t==Ba?e=3:t==Ya&&(e=4),e}function Vt(t,e,i,n){for(var r=0,o=t[i-n],a=t[i-n+1];e<i;e+=n){var s=t[e],l=t[e+1];r+=a*s-o*l,o=s,a=l}return r/2}function Ht(t,e,i,n){for(var r=0,o=0,a=i.length;o<a;++o){var s=i[o];r+=Vt(t,e,s,n),e=s}return r}function qt(t,e,i,n,r,o,a){var s,l=t[e],h=t[e+1],u=t[i]-l,c=t[i+1]-h;if(0===u&&0===c)s=e;else{var p=((r-l)*u+(o-h)*c)/(u*u+c*c);if(p>1)s=i;else{if(p>0){for(var d=0;d<n;++d)a[d]=ct(t[e+d],t[i+d],p);return void(a.length=n)}s=e}}for(d=0;d<n;++d)a[d]=t[s+d];a.length=n}function Zt(t,e,i,n,r){var o=t[e],a=t[e+1];for(e+=n;e<i;e+=n){var s=t[e],l=t[e+1],h=st(o,a,s,l);h>r&&(r=h),o=s,a=l}return r}function Kt(t,e,i,n,r){for(var o=0,a=i.length;o<a;++o){var s=i[o];r=Zt(t,e,s,n,r),e=s}return r}function Jt(t,e,i,n,r,o,a,s,l,h,u){if(e==i)return h;var c,p;if(0===r){if((p=st(a,s,t[e],t[e+1]))<h){for(c=0;c<n;++c)l[c]=t[e+c];return l.length=n,p}return h}for(var d=u||[NaN,NaN],f=e+n;f<i;)if(qt(t,f-n,f,n,a,s,d),(p=st(a,s,d[0],d[1]))<h){for(h=p,c=0;c<n;++c)l[c]=d[c];l.length=n,f+=n}else f+=n*Math.max((Math.sqrt(p)-Math.sqrt(h))/r|0,1);if(o&&(qt(t,i-n,e,n,a,s,d),(p=st(a,s,d[0],d[1]))<h)){for(h=p,c=0;c<n;++c)l[c]=d[c];l.length=n}return h}function $t(t,e,i,n,r,o,a,s,l,h,u){for(var c=u||[NaN,NaN],p=0,d=i.length;p<d;++p){var f=i[p];h=Jt(t,e,f,n,r,o,a,s,l,h,c),e=f}return h}function Qt(t,e,i,n){for(var r=0,o=i.length;r<o;++r)t[e++]=i[r];return e}function te(t,e,i,n){for(var r=0,o=i.length;r<o;++r)for(var a=i[r],s=0;s<n;++s)t[e++]=a[s];return e}function ee(t,e,i,n,r){for(var o=r||[],a=0,s=0,l=i.length;s<l;++s){var h=te(t,e,i[s],n);o[a++]=h,e=h}return o.length=a,o}function ie(t,e,i,n,r){for(var o=void 0!==r?r:[],a=0,s=e;s<i;s+=n)o[a++]=t.slice(s,s+n);return o.length=a,o}function ne(t,e,i,n,r){for(var o=void 0!==r?r:[],a=0,s=0,l=i.length;s<l;++s){var h=i[s];o[a++]=ie(t,e,h,n,o[a]),e=h}return o.length=a,o}function re(t,e,i,n,r){for(var o=void 0!==r?r:[],a=0,s=0,l=i.length;s<l;++s){var h=i[s];o[a++]=ne(t,e,h,n,o[a]),e=h[h.length-1]}return o.length=a,o}function oe(t,e,i,n,r,o,a){var s=(i-e)/n;if(s<3){for(;e<i;e+=n)o[a++]=t[e],o[a++]=t[e+1];return a}var l=new Array(s);l[0]=1,l[s-1]=1;for(var h=[e,i-n],u=0;h.length>0;){for(var c=h.pop(),p=h.pop(),d=0,f=t[p],g=t[p+1],v=t[c],y=t[c+1],m=p+n;m<c;m+=n){var _=at(t[m],t[m+1],f,g,v,y);_>d&&(u=m,d=_)}d>r&&(l[(u-e)/n]=1,p+n<u&&h.push(p,u),u+n<c&&h.push(u,c))}for(m=0;m<s;++m)l[m]&&(o[a++]=t[e+m*n],o[a++]=t[e+m*n+1]);return a}function ae(t,e){return e*Math.round(t/e)}function se(t,e,i,n,r,o,a){if(e==i)return a;var s,l,h=ae(t[e],r),u=ae(t[e+1],r);e+=n,o[a++]=h,o[a++]=u;do{if(s=ae(t[e],r),l=ae(t[e+1],r),(e+=n)==i)return o[a++]=s,o[a++]=l,a}while(s==h&&l==u);for(;e<i;){var c=ae(t[e],r),p=ae(t[e+1],r);if(e+=n,c!=s||p!=l){var d=s-h,f=l-u,g=c-h,v=p-u;d*v==f*g&&(d<0&&g<d||d==g||d>0&&g>d)&&(f<0&&v<f||f==v||f>0&&v>f)?(s=c,l=p):(o[a++]=s,o[a++]=l,h=s,u=l,s=c,l=p)}}return o[a++]=s,o[a++]=l,a}function le(t,e,i,n,r,o,a,s){for(var l=0,h=i.length;l<h;++l){var u=i[l];a=se(t,e,u,n,r,o,a),s.push(a),e=u}return a}function he(t,e,i,n,r){return!z(r,function(r){return!ue(t,e,i,n,r[0],r[1])})}function ue(t,e,i,n,r,o){for(var a=0,s=t[i-n],l=t[i-n+1];e<i;e+=n){var h=t[e],u=t[e+1];l<=o?u>o&&(h-s)*(o-l)-(r-s)*(u-l)>0&&a++:u<=o&&(h-s)*(o-l)-(r-s)*(u-l)<0&&a--,s=h,l=u}return 0!==a}function ce(t,e,i,n,r,o){if(0===i.length)return!1;if(!ue(t,e,i[0],n,r,o))return!1;for(var a=1,s=i.length;a<s;++a)if(ue(t,i[a-1],i[a],n,r,o))return!1;return!0}function pe(t,e,i,n,r,o,a){for(var s,l,h,c,p,d,f,g=r[o+1],v=[],y=0,m=i.length;y<m;++y){var _=i[y];for(c=t[_-n],d=t[_-n+1],s=e;s<_;s+=n)p=t[s],f=t[s+1],(g<=d&&f<=g||d<=g&&g<=f)&&(h=(g-d)/(f-d)*(p-c)+c,v.push(h)),c=p,d=f}var x=NaN,b=-1/0;for(v.sort(u),c=v[0],s=1,l=v.length;s<l;++s){p=v[s];var w=Math.abs(p-c);w>b&&ce(t,e,i,n,h=(c+p)/2,g)&&(x=h,b=w),c=p}return isNaN(x)&&(x=r[o]),a?(a.push(x,g,b),a):[x,g,b]}function de(t,e,i,n,r){for(var o=[],a=0,s=i.length;a<s;++a){var l=i[a];o=pe(t,e,l,n,r,2*a,o),e=l[l.length-1]}return o}function fe(t,e,i,n,r){for(var o,a=[t[e],t[e+1]],s=[];e+n<i;e+=n){if(s[0]=t[e+n],s[1]=t[e+n+1],o=r(a,s))return o;a[0]=s[0],a[1]=s[1]}return!1}function ge(t,e,i,n,r){var o=G([1/0,1/0,-1/0,-1/0],t,e,i,n);return!!J(r,o)&&(!!I(r,o)||o[0]>=r[0]&&o[2]<=r[2]||o[1]>=r[1]&&o[3]<=r[3]||fe(t,e,i,n,function(t,e){return function(t,e,i){var n=!1,r=A(t,e),o=A(t,i);if(r===Fa||o===Fa)n=!0;else{var a=t[0],s=t[1],l=t[2],h=t[3],u=i[0],c=i[1],p=(c-e[1])/(u-e[0]),d=void 0,f=void 0;o&ka&&!(r&ka)&&(n=(d=u-(c-h)/p)>=a&&d<=l),n||!(o&Na)||r&Na||(n=(f=c-(u-l)*p)>=s&&f<=h),n||!(o&Da)||r&Da||(n=(d=u-(c-s)/p)>=a&&d<=l),n||!(o&ja)||r&ja||(n=(f=c-(u-a)*p)>=s&&f<=h)}return n}(r,t,e)}))}function ve(t,e,i,n,r){if(!function(t,e,i,n,r){return!!(ge(t,e,i,n,r)||ue(t,e,i,n,r[0],r[1])||ue(t,e,i,n,r[0],r[3])||ue(t,e,i,n,r[2],r[1])||ue(t,e,i,n,r[2],r[3]))}(t,e,i[0],n,r))return!1;if(1===i.length)return!0;for(var o=1,a=i.length;o<a;++o)if(he(t,i[o-1],i[o],n,r)&&!ge(t,i[o-1],i[o],n,r))return!1;return!0}function ye(t,e,i,n){for(;e<i-n;){for(var r=0;r<n;++r){var o=t[e+r];t[e+r]=t[i-n+r],t[i-n+r]=o}e+=n,i-=n}}function me(t,e,i,n){for(var r=0,o=t[i-n],a=t[i-n+1];e<i;e+=n){var s=t[e],l=t[e+1];r+=(s-o)*(l+a),o=s,a=l}return r>0}function _e(t,e,i,n,r){for(var o=void 0!==r&&r,a=0,s=i.length;a<s;++a){var l=i[a],h=me(t,e,l,n);if(0===a){if(o&&h||!o&&!h)return!1}else if(o&&!h||!o&&h)return!1;e=l}return!0}function xe(t,e,i,n,r){for(var o=void 0!==r&&r,a=0,s=i.length;a<s;++a){var l=i[a],h=me(t,e,l,n);(0===a?o&&h||!o&&!h:o&&!h||!o&&h)&&ye(t,e,l,n),e=l}return e}function be(t,e,i,n,r){for(var o=0,a=i.length;o<a;++o)e=xe(t,e,i[o],n,r);return e}function we(t,e,i,n){for(var r=i||32,o=[],a=0;a<r;++a)f(o,gt(t,e,2*Math.PI*a/r,n));return o.push(o[0],o[1]),new Es(o,Ga,[o.length])}function Se(t){var e=t[0],i=t[1],n=t[2],r=t[3],o=[e,i,e,r,n,r,n,i,e,i];return new Es(o,Ga,[o.length])}function Ce(t,e,i){for(var n=e||32,r=t.getStride(),o=t.getLayout(),a=t.getCenter(),s=r*(n+1),l=new Array(s),h=0;h<s;h+=r){l[h]=0,l[h+1]=0;for(var u=2;u<r;u++)l[h+u]=a[u]}var c=new Es(l,o,[l.length]);return Ee(c,a,t.getRadius(),i),c}function Ee(t,e,i,n){for(var r=t.getFlatCoordinates(),o=t.getStride(),a=r.length/o-1,s=n||0,l=0;l<=a;++l){var h=l*o,u=s+2*ut(l,a)*Math.PI/a;r[h]=e[0]+i*Math.cos(u),r[h+1]=e[1]+i*Math.sin(u)}t.changed()}function Te(t,e,i){return function(n,r,o,a){if(n){var s=e?0:o[0]*r,l=e?0:o[1]*r,h=t[0]+s/2,u=t[2]-s/2,c=t[1]+l/2,p=t[3]-l/2;h>u&&(u=h=(u+h)/2),c>p&&(p=c=(p+c)/2);var d=ot(n[0],h,u),f=ot(n[1],c,p),g=30*r;return a&&i&&(d+=-g*Math.log(1+Math.max(0,h-n[0])/g)+g*Math.log(1+Math.max(0,n[0]-u)/g),f+=-g*Math.log(1+Math.max(0,c-n[1])/g)+g*Math.log(1+Math.max(0,n[1]-p)/g)),[d,f]}}}function Pe(t){return t}function Le(t,e,i,n){var r=K(e)/i[0],o=V(e)/i[1];return n?Math.min(t,Math.max(r,o)):Math.min(t,Math.min(r,o))}function Ie(t,e,i){var n=Math.min(t,e);return n*=Math.log(1+50*Math.max(0,t/e-1))/50+1,i&&(n=Math.max(n,i),n/=Math.log(1+50*Math.max(0,i/t-1))/50+1),ot(n,i/2,2*e)}function Oe(t,e,i,n,r){return function(o,a,s,l){if(void 0!==o){var h=n?Le(t,n,s,r):t;return(void 0===i||i)&&l?Ie(o,h,e):ot(o,e,h)}}}function Ae(t){return void 0!==t?0:void 0}function Re(t){return void 0!==t?t:void 0}function Me(t,e,i){var n=void 0!==i?t.toFixed(i):""+t,r=n.indexOf(".");return(r=-1===r?n.length:r)>e?n:new Array(1+e-r).join("0")+n}function Fe(t,e){for(var i=(""+t).split("."),n=(""+e).split("."),r=0;r<Math.max(i.length,n.length);r++){var o=parseInt(i[r]||"0",10),a=parseInt(n[r]||"0",10);if(o>a)return 1;if(a>o)return-1}return 0}function ke(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function Ne(t,e){var i,n,r=e[0],o=e[1],a=r[0],s=r[1],l=o[0],h=o[1],u=l-a,c=h-s,p=0===u&&0===c?0:(u*(t[0]-a)+c*(t[1]-s))/(u*u+c*c||0);return p<=0?(i=a,n=s):p>=1?(i=l,n=h):(i=a+p*u,n=s+p*c),[i,n]}function De(t,e,i){var n=ut(e+180,360)-180,r=Math.abs(3600*n),o=i||0,a=Math.pow(10,o),s=Math.floor(r/3600),l=Math.floor((r-3600*s)/60),h=r-3600*s-60*l;return(h=Math.ceil(h*a)/a)>=60&&(h=0,l+=1),l>=60&&(l=0,s+=1),s+"\xb0 "+Me(l,2)+"\u2032 "+Me(h,2,o)+"\u2033"+(0==n?"":" "+t.charAt(n<0?1:0))}function je(t,e,i){return t?e.replace("{x}",t[0].toFixed(i)).replace("{y}",t[1].toFixed(i)):""}function Ge(t,e){for(var i=!0,n=t.length-1;n>=0;--n)if(t[n]!=e[n]){i=!1;break}return i}function ze(t,e){var i=Math.cos(e),n=Math.sin(e),r=t[1]*i+t[0]*n;return t[0]=t[0]*i-t[1]*n,t[1]=r,t}function Be(t,e){return t[0]*=e,t[1]*=e,t}function Ye(t,e){var i=t[0]-e[0],n=t[1]-e[1];return i*i+n*n}function Xe(t,e){return Math.sqrt(Ye(t,e))}function We(t,e){return Ye(t,Ne(t,e))}function Ue(t,e){return je(t,"{x}, {y}",e)}function Ve(t,e){var i=e.getExtent();if(e.canWrapX()&&(t[0]<i[0]||t[0]>=i[2])){var n=K(i),r=Math.floor((t[0]-i[0])/n);t[0]-=r*n}return t}function He(t){return Math.pow(t,3)}function qe(t){return 1-He(1-t)}function Ze(t){return 3*t*t-2*t*t*t}function Ke(t){return t}function Je(t,e){setTimeout(function(){t(e)},0)}function $e(t){return!(t.sourceCenter&&t.targetCenter&&!Ge(t.sourceCenter,t.targetCenter))&&t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation}function Qe(t,e,i){var n=i&&i.length?i.shift():Ys?new OffscreenCanvas(t||300,e||300):document.createElement("canvas");return t&&(n.width=t),e&&(n.height=e),n.getContext("2d")}function ti(t,e){var i=e.parentNode;i&&i.replaceChild(t,e)}function ei(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function ii(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function ni(t,e,i){return void 0===i&&(i=[0,0]),i[0]=t[0]+2*e,i[1]=t[1]+2*e,i}function ri(t,e,i){return void 0===i&&(i=[0,0]),i[0]=t[0]*e+.5|0,i[1]=t[1]*e+.5|0,i}function oi(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}function ai(t,e){if(!t.visible)return!1;var i=e.resolution;if(i<t.minResolution||i>=t.maxResolution)return!1;var n=e.zoom;return n>t.minZoom&&n<=t.maxZoom}function si(t){var e=t||{},i=new Ta;return(void 0===e.zoom||e.zoom)&&i.push(new Bl(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&i.push(new Gl(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&i.push(new Dl(e.attributionOptions)),i}function li(t,e,i,n){var r=t.getZoom();if(void 0!==r){var o=t.getConstrainedZoom(r+e),a=t.getResolutionForZoom(o);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:a,anchor:i,duration:void 0!==n?n:250,easing:qe})}}function hi(t){var e=!1;if(t.type==Us.DBLCLICK){var i=t.coordinate,n=t.originalEvent.shiftKey?-this.delta_:this.delta_;li(t.map.getView(),n,i,this.duration_),t.preventDefault(),e=!0}return!e}function ui(t){for(var e=t.length,i=0,n=0,r=0;r<e;r++)i+=t[r].clientX,n+=t[r].clientY;return[i/e,n/e]}function ci(t){return th(t)&&rh(t)}function pi(){var t,e=this.getMap(),i=e.getView(),n=e.getSize(),r=this.getGeometry().getExtent();if(this.out_){var o=i.calculateExtentInternal(n),a=(t=[e.getPixelFromCoordinateInternal(Y(r)),e.getPixelFromCoordinateInternal(Z(r))],function(t,e){for(var i=0,n=e.length;i<n;++i)j(t,e[i]);return t}(M(void 0),t));Q(o,1/i.getResolutionForExtentInternal(a,n)),r=o}var s=i.getConstrainedResolution(i.getResolutionForExtentInternal(r,n)),l=i.getConstrainedCenter(W(r),s);i.animateInternal({resolution:s,center:l,duration:this.duration_,easing:qe})}function di(t){var e=!1;if(t.type==da){var i=t.originalEvent.keyCode;if(this.condition_(t)&&(i==bh||i==mh||i==xh||i==_h)){var n=t.map.getView(),r=n.getResolution()*this.pixelDelta_,o=0,a=0;i==bh?a=-r:i==mh?o=-r:i==xh?o=r:a=r;var s=[o,a];ze(s,n.getRotation()),function(t,e,i){var n=t.getCenterInternal();n&&t.animateInternal({duration:void 0!==i?i:250,easing:Ke,center:t.getConstrainedCenter([n[0]+e[0],n[1]+e[1]])})}(n,s,this.duration_),t.preventDefault(),e=!0}}return!e}function fi(t){var e=!1;if(t.type==da||t.type==fa){var i=t.originalEvent.charCode;if(this.condition_(t)&&(i=="+".charCodeAt(0)||i=="-".charCodeAt(0))){var n=t.map,r=i=="+".charCodeAt(0)?this.delta_:-this.delta_;li(n.getView(),r,void 0,this.duration_),t.preventDefault(),e=!0}}return!e}function gi(t){var e=t||{},i=new Ta,n=new Rs(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&i.push(new uh),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&i.push(new Vl({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&i.push(new lh({condition:e.onFocusOnly?Zl:void 0,kinetic:n})),(void 0===e.pinchRotate||e.pinchRotate)&&i.push(new Ih),(void 0===e.pinchZoom||e.pinchZoom)&&i.push(new Ah({duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(i.push(new Sh),i.push(new Eh({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&i.push(new Ph({condition:e.onFocusOnly?Zl:void 0,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&i.push(new yh({duration:e.zoomDuration})),i}function vi(t){return"string"==typeof t?t:_i(t)}function yi(t){return Array.isArray(t)?t:Nh(t)}function mi(t){return t[0]=ot(t[0]+.5|0,0,255),t[1]=ot(t[1]+.5|0,0,255),t[2]=ot(t[2]+.5|0,0,255),t[3]=ot(t[3],0,1),t}function _i(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var i=t[1];i!=(0|i)&&(i=i+.5|0);var n=t[2];return n!=(0|n)&&(n=n+.5|0),"rgba("+e+","+i+","+n+","+(void 0===t[3]?1:t[3])+")"}function xi(t,e,i){return e+":"+t+":"+(i?vi(i):"null")}function bi(t){return Array.isArray(t)?_i(t):t}function wi(t,e){return Hh||(Hh=Qe(1,1)),t!=Xh&&(Hh.font=t,Xh=Hh.font),Hh.measureText(e)}function Si(t,e){return wi(t,e).width}function Ci(t,e,i){if(e in i)return i[e];var n=Si(t,e);return i[e]=n,n}function Ei(t,e,i,n){0!==e&&(t.translate(i,n),t.rotate(e),t.translate(-i,-n))}function Ti(t,e,i,n,r,o,a,s,l,h,u){t.save(),1!==i&&(t.globalAlpha*=i),e&&t.setTransform.apply(t,e),n.contextInstructions?(t.translate(l,h),t.scale(u,u),function(t,e){for(var i=n.contextInstructions,r=0,o=i.length;r<o;r+=2)Array.isArray(i[r+1])?e[i[r]].apply(e,i[r+1]):e[i[r]]=i[r+1]}(0,t)):t.drawImage(n,r,o,a,s,l,h,a*u,s*u),t.restore()}function Pi(t){return Ys?Wt(t):(Jh||(Jh=Qe(1,1).canvas),Jh.style.transform=Wt(t),Jh.style.transform)}function Li(t,e){return parseInt(r(t),10)-parseInt(r(e),10)}function Ii(t,e){var i=Oi(t,e);return i*i}function Oi(t,e){return.5*t/e}function Ai(t,e,i,n,r,o){var a=!1,s=i.getImage();if(s){var l=s.getImageState();l==eu||l==iu?s.unlistenImageChange(r):(l==tu&&s.load(),l=s.getImageState(),s.listenImageChange(r),a=!0)}return function(t,e,i,n,r){var o=i.getGeometryFunction()(e);if(o){var a=o.simplifyTransformed(n,r);i.getRenderer()?function t(e,i,n,r){if(i.getType()!=Xa.GEOMETRY_COLLECTION)e.getBuilder(n.getZIndex(),ru).drawCustom(i,r,n.getRenderer());else for(var o=i.getGeometries(),a=0,s=o.length;a<s;++a)t(e,o[a],n,r)}(t,a,i,e):(0,lu[a.getType()])(t,a,i,e)}}(t,e,i,n,o),a}function Ri(t){var e,i=t.frameState,n=jt(t.inversePixelTransform.slice(),i.coordinateToPixelTransform),r=Ii(i.viewState.resolution,i.pixelRatio),o=Rt();return o&&(e=Lt(o,i.viewState.projection)),new Qh(t.context,i.pixelRatio,i.extent,n,i.viewState.rotation,r,e)}function Mi(t,e){e&&e.clear();for(var i=t.declutterItems,n=i.length-1;n>=0;--n)for(var r=i[n],o=r.items,a=0,s=o.length;a<s;a+=3)e=o[a].renderDeclutter(o[a+1],o[a+2],r.opacity,e);return i.length=0,e}function Fi(t,e){Dh.expire()}function ki(t,e,i,n){return function(r,o,a){var s=new XMLHttpRequest;s.open("GET","function"==typeof t?t(r,o,a):t,!0),e.getType()==Cu&&(s.responseType="arraybuffer"),s.withCredentials=Lu,s.onload=(function(t){if(!s.status||s.status>=200&&s.status<300){var o=e.getType(),l=void 0;o==Eu||o==Tu?l=s.responseText:o==Pu?(l=s.responseXML)||(l=(new DOMParser).parseFromString(s.responseText,"application/xml")):o==Cu&&(l=s.response),l?i.call(this,e.readFeatures(l,{extent:r,featureProjection:a}),e.readProjection(l)):n.call(this)}else n.call(this)}).bind(this),s.onerror=(function(){n.call(this)}).bind(this),s.send()}}function Ni(t,e){return ki(t,e,function(t,e){"function"==typeof this.addFeatures&&this.addFeatures(t)},x)}function Di(t,e){return[[-1/0,-1/0,1/0,1/0]]}function ji(t,e,i,n,r){return void 0!==r?(r.minX=t,r.maxX=e,r.minY=i,r.maxY=n,r):new Iu(t,e,i,n)}function Gi(t,e,i,n){return void 0!==n?(n[0]=t,n[1]=e,n[2]=i,n):[t,e,i]}function zi(t,e,i){return t+"/"+e+"/"+i}function Bi(t){return zi(t[0],t[1],t[2])}function Yi(t){return t.split("/").map(Number)}function Xi(t){return(t[1]<<t[0])+t[2]}function Wi(t){var e=t.getDefaultTileGrid();return e||(e=Hi(t),t.setDefaultTileGrid(e)),e}function Ui(t){var e=t||{},i=e.extent||bt("EPSG:3857").getExtent(),n={extent:i,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:Vi(i,e.maxZoom,e.tileSize,e.maxResolution)};return new Ru(n)}function Vi(t,e,i,n){for(var r=void 0!==e?e:42,o=V(t),a=K(t),s=oi(void 0!==i?i:256),l=n>0?n:Math.max(a/s[0],o/s[1]),h=r+1,u=new Array(h),c=0;c<h;++c)u[c]=l/Math.pow(2,c);return u}function Hi(t,e,i,n){return function(t,i,r,o){var a=void 0!==n?n:Aa,s=Vi(t,e,r);return new Ru({extent:t,origin:function(t,e){var i;return e===Ia?i=Y(t):e===Oa?i=X(t):e===Aa?i=q(t):e===Ra?i=Z(t):S(!1,13),i}(t,a),resolutions:s,tileSize:r})}(qi(t),0,i)}function qi(t){var e=(t=bt(t)).getExtent();if(!e){var i=180*Va[Ka.DEGREES]/t.getMetersPerUnit();e=R(-i,-i,i,i)}return e}function Zi(t,e){for(var i=Mu.length,n=0;n<i;++n)try{var r=t.getContext(Mu[n],e);if(r)return r}catch(t){}return null}function Ki(t,e){return gn().createElementNS(t,e)}function Ji(t,e){return function t(e,i,n){if(e.nodeType==Node.CDATA_SECTION_NODE||e.nodeType==Node.TEXT_NODE)n.push(i?String(e.nodeValue).replace(/(\r\n|\r|\n)/g,""):e.nodeValue);else{var r=void 0;for(r=e.firstChild;r;r=r.nextSibling)t(r,i,n)}return n}(t,e,[]).join("")}function $i(t){return"documentElement"in t}function Qi(t){return(new DOMParser).parseFromString(t,"application/xml")}function tn(t,e){return function(i,n){var r=t.call(void 0!==e?e:this,i,n);void 0!==r&&f(n[n.length-1],r)}}function en(t,e){return function(i,n){var r=t.call(void 0!==e?e:this,i,n);void 0!==r&&n[n.length-1].push(r)}}function nn(t,e){return function(i,n){var r=t.call(void 0!==e?e:this,i,n);void 0!==r&&(n[n.length-1]=r)}}function rn(t,e,i){return function(n,r){var o=t.call(void 0!==i?i:this,n,r);if(void 0!==o){var a=r[r.length-1],s=void 0!==e?e:n.localName,l=void 0;s in a?l=a[s]:(l=[],a[s]=l),l.push(o)}}}function on(t,e,i){return function(n,r){var o=t.call(void 0!==i?i:this,n,r);void 0!==o&&(r[r.length-1][void 0!==e?e:n.localName]=o)}}function an(t,e){return function(i,n,r){t.call(void 0!==e?e:this,i,n,r),r[r.length-1].node.appendChild(i)}}function sn(t,e){var i,n;return function(e,r,o){if(void 0===i){i={};var a={};a[e.localName]=t,i[e.namespaceURI]=a,n=ln(e.localName)}dn(i,n,r,o)}}function ln(t,e){var i=t;return function(t,n,r){var o=i;return void 0===o&&(o=r),Ki(void 0!==e?e:n[n.length-1].node.namespaceURI,o)}}function hn(t,e){for(var i=e.length,n=new Array(i),r=0;r<i;++r)n[r]=t[e[r]];return n}function un(t,e,i){var n,r,o=void 0!==i?i:{};for(n=0,r=t.length;n<r;++n)o[t[n]]=e;return o}function cn(t,e,i,n){var r;for(r=e.firstElementChild;r;r=r.nextElementSibling){var o=t[r.namespaceURI];if(void 0!==o){var a=o[r.localName];void 0!==a&&a.call(n,r,i)}}}function pn(t,e,i,n,r){return n.push(t),cn(e,i,n,r),n.pop()}function dn(t,e,i,n,r,o){for(var a,s,l=(void 0!==r?r:i).length,h=0;h<l;++h)void 0!==(a=i[h])&&void 0!==(s=e.call(void 0!==o?o:this,a,n,void 0!==r?r[h]:void 0))&&t[s.namespaceURI][s.localName].call(o,s,a,n)}function fn(t,e,i,n,r,o,a){return r.push(t),dn(e,i,n,r,o,a),r.pop()}function gn(){return void 0===Du&&"undefined"!=typeof document&&(Du=document.implementation.createDocument("","",null)),Du}function vn(t){switch(t){case 34962:return Float32Array;case 34963:return Uint32Array;default:return Float32Array}}function yn(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}function mn(t){for(var e=0,i=0;i<t.length;i++){var n=t[i];e+=n.size*_n(n.type)}return e}function _n(t){switch(t){case Uu.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case Uu.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case Uu.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case Uu.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}function xn(t,e,i){var n=[],r=[],o=[],a=[],s=[],l=void 0!==i?i:[],h=t.SupportedCRS,u=bt(h.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||bt(h),c=u.getMetersPerUnit(),p="ne"==u.getAxisOrientation().substr(0,2);return t.TileMatrix.sort(function(t,e){return e.ScaleDenominator-t.ScaleDenominator}),t.TileMatrix.forEach(function(e){if(!(l.length>0)||g(l,function(i){return e.Identifier==i.TileMatrix||-1===e.Identifier.indexOf(":")&&t.Identifier+":"+e.Identifier===i.TileMatrix})){r.push(e.Identifier);var i=28e-5*e.ScaleDenominator/c,h=e.TileWidth,u=e.TileHeight;o.push(p?[e.TopLeftCorner[1],e.TopLeftCorner[0]]:e.TopLeftCorner),n.push(i),a.push(h==u?h:[h,u]),s.push([e.MatrixWidth,e.MatrixHeight])}}),new Ku({extent:e,origins:o,resolutions:n,matrixIds:r,tileSizes:a,sizes:s})}function bn(t,e,i){var n=t;if(n.src&&Xs){var r=!0;return n.decode().then(function(){r&&e()}).catch(function(t){r&&("EncodingError"===t.name&&"Invalid image type."===t.message?e():i())}),function(){r=!1}}var o=[l(n,ga,e),l(n,ua,i)];return function(){o.forEach(h)}}function wn(t,e){if(!_c){var i=new nc({color:"rgba(255,255,255,0.4)"}),n=new yc({color:"#3399CC",width:1.25});_c=[new mc({image:new ic({fill:i,stroke:n,radius:5}),fill:i,stroke:n})]}return _c}function Sn(){var t={},e=[255,255,255,1],i=[0,153,255,1];return t[Xa.POLYGON]=[new mc({fill:new nc({color:[255,255,255,.5]})})],t[Xa.MULTI_POLYGON]=t[Xa.POLYGON],t[Xa.LINE_STRING]=[new mc({stroke:new yc({color:e,width:5})}),new mc({stroke:new yc({color:i,width:3})})],t[Xa.MULTI_LINE_STRING]=t[Xa.LINE_STRING],t[Xa.CIRCLE]=t[Xa.POLYGON].concat(t[Xa.LINE_STRING]),t[Xa.POINT]=[new mc({image:new ic({radius:6,fill:new nc({color:i}),stroke:new yc({color:e,width:1.5})}),zIndex:1/0})],t[Xa.MULTI_POINT]=t[Xa.POINT],t[Xa.GEOMETRY_COLLECTION]=t[Xa.POLYGON].concat(t[Xa.LINE_STRING],t[Xa.POINT]),t}function Cn(t){return t.getGeometry()}function En(t,e){var i=/\{z\}/g,n=/\{x\}/g,r=/\{y\}/g,o=/\{-y\}/g;return function(a,s,l){return a?t.replace(i,a[0].toString()).replace(n,a[1].toString()).replace(r,a[2].toString()).replace(o,function(){var t=e.getFullTileRange(a[0]);return S(t,55),(t.getHeight()-a[2]-1).toString()}):void 0}}function Tn(t,e){for(var i=t.length,n=new Array(i),r=0;r<i;++r)n[r]=En(t[r],e);return Pn(n)}function Pn(t){return 1===t.length?t[0]:function(e,i,n){if(e){var r=ut(Xi(e),t.length);return t[r](e,i,n)}}}function Ln(t,e,i){}function In(t){var e=[],i=/\{([a-z])-([a-z])\}/.exec(t);if(i){var n=i[1].charCodeAt(0),r=i[2].charCodeAt(0),o=void 0;for(o=n;o<=r;++o)e.push(t.replace(i[0],String.fromCharCode(o)));return e}if(i=/\{(\d+)-(\d+)\}/.exec(t)){for(var a=parseInt(i[2],10),s=parseInt(i[1],10);s<=a;s++)e.push(t.replace(i[0],s.toString()));return e}return e.push(t),e}function On(t,e,i,n){function o(){delete window[s],a.parentNode.removeChild(a)}var a=document.createElement("script"),s="olc_"+r(e);a.async=!0,a.src=t+(-1==t.indexOf("?")?"?":"&")+(n||"callback")+"="+s;var l=setTimeout(function(){o(),i&&i()},1e4);window[s]=function(t){clearTimeout(l),o(),e(t)},document.getElementsByTagName("head")[0].appendChild(a)}function An(t,e,i,n){var r=Ot(i,e,t),o=wt(e,n,i),a=e.getMetersPerUnit();void 0!==a&&(o*=a);var s=t.getMetersPerUnit();void 0!==s&&(o/=s);var l=t.getExtent();if(!l||L(l,r)){var h=wt(t,o,r)/o;isFinite(h)&&h>0&&(o/=h)}return o}function Rn(t,e,i,n){var r=i-t,o=n-e,a=Math.sqrt(r*r+o*o);return[Math.round(i+r/a),Math.round(n+o/a)]}function Mn(t,e,i,n,r,o,a,s,l,h,u){var c=Qe(Math.round(i*t),Math.round(i*e));if(0===l.length)return c.canvas;c.scale(i,i);var p=[1/0,1/0,-1/0,-1/0];l.forEach(function(t,e,i){D(p,t.extent)});var d=K(p),f=V(p),g=Qe(Math.round(i*d/n),Math.round(i*f/n)),v=i/n;l.forEach(function(t,e,i){var n=t.extent[0]-p[0],r=-(t.extent[3]-p[3]),o=K(t.extent),a=V(t.extent);g.drawImage(t.image,h,h,t.image.width-2*h,t.image.height-2*h,n*v,r*v,o*v,a*v)});var y=q(a);return s.getTriangles().forEach(function(t,e,r){var a=t.source,s=t.target,l=a[0][0],h=a[0][1],u=a[1][0],d=a[1][1],f=a[2][0],v=a[2][1],m=(s[0][0]-y[0])/o,_=-(s[0][1]-y[1])/o,x=(s[1][0]-y[0])/o,b=-(s[1][1]-y[1])/o,w=(s[2][0]-y[0])/o,S=-(s[2][1]-y[1])/o,C=l,E=h;l=0,h=0;var T=function(t){for(var e=t.length,i=0;i<e;i++){for(var n=i,r=Math.abs(t[i][i]),o=i+1;o<e;o++){var a=Math.abs(t[o][i]);a>r&&(r=a,n=o)}if(0===r)return null;var s=t[n];t[n]=t[i],t[i]=s;for(var l=i+1;l<e;l++)for(var h=-t[l][i]/t[i][i],u=i;u<e+1;u++)i==u?t[l][u]=0:t[l][u]+=h*t[i][u]}for(var c=new Array(e),p=e-1;p>=0;p--){c[p]=t[p][e]/t[p][p];for(var d=p-1;d>=0;d--)t[d][e]-=t[d][p]*c[p]}return c}([[u-=C,d-=E,0,0,x-m],[f-=C,v-=E,0,0,w-m],[0,0,u,d,b-_],[0,0,f,v,S-_]]);if(T){c.save(),c.beginPath();var P=(m+x+w)/3,L=(_+b+S)/3,I=Rn(P,L,m,_),O=Rn(P,L,x,b),A=Rn(P,L,w,S);c.moveTo(O[0],O[1]),c.lineTo(I[0],I[1]),c.lineTo(A[0],A[1]),c.clip(),c.transform(T[0],T[2],T[1],T[3],m,_),c.translate(p[0]-C,p[3]-E),c.scale(n/i,-n/i),c.drawImage(g.canvas,0,0),c.restore()}}),u&&(c.save(),c.strokeStyle="black",c.lineWidth=1,s.getTriangles().forEach(function(t,e,i){var n=t.target,r=(n[0][0]-y[0])/o,a=-(n[0][1]-y[1])/o,s=(n[1][0]-y[0])/o,l=-(n[1][1]-y[1])/o,h=(n[2][0]-y[0])/o,u=-(n[2][1]-y[1])/o;c.beginPath(),c.moveTo(s,l),c.lineTo(r,a),c.lineTo(h,u),c.closePath(),c.stroke()}),c.restore()),c.canvas}function Fn(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}function kn(t,e){t.getImage().src=e}function Nn(t){return t.toLocaleString("en",{maximumFractionDigits:10})}function Dn(t,e){t.getImage().src=e}function jn(t,e){var i=[];Object.keys(e).forEach(function(t){null!==e[t]&&void 0!==e[t]&&i.push(t+"="+encodeURIComponent(e[t]))});var n=i.join("&");return(t=-1===(t=t.replace(/[?&]$/,"")).indexOf("?")?t+"?":t+"&")+n}function Gn(t,e,i){var n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(i)),!(n.getResolutions().length<=t[0])){1==e||this.hidpi_||(e=1);var r=n.getTileCoordExtent(t,this.tmpExtent_),o=oi(n.getTileSize(t[0]),this.tmpSize);1!=e&&(o=ri(o,e,this.tmpSize));var a={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return na(a,this.params_),this.getRequestUrl_(t,o,r,e,i,a)}}function zn(t,e,i){var n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(i)),!(n.getResolutions().length<=t[0])){1==e||this.hidpi_&&void 0!==this.serverType_||(e=1);var r=n.getResolution(t[0]),o=n.getTileCoordExtent(t,this.tmpExtent_),a=oi(n.getTileSize(t[0]),this.tmpSize),s=this.gutter_;0!==s&&(a=ni(a,s,this.tmpSize),o=E(o,r*s,o)),1!=e&&(a=ri(a,e,this.tmpSize));var l={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return na(l,this.params_),this.getRequestUrl_(t,a,o,e,i,l)}}function Bn(t,e){var i=ki(e,t.getFormat(),t.onLoad.bind(t),t.onError.bind(t));t.setLoader(i)}function Yn(t){var e=this.requestEncoding_,i={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};e==jd&&na(i,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),t=e==jd?jn(t,i):t.replace(/\{(\w+?)\}/g,function(t,e){return e.toLowerCase()in i?i[e.toLowerCase()]:t});var n=this.tileGrid,r=this.dimensions_;return function(i,o,a){if(i){var s={TileMatrix:n.getMatrixId(i[0]),TileCol:i[1],TileRow:i[2]};na(s,r);var l=t;return l=e==jd?jn(l,s):l.replace(/\{(\w+?)\}/g,function(t,e){return s[e]})}}}function Xn(t,e,i,n,r){var o,a,s,l,h,u,c,p,d,f=i,g=i,v=0,y=0,m=i;for(o=i;o<n;o+=r){var _=e[o],x=e[o+1];void 0!==l&&(p=_-l,d=x-h,s=Math.sqrt(p*p+d*d),void 0!==u&&(y+=a,Math.acos((u*p+c*d)/(a*s))>t&&(y>v&&(v=y,f=m,g=o),y=0,m=o-r)),a=s,u=p,c=d),l=_,h=x}return(y+=s)>v?[m,o]:[f,g]}function Wn(t,e,i,n){for(var r=t[e],o=t[e+1],a=0,s=e+n;s<i;s+=n){var l=t[s],h=t[s+1];a+=Math.sqrt((l-r)*(l-r)+(h-o)*(h-o)),r=l,o=h}return a}function Un(t,e,i,n,r,o,a,s,l,h,u){for(var c,p,d=[],f=t[e]>t[i-n],g=r.length,v=t[e],y=t[e+1],m=t[e+=n],_=t[e+1],x=0,b=Math.sqrt(Math.pow(m-v,2)+Math.pow(_-y,2)),w=!1,S=0;S<g;++S){for(var C=r[c=f?g-S-1:S],E=s*l(h,C,u),T=o+E/2;e<i-n&&x+b<T;)v=m,y=_,m=t[e+=n],_=t[e+1],x+=b,b=Math.sqrt(Math.pow(m-v,2)+Math.pow(_-y,2));var P=T-x,L=Math.atan2(_-y,m-v);if(f&&(L+=L>0?-Math.PI:Math.PI),void 0!==p){var I=L-p;if(w=w||0!==I,I+=I>Math.PI?-2*Math.PI:I<-Math.PI?2*Math.PI:0,Math.abs(I)>a)return null}p=L;var O=P/b,A=ct(v,m,O),R=ct(y,_,O);d[c]=[A,R,E/2,L,C],o+=E}return w?d:[[d[0][0],d[0][1],d[0][2],d[0][3],r]]}function Vn(t,e,i){var n,r=Math.floor(t.length/2);if(e>=r)for(n=r;n<e;n++)t[n][i]=!0;else if(e<r)for(n=e+1;n<r;n++)t[n][i]=!0}function Hn(t,e,i,n,r,o){for(var a=Object.keys(t).map(Number).sort(u),s=0,l=a.length;s<l;++s)for(var h=t[a[s].toString()],c=void 0,p=0,d=h.length;p<d;){var f=h[p++];f!==c&&(c=f,o.push({items:f.declutterItems,opacity:n}));var g=h[p++];f.execute(e,g,i,r)}}function qn(t,e,i,n,r,o,a){var s=Qe(t[0]/2,t[1]/2);s.imageSmoothingEnabled=!1;for(var l=s.canvas,h=new Qh(s,.5,r,null,a),c=i.length,p=Math.floor(16777215/c),d={},f=1;f<=c;++f){var g=i[f-1],v=g.getStyleFunction()||n;if(n){var y=v(g,o);if(y){Array.isArray(y)||(y=[y]);for(var m="#"+("000000"+(f*p).toString(16)).slice(-6),_=0,x=y.length;_<x;++_){var b=y[_],w=b.clone(),S=w.getFill();S&&S.setColor(m);var C=w.getStroke();C&&C.setColor(m),w.setText(void 0);var E=b.getImage();if(E){var T=E.getImageSize();if(!T)continue;var P=document.createElement("canvas");P.width=T[0],P.height=T[1];var L=P.getContext("2d",{alpha:!1});L.fillStyle=m;var I=L.canvas;L.fillRect(0,0,I.width,I.height),Qe(T?T[0]:I.width,T?T[1]:I.height).drawImage(I,0,0),w.setImage(new vc({img:I,imgSize:T,anchor:E.getAnchor(),anchorXUnits:oc,anchorYUnits:oc,offset:E.getOrigin(),size:E.getSize(),opacity:E.getOpacity(),scale:E.getScale(),rotation:E.getRotation(),rotateWithView:E.getRotateWithView()}))}var O=Number(w.getZIndex());(F=d[O])||(F={},d[O]=F,F[Xa.POLYGON]=[],F[Xa.CIRCLE]=[],F[Xa.LINE_STRING]=[],F[Xa.POINT]=[]);var A=w.getGeometryFunction()(g);A&&J(r,A.getExtent())&&F[A.getType().replace("Multi","")].push(A,w)}}}}for(var R=Object.keys(d).map(Number).sort(u),M=(f=0,R.length);f<M;++f){var F=d[R[f]];for(var k in F){var N=F[k];for(_=0,x=N.length;_<x;_+=2){h.setStyle(N[_+1]);for(var D=0,j=e.length;D<j;++D)h.setTransform(e[D]),h.drawGeometry(N[_])}}}return document.body.appendChild(s.canvas),s.getImageData(0,0,l.width,l.height)}function Zn(t,e,i){var n=[];if(i){var r=4*(Math.round(t[0]/2)+Math.round(t[1]/2)*i.width),o=i.data[r+2]+256*(i.data[r+1]+256*i.data[r]),a=Math.floor(16777215/e.length);o&&o%a==0&&n.push(e[o/a-1])}return n}function Kn(t,e,i,n,r,o){var a=NaN,s=NaN,l=(i-e)/n;if(1===l)a=t[e],s=t[e+1];else if(2==l)a=(1-r)*t[e]+r*t[e+n],s=(1-r)*t[e+1]+r*t[e+n+1];else if(0!==l){for(var h=t[e],c=t[e+1],p=0,d=[0],f=e+n;f<i;f+=n){var g=t[f],v=t[f+1];p+=Math.sqrt((g-h)*(g-h)+(v-c)*(v-c)),d.push(p),h=g,c=v}var y=r*p,m=function(t,e,i){for(var n,r,o=u,a=0,s=t.length,l=!1;a<s;)(r=+o(t[n=a+(s-a>>1)],e))<0?a=n+1:(s=n,l=!r);return l?a:~a}(d,y);if(m<0){var _=(y-d[-m-2])/(d[-m-1]-d[-m-2]),x=e+(-m-2)*n;a=ct(t[x],t[x+n],_),s=ct(t[x+1],t[x+n+1],_)}else a=t[e+m*n],s=t[e+m*n+1]}return o?(o[0]=a,o[1]=s,o):[a,s]}function Jn(t,e,i,n,r,o){if(i==e)return null;var a;if(r<t[e+n-1])return o?((a=t.slice(e,e+n))[n-1]=r,a):null;if(t[i-1]<r)return o?((a=t.slice(i-n,i))[n-1]=r,a):null;if(r==t[e+n-1])return t.slice(e,e+n);for(var s=e/n,l=i/n;s<l;){var h=s+l>>1;r<t[(h+1)*n-1]?l=h:s=h+1}var u=t[s*n-1];if(r==u)return t.slice((s-1)*n,(s-1)*n+n);var c=(r-u)/(t[(s+1)*n-1]-u);a=[];for(var p=0;p<n-1;++p)a.push(ct(t[(s-1)*n+p],t[s*n+p],c));return a.push(r),a}function $n(t,e,i){for(var n,r,o,a,s,l,h=[],u=t(0),c=t(1),p=e(u),d=e(c),f=[c,u],g=[d,p],v=[1,0],y={},m=1e5;--m>0&&v.length>0;)o=v.pop(),u=f.pop(),p=g.pop(),(l=o.toString())in y||(h.push(p[0],p[1]),y[l]=!0),a=v.pop(),c=f.pop(),d=g.pop(),at((r=e(n=t(s=(o+a)/2)))[0],r[1],p[0],p[1],d[0],d[1])<i?(h.push(d[0],d[1]),y[l=a.toString()]=!0):(v.push(a,s,s,o),g.push(d,r,r,p),f.push(c,n,n,u));return h}function Qn(t){for(var e=t.dataTransfer.files,i=0,n=e.length;i<n;++i){var r=e.item(i),o=new FileReader;o.addEventListener(ga,this.handleResult_.bind(this,r)),o.readAsText(r)}}function tr(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"}function er(t,e,i,n){for(var r=[],o=[1/0,1/0,-1/0,-1/0],a=0,s=i.length;a<s;++a){var l=i[a];o=k(t,e,l[0],n),r.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=l[l.length-1]}return r}function ir(t){return function(e){return C([t,e])}}function nr(t,e){return t[0]==e[0]?function(i){return C([t,[i[0],e[1]]])}:t[1]==e[1]?function(i){return C([t,[e[0],i[1]]])}:null}function rr(t,e){return t.index-e.index}function or(t,e,i){var n=e.geometry;if(n.getType()===Xa.CIRCLE){var r=n;if(1===e.index){var o=Rt();o&&(r=r.clone().transform(o,i));var a=Ye(r.getCenter(),Ft(t,i)),s=Math.sqrt(a)-r.getRadius();return s*s}}var l=Ft(t,i);return Eg[0]=Ft(e.segment[0],i),Eg[1]=Ft(e.segment[1],i),We(l,Eg)}function ar(t,e,i){var n=e.geometry;if(n.getType()===Xa.CIRCLE&&1===e.index){var r=n,o=Rt();return o&&(r=r.clone().transform(o,i)),Mt(r.getClosestPoint(Ft(t,i)),i)}var a=Ft(t,i);return Eg[0]=Ft(e.segment[0],i),Eg[1]=Ft(e.segment[1],i),Mt(Ne(a,Eg),i)}function sr(t){if(!this.condition_(t))return!0;var e=this.addCondition_(t),i=this.removeCondition_(t),n=this.toggleCondition_(t),r=!e&&!i&&!n,a=t.map,s=this.getFeatures(),l=[],h=[];if(r){o(this.featureLayerAssociation_),a.forEachFeatureAtPixel(t.pixel,(function(t,e){if(this.filter_(t,e))return h.push(t),this.addFeatureLayerAssociation_(t,e),!this.multi_}).bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var u=s.getLength()-1;u>=0;--u){var p=s.item(u),d=h.indexOf(p);d>-1?h.splice(d,1):(s.remove(p),l.push(p))}0!==h.length&&s.extend(h)}else{a.forEachFeatureAtPixel(t.pixel,(function(t,r){if(this.filter_(t,r))return!e&&!n||c(s.getArray(),t)?(i||n)&&c(s.getArray(),t)&&(l.push(t),this.removeFeatureLayerAssociation_(t)):(h.push(t),this.addFeatureLayerAssociation_(t,r)),!this.multi_}).bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var f=l.length-1;f>=0;--f)s.remove(l[f]);s.extend(h)}return(h.length>0||l.length>0)&&this.dispatchEvent(new Og(Ig,h,l,t)),!0}function lr(t){return t.feature?t.feature:t.element?t.element:void 0}function hr(t){for(var e=[],i=0,n=t.length;i<n;++i)e.push(t[i].clone());return e}function ur(t,e,i){var n,r=i?bt(i.featureProjection):null,o=i?bt(i.dataProjection):null;if(n=r&&o&&!Pt(r,o)?(e?t.clone():t).transform(e?r:o,e?o:r):t,e&&i&&void 0!==i.decimals){var a=Math.pow(10,i.decimals);n===t&&(n=t.clone()),n.applyTransform(function(t){for(var e=0,i=t.length;e<i;++e)t[e]=Math.round(t[e]*a)/a;return t})}return n}function cr(t,e){var i=e?bt(e.featureProjection):null,n=e?bt(e.dataProjection):null;return i&&n&&!Pt(i,n)?At(t,n,i):t}function pr(t){return"string"==typeof t?JSON.parse(t)||null:null!==t?t:null}function dr(t,e){var i,n,r;if(!t)return null;if("number"==typeof t.x&&"number"==typeof t.y)r=Xa.POINT;else if(t.points)r=Xa.MULTI_POINT;else if(t.paths)r=1===t.paths.length?Xa.LINE_STRING:Xa.MULTI_LINE_STRING;else if(t.rings){var o=t,a=fr(o),s=function(t,e){var i,n,r=[],o=[],a=[];for(i=0,n=t.length;i<n;++i)r.length=0,te(r,0,t[i],e.length),me(r,0,r.length,e.length)?o.push([t[i]]):a.push(t[i]);for(;a.length;){var s=a.shift(),l=!1;for(i=o.length-1;i>=0;i--)if(I(new bs(o[i][0]).getExtent(),new bs(s).getExtent())){o[i].push(s),l=!0;break}l||o.push([s.reverse()])}return o}(o.rings,a);1===s.length?(r=Xa.POLYGON,t=Object.assign({},t,((i={}).rings=s[0],i))):(r=Xa.MULTI_POLYGON,t=Object.assign({},t,((n={}).rings=s,n)))}return ur((0,Ug[r])(t),!1,e)}function fr(t){var e=Ga;return!0===t.hasZ&&!0===t.hasM?e=Ya:!0===t.hasZ?e=za:!0===t.hasM&&(e=Ba),e}function gr(t){var e=t.getLayout();return{hasZ:e===za||e===Ya,hasM:e===Ba||e===Ya}}function vr(t,e){return(0,Vg[t.getType()])(ur(t,!0,e),e)}function yr(t){return mr(Ji(t,!1))}function mr(t){var e=/^\s*(true|1)|(false|0)\s*$/.exec(t);return e?void 0!==e[1]||!1:void 0}function _r(t){var e=Ji(t,!1),i=Date.parse(e);return isNaN(i)?void 0:i/1e3}function xr(t){return br(Ji(t,!1))}function br(t){var e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);return e?parseFloat(e[1]):void 0}function wr(t){return Sr(Ji(t,!1))}function Sr(t){var e=/^\s*(\d+)\s*$/.exec(t);return e?parseInt(e[1],10):void 0}function Cr(t){return Ji(t,!1).trim()}function Er(t,e){Lr(t,e?"1":"0")}function Tr(t,e){var i=e.toPrecision();t.appendChild(gn().createTextNode(i))}function Pr(t,e){var i=e.toString();t.appendChild(gn().createTextNode(i))}function Lr(t,e){t.appendChild(gn().createTextNode(e))}function Ir(t,e,i){var n=t.getGeometry();if(n){var r=Hv[n.getType()];if(r)return Ki(e[e.length-1].node.namespaceURI,r)}}function Or(t,e,i,n){return t.push(parseFloat(i.getAttribute("lon")),parseFloat(i.getAttribute("lat"))),"ele"in n?(t.push(n.ele),delete n.ele,e.hasZ=!0):t.push(0),"time"in n?(t.push(n.time),delete n.time,e.hasM=!0):t.push(0),t}function Ar(t,e,i){var n=Ga,r=2;if(t.hasZ&&t.hasM?(n=Ya,r=4):t.hasZ?(n=za,r=3):t.hasM&&(n=Ba,r=3),4!==r){for(var o=0,a=e.length/4;o<a;o++)e[o*r]=e[4*o],e[o*r+1]=e[4*o+1],t.hasZ&&(e[o*r+2]=e[4*o+2]),t.hasM&&(e[o*r+2]=e[4*o+3]);if(e.length=e.length/4*r,i)for(o=0,a=i.length;o<a;o++)i[o]=i[o]/4*r}return n}function Rr(t,e){var i=e[e.length-1],n=t.getAttribute("href");null!==n&&(i.link=n),cn(Pv,t,e)}function Mr(t,e){e[e.length-1].extensionsNode_=t}function Fr(t,e){var i=e[0],n=pn({flatCoordinates:[],layoutOptions:{}},Ov,t,e);if(n){var r=n.flatCoordinates;delete n.flatCoordinates;var o=n.layoutOptions;delete n.layoutOptions;var a=Ar(o,r),s=new zf(r,a);ur(s,!1,i);var l=new La(s);return l.setProperties(n,!0),l}}function kr(t,e){var i=e[0],n=pn({flatCoordinates:[],ends:[],layoutOptions:{}},Rv,t,e);if(n){var r=n.flatCoordinates;delete n.flatCoordinates;var o=n.ends;delete n.ends;var a=n.layoutOptions;delete n.layoutOptions;var s=Ar(a,r,o),l=new sg(r,s,o);ur(l,!1,i);var h=new La(l);return h.setProperties(n,!0),h}}function Nr(t,e){var i=e[0],n=pn({},kv,t,e);if(n){var r={},o=Or([],r,t,n),a=Ar(r,o),s=new Ss(o,a);ur(s,!1,i);var l=new La(s);return l.setProperties(n,!0),l}}function Dr(t,e,i){t.setAttribute("href",e);var n=i[i.length-1].properties;fn({node:t},Dv,ku,[n.linkText,n.linkType],i,Nv)}function jr(t,e,i){var n=i[i.length-1],r=n.node.namespaceURI,o=n.properties;switch(t.setAttributeNS(null,"lat",String(e[1])),t.setAttributeNS(null,"lon",String(e[0])),n.geometryLayout){case Ya:0!==e[3]&&(o.time=e[3]);case za:0!==e[2]&&(o.ele=e[2]);break;case Ba:0!==e[2]&&(o.time=e[2])}var a="rtept"==t.nodeName?zv[r]:Uv[r],s=hn(o,a);fn({node:t,properties:o},Vv,ku,s,i,a)}function Gr(t,e){if(!t)return null;var i;switch(t.type){case Xa.POINT:i=new Ss(t.coordinates);break;case Xa.LINE_STRING:i=new zf(t.coordinates);break;case Xa.POLYGON:i=new Ts(t.coordinates);break;case Xa.MULTI_POINT:i=new hg(t.coordinates);break;case Xa.MULTI_LINE_STRING:i=new sg(t.coordinates);break;case Xa.MULTI_POLYGON:i=new cg(t.coordinates);break;case Xa.GEOMETRY_COLLECTION:i=function(e,i){var n=t.geometries.map(function(t){return Gr(t,void 0)});return new zg(n)}();break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return ur(i,!1,e)}function zr(t,e){var i,n=(t=ur(t,!0,e)).getType();switch(n){case Xa.POINT:i={type:"Point",coordinates:t.getCoordinates()};break;case Xa.LINE_STRING:i={type:"LineString",coordinates:t.getCoordinates()};break;case Xa.POLYGON:i=function(i,n){var r;return e&&(r=e.rightHanded),{type:"Polygon",coordinates:t.getCoordinates(r)}}();break;case Xa.MULTI_POINT:i={type:"MultiPoint",coordinates:t.getCoordinates()};break;case Xa.MULTI_LINE_STRING:i={type:"MultiLineString",coordinates:t.getCoordinates()};break;case Xa.MULTI_POLYGON:i=function(i,n){var r;return e&&(r=e.rightHanded),{type:"MultiPolygon",coordinates:t.getCoordinates(r)}}();break;case Xa.GEOMETRY_COLLECTION:i=function(e,i){return{type:"GeometryCollection",geometries:t.getGeometriesArray().map(function(t){var e=na({},i);return delete e.featureProjection,zr(t,e)})}}(0,e);break;case Xa.CIRCLE:i={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+n)}return i}function Br(t){return"string"==typeof t?t:""}function Yr(t){var e=Ji(t,!1),i=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(i){var n=i[1];return[parseInt(n.substr(6,2),16),parseInt(n.substr(4,2),16),parseInt(n.substr(2,2),16),parseInt(n.substr(0,2),16)/255]}}function Xr(t){for(var e,i=Ji(t,!1),n=[],r=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?))?\s*/i;e=r.exec(i);){var o=parseFloat(e[1]),a=parseFloat(e[2]),s=e[3]?parseFloat(e[3]):0;n.push(o,a,s),i=i.substr(e[0].length)}if(""===i)return n}function Wr(t){var e=Ji(t,!1).trim(),i=t.baseURI;return i&&"about:blank"!=i||(i=window.location.href),i?new URL(e,i).href:e}function Ur(t){return xr(t)}function Vr(t,e){return pn(void 0,Sy,t,e,this)}function Hr(t,e){return pn(null,Ly,t,e)}function qr(t,e){var i=pn({flatCoordinates:[],whens:[]},Oy,t,e);if(i){for(var n=i.flatCoordinates,r=i.whens,o=0,a=Math.min(n.length,r.length);o<a;++o)n[4*o+3]=r[o];return new zf(n,Ya)}}function Zr(t,e){return pn(null,Ry,t,e)}function Kr(t,e){var i=pn({},My,t,e),n=Zr(t,e);if(n){var r=new zf(n,za);return r.setProperties(i,!0),r}}function Jr(t,e){var i=pn({},My,t,e),n=Zr(t,e);if(n){var r=new Ts(n,za,[n.length]);return r.setProperties(i,!0),r}}function $r(t,e){var i,n=pn([],Fy,t,e);if(!n)return null;if(0===n.length)return new zg(n);for(var r=!0,o=n[0].getType(),a=1,s=n.length;a<s;++a)if(n[a].getType()!=o){r=!1;break}if(r){var l=void 0,h=void 0;if(o==Xa.POINT){var u=n[0];for(l=u.getLayout(),h=u.getFlatCoordinates(),a=1,s=n.length;a<s;++a)f(h,n[a].getFlatCoordinates());io(i=new hg(h,l),n)}else o==Xa.LINE_STRING?io(i=new sg(n),n):o==Xa.POLYGON?io(i=new cg(n),n):o==Xa.GEOMETRY_COLLECTION?i=new zg(n):S(!1,37)}else i=new zg(n);return i}function Qr(t,e){var i=pn({},My,t,e),n=Zr(t,e);if(n){var r=new Ss(n,za);return r.setProperties(i,!0),r}}function to(t,e){var i=pn({},My,t,e),n=pn([null],ky,t,e);if(n&&n[0]){for(var r=n[0],o=[r.length],a=1,s=n.length;a<s;++a)f(r,n[a]),o.push(r.length);var l=new Ts(r,za,o);return l.setProperties(i,!0),l}}function eo(t,e){var i=pn({},Ny,t,e,this);if(!i)return null;var n,r="fillStyle"in i?i.fillStyle:vy,o=i.fill;void 0===o||o||(r=null),"imageStyle"in i?i.imageStyle!=_v&&(n=i.imageStyle):n=yy;var a="textStyle"in i?i.textStyle:_y,s="strokeStyle"in i?i.strokeStyle:my,l=i.outline;return void 0===l||l?[new xc({fill:r,image:n,stroke:s,text:a,zIndex:void 0})]:[new xc({geometry:function(t){var e=t.getGeometry(),i=e.getType();return i===Xa.GEOMETRY_COLLECTION?new zg(e.getGeometriesArrayRecursive().filter(function(t){var e=t.getType();return e!==Xa.POLYGON&&e!==Xa.MULTI_POLYGON})):i!==Xa.POLYGON&&i!==Xa.MULTI_POLYGON?e:void 0},fill:r,image:n,stroke:s,text:a,zIndex:void 0}),new xc({geometry:function(t){var e=t.getGeometry(),i=e.getType();return i===Xa.GEOMETRY_COLLECTION?new zg(e.getGeometriesArrayRecursive().filter(function(t){var e=t.getType();return e===Xa.POLYGON||e===Xa.MULTI_POLYGON})):i===Xa.POLYGON||i===Xa.MULTI_POLYGON?e:void 0},fill:r,stroke:null,zIndex:void 0})]}function io(t,e){var i,n,r,o=e.length,a=new Array(e.length),s=new Array(e.length),l=new Array(e.length);i=!1,n=!1,r=!1;for(var h=0;h<o;++h){var u=e[h];a[h]=u.get("extrude"),s[h]=u.get("tessellate"),l[h]=u.get("altitudeMode"),i=i||void 0!==a[h],n=n||void 0!==s[h],r=r||l[h]}i&&t.set("extrude",a),n&&t.set("tessellate",s),r&&t.set("altitudeMode",l)}function no(t,e){cn(jy,t,e)}function ro(t,e){cn(dy,t,e)}function oo(t,e){for(var i=yi(e),n=[255*(4==i.length?i[3]:1),i[2],i[1],i[0]],r=0;r<4;++r){var o=Math.floor(n[r]).toString(16);n[r]=1==o.length?"0"+o:o}Lr(t,n.join(""))}function ao(t,e,i){var n,r={node:t},o=e.getType(),a=[];o===Xa.GEOMETRY_COLLECTION?(e.getGeometriesArrayRecursive().forEach(function(t){var e=t.getType();e===Xa.MULTI_POINT?a=a.concat(t.getPoints()):e===Xa.MULTI_LINE_STRING?a=a.concat(t.getLineStrings()):e===Xa.MULTI_POLYGON?a=a.concat(t.getPolygons()):e===Xa.POINT||e===Xa.LINE_STRING||e===Xa.POLYGON?a.push(t):S(!1,39)}),n=om):o===Xa.MULTI_POINT?(a=e.getPoints(),n=am):o===Xa.MULTI_LINE_STRING?(a=e.getLineStrings(),n=sm):o===Xa.MULTI_POLYGON?(a=e.getPolygons(),n=hm):S(!1,39),fn(r,um,n,a,i)}function so(t,e,i){fn({node:t},cm,lm,[e],i)}function lo(t,e,i){var n={node:t};e.getId()&&t.setAttribute("id",e.getId());var r=e.getProperties(),o={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};o[e.getGeometryName()]=1;var a=Object.keys(r||{}).sort().filter(function(t){return!o[t]}),s=e.getStyleFunction();if(s){var l=s(e,0);if(l){var h=Array.isArray(l)?l:[l],u=h;if(e.getGeometry()&&(u=h.filter(function(t){var i=t.getGeometryFunction()(e);if(i){var n=i.getType();return n===Xa.GEOMETRY_COLLECTION?i.getGeometriesArrayRecursive().filter(function(t){var e=t.getType();return e===Xa.POINT||e===Xa.MULTI_POINT}).length:n===Xa.POINT||n===Xa.MULTI_POINT}})),this.writeStyles_){var c=h,p=h;e.getGeometry()&&(c=h.filter(function(t){var i=t.getGeometryFunction()(e);if(i){var n=i.getType();return n===Xa.GEOMETRY_COLLECTION?i.getGeometriesArrayRecursive().filter(function(t){var e=t.getType();return e===Xa.LINE_STRING||e===Xa.MULTI_LINE_STRING}).length:n===Xa.LINE_STRING||n===Xa.MULTI_LINE_STRING}}),p=h.filter(function(t){var i=t.getGeometryFunction()(e);if(i){var n=i.getType();return n===Xa.GEOMETRY_COLLECTION?i.getGeometriesArrayRecursive().filter(function(t){var e=t.getType();return e===Xa.POLYGON||e===Xa.MULTI_POLYGON}).length:n===Xa.POLYGON||n===Xa.MULTI_POLYGON}})),r.Style={pointStyles:u,lineStyles:c,polyStyles:p}}if(u.length&&void 0===r.name){var d=u[0].getText();d&&(r.name=d.getText())}}}var f=dm[i[i.length-1].node.namespaceURI],g=hn(r,f);if(fn(n,pm,ku,g,i,f),a.length>0){var v=hn(r,a);fn(n,pm,fm,[{names:a,values:v}],i)}var y=i[0],m=e.getGeometry();m&&(m=ur(m,!0,y)),fn(n,pm,om,[m],i)}function ho(t,e,i){var n=e.getFlatCoordinates(),r={node:t};r.layout=e.getLayout(),r.stride=e.getStride();var o=e.getProperties();o.coordinates=n;var a=gm[i[i.length-1].node.namespaceURI],s=hn(o,a);fn(r,vm,ku,s,i,a)}function uo(t,e,i){var n=e.getLinearRings(),r=n.shift(),o={node:t};fn(o,mm,_m,n,i),fn(o,mm,xm,[r],i)}function co(t,e){Tr(t,Math.round(1e6*e)/1e6)}function po(t,e,i){if(3===t){var n={keys:[],values:[],features:[]},r=i.readVarint()+i.pos;i.readFields(fo,n,r),n.length=n.features.length,n.length&&(e[n.name]=n)}}function fo(t,e,i){if(15===t)e.version=i.readVarint();else if(1===t)e.name=i.readString();else if(5===t)e.extent=i.readVarint();else if(2===t)e.features.push(i.pos);else if(3===t)e.keys.push(i.readString());else if(4===t){for(var n=null,r=i.readVarint()+i.pos;i.pos<r;)n=1==(t=i.readVarint()>>3)?i.readString():2===t?i.readFloat():3===t?i.readDouble():4===t?i.readVarint64():5===t?i.readVarint():6===t?i.readSVarint():7===t?i.readBoolean():null;e.values.push(n)}}function go(t,e,i){if(1==t)e.id=i.readVarint();else if(2==t)for(var n=i.readVarint()+i.pos;i.pos<n;){var r=e.layer.keys[i.readVarint()],o=e.layer.values[i.readVarint()];e.properties[r]=o}else 3==t?e.type=i.readVarint():4==t&&(e.geometry=i.pos)}function vo(t,e,i){t.pos=e.features[i];var n=t.readVarint()+t.pos,r={layer:e,type:0,properties:{}};return t.readFields(go,r,n),r}function yo(t,e){e[e.length-1].tags[t.getAttribute("k")]=t.getAttribute("v")}function mo(t,e,i,n,r,o){var a,s;void 0!==r?(a=r,s=void 0!==o?o:0):(a=[],s=0);for(var l=e;l<i;){var h=t[l++];a[s++]=t[l++],a[s++]=h;for(var u=2;u<n;++u)a[s++]=t[l++]}return a.length=s,a}function _o(t,e,i){var n,r=i||1e5,o=new Array(e);for(n=0;n<e;++n)o[n]=0;for(var a=0,s=t.length;a<s;)for(n=0;n<e;++n,++a){var l=t[a],h=l-o[n];o[n]=l,t[a]=h}return bo(t,r)}function xo(t,e,i){var n,r=i||1e5,o=new Array(e);for(n=0;n<e;++n)o[n]=0;for(var a=wo(t,r),s=0,l=a.length;s<l;)for(n=0;n<e;++n,++s)o[n]+=a[s],a[s]=o[n];return a}function bo(t,e){for(var i=e||1e5,n=0,r=t.length;n<r;++n)t[n]=Math.round(t[n]*i);return function(t){for(var e=0,i=t.length;e<i;++e){var n=t[e];t[e]=n<0?~(n<<1):n<<1}return function(t){for(var e="",i=0,n=t.length;i<n;++i)e+=function(t){for(var e,i="";t>=32;)e=63+(32|31&t),i+=String.fromCharCode(e),t>>=5;return e=t+63,i+=String.fromCharCode(e)}(t[i]);return e}(t)}(t)}function wo(t,e){for(var i=e||1e5,n=function(e){for(var i=function(t){for(var e=[],i=0,n=0,r=0,o=t.length;r<o;++r){var a=t.charCodeAt(r)-63;i|=(31&a)<<n,a<32?(e.push(i),i=0,n=0):n+=5}return e}(t),n=0,r=i.length;n<r;++n){var o=i[n];i[n]=1&o?~(o>>1):o>>1}return i}(),r=0,o=n.length;r<o;++r)n[r]/=i;return n}function So(t,e){for(var i,n,r=[],o=0,a=t.length;o<a;++o)i=t[o],o>0&&r.pop(),n=i>=0?e[i]:e[~i].slice().reverse(),r.push.apply(r,n);for(var s=0,l=r.length;s<l;++s)r[s]=r[s].slice();return r}function Co(t,e,i,n,r,o,a){var s,l=t.type,h=Ym[l];s="Point"===l||"MultiPoint"===l?h(t,i,n):h(t,e);var u=new La;u.setGeometry(ur(s,!1,a)),void 0!==t.id&&u.setId(t.id);var c=t.properties;return r&&(c||(c={}),c[r]=o),c&&u.setProperties(c,!0),u}function Eo(t,e,i){t[0]=t[0]*e[0]+i[0],t[1]=t[1]*e[1]+i[1]}function To(t){var e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(qm,e))}function Po(t,e,i){return new Km(t,e,i)}function Lo(t,e,i){var n=Ki(z_,"Filter"),r=Ki(z_,"FeatureId");n.appendChild(r),r.setAttribute("fid",e),t.appendChild(n)}function Io(t,e){var i=(t=t||"feature")+":";return 0===e.indexOf(i)?e:i+e}function Oo(t,e,i){fn({node:t},V_,ln(e.getTagName()),[e],i)}function Ao(t,e,i){for(var n={node:t},r=e.conditions,o=0,a=r.length;o<a;++o){var s=r[o];fn(n,V_,ln(s.getTagName()),[s],i)}}function Ro(t,e,i){void 0!==e.matchCase&&t.setAttribute("matchCase",e.matchCase.toString()),Fo(t,e.propertyName),ko(t,""+e.expression)}function Mo(t,e,i){var n=Ki(z_,t);Lr(n,i),e.appendChild(n)}function Fo(t,e){Mo("PropertyName",t,e)}function ko(t,e){Mo("Literal",t,e)}function No(t,e){var i=Ki(Jg,"TimeInstant");t.appendChild(i);var n=Ki(Jg,"timePosition");i.appendChild(n),Lr(n,e)}function Do(t){var e=t.getCoordinates();return 0===e.length?"":e.join(" ")}function jo(t){for(var e=t.getCoordinates(),i=[],n=0,r=e.length;n<r;++n)i.push(e[n].join(" "));return i.join(",")}function Go(t){for(var e=[],i=t.getLinearRings(),n=0,r=i.length;n<r;++n)e.push("("+jo(i[n])+")");return e.join(",")}function zo(t){var e=t.getType(),i=(0,tx[e])(t);if(e=e.toUpperCase(),"function"==typeof t.getFlatCoordinates){var n=function(e){var i=t.getLayout(),n="";return i!==za&&i!==Ya||(n+="Z"),i!==Ba&&i!==Ya||(n+="M"),n}();n.length>0&&(e+=" "+n)}return 0===i.length?e+" EMPTY":e+"("+i+")"}function Bo(t){return t.getAttributeNS("http://www.w3.org/1999/xlink","href")}function Yo(t,e){return pn({},bx,t,e)}function Xo(t,e){return pn({},yx,t,e)}function Wo(t,e){var i=Yo(t,e);if(i){var n=[Sr(t.getAttribute("width")),Sr(t.getAttribute("height"))];return i.size=n,i}}function Uo(t,e){return pn([],wx,t,e)}function Vo(t,e){var i=Cr(t).split(/\s+/);if(i&&2==i.length){var n=+i[0],r=+i[1];if(!isNaN(n)&&!isNaN(r))return[n,r]}}function Ho(){var t=document.body;return!!(t.webkitRequestFullscreen||t.msRequestFullscreen&&document.msFullscreenEnabled||t.requestFullscreen&&document.fullscreenEnabled)}function qo(){return!!(document.webkitIsFullScreen||document.msFullscreenElement||document.fullscreenElement)}function Zo(t){t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}i.r(e);var Ko,Jo=0,$o=(Ko=function(t,e){return(Ko=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}Ko(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Qo=function(t){function e(e){var i=this,n="Assertion failed. See https://openlayers.org/en/v"+"6.3.1".split("-")[0]+"/doc/errors/#"+e+" for details.";return(i=t.call(this,n)||this).code=e,i.name="AssertionError",i.message=n,i}return $o(e,t),e}(Error),ta="add",ea="remove",ia="propertychange",na="function"==typeof Object.assign?Object.assign:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),n=1,r=arguments.length;n<r;++n){var o=arguments[n];if(null!=o)for(var a in o)o.hasOwnProperty(a)&&(i[a]=o[a])}return i},ra="function"==typeof Object.values?Object.values:function(t){var e=[];for(var i in t)e.push(t[i]);return e},oa=function(){function t(){this.disposed_=!1}return t.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}(),aa=function(){function t(t){this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.propagationStopped=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}(),sa=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),la=function(t){function e(e){var i=t.call(this)||this;return i.eventTarget_=e,i.pendingRemovals_={},i.dispatching_={},i.listeners_={},i}return sa(e,t),e.prototype.addEventListener=function(t,e){if(t&&e){var i=this.listeners_[t];i||(i=[],this.listeners_[t]=i),-1===i.indexOf(e)&&i.push(e)}},e.prototype.dispatchEvent=function(t){var e="string"==typeof t?new aa(t):t,i=e.type;e.target||(e.target=this.eventTarget_||this);var n,r=this.listeners_[i];if(r){i in this.dispatching_||(this.dispatching_[i]=0,this.pendingRemovals_[i]=0),++this.dispatching_[i];for(var o=0,a=r.length;o<a;++o)if(!1===(n="handleEvent"in r[o]?r[o].handleEvent(e):r[o].call(this,e))||e.propagationStopped){n=!1;break}if(--this.dispatching_[i],0===this.dispatching_[i]){var s=this.pendingRemovals_[i];for(delete this.pendingRemovals_[i];s--;)this.removeEventListener(i,x);delete this.dispatching_[i]}return n}},e.prototype.disposeInternal=function(){o(this.listeners_)},e.prototype.getListeners=function(t){return this.listeners_[t]},e.prototype.hasListener=function(t){return t?t in this.listeners_:Object.keys(this.listeners_).length>0},e.prototype.removeEventListener=function(t,e){var i=this.listeners_[t];if(i){var n=i.indexOf(e);-1!==n&&(t in this.pendingRemovals_?(i[n]=x,++this.pendingRemovals_[t]):(i.splice(n,1),0===i.length&&delete this.listeners_[t]))}},e}(oa),ha="change",ua="error",ca="contextmenu",pa="click",da="keydown",fa="keypress",ga="load",va="touchmove",ya="wheel",ma=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),_a=function(t){function e(){var e=t.call(this)||this;return e.revision_=0,e}return ma(e,t),e.prototype.changed=function(){++this.revision_,this.dispatchEvent(ha)},e.prototype.getRevision=function(){return this.revision_},e.prototype.on=function(t,e){if(Array.isArray(t)){for(var i=t.length,n=new Array(i),r=0;r<i;++r)n[r]=s(this,t[r],e);return n}return s(this,t,e)},e.prototype.once=function(t,e){if(Array.isArray(t)){for(var i=t.length,n=new Array(i),r=0;r<i;++r)n[r]=l(this,t[r],e);return n}return l(this,t,e)},e.prototype.un=function(t,e){if(Array.isArray(t))for(var i=0,n=t.length;i<n;++i)this.removeEventListener(t[i],e);else this.removeEventListener(t,e)},e}(la),xa=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ba=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.key=i,r.oldValue=n,r}return xa(e,t),e}(aa),wa={},Sa=function(t){function e(e){var i=t.call(this)||this;return r(i),i.values_={},void 0!==e&&i.setProperties(e),i}return xa(e,t),e.prototype.get=function(t){var e;return this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},e.prototype.getKeys=function(){return Object.keys(this.values_)},e.prototype.getProperties=function(){return na({},this.values_)},e.prototype.notify=function(t,e){var i;i=w(t),this.dispatchEvent(new ba(i,t,e)),this.dispatchEvent(new ba(i=ia,t,e))},e.prototype.set=function(t,e,i){if(i)this.values_[t]=e;else{var n=this.values_[t];this.values_[t]=e,n!==e&&this.notify(t,n)}},e.prototype.setProperties=function(t,e){for(var i in t)this.set(i,t[i],e)},e.prototype.unset=function(t,e){if(t in this.values_){var i=this.values_[t];delete this.values_[t],e||this.notify(t,i)}},e}(_a),Ca=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ea=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.element=i,r.index=n,r}return Ca(e,t),e}(aa),Ta=function(t){function e(e,i){var n=t.call(this)||this;if(n.unique_=!!(i||{}).unique,n.array_=e||[],n.unique_)for(var r=0,o=n.array_.length;r<o;++r)n.assertUnique_(n.array_[r],r);return n.updateLength_(),n}return Ca(e,t),e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var e=0,i=t.length;e<i;++e)this.push(t[e]);return this},e.prototype.forEach=function(t){for(var e=this.array_,i=0,n=e.length;i<n;++i)t(e[i],i,e)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get("length")},e.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new Ea(ta,e,t))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.array_,i=0,n=e.length;i<n;++i)if(e[i]===t)return this.removeAt(i)},e.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new Ea(ea,e,t)),e},e.prototype.setAt=function(t,e){var i=this.getLength();if(t<i){this.unique_&&this.assertUnique_(e,t);var n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new Ea(ea,n,t)),this.dispatchEvent(new Ea(ta,e,t))}else{for(var r=i;r<t;++r)this.insertAt(r,void 0);this.insertAt(t,e)}},e.prototype.updateLength_=function(){this.set("length",this.array_.length)},e.prototype.assertUnique_=function(t,e){for(var i=0,n=this.array_.length;i<n;++i)if(this.array_[i]===t&&i!==e)throw new Qo(58)},e}(Sa),Pa=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),La=function(t){function e(e){var i=t.call(this)||this;return i.id_=void 0,i.geometryName_="geometry",i.style_=null,i.styleFunction_=void 0,i.geometryChangeKey_=null,i.addEventListener(w(i.geometryName_),i.handleGeometryChanged_),e&&("function"==typeof e.getSimplifiedGeometry?i.setGeometry(e):i.setProperties(e)),i}return Pa(e,t),e.prototype.clone=function(){var t=new e(this.getProperties());t.setGeometryName(this.getGeometryName());var i=this.getGeometry();i&&t.setGeometry(i.clone());var n=this.getStyle();return n&&t.setStyle(n),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(h(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=s(t,ha,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?function(t){if("function"==typeof t)return t;var e;return Array.isArray(t)?e=t:(S("function"==typeof t.getZIndex,41),e=[t]),function(){return e}}(t):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){this.removeEventListener(w(this.geometryName_),this.handleGeometryChanged_),this.geometryName_=t,this.addEventListener(w(this.geometryName_),this.handleGeometryChanged_),this.handleGeometryChanged_()},e}(Sa),Ia="bottom-left",Oa="bottom-right",Aa="top-left",Ra="top-right",Ma=0,Fa=1,ka=2,Na=4,Da=8,ja=16,Ga="XY",za="XYZ",Ba="XYM",Ya="XYZM",Xa={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},Wa="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2},Ua={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},Va={};Va[Ua.DEGREES]=2*Math.PI*6370997/360,Va[Ua.FEET]=.3048,Va[Ua.METERS]=1,Va[Ua.USFEET]=1200/3937;var Ha,qa,Za,Ka=Ua,Ja=function(){function t(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.canWrapX_},t.prototype.getCode=function(){return this.code_},t.prototype.getExtent=function(){return this.extent_},t.prototype.getUnits=function(){return this.units_},t.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||Va[this.units_]},t.prototype.getWorldExtent=function(){return this.worldExtent_},t.prototype.getAxisOrientation=function(){return this.axisOrientation_},t.prototype.isGlobal=function(){return this.global_},t.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},t.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},t.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},t.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},t.prototype.setWorldExtent=function(t){this.worldExtent_=t},t.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},t.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},t}(),$a=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Qa=6378137*Math.PI,ts=[-Qa,-Qa,Qa,Qa],es=[-180,-85,180,85],is=function(t){function e(e){return t.call(this,{code:e,units:Ka.METERS,extent:ts,global:!0,worldExtent:es,getPointResolution:function(t,e){return t/Wa(e[1]/6378137)}})||this}return $a(e,t),e}(Ja),ns=[new is("EPSG:3857"),new is("EPSG:102100"),new is("EPSG:102113"),new is("EPSG:900913"),new is("urn:ogc:def:crs:EPSG:6.18:3:3857"),new is("urn:ogc:def:crs:EPSG::3857"),new is("http://www.opengis.net/gml/srs/epsg.xml#3857")],rs=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),os=[-180,-90,180,90],as=6378137*Math.PI/180,ss=function(t){function e(e,i){return t.call(this,{code:e,units:Ka.DEGREES,extent:os,axisOrientation:i,global:!0,metersPerUnit:as,worldExtent:os})||this}return rs(e,t),e}(Ja),ls=[new ss("CRS:84"),new ss("EPSG:4326","neu"),new ss("urn:ogc:def:crs:EPSG::4326","neu"),new ss("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new ss("urn:ogc:def:crs:OGC:1.3:CRS84"),new ss("urn:ogc:def:crs:OGC:2:84"),new ss("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new ss("urn:x-ogc:def:crs:EPSG:4326","neu")],hs={},us={},cs=null;St(ns),St(ls),Ha=ns,qa=function(t,e,i){var n=t.length,r=i>1?i:2,o=e;void 0===o&&(o=r>2?t.slice():new Array(n));for(var a=Qa,s=0;s<n;s+=r){o[s]=a*t[s]/180;var l=6378137*Math.log(Math.tan(Math.PI*(+t[s+1]+90)/360));l>a?l=a:l<-a&&(l=-a),o[s+1]=l}return o},Za=function(t,e,i){var n=t.length,r=i>1?i:2,o=e;void 0===o&&(o=r>2?t.slice():new Array(n));for(var a=0;a<n;a+=r)o[a]=180*t[a]/Qa,o[a+1]=360*Math.atan(Math.exp(t[a+1]/6378137))/Math.PI-90;return o},ls.forEach(function(t){Ha.forEach(function(e){vt(t,e,qa),vt(e,t,Za)})});var ps,ds,fs=new Array(6),gs=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),vs=[1,0,0,1,0,0],ys=function(t){function e(){var e,i,n,r,o,a=t.call(this)||this;return a.extent_=[1/0,1/0,-1/0,-1/0],a.extentRevision_=-1,a.simplifiedGeometryMaxMinSquaredTolerance=0,a.simplifiedGeometryRevision=0,a.simplifyTransformedInternal=(e=function(t,e,i){if(!i)return this.getSimplifiedGeometry(e);var n=this.clone();return n.applyTransform(i),n.getSimplifiedGeometry(e)},o=!1,function(){var t=Array.prototype.slice.call(arguments);return o&&this===r&&v(t,n)||(o=!0,r=this,n=t,i=e.apply(this,arguments)),i}),a}return gs(e,t),e.prototype.simplifyTransformed=function(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)},e.prototype.clone=function(){return n()},e.prototype.closestPointXY=function(t,e,i,r){return n()},e.prototype.containsXY=function(t,e){var i=this.getClosestPoint([t,e]);return i[0]===t&&i[1]===e},e.prototype.getClosestPoint=function(t,e){var i=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],i,1/0),i},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return n()},e.prototype.getExtent=function(t){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}(this.extent_,t)},e.prototype.rotate=function(t,e){n()},e.prototype.scale=function(t,e,i){n()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return n()},e.prototype.getType=function(){return n()},e.prototype.applyTransform=function(t){n()},e.prototype.intersectsExtent=function(t){return n()},e.prototype.translate=function(t,e){n()},e.prototype.transform=function(t,e){var i=bt(t),n=i.getUnits()==Ka.TILE_PIXELS?function(t,n,r){var o=i.getExtent(),a=i.getWorldExtent(),s=V(a)/V(o);return Yt(vs,a[0],a[3],s,-s,0,0,0),it(t,0,t.length,r,vs,n),It(i,e)(t,n,r)}:It(i,e);return this.applyTransform(n),this},e}(Sa),ms=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),_s=function(t){function e(){var e=t.call(this)||this;return e.layout=Ga,e.stride=2,e.flatCoordinates=null,e}return ms(e,t),e.prototype.computeExtent=function(t){return k(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinates=function(){return n()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,e){this.stride=Ut(t),this.layout=t,this.flatCoordinates=e},e.prototype.setCoordinates=function(t,e){n()},e.prototype.setLayout=function(t,e,i){var n;if(t)n=Ut(t);else{for(var r=0;r<i;++r){if(0===e.length)return this.layout=Ga,void(this.stride=2);e=e[0]}t=function(t){var e;return 2==t?e=Ga:3==t?e=za:4==t&&(e=Ya),e}(n=e.length)}this.layout=t,this.stride=n},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,e){var i=this.getFlatCoordinates();if(i){var n=this.getStride();nt(i,0,i.length,n,t,e,i),this.changed()}},e.prototype.scale=function(t,e,i){var n=e;void 0===n&&(n=t);var r=i;r||(r=W(this.getExtent()));var o=this.getFlatCoordinates();if(o){var a=this.getStride();!function(t,e,i,n,o,a,s,l){for(var h=l||[],u=r[0],c=r[1],p=0,d=0;d<i;d+=n){var f=t[d+1]-c;h[p++]=u+o*(t[d]-u),h[p++]=c+a*f;for(var g=d+2;g<d+n;++g)h[p++]=t[g]}l&&h.length!=p&&(h.length=p)}(o,0,o.length,a,t,n,0,o),this.changed()}},e.prototype.translate=function(t,e){var i=this.getFlatCoordinates();if(i){var n=this.getStride();rt(i,0,i.length,n,t,e,i),this.changed()}},e}(ys),xs=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),bs=function(t){function e(e,i){var n=t.call(this)||this;return n.maxDelta_=-1,n.maxDeltaRevision_=-1,void 0===i||Array.isArray(e[0])?n.setCoordinates(e,i):n.setFlatCoordinates(i,e),n}return xs(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,n){return n<P(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Zt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Jt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,n))},e.prototype.getArea=function(){return Vt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return ie(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=oe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,Ga)},e.prototype.getType=function(){return Xa.LINEAR_RING},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=te(this.flatCoordinates,0,t,this.stride),this.changed()},e}(_s),ws=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ss=function(t){function e(e,i){var n=t.call(this)||this;return n.setCoordinates(e,i),n}return ws(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,n){var r=this.flatCoordinates,o=st(t,e,r[0],r[1]);if(o<n){for(var a=this.stride,s=0;s<a;++s)i[s]=r[s];return i.length=a,o}return n},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return F(this.flatCoordinates,t)},e.prototype.getType=function(){return Xa.POINT},e.prototype.intersectsExtent=function(t){return O(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Qt(this.flatCoordinates,0,t),this.changed()},e}(_s),Cs=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Es=function(t){function e(e,i,n){var r=t.call(this)||this;return r.ends_=[],r.flatInteriorPointRevision_=-1,r.flatInteriorPoint_=null,r.maxDelta_=-1,r.maxDeltaRevision_=-1,r.orientedRevision_=-1,r.orientedFlatCoordinates_=null,void 0!==i&&n?(r.setFlatCoordinates(i,e),r.ends_=n):r.setCoordinates(e,i),r}return Cs(e,t),e.prototype.appendLinearRing=function(t){this.flatCoordinates?f(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,i,n){return n<P(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Kt(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),$t(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,n))},e.prototype.containsXY=function(t,e){return ce(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return Ht(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?xe(e=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,t):e=this.flatCoordinates,ne(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=W(this.getExtent());this.flatInteriorPoint_=pe(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new Ss(this.getFlatInteriorPoint(),Ba)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new bs(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.ends_,n=[],r=0,o=0,a=i.length;o<a;++o){var s=i[o],l=new bs(e.slice(r,s),t);n.push(l),r=s}return n},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;_e(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=xe(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],n=[];return i.length=le(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),i,0,n),new e(i,Ga,n)},e.prototype.getType=function(){return Xa.POLYGON},e.prototype.intersectsExtent=function(t){return ve(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=ee(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},e}(_s),Ts=Es,Ps=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ls="projection",Is="tracking",Os=function(t){function e(e){var i=t.call(this,ua)||this;return i.code=e.code,i.message=e.message,i}return Ps(e,t),e}(aa),As=function(t){function e(e){var i=t.call(this)||this,n=e||{};return i.position_=null,i.transform_=_t,i.watchId_=void 0,i.addEventListener(w(Ls),i.handleProjectionChanged_),i.addEventListener(w(Is),i.handleTrackingChanged_),void 0!==n.projection&&i.setProjection(n.projection),void 0!==n.trackingOptions&&i.setTrackingOptions(n.trackingOptions),i.setTracking(void 0!==n.tracking&&n.tracking),i}return Ps(e,t),e.prototype.disposeInternal=function(){this.setTracking(!1),t.prototype.disposeInternal.call(this)},e.prototype.handleProjectionChanged_=function(){var t=this.getProjection();t&&(this.transform_=Lt(bt("EPSG:4326"),t),this.position_&&this.set("position",this.transform_(this.position_)))},e.prototype.handleTrackingChanged_=function(){if("geolocation"in navigator){var t=this.getTracking();t&&void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):t||void 0===this.watchId_||(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}},e.prototype.positionChange_=function(t){var e=t.coords;this.set("accuracy",e.accuracy),this.set("altitude",null===e.altitude?void 0:e.altitude),this.set("altitudeAccuracy",null===e.altitudeAccuracy?void 0:e.altitudeAccuracy),this.set("heading",null===e.heading?void 0:ht(e.heading)),this.position_?(this.position_[0]=e.longitude,this.position_[1]=e.latitude):this.position_=[e.longitude,e.latitude];var i=this.transform_(this.position_);this.set("position",i),this.set("speed",null===e.speed?void 0:e.speed);var n=we(this.position_,e.accuracy);n.applyTransform(this.transform_),this.set("accuracyGeometry",n),this.changed()},e.prototype.positionError_=function(t){this.setTracking(!1),this.dispatchEvent(new Os(t))},e.prototype.getAccuracy=function(){return this.get("accuracy")},e.prototype.getAccuracyGeometry=function(){return this.get("accuracyGeometry")||null},e.prototype.getAltitude=function(){return this.get("altitude")},e.prototype.getAltitudeAccuracy=function(){return this.get("altitudeAccuracy")},e.prototype.getHeading=function(){return this.get("heading")},e.prototype.getPosition=function(){return this.get("position")},e.prototype.getProjection=function(){return this.get(Ls)},e.prototype.getSpeed=function(){return this.get("speed")},e.prototype.getTracking=function(){return this.get(Is)},e.prototype.getTrackingOptions=function(){return this.get("trackingOptions")},e.prototype.setProjection=function(t){this.set(Ls,bt(t))},e.prototype.setTracking=function(t){this.set(Is,t)},e.prototype.setTrackingOptions=function(t){this.set("trackingOptions",t)},e}(Sa),Rs=function(){function t(t,e,i){this.decay_=t,this.minVelocity_=e,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}return t.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},t.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},t.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var i=e-3;i>0&&this.points_[i+2]>t;)i-=3;var n=this.points_[e+2]-this.points_[i+2];if(n<1e3/60)return!1;var r=this.points_[e]-this.points_[i],o=this.points_[e+1]-this.points_[i+1];return this.angle_=Math.atan2(o,r),this.initialVelocity_=Math.sqrt(r*r+o*o)/n,this.initialVelocity_>this.minVelocity_},t.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},t.prototype.getAngle=function(){return this.angle_},t}(),Ms=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Fs=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.map=i,r.frameState=void 0!==n?n:null,r}return Ms(e,t),e}(aa),ks=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ns=function(t){function e(e,i,n,r,o){var a=t.call(this,e,i,o)||this;return a.originalEvent=n,a.pixel_=null,a.coordinate_=null,a.dragging=void 0!==r&&r,a}return ks(e,t),Object.defineProperty(e.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t},enumerable:!0,configurable:!0}),e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},e}(Fs),Ds=(i(1),"undefined"!=typeof navigator?navigator.userAgent.toLowerCase():""),js=-1!==Ds.indexOf("firefox"),Gs=(-1!==Ds.indexOf("safari")&&Ds.indexOf("chrom"),-1!==Ds.indexOf("webkit")&&-1==Ds.indexOf("edge")),zs=-1!==Ds.indexOf("macintosh"),Bs="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,Ys="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,Xs="undefined"!=typeof Image&&Image.prototype.decode,Ws=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(t){}return t}(),Us={SINGLECLICK:"singleclick",CLICK:pa,DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Vs=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Hs=function(t){function e(e,i,n,r,o){var a=t.call(this,e,i,n,r,o)||this;return a.pointerEvent=n,a}return Vs(e,t),e}(Ns),qs="pointermove",Zs="pointerdown",Ks="pointerup",Js=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),$s=function(t){function e(e,i){var n=t.call(this,e)||this;n.map_=e,n.dragging_=!1,n.dragListenerKeys_=[],n.moveTolerance_=i?i*Bs:Bs,n.down_=null;var r=n.map_.getViewport();return n.activePointers_=0,n.trackedTouches_={},n.element_=r,n.pointerdownListenerKey_=s(r,Zs,n.handlePointerDown_,n),n.relayedListenerKey_=s(r,qs,n.relayEvent_,n),n.boundHandleTouchMove_=n.handleTouchMove_.bind(n),n.element_.addEventListener(va,n.boundHandleTouchMove_,!!Ws&&{passive:!1}),n}return Js(e,t),e.prototype.emulateClick_=function(t){var e=new Hs(Us.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new Hs(Us.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout((function(){this.clickTimeoutId_=void 0;var e=new Hs(Us.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}).bind(this),250)},e.prototype.updateActivePointers_=function(t){var e=t;e.type==Us.POINTERUP||e.type==Us.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==Us.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new Hs(Us.POINTERUP,this.map_,t);this.dispatchEvent(e),e.propagationStopped||this.dragging_||!this.isMouseActionButton_(t)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(h),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},e.prototype.isMouseActionButton_=function(t){return 0===t.button},e.prototype.handlePointerDown_=function(t){this.updateActivePointers_(t);var e=new Hs(Us.POINTERDOWN,this.map_,t);this.dispatchEvent(e),this.down_=t,0===this.dragListenerKeys_.length&&this.dragListenerKeys_.push(s(document,Us.POINTERMOVE,this.handlePointerMove_,this),s(document,Us.POINTERUP,this.handlePointerUp_,this),s(this.element_,Us.POINTERCANCEL,this.handlePointerUp_,this))},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new Hs(Us.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}},e.prototype.relayEvent_=function(t){this.originalPointerMoveEvent_=t;var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new Hs(t.type,this.map_,t,e))},e.prototype.handleTouchMove_=function(t){this.originalPointerMoveEvent_&&!this.originalPointerMoveEvent_.defaultPrevented||t.preventDefault()},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&(h(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(va,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(h(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(h),this.dragListenerKeys_.length=0,this.element_=null,t.prototype.disposeInternal.call(this)},e}(la),Qs="layergroup",tl="size",el="target",il="view",nl="postrender",rl=0,ol=2,al=4,sl=function(){function t(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return t.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,o(this.queuedElements_)},t.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,i=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var n=this.keyFunction_(i);return delete this.queuedElements_[n],i},t.prototype.enqueue=function(t){S(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=1/0&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},t.prototype.getCount=function(){return this.elements_.length},t.prototype.getLeftChildIndex_=function(t){return 2*t+1},t.prototype.getRightChildIndex_=function(t){return 2*t+2},t.prototype.getParentIndex_=function(t){return t-1>>1},t.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},t.prototype.isEmpty=function(){return 0===this.elements_.length},t.prototype.isKeyQueued=function(t){return t in this.queuedElements_},t.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},t.prototype.siftUp_=function(t){for(var e=this.elements_,i=this.priorities_,n=e.length,r=e[t],o=i[t],a=t;t<n>>1;){var s=this.getLeftChildIndex_(t),l=this.getRightChildIndex_(t),h=l<n&&i[l]<i[s]?l:s;e[t]=e[h],i[t]=i[h],t=h}e[t]=r,i[t]=o,this.siftDown_(a,t)},t.prototype.siftDown_=function(t,e){for(var i=this.elements_,n=this.priorities_,r=i[e],o=n[e];e>t;){var a=this.getParentIndex_(e);if(!(n[a]>o))break;i[e]=i[a],n[e]=n[a],e=a}i[e]=r,n[e]=o},t.prototype.reprioritize=function(){var t,e,i,n=this.priorityFunction_,r=this.elements_,o=this.priorities_,a=0,s=r.length;for(e=0;e<s;++e)(i=n(t=r[e]))==1/0?delete this.queuedElements_[this.keyFunction_(t)]:(o[a]=i,r[a++]=t);r.length=a,o.length=a,this.heapify_()},t}(),ll=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),hl=function(t){function e(e,i){var n=t.call(this,function(t){return e.apply(null,t)},function(t){return t[0].getKey()})||this;return n.boundHandleTileChange_=n.handleTileChange.bind(n),n.tileChangeCallback_=i,n.tilesLoading_=0,n.tilesLoadingKeys_={},n}return ll(e,t),e.prototype.enqueue=function(e){var i=t.prototype.enqueue.call(this,e);return i&&e[0].addEventListener(ha,this.boundHandleTileChange_),i},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var e=t.target,i=e.getState();if(e.hifi&&i===ol||3===i||i===al){e.removeEventListener(ha,this.boundHandleTileChange_);var n=e.getKey();n in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[n],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,e){for(var i,n,r=0;this.tilesLoading_<t&&r<e&&this.getCount()>0;)n=(i=this.dequeue()[0]).getKey(),i.getState()!==rl||n in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[n]=!0,++this.tilesLoading_,++r,i.load())},e}(sl),ul=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),cl=function(t){function e(e){var i=t.call(this)||this,n=na({},e);return i.hints_=[0,0],i.animations_=[],i.projection_=Ct(n.projection,"EPSG:3857"),i.viewportSize_=[100,100],i.targetCenter_=null,i.cancelAnchor_=void 0,n.center&&(n.center=Ft(n.center,i.projection_)),n.extent&&(n.extent=Nt(n.extent,i.projection_)),i.applyOptions_(n),i}return ul(e,t),e.prototype.applyOptions_=function(t){var e=function(t){var e,i,n,r=void 0!==t.minZoom?t.minZoom:0,o=void 0!==t.maxZoom?t.maxZoom:28,a=void 0!==t.zoomFactor?t.zoomFactor:2,s=void 0!==t.multiWorld&&t.multiWorld,l=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,h=void 0!==t.showFullExtent&&t.showFullExtent,u=Ct(t.projection,"EPSG:3857"),c=u.getExtent(),d=t.constrainOnlyCenter,f=t.extent;if(s||f||!u.isGlobal()||(d=!1,f=c),void 0!==t.resolutions){var g=t.resolutions;i=g[r],n=void 0!==g[o]?g[o]:g[g.length-1],e=t.constrainResolution?function(t,e,i,n){return function(r,o,a,s){if(void 0!==r){var l=t[0],h=t[t.length-1],u=i?Le(l,i,a,n):l;if(s)return void 0===e||e?Ie(r,u,h):ot(r,h,u);var c=Math.min(u,r),d=Math.floor(p(t,c,o));return t[d]>u&&d<t.length-1?t[d+1]:t[d]}}}(g,l,!d&&f,h):Oe(i,n,l,!d&&f,h)}else{var v=(c?Math.max(K(c),V(c)):360*Va[Ka.DEGREES]/u.getMetersPerUnit())/256/Math.pow(2,0),y=v/Math.pow(2,28);void 0!==(i=t.maxResolution)?r=0:i=v/Math.pow(a,r),void 0===(n=t.minResolution)&&(n=void 0!==t.maxZoom?void 0!==t.maxResolution?i/Math.pow(a,o):v/Math.pow(a,o):y),o=r+Math.floor(Math.log(i/n)/Math.log(a)),n=i/Math.pow(a,o-r),e=t.constrainResolution?function(t,e,i,n,r,o){return function(a,s,l,h){if(void 0!==a){var u=r?Le(e,r,l,o):e,c=void 0!==i?i:0;if(h)return void 0===n||n?Ie(a,u,c):ot(a,c,u);var p=Math.ceil(Math.log(e/u)/Math.log(t)-1e-9),d=-s*(.5-1e-9)+.5,f=Math.min(u,a),g=Math.floor(Math.log(e/f)/Math.log(t)+d),v=Math.max(p,g);return ot(e/Math.pow(t,v),c,u)}}}(a,i,n,l,!d&&f,h):Oe(i,n,l,!d&&f,h)}return{constraint:e,maxResolution:i,minResolution:n,minZoom:r,zoomFactor:a}}(t);this.maxResolution_=e.maxResolution,this.minResolution_=e.minResolution,this.zoomFactor_=e.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=e.minZoom;var i=function(t){if(void 0!==t.extent)return Te(t.extent,t.constrainOnlyCenter,void 0===t.smoothExtentConstraint||t.smoothExtentConstraint);var e=Ct(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&e.isGlobal()){var i=e.getExtent().slice();return i[0]=-1/0,i[2]=1/0,Te(i,!1,!1)}return Pe}(t),n=e.constraint,r=function(e){if(void 0===t.enableRotation||t.enableRotation){var i=t.constrainRotation;return void 0===i||!0===i?(a=o||ht(5),function(t,e){return e?t:void 0!==t?Math.abs(t)<=a?0:t:void 0}):!1===i?Re:"number"==typeof i?(n=i,r=2*Math.PI/n,function(t,e){return e?t:void 0!==t?t=Math.floor(t/r+.5)*r:void 0}):Re}return Ae;var n,r,o,a}();this.constraints_={center:i,resolution:n,rotation:r},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom),this.setProperties({}),this.options_=t},e.prototype.getUpdatedOptions_=function(t){var e=na({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),na({},e,t)},e.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var e=new Array(arguments.length),i=0;i<e.length;++i){var n=arguments[i];n.center&&((n=na({},n)).center=Ft(n.center,this.getProjection())),n.anchor&&((n=na({},n)).anchor=Ft(n.anchor,this.getProjection())),e[i]=n}this.animateInternal.apply(this,e)},e.prototype.animateInternal=function(t){var e,i=arguments.length;if(i>1&&"function"==typeof arguments[i-1]&&(e=arguments[i-1],--i),!this.isDef()){var n=arguments[i-1];return n.center&&this.setCenterInternal(n.center),void 0!==n.zoom&&this.setZoom(n.zoom),void 0!==n.rotation&&this.setRotation(n.rotation),void(e&&Je(e,!0))}for(var r=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,s=this.targetRotation_,l=[],h=0;h<i;++h){var u=arguments[h],c={start:r,complete:!1,anchor:u.anchor,duration:void 0!==u.duration?u.duration:1e3,easing:u.easing||Ze,callback:e};if(u.center&&(c.sourceCenter=o,c.targetCenter=u.center.slice(),o=c.targetCenter),void 0!==u.zoom?(c.sourceResolution=a,c.targetResolution=this.getResolutionForZoom(u.zoom),a=c.targetResolution):u.resolution&&(c.sourceResolution=a,c.targetResolution=u.resolution,a=c.targetResolution),void 0!==u.rotation){c.sourceRotation=s;var p=ut(u.rotation-s+Math.PI,2*Math.PI)-Math.PI;c.targetRotation=s+p,s=c.targetRotation}$e(c)?c.complete=!0:r+=c.duration,l.push(c)}this.animations_.push(l),this.setHint(0,1),this.updateAnimations_()},e.prototype.getAnimating=function(){return this.hints_[0]>0},e.prototype.getInteracting=function(){return this.hints_[1]>0},e.prototype.cancelAnimations=function(){var t;this.setHint(0,-this.hints_[0]);for(var e=0,i=this.animations_.length;e<i;++e){var n=this.animations_[e];if(n[0].callback&&Je(n[0].callback,!1),!t)for(var r=0,o=n.length;r<o;++r){var a=n[r];if(!a.complete){t=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t},e.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,i=this.animations_.length-1;i>=0;--i){for(var n=this.animations_[i],r=!0,o=0,a=n.length;o<a;++o){var s=n[o];if(!s.complete){var l=s.duration>0?(t-s.start)/s.duration:1;l>=1?(s.complete=!0,l=1):r=!1;var h=s.easing(l);if(s.sourceCenter){var u=s.sourceCenter[0],c=s.sourceCenter[1];this.targetCenter_=[u+h*(s.targetCenter[0]-u),c+h*(s.targetCenter[1]-c)]}if(s.sourceResolution&&s.targetResolution){var p=1===h?s.targetResolution:s.sourceResolution+h*(s.targetResolution-s.sourceResolution);if(s.anchor){var d=this.getViewportSize_(this.getRotation()),f=this.constraints_.resolution(p,0,d,!0);this.targetCenter_=this.calculateCenterZoom(f,s.anchor)}this.targetResolution_=p,this.applyTargetState_(!0)}if(void 0!==s.sourceRotation&&void 0!==s.targetRotation){var g=1===h?ut(s.targetRotation+Math.PI,2*Math.PI)-Math.PI:s.sourceRotation+h*(s.targetRotation-s.sourceRotation);if(s.anchor){var v=this.constraints_.rotation(g,!0);this.targetCenter_=this.calculateCenterRotate(v,s.anchor)}this.targetRotation_=g}if(this.applyTargetState_(!0),e=!0,!s.complete)break}}if(r){this.animations_[i]=null,this.setHint(0,-1);var y=n[0].callback;y&&Je(y,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},e.prototype.calculateCenterRotate=function(t,e){var i,n=this.getCenterInternal();return void 0!==n&&(ze(i=[n[0]-e[0],n[1]-e[1]],t-this.getRotation()),ke(i,e)),i},e.prototype.calculateCenterZoom=function(t,e){var i,n=this.getCenterInternal(),r=this.getResolution();return void 0!==n&&void 0!==r&&(i=[e[0]-t*(e[0]-n[0])/r,e[1]-t*(e[1]-n[1])/r]),i},e.prototype.getViewportSize_=function(t){var e=this.viewportSize_;if(t){var i=e[0],n=e[1];return[Math.abs(i*Math.cos(t))+Math.abs(n*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(n*Math.cos(t))]}return e},e.prototype.setViewportSize=function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.resolveConstraints(0)},e.prototype.getCenter=function(){var t=this.getCenterInternal();return t?Mt(t,this.getProjection()):t},e.prototype.getCenterInternal=function(){return this.get("center")},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getConstrainResolution=function(){return this.options_.constrainResolution},e.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){return kt(this.calculateExtentInternal(t),this.getProjection())},e.prototype.calculateExtentInternal=function(t){var e=t||this.getViewportSize_(),i=this.getCenterInternal();S(i,1);var n=this.getResolution();S(void 0!==n,2);var r=this.getRotation();return S(void 0!==r,3),U(i,n,r,e)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.setConstrainResolution=function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get("resolution")},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,e){return this.getResolutionForExtentInternal(Nt(t,this.getProjection()),e)},e.prototype.getResolutionForExtentInternal=function(t,e){var i=e||this.getViewportSize_(),n=K(t)/i[0],r=V(t)/i[1];return Math.max(n,r)},e.prototype.getResolutionForValueFunction=function(t){var e=t||2,i=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,r=Math.log(i/n)/Math.log(e);return function(t){return i/Math.pow(e,t*r)}},e.prototype.getRotation=function(){return this.get("rotation")},e.prototype.getValueForResolutionFunction=function(t){var e=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,r=Math.log(i/n)/e;return function(t){return Math.log(i/t)/e/r}},e.prototype.getState=function(){var t=this.getCenterInternal(),e=this.getProjection(),i=this.getResolution(),n=this.getRotation();return{center:t.slice(0),projection:void 0!==e?e:null,resolution:i,rotation:n,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},e.prototype.getZoomForResolution=function(t){var e,i,n=this.minZoom_||0;if(this.resolutions_){var r=p(this.resolutions_,t,1);n=r,e=this.resolutions_[r],i=r==this.resolutions_.length-1?2:e/this.resolutions_[r+1]}else e=this.maxResolution_,i=this.zoomFactor_;return n+Math.log(e/t)/Math.log(i)},e.prototype.getResolutionForZoom=function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var e=ot(Math.floor(t),0,this.resolutions_.length-2),i=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(i,ot(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)},e.prototype.fit=function(t,e){var i,n=na({size:this.getViewportSize_()},e||{});if(S(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t))S(!$(t),25),i=Se(r=Nt(t,this.getProjection()));else if(t.getType()===Xa.CIRCLE){var r;(i=Se(r=Nt(t.getExtent(),this.getProjection()))).rotate(this.getRotation(),W(r))}else{var o=Rt();i=o?t.clone().transform(o,this.getProjection()):t}this.fitInternal(i,n)},e.prototype.fitInternal=function(t,e){var i=e||{},n=i.size;n||(n=this.getViewportSize_());var r,o=void 0!==i.padding?i.padding:[0,0,0,0],a=void 0!==i.nearest&&i.nearest;r=void 0!==i.minResolution?i.minResolution:void 0!==i.maxZoom?this.getResolutionForZoom(i.maxZoom):0;for(var s=t.getFlatCoordinates(),l=this.getRotation(),h=Math.cos(-l),u=Math.sin(-l),c=1/0,p=1/0,d=-1/0,f=-1/0,g=t.getStride(),v=0,y=s.length;v<y;v+=g){var m=s[v]*h-s[v+1]*u,_=s[v]*u+s[v+1]*h;c=Math.min(c,m),p=Math.min(p,_),d=Math.max(d,m),f=Math.max(f,_)}var b=this.getResolutionForExtentInternal([c,p,d,f],[n[0]-o[1]-o[3],n[1]-o[0]-o[2]]);b=isNaN(b)?r:Math.max(b,r),b=this.getConstrainedResolution(b,a?0:1);var w=(c+d)/2,S=(p+f)/2,C=[(w+=(o[1]-o[3])/2*b)*h-(S+=(o[0]-o[2])/2*b)*(u=-u),S*h+w*u],E=i.callback?i.callback:x;void 0!==i.duration?this.animateInternal({resolution:b,center:this.getConstrainedCenter(C,b),duration:i.duration,easing:i.easing},E):(this.targetResolution_=b,this.targetCenter_=C,this.applyTargetState_(!1,!0),Je(E,!0))},e.prototype.centerOn=function(t,e,i){this.centerOnInternal(Ft(t,this.getProjection()),e,i)},e.prototype.centerOnInternal=function(t,e,i){var n=this.getRotation(),r=Math.cos(-n),o=Math.sin(-n),a=t[0]*r-t[1]*o,s=t[1]*r+t[0]*o,l=this.getResolution(),h=(a+=(e[0]/2-i[0])*l)*r-(s+=(i[1]-e[1]/2)*l)*(o=-o);this.setCenterInternal([h,s*r+a*o])},e.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},e.prototype.adjustCenter=function(t){var e=Mt(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustCenterInternal=function(t){var e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustResolution=function(t,e){var i=e&&Ft(e,this.getProjection());this.adjustResolutionInternal(t,i)},e.prototype.adjustResolutionInternal=function(t,e){var i=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*t,0,n,i);e&&(this.targetCenter_=this.calculateCenterZoom(r,e)),this.targetResolution_*=t,this.applyTargetState_()},e.prototype.adjustZoom=function(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)},e.prototype.adjustRotation=function(t,e){e&&(e=Ft(e,this.getProjection())),this.adjustRotationInternal(t,e)},e.prototype.adjustRotationInternal=function(t,e){var i=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+t,i);e&&(this.targetCenter_=this.calculateCenterRotate(n,e)),this.targetRotation_+=t,this.applyTargetState_()},e.prototype.setCenter=function(t){this.setCenterInternal(Ft(t,this.getProjection()))},e.prototype.setCenterInternal=function(t){this.targetCenter_=t,this.applyTargetState_()},e.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.targetResolution_=t,this.applyTargetState_()},e.prototype.setRotation=function(t){this.targetRotation_=t,this.applyTargetState_()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e.prototype.applyTargetState_=function(t,e){var i=this.getAnimating()||this.getInteracting()||e,n=this.constraints_.rotation(this.targetRotation_,i),r=this.getViewportSize_(n),o=this.constraints_.resolution(this.targetResolution_,0,r,i),a=this.constraints_.center(this.targetCenter_,o,r,i);this.get("rotation")!==n&&this.set("rotation",n),this.get("resolution")!==o&&this.set("resolution",o),this.get("center")&&Ge(this.get("center"),a)||this.set("center",a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0},e.prototype.resolveConstraints=function(t,e,i){var n=void 0!==t?t:200,r=e||0,o=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(o),s=this.constraints_.resolution(this.targetResolution_,r,a),l=this.constraints_.center(this.targetCenter_,s,a);if(0===n&&!this.cancelAnchor_)return this.targetResolution_=s,this.targetRotation_=o,this.targetCenter_=l,void this.applyTargetState_();var h=i||(0===n?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,this.getResolution()===s&&this.getRotation()===o&&this.getCenterInternal()&&Ge(this.getCenterInternal(),l)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:l,resolution:s,duration:n,easing:qe,anchor:h}))},e.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(1,1)},e.prototype.endInteraction=function(t,e,i){var n=i&&Ft(i,this.getProjection());this.endInteractionInternal(t,e,n)},e.prototype.endInteractionInternal=function(t,e,i){this.setHint(1,-1),this.resolveConstraints(t,e,i)},e.prototype.getConstrainedCenter=function(t,e){var i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),i)},e.prototype.getConstrainedZoom=function(t,e){var i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,e))},e.prototype.getConstrainedResolution=function(t,e){var i=e||0,n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,i,n)},e}(Sa),pl="opacity",dl="visible",fl="zIndex",gl="maxResolution",vl="minResolution",yl="maxZoom",ml="minZoom",_l="source",xl=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),bl=function(t){function e(e){var i=t.call(this)||this,n=na({},e);return n[pl]=void 0!==e.opacity?e.opacity:1,S("number"==typeof n[pl],64),n[dl]=void 0===e.visible||e.visible,n[fl]=e.zIndex,n[gl]=void 0!==e.maxResolution?e.maxResolution:1/0,n[vl]=void 0!==e.minResolution?e.minResolution:0,n[ml]=void 0!==e.minZoom?e.minZoom:-1/0,n[yl]=void 0!==e.maxZoom?e.maxZoom:1/0,i.className_=void 0!==n.className?e.className:"ol-layer",delete n.className,i.setProperties(n),i.state_=null,i}return xl(e,t),e.prototype.getClassName=function(){return this.className_},e.prototype.getLayerState=function(t){var e=this.state_||{layer:this,managed:void 0===t||t},i=this.getZIndex();return e.opacity=ot(Math.round(100*this.getOpacity())/100,0,1),e.sourceState=this.getSourceState(),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==i?i:!1===e.managed?1/0:0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e},e.prototype.getLayersArray=function(t){return n()},e.prototype.getLayerStatesArray=function(t){return n()},e.prototype.getExtent=function(){return this.get("extent")},e.prototype.getMaxResolution=function(){return this.get(gl)},e.prototype.getMinResolution=function(){return this.get(vl)},e.prototype.getMinZoom=function(){return this.get(ml)},e.prototype.getMaxZoom=function(){return this.get(yl)},e.prototype.getOpacity=function(){return this.get(pl)},e.prototype.getSourceState=function(){return n()},e.prototype.getVisible=function(){return this.get(dl)},e.prototype.getZIndex=function(){return this.get(fl)},e.prototype.setExtent=function(t){this.set("extent",t)},e.prototype.setMaxResolution=function(t){this.set(gl,t)},e.prototype.setMinResolution=function(t){this.set(vl,t)},e.prototype.setMaxZoom=function(t){this.set(yl,t)},e.prototype.setMinZoom=function(t){this.set(ml,t)},e.prototype.setOpacity=function(t){S("number"==typeof t,64),this.set(pl,t)},e.prototype.setVisible=function(t){this.set(dl,t)},e.prototype.setZIndex=function(t){this.set(fl,t)},e.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),t.prototype.disposeInternal.call(this)},e}(Sa),wl="loading",Sl="ready",Cl=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),El="layers",Tl=function(t){function e(e){var i=this,n=e||{},r=na({},n);delete r.layers;var o=n.layers;return(i=t.call(this,r)||this).layersListenerKeys_=[],i.listenerKeys_={},i.addEventListener(w(El),i.handleLayersChanged_),o?Array.isArray(o)?o=new Ta(o.slice(),{unique:!0}):S("function"==typeof o.getArray,43):o=new Ta(void 0,{unique:!0}),i.setLayers(o),i}return Cl(e,t),e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(h),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push(s(t,ta,this.handleLayersAdd_,this),s(t,ea,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(h);o(this.listenerKeys_);for(var i=t.getArray(),n=0,a=i.length;n<a;n++){var l=i[n];this.listenerKeys_[r(l)]=[s(l,ia,this.handleLayerChange_,this),s(l,ha,this.handleLayerChange_,this)]}this.changed()},e.prototype.handleLayersAdd_=function(t){var e=t.element;this.listenerKeys_[r(e)]=[s(e,ia,this.handleLayerChange_,this),s(e,ha,this.handleLayerChange_,this)],this.changed()},e.prototype.handleLayersRemove_=function(t){var e=r(t.element);this.listenerKeys_[e].forEach(h),delete this.listenerKeys_[e],this.changed()},e.prototype.getLayers=function(){return this.get(El)},e.prototype.setLayers=function(t){this.set(El,t)},e.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach(function(t){t.getLayersArray(e)}),e},e.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],i=e.length;this.getLayers().forEach(function(t){t.getLayerStatesArray(e)});for(var n=this.getLayerState(),r=i,o=e.length;r<o;r++){var a=e[r];a.opacity*=n.opacity,a.visible=a.visible&&n.visible,a.maxResolution=Math.min(a.maxResolution,n.maxResolution),a.minResolution=Math.max(a.minResolution,n.minResolution),a.minZoom=Math.max(a.minZoom,n.minZoom),a.maxZoom=Math.min(a.maxZoom,n.maxZoom),void 0!==n.extent&&(a.extent=void 0!==a.extent?H(a.extent,n.extent):n.extent)}return e},e.prototype.getSourceState=function(){return Sl},e}(bl),Pl=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ll=function(t){function e(e){var i=t.call(this)||this,n=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var i,n,r,o={},a=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new Tl({layers:t.layers});return o[Qs]=a,o[el]=t.target,o[il]=void 0!==t.view?t.view:new cl,void 0!==t.controls&&(Array.isArray(t.controls)?i=new Ta(t.controls.slice()):(S("function"==typeof t.controls.getArray,47),i=t.controls)),void 0!==t.interactions&&(Array.isArray(t.interactions)?n=new Ta(t.interactions.slice()):(S("function"==typeof t.interactions.getArray,48),n=t.interactions)),void 0!==t.overlays?Array.isArray(t.overlays)?r=new Ta(t.overlays.slice()):(S("function"==typeof t.overlays.getArray,49),r=t.overlays):r=new Ta,{controls:i,interactions:n,keyboardEventTarget:e,overlays:r,values:o}}(e);i.boundHandleBrowserEvent_=i.handleBrowserEvent.bind(i),i.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,i.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:Bs,i.animationDelay_=(function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}).bind(i),i.coordinateToPixelTransform_=[1,0,0,1,0,0],i.pixelToCoordinateTransform_=[1,0,0,1,0,0],i.frameIndex_=0,i.frameState_=null,i.previousExtent_=null,i.viewPropertyListenerKey_=null,i.viewChangeListenerKey_=null,i.layerGroupPropertyListenerKeys_=null,i.viewport_=document.createElement("div"),i.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),i.viewport_.style.position="relative",i.viewport_.style.overflow="hidden",i.viewport_.style.width="100%",i.viewport_.style.height="100%",i.overlayContainer_=document.createElement("div"),i.overlayContainer_.style.position="absolute",i.overlayContainer_.style.zIndex="0",i.overlayContainer_.style.width="100%",i.overlayContainer_.style.height="100%",i.overlayContainer_.className="ol-overlaycontainer",i.viewport_.appendChild(i.overlayContainer_),i.overlayContainerStopEvent_=document.createElement("div"),i.overlayContainerStopEvent_.style.position="absolute",i.overlayContainerStopEvent_.style.zIndex="0",i.overlayContainerStopEvent_.style.width="100%",i.overlayContainerStopEvent_.style.height="100%",i.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",i.viewport_.appendChild(i.overlayContainerStopEvent_),i.mapBrowserEventHandler_=new $s(i,e.moveTolerance);var r=i.handleMapBrowserEvent.bind(i);for(var o in Us)i.mapBrowserEventHandler_.addEventListener(Us[o],r);i.keyboardEventTarget_=n.keyboardEventTarget,i.keyHandlerKeys_=null;var a=i.handleBrowserEvent.bind(i);return i.viewport_.addEventListener(ca,a,!1),i.viewport_.addEventListener(ya,a,!!Ws&&{passive:!1}),i.controls=n.controls||new Ta,i.interactions=n.interactions||new Ta,i.overlays_=n.overlays,i.overlayIdIndex_={},i.renderer_=null,i.postRenderFunctions_=[],i.tileQueue_=new hl(i.getTilePriority.bind(i),i.handleTileChange_.bind(i)),i.addEventListener(w(Qs),i.handleLayerGroupChanged_),i.addEventListener(w(il),i.handleViewChanged_),i.addEventListener(w(tl),i.handleSizeChanged_),i.addEventListener(w(el),i.handleTargetChanged_),i.setProperties(n.values),i.controls.forEach((function(t){t.setMap(this)}).bind(i)),i.controls.addEventListener(ta,(function(t){t.element.setMap(this)}).bind(i)),i.controls.addEventListener(ea,(function(t){t.element.setMap(null)}).bind(i)),i.interactions.forEach((function(t){t.setMap(this)}).bind(i)),i.interactions.addEventListener(ta,(function(t){t.element.setMap(this)}).bind(i)),i.interactions.addEventListener(ea,(function(t){t.element.setMap(null)}).bind(i)),i.overlays_.forEach(i.addOverlayInternal_.bind(i)),i.overlays_.addEventListener(ta,(function(t){this.addOverlayInternal_(t.element)}).bind(i)),i.overlays_.addEventListener(ea,(function(t){var e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)}).bind(i)),i}return Pl(e,t),e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.mapBrowserEventHandler_.dispose(),this.viewport_.removeEventListener(ca,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(ya,this.boundHandleBrowserEvent_),void 0!==this.handleResize_&&(removeEventListener("resize",this.handleResize_,!1),this.handleResize_=void 0),this.setTarget(null),t.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,e,i){if(this.frameState_){var n=this.getCoordinateFromPixelInternal(t),r=void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance*this.frameState_.pixelRatio:0;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,r,!1!==i.checkWrapped,e,null,void 0!==i.layerFilter?i.layerFilter:m,null)}},e.prototype.getFeaturesAtPixel=function(t,e){var i=[];return this.forEachFeatureAtPixel(t,function(t){i.push(t)},e),i},e.prototype.forEachLayerAtPixel=function(t,e,i){if(this.frameState_){var n=i||{};return this.renderer_.forEachLayerAtPixel(t,this.frameState_,void 0!==n.hitTolerance?n.hitTolerance*this.frameState_.pixelRatio:0,e,n.layerFilter||m)}},e.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;var i=this.getCoordinateFromPixelInternal(t),n=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:m;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,void 0!==e.hitTolerance?e.hitTolerance*this.frameState_.pixelRatio:0,!1!==e.checkWrapped,n,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),i="changedTouches"in t?t.changedTouches[0]:t;return[i.clientX-e.left,i.clientY-e.top]},e.prototype.getTarget=function(){return this.get(el)},e.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){return Mt(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},e.prototype.getCoordinateFromPixelInternal=function(t){var e=this.frameState_;return e?zt(e.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(Qs)},e.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},e.prototype.getLoading=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,i=t.length;e<i;++e){var n=t[e].layer.getSource();if(n&&n.loading)return!0}return!1},e.prototype.getPixelFromCoordinate=function(t){var e=Ft(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)},e.prototype.getPixelFromCoordinateInternal=function(t){var e=this.frameState_;return e?zt(e.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get(tl)},e.prototype.getView=function(){return this.get(il)},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getTilePriority=function(t,e,i,n){return function(t,e,i,n,r){if(!(t&&i in t.wantedTiles))return 1/0;if(!t.wantedTiles[i][e.getKey()])return 1/0;var o=t.viewState.center,a=n[0]-o[0],s=n[1]-o[1];return 65536*Math.log(r)+Math.sqrt(a*a+s*s)/r}(this.frameState_,t,e,i,n)},e.prototype.handleBrowserEvent=function(t,e){var i=new Ns(e||t.type,this,t);this.handleMapBrowserEvent(i)},e.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){var e=t.originalEvent.target;if(t.dragging||!this.overlayContainerStopEvent_.contains(e)&&(document.body.contains(e)||this.viewport_.getRootNode&&this.viewport_.getRootNode().contains(e))){t.frameState=this.frameState_;var i=this.getInteractions().getArray();if(!1!==this.dispatchEvent(t))for(var n=i.length-1;n>=0;n--){var r=i[n];if(r.getActive()&&!r.handleEvent(t))break}}}},e.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var i=this.maxTilesLoading_,n=i;if(t){var r=t.viewHints;if(r[0]||r[1]){var o=!Xs&&Date.now()-t.time>8;i=o?0:8,n=o?0:2}}e.getTilesLoading()<i&&(e.reprioritize(),e.loadMoreTiles(i,n))}!t||!this.hasListener("rendercomplete")||t.animate||this.tileQueue_.getTilesLoading()||this.getLoading()||this.renderer_.dispatchRenderEvent("rendercomplete",t);for(var a=this.postRenderFunctions_,s=0,l=a.length;s<l;++s)a[s](this,t);a.length=0},e.prototype.handleSizeChanged_=function(){this.getView()&&this.getView().resolveConstraints(0),this.render()},e.prototype.handleTargetChanged_=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.keyHandlerKeys_){for(var e=0,i=this.keyHandlerKeys_.length;e<i;++e)h(this.keyHandlerKeys_[e]);this.keyHandlerKeys_=null}if(t){t.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer());var n=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[s(n,da,this.handleBrowserEvent,this),s(n,fa,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener("resize",this.handleResize_,!1))}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0),ei(this.viewport_),void 0!==this.handleResize_&&(removeEventListener("resize",this.handleResize_,!1),this.handleResize_=void 0);this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(h(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(h(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=s(t,ia,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=s(t,ha,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(h),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[s(t,ia,this.render,this),s(t,ha,this.render,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,i=t.length;e<i;++e){var n=t[e].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}},e.prototype.render=function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.renderFrame_=function(t){var e=this.getSize(),i=this.getView(),n=this.frameState_,r=null;if(void 0!==e&&e[0]>0&&e[1]>0&&i&&i.isDef()){var o=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterItems:n?n.declutterItems:[],extent:U(a.center,a.resolution,a.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{}}}this.frameState_=r,this.renderer_.renderFrame(r),r&&(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),n&&(!this.previousExtent_||!$(this.previousExtent_)&&!N(r.extent,this.previousExtent_))&&(this.dispatchEvent(new Fs("movestart",this,n)),this.previousExtent_=M(this.previousExtent_)),this.previousExtent_&&!r.viewHints[0]&&!r.viewHints[1]&&!N(r.extent,this.previousExtent_)&&(this.dispatchEvent(new Fs("moveend",this,r)),T(r.extent,this.previousExtent_))),this.dispatchEvent(new Fs("postrender",this,r)),this.postRenderTimeoutHandle_=setTimeout(this.handlePostRender.bind(this),0)},e.prototype.setLayerGroup=function(t){this.set(Qs,t)},e.prototype.setSize=function(t){this.set(tl,t)},e.prototype.setTarget=function(t){this.set(el,t)},e.prototype.setView=function(t){this.set(il,t)},e.prototype.updateSize=function(){var t=this.getTargetElement();if(t){var e=getComputedStyle(t);this.setSize([t.offsetWidth-parseFloat(e.borderLeftWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderRightWidth),t.offsetHeight-parseFloat(e.borderTopWidth)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)-parseFloat(e.borderBottomWidth)])}else this.setSize(void 0);this.updateViewportSize_()},e.prototype.updateViewportSize_=function(){var t=this.getView();if(t){var e=void 0,i=getComputedStyle(this.viewport_);i.width&&i.height&&(e=[parseInt(i.width,10),parseInt(i.height,10)]),t.setViewportSize(e)}},e}(Sa),Il=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ol=function(t){function e(e){var i=t.call(this)||this;return i.element=e.element?e.element:null,i.target_=null,i.map_=null,i.listenerKeys=[],i.render_=e.render?e.render:x,e.target&&i.setTarget(e.target),i}return Il(e,t),e.prototype.disposeInternal=function(){ei(this.element),t.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&ei(this.element);for(var e=0,i=this.listenerKeys.length;e<i;++e)h(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,this.map_&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==x&&this.listenerKeys.push(s(t,"postrender",this.render,this)),t.render())},e.prototype.render=function(t){this.render_.call(this,t)},e.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},e}(Sa),Al=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),Rl=["style","variant","weight","size","lineHeight","family"],Ml=function(t){var e=t.match(Al);if(!e)return null;for(var i={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},n=0,r=Rl.length;n<r;++n){var o=e[n+1];void 0!==o&&(i[Rl[n]]=o)}return i.families=i.family.split(/,\s?/),i},Fl=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),kl=function(t){function e(e){var i=this,n=na({},e);return delete n.source,(i=t.call(this,n)||this).mapPrecomposeKey_=null,i.mapRenderKey_=null,i.sourceChangeKey_=null,i.renderer_=null,e.render&&(i.render=e.render),e.map&&i.setMap(e.map),i.addEventListener(w(_l),i.handleSourcePropertyChange_),i.setSource(e.source?e.source:null),i}return Fl(e,t),e.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},e.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},e.prototype.getSource=function(){return this.get(_l)||null},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():"undefined"},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(h(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=s(t,ha,this.handleSourceChange_,this)),this.changed()},e.prototype.getFeatures=function(t){return this.renderer_.getFeatures(t)},e.prototype.render=function(t,e){var i=this.getRenderer();if(i.prepareFrame(t))return i.renderFrame(t,e)},e.prototype.setMap=function(t){this.mapPrecomposeKey_&&(h(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(h(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=s(t,"precompose",function(t){var e=t.frameState.layerStatesArray,i=this.getLayerState(!1);S(!e.some(function(t){return t.layer===i.layer}),67),e.push(i)},this),this.mapRenderKey_=s(this,ha,t.render,t),this.changed())},e.prototype.setSource=function(t){this.set(_l,t)},e.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},e.prototype.hasRenderer=function(){return!!this.renderer_},e.prototype.createRenderer=function(){return null},e.prototype.disposeInternal=function(){this.setSource(null),t.prototype.disposeInternal.call(this)},e}(bl),Nl=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Dl=function(t){function e(e){var i=this,n=e||{};(i=t.call(this,{element:document.createElement("div"),render:n.render||function(t){this.updateElement_(t.frameState)},target:n.target})||this).ulElement_=document.createElement("ul"),i.collapsed_=void 0===n.collapsed||n.collapsed,i.overrideCollapsible_=void 0!==n.collapsible,i.collapsible_=void 0===n.collapsible||n.collapsible,i.collapsible_||(i.collapsed_=!1);var r=void 0!==n.className?n.className:"ol-attribution",o=void 0!==n.tipLabel?n.tipLabel:"Attributions",a=void 0!==n.collapseLabel?n.collapseLabel:"\xbb";"string"==typeof a?(i.collapseLabel_=document.createElement("span"),i.collapseLabel_.textContent=a):i.collapseLabel_=a;var s=void 0!==n.label?n.label:"i";"string"==typeof s?(i.label_=document.createElement("span"),i.label_.textContent=s):i.label_=s;var l=i.collapsible_&&!i.collapsed_?i.collapseLabel_:i.label_,h=document.createElement("button");h.setAttribute("type","button"),h.title=o,h.appendChild(l),h.addEventListener(pa,i.handleClick_.bind(i),!1);var u=i.element;return u.className=r+" ol-unselectable ol-control"+(i.collapsed_&&i.collapsible_?" ol-collapsed":"")+(i.collapsible_?"":" ol-uncollapsible"),u.appendChild(i.ulElement_),u.appendChild(h),i.renderedAttributions_=[],i.renderedVisible_=!0,i}return Nl(e,t),e.prototype.collectSourceAttributions_=function(t){for(var e={},i=[],n=t.layerStatesArray,r=0,o=n.length;r<o;++r){var a=n[r];if(ai(a,t.viewState)){var s=a.layer.getSource();if(s){var l=s.getAttributions();if(l){var h=l(t);if(h)if(this.overrideCollapsible_||!1!==s.getAttributionsCollapsible()||this.setCollapsible(!1),Array.isArray(h))for(var u=0,c=h.length;u<c;++u)h[u]in e||(i.push(h[u]),e[h[u]]=!0);else h in e||(i.push(h),e[h]=!0)}}}}return i},e.prototype.updateElement_=function(t){if(t){var e=this.collectSourceAttributions_(t),i=e.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!v(e,this.renderedAttributions_)){ii(this.ulElement_);for(var n=0,r=e.length;n<r;++n){var o=document.createElement("li");o.innerHTML=e[n],this.ulElement_.appendChild(o)}this.renderedAttributions_=e}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},e.prototype.handleToggle_=function(){this.element.classList.toggle("ol-collapsed"),this.collapsed_?ti(this.collapseLabel_,this.label_):ti(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e}(Ol),jl=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Gl=function(t){function e(e){var i=this,n=e||{};i=t.call(this,{element:document.createElement("div"),render:n.render||function(t){var e=t.frameState;if(e){var i=e.viewState.rotation;if(i!=this.rotation_){var n="rotate("+i+"rad)";if(this.autoHide_){var r=this.element.classList.contains("ol-hidden");r||0!==i?r&&0!==i&&this.element.classList.remove("ol-hidden"):this.element.classList.add("ol-hidden")}this.label_.style.transform=n}this.rotation_=i}},target:n.target})||this;var r=void 0!==n.className?n.className:"ol-rotate",o=void 0!==n.label?n.label:"\u21e7";i.label_=null,"string"==typeof o?(i.label_=document.createElement("span"),i.label_.className="ol-compass",i.label_.textContent=o):(i.label_=o,i.label_.classList.add("ol-compass"));var a=n.tipLabel?n.tipLabel:"Reset rotation",s=document.createElement("button");s.className=r+"-reset",s.setAttribute("type","button"),s.title=a,s.appendChild(i.label_),s.addEventListener(pa,i.handleClick_.bind(i),!1);var l=i.element;return l.className=r+" ol-unselectable ol-control",l.appendChild(s),i.callResetNorth_=n.resetNorth?n.resetNorth:void 0,i.duration_=void 0!==n.duration?n.duration:250,i.autoHide_=void 0===n.autoHide||n.autoHide,i.rotation_=void 0,i.autoHide_&&i.element.classList.add("ol-hidden"),i}return jl(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap().getView();if(t){var e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:qe}):t.setRotation(0))}},e}(Ol),zl=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Bl=function(t){function e(e){var i=this,n=e||{};i=t.call(this,{element:document.createElement("div"),target:n.target})||this;var r=void 0!==n.className?n.className:"ol-zoom",o=void 0!==n.delta?n.delta:1,a=void 0!==n.zoomInLabel?n.zoomInLabel:"+",s=void 0!==n.zoomOutLabel?n.zoomOutLabel:"\u2212",l=void 0!==n.zoomInTipLabel?n.zoomInTipLabel:"Zoom in",h=void 0!==n.zoomOutTipLabel?n.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=r+"-in",u.setAttribute("type","button"),u.title=l,u.appendChild("string"==typeof a?document.createTextNode(a):a),u.addEventListener(pa,i.handleClick_.bind(i,o),!1);var c=document.createElement("button");c.className=r+"-out",c.setAttribute("type","button"),c.title=h,c.appendChild("string"==typeof s?document.createTextNode(s):s),c.addEventListener(pa,i.handleClick_.bind(i,-o),!1);var p=i.element;return p.className=r+" ol-unselectable ol-control",p.appendChild(u),p.appendChild(c),i.duration_=void 0!==n.duration?n.duration:250,i}return zl(e,t),e.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var i=e.getZoom();if(void 0!==i){var n=e.getConstrainedZoom(i+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:n,duration:this.duration_,easing:qe})):e.setZoom(n)}}},e}(Ol),Yl="active",Xl=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Wl=function(t){function e(e){var i=t.call(this)||this;return e.handleEvent&&(i.handleEvent=e.handleEvent),i.map_=null,i.setActive(!0),i}return Xl(e,t),e.prototype.getActive=function(){return this.get(Yl)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(Yl,t)},e.prototype.setMap=function(t){this.map_=t},e}(Sa),Ul=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Vl=function(t){function e(e){var i=t.call(this,{handleEvent:hi})||this,n=e||{};return i.delta_=n.delta?n.delta:1,i.duration_=void 0!==n.duration?n.duration:250,i}return Ul(e,t),e}(Wl),Hl=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},ql=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Zl=function(t){return t.target.getTargetElement()===document.activeElement},Kl=m,Jl=function(t){var e=t.originalEvent;return 0==e.button&&!(Gs&&zs&&e.ctrlKey)},$l=_,Ql=function(t){return t.type==Us.SINGLECLICK},th=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},eh=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},ih=function(t){var e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},nh=function(t){var e=t.pointerEvent;return S(void 0!==e,56),"mouse"==e.pointerType},rh=function(t){var e=t.pointerEvent;return S(void 0!==e,56),e.isPrimary&&0===e.button},oh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ah=function(t){function e(e){var i=this,n=e||{};return i=t.call(this,n)||this,n.handleDownEvent&&(i.handleDownEvent=n.handleDownEvent),n.handleDragEvent&&(i.handleDragEvent=n.handleDragEvent),n.handleMoveEvent&&(i.handleMoveEvent=n.handleMoveEvent),n.handleUpEvent&&(i.handleUpEvent=n.handleUpEvent),n.stopDown&&(i.stopDown=n.stopDown),i.handlingDownUpSequence=!1,i.trackedPointers_={},i.targetPointers=[],i}return oh(e,t),e.prototype.getPointerCount=function(){return this.targetPointers.length},e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.pointerEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Us.POINTERDRAG)this.handleDragEvent(t);else if(t.type==Us.POINTERUP){var i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==Us.POINTERDOWN){var n=this.handleDownEvent(t);this.handlingDownUpSequence=n,e=this.stopDown(n)}else t.type==Us.POINTERMOVE&&this.handleMoveEvent(t);return!e},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.updateTrackedPointers_=function(t){if(function(e){var i=t.type;return i===Us.POINTERDOWN||i===Us.POINTERDRAG||i===Us.POINTERUP}()){var e=t.pointerEvent,i=e.pointerId.toString();t.type==Us.POINTERUP?delete this.trackedPointers_[i]:(t.type==Us.POINTERDOWN||i in this.trackedPointers_)&&(this.trackedPointers_[i]=e),this.targetPointers=ra(this.trackedPointers_)}},e}(Wl),sh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),lh=function(t){function e(e){var i=t.call(this,{stopDown:_})||this,n=e||{};return i.kinetic_=n.kinetic,i.lastCentroid=null,i.panning_=!1,i.condition_=n.condition?n.condition:ci,i.noKinetic_=!1,i}return sh(e,t),e.prototype.conditionInternal_=function(t){var e=!0;return t.map.getTargetElement().hasAttribute("tabindex")&&(e=Zl(t)),e&&this.condition_(t)},e.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var e=this.targetPointers,i=ui(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){var n=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],r=t.map.getView();Be(n,r.getResolution()),ze(n,r.getRotation()),r.adjustCenterInternal(n)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=e.length,t.originalEvent.preventDefault()},e.prototype.handleUpEvent=function(t){var e=t.map,i=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var n=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),o=i.getCenterInternal(),a=e.getPixelFromCoordinateInternal(o),s=e.getCoordinateFromPixelInternal([a[0]-n*Math.cos(r),a[1]-n*Math.sin(r)]);i.animateInternal({center:i.getConstrainedCenter(s),duration:500,easing:qe})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.conditionInternal_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},e}(ah),hh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),uh=function(t){function e(e){var i=this,n=e||{};return(i=t.call(this,{stopDown:_})||this).condition_=n.condition?n.condition:ql,i.lastAngle_=void 0,i.duration_=void 0!==n.duration?n.duration:250,i}return hh(e,t),e.prototype.handleDragEvent=function(t){if(nh(t)){var e=t.map,i=e.getView();if(i.getConstraints().rotation!==Ae){var n=e.getSize(),r=t.pixel,o=Math.atan2(n[1]/2-r[1],r[0]-n[0]/2);void 0!==this.lastAngle_&&i.adjustRotationInternal(-(o-this.lastAngle_)),this.lastAngle_=o}}},e.prototype.handleUpEvent=function(t){return!nh(t)||(t.map.getView().endInteraction(this.duration_),!1)},e.prototype.handleDownEvent=function(t){return!(!nh(t)||!Jl(t)||!this.condition_(t)||(t.map.getView().beginInteraction(),this.lastAngle_=void 0,0))},e}(ah),ch=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ph=function(t){function e(e){var i=t.call(this)||this;return i.geometry_=null,i.element_=document.createElement("div"),i.element_.style.position="absolute",i.element_.className="ol-box "+e,i.map_=null,i.startPixel_=null,i.endPixel_=null,i}return ch(e,t),e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,i=this.element_.style;i.left=Math.min(t[0],e[0])+"px",i.top=Math.min(t[1],e[1])+"px",i.width=Math.abs(e[0]-t[0])+"px",i.height=Math.abs(e[1]-t[1])+"px"},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,i=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new Ts([i])},e.prototype.getGeometry=function(){return this.geometry_},e}(oa),dh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),fh=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.coordinate=i,r.mapBrowserEvent=n,r}return dh(e,t),e}(aa),gh=function(t){function e(e){var i=t.call(this)||this,n=e||{};return i.box_=new ph(n.className||"ol-dragbox"),i.minArea_=void 0!==n.minArea?n.minArea:64,i.onBoxEnd_=n.onBoxEnd?n.onBoxEnd:x,i.startPixel_=null,i.condition_=n.condition?n.condition:Jl,i.boxEndCondition_=n.boxEndCondition?n.boxEndCondition:i.defaultBoxEndCondition,i}return dh(e,t),e.prototype.defaultBoxEndCondition=function(t,e,i){var n=i[0]-e[0],r=i[1]-e[1];return n*n+r*r>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new fh("boxdrag",t.coordinate,t))},e.prototype.handleUpEvent=function(t){return this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd_(t),this.dispatchEvent(new fh("boxend",t.coordinate,t))),!1},e.prototype.handleDownEvent=function(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new fh("boxstart",t.coordinate,t)),!0)},e}(ah),vh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),yh=function(t){function e(e){var i=this,n=e||{};return(i=t.call(this,{condition:n.condition?n.condition:eh,className:n.className||"ol-dragzoom",minArea:n.minArea,onBoxEnd:pi})||this).duration_=void 0!==n.duration?n.duration:200,i.out_=void 0!==n.out&&n.out,i}return vh(e,t),e}(gh),mh=37,_h=38,xh=39,bh=40,wh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Sh=function(t){function e(e){var i=t.call(this,{handleEvent:di})||this,n=e||{};return i.defaultCondition_=function(t){return th(t)&&ih(t)},i.condition_=void 0!==n.condition?n.condition:i.defaultCondition_,i.duration_=void 0!==n.duration?n.duration:100,i.pixelDelta_=void 0!==n.pixelDelta?n.pixelDelta:128,i}return wh(e,t),e}(Wl),Ch=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Eh=function(t){function e(e){var i=t.call(this,{handleEvent:fi})||this,n=e||{};return i.condition_=n.condition?n.condition:ih,i.delta_=n.delta?n.delta:1,i.duration_=void 0!==n.duration?n.duration:100,i}return Ch(e,t),e}(Wl),Th=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ph=function(t){function e(e){var i=this,n=e||{};return(i=t.call(this,n)||this).totalDelta_=0,i.lastDelta_=0,i.maxDelta_=void 0!==n.maxDelta?n.maxDelta:1,i.duration_=void 0!==n.duration?n.duration:250,i.timeout_=void 0!==n.timeout?n.timeout:80,i.useAnchor_=void 0===n.useAnchor||n.useAnchor,i.condition_=n.condition?n.condition:Kl,i.lastAnchor_=null,i.startTime_=void 0,i.mode_=void 0,i.trackpadEventGap_=400,i.deltaPerZoom_=300,i}return Th(e,t),e.prototype.conditionInternal_=function(t){var e=!0;return t.map.getTargetElement().hasAttribute("tabindex")&&(e=Zl(t)),e&&this.condition_(t)},e.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},e.prototype.handleEvent=function(t){if(!this.conditionInternal_(t))return!0;if(t.type!==ya)return!0;t.preventDefault();var e,i=t.map,n=t.originalEvent;if(this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==ya&&(e=n.deltaY,js&&n.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(e/=Bs),n.deltaMode===WheelEvent.DOM_DELTA_LINE&&(e*=40)),0===e)return!1;this.lastDelta_=e;var r=Date.now();void 0===this.startTime_&&(this.startTime_=r),(!this.mode_||r-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(e)<4?"trackpad":"wheel");var o=i.getView();if("trackpad"===this.mode_&&!o.getConstrainResolution())return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-e/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=r,!1;this.totalDelta_+=e;var a=Math.max(this.timeout_-(r-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),a),!1},e.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var i=-ot(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;e.getConstrainResolution()&&(i=i?i>0?1:-1:0),li(e,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(Wl),Lh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ih=function(t){function e(e){var i=this,n=e||{},r=n;return r.stopDown||(r.stopDown=_),(i=t.call(this,r)||this).anchor_=null,i.lastAngle_=void 0,i.rotating_=!1,i.rotationDelta_=0,i.threshold_=void 0!==n.threshold?n.threshold:.3,i.duration_=void 0!==n.duration?n.duration:250,i}return Lh(e,t),e.prototype.handleDragEvent=function(t){var e=0,i=this.targetPointers[0],n=this.targetPointers[1],r=Math.atan2(n.clientY-i.clientY,n.clientX-i.clientX);if(void 0!==this.lastAngle_){var o=r-this.lastAngle_;this.rotationDelta_+=o,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=o}this.lastAngle_=r;var a=t.map,s=a.getView();if(s.getConstraints().rotation!==Ae){var l=a.getViewport().getBoundingClientRect(),h=ui(this.targetPointers);h[0]-=l.left,h[1]-=l.top,this.anchor_=a.getCoordinateFromPixelInternal(h),this.rotating_&&(a.render(),s.adjustRotationInternal(e,this.anchor_))}},e.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2&&(t.map.getView().endInteraction(this.duration_),1))},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(ah),Oh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ah=function(t){function e(e){var i=this,n=e||{},r=n;return r.stopDown||(r.stopDown=_),(i=t.call(this,r)||this).anchor_=null,i.duration_=void 0!==n.duration?n.duration:400,i.lastDistance_=void 0,i.lastScaleDelta_=1,i}return Oh(e,t),e.prototype.handleDragEvent=function(t){var e=1,i=this.targetPointers[0],n=this.targetPointers[1],r=i.clientX-n.clientX,o=i.clientY-n.clientY,a=Math.sqrt(r*r+o*o);void 0!==this.lastDistance_&&(e=this.lastDistance_/a),this.lastDistance_=a;var s=t.map,l=s.getView();1!=e&&(this.lastScaleDelta_=e);var h=s.getViewport().getBoundingClientRect(),u=ui(this.targetPointers);u[0]-=h.left,u[1]-=h.top,this.anchor_=s.getCoordinateFromPixelInternal(u),s.render(),l.adjustResolutionInternal(e,this.anchor_)},e.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2&&(t.map.getView().endInteraction(this.duration_,this.lastScaleDelta_>1?1:-1),1))},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(ah),Rh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Mh=function(t){function e(e,i,n,r){var o=t.call(this,e)||this;return o.inversePixelTransform=i,o.frameState=n,o.context=r,o}return Rh(e,t),e}(aa),Fh=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,kh=/^([a-z]*)$|^hsla?\(.*\)$/i,Nh=(ps={},ds=0,function(t){var e;if(ps.hasOwnProperty(t))e=ps[t];else{if(ds>=1024){var i=0;for(var n in ps)0==(3&i++)&&(delete ps[n],--ds)}e=function(t){var e,i,n,r,o;if(kh.exec(t)&&(t=function(t){var e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);var i=getComputedStyle(e).color;return document.body.removeChild(e),i}return""}(t)),Fh.exec(t)){var a=t.length-1,s=void 0;s=a<=4?1:2;var l=4===a||8===a;e=parseInt(t.substr(1+0*s,s),16),i=parseInt(t.substr(1+1*s,s),16),n=parseInt(t.substr(1+2*s,s),16),r=l?parseInt(t.substr(1+3*s,s),16):255,1==s&&(e=(e<<4)+e,i=(i<<4)+i,n=(n<<4)+n,l&&(r=(r<<4)+r)),o=[e,i,n,r/255]}else 0==t.indexOf("rgba(")?mi(o=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((o=t.slice(4,-1).split(",").map(Number)).push(1),mi(o)):S(!1,14);return o}(t),ps[t]=e,++ds}return e}),Dh=new(function(){function t(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return t.prototype.clear=function(){this.cache_={},this.cacheSize_=0},t.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},t.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var e in this.cache_)0!=(3&t++)||this.cache_[e].hasListener()||(delete this.cache_[e],--this.cacheSize_)}},t.prototype.get=function(t,e,i){var n=xi(t,e,i);return n in this.cache_?this.cache_[n]:null},t.prototype.set=function(t,e,i,n){var r=xi(t,e,i);this.cache_[r]=n,++this.cacheSize_},t.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()},t}()),jh=function(){function t(){}return t.prototype.drawCustom=function(t,e,i){},t.prototype.drawGeometry=function(t){},t.prototype.setStyle=function(t){},t.prototype.drawCircle=function(t,e){},t.prototype.drawFeature=function(t,e){},t.prototype.drawGeometryCollection=function(t,e){},t.prototype.drawLineString=function(t,e){},t.prototype.drawMultiLineString=function(t,e){},t.prototype.drawMultiPoint=function(t,e){},t.prototype.drawMultiPolygon=function(t,e){},t.prototype.drawPoint=function(t,e){},t.prototype.drawPolygon=function(t,e){},t.prototype.drawText=function(t,e){},t.prototype.setFillStrokeStyle=function(t,e){},t.prototype.setImageStyle=function(t,e){},t.prototype.setTextStyle=function(t,e){},t}(),Gh=[],zh=[0,0,0,0],Bh=new Sa,Yh=new la;Yh.setSize=function(){console.warn("labelCache is deprecated.")};var Xh,Wh,Uh,Vh,Hh=null,qh={},Zh=function(){function t(t,e,i){for(var o=!0,l=0;l<a;++l){var h=r[l];if(n=Si(t+" "+e+" 32px "+h,s),i!=h){var u=Si(t+" "+e+" 32px "+i+","+h,s);o=o&&u!=n}}return!!o}function e(){for(var e=!0,n=Bh.getKeys(),r=0,a=n.length;r<a;++r){var s=n[r];Bh.get(s)<100&&(t.apply(this,s.split("\n"))?(o(qh),Hh=null,Xh=void 0,Bh.set(s,100)):(Bh.set(s,Bh.get(s)+1,!0),e=!1))}e&&(clearInterval(i),i=void 0)}var i,n,r=["monospace","serif"],a=r.length,s="wmytzilWMYTZIL@#/&?$%10\uf013";return function(n){var r=Ml(n);if(r)for(var o=r.families,a=0,s=o.length;a<s;++a){var l=o[a],h=r.style+"\n"+r.weight+"\n"+l;void 0===Bh.get(h)&&(Bh.set(h,100,!0),t(r.style,r.weight,l)||(Bh.set(h,0,!0),void 0===i&&(i=setInterval(e,32))))}}}(),Kh=(Uh=qh,function(t){var e=Uh[t];if(null==e)if(Ys){var i=Ml(t),n=wi(t,"\u017dg"),r=isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight);qh[t]=r*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else Wh||((Wh=document.createElement("div")).innerHTML="M",Wh.style.margin="0 !important",Wh.style.padding="0 !important",Wh.style.position="absolute !important",Wh.style.left="-99999px !important"),Wh.style.font=t,document.body.appendChild(Wh),e=Wh.offsetHeight,Uh[t]=e,document.body.removeChild(Wh);return e}),Jh=null,$h=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Qh=function(t){function e(e,i,n,r,o,a,s){var l=t.call(this)||this;return l.context_=e,l.pixelRatio_=i,l.extent_=n,l.transform_=r,l.viewRotation_=o,l.squaredTolerance_=a,l.userTransform_=s,l.contextFillState_=null,l.contextStrokeState_=null,l.contextTextState_=null,l.fillState_=null,l.strokeState_=null,l.image_=null,l.imageAnchorX_=0,l.imageAnchorY_=0,l.imageHeight_=0,l.imageOpacity_=0,l.imageOriginX_=0,l.imageOriginY_=0,l.imageRotateWithView_=!1,l.imageRotation_=0,l.imageScale_=0,l.imageWidth_=0,l.text_="",l.textOffsetX_=0,l.textOffsetY_=0,l.textRotateWithView_=!1,l.textRotation_=0,l.textScale_=0,l.textFillState_=null,l.textStrokeState_=null,l.textState_=null,l.pixelCoordinates_=[],l.tmpLocalTransform_=[1,0,0,1,0,0],l}return $h(e,t),e.prototype.drawImages_=function(t,e,i,n){if(this.image_){var r=it(t,e,i,2,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,s=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=s*this.imageOpacity_);var l=this.imageRotation_;this.imageRotateWithView_&&(l+=this.viewRotation_);for(var h=0,u=r.length;h<u;h+=2){var c=r[h]-this.imageAnchorX_,p=r[h+1]-this.imageAnchorY_;if(0!==l||1!=this.imageScale_){var d=c+this.imageAnchorX_,f=p+this.imageAnchorY_;Yt(a,d,f,this.imageScale_,this.imageScale_,l,-d,-f),o.setTransform.apply(o,a)}o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,c,p,this.imageWidth_,this.imageHeight_)}0===l&&1==this.imageScale_||o.setTransform(1,0,0,1,0,0),1!=this.imageOpacity_&&(o.globalAlpha=s)}},e.prototype.drawText_=function(t,e,i,n){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var r=it(t,e,i,n,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.textRotation_;for(this.textRotateWithView_&&(a+=this.viewRotation_);e<i;e+=n){var s=r[e]+this.textOffsetX_,l=r[e+1]+this.textOffsetY_;if(0!==a||1!=this.textScale_){var h=Yt(this.tmpLocalTransform_,s,l,this.textScale_,this.textScale_,a,-s,-l);o.setTransform.apply(o,h)}this.textStrokeState_&&o.strokeText(this.text_,s,l),this.textFillState_&&o.fillText(this.text_,s,l)}0===a&&1==this.textScale_||o.setTransform(1,0,0,1,0,0)}},e.prototype.moveToLineTo_=function(t,e,i,n,r){var o=this.context_,a=it(t,e,i,n,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);var s=a.length;r&&(s-=2);for(var l=2;l<s;l+=2)o.lineTo(a[l],a[l+1]);return r&&o.closePath(),i},e.prototype.drawRings_=function(t,e,i,n){for(var r=0,o=i.length;r<o;++r)e=this.moveToLineTo_(t,e,i[r],n,!0);return e},e.prototype.drawCircle=function(t){if(J(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=function(t,e,i){var n=t.getFlatCoordinates();if(n){var r=t.getStride();return it(n,0,n.length,r,e,i)}return null}(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],n=e[3]-e[1],r=Math.sqrt(i*i+n*n),o=this.context_;o.beginPath(),o.arc(e[0],e[1],r,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.setTransform=function(t){this.transform_=t},e.prototype.drawGeometry=function(t){switch(t.getType()){case Xa.POINT:this.drawPoint(t);break;case Xa.LINE_STRING:this.drawLineString(t);break;case Xa.POLYGON:this.drawPolygon(t);break;case Xa.MULTI_POINT:this.drawMultiPoint(t);break;case Xa.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case Xa.MULTI_POLYGON:this.drawMultiPolygon(t);break;case Xa.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case Xa.CIRCLE:this.drawCircle(t)}},e.prototype.drawFeature=function(t,e){var i=e.getGeometryFunction()(t);i&&J(this.extent_,i.getExtent())&&(this.setStyle(e),this.drawGeometry(i))},e.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),i=0,n=e.length;i<n;++i)this.drawGeometry(e[i])},e.prototype.drawPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawMultiPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawLineString=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),J(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var n=t.getFlatMidpoint();this.drawText_(n,0,2,2)}}},e.prototype.drawMultiLineString=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getExtent();if(J(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,n=t.getFlatCoordinates(),r=0,o=t.getEnds(),a=t.getStride();i.beginPath();for(var s=0,l=o.length;s<l;++s)r=this.moveToLineTo_(n,r,o[s],a,!1);i.stroke()}if(""!==this.text_){var h=t.getFlatMidpoints();this.drawText_(h,0,h.length,2)}}},e.prototype.drawPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),J(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var i=t.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),J(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getOrientedFlatCoordinates(),n=0,r=t.getEndss(),o=t.getStride();e.beginPath();for(var a=0,s=r.length;a<s;++a)n=this.drawRings_(i,n,r[a],o);this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var l=t.getFlatInteriorPoints();this.drawText_(l,0,l.length,2)}}},e.prototype.setContextFillState_=function(t){var e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),e.setLineDash&&(v(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset)),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var e=this.context_,i=this.contextTextState_,n=t.textAlign?t.textAlign:"center";i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=n&&(i.textAlign=n,e.textAlign=n),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=n,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:n,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,e){if(t){var i=t.getColor();this.fillState_={fillStyle:bi(i||"#000")}}else this.fillState_=null;if(e){var n=e.getColor(),r=e.getLineCap(),o=e.getLineDash(),a=e.getLineDashOffset(),s=e.getLineJoin(),l=e.getWidth(),h=e.getMiterLimit();this.strokeState_={lineCap:void 0!==r?r:"round",lineDash:o||Gh,lineDashOffset:a||0,lineJoin:void 0!==s?s:"round",lineWidth:this.pixelRatio_*(void 0!==l?l:1),miterLimit:void 0!==h?h:10,strokeStyle:bi(n||"#000")}}else this.strokeState_=null},e.prototype.setImageStyle=function(t){if(t){var e=t.getAnchor(),i=t.getImage(1),n=t.getOrigin(),r=t.getSize();this.imageAnchorX_=e[0],this.imageAnchorY_=e[1],this.imageHeight_=r[1],this.image_=i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=n[0],this.imageOriginY_=n[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScale()*this.pixelRatio_,this.imageWidth_=r[0]}else this.image_=null},e.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var i=e.getColor();this.textFillState_={fillStyle:bi(i||"#000")}}else this.textFillState_=null;var n=t.getStroke();if(n){var r=n.getColor(),o=n.getLineCap(),a=n.getLineDash(),s=n.getLineDashOffset(),l=n.getLineJoin(),h=n.getWidth(),u=n.getMiterLimit();this.textStrokeState_={lineCap:void 0!==o?o:"round",lineDash:a||Gh,lineDashOffset:s||0,lineJoin:void 0!==l?l:"round",lineWidth:void 0!==h?h:1,miterLimit:void 0!==u?u:10,strokeStyle:bi(r||"#000")}}else this.textStrokeState_=null;var c=t.getFont(),p=t.getOffsetX(),d=t.getOffsetY(),f=t.getRotateWithView(),g=t.getRotation(),v=t.getScale(),y=t.getText(),m=t.getTextAlign(),_=t.getTextBaseline();this.textState_={font:void 0!==c?c:"10px sans-serif",textAlign:void 0!==m?m:"center",textBaseline:void 0!==_?_:"middle"},this.text_=void 0!==y?y:"",this.textOffsetX_=void 0!==p?this.pixelRatio_*p:0,this.textOffsetY_=void 0!==d?this.pixelRatio_*d:0,this.textRotateWithView_=void 0!==f&&f,this.textRotation_=void 0!==g?g:0,this.textScale_=this.pixelRatio_*(void 0!==v?v:1)}else this.text_=""},e}(jh),tu=0,eu=2,iu=3,nu=4,ru="Default",ou="Image",au="LineString",su="Text",lu={Point:function(t,e,i,n){var r=i.getImage();if(r){if(r.getImageState()!=eu)return;var o=t.getBuilder(i.getZIndex(),ou);o.setImageStyle(r,t.addDeclutter(!1)),o.drawPoint(e,n)}var a=i.getText();if(a){var s=t.getBuilder(i.getZIndex(),su);s.setTextStyle(a,t.addDeclutter(!!r)),s.drawText(e,n)}},LineString:function(t,e,i,n){var r=i.getStroke();if(r){var o=t.getBuilder(i.getZIndex(),au);o.setFillStrokeStyle(null,r),o.drawLineString(e,n)}var a=i.getText();if(a){var s=t.getBuilder(i.getZIndex(),su);s.setTextStyle(a,t.addDeclutter(!1)),s.drawText(e,n)}},Polygon:function(t,e,i,n){var r=i.getFill(),o=i.getStroke();if(r||o){var a=t.getBuilder(i.getZIndex(),"Polygon");a.setFillStrokeStyle(r,o),a.drawPolygon(e,n)}var s=i.getText();if(s){var l=t.getBuilder(i.getZIndex(),su);l.setTextStyle(s,t.addDeclutter(!1)),l.drawText(e,n)}},MultiPoint:function(t,e,i,n){var r=i.getImage();if(r){if(r.getImageState()!=eu)return;var o=t.getBuilder(i.getZIndex(),ou);o.setImageStyle(r,t.addDeclutter(!1)),o.drawMultiPoint(e,n)}var a=i.getText();if(a){var s=t.getBuilder(i.getZIndex(),su);s.setTextStyle(a,t.addDeclutter(!!r)),s.drawText(e,n)}},MultiLineString:function(t,e,i,n){var r=i.getStroke();if(r){var o=t.getBuilder(i.getZIndex(),au);o.setFillStrokeStyle(null,r),o.drawMultiLineString(e,n)}var a=i.getText();if(a){var s=t.getBuilder(i.getZIndex(),su);s.setTextStyle(a,t.addDeclutter(!1)),s.drawText(e,n)}},MultiPolygon:function(t,e,i,n){var r=i.getFill(),o=i.getStroke();if(o||r){var a=t.getBuilder(i.getZIndex(),"Polygon");a.setFillStrokeStyle(r,o),a.drawMultiPolygon(e,n)}var s=i.getText();if(s){var l=t.getBuilder(i.getZIndex(),su);l.setTextStyle(s,t.addDeclutter(!1)),l.drawText(e,n)}},GeometryCollection:function(t,e,i,n){var r,o,a=e.getGeometriesArray();for(r=0,o=a.length;r<o;++r)(0,lu[a[r].getType()])(t,a[r],i,n)},Circle:function(t,e,i,n){var r=i.getFill(),o=i.getStroke();if(r||o){var a=t.getBuilder(i.getZIndex(),"Circle");a.setFillStrokeStyle(r,o),a.drawCircle(e,n)}var s=i.getText();if(s){var l=t.getBuilder(i.getZIndex(),su);l.setTextStyle(s,t.addDeclutter(!1)),l.drawText(e,n)}}},hu=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),uu=function(t){function e(e){var i=t.call(this)||this;return i.map_=e,i.declutterTree_=null,i}return hu(e,t),e.prototype.dispatchRenderEvent=function(t,e){n()},e.prototype.calculateMatrices2D=function(t){var e=t.viewState,i=t.coordinateToPixelTransform,n=t.pixelToCoordinateTransform;Yt(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),Xt(n,i)},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,r,o,a,s){function l(t,e,i){return r.call(o,e,t?i:null)}var h,u=e.viewState,c=u.projection,p=Ve(t.slice(),c),d=[[0,0]];if(c.canWrapX()&&n){var f=K(c.getExtent());d.push([-f,0],[f,0])}var g,v=e.layerStatesArray,y=v.length;this.declutterTree_&&(g=this.declutterTree_.all().map(function(t){return t.value}));for(var m=[],_=0;_<d.length;_++)for(var x=y-1;x>=0;--x){var b=v[x],w=b.layer;if(w.hasRenderer()&&ai(b,u)&&a.call(s,w)){var S=w.getRenderer(),C=w.getSource();if(S&&C){var E=C.getWrapX()?p:t,T=l.bind(null,b.managed);m[0]=E[0]+d[_][0],m[1]=E[1]+d[_][1],h=S.forEachFeatureAtCoordinate(m,e,i,T,g)}if(h)return h}}},e.prototype.forEachLayerAtPixel=function(t,e,i,r,o){return n()},e.prototype.hasFeatureAtCoordinate=function(t,e,i,n,r,o){return void 0!==this.forEachFeatureAtCoordinate(t,e,i,n,m,this,r,o)},e.prototype.getMap=function(){return this.map_},e.prototype.renderFrame=function(t){this.declutterTree_=Mi(t,this.declutterTree_)},e.prototype.scheduleExpireIconCache=function(t){Dh.canExpireCache()&&t.postRenderFunctions.push(Fi)},e}(oa),cu=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),pu=function(t){function e(e){var i=t.call(this,e)||this;i.fontChangeListenerKey_=s(Bh,ia,e.redrawText.bind(e)),i.element_=document.createElement("div");var n=i.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",i.element_.className="ol-unselectable ol-layers";var r=e.getViewport();return r.insertBefore(i.element_,r.firstChild||null),i.children_=[],i.renderedVisible_=!0,i}return cu(e,t),e.prototype.dispatchRenderEvent=function(t,e){var i=this.getMap();if(i.hasListener(t)){var n=new Mh(t,void 0,e);i.dispatchEvent(n)}},e.prototype.disposeInternal=function(){h(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),t.prototype.disposeInternal.call(this)},e.prototype.renderFrame=function(e){if(e){this.calculateMatrices2D(e),this.dispatchRenderEvent("precompose",e);var i=e.layerStatesArray.sort(function(t,e){return t.zIndex-e.zIndex}),n=e.viewState;this.children_.length=0;for(var r=null,o=0,a=i.length;o<a;++o){var s=i[o];if(e.layerIndex=o,ai(s,n)&&(s.sourceState==Sl||"undefined"==s.sourceState)){var l=s.layer.render(e,r);l&&l!==r&&(this.children_.push(l),r=l)}}t.prototype.renderFrame.call(this,e),function(t,e){for(var i=t.childNodes,n=0;;++n){var r=i[n],o=e[n];if(!r&&!o)break;r!==o&&(r?o?t.insertBefore(o,r):(t.removeChild(r),--n):t.appendChild(o))}}(this.element_,this.children_),this.dispatchRenderEvent("postcompose",e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)},e.prototype.forEachLayerAtPixel=function(t,e,i,n,r){for(var o=e.viewState,a=e.layerStatesArray,s=a.length-1;s>=0;--s){var l=a[s],h=l.layer;if(h.hasRenderer()&&ai(l,o)&&r(h)){var u=h.getRenderer().getDataAtPixel(t,e,i);if(u){var c=n(h,u);if(c)return c}}}},e}(uu),du=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),fu=function(t){function e(e){return(e=na({},e)).controls||(e.controls=si()),e.interactions||(e.interactions=gi()),t.call(this,e)||this}return du(e,t),e.prototype.createRenderer=function(){return new pu(this)},e}(Ll),gu="center-center",vu="top-left",yu=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),mu="element",_u="map",xu="offset",bu="position",wu="positioning",Su=function(t){function e(e){var i=t.call(this)||this;i.options=e,i.id=e.id,i.insertFirst=void 0===e.insertFirst||e.insertFirst,i.stopEvent=void 0===e.stopEvent||e.stopEvent,i.element=document.createElement("div"),i.element.className=void 0!==e.className?e.className:"ol-overlay-container ol-selectable",i.element.style.position="absolute";var n=e.autoPan;return n&&"object"!=typeof n&&(n={animation:e.autoPanAnimation,margin:e.autoPanMargin}),i.autoPan=n||!1,i.rendered={transform_:"",visible:!0},i.mapPostrenderListenerKey=null,i.addEventListener(w(mu),i.handleElementChanged),i.addEventListener(w(_u),i.handleMapChanged),i.addEventListener(w(xu),i.handleOffsetChanged),i.addEventListener(w(bu),i.handlePositionChanged),i.addEventListener(w(wu),i.handlePositioningChanged),void 0!==e.element&&i.setElement(e.element),i.setOffset(void 0!==e.offset?e.offset:[0,0]),i.setPositioning(void 0!==e.positioning?e.positioning:vu),void 0!==e.position&&i.setPosition(e.position),i}return yu(e,t),e.prototype.getElement=function(){return this.get(mu)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get(_u)},e.prototype.getOffset=function(){return this.get(xu)},e.prototype.getPosition=function(){return this.get(bu)},e.prototype.getPositioning=function(){return this.get(wu)},e.prototype.handleElementChanged=function(){ii(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(ei(this.element),h(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=s(t,"postrender",this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(mu,t)},e.prototype.setMap=function(t){this.set(_u,t)},e.prototype.setOffset=function(t){this.set(xu,t)},e.prototype.setPosition=function(t){this.set(bu,t)},e.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},e.prototype.panIntoView=function(t){var e=this.getMap();if(e&&e.getTargetElement()&&this.get(bu)){var i=this.getRect(e.getTargetElement(),e.getSize()),n=this.getElement(),r=this.getRect(n,[function(t){var e=t.offsetWidth,i=getComputedStyle(t);return e+=parseInt(i.marginLeft,10)+parseInt(i.marginRight,10)}(n),function(t){var e=t.offsetHeight,i=getComputedStyle(t);return e+=parseInt(i.marginTop,10)+parseInt(i.marginBottom,10)}(n)]),o=void 0===t.margin?20:t.margin;if(!I(i,r)){var a=r[0]-i[0],s=i[2]-r[2],l=r[1]-i[1],h=i[3]-r[3],u=[0,0];if(a<0?u[0]=a-o:s<0&&(u[0]=Math.abs(s)+o),l<0?u[1]=l-o:h<0&&(u[1]=Math.abs(h)+o),0!==u[0]||0!==u[1]){var c=e.getView().getCenterInternal(),p=e.getPixelFromCoordinateInternal(c),d=[p[0]+u[0],p[1]+u[1]],f=t.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(d),duration:f.duration,easing:f.easing})}}}},e.prototype.getRect=function(t,e){var i=t.getBoundingClientRect(),n=i.left+window.pageXOffset,r=i.top+window.pageYOffset;return[n,r,n+e[0],r+e[1]]},e.prototype.setPositioning=function(t){this.set(wu,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var i=t.getPixelFromCoordinate(e),n=t.getSize();this.updateRenderedPosition(i,n)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var i=this.element.style,n=this.getOffset(),r=this.getPositioning();this.setVisible(!0);var o=Math.round(t[0]+n[0])+"px",a=Math.round(t[1]+n[1])+"px",s="0%",l="0%";"bottom-right"==r||"center-right"==r||"top-right"==r?s="-100%":"bottom-center"!=r&&r!=gu&&"top-center"!=r||(s="-50%"),"bottom-left"==r||"bottom-center"==r||"bottom-right"==r?l="-100%":"center-left"!=r&&r!=gu&&"center-right"!=r||(l="-50%");var h="translate("+s+", "+l+") translate("+o+", "+a+")";this.rendered.transform_!=h&&(this.rendered.transform_=h,i.transform=h,i.msTransform=h)},e.prototype.getOptions=function(){return this.options},e}(Sa),Cu="arraybuffer",Eu="json",Tu="text",Pu="xml",Lu=!1,Iu=function(){function t(t,e,i,n){this.minX=t,this.maxX=e,this.minY=i,this.maxY=n}return t.prototype.contains=function(t){return this.containsXY(t[1],t[2])},t.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},t.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},t.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},t.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},t}(),Ou=Iu,Au=[0,0,0],Ru=function(){function t(t){var e,i,n;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,S((e=this.resolutions_,i=function(t,e){return e-t}||u,e.every(function(t,n){if(0===n)return!0;var r=i(e[n-1],t);return!(r>0||0===r)})),17),!t.origins)for(var r=0,o=this.resolutions_.length-1;r<o;++r)if(n){if(this.resolutions_[r]/this.resolutions_[r+1]!==n){n=void 0;break}}else n=this.resolutions_[r]/this.resolutions_[r+1];this.zoomFactor_=n,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,S(this.origins_.length==this.resolutions_.length,20));var a=t.extent;void 0===a||this.origin_||this.origins_||(this.origin_=q(a)),S(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,S(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:256,S(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==a?a:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map(function(t,e){return new Ou(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))},this):a&&this.calculateTileRanges_(a)}return t.prototype.forEachTileCoord=function(t,e,i){for(var n=this.getTileRangeForExtentAndZ(t,e),r=n.minX,o=n.maxX;r<=o;++r)for(var a=n.minY,s=n.maxY;a<=s;++a)i([e,r,a])},t.prototype.forEachTileCoordParentTileRange=function(t,e,i,n){var r,o,a=null,s=t[0]-1;for(2===this.zoomFactor_?(r=t[1],o=t[2]):a=this.getTileCoordExtent(t,n);s>=this.minZoom;){if(e(s,2===this.zoomFactor_?ji(r=Math.floor(r/2),r,o=Math.floor(o/2),o,i):this.getTileRangeForExtentAndZ(a,s,i)))return!0;--s}return!1},t.prototype.getExtent=function(){return this.extent_},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.getMinZoom=function(){return this.minZoom},t.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},t.prototype.getResolution=function(t){return this.resolutions_[t]},t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getTileCoordChildTileRange=function(t,e,i){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var n=2*t[1],r=2*t[2];return ji(n,n+1,r,r+1,e)}var o=this.getTileCoordExtent(t,i);return this.getTileRangeForExtentAndZ(o,t[0]+1,e)}return null},t.prototype.getTileRangeExtent=function(t,e,i){var n=this.getOrigin(t),r=this.getResolution(t),o=oi(this.getTileSize(t),this.tmpSize_);return R(n[0]+e.minX*o[0]*r,n[1]+e.minY*o[1]*r,n[0]+(e.maxX+1)*o[0]*r,n[1]+(e.maxY+1)*o[1]*r,i)},t.prototype.getTileRangeForExtentAndZ=function(t,e,i){var n=Au;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,n);var r=n[1],o=n[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,n),ji(r,n[1],o,n[2],i)},t.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),i=this.getResolution(t[0]),n=oi(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*n[0]*i,e[1]-(t[2]+.5)*n[1]*i]},t.prototype.getTileCoordExtent=function(t,e){var i=this.getOrigin(t[0]),n=this.getResolution(t[0]),r=oi(this.getTileSize(t[0]),this.tmpSize_),o=i[0]+t[1]*r[0]*n,a=i[1]-(t[2]+1)*r[1]*n;return R(o,a,o+r[0]*n,a+r[1]*n,e)},t.prototype.getTileCoordForCoordAndResolution=function(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)},t.prototype.getTileCoordForXYAndResolution_=function(t,e,i,n,r){var o=this.getZForResolution(i),a=i/this.getResolution(o),s=this.getOrigin(o),l=oi(this.getTileSize(o),this.tmpSize_),h=n?.5:0,u=n?.5:0,c=Math.floor((t-s[0])/i+h),p=Math.floor((s[1]-e)/i+u),d=a*c/l[0],f=a*p/l[1];return n?(d=Math.ceil(d)-1,f=Math.ceil(f)-1):(d=Math.floor(d),f=Math.floor(f)),Gi(o,d,f,r)},t.prototype.getTileCoordForXYAndZ_=function(t,e,i,n,r){var o=this.getOrigin(i),a=this.getResolution(i),s=oi(this.getTileSize(i),this.tmpSize_),l=n?.5:0,h=n?.5:0,u=Math.floor((t-o[0])/a+l),c=Math.floor((o[1]-e)/a+h),p=u/s[0],d=c/s[1];return n?(p=Math.ceil(p)-1,d=Math.ceil(d)-1):(p=Math.floor(p),d=Math.floor(d)),Gi(i,p,d,r)},t.prototype.getTileCoordForCoordAndZ=function(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)},t.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},t.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},t.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:null},t.prototype.getZForResolution=function(t,e){return ot(p(this.resolutions_,t,e||0),this.minZoom,this.maxZoom)},t.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,i=new Array(e),n=this.minZoom;n<e;++n)i[n]=this.getTileRangeForExtentAndZ(t,n);this.fullTileRanges_=i},t}(),Mu=["experimental-webgl","webgl","webkit-3d","moz-webgl"],Fu="http://www.w3.org/2001/XMLSchema-instance",ku=ln(),Nu=void 0,Du=void 0,ju=35044,Gu=function(){function t(t,e){this.array=null,this.type=t,S(34962===t||34963===t,62),this.usage=void 0!==e?e:ju}return t.prototype.ofSize=function(t){this.array=new(vn(this.type))(t)},t.prototype.fromArray=function(t){this.array=vn(this.type).from(t)},t.prototype.fromArrayBuffer=function(t){this.array=new(vn(this.type))(t)},t.prototype.getType=function(){return this.type},t.prototype.getArray=function(){return this.array},t.prototype.getUsage=function(){return this.usage},t.prototype.getSize=function(){return this.array?this.array.length:0},t}(),zu="webglcontextlost",Bu="webglcontextrestored",Yu=function(){function t(t){this.gl_=t.webGlContext;var e=this.gl_;this.scaleRatio_=t.scaleRatio||1,this.renderTargetTexture_=e.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=e.createFramebuffer();var i=e.createShader(e.VERTEX_SHADER);e.shaderSource(i,t.vertexShader||"\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n"),e.compileShader(i);var n=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(n,t.fragmentShader||"\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n   \n  varying vec2 v_texCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord);\n  }\n"),e.compileShader(n),this.renderTargetProgram_=e.createProgram(),e.attachShader(this.renderTargetProgram_,i),e.attachShader(this.renderTargetProgram_,n),e.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),e.STATIC_DRAW),this.renderTargetAttribLocation_=e.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetTextureLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],t.uniforms&&Object.keys(t.uniforms).forEach((function(i){this.uniforms_.push({value:t.uniforms[i],location:e.getUniformLocation(this.renderTargetProgram_,i)})}).bind(this))}return t.prototype.getGL=function(){return this.gl_},t.prototype.init=function(t){var e=this.getGL(),i=[e.drawingBufferWidth*this.scaleRatio_,e.drawingBufferHeight*this.scaleRatio_];if(e.bindFramebuffer(e.FRAMEBUFFER,this.getFrameBuffer()),e.viewport(0,0,i[0],i[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==i[0]||this.renderTargetTextureSize_[1]!==i[1]){this.renderTargetTextureSize_=i;var n=e.RGBA,r=e.RGBA,o=e.UNSIGNED_BYTE;e.bindTexture(e.TEXTURE_2D,this.renderTargetTexture_),e.texImage2D(e.TEXTURE_2D,0,n,i[0],i[1],0,r,o,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.renderTargetTexture_,0)}},t.prototype.apply=function(t,e){var i=this.getGL(),n=t.size;i.bindFramebuffer(i.FRAMEBUFFER,e?e.getFrameBuffer():null),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,this.renderTargetTexture_),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA),i.viewport(0,0,i.drawingBufferWidth,i.drawingBufferHeight),i.bindBuffer(i.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),i.useProgram(this.renderTargetProgram_),i.enableVertexAttribArray(this.renderTargetAttribLocation_),i.vertexAttribPointer(this.renderTargetAttribLocation_,2,i.FLOAT,!1,0,0),i.uniform2f(this.renderTargetUniformLocation_,n[0],n[1]),i.uniform1i(this.renderTargetTextureLocation_,0),this.applyUniforms(t),i.drawArrays(i.TRIANGLES,0,6)},t.prototype.getFrameBuffer=function(){return this.frameBuffer_},t.prototype.applyUniforms=function(t){var e,i=this.getGL(),n=1;this.uniforms_.forEach(function(r){if((e="function"==typeof r.value?r.value(t):r.value)instanceof HTMLCanvasElement||e instanceof ImageData)r.texture||(r.texture=i.createTexture()),i.activeTexture(i["TEXTURE"+n]),i.bindTexture(i.TEXTURE_2D,r.texture),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),e instanceof ImageData?i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,e.width,e.height,0,i.UNSIGNED_BYTE,new Uint8Array(e.data)):i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,e),i.uniform1i(r.location,n++);else if(Array.isArray(e))switch(e.length){case 2:return void i.uniform2f(r.location,e[0],e[1]);case 3:return void i.uniform3f(r.location,e[0],e[1],e[2]);case 4:return void i.uniform4f(r.location,e[0],e[1],e[2],e[3]);default:return}else"number"==typeof e&&i.uniform1f(r.location,e)})},t}(),Xu=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Wu="u_projectionMatrix",Uu={UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126},Vu=function(t){function e(e){var i=t.call(this)||this,n=e||{};i.boundHandleWebGLContextLost_=i.handleWebGLContextLost.bind(i),i.boundHandleWebGLContextRestored_=i.handleWebGLContextRestored.bind(i),i.canvas_=document.createElement("canvas"),i.canvas_.style.position="absolute",i.canvas_.style.left="0",i.gl_=Zi(i.canvas_);var r=i.getGL();if(i.bufferCache_={},i.currentProgram_=null,S(c(function(){if(!Vh){var t=Zi(document.createElement("canvas"));t&&(Vh=t.getSupportedExtensions())}return Vh}(),"OES_element_index_uint"),63),r.getExtension("OES_element_index_uint"),i.canvas_.addEventListener(zu,i.boundHandleWebGLContextLost_),i.canvas_.addEventListener(Bu,i.boundHandleWebGLContextRestored_),i.offsetRotateMatrix_=[1,0,0,1,0,0],i.offsetScaleMatrix_=[1,0,0,1,0,0],i.tmpMat4_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],i.uniformLocations_={},i.attribLocations_={},i.uniforms_=[],n.uniforms)for(var o in n.uniforms)i.uniforms_.push({name:o,value:n.uniforms[o]});return i.postProcessPasses_=n.postProcesses?n.postProcesses.map(function(t){return new Yu({webGlContext:r,scaleRatio:t.scaleRatio,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms})}):[new Yu({webGlContext:r})],i.shaderCompileErrors_=null,i.startTime_=Date.now(),i}return Xu(e,t),e.prototype.bindBuffer=function(t){var e=this.getGL(),i=r(t),n=this.bufferCache_[i];n||(n={buffer:t,webGlBuffer:e.createBuffer()},this.bufferCache_[i]=n),e.bindBuffer(t.getType(),n.webGlBuffer)},e.prototype.flushBufferData=function(t){var e=this.getGL();this.bindBuffer(t),e.bufferData(t.getType(),t.getArray(),t.getUsage())},e.prototype.deleteBuffer=function(t){var e=this.getGL(),i=r(t),n=this.bufferCache_[i];e.isContextLost()||e.deleteBuffer(n.buffer),delete this.bufferCache_[i]},e.prototype.disposeInternal=function(){this.canvas_.removeEventListener(zu,this.boundHandleWebGLContextLost_),this.canvas_.removeEventListener(Bu,this.boundHandleWebGLContextRestored_)},e.prototype.prepareDraw=function(t){var e=this.getGL(),i=this.getCanvas(),n=t.size,r=t.pixelRatio;i.width=n[0]*r,i.height=n[1]*r,i.style.width=n[0]+"px",i.style.height=n[1]+"px",e.useProgram(this.currentProgram_);for(var o=this.postProcessPasses_.length-1;o>=0;o--)this.postProcessPasses_[o].init(t);e.bindTexture(e.TEXTURE_2D,null),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),e.useProgram(this.currentProgram_),this.applyFrameState(t),this.applyUniforms(t)},e.prototype.prepareDrawToRenderTarget=function(t,e,i){var n=this.getGL(),r=e.getSize();n.bindFramebuffer(n.FRAMEBUFFER,e.getFramebuffer()),n.viewport(0,0,r[0],r[1]),n.bindTexture(n.TEXTURE_2D,e.getTexture()),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.enable(n.BLEND),n.blendFunc(n.ONE,i?n.ZERO:n.ONE_MINUS_SRC_ALPHA),n.useProgram(this.currentProgram_),this.applyFrameState(t),this.applyUniforms(t)},e.prototype.drawElements=function(t,e){var i=this.getGL();i.drawElements(i.TRIANGLES,e-t,i.UNSIGNED_INT,4*t)},e.prototype.finalizeDraw=function(t){for(var e=0;e<this.postProcessPasses_.length;e++)this.postProcessPasses_[e].apply(t,this.postProcessPasses_[e+1]||null)},e.prototype.getCanvas=function(){return this.canvas_},e.prototype.getGL=function(){return this.gl_},e.prototype.applyFrameState=function(t){var e=t.size,i=t.viewState.rotation,n=Dt(this.offsetScaleMatrix_);Bt(n,2/e[0],2/e[1]);var r,o,a,s,l=Dt(this.offsetRotateMatrix_);0!==i&&(r=l,o=-i,a=Math.cos(o),s=Math.sin(o),jt(r,Gt(fs,a,s,-s,a,0,0))),this.setUniformMatrixValue("u_offsetScaleMatrix",yn(this.tmpMat4_,n)),this.setUniformMatrixValue("u_offsetRotateMatrix",yn(this.tmpMat4_,l)),this.setUniformFloatValue("u_time",.001*(Date.now()-this.startTime_)),this.setUniformFloatValue("u_zoom",t.viewState.zoom),this.setUniformFloatValue("u_resolution",t.viewState.resolution)},e.prototype.applyUniforms=function(t){var e,i=this.getGL(),n=0;this.uniforms_.forEach((function(r){if((e="function"==typeof r.value?r.value(t):r.value)instanceof HTMLCanvasElement||e instanceof HTMLImageElement||e instanceof ImageData)r.texture||(r.prevValue=void 0,r.texture=i.createTexture()),i.activeTexture(i["TEXTURE"+n]),i.bindTexture(i.TEXTURE_2D,r.texture),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),(!(e instanceof HTMLImageElement)||e.complete)&&r.prevValue!==e&&(r.prevValue=e,i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,e)),i.uniform1i(this.getUniformLocation(r.name),n++);else if(Array.isArray(e)&&6===e.length)this.setUniformMatrixValue(r.name,yn(this.tmpMat4_,e));else if(Array.isArray(e)&&e.length<=4)switch(e.length){case 2:return void i.uniform2f(this.getUniformLocation(r.name),e[0],e[1]);case 3:return void i.uniform3f(this.getUniformLocation(r.name),e[0],e[1],e[2]);case 4:return void i.uniform4f(this.getUniformLocation(r.name),e[0],e[1],e[2],e[3]);default:return}else"number"==typeof e&&i.uniform1f(this.getUniformLocation(r.name),e)}).bind(this))},e.prototype.useProgram=function(t){return t!=this.currentProgram_&&(this.getGL().useProgram(t),this.currentProgram_=t,this.uniformLocations_={},this.attribLocations_={},!0)},e.prototype.compileShader=function(t,e){var i=this.getGL(),n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n},e.prototype.getProgram=function(t,e){var i=this.getGL(),n=this.compileShader(t,i.FRAGMENT_SHADER),r=this.compileShader(e,i.VERTEX_SHADER);this.shaderCompileErrors_=null,i.getShaderInfoLog(n)&&(this.shaderCompileErrors_="Fragment shader compilation failed:\n"+i.getShaderInfoLog(n)),i.getShaderInfoLog(r)&&(this.shaderCompileErrors_=(this.shaderCompileErrors_||"")+"Vertex shader compilation failed:\n"+i.getShaderInfoLog(r));var o=i.createProgram();return i.attachShader(o,n),i.attachShader(o,r),i.linkProgram(o),o},e.prototype.getShaderCompileErrors=function(){return this.shaderCompileErrors_},e.prototype.getUniformLocation=function(t){return void 0===this.uniformLocations_[t]&&(this.uniformLocations_[t]=this.getGL().getUniformLocation(this.currentProgram_,t)),this.uniformLocations_[t]},e.prototype.getAttributeLocation=function(t){return void 0===this.attribLocations_[t]&&(this.attribLocations_[t]=this.getGL().getAttribLocation(this.currentProgram_,t)),this.attribLocations_[t]},e.prototype.makeProjectionTransform=function(t,e){var i=t.size,n=t.viewState.rotation,r=t.viewState.resolution,o=t.viewState.center;return Dt(e),Yt(e,0,0,2/(r*i[0]),2/(r*i[1]),-n,-o[0],-o[1]),e},e.prototype.setUniformFloatValue=function(t,e){this.getGL().uniform1f(this.getUniformLocation(t),e)},e.prototype.setUniformMatrixValue=function(t,e){this.getGL().uniformMatrix4fv(this.getUniformLocation(t),!1,e)},e.prototype.enableAttributeArray_=function(t,e,i,n,r){var o=this.getAttributeLocation(t);o<0||(this.getGL().enableVertexAttribArray(o),this.getGL().vertexAttribPointer(o,e,i,!1,n,r))},e.prototype.enableAttributes=function(t){for(var e=mn(t),i=0,n=0;n<t.length;n++){var r=t[n];this.enableAttributeArray_(r.name,r.size,r.type||5126,e,i),i+=r.size*_n(r.type)}},e.prototype.handleWebGLContextLost=function(){o(this.bufferCache_),this.currentProgram_=null},e.prototype.handleWebGLContextRestored=function(){},e.prototype.createTexture=function(t,e,i){var n=this.getGL(),r=i||n.createTexture(),o=n.RGBA,a=n.RGBA,s=n.UNSIGNED_BYTE;return n.bindTexture(n.TEXTURE_2D,r),e?n.texImage2D(n.TEXTURE_2D,0,o,a,s,e):n.texImage2D(n.TEXTURE_2D,0,o,t[0],t[1],0,a,s,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),r},e}(oa),Hu=new Uint8Array(4),qu=function(){function t(t,e){this.helper_=t;var i=t.getGL();this.texture_=i.createTexture(),this.framebuffer_=i.createFramebuffer(),this.size_=e||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}return t.prototype.setSize=function(t){v(t,this.size_)||(this.size_[0]=t[0],this.size_[1]=t[1],this.updateSize_())},t.prototype.getSize=function(){return this.size_},t.prototype.clearCachedData=function(){this.dataCacheDirty_=!0},t.prototype.readAll=function(){if(this.dataCacheDirty_){var t=this.size_,e=this.helper_.getGL();e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.readPixels(0,0,t[0],t[1],e.RGBA,e.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_},t.prototype.readPixel=function(t,e){if(t<0||e<0||t>this.size_[0]||e>=this.size_[1])return Hu[0]=0,Hu[1]=0,Hu[2]=0,Hu[3]=0,Hu;this.readAll();var i=Math.floor(t)+(this.size_[1]-Math.floor(e)-1)*this.size_[0];return Hu[0]=this.data_[4*i],Hu[1]=this.data_[4*i+1],Hu[2]=this.data_[4*i+2],Hu[3]=this.data_[4*i+3],Hu},t.prototype.getTexture=function(){return this.texture_},t.prototype.getFramebuffer=function(){return this.framebuffer_},t.prototype.updateSize_=function(){var t=this.size_,e=this.helper_.getGL();this.texture_=this.helper_.createTexture(t,null,this.texture_),e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.viewport(0,0,t[0],t[1]),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture_,0),this.data_=new Uint8Array(t[0]*t[1]*4)},t}(),Zu=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ku=function(t){function e(e){var i=t.call(this,{extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes})||this;return i.matrixIds_=e.matrixIds,i}return Zu(e,t),e.prototype.getMatrixId=function(t){return this.matrixIds_[t]},e.prototype.getMatrixIds=function(){return this.matrixIds_},e}(Ru),Ju=Ku,$u=function(){function t(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.displacement_=t.displacement}return t.prototype.clone=function(){return new t({opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},t.prototype.getOpacity=function(){return this.opacity_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getDisplacement=function(){return this.displacement_},t.prototype.getAnchor=function(){return n()},t.prototype.getImage=function(t){return n()},t.prototype.getHitDetectionImage=function(t){return n()},t.prototype.getImageState=function(){return n()},t.prototype.getImageSize=function(){return n()},t.prototype.getHitDetectionImageSize=function(){return n()},t.prototype.getOrigin=function(){return n()},t.prototype.getSize=function(){return n()},t.prototype.setOpacity=function(t){this.opacity_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t},t.prototype.listenImageChange=function(t){n()},t.prototype.load=function(){n()},t.prototype.unlistenImageChange=function(t){n()},t}(),Qu=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),tc=function(t){function e(e){var i=this;return(i=t.call(this,{opacity:1,rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,rotation:void 0!==e.rotation?e.rotation:0,scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0]})||this).canvas_=null,i.hitDetectionCanvas_=null,i.fill_=void 0!==e.fill?e.fill:null,i.origin_=[0,0],i.points_=e.points,i.radius_=void 0!==e.radius?e.radius:e.radius1,i.radius2_=e.radius2,i.angle_=void 0!==e.angle?e.angle:0,i.stroke_=void 0!==e.stroke?e.stroke:null,i.anchor_=null,i.size_=null,i.imageSize_=null,i.hitDetectionImageSize_=null,i.render(),i}return Qu(e,t),e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.getAnchor=function(){return this.anchor_},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.getHitDetectionImage=function(t){return this.hitDetectionCanvas_},e.prototype.getImage=function(t){return this.canvas_},e.prototype.getImageSize=function(){return this.imageSize_},e.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},e.prototype.getImageState=function(){return eu},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.listenImageChange=function(t){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(t){},e.prototype.render=function(){var t,e="round",i="round",n=0,r=null,o=0,a=0;this.stroke_&&(null===(t=this.stroke_.getColor())&&(t="#000"),t=bi(t),void 0===(a=this.stroke_.getWidth())&&(a=1),r=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset(),void 0===(i=this.stroke_.getLineJoin())&&(i="round"),void 0===(e=this.stroke_.getLineCap())&&(e="round"),void 0===(n=this.stroke_.getMiterLimit())&&(n=10));var s=2*(this.radius_+a)+1,l={strokeStyle:t,strokeWidth:a,size:s,lineCap:e,lineDash:r,lineDashOffset:o,lineJoin:i,miterLimit:n},h=Qe(s,s);this.canvas_=h.canvas;var u=s=this.canvas_.width,c=this.getDisplacement();this.draw_(l,h,0,0),this.createHitDetectionCanvas_(l),this.anchor_=[s/2-c[0],s/2+c[1]],this.size_=[s,s],this.imageSize_=[u,u]},e.prototype.draw_=function(t,e,i,n){var r,o,a;e.setTransform(1,0,0,1,0,0),e.translate(i,n),e.beginPath();var s=this.points_;if(s===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var l=void 0!==this.radius2_?this.radius2_:this.radius_;for(l!==this.radius_&&(s*=2),r=0;r<=s;r++)o=2*r*Math.PI/s-Math.PI/2+this.angle_,a=r%2==0?this.radius_:l,e.lineTo(t.size/2+a*Math.cos(o),t.size/2+a*Math.sin(o))}if(this.fill_){var h=this.fill_.getColor();null===h&&(h="#000"),e.fillStyle=bi(h),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,e.setLineDash&&t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke()),e.closePath()},e.prototype.createHitDetectionCanvas_=function(t){if(this.hitDetectionImageSize_=[t.size,t.size],this.hitDetectionCanvas_=this.canvas_,this.fill_){var e=this.fill_.getColor(),i=0;if("string"==typeof e&&(e=yi(e)),null===e?i=1:Array.isArray(e)&&(i=4===e.length?e[3]:1),0===i){var n=Qe(t.size,t.size);this.hitDetectionCanvas_=n.canvas,this.drawHitDetectionCanvas_(t,n,0,0)}}},e.prototype.drawHitDetectionCanvas_=function(t,e,i,n){e.setTransform(1,0,0,1,0,0),e.translate(i,n),e.beginPath();var r=this.points_;if(r===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var o=void 0!==this.radius2_?this.radius2_:this.radius_;o!==this.radius_&&(r*=2);var a=void 0,s=void 0,l=void 0;for(a=0;a<=r;a++)l=2*a*Math.PI/r-Math.PI/2+this.angle_,s=a%2==0?this.radius_:o,e.lineTo(t.size/2+s*Math.cos(l),t.size/2+s*Math.sin(l))}e.fillStyle="#000",e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.stroke()),e.closePath()},e}($u),ec=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ic=function(t){function e(e){var i=e||{};return t.call(this,{points:1/0,fill:i.fill,radius:i.radius,stroke:i.stroke,displacement:void 0!==i.displacement?i.displacement:[0,0]})||this}return ec(e,t),e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),displacement:this.getDisplacement().slice()});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.setRadius=function(t){this.radius_=t,this.render()},e}(tc),nc=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0})},t.prototype.getColor=function(){return this.color_},t.prototype.setColor=function(t){this.color_=t},t}(),rc="fraction",oc="pixels",ac=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),sc=function(t){function e(e,i,n,r){var o=t.call(this)||this;return o.extent=e,o.pixelRatio_=n,o.resolution=i,o.state=r,o}return ac(e,t),e.prototype.changed=function(){this.dispatchEvent(ha)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return n()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){n()},e}(la),lc=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),hc=function(t){function e(e,i,n,r,o,a){var s=t.call(this,e,i,n,tu)||this;return s.src_=r,s.image_=new Image,null!==o&&(s.image_.crossOrigin=o),s.unlisten_=null,s.state=tu,s.imageLoadFunction_=a,s}return lc(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=iu,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=V(this.extent)/this.image_.height),this.state=eu,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state!=tu&&this.state!=iu||(this.state=1,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=bn(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.setImage=function(t){this.image_=t},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(sc),uc=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),cc=function(t){function e(e,i,n,r,o,a){var s=t.call(this)||this;return s.hitDetectionImage_=null,s.image_=e||new Image,null!==r&&(s.image_.crossOrigin=r),s.canvas_=a?document.createElement("canvas"):null,s.color_=a,s.unlisten_=null,s.imageState_=o,s.size_=n,s.src_=i,s}return uc(e,t),e.prototype.isTainted_=function(t){if(void 0===this.tainted_&&this.imageState_===eu){t||(t=Qe(1,1)).drawImage(this.image_,0,0);try{t.getImageData(0,0,1,1),this.tainted_=!1}catch(t){this.tainted_=!0}}return!0===this.tainted_},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(ha)},e.prototype.handleImageError_=function(){this.imageState_=iu,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=eu,this.size_&&(this.image_.width=this.size_[0],this.image_.height=this.size_[1]),this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.replaceColor_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.canvas_?this.canvas_:this.image_},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(t){if(!this.hitDetectionImage_)if(this.isTainted_()){var e=this.size_[0],i=this.size_[1],n=Qe(e,i);n.fillRect(0,0,e,i),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(this.imageState_==tu){this.imageState_=1;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=bn(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},e.prototype.replaceColor_=function(){if(this.color_){this.canvas_.width=this.image_.width,this.canvas_.height=this.image_.height;var t=this.canvas_.getContext("2d");if(t.drawImage(this.image_,0,0),this.isTainted_(t)){var e=this.color_;return t.globalCompositeOperation="multiply",t.fillStyle="rgb("+e[0]+","+e[1]+","+e[2]+")",t.fillRect(0,0,this.image_.width,this.image_.height),t.globalCompositeOperation="destination-in",void t.drawImage(this.image_,0,0)}for(var i=t.getImageData(0,0,this.image_.width,this.image_.height),n=i.data,r=this.color_[0]/255,o=this.color_[1]/255,a=this.color_[2]/255,s=0,l=n.length;s<l;s+=4)n[s]*=r,n[s+1]*=o,n[s+2]*=a;t.putImageData(i,0,0)}},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(la),pc="bottom-left",dc="bottom-right",fc="top-left",gc=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),vc=function(t){function e(e){var i=this,n=e||{};(i=t.call(this,{opacity:void 0!==n.opacity?n.opacity:1,rotation:void 0!==n.rotation?n.rotation:0,scale:void 0!==n.scale?n.scale:1,displacement:void 0!==n.displacement?n.displacement:[0,0],rotateWithView:void 0!==n.rotateWithView&&n.rotateWithView})||this).anchor_=void 0!==n.anchor?n.anchor:[.5,.5],i.normalizedAnchor_=null,i.anchorOrigin_=void 0!==n.anchorOrigin?n.anchorOrigin:fc,i.anchorXUnits_=void 0!==n.anchorXUnits?n.anchorXUnits:rc,i.anchorYUnits_=void 0!==n.anchorYUnits?n.anchorYUnits:rc,i.crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:null;var o=void 0!==n.img?n.img:null,a=void 0!==n.imgSize?n.imgSize:null,s=n.src;S(!(void 0!==s&&o),4),S(!o||o&&a,5),void 0!==s&&0!==s.length||!o||(s=o.src||r(o)),S(void 0!==s&&s.length>0,6);var l=void 0!==n.src?tu:eu;return i.color_=void 0!==n.color?yi(n.color):null,i.iconImage_=function(t,e,i,n,r,o){var a=Dh.get(e,n,o);return a||(a=new cc(t,e,i,n,r,o),Dh.set(e,n,o,a)),a}(o,s,a,i.crossOrigin_,l,i.color_),i.offset_=void 0!==n.offset?n.offset:[0,0],i.offsetOrigin_=void 0!==n.offsetOrigin?n.offsetOrigin:fc,i.origin_=null,i.size_=void 0!==n.size?n.size:null,i}return gc(e,t),e.prototype.clone=function(){return new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},e.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,e=this.getSize();if(this.anchorXUnits_==rc||this.anchorYUnits_==rc){if(!e)return null;t=this.anchor_.slice(),this.anchorXUnits_==rc&&(t[0]*=e[0]),this.anchorYUnits_==rc&&(t[1]*=e[1])}if(this.anchorOrigin_!=fc){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),"top-right"!=this.anchorOrigin_&&this.anchorOrigin_!=dc||(t[0]=-t[0]+e[0]),this.anchorOrigin_!=pc&&this.anchorOrigin_!=dc||(t[1]=-t[1]+e[1])}return this.normalizedAnchor_=t,this.normalizedAnchor_},e.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},e.prototype.getColor=function(){return this.color_},e.prototype.getImage=function(t){return this.iconImage_.getImage(t)},e.prototype.getImageSize=function(){return this.iconImage_.getSize()},e.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},e.prototype.getImageState=function(){return this.iconImage_.getImageState()},e.prototype.getHitDetectionImage=function(t){return this.iconImage_.getHitDetectionImage(t)},e.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_,e=this.getDisplacement();if(this.offsetOrigin_!=fc){var i=this.getSize(),n=this.iconImage_.getSize();if(!i||!n)return null;t=t.slice(),"top-right"!=this.offsetOrigin_&&this.offsetOrigin_!=dc||(t[0]=n[0]-i[0]-t[0]),this.offsetOrigin_!=pc&&this.offsetOrigin_!=dc||(t[1]=n[1]-i[1]-t[1])}return t[0]+=e[0],t[1]+=e[1],this.origin_=t,this.origin_},e.prototype.getSrc=function(){return this.iconImage_.getSrc()},e.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},e.prototype.listenImageChange=function(t){this.iconImage_.addEventListener(ha,t)},e.prototype.load=function(){this.iconImage_.load()},e.prototype.unlistenImageChange=function(t){this.iconImage_.removeEventListener(ha,t)},e}($u),yc=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},t.prototype.getColor=function(){return this.color_},t.prototype.getLineCap=function(){return this.lineCap_},t.prototype.getLineDash=function(){return this.lineDash_},t.prototype.getLineDashOffset=function(){return this.lineDashOffset_},t.prototype.getLineJoin=function(){return this.lineJoin_},t.prototype.getMiterLimit=function(){return this.miterLimit_},t.prototype.getWidth=function(){return this.width_},t.prototype.setColor=function(t){this.color_=t},t.prototype.setLineCap=function(t){this.lineCap_=t},t.prototype.setLineDash=function(t){this.lineDash_=t},t.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t},t.prototype.setLineJoin=function(t){this.lineJoin_=t},t.prototype.setMiterLimit=function(t){this.miterLimit_=t},t.prototype.setWidth=function(t){this.width_=t},t}(),mc=function(){function t(t){var e=t||{};this.geometry_=null,this.geometryFunction_=Cn,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex}return t.prototype.clone=function(){var e=this.getGeometry();return e&&"object"==typeof e&&(e=e.clone()),new t({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},t.prototype.getRenderer=function(){return this.renderer_},t.prototype.setRenderer=function(t){this.renderer_=t},t.prototype.getGeometry=function(){return this.geometry_},t.prototype.getGeometryFunction=function(){return this.geometryFunction_},t.prototype.getFill=function(){return this.fill_},t.prototype.setFill=function(t){this.fill_=t},t.prototype.getImage=function(){return this.image_},t.prototype.setImage=function(t){this.image_=t},t.prototype.getStroke=function(){return this.stroke_},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.getText=function(){return this.text_},t.prototype.setText=function(t){this.text_=t},t.prototype.getZIndex=function(){return this.zIndex_},t.prototype.setGeometry=function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=Cn,this.geometry_=t},t.prototype.setZIndex=function(t){this.zIndex_=t},t}(),_c=null,xc=mc,bc="point",wc=function(){function t(t){var e=t||{};this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.text_=e.text,this.textAlign_=e.textAlign,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new nc({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:bc,this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding}return t.prototype.clone=function(){return new t({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:this.getScale(),text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()})},t.prototype.getOverflow=function(){return this.overflow_},t.prototype.getFont=function(){return this.font_},t.prototype.getMaxAngle=function(){return this.maxAngle_},t.prototype.getPlacement=function(){return this.placement_},t.prototype.getOffsetX=function(){return this.offsetX_},t.prototype.getOffsetY=function(){return this.offsetY_},t.prototype.getFill=function(){return this.fill_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getStroke=function(){return this.stroke_},t.prototype.getText=function(){return this.text_},t.prototype.getTextAlign=function(){return this.textAlign_},t.prototype.getTextBaseline=function(){return this.textBaseline_},t.prototype.getBackgroundFill=function(){return this.backgroundFill_},t.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},t.prototype.getPadding=function(){return this.padding_},t.prototype.setOverflow=function(t){this.overflow_=t},t.prototype.setFont=function(t){this.font_=t},t.prototype.setMaxAngle=function(t){this.maxAngle_=t},t.prototype.setOffsetX=function(t){this.offsetX_=t},t.prototype.setOffsetY=function(t){this.offsetY_=t},t.prototype.setPlacement=function(t){this.placement_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setFill=function(t){this.fill_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.setText=function(t){this.text_=t},t.prototype.setTextAlign=function(t){this.textAlign_=t},t.prototype.setTextBaseline=function(t){this.textBaseline_=t},t.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},t.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},t.prototype.setPadding=function(t){this.padding_=t},t}(),Sc=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Cc=function(t){function e(e,i,n){var r=t.call(this)||this,o=n||{};return r.tileCoord=e,r.state=i,r.interimTile=null,r.hifi=!0,r.key="",r.transition_=void 0===o.transition?250:o.transition,r.transitionStarts_={},r}return Sc(e,t),e.prototype.changed=function(){this.dispatchEvent(ha)},e.prototype.release=function(){},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==ol)return this.transition_=0,t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(t.getState()==ol){t.interimTile=null;break}1==t.getState()?e=t:t.getState()==rl?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){if(3!==this.state&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},e.prototype.load=function(){n()},e.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var i=this.transitionStarts_[t];if(i){if(-1===i)return 1}else i=e,this.transitionStarts_[t]=i;var n=e-i+1e3/60;return n>=this.transition_?1:He(n/this.transition_)},e.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(la),Ec=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Tc=function(t){function e(e,i,n,r,o,a){var s=t.call(this,e,i,a)||this;return s.crossOrigin_=r,s.src_=n,s.image_=new Image,null!==r&&(s.image_.crossOrigin=r),s.unlisten_=null,s.tileLoadFunction_=o,s}return Ec(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.getKey=function(){return this.src_},e.prototype.handleImageError_=function(){var t;this.state=3,this.unlistenImage_(),this.image_=((t=Qe(1,1)).fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;this.state=t.naturalWidth&&t.naturalHeight?ol:al,this.unlistenImage_(),this.changed()},e.prototype.load=function(){3==this.state&&(this.state=rl,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==rl&&(this.state=1,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=bn(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(Cc),Pc=function(){function t(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark},t.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},t.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},t.prototype.forEach=function(t){for(var e=this.oldest_;e;)t(e.value_,e.key_,this),e=e.newer},t.prototype.get=function(t,e){var i=this.entries_[t];return S(void 0!==i,15),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_},t.prototype.remove=function(t){var e=this.entries_[t];return S(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},t.prototype.getCount=function(){return this.count_},t.prototype.getKeys=function(){var t,e=new Array(this.count_),i=0;for(t=this.newest_;t;t=t.older)e[i++]=t.key_;return e},t.prototype.getValues=function(){var t,e=new Array(this.count_),i=0;for(t=this.newest_;t;t=t.older)e[i++]=t.value_;return e},t.prototype.peekLast=function(){return this.oldest_.value_},t.prototype.peekLastKey=function(){return this.oldest_.key_},t.prototype.peekFirstKey=function(){return this.newest_.key_},t.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},t.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},t.prototype.set=function(t,e){S(!(t in this.entries_),16);var i={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_},t.prototype.setSize=function(t){this.highWaterMark=t},t}(),Lc=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ic=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Lc(e,t),e.prototype.expireCache=function(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()},e.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=Yi(this.peekFirstKey())[0];this.forEach((function(e){e.tileCoord[0]!==t&&(this.remove(Bi(e.tileCoord)),e.release())}).bind(this))}},e}(Pc),Oc=function(){function t(t,e,i,n,r,o){this.sourceProj_=t,this.targetProj_=e;var a={},s=It(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return a[e]||(a[e]=s(t)),a[e]},this.maxSourceExtent_=n,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&K(n)==K(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?K(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?K(this.targetProj_.getExtent()):null;var l=q(i),h=Z(i),u=X(i),c=Y(i),p=this.transformInv_(l),d=this.transformInv_(h),f=this.transformInv_(u),g=this.transformInv_(c),v=10+(o?Math.max(0,Math.ceil(Math.log2(B(i)/(o*o*256*256)))):0);if(this.addQuad_(l,h,u,c,p,d,f,g,v),this.wrapsXInSource_){var y=1/0;this.triangles_.forEach(function(t,e,i){y=Math.min(y,t.source[0][0],t.source[1][0],t.source[2][0])}),this.triangles_.forEach((function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-y>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-y>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-y>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-y>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var i=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-i<this.sourceWorldWidth_/2&&(t.source=e)}}).bind(this))}a={}}return t.prototype.addTriangle_=function(t,e,i,n,r,o){this.triangles_.push({source:[n,r,o],target:[t,e,i]})},t.prototype.addQuad_=function(t,e,i,n,r,o,a,s,l){var h=C([r,o,a,s]),u=this.sourceWorldWidth_?K(h)/this.sourceWorldWidth_:null,c=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&u>.5&&u<1,d=!1;if(l>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(d=K(C([t,e,i,n]))/this.targetWorldWidth_>.25||d),!p&&this.sourceProj_.isGlobal()&&u&&(d=u>.25||d)),d||!this.maxSourceExtent_||J(h,this.maxSourceExtent_)){if(!(d||isFinite(r[0])&&isFinite(r[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(s[0])&&isFinite(s[1]))){if(!(l>0))return;d=!0}if(l>0){if(!d){var f=this.transformInv_([(t[0]+i[0])/2,(t[1]+i[1])/2]),g=void 0;g=p?(ut(r[0],c)+ut(a[0],c))/2-ut(f[0],c):(r[0]+a[0])/2-f[0];var v=(r[1]+a[1])/2-f[1];d=g*g+v*v>this.errorThresholdSquared_}if(d){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){var y=[(e[0]+i[0])/2,(e[1]+i[1])/2],m=this.transformInv_(y),_=[(n[0]+t[0])/2,(n[1]+t[1])/2],x=this.transformInv_(_);this.addQuad_(t,e,y,_,r,o,m,x,l-1),this.addQuad_(_,y,i,n,x,m,a,s,l-1)}else{var b=[(t[0]+e[0])/2,(t[1]+e[1])/2],w=this.transformInv_(b),S=[(i[0]+n[0])/2,(i[1]+n[1])/2],E=this.transformInv_(S);this.addQuad_(t,b,S,n,r,w,E,s,l-1),this.addQuad_(b,e,i,S,w,o,a,E,l-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}this.addTriangle_(t,i,n,r,a,s),this.addTriangle_(t,e,i,r,o,a)}},t.prototype.calculateSourceExtent=function(){var t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach(function(e,i,n){var r=e.source;j(t,r[0]),j(t,r[1]),j(t,r[2])}),t},t.prototype.getTriangles=function(){return this.triangles_},t}(),Ac=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Rc=function(t){function e(e,i,n,r,o,a,s,l,h,u,c){var p=t.call(this,o,rl)||this;p.renderEdges_=void 0!==c&&c,p.pixelRatio_=s,p.gutter_=l,p.canvas_=null,p.sourceTileGrid_=i,p.targetTileGrid_=r,p.wrappedTileCoord_=a||o,p.sourceTiles_=[],p.sourcesListenerKeys_=null,p.sourceZ_=0;var d=r.getTileCoordExtent(p.wrappedTileCoord_),f=p.targetTileGrid_.getExtent(),g=p.sourceTileGrid_.getExtent(),v=f?H(d,f):d;if(0===B(v))return p.state=al,p;var y=e.getExtent();y&&(g=g?H(g,y):y);var m=r.getResolution(p.wrappedTileCoord_[0]),_=An(e,n,W(v),m);if(!isFinite(_)||_<=0)return p.state=al,p;if(p.triangulation_=new Oc(e,n,v,g,_*(void 0!==u?u:.5),m),0===p.triangulation_.getTriangles().length)return p.state=al,p;p.sourceZ_=i.getZForResolution(_);var x=p.triangulation_.calculateSourceExtent();if(g&&(e.canWrapX()?(x[1]=ot(x[1],g[1],g[3]),x[3]=ot(x[3],g[1],g[3])):x=H(x,g)),B(x)){for(var b=i.getTileRangeForExtentAndZ(x,p.sourceZ_),w=b.minX;w<=b.maxX;w++)for(var S=b.minY;S<=b.maxY;S++){var C=h(p.sourceZ_,w,S,s);C&&p.sourceTiles_.push(C)}0===p.sourceTiles_.length&&(p.state=al)}else p.state=al;return p}return Ac(e,t),e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach((function(e,i,n){e&&e.getState()==ol&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}).bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=3;else{var e=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(e),n="number"==typeof i?i:i[0],r="number"==typeof i?i:i[1],o=this.targetTileGrid_.getResolution(e),a=this.sourceTileGrid_.getResolution(this.sourceZ_),s=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Mn(n,r,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,s,this.triangulation_,t,this.gutter_,this.renderEdges_),this.state=ol}this.changed()},e.prototype.load=function(){if(this.state==rl){this.state=1,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach((function(e,i,n){var r=e.getState();if(r==rl||1==r){t++;var o=s(e,ha,function(i){var n=e.getState();n!=ol&&3!=n&&n!=al||(h(o),0==--t&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(o)}}).bind(this)),this.sourceTiles_.forEach(function(t,e,i){t.getState()==rl&&t.load()}),0===t&&setTimeout(this.reproject_.bind(this),0)}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(h),this.sourcesListenerKeys_=null},e}(Cc),Mc=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Fc=function(t){function e(e){var i=t.call(this)||this;return i.projection_=bt(e.projection),i.attributions_=Fn(e.attributions),i.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,i.loading=!1,i.state_=void 0!==e.state?e.state:Sl,i.wrapX_=void 0!==e.wrapX&&e.wrapX,i}return Mc(e,t),e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolutions=function(){return n()},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=Fn(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(Sa),kc=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Nc=function(t){function e(e){var i=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX})||this;i.opaque_=void 0!==e.opaque&&e.opaque,i.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,i.tileGrid=void 0!==e.tileGrid?e.tileGrid:null;var n=[256,256],r=e.tileGrid;r&&oi(r.getTileSize(r.getMinZoom()),n);var o="undefined"!=typeof screen,a=o?screen.availWidth||screen.width:1920,s=o?screen.availHeight||screen.height:1080,l=4*Math.ceil(a/n[0])*Math.ceil(s/n[1]);return i.tileCache=new Ic(Math.max(l,e.cacheSize||0)),i.tmpSize=[0,0],i.key_=e.key||"",i.tileOptions={transition:e.transition},i.zDirection=e.zDirection?e.zDirection:0,i}return kc(e,t),e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,e){var i=this.getTileCacheForProjection(t);i&&i.expireCache(e)},e.prototype.forEachLoadedTile=function(t,e,i,n){var r=this.getTileCacheForProjection(t);if(!r)return!1;for(var o,a,s,l=!0,h=i.minX;h<=i.maxX;++h)for(var u=i.minY;u<=i.maxY;++u)a=zi(e,h,u),s=!1,r.containsKey(a)&&(s=(o=r.get(a)).getState()===ol)&&(s=!1!==n(o)),s||(l=!1);return l},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},e.prototype.getTile=function(t,e,i,r,o){return n()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:Wi(t)},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();return e&&!Pt(e,t)?null:this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,e,i){var n=this.getTileGridForProjection(i),r=this.getTilePixelRatio(e),o=oi(n.getTileSize(t),this.tmpSize);return 1==r?o:ri(o,r,this.tmpSize)},e.prototype.getTileCoordForTileUrlFunction=function(t,e){var i=void 0!==e?e:this.getProjection(),n=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(t=function(t,e,i){var n=e[0],r=t.getTileCoordCenter(e),o=qi(i);if(L(o,r))return e;var a=K(o),s=Math.ceil((o[0]-r[0])/a);return r[0]+=a*s,t.getTileCoordForCoordAndZ(r,n)}(n,t,i)),function(e,i){var n=t[0],r=t[1],o=t[2];if(i.getMinZoom()>n||n>i.getMaxZoom())return!1;var a,s=i.getExtent();return!(a=s?i.getTileRangeForExtentAndZ(s,n):i.getFullTileRange(n))||a.containsXY(r,o)}(0,n)?t:null},e.prototype.clear=function(){this.tileCache.clear()},e.prototype.refresh=function(){this.clear(),t.prototype.refresh.call(this)},e.prototype.useTile=function(t,e,i,n){},e}(Fc),Dc=function(t){function e(e,i){var n=t.call(this,e)||this;return n.tile=i,n}return kc(e,t),e}(aa),jc=Nc,Gc=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),zc=function(t){function e(e){var i=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return i.generateTileUrlFunction_=!e.tileUrlFunction,i.tileLoadFunction=e.tileLoadFunction,i.tileUrlFunction=e.tileUrlFunction?e.tileUrlFunction.bind(i):Ln,i.urls=null,e.urls?i.setUrls(e.urls):e.url&&i.setUrl(e.url),i.tileLoadingKeys_={},i}return Gc(e,t),e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var e,i=t.target,n=r(i),o=i.getState();1==o?(this.tileLoadingKeys_[n]=!0,e="tileloadstart"):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],e=3==o?"tileloaderror":o==ol?"tileloadend":void 0),null!=e&&this.dispatchEvent(new Dc(e,i))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},e.prototype.setUrl=function(t){var e=In(t);this.urls=e,this.setUrls(e)},e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(Tn(t,this.tileGrid),e):this.setKey(e)},e.prototype.useTile=function(t,e,i){var n=zi(t,e,i);this.tileCache.containsKey(n)&&this.tileCache.get(n)},e}(jc),Bc=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Yc=function(t){function e(e){var i=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:kn,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return i.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,i.tileClass=void 0!==e.tileClass?e.tileClass:Tc,i.tileCacheForProjection={},i.tileGridForProjection={},i.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,i.renderReprojectionEdges_=!1,i}return Bc(e,t),e.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},e.prototype.expireCache=function(t,e){var i=this.getTileCacheForProjection(t);for(var n in this.tileCache.expireCache(this.tileCache==i?e:{}),this.tileCacheForProjection){var r=this.tileCacheForProjection[n];r.expireCache(r==i?e:{})}},e.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!Pt(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getOpaque=function(e){return!(this.getProjection()&&e&&!Pt(this.getProjection(),e))&&t.prototype.getOpaque.call(this,e)},e.prototype.getTileGridForProjection=function(t){var e=this.getProjection();if(!this.tileGrid||e&&!Pt(e,t)){var i=r(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=Wi(t)),this.tileGridForProjection[i]}return this.tileGrid},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();if(!e||Pt(e,t))return this.tileCache;var i=r(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new Ic(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]},e.prototype.createTile_=function(t,e,i,n,r,o){var a=[t,e,i],s=this.getTileCoordForTileUrlFunction(a,r),l=s?this.tileUrlFunction(s,n,r):void 0,h=new this.tileClass(a,void 0!==l?rl:al,void 0!==l?l:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return h.key=o,h.addEventListener(ha,this.handleTileChange.bind(this)),h},e.prototype.getTile=function(t,e,i,n,r){var o=this.getProjection();if(o&&r&&!Pt(o,r)){var a=this.getTileCacheForProjection(r),s=[t,e,i],l=void 0,h=Bi(s);a.containsKey(h)&&(l=a.get(h));var u=this.getKey();if(l&&l.key==u)return l;var c=this.getTileGridForProjection(o),p=this.getTileGridForProjection(r),d=this.getTileCoordForTileUrlFunction(s,r),f=new Rc(o,c,r,p,s,d,this.getTilePixelRatio(n),this.getGutter(),(function(t,e,i,n){return this.getTileInternal(t,e,i,n,o)}).bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);return f.key=u,l?(f.interimTile=l,f.refreshInterimChain(),a.replace(h,f)):a.set(h,f),f}return this.getTileInternal(t,e,i,n,o||r)},e.prototype.getTileInternal=function(t,e,i,n,r){var o=null,a=zi(t,e,i),s=this.getKey();if(this.tileCache.containsKey(a)){if((o=this.tileCache.get(a)).key!=s){var l=o;(o=this.createTile_(t,e,i,n,r,s)).interimTile=l.getState()==rl?l.interimTile:l,o.refreshInterimChain(),this.tileCache.replace(a,o)}}else o=this.createTile_(t,e,i,n,r,s),this.tileCache.set(a,o);return o},e.prototype.setRenderReprojectionEdges=function(t){if(this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,e){var i=bt(t);if(i){var n=r(i);n in this.tileGridForProjection||(this.tileGridForProjection[n]=e)}},e}(zc),Xc=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Wc=function(t){function e(e){var i=this,n=void 0!==e.hidpi&&e.hidpi;return(i=t.call(this,{cacheSize:e.cacheSize,crossOrigin:"anonymous",opaque:!0,projection:bt("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:wl,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:n?2:1,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition})||this).hidpi_=n,i.culture_=void 0!==e.culture?e.culture:"en-us",i.maxZoom_=void 0!==e.maxZoom?e.maxZoom:-1,i.apiKey_=e.key,i.imagerySet_=e.imagerySet,On("https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+i.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+i.apiKey_+"&c="+i.culture_,i.handleImageryMetadataResponse.bind(i),void 0,"jsonp"),i}return Xc(e,t),e.prototype.getApiKey=function(){return this.apiKey_},e.prototype.getImagerySet=function(){return this.imagerySet_},e.prototype.handleImageryMetadataResponse=function(t){if(200==t.statusCode&&"OK"==t.statusDescription&&"ValidCredentials"==t.authenticationResultCode&&1==t.resourceSets.length&&1==t.resourceSets[0].resources.length){var e=t.resourceSets[0].resources[0],i=-1==this.maxZoom_?e.zoomMax:this.maxZoom_,n=qi(this.getProjection()),r=this.hidpi_?2:1,o=Ui({extent:n,minZoom:e.zoomMin,maxZoom:i,tileSize:e.imageWidth==e.imageHeight?e.imageWidth/r:[e.imageWidth/r,e.imageHeight/r]});this.tileGrid=o;var a=this.culture_,s=this.hidpi_;if(this.tileUrlFunction=Pn(e.imageUrlSubdomains.map(function(t){var i=[0,0,0],n=e.imageUrl.replace("{subdomain}",t).replace("{culture}",a);return function(t,e,r){if(t){Gi(t[0],t[1],t[2],i);var o=n;return s&&(o+="&dpi=d1&device=mobile"),o.replace("{quadkey}",function(t){var e,i,n=t[0],r=new Array(n),o=1<<n-1;for(e=0;e<n;++e)i=48,t[1]&o&&(i+=1),t[2]&o&&(i+=2),r[e]=String.fromCharCode(i),o>>=1;return r.join("")}(i))}}})),e.imageryProviders){var l=Lt(bt("EPSG:4326"),this.getProjection());this.setAttributions((function(t){var i=[],n=t.viewState,r=this.getTileGrid(),o=r.getZForResolution(n.resolution,this.zDirection),a=r.getTileCoordForCoordAndZ(n.center,o)[0];return e.imageryProviders.map(function(e){for(var n=!1,r=e.coverageAreas,o=0,s=r.length;o<s;++o){var h=r[o];if(a>=h.zoomMin&&a<=h.zoomMax){var u=h.bbox;if(J(tt([u[1],u[0],u[3],u[2]],l),t.extent)){n=!0;break}}}n&&i.push(e.attribution)}),i.push('<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html" target="_blank">Terms of Use</a>'),i}).bind(this))}this.setState(Sl)}else this.setState("error")},e}(Yc),Uc=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Vc=function(t){function e(e){var i=e||{},n=void 0!==i.projection?i.projection:"EPSG:3857",r=void 0!==i.tileGrid?i.tileGrid:Ui({extent:qi(n),maxResolution:i.maxResolution,maxZoom:i.maxZoom,minZoom:i.minZoom,tileSize:i.tileSize});return t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,opaque:i.opaque,projection:n,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileGrid:r,tileLoadFunction:i.tileLoadFunction,tilePixelRatio:i.tilePixelRatio,tileUrlFunction:i.tileUrlFunction,url:i.url,urls:i.urls,wrapX:void 0===i.wrapX||i.wrapX,transition:i.transition,attributionsCollapsible:i.attributionsCollapsible,zDirection:i.zDirection})||this}return Uc(e,t),e}(Yc),Hc=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),qc=function(t){function e(e){var i=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,maxZoom:void 0!==e.maxZoom?e.maxZoom:18,minZoom:e.minZoom,projection:e.projection,wrapX:e.wrapX})||this;return i.account_=e.account,i.mapId_=e.map||"",i.config_=e.config||{},i.templateCache_={},i.initializeMap_(),i}return Hc(e,t),e.prototype.getConfig=function(){return this.config_},e.prototype.updateConfig=function(t){na(this.config_,t),this.initializeMap_()},e.prototype.setConfig=function(t){this.config_=t||{},this.initializeMap_()},e.prototype.initializeMap_=function(){var t=JSON.stringify(this.config_);if(this.templateCache_[t])this.applyTemplate_(this.templateCache_[t]);else{var e="https://"+this.account_+".carto.com/api/v1/map";this.mapId_&&(e+="/named/"+this.mapId_);var i=new XMLHttpRequest;i.addEventListener("load",this.handleInitResponse_.bind(this,t)),i.addEventListener("error",this.handleInitError_.bind(this)),i.open("POST",e),i.setRequestHeader("Content-type","application/json"),i.send(JSON.stringify(this.config_))}},e.prototype.handleInitResponse_=function(t,e){var i=e.target;if(!i.status||i.status>=200&&i.status<300){var n=void 0;try{n=JSON.parse(i.responseText)}catch(t){return void this.setState("error")}this.applyTemplate_(n),this.templateCache_[t]=n,this.setState(Sl)}else this.setState("error")},e.prototype.handleInitError_=function(t){this.setState("error")},e.prototype.applyTemplate_=function(t){this.setUrl("https://"+t.cdn_url.https+"/"+this.account_+"/api/v1/map/"+t.layergroupid+"/{z}/{x}/{y}.png")},e}(Vc),Zc="addfeature",Kc="changefeature",Jc="clear",$c="removefeature",Qc=i(0),tp=i.n(Qc),ep=function(){function t(t){this.rbush_=new tp.a(t),this.items_={}}return t.prototype.insert=function(t,e){var i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[r(e)]=i},t.prototype.load=function(t,e){for(var i=new Array(e.length),n=0,o=e.length;n<o;n++){var a=t[n],s=e[n],l={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:s};i[n]=l,this.items_[r(s)]=l}this.rbush_.load(i)},t.prototype.remove=function(t){var e=r(t),i=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(i)},t.prototype.update=function(t,e){var i=this.items_[r(e)];N([i.minX,i.minY,i.maxX,i.maxY],t)||(this.remove(e),this.insert(t,e))},t.prototype.getAll=function(){return this.rbush_.all().map(function(t){return t.value})},t.prototype.getInExtent=function(t){return this.rbush_.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}).map(function(t){return t.value})},t.prototype.forEach=function(t){return this.forEach_(this.getAll(),t)},t.prototype.forEachInExtent=function(t,e){return this.forEach_(this.getInExtent(t),e)},t.prototype.forEach_=function(t,e){for(var i,n=0,r=t.length;n<r;n++)if(i=e(t[n]))return i;return i},t.prototype.isEmpty=function(){return a(this.items_)},t.prototype.clear=function(){this.rbush_.clear(),this.items_={}},t.prototype.getExtent=function(t){var e=this.rbush_.toJSON();return R(e.minX,e.minY,e.maxX,e.maxY,t)},t.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]},t}(),ip=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),np=function(t){function e(e,i){var n=t.call(this,e)||this;return n.feature=i,n}return ip(e,t),e}(aa),rp=function(t){function e(e){var i=this,n=e||{};(i=t.call(this,{attributions:n.attributions,projection:void 0,state:Sl,wrapX:void 0===n.wrapX||n.wrapX})||this).loader_=x,i.format_=n.format,i.overlaps_=void 0===n.overlaps||n.overlaps,i.url_=n.url,void 0!==n.loader?i.loader_=n.loader:void 0!==i.url_&&(S(i.format_,7),i.loader_=Ni(i.url_,i.format_)),i.strategy_=void 0!==n.strategy?n.strategy:Di;var r,o,a=void 0===n.useSpatialIndex||n.useSpatialIndex;return i.featuresRtree_=a?new ep:null,i.loadedExtentsRtree_=new ep,i.nullGeometryFeatures_={},i.idIndex_={},i.uidIndex_={},i.featureChangeKeys_={},i.featuresCollection_=null,Array.isArray(n.features)?o=n.features:n.features&&(o=(r=n.features).getArray()),a||void 0!==r||(r=new Ta(o)),void 0!==o&&i.addFeaturesInternal(o),void 0!==r&&i.bindFeaturesCollection_(r),i}return ip(e,t),e.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},e.prototype.addFeatureInternal=function(t){var e=r(t);if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var i=t.getGeometry();if(i){var n=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(n,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new np(Zc,t))}else this.featuresCollection_&&this.featuresCollection_.remove(t)},e.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[s(e,ha,this.handleFeatureChange_,this),s(e,ia,this.handleFeatureChange_,this)]},e.prototype.addToIndex_=function(t,e){var i=!0,n=e.getId();return void 0!==n&&(n.toString()in this.idIndex_?i=!1:this.idIndex_[n.toString()]=e),i&&(S(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),i},e.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},e.prototype.addFeaturesInternal=function(t){for(var e=[],i=[],n=[],o=0,a=t.length;o<a;o++){var s=r(h=t[o]);this.addToIndex_(s,h)&&i.push(h)}o=0;for(var l=i.length;o<l;o++){var h;s=r(h=i[o]),this.setupChangeEvents_(s,h);var u=h.getGeometry();if(u){var c=u.getExtent();e.push(c),n.push(h)}else this.nullGeometryFeatures_[s]=h}this.featuresRtree_&&this.featuresRtree_.load(e,n),o=0;for(var p=i.length;o<p;o++)this.dispatchEvent(new np(Zc,i[o]))},e.prototype.bindFeaturesCollection_=function(t){var e=!1;this.addEventListener(Zc,function(i){e||(e=!0,t.push(i.feature),e=!1)}),this.addEventListener($c,function(i){e||(e=!0,t.remove(i.feature),e=!1)}),t.addEventListener(ta,(function(t){e||(e=!0,this.addFeature(t.element),e=!1)}).bind(this)),t.addEventListener(ea,(function(t){e||(e=!0,this.removeFeature(t.element),e=!1)}).bind(this)),this.featuresCollection_=t},e.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_)this.featureChangeKeys_[e].forEach(h);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_)for(var i in this.featuresRtree_.forEach(this.removeFeatureInternal.bind(this)),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var n=new np(Jc);this.dispatchEvent(n),this.changed()},e.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},e.prototype.forEachFeatureAtCoordinateDirect=function(t,e){return this.forEachFeatureInExtent([t[0],t[1],t[0],t[1]],function(i){return i.getGeometry().intersectsCoordinate(t)?e(i):void 0})},e.prototype.forEachFeatureInExtent=function(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},e.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,function(i){if(i.getGeometry().intersectsExtent(t)){var n=e(i);if(n)return n}})},e.prototype.getFeaturesCollection=function(){return this.featuresCollection_},e.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray():this.featuresRtree_&&(t=this.featuresRtree_.getAll(),a(this.nullGeometryFeatures_)||f(t,ra(this.nullGeometryFeatures_))),t},e.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,function(t){e.push(t)}),e},e.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_?this.featuresRtree_.getInExtent(t):this.featuresCollection_?this.featuresCollection_.getArray():[]},e.prototype.getClosestFeatureToCoordinate=function(t,e){var i=t[0],n=t[1],r=null,o=[NaN,NaN],a=1/0,s=[-1/0,-1/0,1/0,1/0],l=e||m;return this.featuresRtree_.forEachInExtent(s,function(t){if(l(t)){var e=t.getGeometry(),h=a;if((a=e.closestPointXY(i,n,o,a))<h){r=t;var u=Math.sqrt(a);s[0]=i-u,s[1]=n-u,s[2]=i+u,s[3]=n+u}}}),r},e.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},e.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getFeatureByUid=function(t){var e=this.uidIndex_[t];return void 0!==e?e:null},e.prototype.getFormat=function(){return this.format_},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.getUrl=function(){return this.url_},e.prototype.handleFeatureChange_=function(t){var e=t.target,i=r(e),n=e.getGeometry();if(n){var o=n.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,e)):this.featuresRtree_&&this.featuresRtree_.update(o,e)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);var a=e.getId();if(void 0!==a){var s=a.toString();this.idIndex_[s]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[s]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[i]=e;this.changed(),this.dispatchEvent(new np(Kc,e))},e.prototype.hasFeature=function(t){var e=t.getId();return void 0!==e?e in this.idIndex_:r(t)in this.uidIndex_},e.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&a(this.nullGeometryFeatures_)},e.prototype.loadFeatures=function(t,e,i){var n=this.loadedExtentsRtree_,r=this.strategy_(t,e);this.loading=!1;for(var o=function(t,o){var s=r[t];n.forEachInExtent(s,function(t){return I(t.extent,s)})||(a.loader_.call(a,s,e,i),n.insert(s,{extent:s.slice()}),a.loading=a.loader_!==x)},a=this,s=0,l=r.length;s<l;++s)o(s)},e.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),t.prototype.refresh.call(this)},e.prototype.removeLoadedExtent=function(t){var e,i=this.loadedExtentsRtree_;i.forEachInExtent(t,function(i){if(N(i.extent,t))return e=i,!0}),e&&i.remove(e)},e.prototype.removeFeature=function(t){var e=r(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},e.prototype.removeFeatureInternal=function(t){var e=r(t);this.featureChangeKeys_[e].forEach(h),delete this.featureChangeKeys_[e];var i=t.getId();void 0!==i&&delete this.idIndex_[i.toString()],delete this.uidIndex_[e],this.dispatchEvent(new np($c,t))},e.prototype.removeFromIdIndex_=function(t){var e=!1;for(var i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}return e},e.prototype.setLoader=function(t){this.loader_=t},e.prototype.setUrl=function(t){S(this.format_,7),this.setLoader(Ni(t,this.format_))},e}(Fc),op=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ap=function(t){function e(e){var i=t.call(this,{attributions:e.attributions,wrapX:e.wrapX})||this;return i.resolution=void 0,i.distance=void 0!==e.distance?e.distance:20,i.features=[],i.geometryFunction=e.geometryFunction||function(t){var e=t.getGeometry();return S(e.getType()==Xa.POINT,10),e},i.boundRefresh_=i.refresh.bind(i),i.setSource(e.source||null),i}return op(e,t),e.prototype.clear=function(e){this.features.length=0,t.prototype.clear.call(this,e)},e.prototype.getDistance=function(){return this.distance},e.prototype.getSource=function(){return this.source},e.prototype.loadFeatures=function(t,e,i){this.source.loadFeatures(t,e,i),e!==this.resolution&&(this.clear(),this.resolution=e,this.cluster(),this.addFeatures(this.features))},e.prototype.setDistance=function(t){this.distance=t,this.refresh()},e.prototype.setSource=function(t){this.source&&this.source.removeEventListener(ha,this.boundRefresh_),this.source=t,t&&t.addEventListener(ha,this.boundRefresh_),this.refresh()},e.prototype.refresh=function(){this.clear(),this.cluster(),this.addFeatures(this.features)},e.prototype.cluster=function(){if(void 0!==this.resolution&&this.source)for(var t=[1/0,1/0,-1/0,-1/0],e=this.distance*this.resolution,i=this.source.getFeatures(),n={},o=0,a=i.length;o<a;o++){var s=i[o];if(!(r(s)in n)){var l=this.geometryFunction(s);if(l){F(l.getCoordinates(),t),E(t,e,t);var h=this.source.getFeaturesInExtent(t);h=h.filter(function(t){var e=r(t);return!(e in n||(n[e]=!0,0))}),this.features.push(this.createCluster(h))}}}},e.prototype.createCluster=function(t){for(var e=[0,0],i=t.length-1;i>=0;--i){var n=this.geometryFunction(t[i]);n?ke(e,n.getCoordinates()):t.splice(i,1)}Be(e,1/t.length);var r=new La(new Ss(e));return r.set("features",t),r},e}(rp),sp=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),lp="default",hp="truncated",up=function(t){function e(e,i,n,r,o,a,s){var l=t.call(this,i,n,r,o,a,s)||this;return l.zoomifyImage_=null,l.tileSize_=e,l}return sp(e,t),e.prototype.getImage=function(){if(this.zoomifyImage_)return this.zoomifyImage_;var e=t.prototype.getImage.call(this);if(this.state==ol){var i=this.tileSize_;if(e.width==i[0]&&e.height==i[1])return this.zoomifyImage_=e,e;var n=Qe(i[0],i[1]);return n.drawImage(e,0,0),this.zoomifyImage_=n.canvas,n.canvas}return e},e}(Tc),cp=function(t){function e(e){var i=this,n=e,r=n.size,o=n.tilePixelRatio||1,a=r[0],s=r[1],l=[],h=n.tileSize||256,u=h*o;switch(void 0!==n.tierSizeCalculation?n.tierSizeCalculation:lp){case lp:for(;a>u||s>u;)l.push([Math.ceil(a/u),Math.ceil(s/u)]),u+=u;break;case hp:for(var c=a,p=s;c>u||p>u;)l.push([Math.ceil(c/u),Math.ceil(p/u)]),c>>=1,p>>=1;break;default:S(!1,53)}l.push([1,1]),l.reverse();for(var d=[o],f=[0],g=1,v=l.length;g<v;g++)d.push(o<<g),f.push(l[g-1][0]*l[g-1][1]+f[g-1]);d.reverse();var y=new Ru({tileSize:h,extent:n.extent||[0,-s,a,0],resolutions:d}),m=n.url;m&&-1==m.indexOf("{TileGroup}")&&-1==m.indexOf("{tileIndex}")&&(m+="{TileGroup}/{z}-{x}-{y}.jpg");var _=In(m),x=h*o,b=Pn(_.map(function(t){return function(e,i,n){if(e){var r=e[0],o=e[1],a=e[2],s=o+a*l[r][0],h={z:r,x:o,y:a,tileIndex:s,TileGroup:"TileGroup"+((s+f[r])/x|0)};return t.replace(/\{(\w+?)\}/g,function(t,e){return h[e]})}}})),w=up.bind(null,oi(h*o));(i=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,projection:n.projection,tilePixelRatio:o,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileClass:w,tileGrid:y,tileUrlFunction:b,transition:n.transition})||this).zDirection=n.zDirection;var C=b(y.getTileCoordForCoordAndResolution(W(y.getExtent()),d[d.length-1]),1,null),E=new Image;return E.addEventListener("error",(function(){x=h,this.changed()}).bind(i)),E.src=C,i}return sp(e,t),e}(Yc),pp="version1",dp="version2",fp="version3",gp={};gp[pp]={level0:{supports:[],formats:[],qualities:["native"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["native"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["native","color","grey","bitonal"]}},gp[dp]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByDistortedWh","sizeByWh"],formats:["jpg","png"],qualities:["default","bitonal"]}},gp[fp]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","regionSquare","sizeByW","sizeByH","sizeByWh"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionSquare","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["default"]}},gp.none={none:{supports:[],formats:[],qualities:[]}};var vp=new RegExp("^https?://library.stanford.edu/iiif/image-api/(1.1/)?compliance.html#level[0-2]$"),yp=new RegExp("^https?://iiif.io/api/image/2/level[0-2](.json)?$"),mp=new RegExp("(^https?://iiif.io/api/image/3/level[0-2](.json)?$)|(^level[0-2]$)"),_p={};_p[pp]=function(t){var e=t.getComplianceLevelSupportedFeatures();return void 0===e&&(e=gp[pp].level0),{url:void 0===t.imageInfo["@id"]?void 0:t.imageInfo["@id"].replace(/\/?(info.json)?$/g,""),supports:e.supports,formats:e.formats.concat([void 0===t.imageInfo.formats?[]:t.imageInfo.formats]),qualities:e.qualities.concat([void 0===t.imageInfo.qualities?[]:t.imageInfo.qualities]),resolutions:t.imageInfo.scale_factors,tileSize:void 0!==t.imageInfo.tile_width?void 0!==t.imageInfo.tile_height?[t.imageInfo.tile_width,t.imageInfo.tile_height]:[t.imageInfo.tile_width,t.imageInfo.tile_width]:null!=t.imageInfo.tile_height?[t.imageInfo.tile_height,t.imageInfo.tile_height]:void 0}},_p[dp]=function(t){var e=t.getComplianceLevelSupportedFeatures(),i=Array.isArray(t.imageInfo.profile)&&t.imageInfo.profile.length>1,n=i&&t.imageInfo.profile[1].supports?t.imageInfo.profile[1].supports:[],r=i&&t.imageInfo.profile[1].formats?t.imageInfo.profile[1].formats:[],o=i&&t.imageInfo.profile[1].qualities?t.imageInfo.profile[1].qualities:[];return{url:t.imageInfo["@id"].replace(/\/?(info.json)?$/g,""),sizes:void 0===t.imageInfo.sizes?void 0:t.imageInfo.sizes.map(function(t){return[t.width,t.height]}),tileSize:void 0===t.imageInfo.tiles?void 0:[t.imageInfo.tiles.map(function(t){return t.width})[0],t.imageInfo.tiles.map(function(t){return void 0===t.height?t.width:t.height})[0]],resolutions:void 0===t.imageInfo.tiles?void 0:t.imageInfo.tiles.map(function(t){return t.scaleFactors})[0],supports:e.supports.concat(n),formats:e.formats.concat(r),qualities:e.qualities.concat(o)}},_p[fp]=function(t){var e=t.getComplianceLevelSupportedFeatures(),i=void 0===t.imageInfo.extraFormats?e.formats:e.formats.concat(t.imageInfo.extraFormats),n=void 0!==t.imageInfo.preferredFormats&&Array.isArray(t.imageInfo.preferredFormats)&&t.imageInfo.preferredFormats.length>0?t.imageInfo.preferredFormats.filter(function(t){return["jpg","png","gif"].includes(t)}).reduce(function(t,e){return void 0===t&&i.includes(e)?e:t},void 0):void 0;return{url:t.imageInfo.id,sizes:void 0===t.imageInfo.sizes?void 0:t.imageInfo.sizes.map(function(t){return[t.width,t.height]}),tileSize:void 0===t.imageInfo.tiles?void 0:[t.imageInfo.tiles.map(function(t){return t.width})[0],t.imageInfo.tiles.map(function(t){return t.height})[0]],resolutions:void 0===t.imageInfo.tiles?void 0:t.imageInfo.tiles.map(function(t){return t.scaleFactors})[0],supports:void 0===t.imageInfo.extraFeatures?e.supports:e.supports.concat(t.imageInfo.extraFeatures),formats:i,qualities:void 0===t.imageInfo.extraQualities?e.qualities:e.qualities.concat(t.imageInfo.extraQualities),preferredFormat:n}};var xp=function(){function t(t){this.setImageInfo(t)}return t.prototype.setImageInfo=function(t){this.imageInfo="string"==typeof t?JSON.parse(t):t},t.prototype.getImageApiVersion=function(){if(void 0!==this.imageInfo){var t=this.imageInfo["@context"]||"ol-no-context";"string"==typeof t&&(t=[t]);for(var e=0;e<t.length;e++)switch(t[e]){case"http://library.stanford.edu/iiif/image-api/1.1/context.json":case"http://iiif.io/api/image/1/context.json":return pp;case"http://iiif.io/api/image/2/context.json":return dp;case"http://iiif.io/api/image/3/context.json":return fp;case"ol-no-context":if(this.getComplianceLevelEntryFromProfile(pp)&&this.imageInfo.identifier)return pp}S(!1,61)}},t.prototype.getComplianceLevelEntryFromProfile=function(t){if(void 0!==this.imageInfo&&void 0!==this.imageInfo.profile)switch(void 0===t&&(t=this.getImageApiVersion()),t){case pp:if(vp.test(this.imageInfo.profile))return this.imageInfo.profile;break;case fp:if(mp.test(this.imageInfo.profile))return this.imageInfo.profile;break;case dp:if("string"==typeof this.imageInfo.profile&&yp.test(this.imageInfo.profile))return this.imageInfo.profile;if(Array.isArray(this.imageInfo.profile)&&this.imageInfo.profile.length>0&&"string"==typeof this.imageInfo.profile[0]&&yp.test(this.imageInfo.profile[0]))return this.imageInfo.profile[0]}},t.prototype.getComplianceLevelFromProfile=function(t){var e=this.getComplianceLevelEntryFromProfile(t);if(void 0!==e){var i=e.match(/level[0-2](\.json)?$/g);return Array.isArray(i)?i[0].replace(".json",""):void 0}},t.prototype.getComplianceLevelSupportedFeatures=function(){if(void 0!==this.imageInfo){var t=this.getImageApiVersion(),e=this.getComplianceLevelFromProfile(t);return void 0===e?gp.none.none:gp[t][e]}},t.prototype.getTileSourceOptions=function(t){var e=t||{},i=this.getImageApiVersion();if(void 0!==i){var n=void 0===i?void 0:_p[i](this);if(void 0!==n)return{url:n.url,version:i,size:[this.imageInfo.width,this.imageInfo.height],sizes:n.sizes,format:void 0!==e.format&&n.formats.includes(e.format)?e.format:void 0!==n.preferredFormat?n.preferredFormat:"jpg",supports:n.supports,quality:e.quality&&n.qualities.includes(e.quality)?e.quality:n.qualities.includes("native")?"native":"default",resolutions:Array.isArray(n.resolutions)?n.resolutions.sort(function(t,e){return e-t}):void 0,tileSize:n.tileSize}}},t}(),bp=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),wp=function(t){function e(e){var i=this,n=e||{},r=n.url||"";r+=r.lastIndexOf("/")===r.length-1||""===r?"":"/";var o=n.version||dp,a=n.sizes||[],s=n.size;S(null!=s&&Array.isArray(s)&&2==s.length&&!isNaN(s[0])&&s[0]>0&&!isNaN(s[1])&&s[1]>0,60);var l,h,u,c=s[0],p=s[1],d=n.tileSize,f=n.tilePixelRatio||1,g=n.format||"jpg",v=n.quality||(n.version==pp?"native":"default"),y=n.resolutions||[],m=n.supports||[],_=n.extent||[0,-p,c,0],x=null!=a&&Array.isArray(a)&&a.length>0,b=void 0!==d&&("number"==typeof d&&Number.isInteger(d)&&d>0||Array.isArray(d)&&d.length>0),w=null!=m&&Array.isArray(m)&&(m.includes("regionByPx")||m.includes("regionByPct"))&&(m.includes("sizeByWh")||m.includes("sizeByH")||m.includes("sizeByW")||m.includes("sizeByPct"));if(y.sort(function(t,e){return e-t}),b||w)if(null!=d&&("number"==typeof d&&Number.isInteger(d)&&d>0?(l=d,h=d):Array.isArray(d)&&d.length>0&&((1==d.length||null==d[1]&&Number.isInteger(d[0]))&&(l=d[0],h=d[0]),2==d.length&&(Number.isInteger(d[0])&&Number.isInteger(d[1])?(l=d[0],h=d[1]):null==d[0]&&Number.isInteger(d[1])&&(l=d[1],h=d[1])))),void 0!==l&&void 0!==h||(l=256,h=256),0==y.length)for(var C=u=Math.max(Math.ceil(Math.log(c/l)/Math.LN2),Math.ceil(Math.log(p/h)/Math.LN2));C>=0;C--)y.push(Math.pow(2,C));else{var E=Math.max.apply(Math,y);u=Math.round(Math.log(E)/Math.LN2)}else if(l=c,h=p,y=[],x){a.sort(function(t,e){return t[0]-e[0]}),u=-1;var T=[];for(C=0;C<a.length;C++){var P=c/a[C][0];y.length>0&&y[y.length-1]==P?T.push(C):(y.push(P),u++)}if(T.length>0)for(C=0;C<T.length;C++)a.splice(T[C]-C,1)}else y.push(1),a.push([c,p]),u=0;var L=new Ru({tileSize:[l,h],extent:_,origin:q(_),resolutions:y}),I=up.bind(null,oi(d||256).map(function(t){return t*f}));return(i=t.call(this,{attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,state:n.state,tileClass:I,tileGrid:L,tilePixelRatio:n.tilePixelRatio,tileUrlFunction:function(t,e,i){var n,s,d=t[0];if(!(d>u)){var f=t[1],_=t[2],S=y[d];if(!(void 0===f||void 0===_||void 0===S||f<0||Math.ceil(c/S/l)<=f||_<0||Math.ceil(p/S/h)<=_)){if(w||b){var C=f*l*S,E=_*h*S,T=l*S,P=h*S,L=l,I=h;C+T>c&&(T=c-C),E+P>p&&(P=p-E),C+l*S>c&&(L=Math.floor((c-C+S-1)/S)),E+h*S>p&&(I=Math.floor((p-E+S-1)/S)),0==C&&T==c&&0==E&&P==p?n="full":!w||m.includes("regionByPx")?n=C+","+E+","+T+","+P:m.includes("regionByPct")&&(n="pct:"+Nn(C/c*100)+","+Nn(E/p*100)+","+Nn(T/c*100)+","+Nn(P/p*100)),o!=fp||w&&!m.includes("sizeByWh")?!w||m.includes("sizeByW")?s=L+",":m.includes("sizeByH")?s=","+I:m.includes("sizeByWh")?s=L+","+I:m.includes("sizeByPct")&&(s="pct:"+Nn(100/S)):s=L+","+I}else if(n="full",x){var O=a[d][0],A=a[d][1];s=o==fp?O==c&&A==p?"max":O+","+A:O==c?"full":O+","}else s=o==fp?"max":"full";return r+n+"/"+s+"/0/"+v+"."+g}}},transition:n.transition})||this).zDirection=n.zDirection,i}return bp(e,t),e}(Yc),Sp=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Cp=function(t){function e(e,i,n,r,o,a){var s=this,l=e.getExtent(),h=i.getExtent(),u=h?H(n,h):n,c=An(e,i,W(u),r),p=new Oc(e,i,u,l,.5*c,r),d=a(p.calculateSourceExtent(),c,o),f=d?tu:nu,g=d?d.getPixelRatio():1;return(s=t.call(this,n,r,g,f)||this).targetProj_=i,s.maxSourceExtent_=l,s.triangulation_=p,s.targetResolution_=r,s.targetExtent_=n,s.sourceImage_=d,s.sourcePixelRatio_=g,s.canvas_=null,s.sourceListenerKey_=null,s}return Sp(e,t),e.prototype.disposeInternal=function(){1==this.state&&this.unlistenSource_(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.canvas_},e.prototype.getProjection=function(){return this.targetProj_},e.prototype.reproject_=function(){var t=this.sourceImage_.getState();if(t==eu){var e=K(this.targetExtent_)/this.targetResolution_,i=V(this.targetExtent_)/this.targetResolution_;this.canvas_=Mn(e,i,this.sourcePixelRatio_,this.sourceImage_.getResolution(),0,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0)}this.state=t,this.changed()},e.prototype.load=function(){if(this.state==tu){this.state=1,this.changed();var t=this.sourceImage_.getState();t==eu||t==iu?this.reproject_():(this.sourceListenerKey_=s(this.sourceImage_,ha,function(t){var e=this.sourceImage_.getState();e!=eu&&e!=iu||(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}},e.prototype.unlistenSource_=function(){h(this.sourceListenerKey_),this.sourceListenerKey_=null},e}(sc),Ep=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Tp=function(t){function e(e,i){var n=t.call(this,e)||this;return n.image=i,n}return Ep(e,t),e}(aa),Pp=function(t){function e(e){var i=t.call(this,{attributions:e.attributions,projection:e.projection,state:e.state})||this;return i.resolutions_=void 0!==e.resolutions?e.resolutions:null,i.reprojectedImage_=null,i.reprojectedRevision_=0,i}return Ep(e,t),e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.findNearestResolution=function(t){if(this.resolutions_){var e=p(this.resolutions_,t,0);t=this.resolutions_[e]}return t},e.prototype.getImage=function(t,e,i,n){var r=this.getProjection();if(r&&n&&!Pt(r,n)){if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Pt(this.reprojectedImage_.getProjection(),n)&&this.reprojectedImage_.getResolution()==e&&N(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new Cp(r,n,t,e,i,(function(t,e,i){return this.getImageInternal(t,e,i,r)}).bind(this)),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}return r&&(n=r),this.getImageInternal(t,e,i,n)},e.prototype.getImageInternal=function(t,e,i,r){return n()},e.prototype.handleImageChange=function(t){var e=t.target;switch(e.getState()){case 1:this.loading=!0,this.dispatchEvent(new Tp("imageloadstart",e));break;case eu:this.loading=!1,this.dispatchEvent(new Tp("imageloadend",e));break;case iu:this.loading=!1,this.dispatchEvent(new Tp("imageloaderror",e))}},e}(Fc),Lp=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ip=function(t){function e(e){var i=this,n=e||{};return(i=t.call(this,{attributions:n.attributions,projection:n.projection,resolutions:n.resolutions})||this).crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:null,i.hidpi_=void 0===n.hidpi||n.hidpi,i.url_=n.url,i.imageLoadFunction_=void 0!==n.imageLoadFunction?n.imageLoadFunction:Dn,i.params_=n.params||{},i.image_=null,i.imageSize_=[0,0],i.renderedRevision_=0,i.ratio_=void 0!==n.ratio?n.ratio:1.5,i}return Lp(e,t),e.prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function(t,e,i,n){if(void 0===this.url_)return null;e=this.findNearestResolution(e),i=this.hidpi_?i:1;var r=this.image_;if(r&&this.renderedRevision_==this.getRevision()&&r.getResolution()==e&&r.getPixelRatio()==i&&I(r.getExtent(),t))return r;var o={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};na(o,this.params_);var a=((t=t.slice())[0]+t[2])/2,s=(t[1]+t[3])/2;if(1!=this.ratio_){var l=this.ratio_*K(t)/2,h=this.ratio_*V(t)/2;t[0]=a-l,t[1]=s-h,t[2]=a+l,t[3]=s+h}var u=e/i,c=Math.ceil(K(t)/u),p=Math.ceil(V(t)/u);t[0]=a-u*c/2,t[2]=a+u*c/2,t[1]=s-u*p/2,t[3]=s+u*p/2,this.imageSize_[0]=c,this.imageSize_[1]=p;var d=this.getRequestUrl_(t,this.imageSize_,i,n,o);return this.image_=new hc(t,e,i,d,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener(ha,this.handleImageChange.bind(this)),this.image_},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.getRequestUrl_=function(t,e,i,n,r){var o=n.getCode().split(":").pop();r.SIZE=e[0]+","+e[1],r.BBOX=t.join(","),r.BBOXSR=o,r.IMAGESR=o,r.DPI=Math.round(90*i);var a=this.url_,s=a.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return s==a&&S(!1,50),jn(s,r)},e.prototype.getUrl=function(){return this.url_},e.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},e.prototype.updateParams=function(t){na(this.params_,t),this.image_=null,this.changed()},e}(Pp),Op=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ap=function(t){function e(e,i,n,r,o){var a=this;return(a=t.call(this,e,i,n,void 0!==o?tu:eu)||this).loader_=void 0!==o?o:null,a.canvas_=r,a.error_=null,a}return Op(e,t),e.prototype.getError=function(){return this.error_},e.prototype.handleLoad_=function(t){t?(this.error_=t,this.state=iu):this.state=eu,this.changed()},e.prototype.load=function(){this.state==tu&&(this.state=1,this.changed(),this.loader_(this.handleLoad_.bind(this)))},e.prototype.getImage=function(){return this.canvas_},e}(sc),Rp=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Mp=function(t){function e(e){var i=this,n=e||{};return(i=t.call(this,{attributions:n.attributions,projection:n.projection,resolutions:n.resolutions,state:n.state})||this).canvasFunction_=n.canvasFunction,i.canvas_=null,i.renderedRevision_=0,i.ratio_=void 0!==n.ratio?n.ratio:1.5,i}return Rp(e,t),e.prototype.getImageInternal=function(t,e,i,n){e=this.findNearestResolution(e);var r=this.canvas_;if(r&&this.renderedRevision_==this.getRevision()&&r.getResolution()==e&&r.getPixelRatio()==i&&I(r.getExtent(),t))return r;Q(t=t.slice(),this.ratio_);var o=[K(t)/e*i,V(t)/e*i],a=this.canvasFunction_.call(this,t,e,i,o,n);return a&&(r=new Ap(t,e,i,a)),this.canvas_=r,this.renderedRevision_=this.getRevision(),r},e}(Pp),Fp=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),kp=function(t){function e(e){var i=t.call(this,{projection:e.projection,resolutions:e.resolutions})||this;return i.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null,i.displayDpi_=void 0!==e.displayDpi?e.displayDpi:96,i.params_=e.params||{},i.url_=e.url,i.imageLoadFunction_=void 0!==e.imageLoadFunction?e.imageLoadFunction:Dn,i.hidpi_=void 0===e.hidpi||e.hidpi,i.metersPerUnit_=void 0!==e.metersPerUnit?e.metersPerUnit:1,i.ratio_=void 0!==e.ratio?e.ratio:1,i.useOverlay_=void 0!==e.useOverlay&&e.useOverlay,i.image_=null,i.renderedRevision_=0,i}return Fp(e,t),e.prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function(t,e,i,n){e=this.findNearestResolution(e),i=this.hidpi_?i:1;var r=this.image_;if(r&&this.renderedRevision_==this.getRevision()&&r.getResolution()==e&&r.getPixelRatio()==i&&I(r.getExtent(),t))return r;1!=this.ratio_&&Q(t=t.slice(),this.ratio_);var o=[K(t)/e*i,V(t)/e*i];if(void 0!==this.url_){var a=this.getUrl(this.url_,this.params_,t,o,n);(r=new hc(t,e,i,a,this.crossOrigin_,this.imageLoadFunction_)).addEventListener(ha,this.handleImageChange.bind(this))}else r=null;return this.image_=r,this.renderedRevision_=this.getRevision(),r},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.updateParams=function(t){na(this.params_,t),this.changed()},e.prototype.getUrl=function(t,e,i,n,r){var o=function(t,e,i,n){var r=K(t),o=V(t),a=e[0],s=e[1],l=.0254/n;return s*r>a*o?r*i/(a*l):o*i/(s*l)}(i,n,this.metersPerUnit_,this.displayDpi_),a=W(i),s={OPERATION:this.useOverlay_?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:this.displayDpi_,SETDISPLAYWIDTH:Math.round(n[0]),SETDISPLAYHEIGHT:Math.round(n[1]),SETVIEWSCALE:o,SETVIEWCENTERX:a[0],SETVIEWCENTERY:a[1]};return na(s,e),jn(t,s)},e.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e}(Pp),Np=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Dp=function(t){function e(e){var i=this,n=void 0!==e.crossOrigin?e.crossOrigin:null,r=void 0!==e.imageLoadFunction?e.imageLoadFunction:Dn;return(i=t.call(this,{attributions:e.attributions,projection:bt(e.projection)})||this).url_=e.url,i.imageExtent_=e.imageExtent,i.image_=new hc(i.imageExtent_,void 0,1,i.url_,n,r),i.imageSize_=e.imageSize?e.imageSize:null,i.image_.addEventListener(ha,i.handleImageChange.bind(i)),i}return Np(e,t),e.prototype.getImageExtent=function(){return this.imageExtent_},e.prototype.getImageInternal=function(t,e,i,n){return J(t,this.image_.getExtent())?this.image_:null},e.prototype.getUrl=function(){return this.url_},e.prototype.handleImageChange=function(e){if(this.image_.getState()==eu){var i=this.image_.getExtent(),n=this.image_.getImage(),r=void 0,o=void 0;this.imageSize_?(r=this.imageSize_[0],o=this.imageSize_[1]):(r=n.width,o=n.height);var a=V(i)/o,s=Math.ceil(K(i)/a);if(s!=r){var l=Qe(s,o),h=l.canvas;l.drawImage(n,0,0,r,o,0,0,h.width,h.height),this.image_.setImage(h)}}t.prototype.handleImageChange.call(this,e)},e}(Pp),jp=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Gp=[101,101],zp=function(t){function e(e){var i=this,n=e||{};return(i=t.call(this,{attributions:n.attributions,projection:n.projection,resolutions:n.resolutions})||this).crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:null,i.url_=n.url,i.imageLoadFunction_=void 0!==n.imageLoadFunction?n.imageLoadFunction:Dn,i.params_=n.params||{},i.v13_=!0,i.updateV13_(),i.serverType_=n.serverType,i.hidpi_=void 0===n.hidpi||n.hidpi,i.image_=null,i.imageSize_=[0,0],i.renderedRevision_=0,i.ratio_=void 0!==n.ratio?n.ratio:1.5,i}return jp(e,t),e.prototype.getFeatureInfoUrl=function(t,e,i,n){if(void 0!==this.url_){var r=bt(i),o=this.getProjection();o&&o!==r&&(e=An(o,r,t,e),t=Ot(t,r,o));var a=U(t,e,0,Gp),s={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};na(s,this.params_,n);var l=Math.floor((t[0]-a[0])/e),h=Math.floor((a[3]-t[1])/e);return s[this.v13_?"I":"X"]=l,s[this.v13_?"J":"Y"]=h,this.getRequestUrl_(a,Gp,1,o||r,s)}},e.prototype.getLegendUrl=function(t,e){if(void 0!==this.url_){var i={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===e||void 0===e.LAYER){var n=this.params_.LAYERS;if(Array.isArray(n)&&1!==n.length)return;i.LAYER=n}if(void 0!==t){var r=this.getProjection()?this.getProjection().getMetersPerUnit():1;i.SCALE=t*r*39.37*(25.4/.28)}return na(i,e),jn(this.url_,i)}},e.prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function(t,e,i,n){if(void 0===this.url_)return null;e=this.findNearestResolution(e),1==i||this.hidpi_&&void 0!==this.serverType_||(i=1);var r=e/i,o=W(t),a=U(o,r,0,[Math.ceil(K(t)/r),Math.ceil(V(t)/r)]),s=U(o,r,0,[Math.ceil(this.ratio_*K(t)/r),Math.ceil(this.ratio_*V(t)/r)]),l=this.image_;if(l&&this.renderedRevision_==this.getRevision()&&l.getResolution()==e&&l.getPixelRatio()==i&&I(l.getExtent(),a))return l;var h={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};na(h,this.params_),this.imageSize_[0]=Math.round(K(s)/r),this.imageSize_[1]=Math.round(V(s)/r);var u=this.getRequestUrl_(s,this.imageSize_,i,n,h);return this.image_=new hc(s,e,i,u,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener(ha,this.handleImageChange.bind(this)),this.image_},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.getRequestUrl_=function(t,e,i,n,r){if(S(void 0!==this.url_,9),r[this.v13_?"CRS":"SRS"]=n.getCode(),"STYLES"in this.params_||(r.STYLES=""),1!=i)switch(this.serverType_){case"geoserver":var o=90*i+.5|0;"FORMAT_OPTIONS"in r?r.FORMAT_OPTIONS+=";dpi:"+o:r.FORMAT_OPTIONS="dpi:"+o;break;case"mapserver":r.MAP_RESOLUTION=90*i;break;case"carmentaserver":case"qgis":r.DPI=90*i;break;default:S(!1,8)}r.WIDTH=e[0],r.HEIGHT=e[1];var a,s=n.getAxisOrientation();return a=this.v13_&&"ne"==s.substr(0,2)?[t[1],t[0],t[3],t[2]]:t,r.BBOX=a.join(","),jn(this.url_,r)},e.prototype.getUrl=function(){return this.url_},e.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},e.prototype.updateParams=function(t){na(this.params_,t),this.updateV13_(),this.image_=null,this.changed()},e.prototype.updateV13_=function(){this.v13_=Fe(this.params_.VERSION||"1.3.0","1.3")>=0},e}(Pp),Bp=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Yp='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.',Xp=function(t){function e(e){var i=e||{};return t.call(this,{attributions:void 0!==i.attributions?i.attributions:[Yp],cacheSize:i.cacheSize,crossOrigin:void 0!==i.crossOrigin?i.crossOrigin:"anonymous",opaque:void 0===i.opaque||i.opaque,maxZoom:void 0!==i.maxZoom?i.maxZoom:19,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileLoadFunction:i.tileLoadFunction,url:void 0!==i.url?i.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png",wrapX:i.wrapX,attributionsCollapsible:!1})||this}return Bp(e,t),e}(Vc),Wp=i(3),Up=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Vp=function(t){function e(e){return t.call(this,e||{})||this}return Up(e,t),e}(kl),Hp=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),qp=function(t){function e(e){var i=t.call(this)||this;return i.boundHandleImageChange_=i.handleImageChange_.bind(i),i.layer_=e,i}return Hp(e,t),e.prototype.getFeatures=function(t){return n()},e.prototype.prepareFrame=function(t){return n()},e.prototype.renderFrame=function(t,e){return n()},e.prototype.loadedTileCallback=function(t,e,i){t[e]||(t[e]={}),t[e][i.tileCoord.toString()]=i},e.prototype.createLoadedTileFinder=function(t,e,i){return(function(n,r){var o=this.loadedTileCallback.bind(this,i,n);return t.forEachLoadedTile(e,n,r,o)}).bind(this)},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,r){},e.prototype.getDataAtPixel=function(t,e,i){return n()},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleFontsChanged=function(){},e.prototype.handleImageChange_=function(t){t.target.getState()===eu&&this.renderIfReadyAndVisible()},e.prototype.loadImage=function(t){var e=t.getState();return e!=eu&&e!=iu&&t.addEventListener(ha,this.boundHandleImageChange_),e==tu&&(t.load(),e=t.getState()),e==eu},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==Sl&&t.changed()},e}(_a),Zp=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Kp=function(t){function e(e){var i=t.call(this,e)||this;return i.container=null,i.tempTransform_=[1,0,0,1,0,0],i.pixelTransform=[1,0,0,1,0,0],i.inversePixelTransform=[1,0,0,1,0,0],i.context=null,i.containerReused=!1,i}return Zp(e,t),e.prototype.useContainer=function(t,e,i){var n,r,o=this.getLayer().getClassName();if(t&&""===t.style.opacity&&t.className===o&&(s=t.firstElementChild)instanceof HTMLCanvasElement&&(r=s.getContext("2d")),r&&r.canvas.style.transform===e?(this.container=t,this.context=r,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(n=document.createElement("div")).className=o;var a=n.style;a.position="absolute",a.width="100%",a.height="100%";var s=(r=Qe()).canvas;n.appendChild(s),(a=s.style).position="absolute",a.left="0",a.transformOrigin="top left",this.container=n,this.context=r}},e.prototype.clip=function(t,e,i){var n=e.pixelRatio,r=e.size[0]*n/2,o=e.size[1]*n/2,a=e.viewState.rotation,s=q(i),l=Z(i),h=X(i),u=Y(i);zt(e.coordinateToPixelTransform,s),zt(e.coordinateToPixelTransform,l),zt(e.coordinateToPixelTransform,h),zt(e.coordinateToPixelTransform,u),t.save(),Ei(t,-a,r,o),t.beginPath(),t.moveTo(s[0]*n,s[1]*n),t.lineTo(l[0]*n,l[1]*n),t.lineTo(h[0]*n,h[1]*n),t.lineTo(u[0]*n,u[1]*n),t.clip(),Ei(t,a,r,o)},e.prototype.clipUnrotated=function(t,e,i){var n=q(i),r=Z(i),o=X(i),a=Y(i);zt(e.coordinateToPixelTransform,n),zt(e.coordinateToPixelTransform,r),zt(e.coordinateToPixelTransform,o),zt(e.coordinateToPixelTransform,a);var s=this.inversePixelTransform;zt(s,n),zt(s,r),zt(s,o),zt(s,a),t.save(),t.beginPath(),t.moveTo(Math.round(n[0]),Math.round(n[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()},e.prototype.dispatchRenderEvent_=function(t,e,i){var n=this.getLayer();if(n.hasListener(t)){var r=new Mh(t,this.inversePixelTransform,i,e);n.dispatchEvent(r)}},e.prototype.preRender=function(t,e){this.dispatchRenderEvent_("prerender",t,e)},e.prototype.postRender=function(t,e){this.dispatchRenderEvent_(nl,t,e)},e.prototype.getRenderTransform=function(t,e,i,n,r,o,a){var s=n/e;return Yt(this.tempTransform_,r/2,o/2,s,-s,-i,-t[0]+a,-t[1])},e.prototype.getDataAtPixel=function(t,e,i){var n,r=zt(this.inversePixelTransform,t.slice()),o=this.context;try{n=o.getImageData(Math.round(r[0]),Math.round(r[1]),1,1).data}catch(t){return"SecurityError"===t.name?new Uint8Array:n}return 0===n[3]?null:n},e}(qp),Jp=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),$p=function(t){function e(e){var i=t.call(this,e)||this;return i.image_=null,i}return Jp(e,t),e.prototype.getImage=function(){return this.image_?this.image_.getImage():null},e.prototype.prepareFrame=function(t){var e=t.layerStatesArray[t.layerIndex],i=t.pixelRatio,n=t.viewState,r=n.resolution,o=this.getLayer().getSource(),a=t.viewHints,s=t.extent;if(void 0!==e.extent&&(s=H(s,Nt(e.extent,n.projection))),!a[0]&&!a[1]&&!$(s))if(o){var l=o.getImage(s,r,i,n.projection);l&&this.loadImage(l)&&(this.image_=l)}else this.image_=null;return!!this.image_},e.prototype.renderFrame=function(t,e){var i=this.image_,n=i.getExtent(),r=i.getResolution(),o=i.getPixelRatio(),a=t.layerStatesArray[t.layerIndex],s=t.pixelRatio,l=t.viewState,h=l.center,u=t.size,c=s*r/(l.resolution*o),p=Math.round(u[0]*s),d=Math.round(u[1]*s),f=l.rotation;if(f){var g=Math.round(Math.sqrt(p*p+d*d));p=g,d=g}Yt(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/s,1/s,f,-p/2,-d/2),Xt(this.inversePixelTransform,this.pixelTransform);var v=Pi(this.pixelTransform);this.useContainer(e,v,a.opacity);var y=this.context,m=y.canvas;m.width!=p||m.height!=d?(m.width=p,m.height=d):this.containerReused||y.clearRect(0,0,p,d);var _=!1;if(a.extent){var x=Nt(a.extent,l.projection);(_=!I(x,t.extent)&&J(x,t.extent))&&this.clipUnrotated(y,t,x)}var b=i.getImage(),w=Yt(this.tempTransform_,p/2,d/2,c,c,0,o*(n[0]-h[0])/r,o*(h[1]-n[3])/r);this.renderedResolution=r*s/o;var S=w[4],C=w[5],E=b.width*w[0],T=b.height*w[3];if(this.preRender(y,t),E>=.5&&T>=.5){var P=a.opacity,L=void 0;1!==P&&(L=this.context.globalAlpha,this.context.globalAlpha=P),this.context.drawImage(b,0,0,+b.width,+b.height,Math.round(S),Math.round(C),Math.round(E),Math.round(T)),1!==P&&(this.context.globalAlpha=L)}return this.postRender(y,t),_&&y.restore(),v!==m.style.transform&&(m.style.transform=v),this.container},e}(Kp),Qp=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),td=function(t){function e(e){return t.call(this,e)||this}return Qp(e,t),e.prototype.createRenderer=function(){return new $p(this)},e}(Vp),ed="useInterimTilesOnError",id=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),nd=function(t){function e(e){var i=this,n=e||{},r=na({},n);return delete r.preload,delete r.useInterimTilesOnError,(i=t.call(this,r)||this).setPreload(void 0!==n.preload?n.preload:0),i.setUseInterimTilesOnError(void 0===n.useInterimTilesOnError||n.useInterimTilesOnError),i}return id(e,t),e.prototype.getPreload=function(){return this.get("preload")},e.prototype.setPreload=function(t){this.set("preload",t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(ed)},e.prototype.setUseInterimTilesOnError=function(t){this.set(ed,t)},e}(kl),rd=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),od=function(t){function e(e){var i=t.call(this,e)||this;return i.extentChanged=!0,i.renderedExtent_=null,i.renderedProjection=null,i.renderedTiles=[],i.newTiles_=!1,i.tmpExtent=[1/0,1/0,-1/0,-1/0],i.tmpTileRange_=new Ou(0,0,0,0),i}return rd(e,t),e.prototype.isDrawableTile=function(t){var e=this.getLayer(),i=t.getState(),n=e.getUseInterimTilesOnError();return i==ol||i==al||3==i&&!n},e.prototype.getTile=function(t,e,i,n){var r=n.pixelRatio,o=n.viewState.projection,a=this.getLayer(),s=a.getSource().getTile(t,e,i,r,o);return 3==s.getState()&&(a.getUseInterimTilesOnError()?a.getPreload()>0&&(this.newTiles_=!0):s.setState(ol)),this.isDrawableTile(s)||(s=s.getInterimTile()),s},e.prototype.loadedTileCallback=function(e,i,n){return!!this.isDrawableTile(n)&&t.prototype.loadedTileCallback.call(this,e,i,n)},e.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},e.prototype.renderFrame=function(t,e){var i=t.layerStatesArray[t.layerIndex],n=t.viewState,o=n.projection,a=n.resolution,s=n.center,l=n.rotation,h=t.pixelRatio,c=this.getLayer(),p=c.getSource(),d=p.getRevision(),f=p.getTileGridForProjection(o),g=f.getZForResolution(a,p.zDirection),v=f.getResolution(g),y=t.extent,m=i.extent&&Nt(i.extent,o);m&&(y=H(y,Nt(i.extent,o)));var _=p.getTilePixelRatio(h),x=Math.round(t.size[0]*_),b=Math.round(t.size[1]*_);if(l){var w=Math.round(Math.sqrt(x*x+b*b));x=w,b=w}var S=v*x/2/_,C=v*b/2/_,E=[s[0]-S,s[1]-C,s[0]+S,s[1]+C],T=f.getTileRangeForExtentAndZ(y,g),P={};P[g]={};var L=this.createLoadedTileFinder(p,o,P),I=this.tmpExtent,O=this.tmpTileRange_;this.newTiles_=!1;for(var A=T.minX;A<=T.maxX;++A)for(var R=T.minY;R<=T.maxY;++R){var M=this.getTile(g,A,R,t);if(this.isDrawableTile(M)){var F=r(this);if(M.getState()==ol){P[g][M.tileCoord.toString()]=M;var k=M.inTransition(F);this.newTiles_||!k&&-1!==this.renderedTiles.indexOf(M)||(this.newTiles_=!0)}if(1===M.getAlpha(F,t.time))continue}var D=f.getTileCoordChildTileRange(M.tileCoord,O,I),j=!1;D&&(j=L(g+1,D)),j||f.forEachTileCoordParentTileRange(M.tileCoord,L,O,I)}var G=v/a;Yt(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/_,1/_,l,-x/2,-b/2);var z=Pi(this.pixelTransform);this.useContainer(e,z,i.opacity);var B=this.context,Y=B.canvas;Xt(this.inversePixelTransform,this.pixelTransform),Yt(this.tempTransform_,x/2,b/2,G,G,0,-x/2,-b/2),Y.width!=x||Y.height!=b?(Y.width=x,Y.height=b):this.containerReused||B.clearRect(0,0,x,b),m&&this.clipUnrotated(B,t,m),this.preRender(B,t),this.renderedTiles.length=0;var X,W,U,V=Object.keys(P).map(Number);V.sort(u),1!==i.opacity||this.containerReused&&!p.getOpaque(t.viewState.projection)?(X=[],W=[]):V=V.reverse();for(var Z=V.length-1;Z>=0;--Z){var K=V[Z],J=p.getTilePixelSize(K,h,o),$=f.getResolution(K)/v,Q=J[0]*$*G,tt=J[1]*$*G,et=f.getTileCoordForCoordAndZ(q(E),K),it=f.getTileCoordExtent(et),nt=zt(this.tempTransform_,[_*(it[0]-E[0])/v,_*(E[3]-it[3])/v]),rt=_*p.getGutterForProjection(o),ot=P[K];for(var at in ot){var st=(M=ot[at]).tileCoord,lt=nt[0]-(et[1]-st[1])*Q,ht=Math.round(lt+Q),ut=nt[1]-(et[2]-st[2])*tt,ct=Math.round(ut+tt),pt=ht-(A=Math.round(lt)),dt=ct-(R=Math.round(ut)),ft=g===K;if(!(k=ft&&1!==M.getAlpha(r(this),t.time)))if(X){B.save(),U=[A,R,A+pt,R,A+pt,R+dt,A,R+dt];for(var gt=0,vt=X.length;gt<vt;++gt)if(g!==K&&K<W[gt]){var yt=X[gt];B.beginPath(),B.moveTo(U[0],U[1]),B.lineTo(U[2],U[3]),B.lineTo(U[4],U[5]),B.lineTo(U[6],U[7]),B.moveTo(yt[6],yt[7]),B.lineTo(yt[4],yt[5]),B.lineTo(yt[2],yt[3]),B.lineTo(yt[0],yt[1]),B.clip()}X.push(U),W.push(K)}else B.clearRect(A,R,pt,dt);this.drawTileImage(M,t,A,R,pt,dt,rt,ft,i.opacity),X&&!k&&B.restore(),this.renderedTiles.push(M),this.updateUsedTiles(t.usedTiles,p,M)}}return this.renderedRevision=d,this.renderedResolution=v,this.extentChanged=!this.renderedExtent_||!N(this.renderedExtent_,E),this.renderedExtent_=E,this.renderedPixelRatio=h,this.renderedProjection=o,this.manageTilePyramid(t,p,f,h,o,y,g,c.getPreload()),this.scheduleExpireCache(t,p),this.postRender(B,t),i.extent&&B.restore(),z!==Y.style.transform&&(Y.style.transform=z),this.container},e.prototype.drawTileImage=function(t,e,i,n,o,a,s,l,h){var u=this.getTileImage(t);if(u){var c=r(this),p=l?t.getAlpha(c,e.time):1,d=h*p,f=d!==this.context.globalAlpha;f&&(this.context.save(),this.context.globalAlpha=d),this.context.drawImage(u,s,s,u.width-2*s,u.height-2*s,i,n,o,a),f&&this.context.restore(),1!==p?e.animate=!0:l&&t.endTransition(c)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getTileImage=function(t){return t.getImage()},e.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var i=(function(t,e,i){var n=r(t);n in i.usedTiles&&t.expireCache(i.viewState.projection,i.usedTiles[n])}).bind(null,e);t.postRenderFunctions.push(i)}},e.prototype.updateUsedTiles=function(t,e,i){var n=r(e);n in t||(t[n]={}),t[n][i.getKey()]=!0},e.prototype.manageTilePyramid=function(t,e,i,n,o,a,s,l,h){var u=r(e);u in t.wantedTiles||(t.wantedTiles[u]={});var c,p,d,f,g,v,y=t.wantedTiles[u],m=t.tileQueue;for(v=i.getMinZoom();v<=s;++v)for(p=i.getTileRangeForExtentAndZ(a,v,p),d=i.getResolution(v),f=p.minX;f<=p.maxX;++f)for(g=p.minY;g<=p.maxY;++g)s-v<=l?((c=e.getTile(v,f,g,n,o)).getState()==rl&&(y[c.getKey()]=!0,m.isKeyQueued(c.getKey())||m.enqueue([c,u,i.getTileCoordCenter(c.tileCoord),d])),void 0!==h&&h(c)):e.useTile(v,f,g,o)},e}(Kp),ad=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),sd=function(t){function e(e){return t.call(this,e)||this}return ad(e,t),e.prototype.createRenderer=function(){return new od(this)},e}(nd),ld=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),hd="pixel",ud=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.extent=i.extent,r.resolution=i.viewState.resolution/i.pixelRatio,r.data=n,r}return ld(e,t),e}(aa),cd=function(t){function e(e){var i=t.call(this,{projection:null})||this;i.worker_=null,i.operationType_=void 0!==e.operationType?e.operationType:hd,i.threads_=void 0!==e.threads?e.threads:1,i.layers_=function(t){for(var e=t.length,i=new Array(e),n=0;n<e;++n)i[n]=function(t){var e;return t instanceof Fc?t instanceof jc?e=new sd({source:t}):t instanceof Pp&&(e=new td({source:t})):e=t,e}(t[n]);return i}(e.sources);for(var n=i.changed.bind(i),r=0,o=i.layers_.length;r<o;++r)i.layers_[r].addEventListener(ha,n);return i.tileQueue_=new hl(function(){return 1},i.changed.bind(i)),i.renderedImageCanvas_=null,i.frameState_={animate:!1,coordinateToPixelTransform:[1,0,0,1,0,0],extent:null,index:0,layerIndex:0,layerStatesArray:i.layers_.map(function(t){return t.getLayerState()}),pixelRatio:1,pixelToCoordinateTransform:[1,0,0,1,0,0],postRenderFunctions:[],size:[0,0],tileQueue:i.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},declutterItems:[]},i.setAttributions(function(t){for(var i=[],n=0,r=e.sources.length;n<r;++n){var o=e.sources[n],a=(o instanceof Fc?o:o.getSource()).getAttributions();if("function"==typeof a){var s=a(t);i.push.apply(i,s)}}return 0!==i.length?i:null}),void 0!==e.operation&&i.setOperation(e.operation,e.lib),i}return ld(e,t),e.prototype.setOperation=function(t,e){this.worker_=new Wp.Processor({operation:t,imageOps:"image"===this.operationType_,queue:1,lib:e,threads:this.threads_}),this.changed()},e.prototype.updateFrameState_=function(t,e,i){var n=na({},this.frameState_);n.viewState=na({},n.viewState);var r=W(t);n.extent=t.slice(),n.size[0]=Math.round(K(t)/e),n.size[1]=Math.round(V(t)/e),n.time=1/0;var o=n.viewState;return o.center=r,o.projection=i,o.resolution=e,n},e.prototype.allSourcesReady_=function(){for(var t=!0,e=0,i=this.layers_.length;e<i;++e)if(this.layers_[e].getSource().getState()!==Sl){t=!1;break}return t},e.prototype.getImage=function(t,e,i,n){if(!this.allSourcesReady_())return null;var r=this.updateFrameState_(t,e,n);if(this.requestedFrameState_=r,this.renderedImageCanvas_){var o=this.renderedImageCanvas_.getResolution(),a=this.renderedImageCanvas_.getExtent();e===o&&N(t,a)||(this.renderedImageCanvas_=null)}return this.renderedImageCanvas_&&this.getRevision()===this.renderedRevision_||this.processSources_(),r.tileQueue.loadMoreTiles(16,16),r.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_},e.prototype.processSources_=function(){for(var t=this.requestedFrameState_,e=this.layers_.length,i=new Array(e),n=0;n<e;++n){t.layerIndex=n;var r=function(t,e){var i=t.getRenderer();if(!i)throw new Error("Unsupported layer type: "+t);if(!i.prepareFrame(e))return null;var n,r=e.size[0],o=e.size[1],a=i.renderFrame(e,null);if(a&&(n=a.firstElementChild),!(n instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+n);if(n.width===r&&n.height===o)return n.getContext("2d").getImageData(0,0,r,o);if(pd){var s=pd.canvas;s.width!==r||s.height!==o?pd=Qe(r,o):pd.clearRect(0,0,r,o)}else pd=Qe(r,o);return pd.drawImage(n,0,0,r,o),pd.getImageData(0,0,r,o)}(this.layers_[n],t);if(!r)return;i[n]=r}var o={};this.dispatchEvent(new ud("beforeoperations",t,o)),this.worker_.process(i,o,this.onWorkerComplete_.bind(this,t))},e.prototype.onWorkerComplete_=function(t,e,i,n){if(!e&&i){var r=t.extent,o=t.viewState.resolution;if(o===this.requestedFrameState_.viewState.resolution&&N(r,this.requestedFrameState_.extent)){var a;this.renderedImageCanvas_?a=this.renderedImageCanvas_.getImage().getContext("2d"):(a=Qe(Math.round(K(r)/o),Math.round(V(r)/o)),this.renderedImageCanvas_=new Ap(r,o,1,a.canvas)),a.putImageData(i,0,0),this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new ud("afteroperations",t,n))}}},e.prototype.getImageInternal=function(){return null},e}(Pp),pd=null,dd=cd,fd=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),gd=['Map tiles by <a href="https://stamen.com/" target="_blank">Stamen Design</a>, under <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC BY 3.0</a>.',Yp],vd={terrain:{extension:"jpg",opaque:!0},"terrain-background":{extension:"jpg",opaque:!0},"terrain-labels":{extension:"png",opaque:!1},"terrain-lines":{extension:"png",opaque:!1},"toner-background":{extension:"png",opaque:!0},toner:{extension:"png",opaque:!0},"toner-hybrid":{extension:"png",opaque:!1},"toner-labels":{extension:"png",opaque:!1},"toner-lines":{extension:"png",opaque:!1},"toner-lite":{extension:"png",opaque:!0},watercolor:{extension:"jpg",opaque:!0}},yd={terrain:{minZoom:0,maxZoom:18},toner:{minZoom:0,maxZoom:20},watercolor:{minZoom:0,maxZoom:18}},md=function(t){function e(e){var i=e.layer.indexOf("-"),n=-1==i?e.layer:e.layer.slice(0,i),r=yd[n],o=vd[e.layer];return t.call(this,{attributions:gd,cacheSize:e.cacheSize,crossOrigin:"anonymous",maxZoom:null!=e.maxZoom?e.maxZoom:r.maxZoom,minZoom:null!=e.minZoom?e.minZoom:r.minZoom,opaque:o.opaque,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:void 0!==e.url?e.url:"https://stamen-tiles-{a-d}.a.ssl.fastly.net/"+e.layer+"/{z}/{x}/{y}."+o.extension,wrapX:e.wrapX})||this}return fd(e,t),e}(Vc),_d=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),xd=function(t){function e(e){var i=this,n=e||{};return(i=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileGrid:n.tileGrid,tileLoadFunction:n.tileLoadFunction,tileUrlFunction:Gn,url:n.url,urls:n.urls,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition})||this).params_=n.params||{},i.hidpi_=void 0===n.hidpi||n.hidpi,i.tmpExtent_=[1/0,1/0,-1/0,-1/0],i.setKey(i.getKeyForParams_()),i}return _d(e,t),e.prototype.getKeyForParams_=function(){var t=0,e=[];for(var i in this.params_)e[t++]=i+"-"+this.params_[i];return e.join("/")},e.prototype.getParams=function(){return this.params_},e.prototype.getRequestUrl_=function(t,e,i,n,r,o){var a=this.urls;if(a){var s,l=r.getCode().split(":").pop();return o.SIZE=e[0]+","+e[1],o.BBOX=i.join(","),o.BBOXSR=l,o.IMAGESR=l,o.DPI=Math.round(o.DPI?o.DPI*n:90*n),s=1==a.length?a[0]:a[ut(Xi(t),a.length)],jn(s.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage"),o)}},e.prototype.getTilePixelRatio=function(t){return this.hidpi_?t:1},e.prototype.updateParams=function(t){na(this.params_,t),this.setKey(this.getKeyForParams_())},e}(Yc),bd=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),wd=function(t){function e(e,i,n){var r=t.call(this,e,ol)||this;return r.tileSize_=i,r.text_=n,r.canvas_=null,r}return bd(e,t),e.prototype.getImage=function(){if(this.canvas_)return this.canvas_;var t=this.tileSize_,e=Qe(t[0],t[1]);return e.strokeStyle="grey",e.strokeRect(.5,.5,t[0]+.5,t[1]+.5),e.fillStyle="grey",e.strokeStyle="white",e.textAlign="center",e.textBaseline="middle",e.font="24px sans-serif",e.lineWidth=4,e.strokeText(this.text_,t[0]/2,t[1]/2,t[0]),e.fillText(this.text_,t[0]/2,t[1]/2,t[0]),this.canvas_=e.canvas,e.canvas},e.prototype.load=function(){},e}(Cc),Sd=function(t){function e(e){var i=e||{};return t.call(this,{opaque:!1,projection:i.projection,tileGrid:i.tileGrid,wrapX:void 0===i.wrapX||i.wrapX,zDirection:i.zDirection})||this}return bd(e,t),e.prototype.getTile=function(t,e,i){var n=zi(t,e,i);if(this.tileCache.containsKey(n))return this.tileCache.get(n);var r=oi(this.tileGrid.getTileSize(t)),o=[t,e,i],a=this.getTileCoordForTileUrlFunction(o),s=new wd(o,r,a?"z:"+a[0]+" x:"+a[1]+" y:"+a[2]:"none");return this.tileCache.set(n,s),s},e}(Vc),Cd=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ed=function(t){function e(e){var i=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,projection:bt("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:wl,tileLoadFunction:e.tileLoadFunction,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition})||this;if(i.tileJSON_=null,i.tileSize_=e.tileSize,e.url)if(e.jsonp)On(e.url,i.handleTileJSONResponse.bind(i),i.handleTileJSONError.bind(i));else{var n=new XMLHttpRequest;n.addEventListener("load",i.onXHRLoad_.bind(i)),n.addEventListener("error",i.onXHRError_.bind(i)),n.open("GET",e.url),n.send()}else e.tileJSON?i.handleTileJSONResponse(e.tileJSON):S(!1,51);return i}return Cd(e,t),e.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var i=void 0;try{i=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(i)}else this.handleTileJSONError()},e.prototype.onXHRError_=function(t){this.handleTileJSONError()},e.prototype.getTileJSON=function(){return this.tileJSON_},e.prototype.handleTileJSONResponse=function(t){var e,i=bt("EPSG:4326"),n=this.getProjection();if(void 0!==t.bounds){var r=Lt(i,n);e=tt(t.bounds,r)}var o=t.minzoom||0,a=t.maxzoom||22,s=Ui({extent:qi(n),maxZoom:a,minZoom:o,tileSize:this.tileSize_});if(this.tileGrid=s,this.tileUrlFunction=Tn(t.tiles,s),void 0!==t.attribution&&!this.getAttributions()){var l=void 0!==e?e:i.getExtent();this.setAttributions(function(e){return J(l,e.extent)?[t.attribution]:null})}this.tileJSON_=t,this.setState(Sl)},e.prototype.handleTileJSONError=function(){this.setState("error")},e}(Yc),Td=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Pd=function(t){function e(e){var i=this,n=e||{},r=n.params||{};return(i=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,opaque:!(!("TRANSPARENT"in r)||r.TRANSPARENT),projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileClass:n.tileClass,tileGrid:n.tileGrid,tileLoadFunction:n.tileLoadFunction,tileUrlFunction:zn,url:n.url,urls:n.urls,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition})||this).gutter_=void 0!==n.gutter?n.gutter:0,i.params_=r,i.v13_=!0,i.serverType_=n.serverType,i.hidpi_=void 0===n.hidpi||n.hidpi,i.tmpExtent_=[1/0,1/0,-1/0,-1/0],i.updateV13_(),i.setKey(i.getKeyForParams_()),i}return Td(e,t),e.prototype.getFeatureInfoUrl=function(t,e,i,n){var r=bt(i),o=this.getProjection(),a=this.getTileGrid();a||(a=this.getTileGridForProjection(r));var s=a.getZForResolution(e,this.zDirection),l=a.getTileCoordForCoordAndZ(t,s);if(!(a.getResolutions().length<=l[0])){var h=a.getResolution(l[0]),u=a.getTileCoordExtent(l,this.tmpExtent_),c=oi(a.getTileSize(l[0]),this.tmpSize),p=this.gutter_;0!==p&&(c=ni(c,p,this.tmpSize),u=E(u,h*p,u)),o&&o!==r&&(h=An(o,r,t,h),u=At(u,r,o),t=Ot(t,r,o));var d={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};na(d,this.params_,n);var f=Math.floor((t[0]-u[0])/h),g=Math.floor((u[3]-t[1])/h);return d[this.v13_?"I":"X"]=f,d[this.v13_?"J":"Y"]=g,this.getRequestUrl_(l,c,u,1,o||r,d)}},e.prototype.getLegendUrl=function(t,e){if(void 0!==this.urls[0]){var i={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===e||void 0===e.LAYER){var n=this.params_.LAYERS;if(Array.isArray(n)&&1!==n.length)return;i.LAYER=n}if(void 0!==t){var r=this.getProjection()?this.getProjection().getMetersPerUnit():1;i.SCALE=t*r*39.37*(25.4/.28)}return na(i,e),jn(this.urls[0],i)}},e.prototype.getGutter=function(){return this.gutter_},e.prototype.getParams=function(){return this.params_},e.prototype.getRequestUrl_=function(t,e,i,n,r,o){var a=this.urls;if(a){if(o.WIDTH=e[0],o.HEIGHT=e[1],o[this.v13_?"CRS":"SRS"]=r.getCode(),"STYLES"in this.params_||(o.STYLES=""),1!=n)switch(this.serverType_){case"geoserver":var s=90*n+.5|0;"FORMAT_OPTIONS"in o?o.FORMAT_OPTIONS+=";dpi:"+s:o.FORMAT_OPTIONS="dpi:"+s;break;case"mapserver":o.MAP_RESOLUTION=90*n;break;case"carmentaserver":case"qgis":o.DPI=90*n;break;default:S(!1,52)}var l,h=r.getAxisOrientation(),u=i;if(this.v13_&&"ne"==h.substr(0,2)){var c=void 0;c=i[0],u[0]=i[1],u[1]=c,c=i[2],u[2]=i[3],u[3]=c}return o.BBOX=u.join(","),l=1==a.length?a[0]:a[ut(Xi(t),a.length)],jn(l,o)}},e.prototype.getTilePixelRatio=function(t){return this.hidpi_&&void 0!==this.serverType_?t:1},e.prototype.getKeyForParams_=function(){var t=0,e=[];for(var i in this.params_)e[t++]=i+"-"+this.params_[i];return e.join("/")},e.prototype.updateParams=function(t){na(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())},e.prototype.updateV13_=function(){this.v13_=Fe(this.params_.VERSION||"1.3.0","1.3")>=0},e}(Yc),Ld=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Id=function(t){function e(e,i,n,r,o,a){var s=t.call(this,e,i)||this;return s.src_=n,s.extent_=r,s.preemptive_=o,s.grid_=null,s.keys_=null,s.data_=null,s.jsonp_=a,s}return Ld(e,t),e.prototype.getImage=function(){return null},e.prototype.getData=function(t){if(!this.grid_||!this.keys_)return null;var e=(t[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),i=(t[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),n=this.grid_[Math.floor((1-i)*this.grid_.length)];if("string"!=typeof n)return null;var r=n.charCodeAt(Math.floor(e*n.length));r>=93&&r--,r>=35&&r--;var o=null;if((r-=32)in this.keys_){var a=this.keys_[r];o=this.data_&&a in this.data_?this.data_[a]:a}return o},e.prototype.forDataAtCoordinate=function(t,e,i){this.state==al&&!0===i?(this.state=rl,l(this,ha,function(i){e(this.getData(t))},this),this.loadInternal_()):!0===i?setTimeout((function(){e(this.getData(t))}).bind(this),0):e(this.getData(t))},e.prototype.getKey=function(){return this.src_},e.prototype.handleError_=function(){this.state=3,this.changed()},e.prototype.handleLoad_=function(t){this.grid_=t.grid,this.keys_=t.keys,this.data_=t.data,this.state=ol,this.changed()},e.prototype.loadInternal_=function(){if(this.state==rl)if(this.state=1,this.jsonp_)On(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this));else{var t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",this.src_),t.send()}},e.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var i=void 0;try{i=JSON.parse(e.responseText)}catch(t){return void this.handleError_()}this.handleLoad_(i)}else this.handleError_()},e.prototype.onXHRError_=function(t){this.handleError_()},e.prototype.load=function(){this.preemptive_?this.loadInternal_():this.setState(al)},e}(Cc),Od=function(t){function e(e){var i=t.call(this,{projection:bt("EPSG:3857"),state:wl})||this;if(i.preemptive_=void 0===e.preemptive||e.preemptive,i.tileUrlFunction_=Ln,i.template_=void 0,i.jsonp_=e.jsonp||!1,e.url)if(i.jsonp_)On(e.url,i.handleTileJSONResponse.bind(i),i.handleTileJSONError.bind(i));else{var n=new XMLHttpRequest;n.addEventListener("load",i.onXHRLoad_.bind(i)),n.addEventListener("error",i.onXHRError_.bind(i)),n.open("GET",e.url),n.send()}else e.tileJSON?i.handleTileJSONResponse(e.tileJSON):S(!1,51);return i}return Ld(e,t),e.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var i=void 0;try{i=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(i)}else this.handleTileJSONError()},e.prototype.onXHRError_=function(t){this.handleTileJSONError()},e.prototype.getTemplate=function(){return this.template_},e.prototype.forDataAtCoordinateAndResolution=function(t,e,i,n){if(this.tileGrid){var r=this.tileGrid.getZForResolution(e,this.zDirection),o=this.tileGrid.getTileCoordForCoordAndZ(t,r);this.getTile(o[0],o[1],o[2],1,this.getProjection()).forDataAtCoordinate(t,i,n)}else!0===n?setTimeout(function(){i(null)},0):i(null)},e.prototype.handleTileJSONError=function(){this.setState("error")},e.prototype.handleTileJSONResponse=function(t){var e,i=bt("EPSG:4326"),n=this.getProjection();if(void 0!==t.bounds){var r=Lt(i,n);e=tt(t.bounds,r)}var o=t.minzoom||0,a=t.maxzoom||22,s=Ui({extent:qi(n),maxZoom:a,minZoom:o});this.tileGrid=s,this.template_=t.template;var l=t.grids;if(l){if(this.tileUrlFunction_=Tn(l,s),void 0!==t.attribution){var h=void 0!==e?e:i.getExtent();this.setAttributions(function(e){return J(h,e.extent)?[t.attribution]:null})}this.setState(Sl)}else this.setState("error")},e.prototype.getTile=function(t,e,i,n,r){var o=zi(t,e,i);if(this.tileCache.containsKey(o))return this.tileCache.get(o);var a=[t,e,i],s=this.getTileCoordForTileUrlFunction(a,r),l=this.tileUrlFunction_(s,n,r),h=new Id(a,void 0!==l?rl:al,void 0!==l?l:"",this.tileGrid.getTileCoordExtent(a),this.preemptive_,this.jsonp_);return this.tileCache.set(o,h),h},e.prototype.useTile=function(t,e,i){var n=zi(t,e,i);this.tileCache.containsKey(n)&&this.tileCache.get(n)},e}(jc),Ad=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Rd=[],Md=function(t){function e(e,i,n,r){var o=t.call(this,e,i,{transition:0})||this;return o.context_={},o.executorGroups={},o.loadingSourceTiles=0,o.errorSourceTileKeys={},o.hitDetectionImageData={},o.replayState_={},o.sourceTiles=null,o.getSourceTiles=r.bind(void 0,o),o.sourceZ=-1,o.hifi=!1,o.wrappedTileCoord=n,o}return Ad(e,t),e.prototype.getContext=function(t){var e=r(t);return e in this.context_||(this.context_[e]=Qe(1,1,Rd)),this.context_[e]},e.prototype.hasContext=function(t){return r(t)in this.context_},e.prototype.getImage=function(t){return this.hasContext(t)?this.getContext(t).canvas:null},e.prototype.getReplayState=function(t){var e=r(t);return e in this.replayState_||(this.replayState_[e]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedZ:-1,renderedTileZ:-1}),this.replayState_[e]},e.prototype.load=function(){this.getSourceTiles()},e.prototype.release=function(){for(var e in this.context_)Rd.push(this.context_[e].canvas);t.prototype.release.call(this)},e}(Cc),Fd=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),kd=function(t){function e(e,i,n,r,o,a){var s=t.call(this,e,i,a)||this;return s.extent=null,s.format_=r,s.features_=null,s.projection=null,s.tileLoadFunction_=o,s.url_=n,s}return Fd(e,t),e.prototype.getFormat=function(){return this.format_},e.prototype.getFeatures=function(){return this.features_},e.prototype.getKey=function(){return this.url_},e.prototype.load=function(){this.state==rl&&(this.setState(1),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))},e.prototype.onLoad=function(t,e){this.setFeatures(t)},e.prototype.onError=function(){this.setState(3)},e.prototype.setFeatures=function(t){this.features_=t,this.setState(ol)},e.prototype.setLoader=function(t){this.loader_=t},e}(Cc),Nd=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Dd=function(t){function e(e){var i=this,n=e.projection||"EPSG:3857",r=e.extent||qi(n),o=e.tileGrid||Ui({extent:r,maxResolution:e.maxResolution,maxZoom:void 0!==e.maxZoom?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});return(i=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,opaque:!1,projection:n,state:e.state,tileGrid:o,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Bn,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:void 0===e.zDirection?1:e.zDirection})||this).format_=e.format?e.format:null,i.loadingTiles_={},i.sourceTileCache=new Ic(i.tileCache.highWaterMark),i.overlaps_=null==e.overlaps||e.overlaps,i.tileClass=e.tileClass?e.tileClass:kd,i.tileGrids_={},i}return Nd(e,t),e.prototype.getFeaturesInExtent=function(t){var e=[],i=this.tileCache;if(0===i.getCount())return e;var n=Yi(i.peekFirstKey())[0],r=this.tileGrid;return i.forEach(function(i){if(i.tileCoord[0]===n&&i.getState()===ol)for(var o=i.getSourceTiles(),a=0,s=o.length;a<s;++a){var l=o[a];if(J(t,r.getTileCoordExtent(l.tileCoord))){var h=l.getFeatures();if(h)for(var u=0,c=h.length;u<c;++u){var p=h[u],d=p.getGeometry();J(t,d.getExtent())&&e.push(p)}}}}),e},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.clear=function(){this.tileCache.clear(),this.sourceTileCache.clear()},e.prototype.expireCache=function(e,i){t.prototype.expireCache.call(this,e,i),this.sourceTileCache.expireCache({})},e.prototype.getSourceTiles=function(t,e,i){var n=i.wrappedTileCoord,r=this.getTileGridForProjection(e),o=r.getTileCoordExtent(n),a=r.getResolution(n[0]);E(o,-a,o);var s=this.tileGrid,l=s.getExtent();l&&H(o,l,o);var h,u,c,p=s.getZForResolution(a,1),d=s.getMinZoom(),f=i.sourceTiles;if(f&&f.length>0&&f[0].tileCoord[0]===p)h=f,u=!0,c=p;else{h=[],c=p+1;do{u=!0,s.forEachTileCoord(o,--c,(function(n){var r,o=this.tileUrlFunction(n,t,e);if(void 0!==o)if(this.sourceTileCache.containsKey(o)){var a=(r=this.sourceTileCache.get(o)).getState();if(a===ol||3===a||a===al)return void h.push(r)}else c===p&&((r=new this.tileClass(n,rl,o,this.format_,this.tileLoadFunction)).extent=s.getTileCoordExtent(n),r.projection=e,r.resolution=s.getResolution(n[0]),this.sourceTileCache.set(o,r),r.addEventListener(ha,this.handleTileChange.bind(this)),r.load());u=u&&r&&r.getState()===ol,r&&r.getState()!==al&&i.getState()===rl&&(i.loadingSourceTiles++,r.addEventListener(ha,function t(){var e=r.getState(),n=r.getKey();if(e===ol||3===e){e===ol?(r.removeEventListener(ha,t),i.loadingSourceTiles--,delete i.errorSourceTileKeys[n]):3===e&&(i.errorSourceTileKeys[n]=!0);var o=Object.keys(i.errorSourceTileKeys).length;i.loadingSourceTiles-o==0&&(i.hifi=0===o,i.sourceZ=p,i.setState(ol))}}))}).bind(this)),u||(h.length=0)}while(!u&&c>d)}return i.getState()===rl&&i.setState(1),u&&(i.hifi=p===c,i.sourceZ=c,i.getState()<ol?i.setState(ol):f&&v(h,f)||(i.sourceTiles=h)),h},e.prototype.getTile=function(t,e,i,n,r){var o,a=zi(t,e,i),s=this.getKey();if(this.tileCache.containsKey(a)&&(o=this.tileCache.get(a)).key===s)return o;var l=[t,e,i],h=this.getTileCoordForTileUrlFunction(l,r),u=this.getTileGrid().getExtent(),c=this.getTileGridForProjection(r);if(h&&u){var p=c.getTileCoordExtent(h);E(p,-c.getResolution(t),p),J(u,p)||(h=null)}var d=!0;if(null!==h){var f=this.tileGrid,g=c.getResolution(t),v=f.getZForResolution(g,1),y=c.getTileCoordExtent(h);E(y,-g,y),f.forEachTileCoord(y,v,(function(t){d=d&&!this.tileUrlFunction(t,n,r)}).bind(this))}var m=new Md(l,d?al:rl,h,this.getSourceTiles.bind(this,n,r));return m.key=s,o?(m.interimTile=o,m.refreshInterimChain(),this.tileCache.replace(a,m)):this.tileCache.set(a,m),m},e.prototype.getTileGridForProjection=function(t){var e=t.getCode(),i=this.tileGrids_[e];if(!i){var n=this.tileGrid;i=Hi(t,void 0,n?n.getTileSize(n.getMinZoom()):void 0),this.tileGrids_[e]=i}return i},e.prototype.getTilePixelRatio=function(t){return t},e.prototype.getTilePixelSize=function(t,e,i){var n=oi(this.getTileGridForProjection(i).getTileSize(t),this.tmpSize);return[Math.round(n[0]*e),Math.round(n[1]*e)]},e}(zc),jd="KVP",Gd=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),zd=function(t){function e(e){var i=this,n=void 0!==e.requestEncoding?e.requestEncoding:jd,r=e.tileGrid,o=e.urls;return void 0===o&&void 0!==e.url&&(o=In(e.url)),(i=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:Ln,urls:o,wrapX:void 0!==e.wrapX&&e.wrapX,transition:e.transition})||this).version_=void 0!==e.version?e.version:"1.0.0",i.format_=void 0!==e.format?e.format:"image/jpeg",i.dimensions_=void 0!==e.dimensions?e.dimensions:{},i.layer_=e.layer,i.matrixSet_=e.matrixSet,i.style_=e.style,i.requestEncoding_=n,i.setKey(i.getKeyForDimensions_()),o&&o.length>0&&(i.tileUrlFunction=Pn(o.map(Yn.bind(i)))),i}return Gd(e,t),e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.setTileUrlFunction(Pn(t.map(Yn.bind(this))),e)},e.prototype.getDimensions=function(){return this.dimensions_},e.prototype.getFormat=function(){return this.format_},e.prototype.getLayer=function(){return this.layer_},e.prototype.getMatrixSet=function(){return this.matrixSet_},e.prototype.getRequestEncoding=function(){return this.requestEncoding_},e.prototype.getStyle=function(){return this.style_},e.prototype.getVersion=function(){return this.version_},e.prototype.getKeyForDimensions_=function(){var t=0,e=[];for(var i in this.dimensions_)e[t++]=i+"-"+this.dimensions_[i];return e.join("/")},e.prototype.updateDimensions=function(t){na(this.dimensions_,t),this.setKey(this.getKeyForDimensions_())},e}(Yc),Bd=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Yd="GENERATE_BUFFERS",Xd=function(t){function e(e,i){var n=t.call(this,e)||this,r=i||{};return n.helper=new Vu({postProcesses:r.postProcesses,uniforms:r.uniforms}),n}return Bd(e,t),e.prototype.disposeInternal=function(){this.helper.dispose(),t.prototype.disposeInternal.call(this)},e.prototype.getShaderCompileErrors=function(){return this.helper.getShaderCompileErrors()},e}(qp),Wd=new Blob(['var e="function"==typeof Object.assign?Object.assign:function(e,n){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1,o=arguments.length;r<o;++r){var i=arguments[r];if(null!=i)for(var f in i)i.hasOwnProperty(f)&&(t[f]=i[f])}return t},n="GENERATE_BUFFERS",t=[],r={vertexPosition:0,indexPosition:0};function o(e,n,t,r,o){e[n+0]=t,e[n+1]=r,e[n+2]=o}function i(e,n,i,f,s,u){var a=3+s,l=e[n+0],v=e[n+1],c=t;c.length=s;for(var g=0;g<c.length;g++)c[g]=e[n+2+g];var b=u?u.vertexPosition:0,h=u?u.indexPosition:0,d=b/a;return o(i,b,l,v,0),c.length&&i.set(c,b+3),o(i,b+=a,l,v,1),c.length&&i.set(c,b+3),o(i,b+=a,l,v,2),c.length&&i.set(c,b+3),o(i,b+=a,l,v,3),c.length&&i.set(c,b+3),b+=a,f[h++]=d,f[h++]=d+1,f[h++]=d+3,f[h++]=d+1,f[h++]=d+2,f[h++]=d+3,r.vertexPosition=b,r.indexPosition=h,r}var f=self;f.onmessage=function(t){var r=t.data;if(r.type===n){for(var o=r.customAttributesCount,s=2+o,u=new Float32Array(r.renderInstructions),a=u.length/s,l=4*a*(o+3),v=new Uint32Array(6*a),c=new Float32Array(l),g=null,b=0;b<u.length;b+=s)g=i(u,b,c,v,o,g);var h=e({vertexBuffer:c.buffer,indexBuffer:v.buffer,renderInstructions:u.buffer},r);f.postMessage(h,[c.buffer,v.buffer,u.buffer])}};'],{type:"application/javascript"}),Ud=URL.createObjectURL(Wd),Vd=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Hd=function(t){function e(e){var i=this,n=e||{},r=na({},n);return delete r.style,delete r.renderBuffer,delete r.updateWhileAnimating,delete r.updateWhileInteracting,(i=t.call(this,r)||this).declutter_=void 0!==n.declutter&&n.declutter,i.renderBuffer_=void 0!==n.renderBuffer?n.renderBuffer:100,i.style_=null,i.styleFunction_=void 0,i.setStyle(n.style),i.updateWhileAnimating_=void 0!==n.updateWhileAnimating&&n.updateWhileAnimating,i.updateWhileInteracting_=void 0!==n.updateWhileInteracting&&n.updateWhileInteracting,i}return Vd(e,t),e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.getFeatures=function(e){return t.prototype.getFeatures.call(this,e)},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get("renderOrder")},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.setRenderOrder=function(t){this.set("renderOrder",t)},e.prototype.setStyle=function(t){this.style_=void 0!==t?t:wn,this.styleFunction_=null===t?void 0:function(t){var e;if("function"==typeof t)e=t;else{var i;Array.isArray(t)?i=t:(S("function"==typeof t.getZIndex,41),i=[t]),e=function(){return i}}return e}(this.style_),this.changed()},e}(kl),qd=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Zd=function(t){function e(e,i){var n=this,o=i.uniforms||{},a=[1,0,0,1,0,0];o[Wu]=a,(n=t.call(this,e,{uniforms:o,postProcesses:i.postProcesses})||this).sourceRevision_=-1,n.verticesBuffer_=new Gu(34962,35048),n.hitVerticesBuffer_=new Gu(34962,35048),n.indicesBuffer_=new Gu(34963,35048),n.program_=n.helper.getProgram(i.fragmentShader,i.vertexShader),n.hitDetectionEnabled_=!(!i.hitFragmentShader||!i.hitVertexShader),n.hitProgram_=n.hitDetectionEnabled_&&n.helper.getProgram(i.hitFragmentShader,i.hitVertexShader);var l=i.attributes?i.attributes.map(function(t){return{name:"a_"+t.name,size:1,type:Uu.FLOAT}}):[];n.attributes=[{name:"a_position",size:2,type:Uu.FLOAT},{name:"a_index",size:1,type:Uu.FLOAT}].concat(l),n.hitDetectionAttributes=[{name:"a_position",size:2,type:Uu.FLOAT},{name:"a_index",size:1,type:Uu.FLOAT},{name:"a_hitColor",size:4,type:Uu.FLOAT},{name:"a_featureUid",size:1,type:Uu.FLOAT}].concat(l),n.customAttributes=i.attributes?i.attributes:[],n.previousExtent_=[1/0,1/0,-1/0,-1/0],n.currentTransform_=a,n.renderTransform_=[1,0,0,1,0,0],n.invertRenderTransform_=[1,0,0,1,0,0],n.renderInstructions_=new Float32Array(0),n.hitRenderInstructions_=new Float32Array(0),n.hitRenderTarget_=n.hitDetectionEnabled_&&new qu(n.helper),n.worker_=new Worker(Ud),n.worker_.addEventListener("message",(function(t){var e=t.data;if(e.type===Yd){var i=e.projectionTransform;e.hitDetection?(this.hitVerticesBuffer_.fromArrayBuffer(e.vertexBuffer),this.helper.flushBufferData(this.hitVerticesBuffer_)):(this.verticesBuffer_.fromArrayBuffer(e.vertexBuffer),this.helper.flushBufferData(this.verticesBuffer_)),this.indicesBuffer_.fromArrayBuffer(e.indexBuffer),this.helper.flushBufferData(this.indicesBuffer_),this.renderTransform_=i,Xt(this.invertRenderTransform_,this.renderTransform_),e.hitDetection?this.hitRenderInstructions_=new Float32Array(t.data.renderInstructions):this.renderInstructions_=new Float32Array(t.data.renderInstructions),this.getLayer().changed()}}).bind(n)),n.featureCache_={},n.featureCount_=0;var h=n.getLayer().getSource();return n.sourceListenKeys_=[s(h,Zc,n.handleSourceFeatureAdded_,n),s(h,Kc,n.handleSourceFeatureChanged_,n),s(h,$c,n.handleSourceFeatureDelete_,n),s(h,Jc,n.handleSourceFeatureClear_,n)],h.forEachFeature((function(t){this.featureCache_[r(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()},this.featureCount_++}).bind(n)),n}return qd(e,t),e.prototype.handleSourceFeatureAdded_=function(t){var e=t.feature;this.featureCache_[r(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()},this.featureCount_++},e.prototype.handleSourceFeatureChanged_=function(t){var e=t.feature;this.featureCache_[r(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()}},e.prototype.handleSourceFeatureDelete_=function(t){delete this.featureCache_[r(t.feature)],this.featureCount_--},e.prototype.handleSourceFeatureClear_=function(){this.featureCache_={},this.featureCount_=0},e.prototype.renderFrame=function(t){var e=this.indicesBuffer_.getSize();this.helper.drawElements(0,e),this.helper.finalizeDraw(t);var i=this.helper.getCanvas(),n=t.layerStatesArray[t.layerIndex].opacity;return n!==parseFloat(i.style.opacity)&&(i.style.opacity=n),this.hitDetectionEnabled_&&(this.renderHitDetection(t),this.hitRenderTarget_.clearCachedData()),i},e.prototype.prepareFrame=function(t){var e=this.getLayer(),i=e.getSource(),n=t.viewState,r=!t.viewHints[0]&&!t.viewHints[1],o=!N(this.previousExtent_,t.extent),a=this.sourceRevision_<i.getRevision();if(a&&(this.sourceRevision_=i.getRevision()),r&&(o||a)){var s=n.projection,l=n.resolution,h=e instanceof Hd?e.getRenderBuffer():0,u=E(t.extent,h*l);i.loadFeatures(u,l,s),this.rebuildBuffers_(t),this.previousExtent_=t.extent.slice()}return this.helper.makeProjectionTransform(t,this.currentTransform_),jt(this.currentTransform_,this.invertRenderTransform_),this.helper.useProgram(this.program_),this.helper.prepareDraw(t),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes),!0},e.prototype.rebuildBuffers_=function(t){var e=[1,0,0,1,0,0];this.helper.makeProjectionTransform(t,e);var i,n,r=(2+this.customAttributes.length)*this.featureCount_;if(this.renderInstructions_&&this.renderInstructions_.length===r||(this.renderInstructions_=new Float32Array(r)),this.hitDetectionEnabled_){var o=(7+this.customAttributes.length)*this.featureCount_;this.hitRenderInstructions_&&this.hitRenderInstructions_.length===o||(this.hitRenderInstructions_=new Float32Array(o))}var a,s,l,h=[],u=[],c=0,p=0;for(var d in this.featureCache_)if((n=(i=this.featureCache_[d]).geometry)&&n.getType()===Xa.POINT){h[0]=n.getFlatCoordinates()[0],h[1]=n.getFlatCoordinates()[1],zt(e,h),s=p+6,l=void 0,(l=u||[])[0]=Math.floor(s/256/256/256)/255,l[1]=Math.floor(s/256/256)%256/255,l[2]=Math.floor(s/256)%256/255,l[3]=s%256/255,a=l,this.renderInstructions_[c++]=h[0],this.renderInstructions_[c++]=h[1],this.hitDetectionEnabled_&&(this.hitRenderInstructions_[p++]=h[0],this.hitRenderInstructions_[p++]=h[1],this.hitRenderInstructions_[p++]=a[0],this.hitRenderInstructions_[p++]=a[1],this.hitRenderInstructions_[p++]=a[2],this.hitRenderInstructions_[p++]=a[3],this.hitRenderInstructions_[p++]=Number(d));for(var f=void 0,g=0;g<this.customAttributes.length;g++)f=this.customAttributes[g].callback(i.feature,i.properties),this.renderInstructions_[c++]=f,this.hitDetectionEnabled_&&(this.hitRenderInstructions_[p++]=f)}var v={type:Yd,renderInstructions:this.renderInstructions_.buffer,customAttributesCount:this.customAttributes.length};if(v.projectionTransform=e,this.worker_.postMessage(v,[this.renderInstructions_.buffer]),this.renderInstructions_=null,this.hitDetectionEnabled_){var y={type:Yd,renderInstructions:this.hitRenderInstructions_.buffer,customAttributesCount:5+this.customAttributes.length};y.projectionTransform=e,y.hitDetection=!0,this.worker_.postMessage(y,[this.hitRenderInstructions_.buffer]),this.hitRenderInstructions_=null}},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,r){if(S(this.hitDetectionEnabled_,66),this.hitRenderInstructions_){var o=zt(e.coordinateToPixelTransform,t.slice()),a=this.hitRenderTarget_.readPixel(o[0]/2,o[1]/2),s=function(t){var e=0;return e+=Math.round(256*t[0]*256*256*255),e+=Math.round(256*t[1]*256*255),e+=Math.round(256*t[2]*255),e+=Math.round(255*t[3])}([a[0]/255,a[1]/255,a[2]/255,a[3]/255]),l=this.hitRenderInstructions_[s],h=Math.floor(l).toString(),u=this.getLayer().getSource().getFeatureByUid(h);return u?n(u,this.getLayer()):void 0}},e.prototype.renderHitDetection=function(t){if(this.hitVerticesBuffer_.getSize()){this.hitRenderTarget_.setSize([Math.floor(t.size[0]/2),Math.floor(t.size[1]/2)]),this.helper.useProgram(this.hitProgram_),this.helper.prepareDrawToRenderTarget(t,this.hitRenderTarget_,!0),this.helper.bindBuffer(this.hitVerticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.hitDetectionAttributes);var e=this.indicesBuffer_.getSize();this.helper.drawElements(0,e)}},e.prototype.disposeInternal=function(){this.worker_.terminate(),this.layer_=null,this.sourceListenKeys_.forEach(function(t){h(t)}),this.sourceListenKeys_=null,t.prototype.disposeInternal.call(this)},e}(Xd),Kd={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Jd=[Kd.FILL],$d=[Kd.STROKE],Qd=[Kd.BEGIN_PATH],tf=[Kd.CLOSE_PATH],ef=Kd,nf=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),rf=function(t){function e(e,i,n,r){var o=t.call(this)||this;return o.tolerance=e,o.maxExtent=i,o.pixelRatio=r,o.maxLineWidth=0,o.resolution=n,o.beginGeometryInstruction1_=null,o.beginGeometryInstruction2_=null,o.bufferedMaxExtent_=null,o.instructions=[],o.coordinates=[],o.tmpCoordinate_=[],o.hitDetectionInstructions=[],o.state={},o}return nf(e,t),e.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map(function(t){return t*e})},e.prototype.appendFlatCoordinates=function(t,e,i,n,r,o){var a=this.coordinates.length,s=this.getBufferedMaxExtent();o&&(e+=n);var l,h,u,c=t[e],p=t[e+1],d=this.tmpCoordinate_,f=!0;for(l=e+n;l<i;l+=n)d[0]=t[l],d[1]=t[l+1],(u=A(s,d))!==h?(f&&(this.coordinates[a++]=c,this.coordinates[a++]=p),this.coordinates[a++]=d[0],this.coordinates[a++]=d[1],f=!1):u===Fa?(this.coordinates[a++]=d[0],this.coordinates[a++]=d[1],f=!1):f=!0,c=d[0],p=d[1],h=u;return(r&&f||l===e+n)&&(this.coordinates[a++]=c,this.coordinates[a++]=p),a},e.prototype.drawCustomCoordinates_=function(t,e,i,n,r){for(var o=0,a=i.length;o<a;++o){var s=i[o],l=this.appendFlatCoordinates(t,e,s,n,!1,!1);r.push(l),e=s}return e},e.prototype.drawCustom=function(t,e,i){this.beginGeometry(t,e);var n,r,o,a,s,l=t.getType(),h=t.getStride(),u=this.coordinates.length;if(l==Xa.MULTI_POLYGON){n=(t=t).getOrientedFlatCoordinates(),a=[];var c=t.getEndss();s=0;for(var p=0,d=c.length;p<d;++p){var f=[];s=this.drawCustomCoordinates_(n,s,c[p],h,f),a.push(f)}this.instructions.push([ef.CUSTOM,u,a,t,i,re])}else l==Xa.POLYGON||l==Xa.MULTI_LINE_STRING?(o=[],n=l==Xa.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),s=this.drawCustomCoordinates_(n,0,t.getEnds(),h,o),this.instructions.push([ef.CUSTOM,u,o,t,i,ne])):l==Xa.LINE_STRING||l==Xa.MULTI_POINT?(n=t.getFlatCoordinates(),r=this.appendFlatCoordinates(n,0,n.length,h,!1,!1),this.instructions.push([ef.CUSTOM,u,r,t,i,ie])):l==Xa.POINT&&(n=t.getFlatCoordinates(),this.coordinates.push(n[0],n[1]),r=this.coordinates.length,this.instructions.push([ef.CUSTOM,u,r,t,i]));this.endGeometry(e)},e.prototype.beginGeometry=function(t,e){var i=t.getExtent();this.beginGeometryInstruction1_=[ef.BEGIN_GEOMETRY,e,0,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[ef.BEGIN_GEOMETRY,e,0,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},e.prototype.reverseHitDetectionInstructions=function(){var t,e=this.hitDetectionInstructions;e.reverse();var i,n,r=e.length,o=-1;for(t=0;t<r;++t)(n=(i=e[t])[0])==ef.END_GEOMETRY?o=t:n==ef.BEGIN_GEOMETRY&&(i[2]=t,d(this.hitDetectionInstructions,o,t),o=-1)},e.prototype.setFillStrokeStyle=function(t,e){var i=this.state;if(t){var n=t.getColor();i.fillStyle=bi(n||"#000")}else i.fillStyle=void 0;if(e){var r=e.getColor();i.strokeStyle=bi(r||"#000");var o=e.getLineCap();i.lineCap=void 0!==o?o:"round";var a=e.getLineDash();i.lineDash=a?a.slice():Gh;var s=e.getLineDashOffset();i.lineDashOffset=s||0;var l=e.getLineJoin();i.lineJoin=void 0!==l?l:"round";var h=e.getWidth();i.lineWidth=void 0!==h?h:1;var u=e.getMiterLimit();i.miterLimit=void 0!==u?u:10,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},e.prototype.createFill=function(t){var e=t.fillStyle,i=[ef.SET_FILL_STYLE,e];return"string"!=typeof e&&i.push(!0),i},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[ef.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,e){var i=t.fillStyle;"string"==typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)},e.prototype.updateStrokeStyle=function(t,e){var i=t.strokeStyle,n=t.lineCap,r=t.lineDash,o=t.lineDashOffset,a=t.lineJoin,s=t.lineWidth,l=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=n||r!=t.currentLineDash&&!v(t.currentLineDash,r)||t.currentLineDashOffset!=o||t.currentLineJoin!=a||t.currentLineWidth!=s||t.currentMiterLimit!=l)&&(void 0!==i&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=n,t.currentLineDash=r,t.currentLineDashOffset=o,t.currentLineJoin=a,t.currentLineWidth=s,t.currentMiterLimit=l)},e.prototype.endGeometry=function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var e=[ef.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)},e.prototype.getBufferedMaxExtent=function(){return!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=T(this.maxExtent),this.maxLineWidth>0)&&E(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_),this.bufferedMaxExtent_},e}(jh),of=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),af=function(t){function e(e,i,n,r){var o=t.call(this,e,i,n,r)||this;return o.declutterGroups_=null,o.hitDetectionImage_=null,o.image_=null,o.anchorX_=void 0,o.anchorY_=void 0,o.height_=void 0,o.opacity_=void 0,o.originX_=void 0,o.originY_=void 0,o.rotateWithView_=void 0,o.rotation_=void 0,o.scale_=void 0,o.width_=void 0,o}return of(e,t),e.prototype.drawCoordinates_=function(t,e,i,n){return this.appendFlatCoordinates(t,e,i,n,!1,!1)},e.prototype.drawPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),n=t.getStride(),r=this.coordinates.length,o=this.drawCoordinates_(i,0,i.length,n);this.instructions.push([ef.DRAW_IMAGE,r,o,this.image_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([ef.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(e)}},e.prototype.drawMultiPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),n=t.getStride(),r=this.coordinates.length,o=this.drawCoordinates_(i,0,i.length,n);this.instructions.push([ef.DRAW_IMAGE,r,o,this.image_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([ef.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(e)}},e.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,t.prototype.finish.call(this)},e.prototype.setImageStyle=function(t,e){var i=t.getAnchor(),n=t.getSize(),r=t.getHitDetectionImage(1),o=t.getImage(1),a=t.getOrigin();this.anchorX_=i[0],this.anchorY_=i[1],this.declutterGroups_=e,this.hitDetectionImage_=r,this.image_=o,this.height_=n[1],this.opacity_=t.getOpacity(),this.originX_=a[0],this.originY_=a[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScale(),this.width_=n[0]},e}(rf),sf=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),lf=function(t){function e(e,i,n,r){return t.call(this,e,i,n,r)||this}return sf(e,t),e.prototype.drawFlatCoordinates_=function(t,e,i,n){var r=this.coordinates.length,o=this.appendFlatCoordinates(t,e,i,n,!1,!1),a=[ef.MOVE_TO_LINE_TO,r,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i},e.prototype.drawLineString=function(t,e){var i=this.state;if(void 0!==i.strokeStyle&&void 0!==i.lineWidth){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([ef.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],Qd);var n=t.getFlatCoordinates(),r=t.getStride();this.drawFlatCoordinates_(n,0,n.length,r),this.hitDetectionInstructions.push($d),this.endGeometry(e)}},e.prototype.drawMultiLineString=function(t,e){var i=this.state;if(void 0!==i.strokeStyle&&void 0!==i.lineWidth){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([ef.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],Qd);for(var n=t.getEnds(),r=t.getFlatCoordinates(),o=t.getStride(),a=0,s=0,l=n.length;s<l;++s)a=this.drawFlatCoordinates_(r,a,n[s],o);this.hitDetectionInstructions.push($d),this.endGeometry(e)}},e.prototype.finish=function(){var e=this.state;return null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push($d),this.reverseHitDetectionInstructions(),this.state=null,t.prototype.finish.call(this)},e.prototype.applyStroke=function(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push($d),e.lastStroke=this.coordinates.length),e.lastStroke=0,t.prototype.applyStroke.call(this,e),this.instructions.push(Qd)},e}(rf),hf=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),uf=function(t){function e(e,i,n,r){return t.call(this,e,i,n,r)||this}return hf(e,t),e.prototype.drawFlatCoordinatess_=function(t,e,i,n){var r=this.state,o=void 0!==r.fillStyle,a=void 0!==r.strokeStyle,s=i.length;this.instructions.push(Qd),this.hitDetectionInstructions.push(Qd);for(var l=0;l<s;++l){var h=i[l],u=this.coordinates.length,c=this.appendFlatCoordinates(t,e,h,n,!0,!a),p=[ef.MOVE_TO_LINE_TO,u,c];this.instructions.push(p),this.hitDetectionInstructions.push(p),a&&(this.instructions.push(tf),this.hitDetectionInstructions.push(tf)),e=h}return o&&(this.instructions.push(Jd),this.hitDetectionInstructions.push(Jd)),a&&(this.instructions.push($d),this.hitDetectionInstructions.push($d)),e},e.prototype.drawCircle=function(t,e){var i=this.state;if(void 0!==i.fillStyle||void 0!==i.strokeStyle){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([ef.SET_FILL_STYLE,"#000"]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([ef.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var n=t.getFlatCoordinates(),r=t.getStride(),o=this.coordinates.length;this.appendFlatCoordinates(n,0,n.length,r,!1,!1);var a=[ef.CIRCLE,o];this.instructions.push(Qd,a),this.hitDetectionInstructions.push(Qd,a),void 0!==i.fillStyle&&(this.instructions.push(Jd),this.hitDetectionInstructions.push(Jd)),void 0!==i.strokeStyle&&(this.instructions.push($d),this.hitDetectionInstructions.push($d)),this.endGeometry(e)}},e.prototype.drawPolygon=function(t,e){var i=this.state;if(void 0!==i.fillStyle||void 0!==i.strokeStyle){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([ef.SET_FILL_STYLE,"#000"]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([ef.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var n=t.getEnds(),r=t.getOrientedFlatCoordinates(),o=t.getStride();this.drawFlatCoordinatess_(r,0,n,o),this.endGeometry(e)}},e.prototype.drawMultiPolygon=function(t,e){var i=this.state;if(void 0!==i.fillStyle||void 0!==i.strokeStyle){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([ef.SET_FILL_STYLE,"#000"]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([ef.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);for(var n=t.getEndss(),r=t.getOrientedFlatCoordinates(),o=t.getStride(),a=0,s=0,l=n.length;s<l;++s)a=this.drawFlatCoordinatess_(r,a,n[s],o);this.endGeometry(e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var e=this.tolerance;if(0!==e)for(var i=this.coordinates,n=0,r=i.length;n<r;++n)i[n]=ae(i[n],e);return t.prototype.finish.call(this)},e.prototype.setFillStrokeStyles_=function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)},e}(rf),cf=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),pf={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},df={Circle:uf,Default:rf,Image:af,LineString:lf,Polygon:uf,Text:function(t){function e(e,i,n,r){var o=t.call(this,e,i,n,r)||this;return o.labels_=null,o.text_="",o.textOffsetX_=0,o.textOffsetY_=0,o.textRotateWithView_=void 0,o.textRotation_=0,o.textFillState_=null,o.fillStates={},o.textStrokeState_=null,o.strokeStates={},o.textState_={},o.textStates={},o.textKey_="",o.fillKey_="",o.strokeKey_="",o}return cf(e,t),e.prototype.finish=function(){var e=t.prototype.finish.call(this);return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e},e.prototype.drawText=function(t,e){var i=this.textState_;if(""!==this.text_&&i&&(this.textFillState_||this.textStrokeState_)){var n,r,o=this.coordinates.length,a=t.getType(),s=null,l=2,h=2;if("line"===i.placement){if(!J(this.getBufferedMaxExtent(),t.getExtent()))return;var u=void 0;if(s=t.getFlatCoordinates(),h=t.getStride(),a==Xa.LINE_STRING)u=[s.length];else if(a==Xa.MULTI_LINE_STRING)u=t.getEnds();else if(a==Xa.POLYGON)u=t.getEnds().slice(0,1);else if(a==Xa.MULTI_POLYGON){var c=t.getEndss();for(u=[],n=0,r=c.length;n<r;++n)u.push(c[n][0])}this.beginGeometry(t,e);for(var p=i.textAlign,d=0,f=void 0,g=0,v=u.length;g<v;++g){if(null==p){var y=Xn(i.maxAngle,s,d,u[g],h);d=y[0],f=y[1]}else f=u[g];for(n=d;n<f;n+=h)this.coordinates.push(s[n],s[n+1]);l=this.coordinates.length,d=u[g];var m=this.declutterGroups_?0===g?this.declutterGroups_[0]:[].concat(this.declutterGroups_[0]):null;this.drawChars_(o,l,m),o=l}this.endGeometry(e)}else{var _=null;switch(i.overflow||(_=[]),a){case Xa.POINT:case Xa.MULTI_POINT:l=(s=t.getFlatCoordinates()).length;break;case Xa.LINE_STRING:s=t.getFlatMidpoint();break;case Xa.CIRCLE:s=t.getCenter();break;case Xa.MULTI_LINE_STRING:l=(s=t.getFlatMidpoints()).length;break;case Xa.POLYGON:s=t.getFlatInteriorPoint(),i.overflow||_.push(s[2]/this.resolution),h=3;break;case Xa.MULTI_POLYGON:var x=t.getFlatInteriorPoints();for(s=[],n=0,r=x.length;n<r;n+=3)i.overflow||_.push(x[n+2]/this.resolution),s.push(x[n],x[n+1]);if(0==(l=s.length))return}l=this.appendFlatCoordinates(s,0,l,h,!1,!1),this.saveTextStates_(),(i.backgroundFill||i.backgroundStroke)&&(this.setFillStrokeStyle(i.backgroundFill,i.backgroundStroke),i.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),i.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);var b=this.pixelRatio;this.instructions.push([ef.DRAW_IMAGE,o,l,null,NaN,NaN,this.declutterGroups_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,1,NaN,i.padding==zh?zh:i.padding.map(function(t){return t*b}),!!i.backgroundFill,!!i.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,_]),this.hitDetectionInstructions.push([ef.DRAW_IMAGE,o,l,null,NaN,NaN,this.declutterGroups_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,1/this.pixelRatio,NaN,i.padding,!!i.backgroundFill,!!i.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,_]),this.endGeometry(e)}}},e.prototype.saveTextStates_=function(){var t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,n=this.strokeKey_;t&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var r=this.textKey_;r in this.textStates||(this.textStates[r]={font:e.font,textAlign:e.textAlign||"center",textBaseline:e.textBaseline||"middle",scale:e.scale});var o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))},e.prototype.drawChars_=function(t,e,i){var n=this.textStrokeState_,r=this.textState_,o=this.strokeKey_,a=this.textKey_,s=this.fillKey_;this.saveTextStates_();var l=this.pixelRatio,h=pf[r.textBaseline],u=this.textOffsetY_*l,c=this.text_,p=n?n.lineWidth*r.scale/2:0;this.instructions.push([ef.DRAW_CHARS,t,e,h,i,r.overflow,s,r.maxAngle,l,u,o,p*l,c,a,1]),this.hitDetectionInstructions.push([ef.DRAW_CHARS,t,e,h,i,r.overflow,s,r.maxAngle,1,u,o,p,c,a,1/l])},e.prototype.setTextStyle=function(t,e){var i,n,o;if(t){this.declutterGroups_=e;var a=t.getFill();a?((n=this.textFillState_)||(n={},this.textFillState_=n),n.fillStyle=bi(a.getColor()||"#000")):(n=null,this.textFillState_=n);var s=t.getStroke();if(s){(o=this.textStrokeState_)||(o={},this.textStrokeState_=o);var l=s.getLineDash(),h=s.getLineDashOffset(),u=s.getWidth(),c=s.getMiterLimit();o.lineCap=s.getLineCap()||"round",o.lineDash=l?l.slice():Gh,o.lineDashOffset=void 0===h?0:h,o.lineJoin=s.getLineJoin()||"round",o.lineWidth=void 0===u?1:u,o.miterLimit=void 0===c?10:c,o.strokeStyle=bi(s.getColor()||"#000")}else o=null,this.textStrokeState_=o;i=this.textState_;var p=t.getFont()||"10px sans-serif";Zh(p);var d=t.getScale();i.overflow=t.getOverflow(),i.font=p,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.textBaseline=t.getTextBaseline()||"middle",i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||zh,i.scale=void 0===d?1:d;var f=t.getOffsetX(),g=t.getOffsetY(),v=t.getRotateWithView(),y=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===f?0:f,this.textOffsetY_=void 0===g?0:g,this.textRotateWithView_=void 0!==v&&v,this.textRotation_=void 0===y?0:y,this.strokeKey_=o?("string"==typeof o.strokeStyle?o.strokeStyle:r(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.textBaseline||"?"),this.fillKey_=n?"string"==typeof n.fillStyle?n.fillStyle:"|"+r(n.fillStyle):""}else this.text_=""},e}(rf)},ff=function(){function t(t,e,i,n,r){this.declutter_=r,this.declutterGroups_=null,this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=n,this.resolution_=i,this.buildersByZIndex_={}}return t.prototype.addDeclutter=function(t){var e=null;return this.declutter_&&(t?(e=this.declutterGroups_)[0][4]++:(e=[[1/0,1/0,-1/0,-1/0]],this.declutterGroups_=e,e[0].push(1))),e},t.prototype.finish=function(){var t={};for(var e in this.buildersByZIndex_){t[e]=t[e]||{};var i=this.buildersByZIndex_[e];for(var n in i){var r=i[n].finish();t[e][n]=r}}return t},t.prototype.getBuilder=function(t,e){var i=void 0!==t?t.toString():"0",n=this.buildersByZIndex_[i];void 0===n&&(n={},this.buildersByZIndex_[i]=n);var r=n[e];return void 0===r&&(r=new(0,df[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[e]=r),r},t}(),gf=[1/0,1/0,-1/0,-1/0],vf=[1,0,0,1,0,0],yf=[],mf=[],_f=[],xf=[],bf=function(){function t(t,e,i,n){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.declutterItems=[],this.instructions=n.instructions,this.coordinates=n.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=n.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=n.fillStates||{},this.strokeStates=n.strokeStates||{},this.textStates=n.textStates||{},this.widths_={},this.labels_={}}return t.prototype.createLabel=function(t,e,i,n){var r=t+e+i+n;if(this.labels_[r])return this.labels_[r];var o=n?this.strokeStates[n]:null,a=i?this.fillStates[i]:null,s=this.textStates[e],l=s.scale*this.pixelRatio,h=pf[s.textAlign||"center"],u=n&&o.lineWidth?o.lineWidth:0,c=t.split("\n"),p=c.length,d=[],f=function(t,e,i){for(var n=e.length,r=0,o=0;o<n;++o){var a=Si(t,e[o]);r=Math.max(r,a),i.push(a)}return r}(s.font,c,d),g=Kh(s.font),v=g*p,y=f+u,m=[],_={width:Math.ceil((y+2)*l),height:Math.ceil((v+u)*l),contextInstructions:m};1!=l&&m.push("scale",[l,l]),m.push("font",s.font),n&&(m.push("strokeStyle",o.strokeStyle),m.push("lineWidth",u),m.push("lineCap",o.lineCap),m.push("lineJoin",o.lineJoin),m.push("miterLimit",o.miterLimit),(Ys?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(m.push("setLineDash",[o.lineDash]),m.push("lineDashOffset",o.lineDashOffset))),i&&m.push("fillStyle",a.fillStyle),m.push("textBaseline","middle"),m.push("textAlign","center");var x,b=.5-h,w=h*y+b*u;if(n)for(x=0;x<p;++x)m.push("strokeText",[c[x],w+b*d[x],.5*(u+g)+x*g]);if(i)for(x=0;x<p;++x)m.push("fillText",[c[x],w+b*d[x],.5*(u+g)+x*g]);return this.labels_[r]=_,_},t.prototype.replayTextBackground_=function(t,e,i,n,r,o,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,n),t.lineTo.apply(t,r),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())},t.prototype.replayImageOrLabel_=function(t,e,i,n,r,o,a,s,l,h,u,c,p,d,f,g,v,y){var m=v||y;e-=r*=p,i-=o*=p;var _=f+h>n.width?n.width-h:f,x=s+u>n.height?n.height-u:s,b=g[3]+_*p+g[1],w=g[0]+x*p+g[2],S=e-g[3],C=i-g[0];(m||0!==c)&&(yf[0]=S,xf[0]=S,yf[1]=C,mf[1]=C,mf[0]=S+b,_f[0]=mf[0],_f[1]=C+w,xf[1]=_f[1]);var E=null;if(0!==c){var T=e+r,P=i+o;E=Yt(vf,T,P,1,1,c,-T,-P),zt(vf,yf),zt(vf,mf),zt(vf,_f),zt(vf,xf),R(Math.min(yf[0],mf[0],_f[0],xf[0]),Math.min(yf[1],mf[1],_f[1],xf[1]),Math.max(yf[0],mf[0],_f[0],xf[0]),Math.max(yf[1],mf[1],_f[1],xf[1]),gf)}else R(S,C,S+b,C+w,gf);var L=t.canvas,I=y?y[2]*p/2:0,O=gf[0]-I<=L.width&&gf[2]+I>=0&&gf[1]-I<=L.height&&gf[3]+I>=0;if(d&&(e=Math.round(e),i=Math.round(i)),a){if(!O&&1==a[4])return;D(a,gf);var A=O?[t,E?E.slice(0):null,l,n,h,u,_,x,e,i,p]:null;A&&(m&&A.push(v,y,yf.slice(0),mf.slice(0),_f.slice(0),xf.slice(0)),a.push(A))}else O&&(m&&this.replayTextBackground_(t,yf,mf,_f,xf,v,y),Ti(t,E,l,n,h,u,_,x,e,i,p))},t.prototype.fill_=function(t){if(this.alignFill_){var e=zt(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()},t.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.setLineDash&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},t.prototype.renderDeclutter=function(t,e,i,n){if(t&&t.length>5){var r=t[4];if(1==r||r==t.length-5){var o={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};if(n||(n=new tp.a(9)),!n.collides(o)){n.insert(o);for(var a=5,s=t.length;a<s;++a){var l=t[a],h=l[0],u=h.globalAlpha;u!==i&&(h.globalAlpha=i),l.length>11&&this.replayTextBackground_(l[0],l[13],l[14],l[15],l[16],l[11],l[12]),Ti.apply(void 0,l),u!==i&&(h.globalAlpha=u)}}t.length=5,M(t)}}return n},t.prototype.drawLabelWithPointPlacement_=function(t,e,i,n){var r=this.textStates[e],o=this.createLabel(t,e,n,i),a=this.strokeStates[i],s=this.pixelRatio,l=pf[r.textAlign||"center"],h=pf[r.textBaseline||"middle"],u=a&&a.lineWidth?a.lineWidth:0;return{label:o,anchorX:l*(o.width/s-2*r.scale)+2*(.5-l)*u,anchorY:h*o.height/s+2*(.5-h)*u}},t.prototype.execute_=function(t,e,i,n,r,o){var a,s,l;this.declutterItems.length=0,this.pixelCoordinates_&&v(e,this.renderedTransform_)?a=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),a=it(this.coordinates,0,this.coordinates.length,2,e,this.pixelCoordinates_),s=this.renderedTransform_,l=e,s[0]=l[0],s[1]=l[1],s[2]=l[2],s[3]=l[3],s[4]=l[4],s[5]=l[5]);for(var h,u,c,p,d,f,g,y,m,_,x,b,w,S,C,E,T,P=0,L=i.length,I=0,O=0,A=0,R=null,M=null,F=this.coordinateCache_,k=this.viewRotation_,N=Math.round(1e12*Math.atan2(-e[1],e[0]))/1e12,D={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:k},j=this.instructions!=i||this.overlaps?0:200;P<L;){var G=i[P];switch(G[0]){case ef.BEGIN_GEOMETRY:(C=G[1]).getGeometry()?void 0===o||J(o,G[3])?++P:P=G[2]+1:P=G[2];break;case ef.BEGIN_PATH:O>j&&(this.fill_(t),O=0),A>j&&(t.stroke(),A=0),O||A||(t.beginPath(),p=NaN,d=NaN),++P;break;case ef.CIRCLE:var z=a[I=G[1]],B=a[I+1],Y=a[I+2]-z,X=a[I+3]-B,W=Math.sqrt(Y*Y+X*X);t.moveTo(z+W,B),t.arc(z,B,W,0,2*Math.PI,!0),++P;break;case ef.CLOSE_PATH:t.closePath(),++P;break;case ef.CUSTOM:I=G[1],h=G[2];var U=G[4],V=6==G.length?G[5]:void 0;D.geometry=G[3],D.feature=C,P in F||(F[P]=[]);var H=F[P];V?V(a,I,h,2,H):(H[0]=a[I],H[1]=a[I+1],H.length=2),U(H,D),++P;break;case ef.DRAW_IMAGE:I=G[1],h=G[2],_=G[3],u=G[4],c=G[5],m=r?null:G[6];var q=G[7],Z=G[8],K=G[9],$=G[10],Q=G[11],tt=G[12],et=G[13],nt=G[14];if(!_&&G.length>=19){var rt=this.drawLabelWithPointPlacement_(x=G[18],b=G[19],w=G[20],S=G[21]);G[3]=_=rt.label,G[4]=u=(rt.anchorX-G[22])*this.pixelRatio,G[5]=c=(rt.anchorY-G[23])*this.pixelRatio,G[7]=q=_.height,G[14]=nt=_.width}var ot=void 0;G.length>24&&(ot=G[24]);var at=void 0,st=void 0,lt=void 0;G.length>16?(at=G[15],st=G[16],lt=G[17]):(at=zh,st=!1,lt=!1),Q&&N?tt+=k:Q||N||(tt-=k);for(var ht=0,ut=0;I<h;I+=2)if(!(ot&&ot[ht++]<nt/this.pixelRatio)){if(m){var ct=Math.floor(ut);m.length<ct+1&&((y=[1/0,1/0,-1/0,-1/0]).push(m[0][4]),m.push(y)),y=m[ct]}this.replayImageOrLabel_(t,a[I],a[I+1],_,u,c,y,q,Z,K,$,tt,et,n,nt,at,st?R:null,lt?M:null),y&&(ut===Math.floor(ut)&&this.declutterItems.push(this,y,C),ut+=1/y[4])}++P;break;case ef.DRAW_CHARS:var pt=G[1],dt=G[2],ft=G[3];y=r?null:G[4];var gt=G[5];S=G[6];var vt=G[7],yt=G[9];w=G[10];var mt=G[11];x=G[12];var _t=G[14],xt=this.textStates[b=G[13]],bt=xt.font,wt=xt.scale*G[8],St=void 0;bt in this.widths_?St=this.widths_[bt]:(St={},this.widths_[bt]=St);var Ct=Wn(a,pt,dt,2),Et=wt*Ci(bt,x,St);if(gt||Et<=Ct){var Tt=Un(a,pt,dt,2,x,(Ct-Et)*pf[this.textStates[b].textAlign],vt,wt,Ci,bt,St);if(Tt){var Pt=void 0,Lt=void 0,It=void 0,Ot=void 0,At=void 0;if(w)for(Pt=0,Lt=Tt.length;Pt<Lt;++Pt)It=(At=Tt[Pt])[4],Ot=this.createLabel(It,b,"",w),u=At[2]+mt,c=ft*Ot.height+2*(.5-ft)*mt-yt,this.replayImageOrLabel_(t,At[0],At[1],Ot,u,c,y,Ot.height,1,0,0,At[3],_t,!1,Ot.width,zh,null,null);if(S)for(Pt=0,Lt=Tt.length;Pt<Lt;++Pt)It=(At=Tt[Pt])[4],Ot=this.createLabel(It,b,S,""),u=At[2],c=ft*Ot.height-yt,this.replayImageOrLabel_(t,At[0],At[1],Ot,u,c,y,Ot.height,1,0,0,At[3],_t,!1,Ot.width,zh,null,null)}}this.declutterItems.push(this,y,C),++P;break;case ef.END_GEOMETRY:if(void 0!==r){var Rt=r(C=G[1]);if(Rt)return Rt}++P;break;case ef.FILL:j?O++:this.fill_(t),++P;break;case ef.MOVE_TO_LINE_TO:for(h=G[2],g=(T=a[(I=G[1])+1])+.5|0,(f=(E=a[I])+.5|0)===p&&g===d||(t.moveTo(E,T),p=f,d=g),I+=2;I<h;I+=2)f=(E=a[I])+.5|0,g=(T=a[I+1])+.5|0,I!=h-2&&f===p&&g===d||(t.lineTo(E,T),p=f,d=g);++P;break;case ef.SET_FILL_STYLE:R=G,this.alignFill_=G[2],O&&(this.fill_(t),O=0,A&&(t.stroke(),A=0)),t.fillStyle=G[1],++P;break;case ef.SET_STROKE_STYLE:M=G,A&&(t.stroke(),A=0),this.setStrokeStyle_(t,G),++P;break;case ef.STROKE:j?A++:t.stroke(),++P;break;default:++P}}O&&this.fill_(t),A&&t.stroke()},t.prototype.execute=function(t,e,i,n){this.viewRotation_=i,this.execute_(t,e,this.instructions,n,void 0,void 0)},t.prototype.executeHitDetection=function(t,e,i,n,r){return this.viewRotation_=i,this.execute_(t,e,this.hitDetectionInstructions,!0,n,r)},t}(),wf=["Polygon","Circle",au,ou,su,ru],Sf=function(){function t(t,e,i,n,r,o){this.maxExtent_=t,this.overlaps_=n,this.pixelRatio_=i,this.resolution_=e,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.createExecutors_(r)}return t.prototype.clip=function(t,e){var i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()},t.prototype.createExecutors_=function(t){for(var e in t){var i=this.executorsByZIndex_[e];void 0===i&&(i={},this.executorsByZIndex_[e]=i);var n=t[e];for(var r in n)i[r]=new bf(this.resolution_,this.pixelRatio_,this.overlaps_,n[r])}},t.prototype.hasExecutors=function(t){for(var e in this.executorsByZIndex_)for(var i=this.executorsByZIndex_[e],n=0,r=t.length;n<r;++n)if(t[n]in i)return!0;return!1},t.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,r,o){function a(t){for(var e=c.getImageData(0,0,s,s).data,i=0;i<s;i++)for(var n=0;n<s;n++)if(m[i][n]&&e[4*(n*s+i)+3]>0){var a=void 0;return(!o||p!=ou&&p!=su||-1!==o.indexOf(t))&&(a=r(t)),a||void c.clearRect(0,0,s,s)}}var s=2*(n=Math.round(n))+1,l=Yt(this.hitDetectionTransform_,n+.5,n+.5,1/e,-1/e,-i,-t[0],-t[1]);this.hitDetectionContext_||(this.hitDetectionContext_=Qe(s,s));var h,c=this.hitDetectionContext_;c.canvas.width!==s||c.canvas.height!==s?(c.canvas.width=s,c.canvas.height=s):c.clearRect(0,0,s,s),void 0!==this.renderBuffer_&&(j(h=[1/0,1/0,-1/0,-1/0],t),E(h,e*(this.renderBuffer_+n),h));var p,d,f,g,v,y,m=function(t){if(void 0!==Cf[t])return Cf[t];for(var e=2*t+1,i=new Array(e),n=0;n<e;n++)i[n]=new Array(e);for(var r=t,o=0,a=0;r>=o;)Vn(i,t+r,t+o),Vn(i,t+o,t+r),Vn(i,t-o,t+r),Vn(i,t-r,t+o),Vn(i,t-r,t-o),Vn(i,t-o,t-r),Vn(i,t+o,t-r),Vn(i,t+r,t-o),o++,2*((a+=1+2*o)-r)+1>0&&(a+=1-2*(r-=1));return Cf[t]=i,i}(n),_=Object.keys(this.executorsByZIndex_).map(Number);for(_.sort(u),d=_.length-1;d>=0;--d){var x=_[d].toString();for(g=this.executorsByZIndex_[x],f=wf.length-1;f>=0;--f)if(void 0!==(v=g[p=wf[f]])&&(y=v.executeHitDetection(c,l,i,a,h)))return y}},t.prototype.getClipCoords=function(t){var e=this.maxExtent_;if(!e)return null;var i=e[0],n=e[1],r=e[2],o=e[3],a=[i,n,i,o,r,o,r,n];return it(a,0,8,2,t,a),a},t.prototype.isEmpty=function(){return a(this.executorsByZIndex_)},t.prototype.execute=function(t,e,i,n,r,o){var a=Object.keys(this.executorsByZIndex_).map(Number);a.sort(u),this.maxExtent_&&(t.save(),this.clip(t,e));var s,l,h,c,p,d,f=r||wf;for(s=0,l=a.length;s<l;++s){var g=a[s].toString();for(p=this.executorsByZIndex_[g],h=0,c=f.length;h<c;++h){var v=f[h];if(void 0!==(d=p[v]))if(!o||v!=ou&&v!=su)d.execute(t,e,i,n);else{var y=o[g];y?y.push(d,e.slice(0)):o[g]=[d,e.slice(0)]}}}this.maxExtent_&&t.restore()},t}(),Cf={0:[[!0]]},Ef=Sf,Tf=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Pf=function(t){function e(e){var i=t.call(this,e)||this;return i.boundHandleStyleImageChange_=i.handleStyleImageChange_.bind(i),i.dirty_=!1,i.hitDetectionImageData_=null,i.renderedFeatures_=null,i.renderedRevision_=-1,i.renderedResolution_=NaN,i.renderedExtent_=[1/0,1/0,-1/0,-1/0],i.renderedCenter_=null,i.renderedProjection_=null,i.renderedRenderOrder_=null,i.replayGroup_=null,i.replayGroupChanged=!0,i}return Tf(e,t),e.prototype.useContainer=function(e,i,n){n<1&&(e=null),t.prototype.useContainer.call(this,e,i,n)},e.prototype.renderFrame=function(t,e){var i=t.pixelRatio,n=t.layerStatesArray[t.layerIndex];!function(t,e,n){Gt(t,1/i,0,0,1/i,0,0)}(this.pixelTransform),Xt(this.inversePixelTransform,this.pixelTransform);var r=Wt(this.pixelTransform);this.useContainer(e,r,n.opacity);var o=this.context,a=o.canvas,s=this.replayGroup_;if(!s||s.isEmpty())return!this.containerReused&&a.width>0&&(a.width=0),this.container;var l=Math.round(t.size[0]*i),h=Math.round(t.size[1]*i);a.width!=l||a.height!=h?(a.width=l,a.height=h,a.style.transform!==r&&(a.style.transform=r)):this.containerReused||o.clearRect(0,0,l,h),this.preRender(o,t);var u=t.extent,c=t.viewState,p=c.center,d=c.resolution,f=c.projection,g=c.rotation,v=f.getExtent(),y=this.getLayer().getSource(),m=!1;if(n.extent){var _=Nt(n.extent,f);(m=!I(_,t.extent)&&J(_,t.extent))&&this.clip(o,t,_)}var x=t.viewHints,b=!(x[0]||x[1]),w=this.getRenderTransform(p,d,g,i,l,h,0),S=this.getLayer().getDeclutter()?{}:null;if(s.execute(o,w,g,b,void 0,S),y.getWrapX()&&f.canWrapX()&&!I(v,u)){for(var C=u[0],E=K(v),T=0,P=void 0;C<v[0];){P=E*--T;var L=this.getRenderTransform(p,d,g,i,l,h,P);s.execute(o,L,g,b,void 0,S),C+=E}for(T=0,C=u[2];C>v[2];){P=E*++T;var O=this.getRenderTransform(p,d,g,i,l,h,P);s.execute(o,O,g,b,void 0,S),C-=E}}if(S){var A=t.viewHints;Hn(S,o,g,1,!(A[0]||A[1]),t.declutterItems)}m&&o.restore(),this.postRender(o,t);var R=n.opacity,M=this.container;return R!==parseFloat(M.style.opacity)&&(M.style.opacity=1===R?"":R),this.container},e.prototype.getFeatures=function(t){return new Promise((function(e,i){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var n=[this.context.canvas.width,this.context.canvas.height];zt(this.pixelTransform,n);var r=this.renderedCenter_,o=this.renderedResolution_,a=this.renderedRotation_,s=this.renderedProjection_,l=this.renderedExtent_,h=this.getLayer(),u=[],c=n[0]/2,p=n[1]/2;u.push(this.getRenderTransform(r,o,a,.5,c,p,0).slice());var d=h.getSource(),f=s.getExtent();if(d.getWrapX()&&s.canWrapX()&&!I(f,l)){for(var g=l[0],v=K(f),y=0,m=void 0;g<f[0];)m=v*--y,u.push(this.getRenderTransform(r,o,a,.5,c,p,m).slice()),g+=v;for(y=0,g=l[2];g>f[2];)m=v*++y,u.push(this.getRenderTransform(r,o,a,.5,c,p,m).slice()),g-=v}this.hitDetectionImageData_=qn(n,u,this.renderedFeatures_,h.getStyleFunction(),l,o,a)}e(Zn(t,this.renderedFeatures_,this.hitDetectionImageData_))}).bind(this))},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,o){if(this.replayGroup_){var a=e.viewState.resolution,s=e.viewState.rotation,l=this.getLayer(),h={};return this.replayGroup_.forEachFeatureAtCoordinate(t,a,s,i,function(t){var e=r(t);if(!(e in h))return h[e]=!0,n(t,l)},l.getDeclutter()?o:null)}},e.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t){var e=this.getLayer(),i=e.getSource();if(!i)return!1;var n=t.viewHints[0],r=t.viewHints[1],o=e.getUpdateWhileAnimating(),a=e.getUpdateWhileInteracting();if(!this.dirty_&&!o&&n||!a&&r)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var s=t.extent,l=t.viewState,h=l.projection,u=l.resolution,c=t.pixelRatio,p=e.getRevision(),d=e.getRenderBuffer(),f=e.getRenderOrder();void 0===f&&(f=Li);var g=l.center.slice(),v=E(s,d*u),y=[v.slice()],m=h.getExtent();if(i.getWrapX()&&h.canWrapX()&&!I(m,t.extent)){var _=K(m),x=Math.max(K(v)/2,_);v[0]=m[0]-x,v[2]=m[2]+x,Ve(g,h);var b=et(y[0],h);b[0]<m[0]&&b[2]<m[2]?y.push([b[0]+_,b[1],b[2]+_,b[3]]):b[0]>m[0]&&b[2]>m[2]&&y.push([b[0]-_,b[1],b[2]-_,b[3]])}if(!this.dirty_&&this.renderedResolution_==u&&this.renderedRevision_==p&&this.renderedRenderOrder_==f&&I(this.renderedExtent_,v))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var w,S=new ff(Oi(u,c),v,u,c,e.getDeclutter()),C=Rt();if(C){for(var T=0,P=y.length;T<P;++T)i.loadFeatures(kt(y[T],h),u,C);w=Lt(C,h)}else for(T=0,P=y.length;T<P;++T)i.loadFeatures(y[T],u,h);var L=Ii(u,c),O=(function(t){var i,n=t.getStyleFunction()||e.getStyleFunction();if(n&&(i=n(t,u)),i){var r=this.renderFeature(t,L,i,S,w);this.dirty_=this.dirty_||r}}).bind(this),A=kt(v,h),R=i.getFeaturesInExtent(A);for(f&&R.sort(f),T=0,P=R.length;T<P;++T)O(R[T]);this.renderedFeatures_=R;var M=S.finish(),F=new Ef(v,u,c,i.getOverlaps(),M,e.getRenderBuffer());return this.renderedResolution_=u,this.renderedRevision_=p,this.renderedRenderOrder_=f,this.renderedExtent_=v,this.renderedRotation_=l.rotation,this.renderedCenter_=g,this.renderedProjection_=h,this.replayGroup_=F,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(t,e,i,n,r){if(!i)return!1;var o=!1;if(Array.isArray(i))for(var a=0,s=i.length;a<s;++a)o=Ai(n,t,i[a],e,this.boundHandleStyleImageChange_,r)||o;else o=Ai(n,t,i,e,this.boundHandleStyleImageChange_,r);return o},e}(Kp),Lf=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),If=function(t){function e(e){var i=t.call(this,e)||this;return i.vectorRenderer_=new Pf(e),i.layerImageRatio_=e.getImageRatio(),i.coordinateToVectorPixelTransform_=[1,0,0,1,0,0],i.renderedPixelToCoordinateTransform_=null,i}return Lf(e,t),e.prototype.disposeInternal=function(){this.vectorRenderer_.dispose(),t.prototype.disposeInternal.call(this)},e.prototype.getFeatures=function(t){if(this.vectorRenderer_){var e=zt(this.coordinateToVectorPixelTransform_,zt(this.renderedPixelToCoordinateTransform_,t.slice()));return this.vectorRenderer_.getFeatures(e)}return new Promise(function(t,e){t([])})},e.prototype.handleFontsChanged=function(){this.vectorRenderer_.handleFontsChanged()},e.prototype.prepareFrame=function(t){var e=t.pixelRatio,i=t.viewState,n=i.resolution,r=t.viewHints,o=this.vectorRenderer_,a=t.extent;1!==this.layerImageRatio_&&Q(a=a.slice(0),this.layerImageRatio_);var s=K(a)/n,l=V(a)/n;if(!r[0]&&!r[1]&&!$(a)){o.useContainer(null,null,1);var h=o.context,u=na({},t,{declutterItems:[],extent:a,size:[s,l],viewState:na({},t.viewState,{rotation:0})}),c=new Ap(a,n,e,h.canvas,function(t){o.prepareFrame(u)&&o.replayGroupChanged&&(o.renderFrame(u,null),Mi(u,null),t())});c.addEventListener(ha,(function(){c.getState()===eu&&(this.image_=c)}).bind(this)),c.load()}if(this.image_){var p=this.image_,d=p.getResolution()*e/p.getPixelRatio();this.renderedResolution=d,this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.coordinateToVectorPixelTransform_=Yt(this.coordinateToVectorPixelTransform_,s/2,l/2,1/d,-1/d,0,-i.center[0],-i.center[1])}return!!this.image_},e.prototype.preRender=function(){},e.prototype.postRender=function(){},e.prototype.forEachFeatureAtCoordinate=function(e,i,n,r,o){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(e,i,n,r,o):t.prototype.forEachFeatureAtCoordinate.call(this,e,i,n,r,o)},e}($p),Of="image",Af="hybrid",Rf="vector",Mf=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ff={image:["Polygon","Circle",au,ou,su],hybrid:["Polygon",au],vector:[]},kf={image:[ru],hybrid:[ou,su,ru],vector:["Polygon","Circle",au,ou,su,ru]},Nf=function(t){function e(e){var i=t.call(this,e)||this;return i.boundHandleStyleImageChange_=i.handleStyleImageChange_.bind(i),i.dirty_=!1,i.renderedPixelToCoordinateTransform_=null,i.renderTileImageQueue_={},i.tileListenerKeys_={},i.tmpTransform_=[1,0,0,1,0,0],i}return Mf(e,t),e.prototype.prepareTile=function(t,e,i,n){var o,a=r(t),s=t.getState();return(s===ol&&t.hifi||3===s)&&a in this.tileListenerKeys_&&(h(this.tileListenerKeys_[a]),delete this.tileListenerKeys_[a]),s!==ol&&3!==s||(this.updateExecutorGroup_(t,e,i),this.tileImageNeedsRender_(t,e,i)&&(o=!0,n&&(this.renderTileImageQueue_[a]=t))),o},e.prototype.getTile=function(e,i,n,o){var a=o.pixelRatio,l=o.viewState,h=l.resolution,u=l.projection,c=this.getLayer(),p=c.getSource().getTile(e,i,n,a,u);if(p.getState()<ol){p.wantedResolution=h;var d=r(p);if(!(d in this.tileListenerKeys_)){var f=s(p,ha,this.prepareTile.bind(this,p,a,u,!0));this.tileListenerKeys_[d]=f}}else{var g=o.viewHints;!(!g[0]&&!g[1])&&p.wantedResolution||(p.wantedResolution=h),this.prepareTile(p,a,u,!1)&&c.getRenderMode()!==Rf&&this.renderTileImage_(p,o)}return t.prototype.getTile.call(this,e,i,n,o)},e.prototype.isDrawableTile=function(e){var i=this.getLayer();return t.prototype.isDrawableTile.call(this,e)&&i.getRenderMode()===Rf||e.hasContext(i)},e.prototype.getTileImage=function(t){return t.getImage(this.getLayer())},e.prototype.prepareFrame=function(e){var i=this.getLayer().getRevision();return this.renderedLayerRevision_!=i&&(this.renderedTiles.length=0),this.renderedLayerRevision_=i,t.prototype.prepareFrame.call(this,e)},e.prototype.updateExecutorGroup_=function(t,e,i){var n=this.getLayer(),o=n.getRevision(),a=n.getRenderOrder()||null,s=t.wantedResolution,l=t.getReplayState(n);if(l.dirty||l.renderedResolution!==s||l.renderedRevision!=o||l.renderedRenderOrder!=a||l.renderedZ!==t.sourceZ){var h=n.getSource(),u=h.getTileGrid(),c=h.getTileGridForProjection(i).getTileCoordExtent(t.wrappedTileCoord),p=h.getSourceTiles(e,i,t),d=r(n);delete t.hitDetectionImageData[d],t.executorGroups[d]=[];for(var f=function(i,r){var o=p[i];if(o.getState()!=ol)return"continue";var f=u.getTileCoordExtent(o.tileCoord),v=H(c,f),y=N(f,v)?null:E(v,n.getRenderBuffer()*s,g.tmpExtent);l.dirty=!1;var m=new ff(0,v,s,e,n.getDeclutter()),_=Ii(s,e),x=function(t){var e,i=t.getStyleFunction()||n.getStyleFunction();if(i&&(e=i(t,s)),e){var r=this.renderFeature(t,_,e,m);this.dirty_=this.dirty_||r,l.dirty=l.dirty||r}},b=o.getFeatures();a&&a!==l.renderedRenderOrder&&b.sort(a);for(var w=0,S=b.length;w<S;++w){var C=b[w];y&&!J(y,C.getGeometry().getExtent())||x.call(g,C)}var T=m.finish(),P=n.getRenderMode()!==Rf&&n.getDeclutter()&&1===p.length?null:v,L=new Ef(P,s,e,h.getOverlaps(),T,n.getRenderBuffer());t.executorGroups[d].push(L)},g=this,v=0,y=p.length;v<y;++v)f(v);l.renderedRevision=o,l.renderedZ=t.sourceZ,l.renderedRenderOrder=a,l.renderedResolution=s}},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,o){var a=e.viewState.resolution,s=e.viewState.rotation;i=null==i?0:i;var l,h,u,c=this.getLayer(),p=c.getDeclutter(),d=c.getSource().getTileGridForProjection(e.viewState.projection),f={},g=this.renderedTiles,v=function(){var e=g[h],u=L(d.getTileCoordExtent(e.wrappedTileCoord),t);if(!p&&!u)return"continue";for(var v=e.executorGroups[r(c)],y=0,m=v.length;y<m;++y)l=l||v[y].forEachFeatureAtCoordinate(t,a,s,i,function(t){if(u||o&&-1!==o.indexOf(t)){var e=t.getId();if(void 0===e&&(e=r(t)),!(e in f))return f[e]=!0,n(t,c)}},c.getDeclutter()?o:null)};for(h=0,u=g.length;h<u;++h)v();return l},e.prototype.getFeatures=function(t){return new Promise((function(e,i){for(var n,o=this.getLayer(),a=r(o),s=o.getSource(),l=this.renderedProjection,h=l.getExtent(),u=this.renderedResolution,c=s.getTileGridForProjection(l),p=zt(this.renderedPixelToCoordinateTransform_,t.slice()),d=c.getTileCoordForCoordAndResolution(p,u),f=0,g=this.renderedTiles.length;f<g;++f)if(d.toString()===this.renderedTiles[f].tileCoord.toString()){if((n=this.renderedTiles[f]).getState()===ol&&n.hifi){var v=c.getTileCoordExtent(n.tileCoord);s.getWrapX()&&l.canWrapX()&&!I(h,v)&&Ve(p,l);break}n=void 0}if(!n||n.loadingSourceTiles>0)e([]);else{var y=q(c.getTileCoordExtent(n.wrappedTileCoord)),m=[(p[0]-y[0])/u,(y[1]-p[1])/u],_=n.getSourceTiles().reduce(function(t,e){return t.concat(e.getFeatures())},[]),x=n.hitDetectionImageData[a];if(!x&&!this.animatingOrInteracting_){var b=oi(c.getTileSize(c.getZForResolution(u))),w=[b[0]/2,b[1]/2],S=this.renderedRotation_;x=qn(b,[this.getRenderTransform(c.getTileCoordCenter(n.wrappedTileCoord),u,0,.5,w[0],w[1],0)],_,o.getStyleFunction(),c.getTileCoordExtent(n.wrappedTileCoord),n.getReplayState(o).renderedResolution,S),n.hitDetectionImageData[a]=x}e(Zn(m,_,x))}}).bind(this))},e.prototype.handleFontsChanged=function(){o(this.renderTileImageQueue_);var t=this.getLayer();t.getVisible()&&void 0!==this.renderedLayerRevision_&&t.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.renderFrame=function(e,i){var n=e.viewHints,o=!(n[0]||n[1]);this.renderQueuedTileImages_(o,e),t.prototype.renderFrame.call(this,e,i),this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice(),this.renderedRotation_=e.viewState.rotation;var a=this.getLayer(),s=a.getRenderMode();if(s===Of)return this.container;var l=a.getSource(),h=e.usedTiles[r(l)];for(var u in this.renderTileImageQueue_)h&&u in h||delete this.renderTileImageQueue_[u];for(var c=this.context,p=a.getDeclutter()?{}:null,d=kf[s],f=e.pixelRatio,g=e.viewState,v=g.center,y=g.resolution,m=g.rotation,_=e.size,x=Math.round(_[0]*f),b=Math.round(_[1]*f),w=this.renderedTiles,S=l.getTileGridForProjection(e.viewState.projection),C=[],E=[],T=w.length-1;T>=0;--T)for(var P=w[T],L=P.tileCoord,I=S.getTileCoordExtent(P.wrappedTileCoord),O=S.getTileCoordExtent(L,this.tmpExtent)[0]-I[0],A=jt(Bt(this.inversePixelTransform.slice(),1/f,1/f),this.getRenderTransform(v,y,m,f,x,b,O)),R=P.executorGroups[r(a)],M=!1,F=0,k=R.length;F<k;++F){var N=R[F];if(N.hasExecutors(d)){var D=P.tileCoord[0],j=void 0;if(!p&&!M){j=N.getClipCoords(A),c.save();for(var G=0,z=C.length;G<z;++G){var B=C[G];D<E[G]&&(c.beginPath(),c.moveTo(j[0],j[1]),c.lineTo(j[2],j[3]),c.lineTo(j[4],j[5]),c.lineTo(j[6],j[7]),c.moveTo(B[6],B[7]),c.lineTo(B[4],B[5]),c.lineTo(B[2],B[3]),c.lineTo(B[0],B[1]),c.clip())}}N.execute(c,A,m,o,d,p),p||M||(c.restore(),C.push(j),E.push(D),M=!0)}}return p&&Hn(p,c,m,e.layerStatesArray[e.layerIndex].opacity,o,e.declutterItems),this.container},e.prototype.renderQueuedTileImages_=function(t,e){for(var i in this.renderTileImageQueue_){if(!t&&Date.now()-e.time>8){e.animate=!0;break}var n=this.renderTileImageQueue_[i];delete this.renderTileImageQueue_[i],this.renderTileImage_(n,e)}},e.prototype.renderFeature=function(t,e,i,n){if(!i)return!1;var r=!1;if(Array.isArray(i))for(var o=0,a=i.length;o<a;++o)r=Ai(n,t,i[o],e,this.boundHandleStyleImageChange_)||r;else r=Ai(n,t,i,e,this.boundHandleStyleImageChange_);return r},e.prototype.tileImageNeedsRender_=function(t,e,i){var n=this.getLayer(),r=t.getReplayState(n),o=n.getRevision();return r.renderedTileResolution!==t.wantedResolution||r.renderedTileRevision!==o||r.renderedTileZ!==t.sourceZ},e.prototype.renderTileImage_=function(t,e){var i=this.getLayer(),n=t.getReplayState(i),o=i.getRevision(),a=t.executorGroups[r(i)];n.renderedTileRevision=o,n.renderedTileZ=t.sourceZ;var s=t.wrappedTileCoord,l=s[0],h=i.getSource(),u=e.pixelRatio,c=e.viewState.projection,p=h.getTileGridForProjection(c),d=p.getResolution(t.tileCoord[0]),f=e.pixelRatio/t.wantedResolution*d,g=p.getResolution(l),v=t.getContext(i);u=Math.max(u,f/u);var y=h.getTilePixelSize(l,u,c);v.canvas.width=y[0],v.canvas.height=y[1];var m=u/f;if(1!==m){var _=Dt(this.tmpTransform_);Bt(_,m,m),v.setTransform.apply(v,_)}var x=p.getTileCoordExtent(s,this.tmpExtent),b=f/g,w=Dt(this.tmpTransform_);Bt(w,b,-b),jt(w,Gt(fs,1,0,0,1,-x[0],-x[3]));for(var S=0,C=a.length;S<C;++S)a[S].execute(v,w,0,!0,Ff[i.getRenderMode()]);n.renderedTileResolution=t.wantedResolution},e}(od),Df=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),jf=function(t){function e(e){return t.call(this,e)||this}return Df(e,t),e.prototype.createRenderer=function(){return new Pf(this)},e}(Hd),Gf=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),zf=function(t){function e(e,i){var n=t.call(this)||this;return n.flatMidpoint_=null,n.flatMidpointRevision_=-1,n.maxDelta_=-1,n.maxDeltaRevision_=-1,void 0===i||Array.isArray(e[0])?n.setCoordinates(e,i):n.setFlatCoordinates(i,e),n}return Gf(e,t),e.prototype.appendCoordinate=function(t){this.flatCoordinates?f(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,n){return n<P(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Zt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Jt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,n))},e.prototype.forEachSegment=function(t){return fe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,e){return this.layout!=Ba&&this.layout!=Ya?null:Jn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,void 0!==e&&e)},e.prototype.getCoordinates=function(){return ie(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,e){return Kn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e)},e.prototype.getLength=function(){return Wn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=oe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,Ga)},e.prototype.getType=function(){return Xa.LINE_STRING},e.prototype.intersectsExtent=function(t){return ge(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=te(this.flatCoordinates,0,t,this.stride),this.changed()},e}(_s),Bf=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Yf=new yc({color:"rgba(0,0,0,0.2)"}),Xf=[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001],Wf=function(t){function e(e){var i=this,n=e||{},r=na({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},n);return delete r.maxLines,delete r.strokeStyle,delete r.targetSize,delete r.showLabels,delete r.lonLabelFormatter,delete r.latLabelFormatter,delete r.lonLabelPosition,delete r.latLabelPosition,delete r.lonLabelStyle,delete r.latLabelStyle,delete r.intervals,(i=t.call(this,r)||this).projection_=null,i.maxLat_=1/0,i.maxLon_=1/0,i.minLat_=-1/0,i.minLon_=-1/0,i.maxX_=1/0,i.maxY_=1/0,i.minX_=-1/0,i.minY_=-1/0,i.targetSize_=void 0!==n.targetSize?n.targetSize:100,i.maxLines_=void 0!==n.maxLines?n.maxLines:100,i.meridians_=[],i.parallels_=[],i.strokeStyle_=void 0!==n.strokeStyle?n.strokeStyle:Yf,i.fromLonLatTransform_=void 0,i.toLonLatTransform_=void 0,i.projectionCenterLonLat_=null,i.bottomLeft_=null,i.bottomRight_=null,i.topLeft_=null,i.topRight_=null,i.meridiansLabels_=null,i.parallelsLabels_=null,n.showLabels&&(i.lonLabelFormatter_=null==n.lonLabelFormatter?De.bind(i,"EW"):n.lonLabelFormatter,i.latLabelFormatter_=null==n.latLabelFormatter?De.bind(i,"NS"):n.latLabelFormatter,i.lonLabelPosition_=null==n.lonLabelPosition?0:n.lonLabelPosition,i.latLabelPosition_=null==n.latLabelPosition?1:n.latLabelPosition,i.lonLabelStyleBase_=new xc({text:void 0!==n.lonLabelStyle?n.lonLabelStyle.clone():new wc({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new nc({color:"rgba(0,0,0,1)"}),stroke:new yc({color:"rgba(255,255,255,1)",width:3})})}),i.lonLabelStyle_=(function(t){var e=t.get("graticule_label");return this.lonLabelStyleBase_.getText().setText(e),this.lonLabelStyleBase_}).bind(i),i.latLabelStyleBase_=new xc({text:void 0!==n.latLabelStyle?n.latLabelStyle.clone():new wc({font:"12px Calibri,sans-serif",textAlign:"right",fill:new nc({color:"rgba(0,0,0,1)"}),stroke:new yc({color:"rgba(255,255,255,1)",width:3})})}),i.latLabelStyle_=(function(t){var e=t.get("graticule_label");return this.latLabelStyleBase_.getText().setText(e),this.latLabelStyleBase_}).bind(i),i.meridiansLabels_=[],i.parallelsLabels_=[],i.addEventListener(nl,i.drawLabels_.bind(i))),i.intervals_=void 0!==n.intervals?n.intervals:Xf,i.setSource(new rp({loader:i.loaderFunction.bind(i),strategy:i.strategyFunction.bind(i),features:new Ta,overlaps:!1,useSpatialIndex:!1,wrapX:n.wrapX})),i.featurePool_=[],i.lineStyle_=new xc({stroke:i.strokeStyle_}),i.loadedExtent_=null,i.renderedExtent_=null,i.setRenderOrder(null),i}return Bf(e,t),e.prototype.strategyFunction=function(t,e){var i,n,r,o=t.slice();return this.projection_&&this.getSource().getWrapX()&&et(o,this.projection_),this.loadedExtent_&&(i=this.loadedExtent_,n=o,r=e,Math.abs(i[0]-n[0])<r&&Math.abs(i[2]-n[2])<r&&Math.abs(i[1]-n[1])<r&&Math.abs(i[3]-n[3])<r?o=this.loadedExtent_.slice():this.getSource().removeLoadedExtent(this.loadedExtent_)),[o]},e.prototype.loaderFunction=function(t,e,i){this.loadedExtent_=t;var n=this.getSource(),r=H(this.getExtent()||[-1/0,-1/0,1/0,1/0],t);if(!(this.renderedExtent_&&N(this.renderedExtent_,r)||(this.renderedExtent_=r,$(r)))){var o=W(r),a=e*e/4;(!this.projection_||!Pt(this.projection_,i))&&this.updateProjectionInfo_(i),this.createGraticule_(r,o,e,a);var s,l=this.meridians_.length+this.parallels_.length;for(this.meridiansLabels_&&(l+=this.meridians_.length),this.parallelsLabels_&&(l+=this.parallels_.length);l>this.featurePool_.length;)s=new La,this.featurePool_.push(s);var h=n.getFeaturesCollection();h.clear();var u,c,p=0;for(u=0,c=this.meridians_.length;u<c;++u)(s=this.featurePool_[p++]).setGeometry(this.meridians_[u]),s.setStyle(this.lineStyle_),h.push(s);for(u=0,c=this.parallels_.length;u<c;++u)(s=this.featurePool_[p++]).setGeometry(this.parallels_[u]),s.setStyle(this.lineStyle_),h.push(s)}},e.prototype.addMeridian_=function(t,e,i,n,r,o){var a=this.getMeridian_(t,e,i,n,o);if(J(a.getExtent(),r)){if(this.meridiansLabels_){var s=this.lonLabelFormatter_(t);o in this.meridiansLabels_?this.meridiansLabels_[o].text=s:this.meridiansLabels_[o]={geom:new Ss([]),text:s}}this.meridians_[o++]=a}return o},e.prototype.addParallel_=function(t,e,i,n,r,o){var a=this.getParallel_(t,e,i,n,o);if(J(a.getExtent(),r)){if(this.parallelsLabels_){var s=this.latLabelFormatter_(t);o in this.parallelsLabels_?this.parallelsLabels_[o].text=s:this.parallelsLabels_[o]={geom:new Ss([]),text:s}}this.parallels_[o++]=a}return o},e.prototype.drawLabels_=function(t){var e=t.frameState.viewState.rotation,i=t.frameState.extent,n=W(i),r=i;if(e){var o=K(i),a=V(i),s=Math.abs(Math.cos(e)),l=Math.abs(Math.sin(e)),h=(l*a-s*o)/(l*l-s*s),u=(l*o-s*a)/(l*l-s*s);r=[n[0]-h/2,n[1]-u/2,n[0]+h/2,n[1]+u/2]}var c=0,p=0,d=this.latLabelPosition_<.5,f=this.projection_.getExtent(),g=K(f);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!I(f,i)&&(c=Math.floor((i[0]-f[0])/g),p=Math.ceil((i[2]-f[2])/g),d=d!==Math.abs(e)>Math.PI/2);for(var v=Ri(t),y=c;y<=p;++y){var m=this.meridians_.length+this.parallels_.length,_=void 0,x=void 0,b=void 0,w=void 0;if(this.meridiansLabels_)for(x=0,b=this.meridiansLabels_.length;x<b;++x){var S=this.meridians_[x];e||0!==y?((C=S.clone()).translate(y*g,0),C.rotate(-e,n),(w=this.getMeridianPoint_(C,r,x)).rotate(e,n)):w=this.getMeridianPoint_(S,i,x),(_=this.featurePool_[m++]).setGeometry(w),_.set("graticule_label",this.meridiansLabels_[x].text),v.drawFeature(_,this.lonLabelStyle_(_))}if(this.parallelsLabels_&&(y===c&&d||y===p&&!d))for(x=0,b=this.parallels_.length;x<b;++x){var C;S=this.parallels_[x],e||0!==y?((C=S.clone()).translate(y*g,0),C.rotate(-e,n),(w=this.getParallelPoint_(C,r,x)).rotate(e,n)):w=this.getParallelPoint_(S,i,x),(_=this.featurePool_[m++]).setGeometry(w),_.set("graticule_label",this.parallelsLabels_[x].text),v.drawFeature(_,this.latLabelStyle_(_))}}},e.prototype.createGraticule_=function(t,e,i,n){var r=this.getInterval_(i);if(-1==r)return this.meridians_.length=0,this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),void(this.parallelsLabels_&&(this.parallelsLabels_.length=0));var o=!1,a=this.projection_.getExtent(),s=K(a);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!I(a,t)&&(K(t)>=s?(t[0]=a[0],t[2]=a[2]):o=!0);var l=[ot(e[0],this.minX_,this.maxX_),ot(e[1],this.minY_,this.maxY_)],h=this.toLonLatTransform_(l);isNaN(h[1])&&(h[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_);var u,c,p,d,f=ot(h[0],this.minLon_,this.maxLon_),g=ot(h[1],this.minLat_,this.maxLat_),v=this.maxLines_,y=t;o||(y=[ot(t[0],this.minX_,this.maxX_),ot(t[1],this.minY_,this.maxY_),ot(t[2],this.minX_,this.maxX_),ot(t[3],this.minY_,this.maxY_)]);var m=tt(y,this.toLonLatTransform_,void 0,8),_=m[3],x=m[2],b=m[1],w=m[0];if(o||(L(y,this.bottomLeft_)&&(w=this.minLon_,b=this.minLat_),L(y,this.bottomRight_)&&(x=this.maxLon_,b=this.minLat_),L(y,this.topLeft_)&&(w=this.minLon_,_=this.maxLat_),L(y,this.topRight_)&&(x=this.maxLon_,_=this.maxLat_),_=ot(_,g,this.maxLat_),x=ot(x,f,this.maxLon_),b=ot(b,this.minLat_,g),w=ot(w,this.minLon_,f)),d=ot(f=Math.floor(f/r)*r,this.minLon_,this.maxLon_),c=this.addMeridian_(d,b,_,n,t,0),u=0,o)for(;(d-=r)>=w&&u++<v;)c=this.addMeridian_(d,b,_,n,t,c);else for(;d!=this.minLon_&&u++<v;)d=Math.max(d-r,this.minLon_),c=this.addMeridian_(d,b,_,n,t,c);if(d=ot(f,this.minLon_,this.maxLon_),u=0,o)for(;(d+=r)<=x&&u++<v;)c=this.addMeridian_(d,b,_,n,t,c);else for(;d!=this.maxLon_&&u++<v;)d=Math.min(d+r,this.maxLon_),c=this.addMeridian_(d,b,_,n,t,c);for(this.meridians_.length=c,this.meridiansLabels_&&(this.meridiansLabels_.length=c),p=ot(g=Math.floor(g/r)*r,this.minLat_,this.maxLat_),c=this.addParallel_(p,w,x,n,t,0),u=0;p!=this.minLat_&&u++<v;)p=Math.max(p-r,this.minLat_),c=this.addParallel_(p,w,x,n,t,c);for(p=ot(g,this.minLat_,this.maxLat_),u=0;p!=this.maxLat_&&u++<v;)p=Math.min(p+r,this.maxLat_),c=this.addParallel_(p,w,x,n,t,c);this.parallels_.length=c,this.parallelsLabels_&&(this.parallelsLabels_.length=c)},e.prototype.getInterval_=function(t){for(var e=this.projectionCenterLonLat_[0],i=this.projectionCenterLonLat_[1],n=-1,r=Math.pow(this.targetSize_*t,2),o=[],a=[],s=0,l=this.intervals_.length;s<l;++s){var h=ot(this.intervals_[s]/2,0,90),u=ot(i,-90+h,90-h);if(o[0]=e-h,o[1]=u-h,a[0]=e+h,a[1]=u+h,this.fromLonLatTransform_(o,o),this.fromLonLatTransform_(a,a),Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2)<=r)break;n=this.intervals_[s]}return n},e.prototype.getMeridian_=function(t,e,i,n,r){var o=function(t,e,i,n,r){return $n(function(n){return[t,e+(i-e)*n]},It(bt("EPSG:4326"),n),r)}(t,e,i,this.projection_,n),a=this.meridians_[r];return a?(a.setFlatCoordinates(Ga,o),a.changed()):(a=new zf(o,Ga),this.meridians_[r]=a),a},e.prototype.getMeridianPoint_=function(t,e,i){var n=t.getFlatCoordinates(),r=1,o=n.length-1;n[r]>n[o]&&(r=o,o=1);var a=Math.max(e[1],n[r]),s=Math.min(e[3],n[o]),l=ot(e[1]+Math.abs(e[1]-e[3])*this.lonLabelPosition_,a,s),h=this.meridiansLabels_[i].geom;return h.setCoordinates([n[r-1]+(n[o-1]-n[r-1])*(l-n[r])/(n[o]-n[r]),l]),h},e.prototype.getMeridians=function(){return this.meridians_},e.prototype.getParallel_=function(t,e,i,n,r){var o=function(t,e,i,n,r){return $n(function(n){return[e+(i-e)*n,t]},It(bt("EPSG:4326"),n),r)}(t,e,i,this.projection_,n),a=this.parallels_[r];return a?(a.setFlatCoordinates(Ga,o),a.changed()):a=new zf(o,Ga),a},e.prototype.getParallelPoint_=function(t,e,i){var n=t.getFlatCoordinates(),r=0,o=n.length-2;n[r]>n[o]&&(r=o,o=0);var a=Math.max(e[0],n[r]),s=Math.min(e[2],n[o]),l=ot(e[0]+Math.abs(e[0]-e[2])*this.latLabelPosition_,a,s),h=this.parallelsLabels_[i].geom;return h.setCoordinates([l,n[r+1]+(n[o+1]-n[r+1])*(l-n[r])/(n[o]-n[r])]),h},e.prototype.getParallels=function(){return this.parallels_},e.prototype.updateProjectionInfo_=function(t){var e=bt("EPSG:4326"),i=t.getWorldExtent();this.maxLat_=i[3],this.maxLon_=i[2],this.minLat_=i[1],this.minLon_=i[0];var n=It(t,e);if(this.minLon_<this.maxLon_)this.toLonLatTransform_=n;else{var r=this.minLon_+this.maxLon_/2;this.maxLon_+=360,this.toLonLatTransform_=function(t,e,i){for(var o=i||2,a=n(t,e,o),s=0,l=a.length;s<l;s+=o)a[s]<r&&(a[s]+=360);return a}}this.fromLonLatTransform_=It(e,t);var o=tt([this.minLon_,this.minLat_,this.maxLon_,this.maxLat_],this.fromLonLatTransform_,void 0,8);this.minX_=o[0],this.maxX_=o[2],this.minY_=o[1],this.maxY_=o[3],this.bottomLeft_=this.fromLonLatTransform_([this.minLon_,this.minLat_]),this.bottomRight_=this.fromLonLatTransform_([this.maxLon_,this.minLat_]),this.topLeft_=this.fromLonLatTransform_([this.minLon_,this.maxLat_]),this.topRight_=this.fromLonLatTransform_([this.maxLon_,this.maxLat_]),this.projectionCenterLonLat_=this.toLonLatTransform_(W(t.getExtent())),isNaN(this.projectionCenterLonLat_[1])&&(this.projectionCenterLonLat_[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_),this.projection_=t},e}(jf),Uf=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Vf="gradient",Hf=["#00f","#0ff","#0f0","#ff0","#f00"],qf=function(t){function e(e){var i=this,n=e||{},r=na({},n);delete r.gradient,delete r.radius,delete r.blur,delete r.weight,(i=t.call(this,r)||this).gradient_=null,i.addEventListener(w(Vf),i.handleGradientChanged_),i.setGradient(n.gradient?n.gradient:Hf),i.setBlur(void 0!==n.blur?n.blur:15),i.setRadius(void 0!==n.radius?n.radius:8);var o=n.weight?n.weight:"weight";return i.weightFunction_="string"==typeof o?function(t){return t.get(o)}:o,i.setRenderOrder(null),i}return Uf(e,t),e.prototype.getBlur=function(){return this.get("blur")},e.prototype.getGradient=function(){return this.get(Vf)},e.prototype.getRadius=function(){return this.get("radius")},e.prototype.handleGradientChanged_=function(){this.gradient_=function(t){for(var e=Qe(1,256),i=e.createLinearGradient(0,0,1,256),n=1/(t.length-1),r=0,o=t.length;r<o;++r)i.addColorStop(r*n,t[r]);return e.fillStyle=i,e.fillRect(0,0,1,256),e.canvas}(this.getGradient())},e.prototype.setBlur=function(t){this.set("blur",t)},e.prototype.setGradient=function(t){this.set(Vf,t)},e.prototype.setRadius=function(t){this.set("radius",t)},e.prototype.createRenderer=function(){return new Zd(this,{attributes:[{name:"weight",callback:(function(t){var e=this.weightFunction_(t);return void 0!==e?ot(e,0,1):1}).bind(this)}],vertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_weight = a_weight;\n        }",fragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          gl_FragColor = vec4(alpha, alpha, alpha, alpha);\n        }",hitVertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n        attribute vec4 a_hitColor;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_hitColor = a_hitColor;\n          v_weight = a_weight;\n        }",hitFragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          if (alpha < 0.05) {\n            discard;\n          }\n\n          gl_FragColor = v_hitColor;\n        }",uniforms:{u_size:(function(){return 2*(this.get("radius")+this.get("blur"))}).bind(this),u_blurSlope:(function(){return this.get("radius")/Math.max(1,this.get("blur"))}).bind(this)},postProcesses:[{fragmentShader:"\n            precision mediump float;\n\n            uniform sampler2D u_image;\n            uniform sampler2D u_gradientTexture;\n\n            varying vec2 v_texCoord;\n\n            void main() {\n              vec4 color = texture2D(u_image, v_texCoord);\n              gl_FragColor.a = color.a;\n              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;\n              gl_FragColor.rgb *= gl_FragColor.a;\n            }",uniforms:{u_gradientTexture:(function(){return this.gradient_}).bind(this)}}]})},e}(jf),Zf=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Kf=function(t){function e(e){var i=this,n=e||{},r=na({},n);return delete r.imageRatio,(i=t.call(this,r)||this).imageRatio_=void 0!==n.imageRatio?n.imageRatio:1,i}return Zf(e,t),e.prototype.getImageRatio=function(){return this.imageRatio_},e.prototype.createRenderer=function(){return new If(this)},e}(Hd),Jf=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),$f=function(t){function e(e){var i=this,n=e||{},r=na({},n);delete r.preload,delete r.useInterimTilesOnError,i=t.call(this,r)||this;var o=n.renderMode||Af;return S(null==o||o==Of||o==Af||o==Rf,28),i.renderMode_=o,i.setPreload(n.preload?n.preload:0),i.setUseInterimTilesOnError(void 0===n.useInterimTilesOnError||n.useInterimTilesOnError),i}return Jf(e,t),e.prototype.createRenderer=function(){return new Nf(this)},e.prototype.getFeatures=function(e){return t.prototype.getFeatures.call(this,e)},e.prototype.getRenderMode=function(){return this.renderMode_},e.prototype.getPreload=function(){return this.get("preload")},e.prototype.getUseInterimTilesOnError=function(){return this.get(ed)},e.prototype.setPreload=function(t){this.set("preload",t)},e.prototype.setUseInterimTilesOnError=function(t){this.set(ed,t)},e}(Hd),Qf=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),tg=function(t){function e(e,i,n,r){var o=t.call(this,e)||this;return o.features=n,o.file=i,o.projection=r,o}return Qf(e,t),e}(aa),eg=function(t){function e(e){var i=this,n=e||{};return(i=t.call(this,{handleEvent:m})||this).formatConstructors_=n.formatConstructors?n.formatConstructors:[],i.projection_=n.projection?bt(n.projection):null,i.dropListenKeys_=null,i.source_=n.source||null,i.target=n.target?n.target:null,i}return Qf(e,t),e.prototype.handleResult_=function(t,e){var i=e.target.result,n=this.getMap(),r=this.projection_;r||(r=n.getView().getProjection());for(var o=this.formatConstructors_,a=[],s=0,l=o.length;s<l;++s){var h=new o[s];if((a=this.tryReadFeatures_(h,i,{featureProjection:r}))&&a.length>0)break}this.source_&&(this.source_.clear(),this.source_.addFeatures(a)),this.dispatchEvent(new tg("addfeatures",t,a,r))},e.prototype.registerListeners_=function(){var t=this.getMap();if(t){var e=this.target?this.target:t.getViewport();this.dropListenKeys_=[s(e,"drop",Qn,this),s(e,"dragenter",tr,this),s(e,"dragover",tr,this),s(e,"drop",tr,this)]}},e.prototype.setActive=function(e){!this.getActive()&&e&&this.registerListeners_(),this.getActive()&&!e&&this.unregisterListeners_(),t.prototype.setActive.call(this,e)},e.prototype.setMap=function(e){this.unregisterListeners_(),t.prototype.setMap.call(this,e),this.getActive()&&this.registerListeners_()},e.prototype.tryReadFeatures_=function(t,e,i){try{return t.readFeatures(e,i)}catch(t){return null}},e.prototype.unregisterListeners_=function(){this.dropListenKeys_&&(this.dropListenKeys_.forEach(h),this.dropListenKeys_=null)},e}(Wl),ig=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ng=function(t){function e(e){var i=this,n=e||{};return(i=t.call(this,n)||this).condition_=n.condition?n.condition:eh,i.lastAngle_=void 0,i.lastMagnitude_=void 0,i.lastScaleDelta_=0,i.duration_=void 0!==n.duration?n.duration:400,i}return ig(e,t),e.prototype.handleDragEvent=function(t){if(nh(t)){var e=t.map,i=e.getSize(),n=t.pixel,r=n[0]-i[0]/2,o=i[1]/2-n[1],a=Math.atan2(o,r),s=Math.sqrt(r*r+o*o),l=e.getView();void 0!==this.lastAngle_&&l.adjustRotationInternal(this.lastAngle_-a),this.lastAngle_=a,void 0!==this.lastMagnitude_&&l.adjustResolutionInternal(this.lastMagnitude_/s),void 0!==this.lastMagnitude_&&(this.lastScaleDelta_=this.lastMagnitude_/s),this.lastMagnitude_=s}},e.prototype.handleUpEvent=function(t){return!nh(t)||(t.map.getView().endInteraction(this.duration_,this.lastScaleDelta_>1?1:-1),this.lastScaleDelta_=0,!1)},e.prototype.handleDownEvent=function(t){return!!nh(t)&&!!this.condition_(t)&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,this.lastMagnitude_=void 0,!0)},e}(ah),rg=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),og=function(t){function e(e,i,n){var r=t.call(this)||this;return void 0!==n&&void 0===i?r.setFlatCoordinates(n,e):r.setCenterAndRadius(e,i||0,n),r}return rg(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),void 0,this.layout)},e.prototype.closestPointXY=function(t,e,i,n){var r=this.flatCoordinates,o=t-r[0],a=e-r[1],s=o*o+a*a;if(s<n){if(0===s)for(var l=0;l<this.stride;++l)i[l]=r[l];else{var h=this.getRadius()/Math.sqrt(s);for(i[0]=r[0]+h*o,i[1]=r[1]+h*a,l=2;l<this.stride;++l)i[l]=r[l]}return i.length=this.stride,s}return n},e.prototype.containsXY=function(t,e){var i=this.flatCoordinates,n=t-i[0],r=e-i[1];return n*n+r*r<=this.getRadiusSquared_()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(t){var e=this.flatCoordinates,i=e[this.stride]-e[0];return R(e[0]-i,e[1]-i,e[0]+i,e[1]+i,t)},e.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},e.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},e.prototype.getType=function(){return Xa.CIRCLE},e.prototype.intersectsExtent=function(t){if(J(t,this.getExtent())){var e=this.getCenter();return t[0]<=e[0]&&t[2]>=e[0]||t[1]<=e[1]&&t[3]>=e[1]||z(t,this.intersectsCoordinate.bind(this))}return!1},e.prototype.setCenter=function(t){var e=this.stride,i=this.flatCoordinates[e]-this.flatCoordinates[0],n=t.slice();n[e]=n[0]+i;for(var r=1;r<e;++r)n[e+r]=t[r];this.setFlatCoordinates(this.layout,n),this.changed()},e.prototype.setCenterAndRadius=function(t,e,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var n=this.flatCoordinates,r=Qt(n,0,t);n[r++]=n[0]+e;for(var o=1,a=this.stride;o<a;++o)n[r++]=n[o];n.length=r,this.changed()},e.prototype.getCoordinates=function(){return null},e.prototype.setCoordinates=function(t,e){},e.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},e.prototype.rotate=function(t,e){var i=this.getCenter(),n=this.getStride();this.setCenter(nt(i,0,i.length,n,t,e,i)),this.changed()},e.prototype.translate=function(t,e){var i=this.getCenter(),n=this.getStride();this.setCenter(rt(i,0,i.length,n,t,e,i)),this.changed()},e}(_s),ag=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),sg=function(t){function e(e,i,n){var r=t.call(this)||this;if(r.ends_=[],r.maxDelta_=-1,r.maxDeltaRevision_=-1,Array.isArray(e[0]))r.setCoordinates(e,i);else if(void 0!==i&&n)r.setFlatCoordinates(i,e),r.ends_=n;else{for(var o=r.getLayout(),a=e,s=[],l=[],h=0,u=a.length;h<u;++h){var c=a[h];0===h&&(o=c.getLayout()),f(s,c.getFlatCoordinates()),l.push(s.length)}r.setFlatCoordinates(o,s),r.ends_=l}return r}return ag(e,t),e.prototype.appendLineString=function(t){this.flatCoordinates?f(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,i,n){return n<P(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Kt(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),$t(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,n))},e.prototype.getCoordinateAtM=function(t,e,i){if(this.layout!=Ba&&this.layout!=Ya||0===this.flatCoordinates.length)return null;var n=void 0!==i&&i;return function(t,e,i,r,o,a,s){if(n)return Jn(t,e,i[i.length-1],r,o,a);var l;if(o<t[r-1])return a?((l=t.slice(0,r))[r-1]=o,l):null;if(t[t.length-1]<o)return a?((l=t.slice(t.length-r))[r-1]=o,l):null;for(var h=0,u=i.length;h<u;++h){var c=i[h];if(e!=c){if(o<t[e+r-1])return null;if(o<=t[c-1])return Jn(t,e,c,r,o,!1);e=c}}return null}(this.flatCoordinates,0,this.ends_,this.stride,t,void 0!==e&&e)},e.prototype.getCoordinates=function(){return ne(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new zf(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.ends_,i=this.layout,n=[],r=0,o=0,a=e.length;o<a;++o){var s=e[o],l=new zf(t.slice(r,s),i);n.push(l),r=s}return n},e.prototype.getFlatMidpoints=function(){for(var t=[],e=this.flatCoordinates,i=0,n=this.ends_,r=this.stride,o=0,a=n.length;o<a;++o){var s=n[o];f(t,Kn(e,i,s,r,.5)),i=s}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],n=[];return i.length=function(t,e,i,n,r,o,a,s){for(var l=0,h=i.length;l<h;++l){var u=i[l];a=oe(t,e,u,n,r,o,a),s.push(a),e=u}return a}(this.flatCoordinates,0,this.ends_,this.stride,t,i,0,n),new e(i,Ga,n)},e.prototype.getType=function(){return Xa.MULTI_LINE_STRING},e.prototype.intersectsExtent=function(t){return function(t,e,i,n,r){for(var o=0,a=i.length;o<a;++o){if(ge(t,e,i[o],n,r))return!0;e=i[o]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=ee(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},e}(_s),lg=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),hg=function(t){function e(e,i){var n=t.call(this)||this;return i&&!Array.isArray(e[0])?n.setFlatCoordinates(i,e):n.setCoordinates(e,i),n}return lg(e,t),e.prototype.appendPoint=function(t){this.flatCoordinates?f(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,n){if(n<P(this.getExtent(),t,e))return n;for(var r=this.flatCoordinates,o=this.stride,a=0,s=r.length;a<s;a+=o){var l=st(t,e,r[a],r[a+1]);if(l<n){n=l;for(var h=0;h<o;++h)i[h]=r[a+h];i.length=o}}return n},e.prototype.getCoordinates=function(){return ie(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){return t<0||(this.flatCoordinates?this.flatCoordinates.length/this.stride:0)<=t?null:new Ss(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,e=this.layout,i=this.stride,n=[],r=0,o=t.length;r<o;r+=i){var a=new Ss(t.slice(r,r+i),e);n.push(a)}return n},e.prototype.getType=function(){return Xa.MULTI_POINT},e.prototype.intersectsExtent=function(t){for(var e=this.flatCoordinates,i=this.stride,n=0,r=e.length;n<r;n+=i)if(O(t,e[n],e[n+1]))return!0;return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=te(this.flatCoordinates,0,t,this.stride),this.changed()},e}(_s),ug=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),cg=function(t){function e(e,i,n){var r=t.call(this)||this;if(r.endss_=[],r.flatInteriorPointsRevision_=-1,r.flatInteriorPoints_=null,r.maxDelta_=-1,r.maxDeltaRevision_=-1,r.orientedRevision_=-1,r.orientedFlatCoordinates_=null,!n&&!Array.isArray(e[0])){for(var o=r.getLayout(),a=e,s=[],l=[],h=0,u=a.length;h<u;++h){var c=a[h];0===h&&(o=c.getLayout());for(var p=s.length,d=c.getEnds(),g=0,v=d.length;g<v;++g)d[g]+=p;f(s,c.getFlatCoordinates()),l.push(d)}i=o,e=s,n=l}return void 0!==i&&n?(r.setFlatCoordinates(i,e),r.endss_=n):r.setCoordinates(e,i),r}return ug(e,t),e.prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var i=this.flatCoordinates.length;f(this.flatCoordinates,t.getFlatCoordinates());for(var n=0,r=(e=t.getEnds().slice()).length;n<r;++n)e[n]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},e.prototype.clone=function(){for(var t=this.endss_.length,i=new Array(t),n=0;n<t;++n)i[n]=this.endss_[n].slice();return new e(this.flatCoordinates.slice(),this.layout,i)},e.prototype.closestPointXY=function(t,e,i,n){return n<P(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(t,e,i,n,r){for(var o=0,a=i.length;o<a;++o){var s=i[o];r=Kt(t,e,s,n,r),e=s[s.length-1]}return r}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(t,e,i,n,r,o,a,s,l,h,u){for(var c=[NaN,NaN],p=0,d=i.length;p<d;++p){var f=i[p];h=$t(t,e,f,n,r,!0,a,s,l,h,c),e=f[f.length-1]}return h}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,0,t,e,i,n))},e.prototype.containsXY=function(t,e){return function(t,e,i,n,r,o){if(0===i.length)return!1;for(var a=0,s=i.length;a<s;++a){var l=i[a];if(ce(t,e,l,n,r,o))return!0;e=l[l.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},e.prototype.getArea=function(){return function(t,e,i,n){for(var r=0,o=0,a=i.length;o<a;++o){var s=i[o];r+=Ht(t,e,s,n),e=s[s.length-1]}return r}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?be(e=this.getOrientedFlatCoordinates().slice(),0,this.endss_,this.stride,t):e=this.flatCoordinates,re(e,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=er(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=de(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new hg(this.getFlatInteriorPoints().slice(),Ba)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;!function(t,e,i,n,r){for(var o=0,a=i.length;o<a;++o){var s=i[o];if(!_e(t,e,s,n,void 0))return!1;s.length&&(e=s[s.length-1])}return!0}(t,0,this.endss_,this.stride)?(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=be(this.orientedFlatCoordinates_,0,this.endss_,this.stride)):this.orientedFlatCoordinates_=t,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],n=[];return i.length=function(t,e,i,n,r,o,a,s){for(var l=0,h=i.length;l<h;++l){var u=i[l],c=[];a=le(t,e,u,n,r,o,a,c),s.push(c),e=u[u.length-1]}return a}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),i,0,n),new e(i,Ga,n)},e.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var i=this.endss_[t-1];e=i[i.length-1]}var n=this.endss_[t].slice(),r=n[n.length-1];if(0!==e)for(var o=0,a=n.length;o<a;++o)n[o]-=e;return new Ts(this.flatCoordinates.slice(e,r),this.layout,n)},e.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.endss_,n=[],r=0,o=0,a=i.length;o<a;++o){var s=i[o].slice(),l=s[s.length-1];if(0!==r)for(var h=0,u=s.length;h<u;++h)s[h]-=r;var c=new Ts(e.slice(r,l),t,s);n.push(c),r=l}return n},e.prototype.getType=function(){return Xa.MULTI_POLYGON},e.prototype.intersectsExtent=function(t){return function(t,e,i,n,r){for(var o=0,a=i.length;o<a;++o){var s=i[o];if(ve(t,e,s,n,r))return!0;e=s[s.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=function(t,e,i,n,r){for(var o=r||[],a=0,s=0,l=i.length;s<l;++s){var h=ee(t,e,i[s],n,o[a]);o[a++]=h,e=h[h.length-1]}return o.length=a,o}(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{var n=i[i.length-1];this.flatCoordinates.length=0===n.length?0:n[n.length-1]}this.changed()},e}(_s),pg=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),dg="Point",fg="LineString",gg="Polygon",vg="Circle",yg=function(t){function e(e,i){var n=t.call(this,e)||this;return n.feature=i,n}return pg(e,t),e}(aa),mg=function(t){function e(e){var i=this,n=e;n.stopDown||(n.stopDown=_),(i=t.call(this,n)||this).shouldHandle_=!1,i.downPx_=null,i.freehand_=!1,i.source_=e.source?e.source:null,i.features_=e.features?e.features:null,i.snapTolerance_=e.snapTolerance?e.snapTolerance:12,i.type_=e.type,i.mode_=function(t){var e;return t===Xa.POINT||t===Xa.MULTI_POINT?e=dg:t===Xa.LINE_STRING||t===Xa.MULTI_LINE_STRING?e=fg:t===Xa.POLYGON||t===Xa.MULTI_POLYGON?e=gg:t===Xa.CIRCLE&&(e=vg),e}(i.type_),i.stopClick_=!!e.stopClick,i.minPoints_=e.minPoints?e.minPoints:i.mode_===gg?3:2,i.maxPoints_=e.maxPoints?e.maxPoints:1/0,i.finishCondition_=e.finishCondition?e.finishCondition:m;var r,o=e.geometryFunction;if(!o)if(i.type_===Xa.CIRCLE)o=function(t,e,i){var n=e||new og([NaN,NaN]),r=Ft(t[0],i),o=Ye(r,Ft(t[1],i));n.setCenterAndRadius(r,Math.sqrt(o));var a=Rt();return a&&n.transform(i,a),n};else{var a,s=i.mode_;s===dg?a=Ss:s===fg?a=zf:s===gg&&(a=Ts),o=function(t,e,i){var n=e;return n?n.setCoordinates(s===gg?t[0].length?[t[0].concat([t[0][0]])]:[]:t):n=new a(t),n}}return i.geometryFunction_=o,i.dragVertexDelay_=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,i.finishCoordinate_=null,i.sketchFeature_=null,i.sketchPoint_=null,i.sketchCoords_=null,i.sketchLine_=null,i.sketchLineCoords_=null,i.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,i.overlay_=new jf({source:new rp({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:(r=Sn(),function(t,e){return r[t.getGeometry().getType()]}),updateWhileInteracting:!0}),i.geometryName_=e.geometryName,i.condition_=e.condition?e.condition:th,i.freehandCondition_=e.freehand?Kl:e.freehandCondition?e.freehandCondition:eh,i.addEventListener(w(Yl),i.updateState_),i}return pg(e,t),e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),this.updateState_()},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleEvent=function(e){e.originalEvent.type===ca&&e.preventDefault(),this.freehand_=this.mode_!==dg&&this.freehandCondition_(e);var i=e.type===Us.POINTERMOVE,n=!0;return!this.freehand_&&this.lastDragTime_&&e.type===Us.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,i=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===Us.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(e.coordinate),n=!1):this.freehand_&&e.type===Us.POINTERDOWN?n=!1:i?(n=e.type===Us.POINTERMOVE)&&this.freehand_?n=this.handlePointerMove_(e):("mouse"==e.pointerEvent.pointerType||e.type===Us.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(e):e.type===Us.DBLCLICK&&(n=!1),t.prototype.handleEvent.call(this,e)&&n},e.prototype.handleDownEvent=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout((function(){this.handlePointerMove_(new Hs(Us.POINTERMOVE,t.map,t.pointerEvent,!1,t.frameState))}).bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)},e.prototype.handleUpEvent=function(t){var e=!0;return this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t),this.shouldHandle_?(this.finishCoordinate_?this.freehand_||this.mode_===vg?this.finishDrawing():this.atFinish_(t)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate):(this.startDrawing_(t),this.mode_===dg&&this.finishDrawing()),e=!1):this.freehand_&&this.abortDrawing(),!e&&this.stopClick_&&t.stopPropagation(),e},e.prototype.handlePointerMove_=function(t){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,i=t.pixel,n=e[0]-i[0],r=e[1]-i[1],o=n*n+r*r;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return!0}return this.finishCoordinate_?this.modifyDrawing_(t):this.createOrUpdateSketchPoint_(t),!0},e.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var i=!1,n=[this.finishCoordinate_];if(this.mode_===fg)i=this.sketchCoords_.length>this.minPoints_;else if(this.mode_===gg){var r=this.sketchCoords_;i=r[0].length>this.minPoints_,n=[r[0][0],r[0][r[0].length-2]]}if(i)for(var o=t.map,a=0,s=n.length;a<s;a++){var l=n[a],h=o.getPixelFromCoordinate(l),u=t.pixel,c=u[0]-h[0],p=u[1]-h[1],d=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(c*c+p*p)<=d){this.finishCoordinate_=l;break}}}return e},e.prototype.createOrUpdateSketchPoint_=function(t){var e=t.coordinate.slice();this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new La(new Ss(e)),this.updateSketchFeatures_())},e.prototype.startDrawing_=function(t){var e=t.coordinate,i=t.map.getView().getProjection();this.finishCoordinate_=e,this.mode_===dg?this.sketchCoords_=e.slice():this.mode_===gg?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new La(new zf(this.sketchLineCoords_)));var n=this.geometryFunction_(this.sketchCoords_,void 0,i);this.sketchFeature_=new La,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(n),this.updateSketchFeatures_(),this.dispatchEvent(new yg("drawstart",this.sketchFeature_))},e.prototype.modifyDrawing_=function(t){var e,i,n,r=t.coordinate,o=this.sketchFeature_.getGeometry(),a=t.map.getView().getProjection();if(this.mode_===dg?i=this.sketchCoords_:this.mode_===gg?(i=(e=this.sketchCoords_[0])[e.length-1],this.atFinish_(t)&&(r=this.finishCoordinate_.slice())):i=(e=this.sketchCoords_)[e.length-1],i[0]=r[0],i[1]=r[1],this.geometryFunction_(this.sketchCoords_,o,a),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(r),o.getType()==Xa.POLYGON&&this.mode_!==gg){this.sketchLine_||(this.sketchLine_=new La);var s=o.getLinearRing(0);(n=this.sketchLine_.getGeometry())?(n.setFlatCoordinates(s.getLayout(),s.getFlatCoordinates()),n.changed()):(n=new zf(s.getFlatCoordinates(),s.getLayout()),this.sketchLine_.setGeometry(n))}else this.sketchLineCoords_&&(n=this.sketchLine_.getGeometry()).setCoordinates(this.sketchLineCoords_);this.updateSketchFeatures_()},e.prototype.addToDrawing_=function(t){var e,i,n=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection();this.mode_===fg?(this.finishCoordinate_=t.slice(),(i=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(t.slice()),this.geometryFunction_(i,n,r)):this.mode_===gg&&((i=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(t.slice()),e&&(this.finishCoordinate_=i[0]),this.geometryFunction_(this.sketchCoords_,n,r)),this.updateSketchFeatures_(),e&&this.finishDrawing()},e.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t,e=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection();this.mode_===fg?((t=this.sketchCoords_).splice(-2,1),this.geometryFunction_(t,e,i),t.length>=2&&(this.finishCoordinate_=t[t.length-2].slice())):this.mode_===gg&&((t=this.sketchCoords_[0]).splice(-2,1),this.sketchLine_.getGeometry().setCoordinates(t),this.geometryFunction_(this.sketchCoords_,e,i)),0===t.length&&this.abortDrawing(),this.updateSketchFeatures_()}},e.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(t){var e=this.sketchCoords_,i=t.getGeometry(),n=this.getMap().getView().getProjection();this.mode_===fg?(e.pop(),this.geometryFunction_(e,i,n)):this.mode_===gg&&(e[0].pop(),this.geometryFunction_(e,i,n),e=i.getCoordinates()),this.type_===Xa.MULTI_POINT?t.setGeometry(new hg([e])):this.type_===Xa.MULTI_LINE_STRING?t.setGeometry(new sg([e])):this.type_===Xa.MULTI_POLYGON&&t.setGeometry(new cg([e])),this.dispatchEvent(new yg("drawend",t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},e.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),t},e.prototype.abortDrawing=function(){var t=this.abortDrawing_();t&&this.dispatchEvent(new yg("drawabort",t))},e.prototype.appendCoordinates=function(t){var e=this.mode_,i=[];e===fg?i=this.sketchCoords_:e===gg&&(i=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]);for(var n=i.pop(),r=0;r<t.length;r++)this.addToDrawing_(t[r]);this.addToDrawing_(n)},e.prototype.extend=function(t){var e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();var i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new yg("drawstart",this.sketchFeature_))},e.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},e.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing(),this.overlay_.setMap(e?t:null)},e}(ah),_g=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),xg="extentchanged",bg=function(t){function e(e){var i=t.call(this,xg)||this;return i.extent=e,i}return _g(e,t),e}(aa),wg=function(t){function e(e){var i,n=this,r=e||{};return(n=t.call(this,r)||this).extent_=null,n.pointerHandler_=null,n.pixelTolerance_=void 0!==r.pixelTolerance?r.pixelTolerance:10,n.snappedToVertex_=!1,n.extentFeature_=null,n.vertexFeature_=null,e||(e={}),n.extentOverlay_=new jf({source:new rp({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.boxStyle?e.boxStyle:(i=Sn(),function(t,e){return i[Xa.POLYGON]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),n.vertexOverlay_=new jf({source:new rp({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.pointerStyle?e.pointerStyle:function(){var t=Sn();return function(e,i){return t[Xa.POINT]}}(),updateWhileAnimating:!0,updateWhileInteracting:!0}),e.extent&&n.setExtent(e.extent),n}return _g(e,t),e.prototype.snapToVertex_=function(t,e){var i=e.getCoordinateFromPixelInternal(t),n=this.getExtentInternal();if(n){var r=[[[n[0],n[1]],[n[0],n[3]]],[[n[0],n[3]],[n[2],n[3]]],[[n[2],n[3]],[n[2],n[1]]],[[n[2],n[1]],[n[0],n[1]]]];r.sort(function(t,e){return We(i,t)-We(i,e)});var o=r[0],a=Ne(i,o),s=e.getPixelFromCoordinateInternal(a);if(Xe(t,s)<=this.pixelTolerance_){var l=e.getPixelFromCoordinateInternal(o[0]),h=e.getPixelFromCoordinateInternal(o[1]),u=Ye(s,l),c=Ye(s,h),p=Math.sqrt(Math.min(u,c));return this.snappedToVertex_=p<=this.pixelTolerance_,this.snappedToVertex_&&(a=u>c?o[1]:o[0]),a}}return null},e.prototype.handlePointerMove_=function(t){var e=t.pixel,i=t.map,n=this.snapToVertex_(e,i);n||(n=i.getCoordinateFromPixelInternal(e)),this.createOrUpdatePointerFeature_(n)},e.prototype.createOrUpdateExtentFeature_=function(t){var e=this.extentFeature_;return e?e.setGeometry(t?Se(t):void 0):(e=new La(t?Se(t):{}),this.extentFeature_=e,this.extentOverlay_.getSource().addFeature(e)),e},e.prototype.createOrUpdatePointerFeature_=function(t){var e=this.vertexFeature_;return e?e.getGeometry().setCoordinates(t):(e=new La(new Ss(t)),this.vertexFeature_=e,this.vertexOverlay_.getSource().addFeature(e)),e},e.prototype.handleEvent=function(e){return!e.pointerEvent||(e.type!=Us.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),t.prototype.handleEvent.call(this,e),!1)},e.prototype.handleDownEvent=function(t){var e=t.pixel,i=t.map,n=this.getExtentInternal(),r=this.snapToVertex_(e,i),o=function(t){var e=null,i=null;return t[0]==n[0]?e=n[2]:t[0]==n[2]&&(e=n[0]),t[1]==n[1]?i=n[3]:t[1]==n[3]&&(i=n[1]),null!==e&&null!==i?[e,i]:null};if(r&&n){var a=r[0]==n[0]||r[0]==n[2]?r[0]:null,s=r[1]==n[1]||r[1]==n[3]?r[1]:null;null!==a&&null!==s?this.pointerHandler_=ir(o(r)):null!==a?this.pointerHandler_=nr(o([a,n[1]]),o([a,n[3]])):null!==s&&(this.pointerHandler_=nr(o([n[0],s]),o([n[2],s])))}else r=i.getCoordinateFromPixelInternal(e),this.setExtent([r[0],r[1],r[0],r[1]]),this.pointerHandler_=ir(r);return!0},e.prototype.handleDragEvent=function(t){if(this.pointerHandler_){var e=t.coordinate;this.setExtent(this.pointerHandler_(e)),this.createOrUpdatePointerFeature_(e)}return!0},e.prototype.handleUpEvent=function(t){this.pointerHandler_=null;var e=this.getExtentInternal();return e&&0!==B(e)||this.setExtent(null),!1},e.prototype.setMap=function(e){this.extentOverlay_.setMap(e),this.vertexOverlay_.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.getExtent=function(){return kt(this.getExtentInternal(),this.getMap().getView().getProjection())},e.prototype.getExtentInternal=function(){return this.extent_},e.prototype.setExtent=function(t){this.extent_=t||null,this.createOrUpdateExtentFeature_(t),this.dispatchEvent(new bg(this.extent_))},e}(ah),Sg=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Cg=[0,0,0,0],Eg=[],Tg=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.features=i,r.mapBrowserEvent=n,r}return Sg(e,t),e}(aa),Pg=function(t){function e(e){var i,n,r=t.call(this,e)||this;if(r.boundHandleFeatureChange_=r.handleFeatureChange_.bind(r),r.condition_=e.condition?e.condition:rh,r.defaultDeleteCondition_=function(t){return Hl(t)&&Ql(t)},r.deleteCondition_=e.deleteCondition?e.deleteCondition:r.defaultDeleteCondition_,r.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:Kl,r.vertexFeature_=null,r.vertexSegments_=null,r.lastPixel_=[0,0],r.ignoreNextSingleClick_=!1,r.modified_=!1,r.rBush_=new ep,r.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,r.snappedToVertex_=!1,r.changingFeature_=!1,r.dragSegments_=[],r.overlay_=new jf({source:new rp({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:(i=Sn(),function(t,e){return i[Xa.POINT]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),r.SEGMENT_WRITERS_={Point:r.writePointGeometry_.bind(r),LineString:r.writeLineStringGeometry_.bind(r),LinearRing:r.writeLineStringGeometry_.bind(r),Polygon:r.writePolygonGeometry_.bind(r),MultiPoint:r.writeMultiPointGeometry_.bind(r),MultiLineString:r.writeMultiLineStringGeometry_.bind(r),MultiPolygon:r.writeMultiPolygonGeometry_.bind(r),Circle:r.writeCircleGeometry_.bind(r),GeometryCollection:r.writeGeometryCollectionGeometry_.bind(r)},r.source_=null,e.source?(r.source_=e.source,n=new Ta(r.source_.getFeatures()),r.source_.addEventListener(Zc,r.handleSourceAdd_.bind(r)),r.source_.addEventListener($c,r.handleSourceRemove_.bind(r))):n=e.features,!n)throw new Error("The modify interaction requires features or a source");return r.features_=n,r.features_.forEach(r.addFeature_.bind(r)),r.features_.addEventListener(ta,r.handleFeatureAdd_.bind(r)),r.features_.addEventListener(ea,r.handleFeatureRemove_.bind(r)),r.lastPointerEvent_=null,r}return Sg(e,t),e.prototype.addFeature_=function(t){var e=t.getGeometry();if(e){var i=this.SEGMENT_WRITERS_[e.getType()];i&&i(t,e)}var n=this.getMap();n&&n.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,n),t.addEventListener(ha,this.boundHandleFeatureChange_)},e.prototype.willModifyFeatures_=function(t){this.modified_||(this.modified_=!0,this.dispatchEvent(new Tg("modifystart",this.features_,t)))},e.prototype.removeFeature_=function(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.removeEventListener(ha,this.boundHandleFeatureChange_)},e.prototype.removeFeatureSegmentData_=function(t){var e=this.rBush_,i=[];e.forEach(function(e){t===e.feature&&i.push(e)});for(var n=i.length-1;n>=0;--n){for(var r=i[n],o=this.dragSegments_.length-1;o>=0;--o)this.dragSegments_[o][0]===r&&this.dragSegments_.splice(o,1);e.remove(r)}},e.prototype.setActive=function(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.prototype.setActive.call(this,e)},e.prototype.setMap=function(e){this.overlay_.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleSourceAdd_=function(t){t.feature&&this.features_.push(t.feature)},e.prototype.handleSourceRemove_=function(t){t.feature&&this.features_.remove(t.feature)},e.prototype.handleFeatureAdd_=function(t){this.addFeature_(t.element)},e.prototype.handleFeatureChange_=function(t){if(!this.changingFeature_){var e=t.target;this.removeFeature_(e),this.addFeature_(e)}},e.prototype.handleFeatureRemove_=function(t){this.removeFeature_(t.element)},e.prototype.writePointGeometry_=function(t,e){var i=e.getCoordinates(),n={feature:t,geometry:e,segment:[i,i]};this.rBush_.insert(e.getExtent(),n)},e.prototype.writeMultiPointGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n){var o=i[n],a={feature:t,geometry:e,depth:[n],index:n,segment:[o,o]};this.rBush_.insert(e.getExtent(),a)}},e.prototype.writeLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length-1;n<r;++n){var o=i.slice(n,n+2),a={feature:t,geometry:e,index:n,segment:o};this.rBush_.insert(C(o),a)}},e.prototype.writeMultiLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n)for(var o=i[n],a=0,s=o.length-1;a<s;++a){var l=o.slice(a,a+2),h={feature:t,geometry:e,depth:[n],index:a,segment:l};this.rBush_.insert(C(l),h)}},e.prototype.writePolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n)for(var o=i[n],a=0,s=o.length-1;a<s;++a){var l=o.slice(a,a+2),h={feature:t,geometry:e,depth:[n],index:a,segment:l};this.rBush_.insert(C(l),h)}},e.prototype.writeMultiPolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n)for(var o=i[n],a=0,s=o.length;a<s;++a)for(var l=o[a],h=0,u=l.length-1;h<u;++h){var c=l.slice(h,h+2),p={feature:t,geometry:e,depth:[a,n],index:h,segment:c};this.rBush_.insert(C(c),p)}},e.prototype.writeCircleGeometry_=function(t,e){var i=e.getCenter(),n={feature:t,geometry:e,index:0,segment:[i,i]},r={feature:t,geometry:e,index:1,segment:[i,i]},o=[n,r];n.featureSegments=o,r.featureSegments=o,this.rBush_.insert(F(i),n);var a=e,s=Rt();if(s&&this.getMap()){var l=this.getMap().getView().getProjection();a=Ce(a=a.clone().transform(s,l)).transform(l,s)}this.rBush_.insert(a.getExtent(),r)},e.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var i=e.getGeometriesArray(),n=0;n<i.length;++n){var r=i[n];(0,this.SEGMENT_WRITERS_[r.getType()])(t,r)}},e.prototype.createOrUpdateVertexFeature_=function(t){var e=this.vertexFeature_;return e?e.getGeometry().setCoordinates(t):(e=new La(new Ss(t)),this.vertexFeature_=e,this.overlay_.getSource().addFeature(e)),e},e.prototype.handleEvent=function(e){return!e.pointerEvent||(this.lastPointerEvent_=e,e.map.getView().getInteracting()||e.type!=Us.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(i=!(e.type!=Us.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),e.type==Us.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),t.prototype.handleEvent.call(this,e)&&!i);var i},e.prototype.handleDragEvent=function(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t);for(var e=t.coordinate,i=0,n=this.dragSegments_.length;i<n;++i){for(var r=this.dragSegments_[i],o=r[0],a=o.depth,s=o.geometry,l=void 0,h=o.segment,u=r[1];e.length<s.getStride();)e.push(h[u][e.length]);switch(s.getType()){case Xa.POINT:l=e,h[0]=e,h[1]=e;break;case Xa.MULTI_POINT:(l=s.getCoordinates())[o.index]=e,h[0]=e,h[1]=e;break;case Xa.LINE_STRING:(l=s.getCoordinates())[o.index+u]=e,h[u]=e;break;case Xa.MULTI_LINE_STRING:case Xa.POLYGON:(l=s.getCoordinates())[a[0]][o.index+u]=e,h[u]=e;break;case Xa.MULTI_POLYGON:(l=s.getCoordinates())[a[1]][a[0]][o.index+u]=e,h[u]=e;break;case Xa.CIRCLE:if(h[0]=e,h[1]=e,0===o.index)this.changingFeature_=!0,s.setCenter(e),this.changingFeature_=!1;else{this.changingFeature_=!0;var c=t.map.getView().getProjection(),p=Xe(Ft(s.getCenter(),c),Ft(e,c)),d=Rt();if(d){var f=s.clone().transform(d,c);f.setRadius(p),p=f.transform(c,d).getRadius()}s.setRadius(p),this.changingFeature_=!1}}l&&this.setGeometryCoordinates_(s,l)}this.createOrUpdateVertexFeature_(e)},e.prototype.handleDownEvent=function(t){if(!this.condition_(t))return!1;var e=t.coordinate;this.handlePointerAtPixel_(t.pixel,t.map,e),this.dragSegments_.length=0,this.modified_=!1;var i=this.vertexFeature_;if(i){var n=t.map.getView().getProjection(),o=[],a=i.getGeometry().getCoordinates(),s=C([a]),l=this.rBush_.getInExtent(s),h={};l.sort(rr);for(var u=0,c=l.length;u<c;++u){var p=l[u],d=p.segment,f=r(p.feature),g=p.depth;if(g&&(f+="-"+g.join("-")),h[f]||(h[f]=new Array(2)),p.geometry.getType()!==Xa.CIRCLE||1!==p.index)if(!Ge(d[0],a)||h[f][0])if(!Ge(d[1],a)||h[f][1])r(d)in this.vertexSegments_&&!h[f][0]&&!h[f][1]&&this.insertVertexCondition_(t)&&o.push([p,a]);else{if((p.geometry.getType()===Xa.LINE_STRING||p.geometry.getType()===Xa.MULTI_LINE_STRING)&&h[f][0]&&0===h[f][0].index)continue;this.dragSegments_.push([p,1]),h[f][1]=p}else this.dragSegments_.push([p,0]),h[f][0]=p;else Ge(ar(e,p,n),a)&&!h[f][0]&&(this.dragSegments_.push([p,0]),h[f][0]=p)}o.length&&this.willModifyFeatures_(t);for(var v=o.length-1;v>=0;--v)this.insertVertex_.apply(this,o[v])}return!!this.vertexFeature_},e.prototype.handleUpEvent=function(t){for(var e=this.dragSegments_.length-1;e>=0;--e){var i=this.dragSegments_[e][0],n=i.geometry;if(n.getType()===Xa.CIRCLE){var r=n.getCenter(),o=i.featureSegments[0],a=i.featureSegments[1];o.segment[0]=r,o.segment[1]=r,a.segment[0]=r,a.segment[1]=r,this.rBush_.update(F(r),o);var s=n,l=Rt();if(l){var h=t.map.getView().getProjection();s=Ce(s=s.clone().transform(l,h)).transform(h,l)}this.rBush_.update(s.getExtent(),a)}else this.rBush_.update(C(i.segment),i)}return this.modified_&&(this.dispatchEvent(new Tg("modifyend",this.features_,t)),this.modified_=!1),!1},e.prototype.handlePointerMove_=function(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map,t.coordinate)},e.prototype.handlePointerAtPixel_=function(t,e,i){var n=i||e.getCoordinateFromPixel(t),o=e.getView().getProjection(),a=kt(E(Nt(F(n,Cg),o),e.getView().getResolution()*this.pixelTolerance_,Cg),o),s=this.rBush_.getInExtent(a);if(s.length>0){s.sort(function(t,e){return or(n,t,o)-or(n,e,o)});var l=s[0],h=l.segment,u=ar(n,l,o),c=e.getPixelFromCoordinate(u),p=Xe(t,c);if(p<=this.pixelTolerance_){var d={};if(l.geometry.getType()===Xa.CIRCLE&&1===l.index)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(u);else{var f=e.getPixelFromCoordinate(h[0]),g=e.getPixelFromCoordinate(h[1]),v=Ye(c,f),y=Ye(c,g);p=Math.sqrt(Math.min(v,y)),this.snappedToVertex_=p<=this.pixelTolerance_,this.snappedToVertex_&&(u=v>y?h[1]:h[0]),this.createOrUpdateVertexFeature_(u);for(var m=1,_=s.length;m<_;++m){var x=s[m].segment;if(!(Ge(h[0],x[0])&&Ge(h[1],x[1])||Ge(h[0],x[1])&&Ge(h[1],x[0])))break;d[r(x)]=!0}}return d[r(h)]=!0,void(this.vertexSegments_=d)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},e.prototype.insertVertex_=function(t,e){for(var i,n=t.segment,r=t.feature,o=t.geometry,a=t.depth,s=t.index;e.length<o.getStride();)e.push(0);switch(o.getType()){case Xa.MULTI_LINE_STRING:case Xa.POLYGON:(i=o.getCoordinates())[a[0]].splice(s+1,0,e);break;case Xa.MULTI_POLYGON:(i=o.getCoordinates())[a[1]][a[0]].splice(s+1,0,e);break;case Xa.LINE_STRING:(i=o.getCoordinates()).splice(s+1,0,e);break;default:return}this.setGeometryCoordinates_(o,i);var l=this.rBush_;l.remove(t),this.updateSegmentIndices_(o,s,a,1);var h={segment:[n[0],e],feature:r,geometry:o,depth:a,index:s};l.insert(C(h.segment),h),this.dragSegments_.push([h,1]);var u={segment:[e,n[1]],feature:r,geometry:o,depth:a,index:s+1};l.insert(C(u.segment),u),this.dragSegments_.push([u,0]),this.ignoreNextSingleClick_=!0},e.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=Us.POINTERDRAG){var t=this.lastPointerEvent_;this.willModifyFeatures_(t);var e=this.removeVertex_();return this.dispatchEvent(new Tg("modifyend",this.features_,t)),this.modified_=!1,e}return!1},e.prototype.removeVertex_=function(){var t,e,i,n,o,a,s,l,h,u,c,p=this.dragSegments_,d={},f=!1;for(o=p.length-1;o>=0;--o)c=r((u=(i=p[o])[0]).feature),u.depth&&(c+="-"+u.depth.join("-")),c in d||(d[c]={}),0===i[1]?(d[c].right=u,d[c].index=u.index):1==i[1]&&(d[c].left=u,d[c].index=u.index+1);for(c in d){switch(h=d[c].right,s=d[c].left,(l=(a=d[c].index)-1)<0&&(l=0),t=e=(n=(u=void 0!==s?s:h).geometry).getCoordinates(),f=!1,n.getType()){case Xa.MULTI_LINE_STRING:e[u.depth[0]].length>2&&(e[u.depth[0]].splice(a,1),f=!0);break;case Xa.LINE_STRING:e.length>2&&(e.splice(a,1),f=!0);break;case Xa.MULTI_POLYGON:t=t[u.depth[1]];case Xa.POLYGON:(t=t[u.depth[0]]).length>4&&(a==t.length-1&&(a=0),t.splice(a,1),f=!0,0===a&&(t.pop(),t.push(t[0]),l=t.length-1))}if(f){this.setGeometryCoordinates_(n,e);var g=[];if(void 0!==s&&(this.rBush_.remove(s),g.push(s.segment[0])),void 0!==h&&(this.rBush_.remove(h),g.push(h.segment[1])),void 0!==s&&void 0!==h){var v={depth:u.depth,feature:u.feature,geometry:u.geometry,index:l,segment:g};this.rBush_.insert(C(v.segment),v)}this.updateSegmentIndices_(n,a,u.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),p.length=0}}return f},e.prototype.setGeometryCoordinates_=function(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1},e.prototype.updateSegmentIndices_=function(t,e,i,n){this.rBush_.forEachInExtent(t.getExtent(),function(r){r.geometry===t&&(void 0===i||void 0===r.depth||v(r.depth,i))&&r.index>e&&(r.index+=n)})},e}(ah),Lg=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ig="select",Og=function(t){function e(e,i,n,r){var o=t.call(this,e)||this;return o.selected=i,o.deselected=n,o.mapBrowserEvent=r,o}return Lg(e,t),e}(aa),Ag={},Rg=function(t){function e(e){var i,n,r=t.call(this,{handleEvent:sr})||this,o=e||{};if(r.boundAddFeature_=r.addFeature_.bind(r),r.boundRemoveFeature_=r.removeFeature_.bind(r),r.condition_=o.condition?o.condition:Ql,r.addCondition_=o.addCondition?o.addCondition:$l,r.removeCondition_=o.removeCondition?o.removeCondition:$l,r.toggleCondition_=o.toggleCondition?o.toggleCondition:eh,r.multi_=!!o.multi&&o.multi,r.filter_=o.filter?o.filter:m,r.hitTolerance_=o.hitTolerance?o.hitTolerance:0,r.style_=void 0!==o.style?o.style:(f((i=Sn())[Xa.POLYGON],i[Xa.LINE_STRING]),f(i[Xa.GEOMETRY_COLLECTION],i[Xa.LINE_STRING]),function(t){return t.getGeometry()?i[t.getGeometry().getType()]:null}),r.features_=o.features||new Ta,o.layers)if("function"==typeof o.layers)n=o.layers;else{var a=o.layers;n=function(t){return c(a,t)}}else n=m;return r.layerFilter_=n,r.featureLayerAssociation_={},r}return Lg(e,t),e.prototype.addFeatureLayerAssociation_=function(t,e){this.featureLayerAssociation_[r(t)]=e},e.prototype.getFeatures=function(){return this.features_},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.getLayer=function(t){return this.featureLayerAssociation_[r(t)]},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),t.prototype.setMap.call(this,e),e?(this.features_.addEventListener(ta,this.boundAddFeature_),this.features_.addEventListener(ea,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(ta,this.boundAddFeature_),this.features_.removeEventListener(ea,this.boundRemoveFeature_))},e.prototype.addFeature_=function(t){this.style_&&this.applySelectedStyle_(t.element)},e.prototype.removeFeature_=function(t){this.style_&&this.restorePreviousStyle_(t.element)},e.prototype.getStyle=function(){return this.style_},e.prototype.applySelectedStyle_=function(t){var e=r(t);e in Ag||(Ag[e]=t.getStyle()),t.setStyle(this.style_)},e.prototype.restorePreviousStyle_=function(t){var i=r(t),n=this.getMap().getInteractions().getArray().filter(function(i){return i instanceof e&&i.getStyle()&&-1!==i.getFeatures().getArray().indexOf(t)});n.length>0?t.setStyle(n[n.length-1].getStyle()):(t.setStyle(Ag[i]),delete Ag[i])},e.prototype.removeFeatureLayerAssociation_=function(t){delete this.featureLayerAssociation_[r(t)]},e}(Wl),Mg=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Fg=[],kg=function(t){function e(e){var i=this,n=e||{},r=n;return r.handleDownEvent||(r.handleDownEvent=m),r.stopDown||(r.stopDown=_),(i=t.call(this,r)||this).source_=n.source?n.source:null,i.vertex_=void 0===n.vertex||n.vertex,i.edge_=void 0===n.edge||n.edge,i.features_=n.features?n.features:null,i.featuresListenerKeys_=[],i.featureChangeListenerKeys_={},i.indexedFeaturesExtents_={},i.pendingFeatures_={},i.pixelTolerance_=void 0!==n.pixelTolerance?n.pixelTolerance:10,i.rBush_=new ep,i.SEGMENT_WRITERS_={Point:i.writePointGeometry_.bind(i),LineString:i.writeLineStringGeometry_.bind(i),LinearRing:i.writeLineStringGeometry_.bind(i),Polygon:i.writePolygonGeometry_.bind(i),MultiPoint:i.writeMultiPointGeometry_.bind(i),MultiLineString:i.writeMultiLineStringGeometry_.bind(i),MultiPolygon:i.writeMultiPolygonGeometry_.bind(i),GeometryCollection:i.writeGeometryCollectionGeometry_.bind(i),Circle:i.writeCircleGeometry_.bind(i)},i}return Mg(e,t),e.prototype.addFeature=function(t,e){var i=void 0===e||e,n=r(t),o=t.getGeometry();if(o){var a=this.SEGMENT_WRITERS_[o.getType()];a&&(this.indexedFeaturesExtents_[n]=o.getExtent([1/0,1/0,-1/0,-1/0]),a(t,o))}i&&(this.featureChangeListenerKeys_[n]=s(t,ha,this.handleFeatureChange_,this))},e.prototype.forEachFeatureAdd_=function(t){this.addFeature(t)},e.prototype.forEachFeatureRemove_=function(t){this.removeFeature(t)},e.prototype.getFeatures_=function(){var t;return this.features_?t=this.features_:this.source_&&(t=this.source_.getFeatures()),t},e.prototype.handleEvent=function(e){var i=this.snapTo(e.pixel,e.coordinate,e.map);return i.snapped&&(e.coordinate=i.vertex.slice(0,2),e.pixel=i.vertexPixel),t.prototype.handleEvent.call(this,e)},e.prototype.handleFeatureAdd_=function(t){var e=lr(t);this.addFeature(e)},e.prototype.handleFeatureRemove_=function(t){var e=lr(t);this.removeFeature(e)},e.prototype.handleFeatureChange_=function(t){var e=t.target;if(this.handlingDownUpSequence){var i=r(e);i in this.pendingFeatures_||(this.pendingFeatures_[i]=e)}else this.updateFeature_(e)},e.prototype.handleUpEvent=function(t){var e=ra(this.pendingFeatures_);return e.length&&(e.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1},e.prototype.removeFeature=function(t,e){var i=void 0===e||e,n=r(t),o=this.indexedFeaturesExtents_[n];if(o){var a=this.rBush_,s=[];a.forEachInExtent(o,function(e){t===e.feature&&s.push(e)});for(var l=s.length-1;l>=0;--l)a.remove(s[l])}i&&(h(this.featureChangeListenerKeys_[n]),delete this.featureChangeListenerKeys_[n])},e.prototype.setMap=function(e){var i=this.getMap(),n=this.featuresListenerKeys_,r=this.getFeatures_();i&&(n.forEach(h),n.length=0,r.forEach(this.forEachFeatureRemove_.bind(this))),t.prototype.setMap.call(this,e),e&&(this.features_?n.push(s(this.features_,ta,this.handleFeatureAdd_,this),s(this.features_,ea,this.handleFeatureRemove_,this)):this.source_&&n.push(s(this.source_,Zc,this.handleFeatureAdd_,this),s(this.source_,$c,this.handleFeatureRemove_,this)),r.forEach(this.forEachFeatureAdd_.bind(this)))},e.prototype.snapTo=function(t,e,i){var n=C([i.getCoordinateFromPixel([t[0]-this.pixelTolerance_,t[1]+this.pixelTolerance_]),i.getCoordinateFromPixel([t[0]+this.pixelTolerance_,t[1]-this.pixelTolerance_])]),r=this.rBush_.getInExtent(n);this.vertex_&&!this.edge_&&(r=r.filter(function(t){return t.feature.getGeometry().getType()!==Xa.CIRCLE}));var o=!1,a=null,s=null;if(0===r.length)return{snapped:o,vertex:a,vertexPixel:s};for(var l,h=i.getView().getProjection(),u=Ft(e,h),c=1/0,p=0;p<r.length;++p){var d=r[p];Fg[0]=Ft(d.segment[0],h),Fg[1]=Ft(d.segment[1],h);var f=We(u,Fg);f<c&&(l=d,c=f)}var g=l.segment;if(this.vertex_&&!this.edge_){var v=i.getPixelFromCoordinate(g[0]),y=i.getPixelFromCoordinate(g[1]),m=Ye(t,v),_=Ye(t,y);Math.sqrt(Math.min(m,_))<=this.pixelTolerance_&&(o=!0,a=m>_?g[1]:g[0],s=i.getPixelFromCoordinate(a))}else if(this.edge_){var x=l.feature.getGeometry().getType()===Xa.CIRCLE;if(x){var b=l.feature.getGeometry(),w=Rt();w&&(b=b.clone().transform(w,h)),a=Mt(function(t,e){var i=e.getRadius(),n=e.getCenter(),r=n[0],o=n[1],a=t[0]-r,s=t[1]-o;0===a&&0===s&&(a=1);var l=Math.sqrt(a*a+s*s);return[r+i*a/l,o+i*s/l]}(u,b),h)}else Fg[0]=Ft(g[0],h),Fg[1]=Ft(g[1],h),a=Mt(Ne(u,Fg),h);Xe(t,s=i.getPixelFromCoordinate(a))<=this.pixelTolerance_&&(o=!0,this.vertex_&&!x)&&(v=i.getPixelFromCoordinate(g[0]),y=i.getPixelFromCoordinate(g[1]),m=Ye(s,v),_=Ye(s,y),Math.sqrt(Math.min(m,_))<=this.pixelTolerance_&&(a=m>_?g[1]:g[0],s=i.getPixelFromCoordinate(a)))}return o&&(s=[Math.round(s[0]),Math.round(s[1])]),{snapped:o,vertex:a,vertexPixel:s}},e.prototype.updateFeature_=function(t){this.removeFeature(t,!1),this.addFeature(t,!1)},e.prototype.writeCircleGeometry_=function(t,e){var i=this.getMap().getView().getProjection(),n=e,r=Rt();r&&(n=n.clone().transform(r,i));var o=Ce(n);r&&o.transform(i,r);for(var a=o.getCoordinates()[0],s=0,l=a.length-1;s<l;++s){var h=a.slice(s,s+2),u={feature:t,segment:h};this.rBush_.insert(C(h),u)}},e.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var i=e.getGeometriesArray(),n=0;n<i.length;++n){var r=this.SEGMENT_WRITERS_[i[n].getType()];r&&r(t,i[n])}},e.prototype.writeLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length-1;n<r;++n){var o=i.slice(n,n+2),a={feature:t,segment:o};this.rBush_.insert(C(o),a)}},e.prototype.writeMultiLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n)for(var o=i[n],a=0,s=o.length-1;a<s;++a){var l=o.slice(a,a+2),h={feature:t,segment:l};this.rBush_.insert(C(l),h)}},e.prototype.writeMultiPointGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n){var o=i[n],a={feature:t,segment:[o,o]};this.rBush_.insert(e.getExtent(),a)}},e.prototype.writeMultiPolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n)for(var o=i[n],a=0,s=o.length;a<s;++a)for(var l=o[a],h=0,u=l.length-1;h<u;++h){var c=l.slice(h,h+2),p={feature:t,segment:c};this.rBush_.insert(C(c),p)}},e.prototype.writePointGeometry_=function(t,e){var i=e.getCoordinates(),n={feature:t,segment:[i,i]};this.rBush_.insert(e.getExtent(),n)},e.prototype.writePolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n)for(var o=i[n],a=0,s=o.length-1;a<s;++a){var l=o.slice(a,a+2),h={feature:t,segment:l};this.rBush_.insert(C(l),h)}},e}(ah),Ng=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Dg=function(t){function e(e,i,n,r,o){var a=t.call(this,e)||this;return a.features=i,a.coordinate=n,a.startCoordinate=r,a.mapBrowserEvent=o,a}return Ng(e,t),e}(aa),jg=function(t){function e(e){var i,n=this,r=e||{};if((n=t.call(this,r)||this).lastCoordinate_=null,n.startCoordinate_=null,n.features_=void 0!==r.features?r.features:null,r.layers)if("function"==typeof r.layers)i=r.layers;else{var o=r.layers;i=function(t){return c(o,t)}}else i=m;return n.layerFilter_=i,n.filter_=r.filter?r.filter:m,n.hitTolerance_=r.hitTolerance?r.hitTolerance:0,n.lastFeature_=null,n.addEventListener(w(Yl),n.handleActiveChanged_),n}return Ng(e,t),e.prototype.handleDownEvent=function(t){if(this.lastFeature_=this.featuresAtPixel_(t.pixel,t.map),!this.lastCoordinate_&&this.lastFeature_){this.startCoordinate_=t.coordinate,this.lastCoordinate_=t.coordinate,this.handleMoveEvent(t);var e=this.features_||new Ta([this.lastFeature_]);return this.dispatchEvent(new Dg("translatestart",e,t.coordinate,this.startCoordinate_,t)),!0}return!1},e.prototype.handleUpEvent=function(t){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(t);var e=this.features_||new Ta([this.lastFeature_]);return this.dispatchEvent(new Dg("translateend",e,t.coordinate,this.startCoordinate_,t)),this.startCoordinate_=null,!0}return!1},e.prototype.handleDragEvent=function(t){if(this.lastCoordinate_){var e=t.coordinate,i=e[0]-this.lastCoordinate_[0],n=e[1]-this.lastCoordinate_[1],r=this.features_||new Ta([this.lastFeature_]);r.forEach(function(t){var e=t.getGeometry();e.translate(i,n),t.setGeometry(e)}),this.lastCoordinate_=e,this.dispatchEvent(new Dg("translating",r,e,this.startCoordinate_,t))}},e.prototype.handleMoveEvent=function(t){var e=t.map.getViewport();this.featuresAtPixel_(t.pixel,t.map)?(e.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),e.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):e.classList.remove("ol-grab","ol-grabbing")},e.prototype.featuresAtPixel_=function(t,e){return e.forEachFeatureAtPixel(t,(function(t,e){if(this.filter_(t,e)&&(!this.features_||c(this.features_.getArray(),t)))return t}).bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(e){var i=this.getMap();t.prototype.setMap.call(this,e),this.updateState_(i)},e.prototype.handleActiveChanged_=function(){this.updateState_(null)},e.prototype.updateState_=function(t){var e=this.getMap(),i=this.getActive();e&&i||(e=e||t)&&e.getViewport().classList.remove("ol-grab","ol-grabbing")},e}(ah),Gg=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),zg=function(t){function e(e){var i=t.call(this)||this;return i.geometries_=e||null,i.changeEventsKeys_=[],i.listenGeometriesChange_(),i}return Gg(e,t),e.prototype.unlistenGeometriesChange_=function(){this.changeEventsKeys_.forEach(h),this.changeEventsKeys_.length=0},e.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var t=0,e=this.geometries_.length;t<e;++t)this.changeEventsKeys_.push(s(this.geometries_[t],ha,this.changed,this))},e.prototype.clone=function(){var t=new e(null);return t.setGeometries(this.geometries_),t},e.prototype.closestPointXY=function(t,e,i,n){if(n<P(this.getExtent(),t,e))return n;for(var r=this.geometries_,o=0,a=r.length;o<a;++o)n=r[o].closestPointXY(t,e,i,n);return n},e.prototype.containsXY=function(t,e){for(var i=this.geometries_,n=0,r=i.length;n<r;++n)if(i[n].containsXY(t,e))return!0;return!1},e.prototype.computeExtent=function(t){M(t);for(var e=this.geometries_,i=0,n=e.length;i<n;++i)D(t,e[i].getExtent());return t},e.prototype.getGeometries=function(){return hr(this.geometries_)},e.prototype.getGeometriesArray=function(){return this.geometries_},e.prototype.getGeometriesArrayRecursive=function(){for(var t=[],e=this.geometries_,i=0,n=e.length;i<n;++i)e[i].getType()===this.getType()?t=t.concat(e[i].getGeometriesArrayRecursive()):t.push(e[i]);return t},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var i=[],n=this.geometries_,r=!1,o=0,a=n.length;o<a;++o){var s=n[o],l=s.getSimplifiedGeometry(t);i.push(l),l!==s&&(r=!0)}if(r){var h=new e(null);return h.setGeometriesArray(i),h}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},e.prototype.getType=function(){return Xa.GEOMETRY_COLLECTION},e.prototype.intersectsExtent=function(t){for(var e=this.geometries_,i=0,n=e.length;i<n;++i)if(e[i].intersectsExtent(t))return!0;return!1},e.prototype.isEmpty=function(){return 0===this.geometries_.length},e.prototype.rotate=function(t,e){for(var i=this.geometries_,n=0,r=i.length;n<r;++n)i[n].rotate(t,e);this.changed()},e.prototype.scale=function(t,e,i){var n=i;n||(n=W(this.getExtent()));for(var r=this.geometries_,o=0,a=r.length;o<a;++o)r[o].scale(t,e,n);this.changed()},e.prototype.setGeometries=function(t){this.setGeometriesArray(hr(t))},e.prototype.setGeometriesArray=function(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()},e.prototype.applyTransform=function(t){for(var e=this.geometries_,i=0,n=e.length;i<n;++i)e[i].applyTransform(t);this.changed()},e.prototype.translate=function(t,e){for(var i=this.geometries_,n=0,r=i.length;n<r;++n)i[n].translate(t,e);this.changed()},e.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),t.prototype.disposeInternal.call(this)},e}(ys),Bg=function(){function t(){this.dataProjection=null,this.defaultFeatureProjection=null}return t.prototype.getReadOptions=function(t,e){var i;if(e){var n=e.dataProjection?bt(e.dataProjection):this.readProjection(t);e.extent&&n&&n.getUnits()===Ka.TILE_PIXELS&&(n=bt(n)).setWorldExtent(e.extent),i={dataProjection:n,featureProjection:e.featureProjection}}return this.adaptOptions(i)},t.prototype.adaptOptions=function(t){return na({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},t.prototype.getType=function(){return n()},t.prototype.readFeature=function(t,e){return n()},t.prototype.readFeatures=function(t,e){return n()},t.prototype.readGeometry=function(t,e){return n()},t.prototype.readProjection=function(t){return n()},t.prototype.writeFeature=function(t,e){return n()},t.prototype.writeFeatures=function(t,e){return n()},t.prototype.writeGeometry=function(t,e){return n()},t}(),Yg=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Xg=function(t){function e(){return t.call(this)||this}return Yg(e,t),e.prototype.getType=function(){return Eu},e.prototype.readFeature=function(t,e){return this.readFeatureFromObject(pr(t),this.getReadOptions(t,e))},e.prototype.readFeatures=function(t,e){return this.readFeaturesFromObject(pr(t),this.getReadOptions(t,e))},e.prototype.readFeatureFromObject=function(t,e){return n()},e.prototype.readFeaturesFromObject=function(t,e){return n()},e.prototype.readGeometry=function(t,e){return this.readGeometryFromObject(pr(t),this.getReadOptions(t,e))},e.prototype.readGeometryFromObject=function(t,e){return n()},e.prototype.readProjection=function(t){return this.readProjectionFromObject(pr(t))},e.prototype.readProjectionFromObject=function(t){return n()},e.prototype.writeFeature=function(t,e){return JSON.stringify(this.writeFeatureObject(t,e))},e.prototype.writeFeatureObject=function(t,e){return n()},e.prototype.writeFeatures=function(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))},e.prototype.writeFeaturesObject=function(t,e){return n()},e.prototype.writeGeometry=function(t,e){return JSON.stringify(this.writeGeometryObject(t,e))},e.prototype.writeGeometryObject=function(t,e){return n()},e}(Bg),Wg=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ug={};Ug[Xa.POINT]=function(t){return void 0!==t.m&&void 0!==t.z?new Ss([t.x,t.y,t.z,t.m],Ya):void 0!==t.z?new Ss([t.x,t.y,t.z],za):void 0!==t.m?new Ss([t.x,t.y,t.m],Ba):new Ss([t.x,t.y])},Ug[Xa.LINE_STRING]=function(t){var e=fr(t);return new zf(t.paths[0],e)},Ug[Xa.POLYGON]=function(t){var e=fr(t);return new Ts(t.rings,e)},Ug[Xa.MULTI_POINT]=function(t){var e=fr(t);return new hg(t.points,e)},Ug[Xa.MULTI_LINE_STRING]=function(t){var e=fr(t);return new sg(t.paths,e)},Ug[Xa.MULTI_POLYGON]=function(t){var e=fr(t);return new cg(t.rings,e)};var Vg={};Vg[Xa.POINT]=function(t,e){var i,n=t.getCoordinates(),r=t.getLayout();return r===za?i={x:n[0],y:n[1],z:n[2]}:r===Ba?i={x:n[0],y:n[1],m:n[2]}:r===Ya?i={x:n[0],y:n[1],z:n[2],m:n[3]}:r===Ga?i={x:n[0],y:n[1]}:S(!1,34),i},Vg[Xa.LINE_STRING]=function(t,e){var i=gr(t);return{hasZ:i.hasZ,hasM:i.hasM,paths:[t.getCoordinates()]}},Vg[Xa.POLYGON]=function(t,e){var i=gr(t);return{hasZ:i.hasZ,hasM:i.hasM,rings:t.getCoordinates(!1)}},Vg[Xa.MULTI_POINT]=function(t,e){var i=gr(t);return{hasZ:i.hasZ,hasM:i.hasM,points:t.getCoordinates()}},Vg[Xa.MULTI_LINE_STRING]=function(t,e){var i=gr(t);return{hasZ:i.hasZ,hasM:i.hasM,paths:t.getCoordinates()}},Vg[Xa.MULTI_POLYGON]=function(t,e){for(var i=gr(t),n=t.getCoordinates(!1),r=[],o=0;o<n.length;o++)for(var a=n[o].length-1;a>=0;a--)r.push(n[o][a]);return{hasZ:i.hasZ,hasM:i.hasM,rings:r}};var Hg=function(t){function e(e){var i=this,n=e||{};return(i=t.call(this)||this).geometryName_=n.geometryName,i}return Wg(e,t),e.prototype.readFeatureFromObject=function(t,e){var i=t,n=dr(i.geometry,e),r=new La;return this.geometryName_&&r.setGeometryName(this.geometryName_),r.setGeometry(n),e&&e.idField&&i.attributes[e.idField]&&r.setId(i.attributes[e.idField]),i.attributes&&r.setProperties(i.attributes,!0),r},e.prototype.readFeaturesFromObject=function(t,e){var i=e||{};if(t.features){var n=[],r=t.features;i.idField=t.objectIdFieldName;for(var o=0,a=r.length;o<a;++o)n.push(this.readFeatureFromObject(r[o],i));return n}return[this.readFeatureFromObject(t,i)]},e.prototype.readGeometryFromObject=function(t,e){return dr(t,e)},e.prototype.readProjectionFromObject=function(t){return t.spatialReference&&void 0!==t.spatialReference.wkid?bt("EPSG:"+t.spatialReference.wkid):null},e.prototype.writeGeometryObject=function(t,e){return vr(t,this.adaptOptions(e))},e.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var i={},n=t.getGeometry();n&&(i.geometry=vr(n,e),e&&e.featureProjection&&(i.geometry.spatialReference={wkid:Number(bt(e.featureProjection).getCode().split(":").pop())}));var r=t.getProperties();return delete r[t.getGeometryName()],i.attributes=a(r)?{}:r,i},e.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);for(var i=[],n=0,r=t.length;n<r;++n)i.push(this.writeFeatureObject(t[n],e));return{features:i}},e}(Xg),qg=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Zg=function(t){function e(){var e=t.call(this)||this;return e.xmlSerializer_=(void 0===Nu&&"undefined"!=typeof XMLSerializer&&(Nu=new XMLSerializer),Nu),e}return qg(e,t),e.prototype.getType=function(){return Pu},e.prototype.readFeature=function(t,e){if(t){if("string"==typeof t){var i=Qi(t);return this.readFeatureFromDocument(i,e)}return $i(t)?this.readFeatureFromDocument(t,e):this.readFeatureFromNode(t,e)}return null},e.prototype.readFeatureFromDocument=function(t,e){var i=this.readFeaturesFromDocument(t,e);return i.length>0?i[0]:null},e.prototype.readFeatureFromNode=function(t,e){return null},e.prototype.readFeatures=function(t,e){if(t){if("string"==typeof t){var i=Qi(t);return this.readFeaturesFromDocument(i,e)}return $i(t)?this.readFeaturesFromDocument(t,e):this.readFeaturesFromNode(t,e)}return[]},e.prototype.readFeaturesFromDocument=function(t,e){for(var i=[],n=t.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&f(i,this.readFeaturesFromNode(n,e));return i},e.prototype.readFeaturesFromNode=function(t,e){return n()},e.prototype.readGeometry=function(t,e){if(t){if("string"==typeof t){var i=Qi(t);return this.readGeometryFromDocument(i,e)}return $i(t)?this.readGeometryFromDocument(t,e):this.readGeometryFromNode(t,e)}return null},e.prototype.readGeometryFromDocument=function(t,e){return null},e.prototype.readGeometryFromNode=function(t,e){return null},e.prototype.readProjection=function(t){if(t){if("string"==typeof t){var e=Qi(t);return this.readProjectionFromDocument(e)}return $i(t)?this.readProjectionFromDocument(t):this.readProjectionFromNode(t)}return null},e.prototype.readProjectionFromDocument=function(t){return this.dataProjection},e.prototype.readProjectionFromNode=function(t){return this.dataProjection},e.prototype.writeFeature=function(t,e){var i=this.writeFeatureNode(t,e);return this.xmlSerializer_.serializeToString(i)},e.prototype.writeFeatureNode=function(t,e){return null},e.prototype.writeFeatures=function(t,e){var i=this.writeFeaturesNode(t,e);return this.xmlSerializer_.serializeToString(i)},e.prototype.writeFeaturesNode=function(t,e){return null},e.prototype.writeGeometry=function(t,e){var i=this.writeGeometryNode(t,e);return this.xmlSerializer_.serializeToString(i)},e.prototype.writeGeometryNode=function(t,e){return null},e}(Bg),Kg=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Jg="http://www.opengis.net/gml",$g=/^[\s\xa0]*$/,Qg=function(t){function e(e){var i=t.call(this)||this,n=e||{};return i.featureType=n.featureType,i.featureNS=n.featureNS,i.srsName=n.srsName,i.schemaLocation="",i.FEATURE_COLLECTION_PARSERS={},i.FEATURE_COLLECTION_PARSERS[i.namespace]={featureMember:en(i.readFeaturesInternal),featureMembers:nn(i.readFeaturesInternal)},i}return Kg(e,t),e.prototype.readFeaturesInternal=function(t,e){var i=t.localName,n=null;if("FeatureCollection"==i)n=pn([],this.FEATURE_COLLECTION_PARSERS,t,e,this);else if("featureMembers"==i||"featureMember"==i){var r=e[0],o=r.featureType,a=r.featureNS;if(!o&&t.childNodes){o=[],a={};for(var s=0,l=t.childNodes.length;s<l;++s){var h=t.childNodes[s];if(1===h.nodeType){var u=h.nodeName.split(":").pop();if(-1===o.indexOf(u)){var c="",p=0,d=h.namespaceURI;for(var f in a){if(a[f]===d){c=f;break}++p}c||(a[c="p"+p]=d),o.push(c+":"+u)}}}"featureMember"!=i&&(r.featureType=o,r.featureNS=a)}if("string"==typeof a){var g=a;(a={}).p0=g}var v={},y=Array.isArray(o)?o:[o];for(var m in a){var _={};for(s=0,l=y.length;s<l;++s)(-1===y[s].indexOf(":")?"p0":y[s].split(":")[0])===m&&(_[y[s].split(":").pop()]="featureMembers"==i?en(this.readFeatureElement,this):nn(this.readFeatureElement,this));v[a[m]]=_}n=pn("featureMember"==i?void 0:[],v,t,e)}return null===n&&(n=[]),n},e.prototype.readGeometryElement=function(t,e){var i=e[0];i.srsName=t.firstElementChild.getAttribute("srsName"),i.srsDimension=t.firstElementChild.getAttribute("srsDimension");var n=pn(null,this.GEOMETRY_PARSERS,t,e,this);return n?Array.isArray(n)?cr(n,i):ur(n,!1,i):void 0},e.prototype.readFeatureElementInternal=function(t,e,i){for(var n,r={},o=t.firstElementChild;o;o=o.nextElementSibling){var a=void 0,s=o.localName;0===o.childNodes.length||1===o.childNodes.length&&(3===o.firstChild.nodeType||4===o.firstChild.nodeType)?(a=Ji(o,!1),$g.test(a)&&(a=void 0)):(i&&(a=this.readGeometryElement(o,e)),a?"boundedBy"!==s&&(n=s):a=this.readFeatureElementInternal(o,e,!1)),r[s]?(r[s]instanceof Array||(r[s]=[r[s]]),r[s].push(a)):r[s]=a;var l=o.attributes.length;if(l>0){r[s]={_content_:r[s]};for(var h=0;h<l;h++)r[s][o.attributes[h].name]=o.attributes[h].value}}if(i){var u=new La(r);n&&u.setGeometryName(n);var c=t.getAttribute("fid")||function(e,i,n){return t.getAttributeNS(i,"id")||""}(0,this.namespace);return c&&u.setId(c),u}return r},e.prototype.readFeatureElement=function(t,e){return this.readFeatureElementInternal(t,e,!0)},e.prototype.readPoint=function(t,e){var i=this.readFlatCoordinatesFromNode_(t,e);if(i)return new Ss(i,za)},e.prototype.readMultiPoint=function(t,e){var i=pn([],this.MULTIPOINT_PARSERS_,t,e,this);return i?new hg(i):void 0},e.prototype.readMultiLineString=function(t,e){var i=pn([],this.MULTILINESTRING_PARSERS_,t,e,this);if(i)return new sg(i)},e.prototype.readMultiPolygon=function(t,e){var i=pn([],this.MULTIPOLYGON_PARSERS_,t,e,this);if(i)return new cg(i)},e.prototype.pointMemberParser_=function(t,e){cn(this.POINTMEMBER_PARSERS_,t,e,this)},e.prototype.lineStringMemberParser_=function(t,e){cn(this.LINESTRINGMEMBER_PARSERS_,t,e,this)},e.prototype.polygonMemberParser_=function(t,e){cn(this.POLYGONMEMBER_PARSERS_,t,e,this)},e.prototype.readLineString=function(t,e){var i=this.readFlatCoordinatesFromNode_(t,e);return i?new zf(i,za):void 0},e.prototype.readFlatLinearRing_=function(t,e){return pn(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)||void 0},e.prototype.readLinearRing=function(t,e){var i=this.readFlatCoordinatesFromNode_(t,e);if(i)return new bs(i,za)},e.prototype.readPolygon=function(t,e){var i=pn([null],this.FLAT_LINEAR_RINGS_PARSERS,t,e,this);if(i&&i[0]){var n,r=i[0],o=[r.length],a=void 0;for(a=1,n=i.length;a<n;++a)f(r,i[a]),o.push(r.length);return new Ts(r,za,o)}},e.prototype.readFlatCoordinatesFromNode_=function(t,e){return pn(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)},e.prototype.readGeometryFromNode=function(t,e){return this.readGeometryElement(t,[this.getReadOptions(t,e||{})])||null},e.prototype.readFeaturesFromNode=function(t,e){var i={featureType:this.featureType,featureNS:this.featureNS};return e&&na(i,this.getReadOptions(t,e)),this.readFeaturesInternal(t,[i])||[]},e.prototype.readProjectionFromNode=function(t){return bt(this.srsName?this.srsName:t.firstElementChild.getAttribute("srsName"))},e}(Zg);Qg.prototype.namespace=Jg,Qg.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}},Qg.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}},Qg.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}},Qg.prototype.MULTIPOINT_PARSERS_={"http://www.opengis.net/gml":{pointMember:en(Qg.prototype.pointMemberParser_),pointMembers:en(Qg.prototype.pointMemberParser_)}},Qg.prototype.MULTILINESTRING_PARSERS_={"http://www.opengis.net/gml":{lineStringMember:en(Qg.prototype.lineStringMemberParser_),lineStringMembers:en(Qg.prototype.lineStringMemberParser_)}},Qg.prototype.MULTIPOLYGON_PARSERS_={"http://www.opengis.net/gml":{polygonMember:en(Qg.prototype.polygonMemberParser_),polygonMembers:en(Qg.prototype.polygonMemberParser_)}},Qg.prototype.POINTMEMBER_PARSERS_={"http://www.opengis.net/gml":{Point:en(Qg.prototype.readFlatCoordinatesFromNode_)}},Qg.prototype.LINESTRINGMEMBER_PARSERS_={"http://www.opengis.net/gml":{LineString:en(Qg.prototype.readLineString)}},Qg.prototype.POLYGONMEMBER_PARSERS_={"http://www.opengis.net/gml":{Polygon:en(Qg.prototype.readPolygon)}},Qg.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:nn(Qg.prototype.readFlatLinearRing_)}};var tv=Qg,ev=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),iv={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},nv=function(t){function e(e){var i=this,n=e||{};return(i=t.call(this,n)||this).surface_=void 0!==n.surface&&n.surface,i.curve_=void 0!==n.curve&&n.curve,i.multiCurve_=void 0===n.multiCurve||n.multiCurve,i.multiSurface_=void 0===n.multiSurface||n.multiSurface,i.schemaLocation=n.schemaLocation?n.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",i.hasZ=void 0!==n.hasZ&&n.hasZ,i}return ev(e,t),e.prototype.readMultiCurve_=function(t,e){var i=pn([],this.MULTICURVE_PARSERS_,t,e,this);return i?new sg(i):void 0},e.prototype.readMultiSurface_=function(t,e){var i=pn([],this.MULTISURFACE_PARSERS_,t,e,this);if(i)return new cg(i)},e.prototype.curveMemberParser_=function(t,e){cn(this.CURVEMEMBER_PARSERS_,t,e,this)},e.prototype.surfaceMemberParser_=function(t,e){cn(this.SURFACEMEMBER_PARSERS_,t,e,this)},e.prototype.readPatch_=function(t,e){return pn([null],this.PATCHES_PARSERS_,t,e,this)},e.prototype.readSegment_=function(t,e){return pn([null],this.SEGMENTS_PARSERS_,t,e,this)},e.prototype.readPolygonPatch_=function(t,e){return pn([null],this.FLAT_LINEAR_RINGS_PARSERS,t,e,this)},e.prototype.readLineStringSegment_=function(t,e){return pn([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)},e.prototype.interiorParser_=function(t,e){var i=pn(void 0,this.RING_PARSERS,t,e,this);i&&e[e.length-1].push(i)},e.prototype.exteriorParser_=function(t,e){var i=pn(void 0,this.RING_PARSERS,t,e,this);i&&(e[e.length-1][0]=i)},e.prototype.readSurface_=function(t,e){var i=pn([null],this.SURFACE_PARSERS_,t,e,this);if(i&&i[0]){var n,r=i[0],o=[r.length],a=void 0;for(a=1,n=i.length;a<n;++a)f(r,i[a]),o.push(r.length);return new Ts(r,za,o)}},e.prototype.readCurve_=function(t,e){var i=pn([null],this.CURVE_PARSERS_,t,e,this);return i?new zf(i,za):void 0},e.prototype.readEnvelope_=function(t,e){var i=pn([null],this.ENVELOPE_PARSERS_,t,e,this);return R(i[1][0],i[1][1],i[2][0],i[2][1])},e.prototype.readFlatPos_=function(t,e){for(var i,n=Ji(t,!1),r=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,o=[];i=r.exec(n);)o.push(parseFloat(i[1])),n=n.substr(i[0].length);if(""===n){var a=e[0].srsName,s="enu";if(a&&(s=bt(a).getAxisOrientation()),"neu"===s){var l,h=void 0;for(h=0,l=o.length;h<l;h+=3){var u=o[h];o[h]=o[h+1],o[h+1]=u}}var c=o.length;if(2==c&&o.push(0),0!==c)return o}},e.prototype.readFlatPosList_=function(t,e){var i=Ji(t,!1).replace(/^\s*|\s*$/g,""),n=e[0],r=n.srsName,o=n.srsDimension,a="enu";r&&(a=bt(r).getAxisOrientation());var s,l,h,u=i.split(/\s+/),c=2;t.getAttribute("srsDimension")?c=Sr(t.getAttribute("srsDimension")):t.getAttribute("dimension")?c=Sr(t.getAttribute("dimension")):t.parentNode.getAttribute("srsDimension")?c=Sr(t.parentNode.getAttribute("srsDimension")):o&&(c=Sr(o));for(var p=[],d=0,f=u.length;d<f;d+=c)s=parseFloat(u[d]),l=parseFloat(u[d+1]),h=3===c?parseFloat(u[d+2]):0,"en"===a.substr(0,2)?p.push(s,l,h):p.push(l,s,h);return p},e.prototype.writePos_=function(t,e,i){var n=i[i.length-1],r=n.hasZ;t.setAttribute("srsDimension",r?"3":"2");var o=n.srsName,a="enu";o&&(a=bt(o).getAxisOrientation());var s,l=e.getCoordinates();s="en"===a.substr(0,2)?l[0]+" "+l[1]:l[1]+" "+l[0],r&&(s+=" "+(l[2]||0)),Lr(t,s)},e.prototype.getCoords_=function(t,e,i){var n="enu";e&&(n=bt(e).getAxisOrientation());var r="en"===n.substr(0,2)?t[0]+" "+t[1]:t[1]+" "+t[0];return i&&(r+=" "+(t[2]||0)),r},e.prototype.writePosList_=function(t,e,i){var n=i[i.length-1],r=n.hasZ;t.setAttribute("srsDimension",r?"3":"2");for(var o,a=n.srsName,s=e.getCoordinates(),l=s.length,h=new Array(l),u=0;u<l;++u)o=s[u],h[u]=this.getCoords_(o,a,r);Lr(t,h.join(" "))},e.prototype.writePoint_=function(t,e,i){var n=i[i.length-1].srsName;n&&t.setAttribute("srsName",n);var r=Ki(t.namespaceURI,"pos");t.appendChild(r),this.writePos_(r,e,i)},e.prototype.writeEnvelope=function(t,e,i){var n=i[i.length-1].srsName;n&&t.setAttribute("srsName",n),fn({node:t},this.ENVELOPE_SERIALIZERS_,ku,[e[0]+" "+e[1],e[2]+" "+e[3]],i,["lowerCorner","upperCorner"],this)},e.prototype.writeLinearRing_=function(t,e,i){var n=i[i.length-1].srsName;n&&t.setAttribute("srsName",n);var r=Ki(t.namespaceURI,"posList");t.appendChild(r),this.writePosList_(r,e,i)},e.prototype.RING_NODE_FACTORY_=function(t,e,i){var n=e[e.length-1],r=n.node,o=n.exteriorWritten;return void 0===o&&(n.exteriorWritten=!0),Ki(r.namespaceURI,void 0!==o?"interior":"exterior")},e.prototype.writeSurfaceOrPolygon_=function(t,e,i){var n=i[i.length-1],r=n.hasZ,o=n.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var a=e.getLinearRings();fn({node:t,hasZ:r,srsName:o},this.RING_SERIALIZERS_,this.RING_NODE_FACTORY_,a,i,void 0,this)}else if("Surface"===t.nodeName){var s=Ki(t.namespaceURI,"patches");t.appendChild(s),this.writeSurfacePatches_(s,e,i)}},e.prototype.writeCurveOrLineString_=function(t,e,i){var n=i[i.length-1].srsName;if("LineStringSegment"!==t.nodeName&&n&&t.setAttribute("srsName",n),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var r=Ki(t.namespaceURI,"posList");t.appendChild(r),this.writePosList_(r,e,i)}else if("Curve"===t.nodeName){var o=Ki(t.namespaceURI,"segments");t.appendChild(o),this.writeCurveSegments_(o,e,i)}},e.prototype.writeMultiSurfaceOrPolygon_=function(t,e,i){var n=i[i.length-1],r=n.hasZ,o=n.srsName,a=n.surface;o&&t.setAttribute("srsName",o);var s=e.getPolygons();fn({node:t,hasZ:r,srsName:o,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,i,void 0,this)},e.prototype.writeMultiPoint_=function(t,e,i){var n=i[i.length-1],r=n.srsName,o=n.hasZ;r&&t.setAttribute("srsName",r);var a=e.getPoints();fn({node:t,hasZ:o,srsName:r},this.POINTMEMBER_SERIALIZERS_,ln("pointMember"),a,i,void 0,this)},e.prototype.writeMultiCurveOrLineString_=function(t,e,i){var n=i[i.length-1],r=n.hasZ,o=n.srsName,a=n.curve;o&&t.setAttribute("srsName",o);var s=e.getLineStrings();fn({node:t,hasZ:r,srsName:o,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,i,void 0,this)},e.prototype.writeRing_=function(t,e,i){var n=Ki(t.namespaceURI,"LinearRing");t.appendChild(n),this.writeLinearRing_(n,e,i)},e.prototype.writeSurfaceOrPolygonMember_=function(t,e,i){var n=this.GEOMETRY_NODE_FACTORY_(e,i);n&&(t.appendChild(n),this.writeSurfaceOrPolygon_(n,e,i))},e.prototype.writePointMember_=function(t,e,i){var n=Ki(t.namespaceURI,"Point");t.appendChild(n),this.writePoint_(n,e,i)},e.prototype.writeLineStringOrCurveMember_=function(t,e,i){var n=this.GEOMETRY_NODE_FACTORY_(e,i);n&&(t.appendChild(n),this.writeCurveOrLineString_(n,e,i))},e.prototype.writeSurfacePatches_=function(t,e,i){var n=Ki(t.namespaceURI,"PolygonPatch");t.appendChild(n),this.writeSurfaceOrPolygon_(n,e,i)},e.prototype.writeCurveSegments_=function(t,e,i){var n=Ki(t.namespaceURI,"LineStringSegment");t.appendChild(n),this.writeCurveOrLineString_(n,e,i)},e.prototype.writeGeometryElement=function(t,e,i){var n,r=i[i.length-1],o=na({},r);o.node=t,n=Array.isArray(e)?cr(e,r):ur(e,!0,r),fn(o,this.GEOMETRY_SERIALIZERS_,this.GEOMETRY_NODE_FACTORY_,[n],i,void 0,this)},e.prototype.writeFeatureElement=function(t,e,i){var n=e.getId();n&&t.setAttribute("fid",n);var r=i[i.length-1],o=r.featureNS,a=e.getGeometryName();r.serializers||(r.serializers={},r.serializers[o]={});var s=e.getProperties(),l=[],h=[];for(var u in s){var c=s[u];null!==c&&(l.push(u),h.push(c),u==a||"function"==typeof c.getSimplifiedGeometry?u in r.serializers[o]||(r.serializers[o][u]=an(this.writeGeometryElement,this)):u in r.serializers[o]||(r.serializers[o][u]=an(Lr)))}var p=na({},r);p.node=t,fn(p,r.serializers,ln(void 0,o),h,i,l)},e.prototype.writeFeatureMembers_=function(t,e,i){var n=i[i.length-1],r=n.featureType,o=n.featureNS,a={};a[o]={},a[o][r]=an(this.writeFeatureElement,this);var s=na({},n);s.node=t,fn(s,a,ln(r,o),e,i)},e.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(t,e,i){return Ki(this.namespace,iv[e[e.length-1].node.nodeName])},e.prototype.GEOMETRY_NODE_FACTORY_=function(t,e,i){var n,r=e[e.length-1],o=r.multiSurface,a=r.surface,s=r.curve,l=r.multiCurve;return Array.isArray(t)?n="Envelope":"MultiPolygon"===(n=t.getType())&&!0===o?n="MultiSurface":"Polygon"===n&&!0===a?n="Surface":"LineString"===n&&!0===s?n="Curve":"MultiLineString"===n&&!0===l&&(n="MultiCurve"),Ki(this.namespace,n)},e.prototype.writeGeometryNode=function(t,e){e=this.adaptOptions(e);var i=Ki(this.namespace,"geom"),n={node:i,hasZ:this.hasZ,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};return e&&na(n,e),this.writeGeometryElement(i,t,[n]),i},e.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var i=Ki(this.namespace,"featureMembers");i.setAttributeNS(Fu,"xsi:schemaLocation",this.schemaLocation);var n={srsName:this.srsName,hasZ:this.hasZ,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};return e&&na(n,e),this.writeFeatureMembers_(i,t,[n]),i},e}(tv);nv.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:nn(nv.prototype.readFlatPos_),posList:nn(nv.prototype.readFlatPosList_)}},nv.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:nv.prototype.interiorParser_,exterior:nv.prototype.exteriorParser_}},nv.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:nn(tv.prototype.readPoint),MultiPoint:nn(tv.prototype.readMultiPoint),LineString:nn(tv.prototype.readLineString),MultiLineString:nn(tv.prototype.readMultiLineString),LinearRing:nn(tv.prototype.readLinearRing),Polygon:nn(tv.prototype.readPolygon),MultiPolygon:nn(tv.prototype.readMultiPolygon),Surface:nn(nv.prototype.readSurface_),MultiSurface:nn(nv.prototype.readMultiSurface_),Curve:nn(nv.prototype.readCurve_),MultiCurve:nn(nv.prototype.readMultiCurve_),Envelope:nn(nv.prototype.readEnvelope_)}},nv.prototype.MULTICURVE_PARSERS_={"http://www.opengis.net/gml":{curveMember:en(nv.prototype.curveMemberParser_),curveMembers:en(nv.prototype.curveMemberParser_)}},nv.prototype.MULTISURFACE_PARSERS_={"http://www.opengis.net/gml":{surfaceMember:en(nv.prototype.surfaceMemberParser_),surfaceMembers:en(nv.prototype.surfaceMemberParser_)}},nv.prototype.CURVEMEMBER_PARSERS_={"http://www.opengis.net/gml":{LineString:en(tv.prototype.readLineString),Curve:en(nv.prototype.readCurve_)}},nv.prototype.SURFACEMEMBER_PARSERS_={"http://www.opengis.net/gml":{Polygon:en(tv.prototype.readPolygon),Surface:en(nv.prototype.readSurface_)}},nv.prototype.SURFACE_PARSERS_={"http://www.opengis.net/gml":{patches:nn(nv.prototype.readPatch_)}},nv.prototype.CURVE_PARSERS_={"http://www.opengis.net/gml":{segments:nn(nv.prototype.readSegment_)}},nv.prototype.ENVELOPE_PARSERS_={"http://www.opengis.net/gml":{lowerCorner:en(nv.prototype.readFlatPosList_),upperCorner:en(nv.prototype.readFlatPosList_)}},nv.prototype.PATCHES_PARSERS_={"http://www.opengis.net/gml":{PolygonPatch:nn(nv.prototype.readPolygonPatch_)}},nv.prototype.SEGMENTS_PARSERS_={"http://www.opengis.net/gml":{LineStringSegment:nn(nv.prototype.readLineStringSegment_)}},nv.prototype.RING_SERIALIZERS_={"http://www.opengis.net/gml":{exterior:an(nv.prototype.writeRing_),interior:an(nv.prototype.writeRing_)}},nv.prototype.ENVELOPE_SERIALIZERS_={"http://www.opengis.net/gml":{lowerCorner:an(Lr),upperCorner:an(Lr)}},nv.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{surfaceMember:an(nv.prototype.writeSurfaceOrPolygonMember_),polygonMember:an(nv.prototype.writeSurfaceOrPolygonMember_)}},nv.prototype.POINTMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{pointMember:an(nv.prototype.writePointMember_)}},nv.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{lineStringMember:an(nv.prototype.writeLineStringOrCurveMember_),curveMember:an(nv.prototype.writeLineStringOrCurveMember_)}},nv.prototype.GEOMETRY_SERIALIZERS_={"http://www.opengis.net/gml":{Curve:an(nv.prototype.writeCurveOrLineString_),MultiCurve:an(nv.prototype.writeMultiCurveOrLineString_),Point:an(nv.prototype.writePoint_),MultiPoint:an(nv.prototype.writeMultiPoint_),LineString:an(nv.prototype.writeCurveOrLineString_),MultiLineString:an(nv.prototype.writeMultiCurveOrLineString_),LinearRing:an(nv.prototype.writeLinearRing_),Polygon:an(nv.prototype.writeSurfaceOrPolygon_),MultiPolygon:an(nv.prototype.writeMultiSurfaceOrPolygon_),Surface:an(nv.prototype.writeSurfaceOrPolygon_),MultiSurface:an(nv.prototype.writeMultiSurfaceOrPolygon_),Envelope:an(nv.prototype.writeEnvelope)}};var rv=nv,ov=rv,av=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),sv={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},lv=function(t){function e(e){var i=this,n=e||{};return(i=t.call(this,n)||this).FEATURE_COLLECTION_PARSERS[Jg].featureMember=en(i.readFeaturesInternal),i.schemaLocation=n.schemaLocation?n.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/2.1.2/feature.xsd",i}return av(e,t),e.prototype.readFlatCoordinates_=function(t,e){var i=Ji(t,!1).replace(/^\s*|\s*$/g,""),n=e[0].srsName,r="enu";if(n){var o=bt(n);o&&(r=o.getAxisOrientation())}for(var a=i.trim().split(/\s+/),s=[],l=0,h=a.length;l<h;l++){var u=a[l].split(/,+/),c=parseFloat(u[0]),p=parseFloat(u[1]),d=3===u.length?parseFloat(u[2]):0;"en"===r.substr(0,2)?s.push(c,p,d):s.push(p,c,d)}return s},e.prototype.readBox_=function(t,e){var i=pn([null],this.BOX_PARSERS_,t,e,this);return R(i[1][0],i[1][1],i[1][3],i[1][4])},e.prototype.innerBoundaryIsParser_=function(t,e){var i=pn(void 0,this.RING_PARSERS,t,e,this);i&&e[e.length-1].push(i)},e.prototype.outerBoundaryIsParser_=function(t,e){var i=pn(void 0,this.RING_PARSERS,t,e,this);i&&(e[e.length-1][0]=i)},e.prototype.GEOMETRY_NODE_FACTORY_=function(t,e,i){var n,r=e[e.length-1],o=r.multiSurface,a=r.surface,s=r.multiCurve;return Array.isArray(t)?n="Envelope":"MultiPolygon"===(n=t.getType())&&!0===o?n="MultiSurface":"Polygon"===n&&!0===a?n="Surface":"MultiLineString"===n&&!0===s&&(n="MultiCurve"),Ki("http://www.opengis.net/gml",n)},e.prototype.writeFeatureElement=function(t,e,i){var n=e.getId();n&&t.setAttribute("fid",n);var r=i[i.length-1],o=r.featureNS,a=e.getGeometryName();r.serializers||(r.serializers={},r.serializers[o]={});var s=e.getProperties(),l=[],h=[];for(var u in s){var c=s[u];null!==c&&(l.push(u),h.push(c),u==a||"function"==typeof c.getSimplifiedGeometry?u in r.serializers[o]||(r.serializers[o][u]=an(this.writeGeometryElement,this)):u in r.serializers[o]||(r.serializers[o][u]=an(Lr)))}var p=na({},r);p.node=t,fn(p,r.serializers,ln(void 0,o),h,i,l)},e.prototype.writeCurveOrLineString_=function(t,e,i){var n=i[i.length-1].srsName;if("LineStringSegment"!==t.nodeName&&n&&t.setAttribute("srsName",n),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var r=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(r),this.writeCoordinates_(r,e,i)}else if("Curve"===t.nodeName){var o=Ki(t.namespaceURI,"segments");t.appendChild(o),this.writeCurveSegments_(o,e,i)}},e.prototype.writeLineStringOrCurveMember_=function(t,e,i){var n=this.GEOMETRY_NODE_FACTORY_(e,i);n&&(t.appendChild(n),this.writeCurveOrLineString_(n,e,i))},e.prototype.writeMultiCurveOrLineString_=function(t,e,i){var n=i[i.length-1],r=n.hasZ,o=n.srsName,a=n.curve;o&&t.setAttribute("srsName",o);var s=e.getLineStrings();fn({node:t,hasZ:r,srsName:o,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,i,void 0,this)},e.prototype.writeGeometryElement=function(t,e,i){var n,r=i[i.length-1],o=na({},r);o.node=t,n=Array.isArray(e)?cr(e,r):ur(e,!0,r),fn(o,this.GEOMETRY_SERIALIZERS_,this.GEOMETRY_NODE_FACTORY_,[n],i,void 0,this)},e.prototype.createCoordinatesNode_=function(t){var e=Ki(t,"coordinates");return e.setAttribute("decimal","."),e.setAttribute("cs",","),e.setAttribute("ts"," "),e},e.prototype.writeCoordinates_=function(t,e,i){for(var n=i[i.length-1],r=n.hasZ,o=n.srsName,a=e.getCoordinates(),s=a.length,l=new Array(s),h=0;h<s;++h)l[h]=this.getCoords_(a[h],o,r);Lr(t,l.join(" "))},e.prototype.writeCurveSegments_=function(t,e,i){var n=Ki(t.namespaceURI,"LineStringSegment");t.appendChild(n),this.writeCurveOrLineString_(n,e,i)},e.prototype.writeSurfaceOrPolygon_=function(t,e,i){var n=i[i.length-1],r=n.hasZ,o=n.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var a=e.getLinearRings();fn({node:t,hasZ:r,srsName:o},this.RING_SERIALIZERS_,this.RING_NODE_FACTORY_,a,i,void 0,this)}else if("Surface"===t.nodeName){var s=Ki(t.namespaceURI,"patches");t.appendChild(s),this.writeSurfacePatches_(s,e,i)}},e.prototype.RING_NODE_FACTORY_=function(t,e,i){var n=e[e.length-1],r=n.node,o=n.exteriorWritten;return void 0===o&&(n.exteriorWritten=!0),Ki(r.namespaceURI,void 0!==o?"innerBoundaryIs":"outerBoundaryIs")},e.prototype.writeSurfacePatches_=function(t,e,i){var n=Ki(t.namespaceURI,"PolygonPatch");t.appendChild(n),this.writeSurfaceOrPolygon_(n,e,i)},e.prototype.writeRing_=function(t,e,i){var n=Ki(t.namespaceURI,"LinearRing");t.appendChild(n),this.writeLinearRing_(n,e,i)},e.prototype.getCoords_=function(t,e,i){var n="enu";e&&(n=bt(e).getAxisOrientation());var r="en"===n.substr(0,2)?t[0]+","+t[1]:t[1]+","+t[0];return i&&(r+=","+(t[2]||0)),r},e.prototype.writePoint_=function(t,e,i){var n=i[i.length-1],r=n.hasZ,o=n.srsName;o&&t.setAttribute("srsName",o);var a=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(a);var s=e.getCoordinates();Lr(a,this.getCoords_(s,o,r))},e.prototype.writeMultiPoint_=function(t,e,i){var n=i[i.length-1],r=n.hasZ,o=n.srsName;o&&t.setAttribute("srsName",o);var a=e.getPoints();fn({node:t,hasZ:r,srsName:o},this.POINTMEMBER_SERIALIZERS_,ln("pointMember"),a,i,void 0,this)},e.prototype.writePointMember_=function(t,e,i){var n=Ki(t.namespaceURI,"Point");t.appendChild(n),this.writePoint_(n,e,i)},e.prototype.writeLinearRing_=function(t,e,i){var n=i[i.length-1].srsName;n&&t.setAttribute("srsName",n);var r=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(r),this.writeCoordinates_(r,e,i)},e.prototype.writeMultiSurfaceOrPolygon_=function(t,e,i){var n=i[i.length-1],r=n.hasZ,o=n.srsName,a=n.surface;o&&t.setAttribute("srsName",o);var s=e.getPolygons();fn({node:t,hasZ:r,srsName:o,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,i,void 0,this)},e.prototype.writeSurfaceOrPolygonMember_=function(t,e,i){var n=this.GEOMETRY_NODE_FACTORY_(e,i);n&&(t.appendChild(n),this.writeSurfaceOrPolygon_(n,e,i))},e.prototype.writeEnvelope=function(t,e,i){var n=i[i.length-1].srsName;n&&t.setAttribute("srsName",n),fn({node:t},this.ENVELOPE_SERIALIZERS_,ku,[e[0]+" "+e[1],e[2]+" "+e[3]],i,["lowerCorner","upperCorner"],this)},e.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(t,e,i){return Ki("http://www.opengis.net/gml",sv[e[e.length-1].node.nodeName])},e}(tv);lv.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:nn(lv.prototype.readFlatCoordinates_)}},lv.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:lv.prototype.innerBoundaryIsParser_,outerBoundaryIs:lv.prototype.outerBoundaryIsParser_}},lv.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:en(lv.prototype.readFlatCoordinates_)}},lv.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:nn(tv.prototype.readPoint),MultiPoint:nn(tv.prototype.readMultiPoint),LineString:nn(tv.prototype.readLineString),MultiLineString:nn(tv.prototype.readMultiLineString),LinearRing:nn(tv.prototype.readLinearRing),Polygon:nn(tv.prototype.readPolygon),MultiPolygon:nn(tv.prototype.readMultiPolygon),Box:nn(lv.prototype.readBox_)}},lv.prototype.GEOMETRY_SERIALIZERS_={"http://www.opengis.net/gml":{Curve:an(lv.prototype.writeCurveOrLineString_),MultiCurve:an(lv.prototype.writeMultiCurveOrLineString_),Point:an(lv.prototype.writePoint_),MultiPoint:an(lv.prototype.writeMultiPoint_),LineString:an(lv.prototype.writeCurveOrLineString_),MultiLineString:an(lv.prototype.writeMultiCurveOrLineString_),LinearRing:an(lv.prototype.writeLinearRing_),Polygon:an(lv.prototype.writeSurfaceOrPolygon_),MultiPolygon:an(lv.prototype.writeMultiSurfaceOrPolygon_),Surface:an(lv.prototype.writeSurfaceOrPolygon_),MultiSurface:an(lv.prototype.writeMultiSurfaceOrPolygon_),Envelope:an(lv.prototype.writeEnvelope)}},lv.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{lineStringMember:an(lv.prototype.writeLineStringOrCurveMember_),curveMember:an(lv.prototype.writeLineStringOrCurveMember_)}},lv.prototype.RING_SERIALIZERS_={"http://www.opengis.net/gml":{outerBoundaryIs:an(lv.prototype.writeRing_),innerBoundaryIs:an(lv.prototype.writeRing_)}},lv.prototype.POINTMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{pointMember:an(lv.prototype.writePointMember_)}},lv.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{surfaceMember:an(lv.prototype.writeSurfaceOrPolygonMember_),polygonMember:an(lv.prototype.writeSurfaceOrPolygonMember_)}},lv.prototype.ENVELOPE_SERIALIZERS_={"http://www.opengis.net/gml":{lowerCorner:an(Lr),upperCorner:an(Lr)}};var hv=lv,uv=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),cv=function(t){function e(e){var i=this,n=e||{};return(i=t.call(this,n)||this).schemaLocation=n.schemaLocation?n.schemaLocation:i.namespace+" http://schemas.opengis.net/gml/3.2.1/gml.xsd",i}return uv(e,t),e}(rv);cv.prototype.namespace="http://www.opengis.net/gml/3.2",cv.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml/3.2":{pos:nn(rv.prototype.readFlatPos_),posList:nn(rv.prototype.readFlatPosList_)}},cv.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml/3.2":{interior:rv.prototype.interiorParser_,exterior:rv.prototype.exteriorParser_}},cv.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml/3.2":{Point:nn(tv.prototype.readPoint),MultiPoint:nn(tv.prototype.readMultiPoint),LineString:nn(tv.prototype.readLineString),MultiLineString:nn(tv.prototype.readMultiLineString),LinearRing:nn(tv.prototype.readLinearRing),Polygon:nn(tv.prototype.readPolygon),MultiPolygon:nn(tv.prototype.readMultiPolygon),Surface:nn(cv.prototype.readSurface_),MultiSurface:nn(rv.prototype.readMultiSurface_),Curve:nn(cv.prototype.readCurve_),MultiCurve:nn(rv.prototype.readMultiCurve_),Envelope:nn(cv.prototype.readEnvelope_)}},cv.prototype.MULTICURVE_PARSERS_={"http://www.opengis.net/gml/3.2":{curveMember:en(rv.prototype.curveMemberParser_),curveMembers:en(rv.prototype.curveMemberParser_)}},cv.prototype.MULTISURFACE_PARSERS_={"http://www.opengis.net/gml/3.2":{surfaceMember:en(rv.prototype.surfaceMemberParser_),surfaceMembers:en(rv.prototype.surfaceMemberParser_)}},cv.prototype.CURVEMEMBER_PARSERS_={"http://www.opengis.net/gml/3.2":{LineString:en(tv.prototype.readLineString),Curve:en(rv.prototype.readCurve_)}},cv.prototype.SURFACEMEMBER_PARSERS_={"http://www.opengis.net/gml/3.2":{Polygon:en(tv.prototype.readPolygon),Surface:en(rv.prototype.readSurface_)}},cv.prototype.SURFACE_PARSERS_={"http://www.opengis.net/gml/3.2":{patches:nn(rv.prototype.readPatch_)}},cv.prototype.CURVE_PARSERS_={"http://www.opengis.net/gml/3.2":{segments:nn(rv.prototype.readSegment_)}},cv.prototype.ENVELOPE_PARSERS_={"http://www.opengis.net/gml/3.2":{lowerCorner:en(rv.prototype.readFlatPosList_),upperCorner:en(rv.prototype.readFlatPosList_)}},cv.prototype.PATCHES_PARSERS_={"http://www.opengis.net/gml/3.2":{PolygonPatch:nn(rv.prototype.readPolygonPatch_)}},cv.prototype.SEGMENTS_PARSERS_={"http://www.opengis.net/gml/3.2":{LineStringSegment:nn(rv.prototype.readLineStringSegment_)}},cv.prototype.MULTIPOINT_PARSERS_={"http://www.opengis.net/gml/3.2":{pointMember:en(tv.prototype.pointMemberParser_),pointMembers:en(tv.prototype.pointMemberParser_)}},cv.prototype.MULTILINESTRING_PARSERS_={"http://www.opengis.net/gml/3.2":{lineStringMember:en(tv.prototype.lineStringMemberParser_),lineStringMembers:en(tv.prototype.lineStringMemberParser_)}},cv.prototype.MULTIPOLYGON_PARSERS_={"http://www.opengis.net/gml/3.2":{polygonMember:en(tv.prototype.polygonMemberParser_),polygonMembers:en(tv.prototype.polygonMemberParser_)}},cv.prototype.POINTMEMBER_PARSERS_={"http://www.opengis.net/gml/3.2":{Point:en(tv.prototype.readFlatCoordinatesFromNode_)}},cv.prototype.LINESTRINGMEMBER_PARSERS_={"http://www.opengis.net/gml/3.2":{LineString:en(tv.prototype.readLineString)}},cv.prototype.POLYGONMEMBER_PARSERS_={"http://www.opengis.net/gml/3.2":{Polygon:en(tv.prototype.readPolygon)}},cv.prototype.RING_PARSERS={"http://www.opengis.net/gml/3.2":{LinearRing:nn(tv.prototype.readFlatLinearRing_)}},cv.prototype.RING_SERIALIZERS_={"http://www.opengis.net/gml/3.2":{exterior:an(rv.prototype.writeRing_),interior:an(rv.prototype.writeRing_)}},cv.prototype.ENVELOPE_SERIALIZERS_={"http://www.opengis.net/gml/3.2":{lowerCorner:an(Lr),upperCorner:an(Lr)}},cv.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS_={"http://www.opengis.net/gml/3.2":{surfaceMember:an(rv.prototype.writeSurfaceOrPolygonMember_),polygonMember:an(rv.prototype.writeSurfaceOrPolygonMember_)}},cv.prototype.POINTMEMBER_SERIALIZERS_={"http://www.opengis.net/gml/3.2":{pointMember:an(rv.prototype.writePointMember_)}},cv.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS_={"http://www.opengis.net/gml/3.2":{lineStringMember:an(rv.prototype.writeLineStringOrCurveMember_),curveMember:an(rv.prototype.writeLineStringOrCurveMember_)}},cv.prototype.GEOMETRY_SERIALIZERS_={"http://www.opengis.net/gml/3.2":{Curve:an(rv.prototype.writeCurveOrLineString_),MultiCurve:an(rv.prototype.writeMultiCurveOrLineString_),Point:an(cv.prototype.writePoint_),MultiPoint:an(rv.prototype.writeMultiPoint_),LineString:an(rv.prototype.writeCurveOrLineString_),MultiLineString:an(rv.prototype.writeMultiCurveOrLineString_),LinearRing:an(rv.prototype.writeLinearRing_),Polygon:an(rv.prototype.writeSurfaceOrPolygon_),MultiPolygon:an(rv.prototype.writeMultiSurfaceOrPolygon_),Surface:an(rv.prototype.writeSurfaceOrPolygon_),MultiSurface:an(rv.prototype.writeMultiSurfaceOrPolygon_),Envelope:an(rv.prototype.writeEnvelope)}};var pv,dv,fv,gv,vv,yv,mv,_v,xv,bv,wv=cv,Sv=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Cv=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],Ev={rte:Fr,trk:kr,wpt:Nr},Tv=un(Cv,{rte:en(Fr),trk:en(kr),wpt:en(Nr)}),Pv=un(Cv,{text:on(Cr,"linkText"),type:on(Cr,"linkType")}),Lv=un(Cv,{rte:an(function(t,e,i){var n=i[0],r=e.getProperties(),o={node:t};o.properties=r;var a=e.getGeometry();if(a.getType()==Xa.LINE_STRING){var s=ur(a,!0,n);o.geometryLayout=s.getLayout(),r.rtept=s.getCoordinates()}var l=jv[i[i.length-1].node.namespaceURI],h=hn(r,l);fn(o,Gv,ku,h,i,l)}),trk:an(function(t,e,i){var n=i[0],r=e.getProperties(),o={node:t};o.properties=r;var a=e.getGeometry();if(a.getType()==Xa.MULTI_LINE_STRING){var s=ur(a,!0,n);r.trkseg=s.getLineStrings()}var l=Bv[i[i.length-1].node.namespaceURI],h=hn(r,l);fn(o,Yv,ku,h,i,l)}),wpt:an(function(t,e,i){var n=i[0],r=i[i.length-1];r.properties=e.getProperties();var o=e.getGeometry();if(o.getType()==Xa.POINT){var a=ur(o,!0,n);r.geometryLayout=a.getLayout(),jr(t,a.getCoordinates(),i)}})}),Iv=function(t){function e(e){var i=t.call(this)||this,n=e||{};return i.dataProjection=bt("EPSG:4326"),i.readExtensions_=n.readExtensions,i}return Sv(e,t),e.prototype.handleReadExtensions_=function(t){t||(t=[]);for(var e=0,i=t.length;e<i;++e){var n=t[e];if(this.readExtensions_){var r=n.get("extensionsNode_")||null;this.readExtensions_(n,r)}n.set("extensionsNode_",void 0)}},e.prototype.readFeatureFromNode=function(t,e){if(!c(Cv,t.namespaceURI))return null;var i=Ev[t.localName];if(!i)return null;var n=i(t,[this.getReadOptions(t,e)]);return n?(this.handleReadExtensions_([n]),n):null},e.prototype.readFeaturesFromNode=function(t,e){if(!c(Cv,t.namespaceURI))return[];if("gpx"==t.localName){var i=pn([],Tv,t,[this.getReadOptions(t,e)]);return i?(this.handleReadExtensions_(i),i):[]}return[]},e.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var i=Ki("http://www.topografix.com/GPX/1/1","gpx");return i.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",Fu),i.setAttributeNS(Fu,"xsi:schemaLocation","http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"),i.setAttribute("version","1.1"),i.setAttribute("creator","OpenLayers"),fn({node:i},Lv,Ir,t,[e]),i},e}(Zg),Ov=un(Cv,{name:on(Cr),cmt:on(Cr),desc:on(Cr),src:on(Cr),link:Rr,number:on(wr),extensions:Mr,type:on(Cr),rtept:function(t,e){var i=pn({},Av,t,e);if(i){var n=e[e.length-1];Or(n.flatCoordinates,n.layoutOptions,t,i)}}}),Av=un(Cv,{ele:on(xr),time:on(_r)}),Rv=un(Cv,{name:on(Cr),cmt:on(Cr),desc:on(Cr),src:on(Cr),link:Rr,number:on(wr),type:on(Cr),extensions:Mr,trkseg:function(t,e){var i=e[e.length-1];cn(Mv,t,e),i.ends.push(i.flatCoordinates.length)}}),Mv=un(Cv,{trkpt:function(t,e){var i=pn({},Fv,t,e);if(i){var n=e[e.length-1];Or(n.flatCoordinates,n.layoutOptions,t,i)}}}),Fv=un(Cv,{ele:on(xr),time:on(_r)}),kv=un(Cv,{ele:on(xr),time:on(_r),magvar:on(xr),geoidheight:on(xr),name:on(Cr),cmt:on(Cr),desc:on(Cr),src:on(Cr),link:Rr,sym:on(Cr),type:on(Cr),fix:on(Cr),sat:on(wr),hdop:on(xr),vdop:on(xr),pdop:on(xr),ageofdgpsdata:on(xr),dgpsid:on(wr),extensions:Mr}),Nv=["text","type"],Dv=un(Cv,{text:an(Lr),type:an(Lr)}),jv=un(Cv,["name","cmt","desc","src","link","number","type","rtept"]),Gv=un(Cv,{name:an(Lr),cmt:an(Lr),desc:an(Lr),src:an(Lr),link:an(Dr),number:an(Pr),type:an(Lr),rtept:sn(an(jr))}),zv=un(Cv,["ele","time"]),Bv=un(Cv,["name","cmt","desc","src","link","number","type","trkseg"]),Yv=un(Cv,{name:an(Lr),cmt:an(Lr),desc:an(Lr),src:an(Lr),link:an(Dr),number:an(Pr),type:an(Lr),trkseg:sn(an(function(t,e,i){var n={node:t};n.geometryLayout=e.getLayout(),n.properties={},fn(n,Wv,Xv,e.getCoordinates(),i)}))}),Xv=ln("trkpt"),Wv=un(Cv,{trkpt:an(jr)}),Uv=un(Cv,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),Vv=un(Cv,{ele:an(Tr),time:an(function(t,e){var i=new Date(1e3*e),n=i.getUTCFullYear()+"-"+Me(i.getUTCMonth()+1,2)+"-"+Me(i.getUTCDate(),2)+"T"+Me(i.getUTCHours(),2)+":"+Me(i.getUTCMinutes(),2)+":"+Me(i.getUTCSeconds(),2)+"Z";t.appendChild(gn().createTextNode(n))}),magvar:an(Tr),geoidheight:an(Tr),name:an(Lr),cmt:an(Lr),desc:an(Lr),src:an(Lr),link:an(Dr),sym:an(Lr),type:an(Lr),fix:an(Lr),sat:an(Pr),hdop:an(Tr),vdop:an(Tr),pdop:an(Tr),ageofdgpsdata:an(Tr),dgpsid:an(Pr)}),Hv={Point:"wpt",LineString:"rte",MultiLineString:"trk"},qv=Iv,Zv=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Kv=function(t){function e(e){var i=this,n=e||{};return(i=t.call(this)||this).dataProjection=bt(n.dataProjection?n.dataProjection:"EPSG:4326"),n.featureProjection&&(i.defaultFeatureProjection=bt(n.featureProjection)),i.geometryName_=n.geometryName,i.extractGeometryName_=n.extractGeometryName,i}return Zv(e,t),e.prototype.readFeatureFromObject=function(t,e){var i=null,n=Gr((i="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null}).geometry,e),r=new La;return this.geometryName_?r.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&r.setGeometryName(i.geometry_name),r.setGeometry(n),"id"in i&&r.setId(i.id),i.properties&&r.setProperties(i.properties,!0),r},e.prototype.readFeaturesFromObject=function(t,e){var i=null;if("FeatureCollection"===t.type){i=[];for(var n=t.features,r=0,o=n.length;r<o;++r)i.push(this.readFeatureFromObject(n[r],e))}else i=[this.readFeatureFromObject(t,e)];return i},e.prototype.readGeometryFromObject=function(t,e){return Gr(t,e)},e.prototype.readProjectionFromObject=function(t){var e,i=t.crs;return i?"name"==i.type?e=bt(i.properties.name):"EPSG"===i.type?e=bt("EPSG:"+i.properties.code):S(!1,36):e=this.dataProjection,e},e.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var i={type:"Feature",geometry:null,properties:null},n=t.getId();void 0!==n&&(i.id=n);var r=t.getGeometry();r&&(i.geometry=zr(r,e));var o=t.getProperties();return delete o[t.getGeometryName()],a(o)||(i.properties=o),i},e.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);for(var i=[],n=0,r=t.length;n<r;++n)i.push(this.writeFeatureObject(t[n],e));return{type:"FeatureCollection",features:i}},e.prototype.writeGeometryObject=function(t,e){return zr(t,this.adaptOptions(e))},e}(Xg),Jv=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),$v=function(t){function e(){return t.call(this)||this}return Jv(e,t),e.prototype.getType=function(){return Tu},e.prototype.readFeature=function(t,e){return this.readFeatureFromText(Br(t),this.adaptOptions(e))},e.prototype.readFeatureFromText=function(t,e){return n()},e.prototype.readFeatures=function(t,e){return this.readFeaturesFromText(Br(t),this.adaptOptions(e))},e.prototype.readFeaturesFromText=function(t,e){return n()},e.prototype.readGeometry=function(t,e){return this.readGeometryFromText(Br(t),this.adaptOptions(e))},e.prototype.readGeometryFromText=function(t,e){return n()},e.prototype.readProjection=function(t){return this.readProjectionFromText(Br(t))},e.prototype.readProjectionFromText=function(t){return this.dataProjection},e.prototype.writeFeature=function(t,e){return this.writeFeatureText(t,this.adaptOptions(e))},e.prototype.writeFeatureText=function(t,e){return n()},e.prototype.writeFeatures=function(t,e){return this.writeFeaturesText(t,this.adaptOptions(e))},e.prototype.writeFeaturesText=function(t,e){return n()},e.prototype.writeGeometry=function(t,e){return this.writeGeometryText(t,this.adaptOptions(e))},e.prototype.writeGeometryText=function(t,e){return n()},e}(Bg),Qv=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ty="none",ey=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,iy=/^H.([A-Z]{3}).*?:(.*)/,ny=/^HFDTE(\d{2})(\d{2})(\d{2})/,ry=/\r\n|\r|\n/,oy=function(t){function e(e){var i=t.call(this)||this,n=e||{};return i.dataProjection=bt("EPSG:4326"),i.altitudeMode_=n.altitudeMode?n.altitudeMode:ty,i}return Qv(e,t),e.prototype.readFeatureFromText=function(t,e){var i,n,r=this.altitudeMode_,o=t.split(ry),a={},s=[],l=2e3,h=0,u=1,c=-1;for(i=0,n=o.length;i<n;++i){var p=o[i],d=void 0;if("B"==p.charAt(0)){if(d=ey.exec(p)){var f=parseInt(d[1],10),g=parseInt(d[2],10),v=parseInt(d[3],10),y=parseInt(d[4],10)+parseInt(d[5],10)/6e4;"S"==d[6]&&(y=-y);var m=parseInt(d[7],10)+parseInt(d[8],10)/6e4;if("W"==d[9]&&(m=-m),s.push(m,y),r!=ty){var _=void 0;_="gps"==r?parseInt(d[11],10):"barometric"==r?parseInt(d[12],10):0,s.push(_)}var x=Date.UTC(l,h,u,f,g,v);x<c&&(x=Date.UTC(l,h,u+1,f,g,v)),s.push(x/1e3),c=x}}else"H"==p.charAt(0)&&((d=ny.exec(p))?(u=parseInt(d[1],10),h=parseInt(d[2],10)-1,l=2e3+parseInt(d[3],10)):(d=iy.exec(p))&&(a[d[1]]=d[2].trim()))}if(0===s.length)return null;var b=new zf(s,r==ty?Ba:Ya),w=new La(ur(b,!1,e));return w.setProperties(a,!0),w},e.prototype.readFeaturesFromText=function(t,e){var i=this.readFeatureFromText(t,e);return i?[i]:[]},e}($v),ay=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),sy=["http://www.google.com/kml/ext/2.2"],ly=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],hy={fraction:rc,pixels:oc,insetPixels:oc},uy=un(ly,{ExtendedData:no,Region:ro,MultiGeometry:on($r,"geometry"),LineString:on(Kr,"geometry"),LinearRing:on(Jr,"geometry"),Point:on(Qr,"geometry"),Polygon:on(to,"geometry"),Style:on(eo),StyleMap:function(t,e){var i=Vr.call(this,t,e);if(i){var n=e[e.length-1];Array.isArray(i)?n.Style=i:"string"==typeof i?n.styleUrl=i:S(!1,38)}},address:on(Cr),description:on(Cr),name:on(Cr),open:on(yr),phoneNumber:on(Cr),styleUrl:on(Wr),visibility:on(yr)},un(sy,{MultiTrack:on(function(t,e){var i=pn([],Iy,t,e);if(i)return new sg(i)},"geometry"),Track:on(qr,"geometry")})),cy=un(ly,{ExtendedData:no,Region:ro,Link:function(t,e){cn(py,t,e)},address:on(Cr),description:on(Cr),name:on(Cr),open:on(yr),phoneNumber:on(Cr),visibility:on(yr)}),py=un(ly,{href:on(Wr)}),dy=un(ly,{LatLonAltBox:function(t,e){var i=pn({},By,t,e);if(i){var n=e[e.length-1],r=[parseFloat(i.west),parseFloat(i.south),parseFloat(i.east),parseFloat(i.north)];n.extent=r,n.altitudeMode=i.altitudeMode,n.minAltitude=parseFloat(i.minAltitude),n.maxAltitude=parseFloat(i.maxAltitude)}},Lod:function(t,e){var i=pn({},Yy,t,e);if(i){var n=e[e.length-1];n.minLodPixels=parseFloat(i.minLodPixels),n.maxLodPixels=parseFloat(i.maxLodPixels),n.minFadeExtent=parseFloat(i.minFadeExtent),n.maxFadeExtent=parseFloat(i.maxFadeExtent)}}}),fy=un(ly,["Document","Placemark"]),gy=un(ly,{Document:an(function(t,e,i){fn({node:t},Vy,Hy,e,i,void 0,this)}),Placemark:an(lo)}),vy=null,yy=null,my=null,_y=null,xy=null,by=null,wy=function(t){function e(e){var i=t.call(this)||this,n=e||{};return by||(vy=new nc({color:pv=[255,255,255,1]}),yy=new vc({anchor:dv=[20,2],anchorOrigin:pc,anchorXUnits:fv=oc,anchorYUnits:gv=oc,crossOrigin:"anonymous",rotation:0,scale:mv=.5,size:vv=[64,64],src:yv="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png"}),_v="NO_IMAGE",my=new yc({color:pv,width:1}),xv=new yc({color:[51,51,51,1],width:2}),_y=new wc({font:"bold 16px Helvetica",fill:vy,stroke:xv,scale:.8}),xy=new xc({fill:vy,image:yy,text:_y,stroke:my,zIndex:0}),by=[xy]),i.dataProjection=bt("EPSG:4326"),i.defaultStyle_=n.defaultStyle?n.defaultStyle:by,i.extractStyles_=void 0===n.extractStyles||n.extractStyles,i.writeStyles_=void 0===n.writeStyles||n.writeStyles,i.sharedStyles_={},i.showPointNames_=void 0===n.showPointNames||n.showPointNames,i.crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:"anonymous",i}return ay(e,t),e.prototype.readDocumentOrFolder_=function(t,e){return pn([],un(ly,{Document:tn(this.readDocumentOrFolder_,this),Folder:tn(this.readDocumentOrFolder_,this),Placemark:en(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),t,e,this)||void 0},e.prototype.readPlacemark_=function(t,e){var i=pn({geometry:null},uy,t,e,this);if(i){var n=new La,r=t.getAttribute("id");null!==r&&n.setId(r);var o=i.geometry;if(o&&ur(o,!1,e[0]),n.setGeometry(o),delete i.geometry,this.extractStyles_){var a=function(t,e,i,n,r){return function(o,a){var s=r,l="",h=[];if(s){var u=o.getGeometry();if(u){var c=u.getType();s=c===Xa.GEOMETRY_COLLECTION?(h=u.getGeometriesArrayRecursive().filter(function(t){var e=t.getType();return e===Xa.POINT||e===Xa.MULTI_POINT})).length>0:c===Xa.POINT||c===Xa.MULTI_POINT}}s&&(l=o.get("name"),(s=s&&!!l)&&l.search(/&[^&]+;/)>-1&&(bv||(bv=document.createElement("textarea")),bv.innerHTML=l,l=bv.value));var p=i;if(t?p=t:e&&(p=function t(e,i,n){return Array.isArray(e)?e:"string"==typeof e?(!(e in n)&&"#"+e in n&&(e="#"+e),t(n[e],i,n)):i}(e,i,n)),s){var d=function(t,e){var i=[0,0],n="start",r=t.getImage();if(r){var o=r.getImageSize();if(null===o&&(o=vv),2==o.length){var a=r.getScale();i[0]=a*o[0]/2,i[1]=-a*o[1]/2,n="left"}}var s=t.getText();return s?((s=s.clone()).setFont(s.getFont()||_y.getFont()),s.setScale(s.getScale()||_y.getScale()),s.setFill(s.getFill()||_y.getFill()),s.setStroke(s.getStroke()||xv)):s=_y.clone(),s.setText(e),s.setOffsetX(i[0]),s.setOffsetY(i[1]),s.setTextAlign(n),new xc({image:r,text:s})}(p[0],l);return h.length>0?(d.setGeometry(new zg(h)),[d,new xc({geometry:p[0].getGeometry(),image:null,fill:p[0].getFill(),stroke:p[0].getStroke(),text:null})].concat(p.slice(1))):d}return p}}(i.Style,i.styleUrl,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);n.setStyle(a)}return delete i.Style,n.setProperties(i,!0),n}},e.prototype.readSharedStyle_=function(t,e){var i=t.getAttribute("id");if(null!==i){var n=eo.call(this,t,e);if(n){var r=void 0,o=t.baseURI;o&&"about:blank"!=o||(o=window.location.href),r=o?new URL("#"+i,o).href:"#"+i,this.sharedStyles_[r]=n}}},e.prototype.readSharedStyleMap_=function(t,e){var i=t.getAttribute("id");if(null!==i){var n=Vr.call(this,t,e);if(n){var r,o=t.baseURI;o&&"about:blank"!=o||(o=window.location.href),r=o?new URL("#"+i,o).href:"#"+i,this.sharedStyles_[r]=n}}},e.prototype.readFeatureFromNode=function(t,e){return c(ly,t.namespaceURI)?this.readPlacemark_(t,[this.getReadOptions(t,e)])||null:null},e.prototype.readFeaturesFromNode=function(t,e){if(!c(ly,t.namespaceURI))return[];var i,n=t.localName;if("Document"==n||"Folder"==n)return(i=this.readDocumentOrFolder_(t,[this.getReadOptions(t,e)]))||[];if("Placemark"==n){var r=this.readPlacemark_(t,[this.getReadOptions(t,e)]);return r?[r]:[]}if("kml"==n){i=[];for(var o=t.firstElementChild;o;o=o.nextElementSibling){var a=this.readFeaturesFromNode(o,e);a&&f(i,a)}return i}return[]},e.prototype.readName=function(t){if(t){if("string"==typeof t){var e=Qi(t);return this.readNameFromDocument(e)}return $i(t)?this.readNameFromDocument(t):this.readNameFromNode(t)}},e.prototype.readNameFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE){var i=this.readNameFromNode(e);if(i)return i}},e.prototype.readNameFromNode=function(t){for(var e=t.firstElementChild;e;e=e.nextElementSibling)if(c(ly,e.namespaceURI)&&"name"==e.localName)return Cr(e);for(e=t.firstElementChild;e;e=e.nextElementSibling){var i=e.localName;if(c(ly,e.namespaceURI)&&("Document"==i||"Folder"==i||"Placemark"==i||"kml"==i)){var n=this.readNameFromNode(e);if(n)return n}}},e.prototype.readNetworkLinks=function(t){var e=[];if("string"==typeof t){var i=Qi(t);f(e,this.readNetworkLinksFromDocument(i))}else $i(t)?f(e,this.readNetworkLinksFromDocument(t)):f(e,this.readNetworkLinksFromNode(t));return e},e.prototype.readNetworkLinksFromDocument=function(t){for(var e=[],i=t.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&f(e,this.readNetworkLinksFromNode(i));return e},e.prototype.readNetworkLinksFromNode=function(t){for(var e=[],i=t.firstElementChild;i;i=i.nextElementSibling)if(c(ly,i.namespaceURI)&&"NetworkLink"==i.localName){var n=pn({},cy,i,[]);e.push(n)}for(i=t.firstElementChild;i;i=i.nextElementSibling){var r=i.localName;!c(ly,i.namespaceURI)||"Document"!=r&&"Folder"!=r&&"kml"!=r||f(e,this.readNetworkLinksFromNode(i))}return e},e.prototype.readRegion=function(t){var e=[];if("string"==typeof t){var i=Qi(t);f(e,this.readRegionFromDocument(i))}else $i(t)?f(e,this.readRegionFromDocument(t)):f(e,this.readRegionFromNode(t));return e},e.prototype.readRegionFromDocument=function(t){for(var e=[],i=t.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&f(e,this.readRegionFromNode(i));return e},e.prototype.readRegionFromNode=function(t){for(var e=[],i=t.firstElementChild;i;i=i.nextElementSibling)if(c(ly,i.namespaceURI)&&"Region"==i.localName){var n=pn({},dy,i,[]);e.push(n)}for(i=t.firstElementChild;i;i=i.nextElementSibling){var r=i.localName;!c(ly,i.namespaceURI)||"Document"!=r&&"Folder"!=r&&"kml"!=r||f(e,this.readRegionFromNode(i))}return e},e.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var i=Ki(ly[4],"kml"),n="http://www.w3.org/2000/xmlns/";i.setAttributeNS(n,"xmlns:gx",sy[0]),i.setAttributeNS(n,"xmlns:xsi",Fu),i.setAttributeNS(Fu,"xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");var r={node:i},o={};t.length>1?o.Document=t:1==t.length&&(o.Placemark=t[0]);var a=fy[i.namespaceURI],s=hn(o,a);return fn(r,gy,ku,s,[e],a,this),i},e}(Zg),Sy=un(ly,{Pair:function(t,e){var i=pn({},Gy,t,e,this);if(i){var n=i.key;if(n&&"normal"==n){var r=i.styleUrl;r&&(e[e.length-1]=r);var o=i.Style;o&&(e[e.length-1]=o)}}}}),Cy=un(ly,{Icon:on(function(t,e){return pn({},Ay,t,e)||null}),color:on(Yr),heading:on(xr),hotSpot:on(function(t){var e,i=t.getAttribute("xunits"),n=t.getAttribute("yunits");return e="insetPixels"!==i?"insetPixels"!==n?pc:fc:"insetPixels"!==n?dc:"top-right",{x:parseFloat(t.getAttribute("x")),xunits:hy[i],y:parseFloat(t.getAttribute("y")),yunits:hy[n],origin:e}}),scale:on(Ur)}),Ey=un(ly,{color:on(Yr),scale:on(Ur)}),Ty=un(ly,{color:on(Yr),width:on(xr)}),Py=un(ly,{color:on(Yr),fill:on(yr),outline:on(yr)}),Ly=un(ly,{coordinates:nn(Xr)}),Iy=un(sy,{Track:en(qr)}),Oy=un(ly,{when:function(t,e){var i=e[e.length-1].whens,n=Ji(t,!1),r=Date.parse(n);i.push(isNaN(r)?0:r)}},un(sy,{coord:function(t,e){var i=e[e.length-1].flatCoordinates,n=Ji(t,!1),r=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(n);if(r){var o=parseFloat(r[1]),a=parseFloat(r[2]),s=parseFloat(r[3]);i.push(o,a,s,0)}else i.push(0,0,0,0)}})),Ay=un(ly,{href:on(Wr)},un(sy,{x:on(xr),y:on(xr),w:on(xr),h:on(xr)})),Ry=un(ly,{coordinates:nn(Xr)}),My=un(ly,{extrude:on(yr),tessellate:on(yr),altitudeMode:on(Cr)}),Fy=un(ly,{LineString:en(Kr),LinearRing:en(Jr),MultiGeometry:en($r),Point:en(Qr),Polygon:en(to)}),ky=un(ly,{innerBoundaryIs:function(t,e){var i=pn(void 0,Xy,t,e);i&&e[e.length-1].push(i)},outerBoundaryIs:function(t,e){var i=pn(void 0,Wy,t,e);i&&(e[e.length-1][0]=i)}}),Ny=un(ly,{IconStyle:function(t,e){var i=pn({},Cy,t,e);if(i){var n,r,o,a,s=e[e.length-1],l="Icon"in i?i.Icon:{},h=!("Icon"in i)||Object.keys(l).length>0,u=l.href;u?n=u:h&&(n=yv);var c,p=pc,d=i.hotSpot;d?(r=[d.x,d.y],o=d.xunits,a=d.yunits,p=d.origin):n===yv?(r=dv,o=fv,a=gv):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(n)&&(r=[.5,0],o=rc,a=rc);var f,g=l.x,v=l.y;void 0!==g&&void 0!==v&&(c=[g,v]);var y,m=l.w,_=l.h;void 0!==m&&void 0!==_&&(f=[m,_]);var x=i.heading;void 0!==x&&(y=ht(x));var b=i.scale;if(h){n==yv&&(f=vv,void 0===b&&(b=mv));var w=new vc({anchor:r,anchorOrigin:p,anchorXUnits:o,anchorYUnits:a,crossOrigin:this.crossOrigin_,offset:c,offsetOrigin:pc,rotation:y,scale:b,size:f,src:n,color:i.color});s.imageStyle=w}else s.imageStyle=_v}},LabelStyle:function(t,e){var i=pn({},Ey,t,e);if(i){var n=e[e.length-1],r=new wc({fill:new nc({color:"color"in i?i.color:pv}),scale:i.scale});n.textStyle=r}},LineStyle:function(t,e){var i=pn({},Ty,t,e);if(i){var n=e[e.length-1],r=new yc({color:"color"in i?i.color:pv,width:"width"in i?i.width:1});n.strokeStyle=r}},PolyStyle:function(t,e){var i=pn({},Py,t,e);if(i){var n=e[e.length-1],r=new nc({color:"color"in i?i.color:pv});n.fillStyle=r;var o=i.fill;void 0!==o&&(n.fill=o);var a=i.outline;void 0!==a&&(n.outline=a)}}}),Dy=un(ly,{displayName:on(Cr),value:on(Cr)}),jy=un(ly,{Data:function(t,e){var i=t.getAttribute("name");cn(Dy,t,e);var n=e[e.length-1];i&&n.displayName?n[i]={value:n.value,displayName:n.displayName,toString:function(){return n.value}}:null!==i?n[i]=n.value:null!==n.displayName&&(n[n.displayName]=n.value),delete n.value},SchemaData:function(t,e){cn(zy,t,e)}}),Gy=un(ly,{Style:on(eo),key:on(Cr),styleUrl:on(Wr)}),zy=un(ly,{SimpleData:function(t,e){var i=t.getAttribute("name");if(null!==i){var n=Cr(t);e[e.length-1][i]=n}}}),By=un(ly,{altitudeMode:on(Cr),minAltitude:on(xr),maxAltitude:on(xr),north:on(xr),south:on(xr),east:on(xr),west:on(xr)}),Yy=un(ly,{minLodPixels:on(xr),maxLodPixels:on(xr),minFadeExtent:on(xr),maxFadeExtent:on(xr)}),Xy=un(ly,{LinearRing:nn(Hr)}),Wy=un(ly,{LinearRing:nn(Hr)}),Uy=un(ly,{Data:an(function(t,e,i){t.setAttribute("name",e.name);var n={node:t},r=e.value;"object"==typeof r?(null!==r&&r.displayName&&fn(n,Uy,ku,[r.displayName],i,["displayName"]),null!==r&&r.value&&fn(n,Uy,ku,[r.value],i,["value"])):fn(n,Uy,ku,[r],i,["value"])}),value:an(function(t,e){Lr(t,e)}),displayName:an(function(t,e){!function(e,i){t.appendChild(gn().createCDATASection(i))}(0,e)})}),Vy=un(ly,{Placemark:an(lo)}),Hy=function(t,e,i){return Ki(e[e.length-1].node.namespaceURI,"Placemark")},qy=ln("Data"),Zy=un(ly,["href"],un(sy,["x","y","w","h"])),Ky=un(ly,{href:an(Lr)},un(sy,{x:an(Tr),y:an(Tr),w:an(Tr),h:an(Tr)})),Jy=function(t,e,i){return Ki(sy[0],"gx:"+i)},$y=un(ly,["scale","heading","Icon","color","hotSpot"]),Qy=un(ly,{Icon:an(function(t,e,i){var n={node:t},r=Zy[i[i.length-1].node.namespaceURI],o=hn(e,r);fn(n,Ky,ku,o,i,r),o=hn(e,r=Zy[sy[0]]),fn(n,Ky,Jy,o,i,r)}),color:an(oo),heading:an(Tr),hotSpot:an(function(t,e){t.setAttribute("x",String(e.x)),t.setAttribute("y",String(e.y)),t.setAttribute("xunits",e.xunits),t.setAttribute("yunits",e.yunits)}),scale:an(co)}),tm=un(ly,["color","scale"]),em=un(ly,{color:an(oo),scale:an(co)}),im=un(ly,["color","width"]),nm=un(ly,{color:an(oo),width:an(Tr)}),rm={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},om=function(t,e,i){if(t)return Ki(e[e.length-1].node.namespaceURI,rm[t.getType()])},am=ln("Point"),sm=ln("LineString"),lm=ln("LinearRing"),hm=ln("Polygon"),um=un(ly,{LineString:an(ho),Point:an(ho),Polygon:an(uo),GeometryCollection:an(ao)}),cm=un(ly,{LinearRing:an(ho)}),pm=un(ly,{ExtendedData:an(function(t,e,i){for(var n={node:t},r=e.names,o=e.values,a=r.length,s=0;s<a;s++)fn(n,Uy,qy,[{name:r[s],value:o[s]}],i)}),MultiGeometry:an(ao),LineString:an(ho),LinearRing:an(ho),Point:an(ho),Polygon:an(uo),Style:an(function(t,e,i){var n={node:t},r={};if(e.pointStyles.length){var o=e.pointStyles[0].getText();o&&(r.LabelStyle=o);var a=e.pointStyles[0].getImage();a&&"function"==typeof a.getSrc&&(r.IconStyle=a)}if(e.lineStyles.length&&(s=e.lineStyles[0].getStroke())&&(r.LineStyle=s),e.polyStyles.length){var s;(s=e.polyStyles[0].getStroke())&&!r.LineStyle&&(r.LineStyle=s),r.PolyStyle=e.polyStyles[0]}var l=wm[i[i.length-1].node.namespaceURI],h=hn(r,l);fn(n,Sm,ku,h,i,l)}),address:an(Lr),description:an(Lr),name:an(Lr),open:an(Er),phoneNumber:an(Lr),styleUrl:an(Lr),visibility:an(Er)}),dm=un(ly,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),fm=ln("ExtendedData"),gm=un(ly,["extrude","tessellate","altitudeMode","coordinates"]),vm=un(ly,{extrude:an(Er),tessellate:an(Er),altitudeMode:an(Lr),coordinates:an(function(t,e,i){var n,r=i[i.length-1],o=r.layout,a=r.stride;o==Ga||o==Ba?n=2:o==za||o==Ya?n=3:S(!1,34);var s=e.length,l="";if(s>0){l+=e[0];for(var h=1;h<n;++h)l+=","+e[h];for(var u=a;u<s;u+=a)for(l+=" "+e[u],h=1;h<n;++h)l+=","+e[u+h]}Lr(t,l)})}),ym=un(ly,["color","fill","outline"]),mm=un(ly,{outerBoundaryIs:an(so),innerBoundaryIs:an(so)}),_m=ln("innerBoundaryIs"),xm=ln("outerBoundaryIs"),bm=un(ly,{color:an(oo),fill:an(Er),outline:an(Er)}),wm=un(ly,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),Sm=un(ly,{IconStyle:an(function(t,e,i){var n={node:t},r={},o=e.getSrc(),a=e.getSize(),s=e.getImageSize(),l={href:o};if(a){l.w=a[0],l.h=a[1];var h=e.getAnchor(),u=e.getOrigin();u&&s&&0!==u[0]&&u[1]!==a[1]&&(l.x=u[0],l.y=s[1]-(u[1]+a[1])),!h||h[0]===a[0]/2&&h[1]===a[1]/2||(r.hotSpot={x:h[0],xunits:oc,y:a[1]-h[1],yunits:oc})}r.Icon=l;var c=e.getScale();1!==c&&(r.scale=c);var p=e.getRotation();0!==p&&(r.heading=p);var d=e.getColor();d&&(r.color=d);var f=$y[i[i.length-1].node.namespaceURI],g=hn(r,f);fn(n,Qy,ku,g,i,f)}),LabelStyle:an(function(t,e,i){var n={node:t},r={},o=e.getFill();o&&(r.color=o.getColor());var a=e.getScale();a&&1!==a&&(r.scale=a);var s=tm[i[i.length-1].node.namespaceURI],l=hn(r,s);fn(n,em,ku,l,i,s)}),LineStyle:an(function(t,e,i){var n={node:t},r={color:e.getColor(),width:Number(e.getWidth())||1},o=im[i[i.length-1].node.namespaceURI],a=hn(r,o);fn(n,nm,ku,a,i,o)}),PolyStyle:an(function(t,e,i){var n={node:t},r=e.getFill(),o=e.getStroke(),a={color:r?r.getColor():void 0,fill:!!r&&void 0,outline:!!o&&void 0},s=ym[i[i.length-1].node.namespaceURI],l=hn(a,s);fn(n,bm,ku,l,i,s)})}),Cm=wy,Em=i(2),Tm=i.n(Em),Pm=[1,0,0,1,0,0],Lm=function(){function t(t,e,i,n,r){this.id_=r,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i,this.properties_=n}return t.prototype.get=function(t){return this.properties_[t]},t.prototype.getExtent=function(){return this.extent_||(this.extent_=this.type_===Xa.POINT?F(this.flatCoordinates_):k(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_},t.prototype.getFlatInteriorPoint=function(){if(!this.flatInteriorPoints_){var t=W(this.getExtent());this.flatInteriorPoints_=pe(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_},t.prototype.getFlatInteriorPoints=function(){if(!this.flatInteriorPoints_){var t=er(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=de(this.flatCoordinates_,0,this.ends_,2,t)}return this.flatInteriorPoints_},t.prototype.getFlatMidpoint=function(){return this.flatMidpoints_||(this.flatMidpoints_=Kn(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_},t.prototype.getFlatMidpoints=function(){if(!this.flatMidpoints_){this.flatMidpoints_=[];for(var t=this.flatCoordinates_,e=0,i=this.ends_,n=0,r=i.length;n<r;++n){var o=i[n],a=Kn(t,e,o,2,.5);f(this.flatMidpoints_,a),e=o}}return this.flatMidpoints_},t.prototype.getId=function(){return this.id_},t.prototype.getOrientedFlatCoordinates=function(){return this.flatCoordinates_},t.prototype.getGeometry=function(){return this},t.prototype.getSimplifiedGeometry=function(t){return this},t.prototype.simplifyTransformed=function(t,e){return this},t.prototype.getProperties=function(){return this.properties_},t.prototype.getStride=function(){return 2},t.prototype.getStyleFunction=function(){},t.prototype.getType=function(){return this.type_},t.prototype.transform=function(t,e){var i=(t=bt(t)).getExtent(),n=t.getWorldExtent(),r=V(n)/V(i);Yt(Pm,n[0],n[3],r,-r,0,0,0),it(this.flatCoordinates_,0,this.flatCoordinates_.length,2,Pm,this.flatCoordinates_)},t}();Lm.prototype.getEnds=function(){return this.ends_},Lm.prototype.getEndss=Lm.prototype.getEnds,Lm.prototype.getFlatCoordinates=Lm.prototype.getOrientedFlatCoordinates;var Im=Lm,Om=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Am=function(t){function e(e){var i=t.call(this)||this,n=e||{};return i.dataProjection=new Ja({code:"",units:Ka.TILE_PIXELS}),i.featureClass_=n.featureClass?n.featureClass:Im,i.geometryName_=n.geometryName,i.layerName_=n.layerName?n.layerName:"layer",i.layers_=n.layers?n.layers:null,i.idProperty_=n.idProperty,i}return Om(e,t),e.prototype.readRawGeometry_=function(t,e,i,n){t.pos=e.geometry;for(var r=t.readVarint()+t.pos,o=1,a=0,s=0,l=0,h=0,u=0;t.pos<r;){if(!a){var c=t.readVarint();o=7&c,a=c>>3}a--,1===o||2===o?(s+=t.readSVarint(),l+=t.readSVarint(),1===o&&h>u&&(n.push(h),u=h),i.push(s,l),h+=2):7===o?h>u&&(i.push(i[u],i[u+1]),h+=2):S(!1,59)}h>u&&(n.push(h),u=h)},e.prototype.createFeature_=function(t,e,i){var n,r=e.type;if(0===r)return null;var o,a=e.properties;this.idProperty_?(o=a[this.idProperty_],delete a[this.idProperty_]):o=e.id,a[this.layerName_]=e.layer.name;var s=[],l=[];this.readRawGeometry_(t,e,s,l);var h=function(t,e){var i;return 1===r?i=1===e?Xa.POINT:Xa.MULTI_POINT:2===r?i=1===e?Xa.LINE_STRING:Xa.MULTI_LINE_STRING:3===r&&(i=Xa.POLYGON),i}(0,l.length);if(this.featureClass_===Im)(n=new this.featureClass_(h,s,l,a,o)).transform(i.dataProjection,i.featureProjection);else{var u=void 0;if(h==Xa.POLYGON){for(var c=[],p=0,d=0,f=0,g=l.length;f<g;++f){var v=l[f];me(s,p,v,2)||(c.push(l.slice(d,f)),d=f),p=v}u=c.length>1?new cg(s,Ga,c):new Ts(s,Ga,l)}else u=h===Xa.POINT?new Ss(s,Ga):h===Xa.LINE_STRING?new zf(s,Ga):h===Xa.POLYGON?new Ts(s,Ga,l):h===Xa.MULTI_POINT?new hg(s,Ga):h===Xa.MULTI_LINE_STRING?new sg(s,Ga,l):null;n=new(0,this.featureClass_),this.geometryName_&&n.setGeometryName(this.geometryName_);var y=ur(u,!1,i);n.setGeometry(y),n.setId(o),n.setProperties(a,!0)}return n},e.prototype.getType=function(){return Cu},e.prototype.readFeatures=function(t,e){var i=this.layers_,n=this.adaptOptions(e),r=bt(n.dataProjection);r.setWorldExtent(n.extent),n.dataProjection=r;var o=new Tm.a(t),a=o.readFields(po,{}),s=[];for(var l in a)if(!i||-1!=i.indexOf(l)){var h=a[l];r.setExtent(h?[0,0,h.extent,h.extent]:null);for(var u=0,c=h.length;u<c;++u){var p=vo(o,h,u);s.push(this.createFeature_(o,p,n))}}return s},e.prototype.readProjection=function(t){return this.dataProjection},e.prototype.setLayers=function(t){this.layers_=t},e}(Bg),Rm=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Mm=[null],Fm=un(Mm,{nd:function(t,e){e[e.length-1].ndrefs.push(t.getAttribute("ref"))},tag:yo}),km=un(Mm,{node:function(t,e){var i=e[0],n=e[e.length-1],r=t.getAttribute("id"),o=[parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))];n.nodes[r]=o;var s=pn({tags:{}},Dm,t,e);if(!a(s.tags)){var l=new Ss(o);ur(l,!1,i);var h=new La(l);h.setId(r),h.setProperties(s.tags,!0),n.features.push(h)}},way:function(t,e){var i=pn({id:t.getAttribute("id"),ndrefs:[],tags:{}},Fm,t,e);e[e.length-1].ways.push(i)}}),Nm=function(t){function e(){var e=t.call(this)||this;return e.dataProjection=bt("EPSG:4326"),e}return Rm(e,t),e.prototype.readFeaturesFromNode=function(t,e){var i=this.getReadOptions(t,e);if("osm"==t.localName){for(var n=pn({nodes:{},ways:[],features:[]},km,t,[i]),r=0;r<n.ways.length;r++){for(var o=n.ways[r],a=[],s=0,l=o.ndrefs.length;s<l;s++)f(a,n.nodes[o.ndrefs[s]]);var h=void 0;ur(h=o.ndrefs[0]==o.ndrefs[o.ndrefs.length-1]?new Ts(a,Ga,[a.length]):new zf(a,Ga),!1,i);var u=new La(h);u.setId(o.id),u.setProperties(o.tags,!0),n.features.push(u)}if(n.features)return n.features}return[]},e}(Zg),Dm=un(Mm,{tag:yo}),jm=Nm,Gm=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),zm=function(t){function e(e){var i=t.call(this)||this,n=e||{};return i.dataProjection=bt("EPSG:4326"),i.factor_=n.factor?n.factor:1e5,i.geometryLayout_=n.geometryLayout?n.geometryLayout:Ga,i}return Gm(e,t),e.prototype.readFeatureFromText=function(t,e){var i=this.readGeometryFromText(t,e);return new La(i)},e.prototype.readFeaturesFromText=function(t,e){return[this.readFeatureFromText(t,e)]},e.prototype.readGeometryFromText=function(t,e){var i=Ut(this.geometryLayout_),n=xo(t,i,this.factor_);mo(n,0,n.length,i,n);var r=ie(n,0,n.length,i);return ur(new zf(r,this.geometryLayout_),!1,this.adaptOptions(e))},e.prototype.writeFeatureText=function(t,e){var i=t.getGeometry();return i?this.writeGeometryText(i,e):(S(!1,40),"")},e.prototype.writeFeaturesText=function(t,e){return this.writeFeatureText(t[0],e)},e.prototype.writeGeometryText=function(t,e){var i=(t=ur(t,!0,this.adaptOptions(e))).getFlatCoordinates(),n=t.getStride();return mo(i,0,i.length,n,i),_o(i,n,this.factor_)},e}($v),Bm=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ym={Point:function(t,e,i){var n=t.coordinates;return e&&i&&Eo(n,e,i),new Ss(n)},LineString:function(t,e){var i=So(t.arcs,e);return new zf(i)},Polygon:function(t,e){for(var i=[],n=0,r=t.arcs.length;n<r;++n)i[n]=So(t.arcs[n],e);return new Ts(i)},MultiPoint:function(t,e,i){var n=t.coordinates;if(e&&i)for(var r=0,o=n.length;r<o;++r)Eo(n[r],e,i);return new hg(n)},MultiLineString:function(t,e){for(var i=[],n=0,r=t.arcs.length;n<r;++n)i[n]=So(t.arcs[n],e);return new sg(i)},MultiPolygon:function(t,e){for(var i=[],n=0,r=t.arcs.length;n<r;++n){for(var o=t.arcs[n],a=[],s=0,l=o.length;s<l;++s)a[s]=So(o[s],e);i[n]=a}return new cg(i)}},Xm=function(t){function e(e){var i=t.call(this)||this,n=e||{};return i.layerName_=n.layerName,i.layers_=n.layers?n.layers:null,i.dataProjection=bt(n.dataProjection?n.dataProjection:"EPSG:4326"),i}return Bm(e,t),e.prototype.readFeaturesFromObject=function(t,e){if("Topology"==t.type){var i=t,n=void 0,r=null,o=null;i.transform&&(r=(n=i.transform).scale,o=n.translate);var a=i.arcs;n&&function(t,e,i){for(var n=0,r=t.length;n<r;++n)!function(t,e,i){for(var n=0,r=0,o=0,a=t.length;o<a;++o){var s=t[o];r+=s[1],s[0]=n+=s[0],s[1]=r,Eo(s,e,i)}}(t[n],e,i)}(a,r,o);var s=[],l=i.objects,h=this.layerName_,u=void 0;for(var c in l)this.layers_&&-1==this.layers_.indexOf(c)||("GeometryCollection"===l[c].type?(u=l[c],s.push.apply(s,function(t,e,i,n,r,o,a){for(var s=u.geometries,l=[],h=0,c=s.length;h<c;++h)l[h]=Co(s[h],e,i,n,r,o,a);return l}(0,a,r,o,h,c,e))):(u=l[c],s.push(Co(u,a,r,o,h,c,e))));return s}return[]},e.prototype.readProjectionFromObject=function(t){return this.dataProjection},e}(Xg),Wm=function(){function t(t){this.tagName_=t}return t.prototype.getTagName=function(){return this.tagName_},t}(),Um=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Vm=function(t){function e(e,i){var n=t.call(this,e)||this;return n.conditions=i,S(n.conditions.length>=2,57),n}return Um(e,t),e}(Wm),Hm=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),qm=function(t){function e(e){return t.call(this,"And",Array.prototype.slice.call(arguments))||this}return Hm(e,t),e}(Vm),Zm=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Km=function(t){function e(e,i,n){var r=t.call(this,"BBOX")||this;if(r.geometryName=e,r.extent=i,4!==i.length)throw new Error("Expected an extent with four values ([minX, minY, maxX, maxY])");return r.srsName=n,r}return Zm(e,t),e}(Wm),Jm=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),$m=function(t){function e(e,i,n,r){var o=t.call(this,e)||this;return o.geometryName=i||"the_geom",o.geometry=n,o.srsName=r,o}return Jm(e,t),e}(Wm),Qm=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),t_=function(t){function e(e,i,n){return t.call(this,"Contains",e,i,n)||this}return Qm(e,t),e}($m),e_=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),i_=function(t){function e(e,i){var n=t.call(this,e)||this;return n.propertyName=i,n}return e_(e,t),e}(Wm),n_=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),r_=function(t){function e(e,i,n){var r=t.call(this,"During",e)||this;return r.begin=i,r.end=n,r}return n_(e,t),e}(i_),o_=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),a_=function(t){function e(e,i,n,r){var o=t.call(this,e,i)||this;return o.expression=n,o.matchCase=r,o}return o_(e,t),e}(i_),s_=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),l_=function(t){function e(e,i,n){return t.call(this,"PropertyIsEqualTo",e,i,n)||this}return s_(e,t),e}(a_),h_=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),u_=function(t){function e(e,i){return t.call(this,"PropertyIsGreaterThan",e,i)||this}return h_(e,t),e}(a_),c_=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),p_=function(t){function e(e,i){return t.call(this,"PropertyIsGreaterThanOrEqualTo",e,i)||this}return c_(e,t),e}(a_),d_=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),f_=function(t){function e(e,i,n){return t.call(this,"Intersects",e,i,n)||this}return d_(e,t),e}($m),g_=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),v_=function(t){function e(e,i,n){var r=t.call(this,"PropertyIsBetween",e)||this;return r.lowerBoundary=i,r.upperBoundary=n,r}return g_(e,t),e}(i_),y_=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),m_=function(t){function e(e,i,n,r,o,a){var s=t.call(this,"PropertyIsLike",e)||this;return s.pattern=i,s.wildCard=void 0!==n?n:"*",s.singleChar=void 0!==r?r:".",s.escapeChar=void 0!==o?o:"!",s.matchCase=a,s}return y_(e,t),e}(i_),__=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),x_=function(t){function e(e){return t.call(this,"PropertyIsNull",e)||this}return __(e,t),e}(i_),b_=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),w_=function(t){function e(e,i){return t.call(this,"PropertyIsLessThan",e,i)||this}return b_(e,t),e}(a_),S_=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),C_=function(t){function e(e,i){return t.call(this,"PropertyIsLessThanOrEqualTo",e,i)||this}return S_(e,t),e}(a_),E_=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),T_=function(t){function e(e){var i=t.call(this,"Not")||this;return i.condition=e,i}return E_(e,t),e}(Wm),P_=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),L_=function(t){function e(e,i,n){return t.call(this,"PropertyIsNotEqualTo",e,i,n)||this}return P_(e,t),e}(a_),I_=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),O_=function(t){function e(e){return t.call(this,"Or",Array.prototype.slice.call(arguments))||this}return I_(e,t),e}(Vm),A_=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),R_=function(t){function e(e,i,n){return t.call(this,"Within",e,i,n)||this}return A_(e,t),e}($m),M_=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),F_={"http://www.opengis.net/gml":{boundedBy:on(tv.prototype.readGeometryElement,"bounds")}},k_={"http://www.opengis.net/wfs":{totalInserted:on(wr),totalUpdated:on(wr),totalDeleted:on(wr)}},N_={"http://www.opengis.net/wfs":{TransactionSummary:on(function(t,e){return pn({},k_,t,e)},"transactionSummary"),InsertResults:on(function(t,e){return pn([],U_,t,e)},"insertIds")}},D_={"http://www.opengis.net/wfs":{PropertyName:an(Lr)}},j_={"http://www.opengis.net/wfs":{Insert:an(function(t,e,i){var n=i[i.length-1],r=n.gmlVersion,o=Ki(n.featureNS,n.featureType);t.appendChild(o),2===r?hv.prototype.writeFeatureElement(o,e,i):rv.prototype.writeFeatureElement(o,e,i)}),Update:an(function(t,e,i){var n=i[i.length-1];S(void 0!==e.getId(),27);var r=n.featurePrefix,o=n.featureNS,a=Io(r,n.featureType),s=e.getGeometryName();t.setAttribute("typeName",a),t.setAttributeNS(G_,"xmlns:"+r,o);var l=e.getId();if(void 0!==l){for(var h=e.getKeys(),u=[],c=0,p=h.length;c<p;c++){var d=e.get(h[c]);if(void 0!==d){var f=h[c];d&&"function"==typeof d.getSimplifiedGeometry&&(f=s),u.push({name:f,value:d})}}fn({gmlVersion:n.gmlVersion,node:t,hasZ:n.hasZ,srsName:n.srsName},j_,ln("Property"),u,i),Lo(t,l)}}),Delete:an(function(t,e,i){var n=i[i.length-1];S(void 0!==e.getId(),26);var r=n.featurePrefix,o=n.featureNS,a=Io(r,n.featureType);t.setAttribute("typeName",a),t.setAttributeNS(G_,"xmlns:"+r,o);var s=e.getId();void 0!==s&&Lo(t,s)}),Property:an(function(t,e,i){var n=Ki(B_,"Name"),r=i[i.length-1].gmlVersion;if(t.appendChild(n),Lr(n,e.name),void 0!==e.value&&null!==e.value){var o=Ki(B_,"Value");t.appendChild(o),e.value&&"function"==typeof e.value.getSimplifiedGeometry?2===r?hv.prototype.writeGeometryElement(o,e.value,i):rv.prototype.writeGeometryElement(o,e.value,i):Lr(o,e.value)}}),Native:an(function(t,e,i){e.vendorId&&t.setAttribute("vendorId",e.vendorId),void 0!==e.safeToIgnore&&t.setAttribute("safeToIgnore",String(e.safeToIgnore)),void 0!==e.value&&Lr(t,e.value)})}},G_="http://www.w3.org/2000/xmlns/",z_="http://www.opengis.net/ogc",B_="http://www.opengis.net/wfs",Y_={"1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},X_=function(t){function e(e){var i=t.call(this)||this,n=e||{};return i.featureType_=n.featureType,i.featureNS_=n.featureNS,i.gmlFormat_=n.gmlFormat?n.gmlFormat:new rv,i.schemaLocation_=n.schemaLocation?n.schemaLocation:Y_["1.1.0"],i}return M_(e,t),e.prototype.getFeatureType=function(){return this.featureType_},e.prototype.setFeatureType=function(t){this.featureType_=t},e.prototype.readFeaturesFromNode=function(t,e){var i={node:t};na(i,{featureType:this.featureType_,featureNS:this.featureNS_}),na(i,this.getReadOptions(t,e||{}));var n=[i];this.gmlFormat_.FEATURE_COLLECTION_PARSERS[Jg].featureMember=en(tv.prototype.readFeaturesInternal);var r=pn([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,t,n,this.gmlFormat_);return r||(r=[]),r},e.prototype.readTransactionResponse=function(t){if(t){if("string"==typeof t){var e=Qi(t);return this.readTransactionResponseFromDocument(e)}return $i(t)?this.readTransactionResponseFromDocument(t):this.readTransactionResponseFromNode(t)}},e.prototype.readFeatureCollectionMetadata=function(t){if(t){if("string"==typeof t){var e=Qi(t);return this.readFeatureCollectionMetadataFromDocument(e)}return $i(t)?this.readFeatureCollectionMetadataFromDocument(t):this.readFeatureCollectionMetadataFromNode(t)}},e.prototype.readFeatureCollectionMetadataFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(e)},e.prototype.readFeatureCollectionMetadataFromNode=function(t){var e={},i=Sr(t.getAttribute("numberOfFeatures"));return e.numberOfFeatures=i,pn(e,F_,t,[],this.gmlFormat_)},e.prototype.readTransactionResponseFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(e)},e.prototype.readTransactionResponseFromNode=function(t){return pn({},N_,t,[])},e.prototype.writeGetFeature=function(t){var e,i=Ki(B_,"GetFeature");if(i.setAttribute("service","WFS"),i.setAttribute("version","1.1.0"),t&&(t.handle&&i.setAttribute("handle",t.handle),t.outputFormat&&i.setAttribute("outputFormat",t.outputFormat),void 0!==t.maxFeatures&&i.setAttribute("maxFeatures",String(t.maxFeatures)),t.resultType&&i.setAttribute("resultType",t.resultType),void 0!==t.startIndex&&i.setAttribute("startIndex",String(t.startIndex)),void 0!==t.count&&i.setAttribute("count",String(t.count)),void 0!==t.viewParams&&i.setAttribute("viewParams",t.viewParams),e=t.filter,t.bbox)){S(t.geometryName,12);var n=Po(t.geometryName,t.bbox,t.srsName);e=e?To(e,n):n}i.setAttributeNS(Fu,"xsi:schemaLocation",this.schemaLocation_);var r={node:i};return na(r,{srsName:t.srsName,featureNS:t.featureNS?t.featureNS:this.featureNS_,featurePrefix:t.featurePrefix,geometryName:t.geometryName,filter:e,propertyNames:t.propertyNames?t.propertyNames:[]}),S(Array.isArray(t.featureTypes),11),function(t,e,i){var n=na({},i[i.length-1]);n.node=t,fn(n,V_,ln("Query"),e,i)}(i,t.featureTypes,[r]),i},e.prototype.writeTransaction=function(t,e,i,n){var r,o,a=[],s=Ki(B_,"Transaction"),l=n.version?n.version:"1.1.0",h="1.0.0"===l?2:3;s.setAttribute("service","WFS"),s.setAttribute("version",l),n&&(r=n.gmlOptions?n.gmlOptions:{},n.handle&&s.setAttribute("handle",n.handle)),s.setAttributeNS(Fu,"xsi:schemaLocation",Y_[l]);var u=n.featurePrefix?n.featurePrefix:"feature";return t&&(o=na({node:s},{featureNS:n.featureNS,featureType:n.featureType,featurePrefix:u,gmlVersion:h,hasZ:n.hasZ,srsName:n.srsName}),na(o,r),fn(o,j_,ln("Insert"),t,a)),e&&(o=na({node:s},{featureNS:n.featureNS,featureType:n.featureType,featurePrefix:u,gmlVersion:h,hasZ:n.hasZ,srsName:n.srsName}),na(o,r),fn(o,j_,ln("Update"),e,a)),i&&fn({node:s,featureNS:n.featureNS,featureType:n.featureType,featurePrefix:u,gmlVersion:h,srsName:n.srsName},j_,ln("Delete"),i,a),n.nativeElements&&fn({node:s,featureNS:n.featureNS,featureType:n.featureType,featurePrefix:u,gmlVersion:h,srsName:n.srsName},j_,ln("Native"),n.nativeElements,a),s},e.prototype.readProjectionFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(e);return null},e.prototype.readProjectionFromNode=function(t){if(t.firstElementChild&&t.firstElementChild.firstElementChild)for(var e=(t=t.firstElementChild.firstElementChild).firstElementChild;e;e=e.nextElementSibling)if(0!==e.childNodes.length&&(1!==e.childNodes.length||3!==e.firstChild.nodeType)){var i=[{}];return this.gmlFormat_.readGeometryElement(e,i),bt(i.pop().srsName)}return null},e}(Zg),W_={"http://www.opengis.net/ogc":{FeatureId:en(function(t,e){return t.getAttribute("fid")})}},U_={"http://www.opengis.net/wfs":{Feature:function(t,e){cn(W_,t,e)}}},V_={"http://www.opengis.net/wfs":{Query:an(function(t,e,i){var n,r=i[i.length-1],o=r.featurePrefix,a=r.featureNS,s=r.propertyNames,l=r.srsName;n=o?Io(o,e):e,t.setAttribute("typeName",n),l&&t.setAttribute("srsName",l),a&&t.setAttributeNS(G_,"xmlns:"+o,a);var h=na({},r);h.node=t,fn(h,D_,ln("PropertyName"),s,i);var u=r.filter;if(u){var c=Ki(z_,"Filter");t.appendChild(c),Oo(c,u,i)}})},"http://www.opengis.net/ogc":{During:an(function(t,e,i){var n=Ki("http://www.opengis.net/fes","ValueReference");Lr(n,e.propertyName),t.appendChild(n);var r=Ki(Jg,"TimePeriod");t.appendChild(r);var o=Ki(Jg,"begin");r.appendChild(o),No(o,e.begin);var a=Ki(Jg,"end");r.appendChild(a),No(a,e.end)}),And:an(Ao),Or:an(Ao),Not:an(function(t,e,i){var n=e.condition;fn({node:t},V_,ln(n.getTagName()),[n],i)}),BBOX:an(function(t,e,i){i[i.length-1].srsName=e.srsName,Fo(t,e.geometryName),rv.prototype.writeGeometryElement(t,e.extent,i)}),Contains:an(function(t,e,i){i[i.length-1].srsName=e.srsName,Fo(t,e.geometryName),rv.prototype.writeGeometryElement(t,e.geometry,i)}),Intersects:an(function(t,e,i){i[i.length-1].srsName=e.srsName,Fo(t,e.geometryName),rv.prototype.writeGeometryElement(t,e.geometry,i)}),Within:an(function(t,e,i){i[i.length-1].srsName=e.srsName,Fo(t,e.geometryName),rv.prototype.writeGeometryElement(t,e.geometry,i)}),PropertyIsEqualTo:an(Ro),PropertyIsNotEqualTo:an(Ro),PropertyIsLessThan:an(Ro),PropertyIsLessThanOrEqualTo:an(Ro),PropertyIsGreaterThan:an(Ro),PropertyIsGreaterThanOrEqualTo:an(Ro),PropertyIsNull:an(function(t,e,i){Fo(t,e.propertyName)}),PropertyIsBetween:an(function(t,e,i){Fo(t,e.propertyName);var n=Ki(z_,"LowerBoundary");t.appendChild(n),ko(n,""+e.lowerBoundary);var r=Ki(z_,"UpperBoundary");t.appendChild(r),ko(r,""+e.upperBoundary)}),PropertyIsLike:an(function(t,e,i){t.setAttribute("wildCard",e.wildCard),t.setAttribute("singleChar",e.singleChar),t.setAttribute("escapeChar",e.escapeChar),void 0!==e.matchCase&&t.setAttribute("matchCase",e.matchCase.toString()),Fo(t,e.propertyName),ko(t,""+e.pattern)})}},H_=X_,q_=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Z_={POINT:Ss,LINESTRING:zf,POLYGON:Ts,MULTIPOINT:hg,MULTILINESTRING:sg,MULTIPOLYGON:cg},K_={};for(var J_ in Xa)K_[J_]=Xa[J_].toUpperCase();var $_=function(){function t(t){this.wkt=t,this.index_=-1}return t.prototype.isAlpha_=function(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"},t.prototype.isNumeric_=function(t,e){return t>="0"&&t<="9"||"."==t&&!(void 0!==e&&e)},t.prototype.isWhiteSpace_=function(t){return" "==t||"\t"==t||"\r"==t||"\n"==t},t.prototype.nextChar_=function(){return this.wkt.charAt(++this.index_)},t.prototype.nextToken=function(){var t,e=this.nextChar_(),i=this.index_,n=e;if("("==e)t=2;else if(","==e)t=5;else if(")"==e)t=3;else if(this.isNumeric_(e)||"-"==e)t=4,n=this.readNumber_();else if(this.isAlpha_(e))t=1,n=this.readText_();else{if(this.isWhiteSpace_(e))return this.nextToken();if(""!==e)throw new Error("Unexpected character: "+e);t=6}return{position:i,value:n,type:t}},t.prototype.readNumber_=function(){var t,e=this.index_,i=!1,n=!1;do{"."==t?i=!0:"e"!=t&&"E"!=t||(n=!0),t=this.nextChar_()}while(this.isNumeric_(t,i)||!n&&("e"==t||"E"==t)||n&&("-"==t||"+"==t));return parseFloat(this.wkt.substring(e,this.index_--))},t.prototype.readText_=function(){var t,e=this.index_;do{t=this.nextChar_()}while(this.isAlpha_(t));return this.wkt.substring(e,this.index_--).toUpperCase()},t}(),Q_=function(){function t(t){this.lexer_=t,this.layout_=Ga}return t.prototype.consume_=function(){this.token_=this.lexer_.nextToken()},t.prototype.isTokenType=function(t){return this.token_.type==t},t.prototype.match=function(t){var e=this.isTokenType(t);return e&&this.consume_(),e},t.prototype.parse=function(){return this.consume_(),this.parseGeometry_()},t.prototype.parseGeometryLayout_=function(){var t=Ga,e=this.token_;if(this.isTokenType(1)){var i=e.value;"Z"===i?t=za:"M"===i?t=Ba:"ZM"===i&&(t=Ya),t!==Ga&&this.consume_()}return t},t.prototype.parseGeometryCollectionText_=function(){if(this.match(2)){var t=[];do{t.push(this.parseGeometry_())}while(this.match(5));if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parsePointText_=function(){if(this.match(2)){var t=this.parsePoint_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())},t.prototype.parseLineStringText_=function(){if(this.match(2)){var t=this.parsePointList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parsePolygonText_=function(){if(this.match(2)){var t=this.parseLineStringTextList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parseMultiPointText_=function(){if(this.match(2)){var t=void 0;if(t=2==this.token_.type?this.parsePointTextList_():this.parsePointList_(),this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parseMultiLineStringText_=function(){if(this.match(2)){var t=this.parseLineStringTextList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parseMultiPolygonText_=function(){if(this.match(2)){var t=this.parsePolygonTextList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parsePoint_=function(){for(var t=[],e=this.layout_.length,i=0;i<e;++i){var n=this.token_;if(!this.match(4))break;t.push(n.value)}if(t.length==e)return t;throw new Error(this.formatErrorMessage_())},t.prototype.parsePointList_=function(){for(var t=[this.parsePoint_()];this.match(5);)t.push(this.parsePoint_());return t},t.prototype.parsePointTextList_=function(){for(var t=[this.parsePointText_()];this.match(5);)t.push(this.parsePointText_());return t},t.prototype.parseLineStringTextList_=function(){for(var t=[this.parseLineStringText_()];this.match(5);)t.push(this.parseLineStringText_());return t},t.prototype.parsePolygonTextList_=function(){for(var t=[this.parsePolygonText_()];this.match(5);)t.push(this.parsePolygonText_());return t},t.prototype.isEmptyGeometry_=function(){var t=this.isTokenType(1)&&"EMPTY"==this.token_.value;return t&&this.consume_(),t},t.prototype.formatErrorMessage_=function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"},t.prototype.parseGeometry_=function(){var t=this.token_;if(this.match(1)){var e=t.value;if(this.layout_=this.parseGeometryLayout_(),"GEOMETRYCOLLECTION"==e){var i=this.parseGeometryCollectionText_();return new zg(i)}var n=Z_[e];if(!n)throw new Error("Invalid geometry type: "+e);var r=void 0;switch(e){case"POINT":r=this.parsePointText_();break;case"LINESTRING":r=this.parseLineStringText_();break;case"POLYGON":r=this.parsePolygonText_();break;case"MULTIPOINT":r=this.parseMultiPointText_();break;case"MULTILINESTRING":r=this.parseMultiLineStringText_();break;case"MULTIPOLYGON":r=this.parseMultiPolygonText_();break;default:throw new Error("Invalid geometry type: "+e)}return r||(r=n===Z_.POINT?[NaN,NaN]:[]),new n(r,this.layout_)}throw new Error(this.formatErrorMessage_())},t}(),tx={Point:Do,LineString:jo,Polygon:Go,MultiPoint:function(t){for(var e=[],i=t.getPoints(),n=0,r=i.length;n<r;++n)e.push("("+Do(i[n])+")");return e.join(",")},MultiLineString:function(t){for(var e=[],i=t.getLineStrings(),n=0,r=i.length;n<r;++n)e.push("("+jo(i[n])+")");return e.join(",")},MultiPolygon:function(t){for(var e=[],i=t.getPolygons(),n=0,r=i.length;n<r;++n)e.push("("+Go(i[n])+")");return e.join(",")},GeometryCollection:function(t){for(var e=[],i=t.getGeometries(),n=0,r=i.length;n<r;++n)e.push(zo(i[n]));return e.join(",")}},ex=function(t){function e(e){var i=t.call(this)||this,n=e||{};return i.splitCollection_=void 0!==n.splitCollection&&n.splitCollection,i}return q_(e,t),e.prototype.parse_=function(t){var e=new $_(t);return new Q_(e).parse()},e.prototype.readFeatureFromText=function(t,e){var i=this.readGeometryFromText(t,e);if(i){var n=new La;return n.setGeometry(i),n}return null},e.prototype.readFeaturesFromText=function(t,e){for(var i=[],n=this.readGeometryFromText(t,e),r=[],o=0,a=(i=this.splitCollection_&&n.getType()==Xa.GEOMETRY_COLLECTION?n.getGeometriesArray():[n]).length;o<a;++o){var s=new La;s.setGeometry(i[o]),r.push(s)}return r},e.prototype.readGeometryFromText=function(t,e){var i=this.parse_(t);return i?ur(i,!1,e):null},e.prototype.writeFeatureText=function(t,e){var i=t.getGeometry();return i?this.writeGeometryText(i,e):""},e.prototype.writeFeaturesText=function(t,e){if(1==t.length)return this.writeFeatureText(t[0],e);for(var i=[],n=0,r=t.length;n<r;++n)i.push(t[n].getGeometry());var o=new zg(i);return this.writeGeometryText(o,e)},e.prototype.writeGeometryText=function(t,e){return zo(ur(t,!0,e))},e}($v),ix=function(){function t(){}return t.prototype.read=function(t){if(t){if("string"==typeof t){var e=Qi(t);return this.readFromDocument(e)}return $i(t)?this.readFromDocument(t):this.readFromNode(t)}return null},t.prototype.readFromDocument=function(t){},t.prototype.readFromNode=function(t){},t}(),nx=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),rx=[null,"http://www.opengis.net/wms"],ox=un(rx,{Service:on(function(t,e){return pn({},lx,t,e)}),Capability:on(function(t,e){return pn({},ax,t,e)})}),ax=un(rx,{Request:on(function(t,e){return pn({},vx,t,e)}),Exception:on(function(t,e){return pn([],px,t,e)}),Layer:on(function(t,e){return pn({},dx,t,e)})}),sx=function(t){function e(){var e=t.call(this)||this;return e.version=void 0,e}return nx(e,t),e.prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null},e.prototype.readFromNode=function(t){return this.version=t.getAttribute("version").trim(),pn({version:this.version},ox,t,[])||null},e}(ix),lx=un(rx,{Name:on(Cr),Title:on(Cr),Abstract:on(Cr),KeywordList:on(Uo),OnlineResource:on(Bo),ContactInformation:on(function(t,e){return pn({},hx,t,e)}),Fees:on(Cr),AccessConstraints:on(Cr),LayerLimit:on(wr),MaxWidth:on(wr),MaxHeight:on(wr)}),hx=un(rx,{ContactPersonPrimary:on(function(t,e){return pn({},ux,t,e)}),ContactPosition:on(Cr),ContactAddress:on(function(t,e){return pn({},cx,t,e)}),ContactVoiceTelephone:on(Cr),ContactFacsimileTelephone:on(Cr),ContactElectronicMailAddress:on(Cr)}),ux=un(rx,{ContactPerson:on(Cr),ContactOrganization:on(Cr)}),cx=un(rx,{AddressType:on(Cr),Address:on(Cr),City:on(Cr),StateOrProvince:on(Cr),PostCode:on(Cr),Country:on(Cr)}),px=un(rx,{Format:en(Cr)}),dx=un(rx,{Name:on(Cr),Title:on(Cr),Abstract:on(Cr),KeywordList:on(Uo),CRS:rn(Cr),EX_GeographicBoundingBox:on(function(t,e){var i=pn({},gx,t,e);if(i){var n=i.westBoundLongitude,r=i.southBoundLatitude,o=i.eastBoundLongitude,a=i.northBoundLatitude;if(void 0!==n&&void 0!==r&&void 0!==o&&void 0!==a)return[n,r,o,a]}}),BoundingBox:rn(function(t,e){var i=[br(t.getAttribute("minx")),br(t.getAttribute("miny")),br(t.getAttribute("maxx")),br(t.getAttribute("maxy"))],n=[br(t.getAttribute("resx")),br(t.getAttribute("resy"))];return{crs:t.getAttribute("CRS"),extent:i,res:n}}),Dimension:rn(function(t,e){return{name:t.getAttribute("name"),units:t.getAttribute("units"),unitSymbol:t.getAttribute("unitSymbol"),default:t.getAttribute("default"),multipleValues:mr(t.getAttribute("multipleValues")),nearestValue:mr(t.getAttribute("nearestValue")),current:mr(t.getAttribute("current")),values:Cr(t)}}),Attribution:on(function(t,e){return pn({},fx,t,e)}),AuthorityURL:rn(function(t,e){var i=Yo(t,e);if(i)return i.name=t.getAttribute("name"),i}),Identifier:rn(Cr),MetadataURL:rn(function(t,e){var i=Yo(t,e);if(i)return i.type=t.getAttribute("type"),i}),DataURL:rn(Yo),FeatureListURL:rn(Yo),Style:rn(function(t,e){return pn({},xx,t,e)}),MinScaleDenominator:on(xr),MaxScaleDenominator:on(xr),Layer:rn(function(t,e){var i=e[e.length-1],n=pn({},dx,t,e);if(n){var r=mr(t.getAttribute("queryable"));void 0===r&&(r=i.queryable),n.queryable=void 0!==r&&r;var o=Sr(t.getAttribute("cascaded"));void 0===o&&(o=i.cascaded),n.cascaded=o;var a=mr(t.getAttribute("opaque"));void 0===a&&(a=i.opaque),n.opaque=void 0!==a&&a;var s=mr(t.getAttribute("noSubsets"));void 0===s&&(s=i.noSubsets),n.noSubsets=void 0!==s&&s;var l=br(t.getAttribute("fixedWidth"));l||(l=i.fixedWidth),n.fixedWidth=l;var h=br(t.getAttribute("fixedHeight"));return h||(h=i.fixedHeight),n.fixedHeight=h,["Style","CRS","AuthorityURL"].forEach(function(t){t in i&&(n[t]=(n[t]||[]).concat(i[t]))}),["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"].forEach(function(t){t in n||(n[t]=i[t])}),n}})}),fx=un(rx,{Title:on(Cr),OnlineResource:on(Bo),LogoURL:on(Wo)}),gx=un(rx,{westBoundLongitude:on(xr),eastBoundLongitude:on(xr),southBoundLatitude:on(xr),northBoundLatitude:on(xr)}),vx=un(rx,{GetCapabilities:on(Xo),GetMap:on(Xo),GetFeatureInfo:on(Xo)}),yx=un(rx,{Format:rn(Cr),DCPType:rn(function(t,e){return pn({},mx,t,e)})}),mx=un(rx,{HTTP:on(function(t,e){return pn({},_x,t,e)})}),_x=un(rx,{Get:on(Yo),Post:on(Yo)}),xx=un(rx,{Name:on(Cr),Title:on(Cr),Abstract:on(Cr),LegendURL:rn(Wo),StyleSheetURL:on(Yo),StyleURL:on(Yo)}),bx=un(rx,{Format:on(Cr),OnlineResource:on(Bo)}),wx=un(rx,{Keyword:en(Cr)}),Sx=sx,Cx=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ex=function(t){function e(e){var i=t.call(this)||this,n=e||{};return i.featureNS_="http://mapserver.gis.umn.edu/mapserver",i.gmlFormat_=new hv,i.layers_=n.layers?n.layers:null,i}return Cx(e,t),e.prototype.getLayers=function(){return this.layers_},e.prototype.setLayers=function(t){this.layers_=t},e.prototype.readFeatures_=function(t,e){t.setAttribute("namespaceURI",this.featureNS_);var i=t.localName,n=[];if(0===t.childNodes.length)return n;if("msGMLOutput"==i)for(var r=0,o=t.childNodes.length;r<o;r++){var a=t.childNodes[r];if(a.nodeType===Node.ELEMENT_NODE){var s=a,l=e[0],h=s.localName.replace("_layer","");if(!this.layers_||c(this.layers_,h)){var u=h+"_feature";l.featureType=u,l.featureNS=this.featureNS_;var p={};p[u]=en(this.gmlFormat_.readFeatureElement,this.gmlFormat_);var d=un([l.featureNS,null],p);s.setAttribute("namespaceURI",this.featureNS_);var g=pn([],d,s,e,this.gmlFormat_);g&&f(n,g)}}}if("FeatureCollection"==i){var v=pn([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,t,[{}],this.gmlFormat_);v&&(n=v)}return n},e.prototype.readFeaturesFromNode=function(t,e){var i={};return e&&na(i,this.getReadOptions(t,e)),this.readFeatures_(t,[i])},e}(Zg),Tx=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Px=[null,"http://www.opengis.net/ows/1.1"],Lx=un(Px,{ServiceIdentification:on(function(t,e){return pn({},Bx,t,e)}),ServiceProvider:on(function(t,e){return pn({},Yx,t,e)}),OperationsMetadata:on(function(t,e){return pn({},Dx,t,e)})}),Ix=function(t){function e(){return t.call(this)||this}return Tx(e,t),e.prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null},e.prototype.readFromNode=function(t){return pn({},Lx,t,[])||null},e}(ix),Ox=un(Px,{DeliveryPoint:on(Cr),City:on(Cr),AdministrativeArea:on(Cr),PostalCode:on(Cr),Country:on(Cr),ElectronicMailAddress:on(Cr)}),Ax=un(Px,{Value:rn(function(t,e){return Cr(t)})}),Rx=un(Px,{AllowedValues:on(function(t,e){return pn({},Ax,t,e)})}),Mx=un(Px,{Phone:on(function(t,e){return pn({},jx,t,e)}),Address:on(function(t,e){return pn({},Ox,t,e)})}),Fx=un(Px,{HTTP:on(function(t,e){return pn({},kx,t,e)})}),kx=un(Px,{Get:rn(function(t,e){var i=Bo(t);if(i)return pn({href:i},Gx,t,e)}),Post:void 0}),Nx=un(Px,{DCP:on(function(t,e){return pn({},Fx,t,e)})}),Dx=un(Px,{Operation:function(t,e){var i=t.getAttribute("name"),n=pn({},Nx,t,e);n&&(e[e.length-1][i]=n)}}),jx=un(Px,{Voice:on(Cr),Facsimile:on(Cr)}),Gx=un(Px,{Constraint:rn(function(t,e){var i=t.getAttribute("name");if(i)return pn({name:i},Rx,t,e)})}),zx=un(Px,{IndividualName:on(Cr),PositionName:on(Cr),ContactInfo:on(function(t,e){return pn({},Mx,t,e)})}),Bx=un(Px,{Abstract:on(Cr),AccessConstraints:on(Cr),Fees:on(Cr),Title:on(Cr),ServiceTypeVersion:on(Cr),ServiceType:on(Cr)}),Yx=un(Px,{ProviderName:on(Cr),ProviderSite:on(Bo),ServiceContact:on(function(t,e){return pn({},zx,t,e)})}),Xx=Ix,Wx=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ux=[null,"http://www.opengis.net/wmts/1.0"],Vx=[null,"http://www.opengis.net/ows/1.1"],Hx=un(Ux,{Contents:on(function(t,e){return pn({},Zx,t,e)})}),qx=function(t){function e(){var e=t.call(this)||this;return e.owsParser_=new Xx,e}return Wx(e,t),e.prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null},e.prototype.readFromNode=function(t){var e=t.getAttribute("version");e&&(e=e.trim());var i=this.owsParser_.readFromNode(t);return i?(i.version=e,(i=pn(i,Hx,t,[]))||null):null},e}(ix),Zx=un(Ux,{Layer:rn(function(t,e){return pn({},Kx,t,e)}),TileMatrixSet:rn(function(t,e){return pn({},nb,t,e)})}),Kx=un(Ux,{Style:rn(function(t,e){var i=pn({},Jx,t,e);if(i){var n="true"===t.getAttribute("isDefault");return i.isDefault=n,i}}),Format:rn(Cr),TileMatrixSetLink:rn(function(t,e){return pn({},$x,t,e)}),Dimension:rn(function(t,e){return pn({},eb,t,e)}),ResourceURL:rn(function(t,e){var i=t.getAttribute("format"),n=t.getAttribute("template"),r=t.getAttribute("resourceType"),o={};return i&&(o.format=i),n&&(o.template=n),r&&(o.resourceType=r),o})},un(Vx,{Title:on(Cr),Abstract:on(Cr),WGS84BoundingBox:on(function(t,e){var i=pn([],ib,t,e);if(2==i.length)return C(i)}),Identifier:on(Cr)})),Jx=un(Ux,{LegendURL:rn(function(t,e){var i={};return i.format=t.getAttribute("format"),i.href=Bo(t),i})},un(Vx,{Title:on(Cr),Identifier:on(Cr)})),$x=un(Ux,{TileMatrixSet:on(Cr),TileMatrixSetLimits:on(function(t,e){return pn([],Qx,t,e)})}),Qx=un(Ux,{TileMatrixLimits:en(function(t,e){return pn({},tb,t,e)})}),tb=un(Ux,{TileMatrix:on(Cr),MinTileRow:on(wr),MaxTileRow:on(wr),MinTileCol:on(wr),MaxTileCol:on(wr)}),eb=un(Ux,{Default:on(Cr),Value:rn(Cr)},un(Vx,{Identifier:on(Cr)})),ib=un(Vx,{LowerCorner:en(Vo),UpperCorner:en(Vo)}),nb=un(Ux,{WellKnownScaleSet:on(Cr),TileMatrix:rn(function(t,e){return pn({},rb,t,e)})},un(Vx,{SupportedCRS:on(Cr),Identifier:on(Cr)})),rb=un(Ux,{TopLeftCorner:on(Vo),ScaleDenominator:on(xr),TileWidth:on(wr),TileHeight:on(wr),MatrixWidth:on(wr),MatrixHeight:on(wr)},un(Vx,{Identifier:on(Cr)})),ob=qx,ab=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),sb=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],lb=function(t){function e(e){var i=this,n=e||{};(i=t.call(this,{element:document.createElement("div"),target:n.target})||this).cssClassName_=void 0!==n.className?n.className:"ol-full-screen";var r=void 0!==n.label?n.label:"\u2922";i.labelNode_="string"==typeof r?document.createTextNode(r):r;var o=void 0!==n.labelActive?n.labelActive:"\xd7";i.labelActiveNode_="string"==typeof o?document.createTextNode(o):o,i.button_=document.createElement("button");var a=n.tipLabel?n.tipLabel:"Toggle full-screen";i.setClassName_(i.button_,qo()),i.button_.setAttribute("type","button"),i.button_.title=a,i.button_.appendChild(i.labelNode_),i.button_.addEventListener(pa,i.handleClick_.bind(i),!1);var s=i.cssClassName_+" ol-unselectable ol-control "+(Ho()?"":"ol-unsupported"),l=i.element;return l.className=s,l.appendChild(i.button_),i.keys_=void 0!==n.keys&&n.keys,i.source_=n.source,i}return ab(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),this.handleFullScreen_()},e.prototype.handleFullScreen_=function(){if(Ho()){var t=this.getMap();if(t)if(qo())document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();else{var e=void 0;e=this.source_?"string"==typeof this.source_?document.getElementById(this.source_):this.source_:t.getTargetElement(),this.keys_?function(t){t.webkitRequestFullscreen?t.webkitRequestFullscreen():Zo(t)}(e):Zo(e)}}},e.prototype.handleFullScreenChange_=function(){var t=this.getMap();qo()?(this.setClassName_(this.button_,!0),ti(this.labelActiveNode_,this.labelNode_),this.dispatchEvent("enterfullscreen")):(this.setClassName_(this.button_,!1),ti(this.labelNode_,this.labelActiveNode_),this.dispatchEvent("leavefullscreen")),t&&t.updateSize()},e.prototype.setClassName_=function(t,e){var i=this.cssClassName_+"-true",n=this.cssClassName_+"-false",r=e?i:n;t.classList.remove(i),t.classList.remove(n),t.classList.add(r)},e.prototype.setMap=function(e){if(t.prototype.setMap.call(this,e),e)for(var i=0,n=sb.length;i<n;++i)this.listenerKeys.push(s(document,sb[i],this.handleFullScreenChange_,this))},e}(Ol),hb=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ub=function(t){function e(e){var i=this,n=e||{},r=document.createElement("div");return r.className=void 0!==n.className?n.className:"ol-mouse-position",(i=t.call(this,{element:r,render:n.render||function(t){var e=t.frameState;e?this.mapProjection_!=e.viewState.projection&&(this.mapProjection_=e.viewState.projection,this.transform_=null):this.mapProjection_=null},target:n.target})||this).addEventListener(w("projection"),i.handleProjectionChanged_),n.coordinateFormat&&i.setCoordinateFormat(n.coordinateFormat),n.projection&&i.setProjection(n.projection),i.undefinedHTML_=void 0!==n.undefinedHTML?n.undefinedHTML:"&#160;",i.renderOnMouseOut_=!!i.undefinedHTML_,i.renderedHTML_=r.innerHTML,i.mapProjection_=null,i.transform_=null,i}return hb(e,t),e.prototype.handleProjectionChanged_=function(){this.transform_=null},e.prototype.getCoordinateFormat=function(){return this.get("coordinateFormat")},e.prototype.getProjection=function(){return this.get("projection")},e.prototype.handleMouseMove=function(t){var e=this.getMap();this.updateHTML_(e.getEventPixel(t))},e.prototype.handleMouseOut=function(t){this.updateHTML_(null)},e.prototype.setMap=function(e){if(t.prototype.setMap.call(this,e),e){var i=e.getViewport();this.listenerKeys.push(s(i,qs,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(s(i,"pointerout",this.handleMouseOut,this))}},e.prototype.setCoordinateFormat=function(t){this.set("coordinateFormat",t)},e.prototype.setProjection=function(t){this.set("projection",bt(t))},e.prototype.updateHTML_=function(t){var e=this.undefinedHTML_;if(t&&this.mapProjection_){if(!this.transform_){var i=this.getProjection();this.transform_=i?Lt(this.mapProjection_,i):_t}var n=this.getMap().getCoordinateFromPixelInternal(t);if(n){var r=Rt();r&&(this.transform_=Lt(this.mapProjection_,r)),this.transform_(n,n);var o=this.getCoordinateFormat();e=o?o(n):n.toString()}}this.renderedHTML_&&e===this.renderedHTML_||(this.element.innerHTML=e,this.renderedHTML_=e)},e}(Ol),cb=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),pb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return cb(e,t),e.prototype.createRenderer=function(){return new pu(this)},e}(Ll),db=function(t){function e(e){var i=this,n=e||{};(i=t.call(this,{element:document.createElement("div"),render:n.render||function(t){this.validateExtent_(),this.updateBox_()},target:n.target})||this).boundHandleRotationChanged_=i.handleRotationChanged_.bind(i),i.collapsed_=void 0===n.collapsed||n.collapsed,i.collapsible_=void 0===n.collapsible||n.collapsible,i.collapsible_||(i.collapsed_=!1),i.rotateWithView_=void 0!==n.rotateWithView&&n.rotateWithView,i.viewExtent_=void 0;var r=void 0!==n.className?n.className:"ol-overviewmap",o=void 0!==n.tipLabel?n.tipLabel:"Overview map",a=void 0!==n.collapseLabel?n.collapseLabel:"\xab";"string"==typeof a?(i.collapseLabel_=document.createElement("span"),i.collapseLabel_.textContent=a):i.collapseLabel_=a;var s=void 0!==n.label?n.label:"\xbb";"string"==typeof s?(i.label_=document.createElement("span"),i.label_.textContent=s):i.label_=s;var l=i.collapsible_&&!i.collapsed_?i.collapseLabel_:i.label_,h=document.createElement("button");h.setAttribute("type","button"),h.title=o,h.appendChild(l),h.addEventListener(pa,i.handleClick_.bind(i),!1),i.ovmapDiv_=document.createElement("div"),i.ovmapDiv_.className="ol-overviewmap-map",i.view_=n.view,i.ovmap_=new pb({view:n.view});var u=i.ovmap_;n.layers&&n.layers.forEach(function(t){u.addLayer(t)});var c=document.createElement("div");c.className="ol-overviewmap-box",c.style.boxSizing="border-box",i.boxOverlay_=new Su({position:[0,0],positioning:gu,element:c}),i.ovmap_.addOverlay(i.boxOverlay_);var p=i.element;p.className=r+" ol-unselectable ol-control"+(i.collapsed_&&i.collapsible_?" ol-collapsed":"")+(i.collapsible_?"":" ol-uncollapsible"),p.appendChild(i.ovmapDiv_),p.appendChild(h);var d=i,f=i.boxOverlay_,g=function(t){var e,i={clientX:(e=t).clientX,clientY:e.clientY},n=u.getEventCoordinateInternal(i);f.setPosition(n)},v=function(t){var e=u.getEventCoordinateInternal(t);d.getMap().getView().setCenterInternal(e),window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",v)};return i.boxOverlay_.getElement().addEventListener("mousedown",function(){window.addEventListener("mousemove",g),window.addEventListener("mouseup",v)}),i}return cb(e,t),e.prototype.setMap=function(e){var i=this.getMap();if(e!==i){if(i){var n=i.getView();n&&this.unbindView_(n),this.ovmap_.setTarget(null)}if(t.prototype.setMap.call(this,e),e){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(s(e,ia,this.handleMapPropertyChange_,this));var r=e.getView();r&&(this.bindView_(r),r.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_()))}}},e.prototype.handleMapPropertyChange_=function(t){if(t.key===il){var e=t.oldValue;e&&this.unbindView_(e);var i=this.getMap().getView();this.bindView_(i)}},e.prototype.bindView_=function(t){if(!this.view_){var e=new cl({projection:t.getProjection()});this.ovmap_.setView(e)}t.addEventListener(w("rotation"),this.boundHandleRotationChanged_),this.handleRotationChanged_()},e.prototype.unbindView_=function(t){t.removeEventListener(w("rotation"),this.boundHandleRotationChanged_)},e.prototype.handleRotationChanged_=function(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())},e.prototype.validateExtent_=function(){var t=this.getMap(),e=this.ovmap_;if(t.isRendered()&&e.isRendered()){var i=t.getSize(),n=t.getView().calculateExtentInternal(i);if(!this.viewExtent_||!N(n,this.viewExtent_)){this.viewExtent_=n;var r=e.getSize(),o=e.getView().calculateExtentInternal(r),a=e.getPixelFromCoordinateInternal(q(n)),s=e.getPixelFromCoordinateInternal(X(n)),l=Math.abs(a[0]-s[0]),h=Math.abs(a[1]-s[1]),u=r[0],c=r[1];l<.1*u||h<.1*c||l>.75*u||h>.75*c?this.resetExtent_():I(o,n)||this.recenter_()}}},e.prototype.resetExtent_=function(){var t=this.getMap(),e=this.ovmap_,i=t.getSize(),n=t.getView().calculateExtentInternal(i),r=e.getView(),o=Math.log(7.5)/Math.LN2;Q(n,1/(.1*Math.pow(2,o/2))),r.fitInternal(Se(n))},e.prototype.recenter_=function(){var t=this.getMap(),e=this.ovmap_,i=t.getView();e.getView().setCenterInternal(i.getCenterInternal())},e.prototype.updateBox_=function(){var t=this.getMap(),e=this.ovmap_;if(t.isRendered()&&e.isRendered()){var i=t.getSize(),n=t.getView(),r=e.getView(),o=this.rotateWithView_?0:-n.getRotation(),a=this.boxOverlay_,s=this.boxOverlay_.getElement(),l=n.getCenterInternal(),h=n.getResolution(),u=r.getResolution(),c=i[0]*h/u,p=i[1]*h/u;a.setPosition(l),s&&(s.style.width=c+"px",s.style.height=p+"px",s.style.transform="rotate("+o+"rad)")}},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},e.prototype.handleToggle_=function(){this.element.classList.toggle("ol-collapsed"),this.collapsed_?ti(this.collapseLabel_,this.label_):ti(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;var t=this.ovmap_;if(!this.collapsed_){if(t.isRendered())return this.viewExtent_=void 0,void t.render();t.updateSize(),this.resetExtent_(),l(t,"postrender",function(t){this.updateBox_()},this)}},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e.prototype.getRotateWithView=function(){return this.rotateWithView_},e.prototype.setRotateWithView=function(t){this.rotateWithView_!==t&&(this.rotateWithView_=t,0!==this.getMap().getView().getRotation()&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))},e.prototype.getOverviewMap=function(){return this.ovmap_},e}(Ol),fb=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),gb="metric",vb=[1,2,5],yb=function(t){function e(e){var i=this,n=e||{},r=void 0!==n.className?n.className:n.bar?"ol-scale-bar":"ol-scale-line";return(i=t.call(this,{element:document.createElement("div"),render:n.render||function(t){var e=t.frameState;this.viewState_=e?e.viewState:null,this.updateElement_()},target:n.target})||this).innerElement_=document.createElement("div"),i.innerElement_.className=r+"-inner",i.element.className=r+" ol-unselectable",i.element.appendChild(i.innerElement_),i.viewState_=null,i.minWidth_=void 0!==n.minWidth?n.minWidth:64,i.renderedVisible_=!1,i.renderedWidth_=void 0,i.renderedHTML_="",i.addEventListener(w("units"),i.handleUnitsChanged_),i.setUnits(n.units||gb),i.scaleBar_=n.bar||!1,i.scaleBarSteps_=n.steps||4,i.scaleBarText_=n.text||!1,i}return fb(e,t),e.prototype.getUnits=function(){return this.get("units")},e.prototype.handleUnitsChanged_=function(){this.updateElement_()},e.prototype.setUnits=function(t){this.set("units",t)},e.prototype.updateElement_=function(){var t=this.viewState_;if(t){var e=t.center,i=t.projection,n=this.getUnits(),r=wt(i,t.resolution,e,"degrees"==n?Ka.DEGREES:Ka.METERS),o=this.minWidth_*r,a="";if("degrees"==n){var s=Va[Ka.DEGREES];(o*=s)<s/60?(a="\u2033",r*=3600):o<s?(a="\u2032",r*=60):a="\xb0"}else"imperial"==n?o<.9144?(a="in",r/=.0254):o<1609.344?(a="ft",r/=.3048):(a="mi",r/=1609.344):"nautical"==n?(r/=1852,a="nm"):n==gb?o<.001?(a="\u03bcm",r*=1e6):o<1?(a="mm",r*=1e3):o<1e3?a="m":(a="km",r/=1e3):"us"==n?o<.9144?(a="in",r*=39.37):o<1609.344?(a="ft",r/=.30480061):(a="mi",r/=1609.3472):S(!1,33);for(var l,h,u,c,p=3*Math.floor(Math.log(this.minWidth_*r)/Math.log(10));;){u=Math.floor(p/3);var d=Math.pow(10,u);if(l=vb[(p%3+3)%3]*d,h=Math.round(l/r),isNaN(h))return this.element.style.display="none",void(this.renderedVisible_=!1);if(h>=this.minWidth_)break;++p}c=this.scaleBar_?this.createScaleBar(h,l,a):l.toFixed(u<0?-u:0)+" "+a,this.renderedHTML_!=c&&(this.innerElement_.innerHTML=c,this.renderedHTML_=c),this.renderedWidth_!=h&&(this.innerElement_.style.width=h+"px",this.renderedWidth_=h),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.createScaleBar=function(t,e,i){for(var n="1 : "+Math.round(this.getScaleForResolution()).toLocaleString(),r=[],o=t/this.scaleBarSteps_,a="#ffffff",s=0;s<this.scaleBarSteps_;s++)0===s&&r.push(this.createMarker("absolute",s)),r.push('<div><div class="ol-scale-singlebar" style="width: '+o+"px;background-color: "+a+';"></div>'+this.createMarker("relative",s)+(s%2==0||2===this.scaleBarSteps_?this.createStepText(s,t,!1,e,i):"")+"</div>"),s===this.scaleBarSteps_-1&&r.push(this.createStepText(s+1,t,!0,e,i)),a="#ffffff"===a?"#000000":"#ffffff";return'<div style="display: flex;">'+(this.scaleBarText_?'<div class="ol-scale-text" style="width: '+t+'px;">'+n+"</div>":"")+r.join("")+"</div>"},e.prototype.createMarker=function(t,e){return'<div class="ol-scale-step-marker" style="position: '+t+";top: "+("absolute"===t?3:-10)+'px;"></div>'},e.prototype.createStepText=function(t,e,i,n,r){var o=(0===t?0:Math.round(n/this.scaleBarSteps_*t*100)/100)+(0===t?"":" "+r);return'<div class="ol-scale-step-text" style="margin-left: '+(0===t?-3:e/this.scaleBarSteps_*-1)+"px;text-align: "+(0===t?"left":"center")+"; min-width: "+(0===t?0:e/this.scaleBarSteps_*2)+"px;left: "+(i?e+"px":"unset")+';">'+o+"</div>"},e.prototype.getScaleForResolution=function(){var t=this.getMap().getView().getResolution(),e=this.viewState_.projection.getMetersPerUnit();return parseFloat(t.toString())*e*39.37*(25.4/.28)},e}(Ol),mb=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),_b=0,xb=function(t){function e(e){var i=this,n=e||{};(i=t.call(this,{element:document.createElement("div"),render:n.render||function(t){if(t.frameState){this.sliderInitialized_||this.initSlider_();var e=t.frameState.viewState.resolution;this.currentResolution_=e,this.setThumbPosition_(e)}}})||this).dragListenerKeys_=[],i.currentResolution_=void 0,i.direction_=_b,i.heightLimit_=0,i.widthLimit_=0,i.thumbSize_=null,i.sliderInitialized_=!1,i.duration_=void 0!==n.duration?n.duration:200;var r=void 0!==n.className?n.className:"ol-zoomslider",o=document.createElement("button");o.setAttribute("type","button"),o.className=r+"-thumb ol-unselectable";var a=i.element;return a.className=r+" ol-unselectable ol-control",a.appendChild(o),a.addEventListener(Zs,i.handleDraggerStart_.bind(i),!1),a.addEventListener(qs,i.handleDraggerDrag_.bind(i),!1),a.addEventListener(Ks,i.handleDraggerEnd_.bind(i),!1),a.addEventListener(pa,i.handleContainerClick_.bind(i),!1),o.addEventListener(pa,b,!1),i}return mb(e,t),e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),e&&e.render()},e.prototype.initSlider_=function(){var t=this.element,e=t.offsetWidth,i=t.offsetHeight,n=t.firstElementChild,r=getComputedStyle(n),o=n.offsetWidth+parseFloat(r.marginRight)+parseFloat(r.marginLeft),a=n.offsetHeight+parseFloat(r.marginTop)+parseFloat(r.marginBottom);this.thumbSize_=[o,a],e>i?(this.direction_=1,this.widthLimit_=e-o):(this.direction_=_b,this.heightLimit_=i-a),this.sliderInitialized_=!0},e.prototype.handleContainerClick_=function(t){var e=this.getMap().getView(),i=this.getRelativePosition_(t.offsetX-this.thumbSize_[0]/2,t.offsetY-this.thumbSize_[1]/2),n=this.getResolutionForPosition_(i),r=e.getConstrainedZoom(e.getZoomForResolution(n));e.animateInternal({zoom:r,duration:this.duration_,easing:qe})},e.prototype.handleDraggerStart_=function(t){if(!this.dragging_&&t.target===this.element.firstElementChild){var e=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.startX_=t.clientX-parseFloat(e.style.left),this.startY_=t.clientY-parseFloat(e.style.top),this.dragging_=!0,0===this.dragListenerKeys_.length){var i=this.handleDraggerDrag_,n=this.handleDraggerEnd_;this.dragListenerKeys_.push(s(document,qs,i,this),s(document,Ks,n,this))}}},e.prototype.handleDraggerDrag_=function(t){if(this.dragging_){var e=this.getRelativePosition_(t.clientX-this.startX_,t.clientY-this.startY_);this.currentResolution_=this.getResolutionForPosition_(e),this.getMap().getView().setResolution(this.currentResolution_)}},e.prototype.handleDraggerEnd_=function(t){this.dragging_&&(this.getMap().getView().endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(h),this.dragListenerKeys_.length=0)},e.prototype.setThumbPosition_=function(t){var e=this.getPositionForResolution_(t),i=this.element.firstElementChild;1==this.direction_?i.style.left=this.widthLimit_*e+"px":i.style.top=this.heightLimit_*e+"px"},e.prototype.getRelativePosition_=function(t,e){return ot(1===this.direction_?t/this.widthLimit_:e/this.heightLimit_,0,1)},e.prototype.getResolutionForPosition_=function(t){return this.getMap().getView().getResolutionForValueFunction()(1-t)},e.prototype.getPositionForResolution_=function(t){return ot(1-this.getMap().getView().getValueForResolutionFunction()(t),0,1)},e}(Ol),bb=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),wb=function(t){function e(e){var i=this,n=e||{};(i=t.call(this,{element:document.createElement("div"),target:n.target})||this).extent=n.extent?n.extent:null;var r=void 0!==n.className?n.className:"ol-zoom-extent",o=void 0!==n.label?n.label:"E",a=void 0!==n.tipLabel?n.tipLabel:"Fit to extent",s=document.createElement("button");s.setAttribute("type","button"),s.title=a,s.appendChild("string"==typeof o?document.createTextNode(o):o),s.addEventListener(pa,i.handleClick_.bind(i),!1);var l=i.element;return l.className=r+" ol-unselectable ol-control",l.appendChild(s),i}return bb(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),this.handleZoomToExtent()},e.prototype.handleZoomToExtent=function(){var t=this.getMap().getView(),e=this.extent?this.extent:t.getProjection().getExtent();t.fitInternal(Se(e))},e}(Ol),Sb={array:{},color:{},colorlike:{},control:{},coordinate:{},easing:{},events:{}};Sb.events.condition={},Sb.extent={},Sb.featureloader={},Sb.format={},Sb.format.filter={},Sb.geom={},Sb.has={},Sb.interaction={},Sb.layer={},Sb.loadingstrategy={},Sb.proj={},Sb.proj.Units={},Sb.proj.proj4={},Sb.render={},Sb.render.canvas={},Sb.renderer={},Sb.renderer.canvas={},Sb.renderer.webgl={},Sb.size={},Sb.source={},Sb.sphere={},Sb.style={},Sb.style.IconImageCache={},Sb.tilegrid={},Sb.transform={},Sb.util={},Sb.webgl={},Sb.xml={},Sb.Collection=Ta,Sb.Feature=La,Sb.Geolocation=As,Sb.Kinetic=Rs,Sb.Map=fu,Sb.Object=Sa,Sb.Observable=_a,Sb.Observable.unByKey=function(t){if(Array.isArray(t))for(var e=0,i=t.length;e<i;++e)h(t[e]);else h(t)},Sb.Overlay=Su,Sb.PluggableMap=Ll,Sb.View=cl,Sb.array.stableSort=function(t,e){var i,n=t.length,r=Array(t.length);for(i=0;i<n;i++)r[i]={index:i,value:t[i]};for(r.sort(function(t,i){return e(t.value,i.value)||t.index-i.index}),i=0;i<t.length;i++)t[i]=r[i].value},Sb.color.asArray=yi,Sb.color.asString=vi,Sb.colorlike.asColorLike=bi,Sb.control.Attribution=Dl,Sb.control.Control=Ol,Sb.control.FullScreen=lb,Sb.control.MousePosition=ub,Sb.control.OverviewMap=db,Sb.control.Rotate=Gl,Sb.control.ScaleLine=yb,Sb.control.Zoom=Bl,Sb.control.ZoomSlider=xb,Sb.control.ZoomToExtent=wb,Sb.control.defaults=si,Sb.coordinate.add=ke,Sb.coordinate.createStringXY=function(t){return function(e){return Ue(e,t)}},Sb.coordinate.format=je,Sb.coordinate.rotate=ze,Sb.coordinate.toStringHDMS=function(t,e){return t?De("NS",t[1],e)+" "+De("EW",t[0],e):""},Sb.coordinate.toStringXY=Ue,Sb.easing.easeIn=He,Sb.easing.easeOut=qe,Sb.easing.inAndOut=Ze,Sb.easing.linear=Ke,Sb.easing.upAndDown=function(t){return t<.5?Ze(2*t):1-Ze(2*(t-.5))},Sb.events.condition.altKeyOnly=Hl,Sb.events.condition.altShiftKeysOnly=ql,Sb.events.condition.always=Kl,Sb.events.condition.click=function(t){return t.type==Us.CLICK},Sb.events.condition.doubleClick=function(t){return t.type==Us.DBLCLICK},Sb.events.condition.focus=Zl,Sb.events.condition.mouseOnly=nh,Sb.events.condition.never=$l,Sb.events.condition.noModifierKeys=th,Sb.events.condition.penOnly=function(t){var e=t.pointerEvent;return S(void 0!==e,56),"pen"===e.pointerType},Sb.events.condition.platformModifierKeyOnly=function(t){var e=t.originalEvent;return!e.altKey&&(zs?e.metaKey:e.ctrlKey)&&!e.shiftKey},Sb.events.condition.pointerMove=function(t){return"pointermove"==t.type},Sb.events.condition.primaryAction=rh,Sb.events.condition.shiftKeyOnly=eh,Sb.events.condition.singleClick=Ql,Sb.events.condition.targetNotEditable=ih,Sb.events.condition.touchOnly=function(t){var e=t.pointerEvent;return S(void 0!==e,56),"touch"===e.pointerType},Sb.extent.applyTransform=tt,Sb.extent.boundingExtent=C,Sb.extent.buffer=E,Sb.extent.containsCoordinate=L,Sb.extent.containsExtent=I,Sb.extent.containsXY=O,Sb.extent.createEmpty=function(){return[1/0,1/0,-1/0,-1/0]},Sb.extent.equals=N,Sb.extent.extend=D,Sb.extent.getArea=B,Sb.extent.getBottomLeft=Y,Sb.extent.getBottomRight=X,Sb.extent.getCenter=W,Sb.extent.getHeight=V,Sb.extent.getIntersection=H,Sb.extent.getSize=function(t){return[t[2]-t[0],t[3]-t[1]]},Sb.extent.getTopLeft=q,Sb.extent.getTopRight=Z,Sb.extent.getWidth=K,Sb.extent.intersects=J,Sb.extent.isEmpty=$,Sb.featureloader.setWithCredentials=function(t){Lu=t},Sb.featureloader.xhr=Ni,Sb.format.EsriJSON=Hg,Sb.format.Feature=Bg,Sb.format.GML=ov,Sb.format.GML2=hv,Sb.format.GML3=rv,Sb.format.GML32=wv,Sb.format.GPX=qv,Sb.format.GeoJSON=Kv,Sb.format.IGC=oy,Sb.format.IIIFInfo=xp,Sb.format.KML=Cm,Sb.format.MVT=Am,Sb.format.OSMXML=jm,Sb.format.Polyline=zm,Sb.format.Polyline.decodeDeltas=xo,Sb.format.Polyline.decodeFloats=wo,Sb.format.Polyline.encodeDeltas=_o,Sb.format.Polyline.encodeFloats=bo,Sb.format.TopoJSON=Xm,Sb.format.WFS=H_,Sb.format.WFS.writeFilter=function(t){var e=Ki(z_,"Filter");return Oo(e,t,[]),e},Sb.format.WKT=ex,Sb.format.WMSCapabilities=Sx,Sb.format.WMSGetFeatureInfo=Ex,Sb.format.WMTSCapabilities=ob,Sb.format.filter.Bbox=Km,Sb.format.filter.Contains=t_,Sb.format.filter.During=r_,Sb.format.filter.EqualTo=l_,Sb.format.filter.GreaterThan=u_,Sb.format.filter.GreaterThanOrEqualTo=p_,Sb.format.filter.Intersects=f_,Sb.format.filter.IsBetween=v_,Sb.format.filter.IsLike=m_,Sb.format.filter.IsNull=x_,Sb.format.filter.LessThan=w_,Sb.format.filter.LessThanOrEqualTo=C_,Sb.format.filter.Not=T_,Sb.format.filter.NotEqualTo=L_,Sb.format.filter.Or=O_,Sb.format.filter.Within=R_,Sb.format.filter.and=To,Sb.format.filter.bbox=Po,Sb.format.filter.between=function(t,e,i){return new v_(t,e,i)},Sb.format.filter.contains=function(t,e,i){return new t_(t,e,i)},Sb.format.filter.during=function(t,e,i){return new r_(t,e,i)},Sb.format.filter.equalTo=function(t,e,i){return new l_(t,e,i)},Sb.format.filter.greaterThan=function(t,e){return new u_(t,e)},Sb.format.filter.greaterThanOrEqualTo=function(t,e){return new p_(t,e)},Sb.format.filter.intersects=function(t,e,i){return new f_(t,e,i)},Sb.format.filter.isNull=function(t){return new x_(t)},Sb.format.filter.lessThan=function(t,e){return new w_(t,e)},Sb.format.filter.lessThanOrEqualTo=function(t,e){return new C_(t,e)},Sb.format.filter.like=function(t,e,i,n,r,o){return new m_(t,e,i,n,r,o)},Sb.format.filter.not=function(t){return new T_(t)},Sb.format.filter.notEqualTo=function(t,e,i){return new L_(t,e,i)},Sb.format.filter.or=function(t){var e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(O_,e))},Sb.format.filter.within=function(t,e,i){return new R_(t,e,i)},Sb.geom.Circle=og,Sb.geom.Geometry=ys,Sb.geom.GeometryCollection=zg,Sb.geom.LineString=zf,Sb.geom.LinearRing=bs,Sb.geom.MultiLineString=sg,Sb.geom.MultiPoint=hg,Sb.geom.MultiPolygon=cg,Sb.geom.Point=Ss,Sb.geom.Polygon=Ts,Sb.geom.Polygon.circular=we,Sb.geom.Polygon.fromCircle=Ce,Sb.geom.Polygon.fromExtent=Se,Sb.geom.SimpleGeometry=_s,Sb.has.DEVICE_PIXEL_RATIO=Bs,Sb.interaction.DoubleClickZoom=Vl,Sb.interaction.DragAndDrop=eg,Sb.interaction.DragBox=gh,Sb.interaction.DragPan=lh,Sb.interaction.DragRotate=uh,Sb.interaction.DragRotateAndZoom=ng,Sb.interaction.DragZoom=yh,Sb.interaction.Draw=mg,Sb.interaction.Draw.createBox=function(){return function(t,e,i){var n=C(t.map(function(t){return Ft(t,i)})),r=[[Y(n),X(n),Z(n),q(n),Y(n)]],o=e;o?o.setCoordinates(r):o=new Ts(r);var a=Rt();return a&&o.transform(i,a),o}},Sb.interaction.Draw.createRegularPolygon=function(t,e){return function(i,n,r){var o=Ft(i[0],r),a=Ft(i[1],r),s=Math.sqrt(Ye(o,a)),l=n||Ce(new og(o),t),h=e;if(!e){var u=a[0]-o[0],c=a[1]-o[1];h=Math.atan(c/u)-(u<0?Math.PI:0)}Ee(l,o,s,h);var p=Rt();return p&&l.transform(r,p),l}},Sb.interaction.Extent=wg,Sb.interaction.Interaction=Wl,Sb.interaction.KeyboardPan=Sh,Sb.interaction.KeyboardZoom=Eh,Sb.interaction.Modify=Pg,Sb.interaction.MouseWheelZoom=Ph,Sb.interaction.PinchRotate=Ih,Sb.interaction.PinchZoom=Ah,Sb.interaction.Pointer=ah,Sb.interaction.Select=Rg,Sb.interaction.Snap=kg,Sb.interaction.Translate=jg,Sb.interaction.defaults=gi,Sb.layer.Base=bl,Sb.layer.BaseImage=Vp,Sb.layer.BaseTile=nd,Sb.layer.BaseVector=Hd,Sb.layer.Graticule=Wf,Sb.layer.Group=Tl,Sb.layer.Heatmap=qf,Sb.layer.Image=td,Sb.layer.Layer=kl,Sb.layer.Tile=sd,Sb.layer.Vector=jf,Sb.layer.VectorImage=Kf,Sb.layer.VectorTile=$f,Sb.loadingstrategy.all=Di,Sb.loadingstrategy.bbox=function(t,e){return[t]},Sb.loadingstrategy.tile=function(t){return function(e,i){var n=t.getZForResolution(i),r=t.getTileRangeForExtentAndZ(e,n),o=[],a=[n,0,0];for(a[1]=r.minX;a[1]<=r.maxX;++a[1])for(a[2]=r.minY;a[2]<=r.maxY;++a[2])o.push(t.getTileCoordExtent(a));return o}},Sb.proj.Projection=Ja,Sb.proj.Units.METERS_PER_UNIT=Va,Sb.proj.addCoordinateTransforms=Tt,Sb.proj.addEquivalentProjections=St,Sb.proj.addProjection=xt,Sb.proj.equivalent=Pt,Sb.proj.fromLonLat=function(t,e){return Ot(t,"EPSG:4326",void 0!==e?e:"EPSG:3857")},Sb.proj.get=bt,Sb.proj.getPointResolution=wt,Sb.proj.getTransform=It,Sb.proj.proj4.register=function(t){var e,i,n=Object.keys(t.defs),r=n.length;for(e=0;e<r;++e){var o=n[e];if(!bt(o)){var a=t.defs(o);xt(new Ja({code:o,axisOrientation:a.axis,metersPerUnit:a.to_meter,units:a.units}))}}for(e=0;e<r;++e){var s=n[e],l=bt(s);for(i=0;i<r;++i){var h=n[i],u=bt(h);if(!yt(s,h))if(t.defs[s]===t.defs[h])St([l,u]);else{var c=t(s,h);Tt(l,u,c.forward,c.inverse)}}}},Sb.proj.toLonLat=function(t,e){var i=Ot(t,void 0!==e?e:"EPSG:3857","EPSG:4326"),n=i[0];return(n<-180||n>180)&&(i[0]=ut(n+180,360)-180),i},Sb.proj.transform=Ot,Sb.proj.transformExtent=At,Sb.render.VectorContext=jh,Sb.render.canvas.labelCache=Yh,Sb.render.getRenderPixel=function(t,e){var i=e.slice(0);return zt(t.inversePixelTransform.slice(),i),i},Sb.render.getVectorContext=Ri,Sb.render.toContext=function(t,e){var i=t.canvas,n=e||{},r=n.pixelRatio||Bs,o=n.size;o&&(i.width=o[0]*r,i.height=o[1]*r,i.style.width=o[0]+"px",i.style.height=o[1]+"px");var a=[0,0,i.width,i.height],s=Bt([1,0,0,1,0,0],r,r);return new Qh(t,r,a,s,0)},Sb.renderer.Composite=pu,Sb.renderer.canvas.ImageLayer=$p,Sb.renderer.canvas.TileLayer=od,Sb.renderer.canvas.VectorImageLayer=If,Sb.renderer.canvas.VectorLayer=Pf,Sb.renderer.canvas.VectorTileLayer=Nf,Sb.renderer.webgl.PointsLayer=Zd,Sb.size.toSize=oi,Sb.source.BingMaps=Wc,Sb.source.CartoDB=qc,Sb.source.Cluster=ap,Sb.source.IIIF=wp,Sb.source.Image=Pp,Sb.source.ImageArcGISRest=Ip,Sb.source.ImageCanvas=Mp,Sb.source.ImageMapGuide=kp,Sb.source.ImageStatic=Dp,Sb.source.ImageWMS=zp,Sb.source.OSM=Xp,Sb.source.OSM.ATTRIBUTION=Yp,Sb.source.Raster=dd,Sb.source.Source=Fc,Sb.source.Stamen=md,Sb.source.Tile=jc,Sb.source.TileArcGISRest=xd,Sb.source.TileDebug=Sd,Sb.source.TileImage=Yc,Sb.source.TileJSON=Ed,Sb.source.TileWMS=Pd,Sb.source.UTFGrid=Od,Sb.source.Vector=rp,Sb.source.VectorTile=Dd,Sb.source.WMTS=zd,Sb.source.WMTS.optionsFromCapabilities=function(t,e){var i=g(t.Contents.Layer,function(t,i,n){return t.Identifier==e.layer});if(null===i)return null;var n,r=t.Contents.TileMatrixSet;(n=i.TileMatrixSetLink.length>1?y(i.TileMatrixSetLink,"projection"in e?function(t,i,n){var o=g(r,function(e){return e.Identifier==t.TileMatrixSet}).SupportedCRS,a=bt(o.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||bt(o),s=bt(e.projection);return a&&s?Pt(a,s):o==e.projection}:function(t,i,n){return t.TileMatrixSet==e.matrixSet}):0)<0&&(n=0);var o=i.TileMatrixSetLink[n].TileMatrixSet,a=i.TileMatrixSetLink[n].TileMatrixSetLimits,s=i.Format[0];"format"in e&&(s=e.format),(n=y(i.Style,function(t,i,n){return"style"in e?t.Title==e.style:t.isDefault}))<0&&(n=0);var l=i.Style[n].Identifier,h={};"Dimension"in i&&i.Dimension.forEach(function(t,e,i){var n=t.Default;void 0===n&&(n=t.Value[0]),h[t.Identifier]=n});var u,p=g(t.Contents.TileMatrixSet,function(t,e,i){return t.Identifier==o}),d=p.SupportedCRS;if(d&&(u=bt(d.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||bt(d)),"projection"in e){var f=bt(e.projection);f&&(u&&!Pt(f,u)||(u=f))}var v=p.TileMatrix[0],m=28e-5*v.ScaleDenominator,_=u===bt("EPSG:4326")?[v.TopLeftCorner[1],v.TopLeftCorner[0]]:v.TopLeftCorner,x=[_[0],_[1]-v.TileHeight*m*v.MatrixHeight,_[0]+v.TileWidth*m*v.MatrixWidth,_[1]];null===u.getExtent()&&u.setExtent(x);var b=xn(p,x,a),w=[],S=e.requestEncoding;if(S=void 0!==S?S:"","OperationsMetadata"in t&&"GetTile"in t.OperationsMetadata)for(var C=t.OperationsMetadata.GetTile.DCP.HTTP.Get,E=0,T=C.length;E<T;++E)if(C[E].Constraint){var P=g(C[E].Constraint,function(t){return"GetEncoding"==t.name}).AllowedValues.Value;if(""===S&&(S=P[0]),S!==jd)break;c(P,jd)&&w.push(C[E].href)}else C[E].href&&(S=jd,w.push(C[E].href));return 0===w.length&&(S="REST",i.ResourceURL.forEach(function(t){"tile"===t.resourceType&&(s=t.format,w.push(t.template))})),{urls:w,layer:e.layer,matrixSet:o,format:s,projection:u,requestEncoding:S,tileGrid:b,style:l,dimensions:h,wrapX:!1,crossOrigin:e.crossOrigin}},Sb.source.XYZ=Vc,Sb.source.Zoomify=cp,Sb.sphere.getArea=function t(e,i){var n=i||{},r=n.radius||6371008.8,o=n.projection||"EPSG:3857",a=e.getType();a!==Xa.GEOMETRY_COLLECTION&&(e=e.clone().transform(o,"EPSG:4326"));var s,l,h,u,c,p,d=0;switch(a){case Xa.POINT:case Xa.MULTI_POINT:case Xa.LINE_STRING:case Xa.MULTI_LINE_STRING:case Xa.LINEAR_RING:break;case Xa.POLYGON:for(s=e.getCoordinates(),d=Math.abs(ft(s[0],r)),h=1,u=s.length;h<u;++h)d-=Math.abs(ft(s[h],r));break;case Xa.MULTI_POLYGON:for(h=0,u=(s=e.getCoordinates()).length;h<u;++h)for(l=s[h],d+=Math.abs(ft(l[0],r)),c=1,p=l.length;c<p;++c)d-=Math.abs(ft(l[c],r));break;case Xa.GEOMETRY_COLLECTION:var f=e.getGeometries();for(h=0,u=f.length;h<u;++h)d+=t(f[h],i);break;default:throw new Error("Unsupported geometry type: "+a)}return d},Sb.sphere.getDistance=pt,Sb.sphere.getLength=function t(e,i){var n=i||{},r=n.radius||6371008.8,o=n.projection||"EPSG:3857",a=e.getType();a!==Xa.GEOMETRY_COLLECTION&&(e=e.clone().transform(o,"EPSG:4326"));var s,l,h,u,c,p,d=0;switch(a){case Xa.POINT:case Xa.MULTI_POINT:break;case Xa.LINE_STRING:case Xa.LINEAR_RING:d=dt(s=e.getCoordinates(),r);break;case Xa.MULTI_LINE_STRING:case Xa.POLYGON:for(h=0,u=(s=e.getCoordinates()).length;h<u;++h)d+=dt(s[h],r);break;case Xa.MULTI_POLYGON:for(h=0,u=(s=e.getCoordinates()).length;h<u;++h)for(c=0,p=(l=s[h]).length;c<p;++c)d+=dt(l[c],r);break;case Xa.GEOMETRY_COLLECTION:var f=e.getGeometries();for(h=0,u=f.length;h<u;++h)d+=t(f[h],i);break;default:throw new Error("Unsupported geometry type: "+a)}return d},Sb.style.Circle=ic,Sb.style.Fill=nc,Sb.style.Icon=vc,Sb.style.IconImageCache.shared=Dh,Sb.style.Image=$u,Sb.style.RegularShape=tc,Sb.style.Stroke=yc,Sb.style.Style=xc,Sb.style.Text=wc,Sb.tilegrid.TileGrid=Ru,Sb.tilegrid.WMTS=Ju,Sb.tilegrid.WMTS.createFromCapabilitiesMatrixSet=xn,Sb.tilegrid.createXYZ=Ui,Sb.transform.composeCssTransform=function(t,e,i,n,r,o,a){return Wt(Yt([1,0,0,1,0,0],t,e,i,n,r,o,a))},Sb.util.getUid=r,Sb.webgl.ARRAY_BUFFER=34962,Sb.webgl.Buffer=Gu,Sb.webgl.DYNAMIC_DRAW=35048,Sb.webgl.ELEMENT_ARRAY_BUFFER=34963,Sb.webgl.Helper=Vu,Sb.webgl.Helper.computeAttributesStride=mn,Sb.webgl.PostProcessingPass=Yu,Sb.webgl.RenderTarget=qu,Sb.webgl.STATIC_DRAW=35044,Sb.webgl.STREAM_DRAW=35040,Sb.xml.getAllTextContent=Ji,Sb.xml.parse=Qi,Sb.xml.registerDocument=function(t){Du=t},Sb.xml.registerXMLSerializer=function(t){Nu=t},e.default=Sb}]).default}),console.log("mapa"),new ol.Map({target:"map",layers:[new ol.layer.Tile({source:new ol.source.OSM})],view:new ol.View({center:ol.proj.fromLonLat([37.41,8.82]),zoom:4})})}!function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){"use strict";function i(t,e,i){var n,r,o=(i=i||$).createElement("script");if(o.text=t,e)for(n in pt)(r=e[n]||e.getAttribute&&e.getAttribute(n))&&o.setAttribute(n,r);i.head.appendChild(o).parentNode.removeChild(o)}function n(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?rt[ot.call(t)]||"object":typeof t}function r(t){var e=!!t&&"length"in t&&t.length,i=n(t);return!ut(t)&&!ct(t)&&("array"===i||0===e||"number"==typeof e&&0<e&&e-1 in t)}function o(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}function a(t,e,i){return ut(e)?dt.grep(t,function(t,n){return!!e.call(t,n,t)!==i}):e.nodeType?dt.grep(t,function(t){return t===e!==i}):"string"!=typeof e?dt.grep(t,function(t){return-1<nt.call(e,t)!==i}):dt.filter(e,t,i)}function s(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function l(t){return t}function h(t){throw t}function u(t,e,i,n){var r;try{t&&ut(r=t.promise)?r.call(t).done(e).fail(i):t&&ut(r=t.then)?r.call(t,e,i):e.apply(void 0,[t].slice(n))}catch(t){i.apply(void 0,[t])}}function c(){$.removeEventListener("DOMContentLoaded",c),t.removeEventListener("load",c),dt.ready()}function p(t,e){return e.toUpperCase()}function d(t){return t.replace(Lt,"ms-").replace(It,p)}function f(){this.expando=dt.expando+f.uid++}function g(t,e,i){var n,r;if(void 0===i&&1===t.nodeType)if(n="data-"+e.replace(Ft,"-$&").toLowerCase(),"string"==typeof(i=t.getAttribute(n))){try{i="true"===(r=i)||"false"!==r&&("null"===r?null:r===+r+""?+r:Mt.test(r)?JSON.parse(r):r)}catch(t){}Rt.set(t,e,i)}else i=void 0;return i}function v(t,e,i,n){var r,o,a=20,s=n?function(){return n.cur()}:function(){return dt.css(t,e,"")},l=s(),h=i&&i[3]||(dt.cssNumber[e]?"":"px"),u=t.nodeType&&(dt.cssNumber[e]||"px"!==h&&+l)&&Nt.exec(dt.css(t,e));if(u&&u[3]!==h){for(l/=2,h=h||u[3],u=+l||1;a--;)dt.style(t,e,u+h),(1-o)*(1-(o=s()/l||.5))<=0&&(a=0),u/=o;dt.style(t,e,(u*=2)+h),i=i||[]}return i&&(u=+u||+l||0,r=i[1]?u+(i[1]+1)*i[2]:+i[2],n&&(n.unit=h,n.start=u,n.end=r)),r}function y(t,e){for(var i,n,r,o,a,s,l,h=[],u=0,c=t.length;u<c;u++)(n=t[u]).style&&(i=n.style.display,e?("none"===i&&(h[u]=At.get(n,"display")||null,h[u]||(n.style.display="")),""===n.style.display&&Bt(n)&&(h[u]=(l=a=o=void 0,a=(r=n).ownerDocument,s=r.nodeName,(l=Xt[s])||(o=a.body.appendChild(a.createElement(s)),l=dt.css(o,"display"),o.parentNode.removeChild(o),"none"===l&&(l="block"),Xt[s]=l)))):"none"!==i&&(h[u]="none",At.set(n,"display",i)));for(u=0;u<c;u++)null!=h[u]&&(t[u].style.display=h[u]);return t}function m(t,e){var i;return i="undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e||"*"):"undefined"!=typeof t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&o(t,e)?dt.merge([t],i):i}function _(t,e){for(var i=0,n=t.length;i<n;i++)At.set(t[i],"globalEval",!e||At.get(e[i],"globalEval"))}function x(t,e,i,r,o){for(var a,s,l,h,u,c,p=e.createDocumentFragment(),d=[],f=0,g=t.length;f<g;f++)if((a=t[f])||0===a)if("object"===n(a))dt.merge(d,a.nodeType?[a]:a);else if(Kt.test(a)){for(s=s||p.appendChild(e.createElement("div")),l=(Ut.exec(a)||["",""])[1].toLowerCase(),s.innerHTML=(h=Ht[l]||Ht._default)[1]+dt.htmlPrefilter(a)+h[2],c=h[0];c--;)s=s.lastChild;dt.merge(d,s.childNodes),(s=p.firstChild).textContent=""}else d.push(e.createTextNode(a));for(p.textContent="",f=0;a=d[f++];)if(r&&-1<dt.inArray(a,r))o&&o.push(a);else if(u=Gt(a),s=m(p.appendChild(a),"script"),u&&_(s),i)for(c=0;a=s[c++];)Vt.test(a.type||"")&&i.push(a);return p}function b(){return!0}function w(){return!1}function S(t,e){return t===function(){try{return $.activeElement}catch(t){}}()==("focus"===e)}function C(t,e,i,n,r,o){var a,s;if("object"==typeof e){for(s in"string"!=typeof i&&(n=n||i,i=void 0),e)C(t,s,i,n,e[s],o);return t}if(null==n&&null==r?(r=i,n=i=void 0):null==r&&("string"==typeof i?(r=n,n=void 0):(r=n,n=i,i=void 0)),!1===r)r=w;else if(!r)return t;return 1===o&&(a=r,(r=function(t){return dt().off(t),a.apply(this,arguments)}).guid=a.guid||(a.guid=dt.guid++)),t.each(function(){dt.event.add(this,e,r,n,i)})}function E(t,e,i){i?(At.set(t,e,!1),dt.event.add(t,e,{namespace:!1,handler:function(t){var n,r,o=At.get(this,e);if(1&t.isTrigger&&this[e]){if(o.length)(dt.event.special[e]||{}).delegateType&&t.stopPropagation();else if(o=tt.call(arguments),At.set(this,e,o),n=i(this,e),this[e](),o!==(r=At.get(this,e))||n?At.set(this,e,!1):r={},o!==r)return t.stopImmediatePropagation(),t.preventDefault(),r.value}else o.length&&(At.set(this,e,{value:dt.event.trigger(dt.extend(o[0],dt.Event.prototype),o.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===At.get(t,e)&&dt.event.add(t,e,b)}function T(t,e){return o(t,"table")&&o(11!==e.nodeType?e:e.firstChild,"tr")&&dt(t).children("tbody")[0]||t}function P(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function L(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function I(t,e){var i,n,r,o,a,s,l,h;if(1===e.nodeType){if(At.hasData(t)&&(o=At.access(t),a=At.set(e,o),h=o.events))for(r in delete a.handle,a.events={},h)for(i=0,n=h[r].length;i<n;i++)dt.event.add(e,r,h[r][i]);Rt.hasData(t)&&(s=Rt.access(t),l=dt.extend({},s),Rt.set(e,l))}}function O(t,e,n,r){e=et.apply([],e);var o,a,s,l,h,u,c=0,p=t.length,d=p-1,f=e[0],g=ut(f);if(g||1<p&&"string"==typeof f&&!ht.checkClone&&ie.test(f))return t.each(function(i){var o=t.eq(i);g&&(e[0]=f.call(this,i,o.html())),O(o,e,n,r)});if(p&&(a=(o=x(e,t[0].ownerDocument,!1,t,r)).firstChild,1===o.childNodes.length&&(o=a),a||r)){for(l=(s=dt.map(m(o,"script"),P)).length;c<p;c++)h=o,c!==d&&(h=dt.clone(h,!0,!0),l&&dt.merge(s,m(h,"script"))),n.call(t[c],h,c);if(l)for(u=s[s.length-1].ownerDocument,dt.map(s,L),c=0;c<l;c++)h=s[c],Vt.test(h.type||"")&&!At.access(h,"globalEval")&&dt.contains(u,h)&&(h.src&&"module"!==(h.type||"").toLowerCase()?dt._evalUrl&&!h.noModule&&dt._evalUrl(h.src,{nonce:h.nonce||h.getAttribute("nonce")}):i(h.textContent.replace(ne,""),h,u))}return t}function A(t,e,i){for(var n,r=e?dt.filter(e,t):t,o=0;null!=(n=r[o]);o++)i||1!==n.nodeType||dt.cleanData(m(n)),n.parentNode&&(i&&Gt(n)&&_(m(n,"script")),n.parentNode.removeChild(n));return t}function R(t,e,i){var n,r,o,a,s=t.style;return(i=i||oe(t))&&(""!==(a=i.getPropertyValue(e)||i[e])||Gt(t)||(a=dt.style(t,e)),!ht.pixelBoxStyles()&&re.test(a)&&ae.test(e)&&(n=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=i.width,s.width=n,s.minWidth=r,s.maxWidth=o)),void 0!==a?a+"":a}function M(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}function F(t){return dt.cssProps[t]||he[t]||(t in le?t:he[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),i=se.length;i--;)if((t=se[i]+e)in le)return t}(t)||t)}function k(t,e,i){var n=Nt.exec(e);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):e}function N(t,e,i,n,r,o){var a="width"===e?1:0,s=0,l=0;if(i===(n?"border":"content"))return 0;for(;a<4;a+=2)"margin"===i&&(l+=dt.css(t,i+Dt[a],!0,r)),n?("content"===i&&(l-=dt.css(t,"padding"+Dt[a],!0,r)),"margin"!==i&&(l-=dt.css(t,"border"+Dt[a]+"Width",!0,r))):(l+=dt.css(t,"padding"+Dt[a],!0,r),"padding"!==i?l+=dt.css(t,"border"+Dt[a]+"Width",!0,r):s+=dt.css(t,"border"+Dt[a]+"Width",!0,r));return!n&&0<=o&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-l-s-.5))||0),l}function D(t,e,i){var n=oe(t),r=(!ht.boxSizingReliable()||i)&&"border-box"===dt.css(t,"boxSizing",!1,n),o=r,a=R(t,e,n),s="offset"+e[0].toUpperCase()+e.slice(1);if(re.test(a)){if(!i)return a;a="auto"}return(!ht.boxSizingReliable()&&r||"auto"===a||!parseFloat(a)&&"inline"===dt.css(t,"display",!1,n))&&t.getClientRects().length&&(r="border-box"===dt.css(t,"boxSizing",!1,n),(o=s in t)&&(a=t[s])),(a=parseFloat(a)||0)+N(t,e,i||(r?"border":"content"),o,n,a)+"px"}function j(t,e,i,n,r){return new j.prototype.init(t,e,i,n,r)}function G(){ge&&(!1===$.hidden&&t.requestAnimationFrame?t.requestAnimationFrame(G):t.setTimeout(G,dt.fx.interval),dt.fx.tick())}function z(){return t.setTimeout(function(){fe=void 0}),fe=Date.now()}function B(t,e){var i,n=0,r={height:t};for(e=e?1:0;n<4;n+=2-e)r["margin"+(i=Dt[n])]=r["padding"+i]=t;return e&&(r.opacity=r.width=t),r}function Y(t,e,i){for(var n,r=(X.tweeners[e]||[]).concat(X.tweeners["*"]),o=0,a=r.length;o<a;o++)if(n=r[o].call(i,e,t))return n}function X(t,e,i){var n,r,o=0,a=X.prefilters.length,s=dt.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var e=fe||z(),i=Math.max(0,h.startTime+h.duration-e),n=1-(i/h.duration||0),o=0,a=h.tweens.length;o<a;o++)h.tweens[o].run(n);return s.notifyWith(t,[h,n,i]),n<1&&a?i:(a||s.notifyWith(t,[h,1,0]),s.resolveWith(t,[h]),!1)},h=s.promise({elem:t,props:dt.extend({},e),opts:dt.extend(!0,{specialEasing:{},easing:dt.easing._default},i),originalProperties:e,originalOptions:i,startTime:fe||z(),duration:i.duration,tweens:[],createTween:function(e,i){var n=dt.Tween(t,h.opts,e,i,h.opts.specialEasing[e]||h.opts.easing);return h.tweens.push(n),n},stop:function(e){var i=0,n=e?h.tweens.length:0;if(r)return this;for(r=!0;i<n;i++)h.tweens[i].run(1);return e?(s.notifyWith(t,[h,1,0]),s.resolveWith(t,[h,e])):s.rejectWith(t,[h,e]),this}}),u=h.props;for(function(t,e){var i,n,r,o,a;for(i in t)if(r=e[n=d(i)],o=t[i],Array.isArray(o)&&(r=o[1],o=t[i]=o[0]),i!==n&&(t[n]=o,delete t[i]),(a=dt.cssHooks[n])&&"expand"in a)for(i in o=a.expand(o),delete t[n],o)i in t||(t[i]=o[i],e[i]=r);else e[n]=r}(u,h.opts.specialEasing);o<a;o++)if(n=X.prefilters[o].call(h,t,u,h.opts))return ut(n.stop)&&(dt._queueHooks(h.elem,h.opts.queue).stop=n.stop.bind(n)),n;return dt.map(u,Y,h),ut(h.opts.start)&&h.opts.start.call(t,h),h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always),dt.fx.timer(dt.extend(l,{elem:t,anim:h,queue:h.opts.queue})),h}function W(t){return(t.match(Ct)||[]).join(" ")}function U(t){return t.getAttribute&&t.getAttribute("class")||""}function V(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(Ct)||[]}function H(t,e,i,r){var o;if(Array.isArray(e))dt.each(e,function(e,n){i||Oe.test(t)?r(t,n):H(t+"["+("object"==typeof n&&null!=n?e:"")+"]",n,i,r)});else if(i||"object"!==n(e))r(t,e);else for(o in e)H(t+"["+o+"]",e[o],i,r)}function q(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,r=0,o=e.toLowerCase().match(Ct)||[];if(ut(i))for(;n=o[r++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function Z(t,e,i,n){function r(s){var l;return o[s]=!0,dt.each(t[s]||[],function(t,s){var h=s(e,i,n);return"string"!=typeof h||a||o[h]?a?!(l=h):void 0:(e.dataTypes.unshift(h),r(h),!1)}),l}var o={},a=t===Be;return r(e.dataTypes[0])||!o["*"]&&r("*")}function K(t,e){var i,n,r=dt.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((r[i]?t:n||(n={}))[i]=e[i]);return n&&dt.extend(!0,t,n),t}var J=[],$=t.document,Q=Object.getPrototypeOf,tt=J.slice,et=J.concat,it=J.push,nt=J.indexOf,rt={},ot=rt.toString,at=rt.hasOwnProperty,st=at.toString,lt=st.call(Object),ht={},ut=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},ct=function(t){return null!=t&&t===t.window},pt={type:!0,src:!0,nonce:!0,noModule:!0},dt=function(t,e){return new dt.fn.init(t,e)},ft=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;dt.fn=dt.prototype={jquery:"3.4.1",constructor:dt,length:0,toArray:function(){return tt.call(this)},get:function(t){return null==t?tt.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=dt.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return dt.each(this,t)},map:function(t){return this.pushStack(dt.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack(tt.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(0<=i&&i<e?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:it,sort:J.sort,splice:J.splice},dt.extend=dt.fn.extend=function(){var t,e,i,n,r,o,a=arguments[0]||{},s=1,l=arguments.length,h=!1;for("boolean"==typeof a&&(h=a,a=arguments[s]||{},s++),"object"==typeof a||ut(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(t=arguments[s]))for(e in t)n=t[e],"__proto__"!==e&&a!==n&&(h&&n&&(dt.isPlainObject(n)||(r=Array.isArray(n)))?(i=a[e],o=r&&!Array.isArray(i)?[]:r||dt.isPlainObject(i)?i:{},r=!1,a[e]=dt.extend(h,o,n)):void 0!==n&&(a[e]=n));return a},dt.extend({expando:"jQuery"+("3.4.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,i;return!(!t||"[object Object]"!==ot.call(t)||(e=Q(t))&&("function"!=typeof(i=at.call(e,"constructor")&&e.constructor)||st.call(i)!==lt))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e){i(t,{nonce:e&&e.nonce})},each:function(t,e){var i,n=0;if(r(t))for(i=t.length;n<i&&!1!==e.call(t[n],n,t[n]);n++);else for(n in t)if(!1===e.call(t[n],n,t[n]))break;return t},trim:function(t){return null==t?"":(t+"").replace(ft,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(r(Object(t))?dt.merge(i,"string"==typeof t?[t]:t):it.call(i,t)),i},inArray:function(t,e,i){return null==e?-1:nt.call(e,t,i)},merge:function(t,e){for(var i=+e.length,n=0,r=t.length;n<i;n++)t[r++]=e[n];return t.length=r,t},grep:function(t,e,i){for(var n=[],r=0,o=t.length,a=!i;r<o;r++)!e(t[r],r)!==a&&n.push(t[r]);return n},map:function(t,e,i){var n,o,a=0,s=[];if(r(t))for(n=t.length;a<n;a++)null!=(o=e(t[a],a,i))&&s.push(o);else for(a in t)null!=(o=e(t[a],a,i))&&s.push(o);return et.apply([],s)},guid:1,support:ht}),"function"==typeof Symbol&&(dt.fn[Symbol.iterator]=J[Symbol.iterator]),dt.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){rt["[object "+e+"]"]=e.toLowerCase()});var gt=function(t){function e(t,e,i,n){var r,o,a,s,l,h,u,p=e&&e.ownerDocument,f=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==f&&9!==f&&11!==f)return i;if(!n&&((e?e.ownerDocument||e:G)!==A&&O(e),e=e||A,M)){if(11!==f&&(l=yt.exec(t)))if(r=l[1]){if(9===f){if(!(a=e.getElementById(r)))return i;if(a.id===r)return i.push(a),i}else if(p&&(a=p.getElementById(r))&&D(e,a)&&a.id===r)return i.push(a),i}else{if(l[2])return J.apply(i,e.getElementsByTagName(t)),i;if((r=l[3])&&x.getElementsByClassName&&e.getElementsByClassName)return J.apply(i,e.getElementsByClassName(r)),i}if(x.qsa&&!U[t+" "]&&(!F||!F.test(t))&&(1!==f||"object"!==e.nodeName.toLowerCase())){if(u=t,p=e,1===f&&ht.test(t)){for((s=e.getAttribute("id"))?s=s.replace(bt,wt):e.setAttribute("id",s=j),o=(h=C(t)).length;o--;)h[o]="#"+s+" "+d(h[o]);u=h.join(","),p=mt.test(t)&&c(e.parentNode)||e}try{return J.apply(i,p.querySelectorAll(u)),i}catch(e){U(t,!0)}finally{s===j&&e.removeAttribute("id")}}}return T(t.replace(at,"$1"),e,i,n)}function i(){var t=[];return function e(i,n){return t.push(i+" ")>b.cacheLength&&delete e[t.shift()],e[i+" "]=n}}function n(t){return t[j]=!0,t}function r(t){var e=A.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var i=t.split("|"),n=i.length;n--;)b.attrHandle[i[n]]=e}function a(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function s(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function l(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function h(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&Ct(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function u(t){return n(function(e){return e=+e,n(function(i,n){for(var r,o=t([],i.length,e),a=o.length;a--;)i[r=o[a]]&&(i[r]=!(n[r]=i[r]))})})}function c(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function p(){}function d(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e].value;return n}function f(t,e,i){var n=e.dir,r=e.next,o=r||n,a=i&&"parentNode"===o,s=B++;return e.first?function(e,i,r){for(;e=e[n];)if(1===e.nodeType||a)return t(e,i,r);return!1}:function(e,i,l){var h,u,c,p=[z,s];if(l){for(;e=e[n];)if((1===e.nodeType||a)&&t(e,i,l))return!0}else for(;e=e[n];)if(1===e.nodeType||a)if(u=(c=e[j]||(e[j]={}))[e.uniqueID]||(c[e.uniqueID]={}),r&&r===e.nodeName.toLowerCase())e=e[n]||e;else{if((h=u[o])&&h[0]===z&&h[1]===s)return p[2]=h[2];if((u[o]=p)[2]=t(e,i,l))return!0}return!1}}function g(t){return 1<t.length?function(e,i,n){for(var r=t.length;r--;)if(!t[r](e,i,n))return!1;return!0}:t[0]}function v(t,e,i,n,r){for(var o,a=[],s=0,l=t.length,h=null!=e;s<l;s++)(o=t[s])&&(i&&!i(o,n,r)||(a.push(o),h&&e.push(s)));return a}function y(t,i,r,o,a,s){return o&&!o[j]&&(o=y(o)),a&&!a[j]&&(a=y(a,s)),n(function(n,s,l,h){var u,c,p,d=[],f=[],g=s.length,y=n||function(t,i,n){for(var r=0,o=i.length;r<o;r++)e(t,i[r],n);return n}(i||"*",l.nodeType?[l]:l,[]),m=!t||!n&&i?y:v(y,d,t,l,h),_=r?a||(n?t:g||o)?[]:s:m;if(r&&r(m,_,l,h),o)for(u=v(_,f),o(u,[],l,h),c=u.length;c--;)(p=u[c])&&(_[f[c]]=!(m[f[c]]=p));if(n){if(a||t){if(a){for(u=[],c=_.length;c--;)(p=_[c])&&u.push(m[c]=p);a(null,_=[],u,h)}for(c=_.length;c--;)(p=_[c])&&-1<(u=a?Q(n,p):d[c])&&(n[u]=!(s[u]=p))}}else _=v(_===s?_.splice(g,_.length):_),a?a(null,s,_,h):J.apply(s,_)})}function m(t){for(var e,i,n,r=t.length,o=b.relative[t[0].type],a=o||b.relative[" "],s=o?1:0,l=f(function(t){return t===e},a,!0),h=f(function(t){return-1<Q(e,t)},a,!0),u=[function(t,i,n){var r=!o&&(n||i!==P)||((e=i).nodeType?l(t,i,n):h(t,i,n));return e=null,r}];s<r;s++)if(i=b.relative[t[s].type])u=[f(g(u),i)];else{if((i=b.filter[t[s].type].apply(null,t[s].matches))[j]){for(n=++s;n<r&&!b.relative[t[n].type];n++);return y(1<s&&g(u),1<s&&d(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(at,"$1"),i,s<n&&m(t.slice(s,n)),n<r&&m(t=t.slice(n)),n<r&&d(t))}u.push(i)}return g(u)}var _,x,b,w,S,C,E,T,P,L,I,O,A,R,M,F,k,N,D,j="sizzle"+1*new Date,G=t.document,z=0,B=0,Y=i(),X=i(),W=i(),U=i(),V=function(t,e){return t===e&&(I=!0),0},H={}.hasOwnProperty,q=[],Z=q.pop,K=q.push,J=q.push,$=q.slice,Q=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},tt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",et="[\\x20\\t\\r\\n\\f]",it="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",nt="\\["+et+"*("+it+")(?:"+et+"*([*^$|!~]?=)"+et+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+it+"))|)"+et+"*\\]",rt=":("+it+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+nt+")*)|.*)\\)|)",ot=new RegExp(et+"+","g"),at=new RegExp("^"+et+"+|((?:^|[^\\\\])(?:\\\\.)*)"+et+"+$","g"),st=new RegExp("^"+et+"*,"+et+"*"),lt=new RegExp("^"+et+"*([>+~]|"+et+")"+et+"*"),ht=new RegExp(et+"|>"),ut=new RegExp(rt),ct=new RegExp("^"+it+"$"),pt={ID:new RegExp("^#("+it+")"),CLASS:new RegExp("^\\.("+it+")"),TAG:new RegExp("^("+it+"|[*])"),ATTR:new RegExp("^"+nt),PSEUDO:new RegExp("^"+rt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+et+"*(even|odd|(([+-]|)(\\d*)n|)"+et+"*(?:([+-]|)"+et+"*(\\d+)|))"+et+"*\\)|)","i"),bool:new RegExp("^(?:"+tt+")$","i"),needsContext:new RegExp("^"+et+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+et+"*((?:-\\d)?\\d*)"+et+"*\\)|)(?=[^-]|$)","i")},dt=/HTML$/i,ft=/^(?:input|select|textarea|button)$/i,gt=/^h\d$/i,vt=/^[^{]+\{\s*\[native \w/,yt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,mt=/[+~]/,_t=new RegExp("\\\\([\\da-f]{1,6}"+et+"?|("+et+")|.)","ig"),xt=function(t,e,i){var n="0x"+e-65536;return n!=n||i?e:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},bt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,wt=function(t,e){return e?"\0"===t?"\ufffd":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},St=function(){O()},Ct=f(function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{J.apply(q=$.call(G.childNodes),G.childNodes)}catch(_){J={apply:q.length?function(t,e){K.apply(t,$.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}for(_ in x=e.support={},S=e.isXML=function(t){var e=(t.ownerDocument||t).documentElement;return!dt.test(t.namespaceURI||e&&e.nodeName||"HTML")},O=e.setDocument=function(t){var e,i,n=t?t.ownerDocument||t:G;return n!==A&&9===n.nodeType&&n.documentElement&&(R=(A=n).documentElement,M=!S(A),G!==A&&(i=A.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",St,!1):i.attachEvent&&i.attachEvent("onunload",St)),x.attributes=r(function(t){return t.className="i",!t.getAttribute("className")}),x.getElementsByTagName=r(function(t){return t.appendChild(A.createComment("")),!t.getElementsByTagName("*").length}),x.getElementsByClassName=vt.test(A.getElementsByClassName),x.getById=r(function(t){return R.appendChild(t).id=j,!A.getElementsByName||!A.getElementsByName(j).length}),x.getById?(b.filter.ID=function(t){var e=t.replace(_t,xt);return function(t){return t.getAttribute("id")===e}},b.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&M){var i=e.getElementById(t);return i?[i]:[]}}):(b.filter.ID=function(t){var e=t.replace(_t,xt);return function(t){var i="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return i&&i.value===e}},b.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&M){var i,n,r,o=e.getElementById(t);if(o){if((i=o.getAttributeNode("id"))&&i.value===t)return[o];for(r=e.getElementsByName(t),n=0;o=r[n++];)if((i=o.getAttributeNode("id"))&&i.value===t)return[o]}return[]}}),b.find.TAG=x.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):x.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,n=[],r=0,o=e.getElementsByTagName(t);if("*"===t){for(;i=o[r++];)1===i.nodeType&&n.push(i);return n}return o},b.find.CLASS=x.getElementsByClassName&&function(t,e){if("undefined"!=typeof e.getElementsByClassName&&M)return e.getElementsByClassName(t)},k=[],F=[],(x.qsa=vt.test(A.querySelectorAll))&&(r(function(t){R.appendChild(t).innerHTML="<a id='"+j+"'></a><select id='"+j+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&F.push("[*^$]="+et+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||F.push("\\["+et+"*(?:value|"+tt+")"),t.querySelectorAll("[id~="+j+"-]").length||F.push("~="),t.querySelectorAll(":checked").length||F.push(":checked"),t.querySelectorAll("a#"+j+"+*").length||F.push(".#.+[+~]")}),r(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=A.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&F.push("name"+et+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&F.push(":enabled",":disabled"),R.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&F.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),F.push(",.*:")})),(x.matchesSelector=vt.test(N=R.matches||R.webkitMatchesSelector||R.mozMatchesSelector||R.oMatchesSelector||R.msMatchesSelector))&&r(function(t){x.disconnectedMatch=N.call(t,"*"),N.call(t,"[s!='']:x"),k.push("!=",rt)}),F=F.length&&new RegExp(F.join("|")),k=k.length&&new RegExp(k.join("|")),e=vt.test(R.compareDocumentPosition),D=e||vt.test(R.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},V=e?function(t,e){if(t===e)return I=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(1&(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!x.sortDetached&&e.compareDocumentPosition(t)===i?t===A||t.ownerDocument===G&&D(G,t)?-1:e===A||e.ownerDocument===G&&D(G,e)?1:L?Q(L,t)-Q(L,e):0:4&i?-1:1)}:function(t,e){if(t===e)return I=!0,0;var i,n=0,r=t.parentNode,o=e.parentNode,s=[t],l=[e];if(!r||!o)return t===A?-1:e===A?1:r?-1:o?1:L?Q(L,t)-Q(L,e):0;if(r===o)return a(t,e);for(i=t;i=i.parentNode;)s.unshift(i);for(i=e;i=i.parentNode;)l.unshift(i);for(;s[n]===l[n];)n++;return n?a(s[n],l[n]):s[n]===G?-1:l[n]===G?1:0}),A},e.matches=function(t,i){return e(t,null,null,i)},e.matchesSelector=function(t,i){if((t.ownerDocument||t)!==A&&O(t),x.matchesSelector&&M&&!U[i+" "]&&(!k||!k.test(i))&&(!F||!F.test(i)))try{var n=N.call(t,i);if(n||x.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){U(i,!0)}return 0<e(i,A,null,[t]).length},e.contains=function(t,e){return(t.ownerDocument||t)!==A&&O(t),D(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==A&&O(t);var i=b.attrHandle[e.toLowerCase()],n=i&&H.call(b.attrHandle,e.toLowerCase())?i(t,e,!M):void 0;return void 0!==n?n:x.attributes||!M?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},e.escape=function(t){return(t+"").replace(bt,wt)},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,i=[],n=0,r=0;if(I=!x.detectDuplicates,L=!x.sortStable&&t.slice(0),t.sort(V),I){for(;e=t[r++];)e===t[r]&&(n=i.push(r));for(;n--;)t.splice(i[n],1)}return L=null,t},w=e.getText=function(t){var e,i="",n=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=w(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[n++];)i+=w(e);return i},(b=e.selectors={cacheLength:50,createPseudo:n,match:pt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(_t,xt),t[3]=(t[3]||t[4]||t[5]||"").replace(_t,xt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return pt.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&ut.test(i)&&(e=C(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(_t,xt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=Y[t+" "];return e||(e=new RegExp("(^|"+et+")"+t+"("+et+"|$)"))&&Y(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,i,n){return function(r){var o=e.attr(r,t);return null==o?"!="===i:!i||(o+="","="===i?o===n:"!="===i?o!==n:"^="===i?n&&0===o.indexOf(n):"*="===i?n&&-1<o.indexOf(n):"$="===i?n&&o.slice(-n.length)===n:"~="===i?-1<(" "+o.replace(ot," ")+" ").indexOf(n):"|="===i&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,i,n,r){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===n&&0===r?function(t){return!!t.parentNode}:function(e,i,l){var h,u,c,p,d,f,g=o!==a?"nextSibling":"previousSibling",v=e.parentNode,y=s&&e.nodeName.toLowerCase(),m=!l&&!s,_=!1;if(v){if(o){for(;g;){for(p=e;p=p[g];)if(s?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;f=g="only"===t&&!f&&"nextSibling"}return!0}if(f=[a?v.firstChild:v.lastChild],a&&m){for(_=(d=(h=(u=(c=(p=v)[j]||(p[j]={}))[p.uniqueID]||(c[p.uniqueID]={}))[t]||[])[0]===z&&h[1])&&h[2],p=d&&v.childNodes[d];p=++d&&p&&p[g]||(_=d=0)||f.pop();)if(1===p.nodeType&&++_&&p===e){u[t]=[z,d,_];break}}else if(m&&(_=d=(h=(u=(c=(p=e)[j]||(p[j]={}))[p.uniqueID]||(c[p.uniqueID]={}))[t]||[])[0]===z&&h[1]),!1===_)for(;(p=++d&&p&&p[g]||(_=d=0)||f.pop())&&((s?p.nodeName.toLowerCase()!==y:1!==p.nodeType)||!++_||(m&&((u=(c=p[j]||(p[j]={}))[p.uniqueID]||(c[p.uniqueID]={}))[t]=[z,_]),p!==e)););return(_-=r)===n||_%n==0&&0<=_/n}}},PSEUDO:function(t,i){var r,o=b.pseudos[t]||b.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[j]?o(i):1<o.length?(r=[t,t,"",i],b.setFilters.hasOwnProperty(t.toLowerCase())?n(function(t,e){for(var n,r=o(t,i),a=r.length;a--;)t[n=Q(t,r[a])]=!(e[n]=r[a])}):function(t){return o(t,0,r)}):o}},pseudos:{not:n(function(t){var e=[],i=[],r=E(t.replace(at,"$1"));return r[j]?n(function(t,e,i,n){for(var o,a=r(t,null,n,[]),s=t.length;s--;)(o=a[s])&&(t[s]=!(e[s]=o))}):function(t,n,o){return e[0]=t,r(e,null,o,i),e[0]=null,!i.pop()}}),has:n(function(t){return function(i){return 0<e(t,i).length}}),contains:n(function(t){return t=t.replace(_t,xt),function(e){return-1<(e.textContent||w(e)).indexOf(t)}}),lang:n(function(t){return ct.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(_t,xt).toLowerCase(),function(e){var i;do{if(i=M?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(i=i.toLowerCase())===t||0===i.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===R},focus:function(t){return t===A.activeElement&&(!A.hasFocus||A.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:h(!1),disabled:h(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!b.pseudos.empty(t)},header:function(t){return gt.test(t.nodeName)},input:function(t){return ft.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:u(function(){return[0]}),last:u(function(t,e){return[e-1]}),eq:u(function(t,e,i){return[i<0?i+e:i]}),even:u(function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t}),odd:u(function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t}),lt:u(function(t,e,i){for(var n=i<0?i+e:e<i?e:i;0<=--n;)t.push(n);return t}),gt:u(function(t,e,i){for(var n=i<0?i+e:i;++n<e;)t.push(n);return t})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[_]=s(_);for(_ in{submit:!0,reset:!0})b.pseudos[_]=l(_);return p.prototype=b.filters=b.pseudos,b.setFilters=new p,C=e.tokenize=function(t,i){var n,r,o,a,s,l,h,u=X[t+" "];if(u)return i?0:u.slice(0);for(s=t,l=[],h=b.preFilter;s;){for(a in n&&!(r=st.exec(s))||(r&&(s=s.slice(r[0].length)||s),l.push(o=[])),n=!1,(r=lt.exec(s))&&(n=r.shift(),o.push({value:n,type:r[0].replace(at," ")}),s=s.slice(n.length)),b.filter)!(r=pt[a].exec(s))||h[a]&&!(r=h[a](r))||(n=r.shift(),o.push({value:n,type:a,matches:r}),s=s.slice(n.length));if(!n)break}return i?s.length:s?e.error(t):X(t,l).slice(0)},E=e.compile=function(t,i){var r,o,a,s,l,h,u=[],c=[],p=W[t+" "];if(!p){for(i||(i=C(t)),r=i.length;r--;)(p=m(i[r]))[j]?u.push(p):c.push(p);(p=W(t,(o=c,s=0<(a=u).length,l=0<o.length,h=function(t,i,n,r,h){var u,c,p,d=0,f="0",g=t&&[],y=[],m=P,_=t||l&&b.find.TAG("*",h),x=z+=null==m?1:Math.random()||.1,w=_.length;for(h&&(P=i===A||i||h);f!==w&&null!=(u=_[f]);f++){if(l&&u){for(c=0,i||u.ownerDocument===A||(O(u),n=!M);p=o[c++];)if(p(u,i||A,n)){r.push(u);break}h&&(z=x)}s&&((u=!p&&u)&&d--,t&&g.push(u))}if(d+=f,s&&f!==d){for(c=0;p=a[c++];)p(g,y,i,n);if(t){if(0<d)for(;f--;)g[f]||y[f]||(y[f]=Z.call(r));y=v(y)}J.apply(r,y),h&&!t&&0<y.length&&1<d+a.length&&e.uniqueSort(r)}return h&&(z=x,P=m),g},s?n(h):h))).selector=t}return p},T=e.select=function(t,e,i,n){var r,o,a,s,l,h="function"==typeof t&&t,u=!n&&C(t=h.selector||t);if(i=i||[],1===u.length){if(2<(o=u[0]=u[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===e.nodeType&&M&&b.relative[o[1].type]){if(!(e=(b.find.ID(a.matches[0].replace(_t,xt),e)||[])[0]))return i;h&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(r=pt.needsContext.test(t)?0:o.length;r--&&(a=o[r],!b.relative[s=a.type]);)if((l=b.find[s])&&(n=l(a.matches[0].replace(_t,xt),mt.test(o[0].type)&&c(e.parentNode)||e))){if(o.splice(r,1),!(t=n.length&&d(o)))return J.apply(i,n),i;break}}return(h||E(t,u))(n,e,!M,i,!e||mt.test(t)&&c(e.parentNode)||e),i},x.sortStable=j.split("").sort(V).join("")===j,x.detectDuplicates=!!I,O(),x.sortDetached=r(function(t){return 1&t.compareDocumentPosition(A.createElement("fieldset"))}),r(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,i){if(!i)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),x.attributes&&r(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,i){if(!i&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),r(function(t){return null==t.getAttribute("disabled")})||o(tt,function(t,e,i){var n;if(!i)return!0===t[e]?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),e}(t);dt.find=gt,dt.expr=gt.selectors,dt.expr[":"]=dt.expr.pseudos,dt.uniqueSort=dt.unique=gt.uniqueSort,dt.text=gt.getText,dt.isXMLDoc=gt.isXML,dt.contains=gt.contains,dt.escapeSelector=gt.escape;var vt=function(t,e,i){for(var n=[],r=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&dt(t).is(i))break;n.push(t)}return n},yt=function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i},mt=dt.expr.match.needsContext,_t=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;dt.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?dt.find.matchesSelector(n,t)?[n]:[]:dt.find.matches(t,dt.grep(e,function(t){return 1===t.nodeType}))},dt.fn.extend({find:function(t){var e,i,n=this.length,r=this;if("string"!=typeof t)return this.pushStack(dt(t).filter(function(){for(e=0;e<n;e++)if(dt.contains(r[e],this))return!0}));for(i=this.pushStack([]),e=0;e<n;e++)dt.find(t,r[e],i);return 1<n?dt.uniqueSort(i):i},filter:function(t){return this.pushStack(a(this,t||[],!1))},not:function(t){return this.pushStack(a(this,t||[],!0))},is:function(t){return!!a(this,"string"==typeof t&&mt.test(t)?dt(t):t||[],!1).length}});var xt,bt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(dt.fn.init=function(t,e,i){var n,r;if(!t)return this;if(i=i||xt,"string"==typeof t){if(!(n="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:bt.exec(t))||!n[1]&&e)return!e||e.jquery?(e||i).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof dt?e[0]:e,dt.merge(this,dt.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:$,!0)),_t.test(n[1])&&dt.isPlainObject(e))for(n in e)ut(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return(r=$.getElementById(n[2]))&&(this[0]=r,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):ut(t)?void 0!==i.ready?i.ready(t):t(dt):dt.makeArray(t,this)}).prototype=dt.fn,xt=dt($);var wt=/^(?:parents|prev(?:Until|All))/,St={children:!0,contents:!0,next:!0,prev:!0};dt.fn.extend({has:function(t){var e=dt(t,this),i=e.length;return this.filter(function(){for(var t=0;t<i;t++)if(dt.contains(this,e[t]))return!0})},closest:function(t,e){var i,n=0,r=this.length,o=[],a="string"!=typeof t&&dt(t);if(!mt.test(t))for(;n<r;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(a?-1<a.index(i):1===i.nodeType&&dt.find.matchesSelector(i,t))){o.push(i);break}return this.pushStack(1<o.length?dt.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?nt.call(dt(t),this[0]):nt.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(dt.uniqueSort(dt.merge(this.get(),dt(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),dt.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return vt(t,"parentNode")},parentsUntil:function(t,e,i){return vt(t,"parentNode",i)},next:function(t){return s(t,"nextSibling")},prev:function(t){return s(t,"previousSibling")},nextAll:function(t){return vt(t,"nextSibling")},prevAll:function(t){return vt(t,"previousSibling")},nextUntil:function(t,e,i){return vt(t,"nextSibling",i)},prevUntil:function(t,e,i){return vt(t,"previousSibling",i)},siblings:function(t){return yt((t.parentNode||{}).firstChild,t)},children:function(t){return yt(t.firstChild)},contents:function(t){return"undefined"!=typeof t.contentDocument?t.contentDocument:(o(t,"template")&&(t=t.content||t),dt.merge([],t.childNodes))}},function(t,e){dt.fn[t]=function(i,n){var r=dt.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(r=dt.filter(n,r)),1<this.length&&(St[t]||dt.uniqueSort(r),wt.test(t)&&r.reverse()),this.pushStack(r)}});var Ct=/[^\x20\t\r\n\f]+/g;dt.Callbacks=function(t){var e,i;t="string"==typeof t?(e=t,i={},dt.each(e.match(Ct)||[],function(t,e){i[e]=!0}),i):dt.extend({},t);var r,o,a,s,l=[],h=[],u=-1,c=function(){for(s=s||t.once,a=r=!0;h.length;u=-1)for(o=h.shift();++u<l.length;)!1===l[u].apply(o[0],o[1])&&t.stopOnFalse&&(u=l.length,o=!1);t.memory||(o=!1),r=!1,s&&(l=o?[]:"")},p={add:function(){return l&&(o&&!r&&(u=l.length-1,h.push(o)),function e(i){dt.each(i,function(i,r){ut(r)?t.unique&&p.has(r)||l.push(r):r&&r.length&&"string"!==n(r)&&e(r)})}(arguments),o&&!r&&c()),this},remove:function(){return dt.each(arguments,function(t,e){for(var i;-1<(i=dt.inArray(e,l,i));)l.splice(i,1),i<=u&&u--}),this},has:function(t){return t?-1<dt.inArray(t,l):0<l.length},empty:function(){return l&&(l=[]),this},disable:function(){return s=h=[],l=o="",this},disabled:function(){return!l},lock:function(){return s=h=[],o||r||(l=o=""),this},locked:function(){return!!s},fireWith:function(t,e){return s||(e=[t,(e=e||[]).slice?e.slice():e],h.push(e),r||c()),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!a}};return p},dt.extend({Deferred:function(e){var i=[["notify","progress",dt.Callbacks("memory"),dt.Callbacks("memory"),2],["resolve","done",dt.Callbacks("once memory"),dt.Callbacks("once memory"),0,"resolved"],["reject","fail",dt.Callbacks("once memory"),dt.Callbacks("once memory"),1,"rejected"]],n="pending",r={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return r.then(null,t)},pipe:function(){var t=arguments;return dt.Deferred(function(e){dt.each(i,function(i,n){var r=ut(t[n[4]])&&t[n[4]];o[n[1]](function(){var t=r&&r.apply(this,arguments);t&&ut(t.promise)?t.promise().progress(e.notify).done(e.resolve).fail(e.reject):e[n[0]+"With"](this,r?[t]:arguments)})}),t=null}).promise()},then:function(e,n,r){function o(e,i,n,r){return function(){var s=this,u=arguments,c=function(){var t,c;if(!(e<a)){if((t=n.apply(s,u))===i.promise())throw new TypeError("Thenable self-resolution");ut(c=t&&("object"==typeof t||"function"==typeof t)&&t.then)?r?c.call(t,o(a,i,l,r),o(a,i,h,r)):(a++,c.call(t,o(a,i,l,r),o(a,i,h,r),o(a,i,l,i.notifyWith))):(n!==l&&(s=void 0,u=[t]),(r||i.resolveWith)(s,u))}},p=r?c:function(){try{c()}catch(t){dt.Deferred.exceptionHook&&dt.Deferred.exceptionHook(t,p.stackTrace),a<=e+1&&(n!==h&&(s=void 0,u=[t]),i.rejectWith(s,u))}};e?p():(dt.Deferred.getStackHook&&(p.stackTrace=dt.Deferred.getStackHook()),t.setTimeout(p))}}var a=0;return dt.Deferred(function(t){i[0][3].add(o(0,t,ut(r)?r:l,t.notifyWith)),i[1][3].add(o(0,t,ut(e)?e:l)),i[2][3].add(o(0,t,ut(n)?n:h))}).promise()},promise:function(t){return null!=t?dt.extend(t,r):r}},o={};return dt.each(i,function(t,e){var a=e[2],s=e[5];r[e[1]]=a.add,s&&a.add(function(){n=s},i[3-t][2].disable,i[3-t][3].disable,i[0][2].lock,i[0][3].lock),a.add(e[3].fire),o[e[0]]=function(){return o[e[0]+"With"](this===o?void 0:this,arguments),this},o[e[0]+"With"]=a.fireWith}),r.promise(o),e&&e.call(o,o),o},when:function(t){var e=arguments.length,i=e,n=Array(i),r=tt.call(arguments),o=dt.Deferred(),a=function(t){return function(i){n[t]=this,r[t]=1<arguments.length?tt.call(arguments):i,--e||o.resolveWith(n,r)}};if(e<=1&&(u(t,o.done(a(i)).resolve,o.reject,!e),"pending"===o.state()||ut(r[i]&&r[i].then)))return o.then();for(;i--;)u(r[i],a(i),o.reject);return o.promise()}});var Et=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;dt.Deferred.exceptionHook=function(e,i){t.console&&t.console.warn&&e&&Et.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,i)},dt.readyException=function(e){t.setTimeout(function(){throw e})};var Tt=dt.Deferred();dt.fn.ready=function(t){return Tt.then(t).catch(function(t){dt.readyException(t)}),this},dt.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--dt.readyWait:dt.isReady)||(dt.isReady=!0)!==t&&0<--dt.readyWait||Tt.resolveWith($,[dt])}}),dt.ready.then=Tt.then,"complete"===$.readyState||"loading"!==$.readyState&&!$.documentElement.doScroll?t.setTimeout(dt.ready):($.addEventListener("DOMContentLoaded",c),t.addEventListener("load",c));var Pt=function(t,e,i,r,o,a,s){var l=0,h=t.length,u=null==i;if("object"===n(i))for(l in o=!0,i)Pt(t,e,l,i[l],!0,a,s);else if(void 0!==r&&(o=!0,ut(r)||(s=!0),u&&(s?(e.call(t,r),e=null):(u=e,e=function(t,e,i){return u.call(dt(t),i)})),e))for(;l<h;l++)e(t[l],i,s?r:r.call(t[l],l,e(t[l],i)));return o?t:u?e.call(t):h?e(t[0],i):a},Lt=/^-ms-/,It=/-([a-z])/g,Ot=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};f.uid=1,f.prototype={cache:function(t){var e=t[this.expando];return e||(e={},Ot(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,i){var n,r=this.cache(t);if("string"==typeof e)r[d(e)]=i;else for(n in e)r[d(n)]=e[n];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][d(e)]},access:function(t,e,i){return void 0===e||e&&"string"==typeof e&&void 0===i?this.get(t,e):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,n=t[this.expando];if(void 0!==n){if(void 0!==e){i=(e=Array.isArray(e)?e.map(d):(e=d(e))in n?[e]:e.match(Ct)||[]).length;for(;i--;)delete n[e[i]]}(void 0===e||dt.isEmptyObject(n))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!dt.isEmptyObject(e)}};var At=new f,Rt=new f,Mt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ft=/[A-Z]/g;dt.extend({hasData:function(t){return Rt.hasData(t)||At.hasData(t)},data:function(t,e,i){return Rt.access(t,e,i)},removeData:function(t,e){Rt.remove(t,e)},_data:function(t,e,i){return At.access(t,e,i)},_removeData:function(t,e){At.remove(t,e)}}),dt.fn.extend({data:function(t,e){var i,n,r,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(r=Rt.get(o),1===o.nodeType&&!At.get(o,"hasDataAttrs"))){for(i=a.length;i--;)a[i]&&0===(n=a[i].name).indexOf("data-")&&(n=d(n.slice(5)),g(o,n,r[n]));At.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each(function(){Rt.set(this,t)}):Pt(this,function(e){var i;if(o&&void 0===e)return void 0!==(i=Rt.get(o,t))?i:void 0!==(i=g(o,t))?i:void 0;this.each(function(){Rt.set(this,t,e)})},null,e,1<arguments.length,null,!0)},removeData:function(t){return this.each(function(){Rt.remove(this,t)})}}),dt.extend({queue:function(t,e,i){var n;if(t)return e=(e||"fx")+"queue",n=At.get(t,e),i&&(!n||Array.isArray(i)?n=At.access(t,e,dt.makeArray(i)):n.push(i)),n||[]},dequeue:function(t,e){var i=dt.queue(t,e=e||"fx"),n=i.length,r=i.shift(),o=dt._queueHooks(t,e);"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===e&&i.unshift("inprogress"),delete o.stop,r.call(t,function(){dt.dequeue(t,e)},o)),!n&&o&&o.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return At.get(t,i)||At.access(t,i,{empty:dt.Callbacks("once memory").add(function(){At.remove(t,[e+"queue",i])})})}}),dt.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?dt.queue(this[0],t):void 0===e?this:this.each(function(){var i=dt.queue(this,t,e);dt._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&dt.dequeue(this,t)})},dequeue:function(t){return this.each(function(){dt.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,r=dt.Deferred(),o=this,a=this.length,s=function(){--n||r.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(i=At.get(o[a],t+"queueHooks"))&&i.empty&&(n++,i.empty.add(s));return s(),r.promise(e)}});var kt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Nt=new RegExp("^(?:([+-])=|)("+kt+")([a-z%]*)$","i"),Dt=["Top","Right","Bottom","Left"],jt=$.documentElement,Gt=function(t){return dt.contains(t.ownerDocument,t)},zt={composed:!0};jt.getRootNode&&(Gt=function(t){return dt.contains(t.ownerDocument,t)||t.getRootNode(zt)===t.ownerDocument});var Bt=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&Gt(t)&&"none"===dt.css(t,"display")},Yt=function(t,e,i,n){var r,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];for(o in r=i.apply(t,n||[]),e)t.style[o]=a[o];return r},Xt={};dt.fn.extend({show:function(){return y(this,!0)},hide:function(){return y(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Bt(this)?dt(this).show():dt(this).hide()})}});var Wt=/^(?:checkbox|radio)$/i,Ut=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Vt=/^$|^module$|\/(?:java|ecma)script/i,Ht={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ht.optgroup=Ht.option,Ht.tbody=Ht.tfoot=Ht.colgroup=Ht.caption=Ht.thead,Ht.th=Ht.td;var qt,Zt,Kt=/<|&#?\w+;/;qt=$.createDocumentFragment().appendChild($.createElement("div")),(Zt=$.createElement("input")).setAttribute("type","radio"),Zt.setAttribute("checked","checked"),Zt.setAttribute("name","t"),qt.appendChild(Zt),ht.checkClone=qt.cloneNode(!0).cloneNode(!0).lastChild.checked,qt.innerHTML="<textarea>x</textarea>",ht.noCloneChecked=!!qt.cloneNode(!0).lastChild.defaultValue;var Jt=/^key/,$t=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Qt=/^([^.]*)(?:\.(.+)|)/;dt.event={global:{},add:function(t,e,i,n,r){var o,a,s,l,h,u,c,p,d,f,g,v=At.get(t);if(v)for(i.handler&&(i=(o=i).handler,r=o.selector),r&&dt.find.matchesSelector(jt,r),i.guid||(i.guid=dt.guid++),(l=v.events)||(l=v.events={}),(a=v.handle)||(a=v.handle=function(e){return"undefined"!=typeof dt&&dt.event.triggered!==e.type?dt.event.dispatch.apply(t,arguments):void 0}),h=(e=(e||"").match(Ct)||[""]).length;h--;)d=g=(s=Qt.exec(e[h])||[])[1],f=(s[2]||"").split(".").sort(),d&&(c=dt.event.special[d]||{},d=(r?c.delegateType:c.bindType)||d,c=dt.event.special[d]||{},u=dt.extend({type:d,origType:g,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&dt.expr.match.needsContext.test(r),namespace:f.join(".")},o),(p=l[d])||((p=l[d]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(t,n,f,a)||t.addEventListener&&t.addEventListener(d,a)),c.add&&(c.add.call(t,u),u.handler.guid||(u.handler.guid=i.guid)),r?p.splice(p.delegateCount++,0,u):p.push(u),dt.event.global[d]=!0)},remove:function(t,e,i,n,r){var o,a,s,l,h,u,c,p,d,f,g,v=At.hasData(t)&&At.get(t);if(v&&(l=v.events)){for(h=(e=(e||"").match(Ct)||[""]).length;h--;)if(d=g=(s=Qt.exec(e[h])||[])[1],f=(s[2]||"").split(".").sort(),d){for(c=dt.event.special[d]||{},p=l[d=(n?c.delegateType:c.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;o--;)u=p[o],!r&&g!==u.origType||i&&i.guid!==u.guid||s&&!s.test(u.namespace)||n&&n!==u.selector&&("**"!==n||!u.selector)||(p.splice(o,1),u.selector&&p.delegateCount--,c.remove&&c.remove.call(t,u));a&&!p.length&&(c.teardown&&!1!==c.teardown.call(t,f,v.handle)||dt.removeEvent(t,d,v.handle),delete l[d])}else for(d in l)dt.event.remove(t,d+e[h],i,n,!0);dt.isEmptyObject(l)&&At.remove(t,"handle events")}},dispatch:function(t){var e,i,n,r,o,a,s=dt.event.fix(t),l=new Array(arguments.length),h=(At.get(this,"events")||{})[s.type]||[],u=dt.event.special[s.type]||{};for(l[0]=s,e=1;e<arguments.length;e++)l[e]=arguments[e];if(s.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,s)){for(a=dt.event.handlers.call(this,s,h),e=0;(r=a[e++])&&!s.isPropagationStopped();)for(s.currentTarget=r.elem,i=0;(o=r.handlers[i++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!1!==o.namespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,void 0!==(n=((dt.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,l))&&!1===(s.result=n)&&(s.preventDefault(),s.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,s),s.result}},handlers:function(t,e){var i,n,r,o,a,s=[],l=e.delegateCount,h=t.target;if(l&&h.nodeType&&!("click"===t.type&&1<=t.button))for(;h!==this;h=h.parentNode||this)if(1===h.nodeType&&("click"!==t.type||!0!==h.disabled)){for(o=[],a={},i=0;i<l;i++)void 0===a[r=(n=e[i]).selector+" "]&&(a[r]=n.needsContext?-1<dt(r,this).index(h):dt.find(r,this,null,[h]).length),a[r]&&o.push(n);o.length&&s.push({elem:h,handlers:o})}return h=this,l<e.length&&s.push({elem:h,handlers:e.slice(l)}),s},addProp:function(t,e){Object.defineProperty(dt.Event.prototype,t,{enumerable:!0,configurable:!0,get:ut(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[dt.expando]?t:new dt.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return Wt.test(e.type)&&e.click&&o(e,"input")&&E(e,"click",b),!1},trigger:function(t){var e=this||t;return Wt.test(e.type)&&e.click&&o(e,"input")&&E(e,"click"),!0},_default:function(t){var e=t.target;return Wt.test(e.type)&&e.click&&o(e,"input")&&At.get(e,"click")||o(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},dt.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i)},dt.Event=function(t,e){if(!(this instanceof dt.Event))return new dt.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?b:w,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&dt.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[dt.expando]=!0},dt.Event.prototype={constructor:dt.Event,isDefaultPrevented:w,isPropagationStopped:w,isImmediatePropagationStopped:w,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=b,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=b,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=b,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},dt.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&Jt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&$t.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},dt.event.addProp),dt.each({focus:"focusin",blur:"focusout"},function(t,e){dt.event.special[t]={setup:function(){return E(this,t,S),!1},trigger:function(){return E(this,t),!0},delegateType:e}}),dt.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){dt.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=t.relatedTarget,r=t.handleObj;return n&&(n===this||dt.contains(this,n))||(t.type=r.origType,i=r.handler.apply(this,arguments),t.type=e),i}}}),dt.fn.extend({on:function(t,e,i,n){return C(this,t,e,i,n)},one:function(t,e,i,n){return C(this,t,e,i,n,1)},off:function(t,e,i){var n,r;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,dt(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(i=e,e=void 0),!1===i&&(i=w),this.each(function(){dt.event.remove(this,t,i,e)})}});var te=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,ee=/<script|<style|<link/i,ie=/checked\s*(?:[^=]|=\s*.checked.)/i,ne=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;dt.extend({htmlPrefilter:function(t){return t.replace(te,"<$1></$2>")},clone:function(t,e,i){var n,r,o,a,s,l,h,u=t.cloneNode(!0),c=Gt(t);if(!(ht.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||dt.isXMLDoc(t)))for(a=m(u),n=0,r=(o=m(t)).length;n<r;n++)s=o[n],l=a[n],"input"===(h=l.nodeName.toLowerCase())&&Wt.test(s.type)?l.checked=s.checked:"input"!==h&&"textarea"!==h||(l.defaultValue=s.defaultValue);if(e)if(i)for(o=o||m(t),a=a||m(u),n=0,r=o.length;n<r;n++)I(o[n],a[n]);else I(t,u);return 0<(a=m(u,"script")).length&&_(a,!c&&m(t,"script")),u},cleanData:function(t){for(var e,i,n,r=dt.event.special,o=0;void 0!==(i=t[o]);o++)if(Ot(i)){if(e=i[At.expando]){if(e.events)for(n in e.events)r[n]?dt.event.remove(i,n):dt.removeEvent(i,n,e.handle);i[At.expando]=void 0}i[Rt.expando]&&(i[Rt.expando]=void 0)}}}),dt.fn.extend({detach:function(t){return A(this,t,!0)},remove:function(t){return A(this,t)},text:function(t){return Pt(this,function(t){return void 0===t?dt.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return O(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||T(this,t).appendChild(t)})},prepend:function(){return O(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=T(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return O(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return O(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(dt.cleanData(m(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return dt.clone(this,t,e)})},html:function(t){return Pt(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!ee.test(t)&&!Ht[(Ut.exec(t)||["",""])[1].toLowerCase()]){t=dt.htmlPrefilter(t);try{for(;i<n;i++)1===(e=this[i]||{}).nodeType&&(dt.cleanData(m(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return O(this,arguments,function(e){var i=this.parentNode;dt.inArray(this,t)<0&&(dt.cleanData(m(this)),i&&i.replaceChild(e,this))},t)}}),dt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){dt.fn[t]=function(t){for(var i,n=[],r=dt(t),o=r.length-1,a=0;a<=o;a++)i=a===o?this:this.clone(!0),dt(r[a])[e](i),it.apply(n,i.get());return this.pushStack(n)}});var re=new RegExp("^("+kt+")(?!px)[a-z%]+$","i"),oe=function(e){var i=e.ownerDocument.defaultView;return i&&i.opener||(i=t),i.getComputedStyle(e)},ae=new RegExp(Dt.join("|"),"i");!function(){function e(){if(h){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",h.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",jt.appendChild(l).appendChild(h);var e=t.getComputedStyle(h);n="1%"!==e.top,s=12===i(e.marginLeft),h.style.right="60%",a=36===i(e.right),r=36===i(e.width),h.style.position="absolute",o=12===i(h.offsetWidth/3),jt.removeChild(l),h=null}}function i(t){return Math.round(parseFloat(t))}var n,r,o,a,s,l=$.createElement("div"),h=$.createElement("div");h.style&&(h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",ht.clearCloneStyle="content-box"===h.style.backgroundClip,dt.extend(ht,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),a},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),o}}))}();var se=["Webkit","Moz","ms"],le=$.createElement("div").style,he={},ue=/^(none|table(?!-c[ea]).+)/,ce=/^--/,pe={position:"absolute",visibility:"hidden",display:"block"},de={letterSpacing:"0",fontWeight:"400"};dt.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=R(t,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,a,s=d(e),l=ce.test(e),h=t.style;if(l||(e=F(s)),a=dt.cssHooks[e]||dt.cssHooks[s],void 0===i)return a&&"get"in a&&void 0!==(r=a.get(t,!1,n))?r:h[e];"string"==(o=typeof i)&&(r=Nt.exec(i))&&r[1]&&(i=v(t,e,r),o="number"),null!=i&&i==i&&("number"!==o||l||(i+=r&&r[3]||(dt.cssNumber[s]?"":"px")),ht.clearCloneStyle||""!==i||0!==e.indexOf("background")||(h[e]="inherit"),a&&"set"in a&&void 0===(i=a.set(t,i,n))||(l?h.setProperty(e,i):h[e]=i))}},css:function(t,e,i,n){var r,o,a,s=d(e);return ce.test(e)||(e=F(s)),(a=dt.cssHooks[e]||dt.cssHooks[s])&&"get"in a&&(r=a.get(t,!0,i)),void 0===r&&(r=R(t,e,n)),"normal"===r&&e in de&&(r=de[e]),""===i||i?(o=parseFloat(r),!0===i||isFinite(o)?o||0:r):r}}),dt.each(["height","width"],function(t,e){dt.cssHooks[e]={get:function(t,i,n){if(i)return!ue.test(dt.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?D(t,e,n):Yt(t,pe,function(){return D(t,e,n)})},set:function(t,i,n){var r,o=oe(t),a=!ht.scrollboxSize()&&"absolute"===o.position,s=(a||n)&&"border-box"===dt.css(t,"boxSizing",!1,o),l=n?N(t,e,n,s,o):0;return s&&a&&(l-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(o[e])-N(t,e,"border",!1,o)-.5)),l&&(r=Nt.exec(i))&&"px"!==(r[3]||"px")&&(t.style[e]=i,i=dt.css(t,e)),k(0,i,l)}}}),dt.cssHooks.marginLeft=M(ht.reliableMarginLeft,function(t,e){if(e)return(parseFloat(R(t,"marginLeft"))||t.getBoundingClientRect().left-Yt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),dt.each({margin:"",padding:"",border:"Width"},function(t,e){dt.cssHooks[t+e]={expand:function(i){for(var n=0,r={},o="string"==typeof i?i.split(" "):[i];n<4;n++)r[t+Dt[n]+e]=o[n]||o[n-2]||o[0];return r}},"margin"!==t&&(dt.cssHooks[t+e].set=k)}),dt.fn.extend({css:function(t,e){return Pt(this,function(t,e,i){var n,r,o={},a=0;if(Array.isArray(e)){for(n=oe(t),r=e.length;a<r;a++)o[e[a]]=dt.css(t,e[a],!1,n);return o}return void 0!==i?dt.style(t,e,i):dt.css(t,e)},t,e,1<arguments.length)}}),((dt.Tween=j).prototype={constructor:j,init:function(t,e,i,n,r,o){this.elem=t,this.prop=i,this.easing=r||dt.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=o||(dt.cssNumber[i]?"":"px")},cur:function(){var t=j.propHooks[this.prop];return t&&t.get?t.get(this):j.propHooks._default.get(this)},run:function(t){var e,i=j.propHooks[this.prop];return this.pos=e=this.options.duration?dt.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):j.propHooks._default.set(this),this}}).init.prototype=j.prototype,(j.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=dt.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){dt.fx.step[t.prop]?dt.fx.step[t.prop](t):1!==t.elem.nodeType||!dt.cssHooks[t.prop]&&null==t.elem.style[F(t.prop)]?t.elem[t.prop]=t.now:dt.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=j.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},dt.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},dt.fx=j.prototype.init,dt.fx.step={};var fe,ge,ve,ye,me=/^(?:toggle|show|hide)$/,_e=/queueHooks$/;dt.Animation=dt.extend(X,{tweeners:{"*":[function(t,e){var i=this.createTween(t,e);return v(i.elem,t,Nt.exec(e),i),i}]},tweener:function(t,e){ut(t)?(e=t,t=["*"]):t=t.match(Ct);for(var i,n=0,r=t.length;n<r;n++)i=t[n],(X.tweeners[i]=X.tweeners[i]||[]).unshift(e)},prefilters:[function(t,e,i){var n,r,o,a,s,l,h,u,c="width"in e||"height"in e,p=this,d={},f=t.style,g=t.nodeType&&Bt(t),v=At.get(t,"fxshow");for(n in i.queue||(null==(a=dt._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,dt.queue(t,"fx").length||a.empty.fire()})})),e)if(r=e[n],me.test(r)){if(delete e[n],o=o||"toggle"===r,r===(g?"hide":"show")){if("show"!==r||!v||void 0===v[n])continue;g=!0}d[n]=v&&v[n]||dt.style(t,n)}if((l=!dt.isEmptyObject(e))||!dt.isEmptyObject(d))for(n in c&&1===t.nodeType&&(i.overflow=[f.overflow,f.overflowX,f.overflowY],null==(h=v&&v.display)&&(h=At.get(t,"display")),"none"===(u=dt.css(t,"display"))&&(h?u=h:(y([t],!0),h=t.style.display||h,u=dt.css(t,"display"),y([t]))),("inline"===u||"inline-block"===u&&null!=h)&&"none"===dt.css(t,"float")&&(l||(p.done(function(){f.display=h}),null==h&&(u=f.display,h="none"===u?"":u)),f.display="inline-block")),i.overflow&&(f.overflow="hidden",p.always(function(){f.overflow=i.overflow[0],f.overflowX=i.overflow[1],f.overflowY=i.overflow[2]})),l=!1,d)l||(v?"hidden"in v&&(g=v.hidden):v=At.access(t,"fxshow",{display:h}),o&&(v.hidden=!g),g&&y([t],!0),p.done(function(){for(n in g||y([t]),At.remove(t,"fxshow"),d)dt.style(t,n,d[n])})),l=Y(g?v[n]:0,n,p),n in v||(v[n]=l.start,g&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?X.prefilters.unshift(t):X.prefilters.push(t)}}),dt.speed=function(t,e,i){var n=t&&"object"==typeof t?dt.extend({},t):{complete:i||!i&&e||ut(t)&&t,duration:t,easing:i&&e||e&&!ut(e)&&e};return dt.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration=n.duration in dt.fx.speeds?dt.fx.speeds[n.duration]:dt.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){ut(n.old)&&n.old.call(this),n.queue&&dt.dequeue(this,n.queue)},n},dt.fn.extend({fadeTo:function(t,e,i,n){return this.filter(Bt).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var r=dt.isEmptyObject(t),o=dt.speed(e,i,n),a=function(){var e=X(this,dt.extend({},t),o);(r||At.get(this,"finish"))&&e.stop(!0)};return a.finish=a,r||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",o=dt.timers,a=At.get(this);if(r)a[r]&&a[r].stop&&n(a[r]);else for(r in a)a[r]&&a[r].stop&&_e.test(r)&&n(a[r]);for(r=o.length;r--;)o[r].elem!==this||null!=t&&o[r].queue!==t||(o[r].anim.stop(i),e=!1,o.splice(r,1));!e&&i||dt.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,i=At.get(this),n=i[t+"queue"],r=i[t+"queueHooks"],o=dt.timers,a=n?n.length:0;for(i.finish=!0,dt.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<a;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish})}}),dt.each(["toggle","show","hide"],function(t,e){var i=dt.fn[e];dt.fn[e]=function(t,n,r){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(B(e,!0),t,n,r)}}),dt.each({slideDown:B("show"),slideUp:B("hide"),slideToggle:B("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){dt.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),dt.timers=[],dt.fx.tick=function(){var t,e=0,i=dt.timers;for(fe=Date.now();e<i.length;e++)(t=i[e])()||i[e]!==t||i.splice(e--,1);i.length||dt.fx.stop(),fe=void 0},dt.fx.timer=function(t){dt.timers.push(t),dt.fx.start()},dt.fx.interval=13,dt.fx.start=function(){ge||(ge=!0,G())},dt.fx.stop=function(){ge=null},dt.fx.speeds={slow:600,fast:200,_default:400},dt.fn.delay=function(e,i){return e=dt.fx&&dt.fx.speeds[e]||e,i=i||"fx",this.queue(i,function(i,n){var r=t.setTimeout(i,e);n.stop=function(){t.clearTimeout(r)}})},ve=$.createElement("input"),ye=$.createElement("select").appendChild($.createElement("option")),ve.type="checkbox",ht.checkOn=""!==ve.value,ht.optSelected=ye.selected,(ve=$.createElement("input")).value="t",ve.type="radio",ht.radioValue="t"===ve.value;var xe,be=dt.expr.attrHandle;dt.fn.extend({attr:function(t,e){return Pt(this,dt.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){dt.removeAttr(this,t)})}}),dt.extend({attr:function(t,e,i){var n,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof t.getAttribute?dt.prop(t,e,i):(1===o&&dt.isXMLDoc(t)||(r=dt.attrHooks[e.toLowerCase()]||(dt.expr.match.bool.test(e)?xe:void 0)),void 0!==i?null===i?void dt.removeAttr(t,e):r&&"set"in r&&void 0!==(n=r.set(t,i,e))?n:(t.setAttribute(e,i+""),i):r&&"get"in r&&null!==(n=r.get(t,e))?n:null==(n=dt.find.attr(t,e))?void 0:n)},attrHooks:{type:{set:function(t,e){if(!ht.radioValue&&"radio"===e&&o(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}},removeAttr:function(t,e){var i,n=0,r=e&&e.match(Ct);if(r&&1===t.nodeType)for(;i=r[n++];)t.removeAttribute(i)}}),xe={set:function(t,e,i){return!1===e?dt.removeAttr(t,i):t.setAttribute(i,i),i}},dt.each(dt.expr.match.bool.source.match(/\w+/g),function(t,e){var i=be[e]||dt.find.attr;be[e]=function(t,e,n){var r,o,a=e.toLowerCase();return n||(o=be[a],be[a]=r,r=null!=i(t,e,n)?a:null,be[a]=o),r}});var we=/^(?:input|select|textarea|button)$/i,Se=/^(?:a|area)$/i;dt.fn.extend({prop:function(t,e){return Pt(this,dt.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each(function(){delete this[dt.propFix[t]||t]})}}),dt.extend({prop:function(t,e,i){var n,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&dt.isXMLDoc(t)||(e=dt.propFix[e]||e,r=dt.propHooks[e]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(t,i,e))?n:t[e]=i:r&&"get"in r&&null!==(n=r.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=dt.find.attr(t,"tabindex");return e?parseInt(e,10):we.test(t.nodeName)||Se.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),ht.optSelected||(dt.propHooks.selected={get:function(t){return null},set:function(t){}}),dt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){dt.propFix[this.toLowerCase()]=this}),dt.fn.extend({addClass:function(t){var e,i,n,r,o,a,s,l=0;if(ut(t))return this.each(function(e){dt(this).addClass(t.call(this,e,U(this)))});if((e=V(t)).length)for(;i=this[l++];)if(r=U(i),n=1===i.nodeType&&" "+W(r)+" "){for(a=0;o=e[a++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");r!==(s=W(n))&&i.setAttribute("class",s)}return this},removeClass:function(t){var e,i,n,r,o,a,s,l=0;if(ut(t))return this.each(function(e){dt(this).removeClass(t.call(this,e,U(this)))});if(!arguments.length)return this.attr("class","");if((e=V(t)).length)for(;i=this[l++];)if(r=U(i),n=1===i.nodeType&&" "+W(r)+" "){for(a=0;o=e[a++];)for(;-1<n.indexOf(" "+o+" ");)n=n.replace(" "+o+" "," ");r!==(s=W(n))&&i.setAttribute("class",s)}return this},toggleClass:function(t,e){var i=typeof t,n="string"===i||Array.isArray(t);return"boolean"==typeof e&&n?e?this.addClass(t):this.removeClass(t):ut(t)?this.each(function(i){dt(this).toggleClass(t.call(this,i,U(this),e),e)}):this.each(function(){var e,r,o,a;if(n)for(r=0,o=dt(this),a=V(t);e=a[r++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else void 0!==t&&"boolean"!==i||((e=U(this))&&At.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":At.get(this,"__className__")||""))})},hasClass:function(t){var e,i,n=0;for(e=" "+t+" ";i=this[n++];)if(1===i.nodeType&&-1<(" "+W(U(i))+" ").indexOf(e))return!0;return!1}});var Ce=/\r/g;dt.fn.extend({val:function(t){var e,i,n,r=this[0];return arguments.length?(n=ut(t),this.each(function(i){var r;1===this.nodeType&&(null==(r=n?t.call(this,i,dt(this).val()):t)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=dt.map(r,function(t){return null==t?"":t+""})),(e=dt.valHooks[this.type]||dt.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))})):r?(e=dt.valHooks[r.type]||dt.valHooks[r.nodeName.toLowerCase()])&&"get"in e&&void 0!==(i=e.get(r,"value"))?i:"string"==typeof(i=r.value)?i.replace(Ce,""):null==i?"":i:void 0}}),dt.extend({valHooks:{option:{get:function(t){var e=dt.find.attr(t,"value");return null!=e?e:W(dt.text(t))}},select:{get:function(t){var e,i,n,r=t.options,a=t.selectedIndex,s="select-one"===t.type,l=s?null:[],h=s?a+1:r.length;for(n=a<0?h:s?a:0;n<h;n++)if(((i=r[n]).selected||n===a)&&!i.disabled&&(!i.parentNode.disabled||!o(i.parentNode,"optgroup"))){if(e=dt(i).val(),s)return e;l.push(e)}return l},set:function(t,e){for(var i,n,r=t.options,o=dt.makeArray(e),a=r.length;a--;)((n=r[a]).selected=-1<dt.inArray(dt.valHooks.option.get(n),o))&&(i=!0);return i||(t.selectedIndex=-1),o}}}}),dt.each(["radio","checkbox"],function(){dt.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=-1<dt.inArray(dt(t).val(),e)}},ht.checkOn||(dt.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),ht.focusin="onfocusin"in t;var Ee=/^(?:focusinfocus|focusoutblur)$/,Te=function(t){t.stopPropagation()};dt.extend(dt.event,{trigger:function(e,i,n,r){var o,a,s,l,h,u,c,p,d=[n||$],f=at.call(e,"type")?e.type:e,g=at.call(e,"namespace")?e.namespace.split("."):[];if(a=p=s=n=n||$,3!==n.nodeType&&8!==n.nodeType&&!Ee.test(f+dt.event.triggered)&&(-1<f.indexOf(".")&&(f=(g=f.split(".")).shift(),g.sort()),h=f.indexOf(":")<0&&"on"+f,(e=e[dt.expando]?e:new dt.Event(f,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=g.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),i=null==i?[e]:dt.makeArray(i,[e]),c=dt.event.special[f]||{},r||!c.trigger||!1!==c.trigger.apply(n,i))){if(!r&&!c.noBubble&&!ct(n)){for(Ee.test((l=c.delegateType||f)+f)||(a=a.parentNode);a;a=a.parentNode)d.push(a),s=a;s===(n.ownerDocument||$)&&d.push(s.defaultView||s.parentWindow||t)}for(o=0;(a=d[o++])&&!e.isPropagationStopped();)p=a,e.type=1<o?l:c.bindType||f,(u=(At.get(a,"events")||{})[e.type]&&At.get(a,"handle"))&&u.apply(a,i),(u=h&&a[h])&&u.apply&&Ot(a)&&(e.result=u.apply(a,i),!1===e.result&&e.preventDefault());return e.type=f,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(d.pop(),i)||!Ot(n)||h&&ut(n[f])&&!ct(n)&&((s=n[h])&&(n[h]=null),dt.event.triggered=f,e.isPropagationStopped()&&p.addEventListener(f,Te),n[f](),e.isPropagationStopped()&&p.removeEventListener(f,Te),dt.event.triggered=void 0,s&&(n[h]=s)),e.result}},simulate:function(t,e,i){var n=dt.extend(new dt.Event,i,{type:t,isSimulated:!0});dt.event.trigger(n,null,e)}}),dt.fn.extend({trigger:function(t,e){return this.each(function(){dt.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];if(i)return dt.event.trigger(t,e,i,!0)}}),ht.focusin||dt.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(t){dt.event.simulate(e,t.target,dt.event.fix(t))};dt.event.special[e]={setup:function(){var n=this.ownerDocument||this,r=At.access(n,e);r||n.addEventListener(t,i,!0),At.access(n,e,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this,r=At.access(n,e)-1;r?At.access(n,e,r):(n.removeEventListener(t,i,!0),At.remove(n,e))}}});var Pe=t.location,Le=Date.now(),Ie=/\?/;dt.parseXML=function(e){var i;if(!e||"string"!=typeof e)return null;try{i=(new t.DOMParser).parseFromString(e,"text/xml")}catch(e){i=void 0}return i&&!i.getElementsByTagName("parsererror").length||dt.error("Invalid XML: "+e),i};var Oe=/\[\]$/,Ae=/\r?\n/g,Re=/^(?:submit|button|image|reset|file)$/i,Me=/^(?:input|select|textarea|keygen)/i;dt.param=function(t,e){var i,n=[],r=function(t,e){var i=ut(e)?e():e;n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==i?"":i)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!dt.isPlainObject(t))dt.each(t,function(){r(this.name,this.value)});else for(i in t)H(i,t[i],e,r);return n.join("&")},dt.fn.extend({serialize:function(){return dt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=dt.prop(this,"elements");return t?dt.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!dt(this).is(":disabled")&&Me.test(this.nodeName)&&!Re.test(t)&&(this.checked||!Wt.test(t))}).map(function(t,e){var i=dt(this).val();return null==i?null:Array.isArray(i)?dt.map(i,function(t){return{name:e.name,value:t.replace(Ae,"\r\n")}}):{name:e.name,value:i.replace(Ae,"\r\n")}}).get()}});var Fe=/%20/g,ke=/#.*$/,Ne=/([?&])_=[^&]*/,De=/^(.*?):[ \t]*([^\r\n]*)$/gm,je=/^(?:GET|HEAD)$/,Ge=/^\/\//,ze={},Be={},Ye="*/".concat("*"),Xe=$.createElement("a");Xe.href=Pe.href,dt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Pe.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Pe.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ye,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":dt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?K(K(t,dt.ajaxSettings),e):K(dt.ajaxSettings,t)},ajaxPrefilter:q(ze),ajaxTransport:q(Be),ajax:function(e,i){function n(e,i,n,s){var h,p,d,x,b,w=i;u||(u=!0,l&&t.clearTimeout(l),r=void 0,a=s||"",S.readyState=0<e?4:0,h=200<=e&&e<300||304===e,n&&(x=function(t,e,i){for(var n,r,o,a,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(r in s)if(s[r]&&s[r].test(n)){l.unshift(r);break}if(l[0]in i)o=l[0];else{for(r in i){if(!l[0]||t.converters[r+" "+l[0]]){o=r;break}a||(a=r)}o=o||a}if(o)return o!==l[0]&&l.unshift(o),i[o]}(f,S,n)),x=function(t,e,i,n){var r,o,a,s,l,h={},u=t.dataTypes.slice();if(u[1])for(a in t.converters)h[a.toLowerCase()]=t.converters[a];for(o=u.shift();o;)if(t.responseFields[o]&&(i[t.responseFields[o]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=h[l+" "+o]||h["* "+o]))for(r in h)if((s=r.split(" "))[1]===o&&(a=h[l+" "+s[0]]||h["* "+s[0]])){!0===a?a=h[r]:!0!==h[r]&&(o=s[0],u.unshift(s[1]));break}if(!0!==a)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(t){return{state:"parsererror",error:a?t:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}(f,x,S,h),h?(f.ifModified&&((b=S.getResponseHeader("Last-Modified"))&&(dt.lastModified[o]=b),(b=S.getResponseHeader("etag"))&&(dt.etag[o]=b)),204===e||"HEAD"===f.type?w="nocontent":304===e?w="notmodified":(w=x.state,p=x.data,h=!(d=x.error))):(d=w,!e&&w||(w="error",e<0&&(e=0))),S.status=e,S.statusText=(i||w)+"",h?y.resolveWith(g,[p,w,S]):y.rejectWith(g,[S,w,d]),S.statusCode(_),_=void 0,c&&v.trigger(h?"ajaxSuccess":"ajaxError",[S,f,h?p:d]),m.fireWith(g,[S,w]),c&&(v.trigger("ajaxComplete",[S,f]),--dt.active||dt.event.trigger("ajaxStop")))}"object"==typeof e&&(i=e,e=void 0);var r,o,a,s,l,h,u,c,p,d,f=dt.ajaxSetup({},i=i||{}),g=f.context||f,v=f.context&&(g.nodeType||g.jquery)?dt(g):dt.event,y=dt.Deferred(),m=dt.Callbacks("once memory"),_=f.statusCode||{},x={},b={},w="canceled",S={readyState:0,getResponseHeader:function(t){var e;if(u){if(!s)for(s={};e=De.exec(a);)s[e[1].toLowerCase()+" "]=(s[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=s[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return u?a:null},setRequestHeader:function(t,e){return null==u&&(t=b[t.toLowerCase()]=b[t.toLowerCase()]||t,x[t]=e),this},overrideMimeType:function(t){return null==u&&(f.mimeType=t),this},statusCode:function(t){var e;if(t)if(u)S.always(t[S.status]);else for(e in t)_[e]=[_[e],t[e]];return this},abort:function(t){var e=t||w;return r&&r.abort(e),n(0,e),this}};if(y.promise(S),f.url=((e||f.url||Pe.href)+"").replace(Ge,Pe.protocol+"//"),f.type=i.method||i.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(Ct)||[""],null==f.crossDomain){h=$.createElement("a");try{h.href=f.url,h.href=h.href,f.crossDomain=Xe.protocol+"//"+Xe.host!=h.protocol+"//"+h.host}catch(e){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=dt.param(f.data,f.traditional)),Z(ze,f,i,S),u)return S;for(p in(c=dt.event&&f.global)&&0==dt.active++&&dt.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!je.test(f.type),o=f.url.replace(ke,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Fe,"+")):(d=f.url.slice(o.length),f.data&&(f.processData||"string"==typeof f.data)&&(o+=(Ie.test(o)?"&":"?")+f.data,delete f.data),!1===f.cache&&(o=o.replace(Ne,"$1"),d=(Ie.test(o)?"&":"?")+"_="+Le+++d),f.url=o+d),f.ifModified&&(dt.lastModified[o]&&S.setRequestHeader("If-Modified-Since",dt.lastModified[o]),dt.etag[o]&&S.setRequestHeader("If-None-Match",dt.etag[o])),(f.data&&f.hasContent&&!1!==f.contentType||i.contentType)&&S.setRequestHeader("Content-Type",f.contentType),S.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Ye+"; q=0.01":""):f.accepts["*"]),f.headers)S.setRequestHeader(p,f.headers[p]);if(f.beforeSend&&(!1===f.beforeSend.call(g,S,f)||u))return S.abort();if(w="abort",m.add(f.complete),S.done(f.success),S.fail(f.error),r=Z(Be,f,i,S)){if(S.readyState=1,c&&v.trigger("ajaxSend",[S,f]),u)return S;f.async&&0<f.timeout&&(l=t.setTimeout(function(){S.abort("timeout")},f.timeout));try{u=!1,r.send(x,n)}catch(e){if(u)throw e;n(-1,e)}}else n(-1,"No Transport");return S},getJSON:function(t,e,i){return dt.get(t,e,i,"json")},getScript:function(t,e){return dt.get(t,void 0,e,"script")}}),dt.each(["get","post"],function(t,e){dt[e]=function(t,i,n,r){return ut(i)&&(r=r||n,n=i,i=void 0),dt.ajax(dt.extend({url:t,type:e,dataType:r,data:i,success:n},dt.isPlainObject(t)&&t))}}),dt._evalUrl=function(t,e){return dt.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){dt.globalEval(t,e)}})},dt.fn.extend({wrapAll:function(t){var e;return this[0]&&(ut(t)&&(t=t.call(this[0])),e=dt(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return ut(t)?this.each(function(e){dt(this).wrapInner(t.call(this,e))}):this.each(function(){var e=dt(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=ut(t);return this.each(function(i){dt(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){dt(this).replaceWith(this.childNodes)}),this}}),dt.expr.pseudos.hidden=function(t){return!dt.expr.pseudos.visible(t)},dt.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},dt.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(t){}};var We={0:200,1223:204},Ue=dt.ajaxSettings.xhr();ht.cors=!!Ue&&"withCredentials"in Ue,ht.ajax=Ue=!!Ue,dt.ajaxTransport(function(e){var i,n;if(ht.cors||Ue&&!e.crossDomain)return{send:function(r,o){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];for(a in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)s.setRequestHeader(a,r[a]);i=function(t){return function(){i&&(i=n=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===t?s.abort():"error"===t?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(We[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=i(),n=s.onerror=s.ontimeout=i("error"),void 0!==s.onabort?s.onabort=n:s.onreadystatechange=function(){4===s.readyState&&t.setTimeout(function(){i&&n()})},i=i("abort");try{s.send(e.hasContent&&e.data||null)}catch(r){if(i)throw r}},abort:function(){i&&i()}}}),dt.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),dt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return dt.globalEval(t),t}}}),dt.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),dt.ajaxTransport("script",function(t){var e,i;if(t.crossDomain||t.scriptAttrs)return{send:function(n,r){e=dt("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){e.remove(),i=null,t&&r("error"===t.type?404:200,t.type)}),$.head.appendChild(e[0])},abort:function(){i&&i()}}});var Ve,He=[],qe=/(=)\?(?=&|$)|\?\?/;dt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=He.pop()||dt.expando+"_"+Le++;return this[t]=!0,t}}),dt.ajaxPrefilter("json jsonp",function(e,i,n){var r,o,a,s=!1!==e.jsonp&&(qe.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&qe.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=ut(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(qe,"$1"+r):!1!==e.jsonp&&(e.url+=(Ie.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return a||dt.error(r+" was not called"),a[0]},e.dataTypes[0]="json",o=t[r],t[r]=function(){a=arguments},n.always(function(){void 0===o?dt(t).removeProp(r):t[r]=o,e[r]&&(e.jsonpCallback=i.jsonpCallback,He.push(r)),a&&ut(o)&&o(a[0]),a=o=void 0}),"script"}),ht.createHTMLDocument=((Ve=$.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ve.childNodes.length),dt.parseHTML=function(t,e,i){return"string"!=typeof t?[]:("boolean"==typeof e&&(i=e,e=!1),e||(ht.createHTMLDocument?((n=(e=$.implementation.createHTMLDocument("")).createElement("base")).href=$.location.href,e.head.appendChild(n)):e=$),o=!i&&[],(r=_t.exec(t))?[e.createElement(r[1])]:(r=x([t],e,o),o&&o.length&&dt(o).remove(),dt.merge([],r.childNodes)));var n,r,o},dt.fn.load=function(t,e,i){var n,r,o,a=this,s=t.indexOf(" ");return-1<s&&(n=W(t.slice(s)),t=t.slice(0,s)),ut(e)?(i=e,e=void 0):e&&"object"==typeof e&&(r="POST"),0<a.length&&dt.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){o=arguments,a.html(n?dt("<div>").append(dt.parseHTML(t)).find(n):t)}).always(i&&function(t,e){a.each(function(){i.apply(this,o||[t.responseText,e,t])})}),this},dt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){dt.fn[e]=function(t){return this.on(e,t)}}),dt.expr.pseudos.animated=function(t){return dt.grep(dt.timers,function(e){return t===e.elem}).length},dt.offset={setOffset:function(t,e,i){var n,r,o,a,s,l,h=dt.css(t,"position"),u=dt(t),c={};"static"===h&&(t.style.position="relative"),s=u.offset(),o=dt.css(t,"top"),l=dt.css(t,"left"),("absolute"===h||"fixed"===h)&&-1<(o+l).indexOf("auto")?(a=(n=u.position()).top,r=n.left):(a=parseFloat(o)||0,r=parseFloat(l)||0),ut(e)&&(e=e.call(t,i,dt.extend({},s))),null!=e.top&&(c.top=e.top-s.top+a),null!=e.left&&(c.left=e.left-s.left+r),"using"in e?e.using.call(t,c):u.css(c)}},dt.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){dt.offset.setOffset(this,t,e)});var e,i,n=this[0];return n?n.getClientRects().length?(e=n.getBoundingClientRect(),i=n.ownerDocument.defaultView,{top:e.top+i.pageYOffset,left:e.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,i,n=this[0],r={top:0,left:0};if("fixed"===dt.css(n,"position"))e=n.getBoundingClientRect();else{for(e=this.offset(),i=n.ownerDocument,t=n.offsetParent||i.documentElement;t&&(t===i.body||t===i.documentElement)&&"static"===dt.css(t,"position");)t=t.parentNode;t&&t!==n&&1===t.nodeType&&((r=dt(t).offset()).top+=dt.css(t,"borderTopWidth",!0),r.left+=dt.css(t,"borderLeftWidth",!0))}return{top:e.top-r.top-dt.css(n,"marginTop",!0),left:e.left-r.left-dt.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===dt.css(t,"position");)t=t.offsetParent;return t||jt})}}),dt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var i="pageYOffset"===e;dt.fn[t]=function(n){return Pt(this,function(t,n,r){var o;if(ct(t)?o=t:9===t.nodeType&&(o=t.defaultView),void 0===r)return o?o[e]:t[n];o?o.scrollTo(i?o.pageXOffset:r,i?r:o.pageYOffset):t[n]=r},t,n,arguments.length)}}),dt.each(["top","left"],function(t,e){dt.cssHooks[e]=M(ht.pixelPosition,function(t,i){if(i)return i=R(t,e),re.test(i)?dt(t).position()[e]+"px":i})}),dt.each({Height:"height",Width:"width"},function(t,e){dt.each({padding:"inner"+t,content:e,"":"outer"+t},function(i,n){dt.fn[n]=function(r,o){var a=arguments.length&&(i||"boolean"!=typeof r),s=i||(!0===r||!0===o?"margin":"border");return Pt(this,function(e,i,r){var o;return ct(e)?0===n.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===r?dt.css(e,i,s):dt.style(e,i,r,s)},e,a?r:void 0,a)}})}),dt.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){dt.fn[e]=function(t,i){return 0<arguments.length?this.on(e,null,t,i):this.trigger(e)}}),dt.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),dt.fn.extend({bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}}),dt.proxy=function(t,e){var i,n,r;if("string"==typeof e&&(i=t[e],e=t,t=i),ut(t))return n=tt.call(arguments,2),(r=function(){return t.apply(e||this,n.concat(tt.call(arguments)))}).guid=t.guid=t.guid||dt.guid++,r},dt.holdReady=function(t){t?dt.readyWait++:dt.ready(!0)},dt.isArray=Array.isArray,dt.parseJSON=JSON.parse,dt.nodeName=o,dt.isFunction=ut,dt.isWindow=ct,dt.camelCase=d,dt.type=n,dt.now=Date.now,dt.isNumeric=function(t){var e=dt.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return dt});var Ze=t.jQuery,Ke=t.$;return dt.noConflict=function(e){return t.$===dt&&(t.$=Ke),e&&t.jQuery===dt&&(t.jQuery=Ze),dt},e||(t.jQuery=t.$=dt),dt});